<!DOCTYPE html>
<html>
<head>
    <title>View Dataset</title>
    <style>
        td, th {
            max-width: 500px;
            word-wrap: break-word;
            border: 1px solid black; /* borders around each cell */
            padding: 5px;  /* some padding so text isn't right against the cell borders */
            vertical-align: top;
        }
        .wide {
            width: 200px;  /* adjust to suit your needs */
        }

        
        
    </style>
</head>
<body>
    <!-- Filter Form -->
    <form method="POST">
        <label for="syntax">Syntax:</label>
        <select name="syntax" id="syntax">
            <option value="" {% if syntax == '' %}selected{% endif %}>All</option>
            <option value="0" {% if syntax == '0' %}selected{% endif %}>0</option>
            <option value="1" {% if syntax == '1' %}selected{% endif %}>1</option>
        </select>

        <label for="relevance">Relevance:</label>
        <select name="relevance" id="relevance">
            <option value="" {% if relevance == '' %}selected{% endif %}>All</option>
            <option value="0" {% if relevance == '0' %}selected{% endif %}>0</option>
            <option value="1" {% if relevance == '1' %}selected{% endif %}>1</option>
            <option value="2" {% if relevance == '2' %}selected{% endif %}>2</option>
        </select>


        <div class="checkbox-group">
            Level:<br>
            {% for lvl in level_list %}
            <input type="checkbox" id="level{{lvl}}" name="level" value="{{lvl}}" {% if lvl in level %}checked{% endif %}>
            <label for="level{{lvl}}">{{lvl}}</label><br>
            {% endfor %}
        </div>

        

        <label for="generate_bug">Generated Bug:</label>
        <select name="generate_bug" id="generate_bug">
            <option value="" {% if generate_bug == '' %}selected{% endif %}>All</option>
            <option value="0" {% if generate_bug == '0' %}selected{% endif %}>0</option>
            <option value="1" {% if generate_bug == '1' %}selected{% endif %}>1</option>
        </select>

        <button type="submit">Filter</button>
    </form>

    <h1>Number of elements for this filter: {{length}}</h1>

    <!-- Data Table -->
    <table>
        <thead>
            <tr>
                <!-- Define your columns, for example: -->
            
                
                <th>ID</th>
                <th>TITLE</th>
                <th>Level</th>
                <th class="wide">system role</th>
                <th class="wide">prompt</th>
                
                <th class="wide">response</th>
                <th class="wide">Code</th>
                <th class="wide">output</th>
                <th>Syntax</th>
                <th>Relevance</th>
                <th>Generated Bug</th>
                <th class="wide">comment</th>

                <!-- More columns -->
            </tr>
        </thead>
        <tbody>
            {% for item in page_items %}
                <tr>
                    <td>{{ item.id|safe }}</td>
                    <td>{{ item.title|safe }}</td>
                    <td>{{ item.level }}</td>
                    <td class="wide">{{ item.sys_role }}</td>
                    <td class="wide">{{ item.prompt|safe }}</td>
                    
                    <td class="wide">{{ item.response|safe }}</td>
                    <td class="wide">{{ item.code|yaml }}</td>
                    <td class="wide">{{ item.output|yaml }}</td>
                    <td>{{ item.syntax }}</td>
                    <td>{{ item.relevance }}</td>
                    
                    <td>{{ item.generate_bug }}</td>
                    <td class="wide"><pre>{{ item.comment| safe }}</pre></td>
                    

                    <!-- More columns -->
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination Links -->
    <div>
        {% if page > 1 %}
            <a href="{{ url_for('view', page=page-1, syntax=request.args.get('syntax'), relevance=request.args.get('relevance'), level=request.args.get('level'), generate_bug=request.args.get('generate_bug')) }}">Prev</a>
        {% endif %}
        {% if has_next %}
            <a href="{{ url_for('view', page=page+1, syntax=request.args.get('syntax'), relevance=request.args.get('relevance'), level=request.args.get('level'), generate_bug=request.args.get('generate_bug')) }}">Next</a>
        {% endif %}
    </div>
</body>
</html>
