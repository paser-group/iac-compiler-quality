- become: true
  handlers:
  - name: restart nginx
    service:
      name: nginx
      state: restarted
  hosts: webserver
  name: Install and configure nginx
  tasks:
  - apt:
      update_cache: true
    name: Update apt cache
  - apt:
      name: nginx
      state: present
    name: Install nginx
  - name: Start nginx service
    service:
      name: nginx
      state: started
  - copy:
      dest: /etc/nginx/sites-enabled/default
      src: /etc/nginx/sites-available/default
    name: Configure nginx default site
    notify:
    - restart nginx
  - lineinfile:
      line: <h1>Welcome to my website!</h1>
      path: /usr/share/nginx/html/index.html
      regexp: <h1>
    name: Set nginx welcome message
    notify:
    - restart nginx
