- apt:
    name: nginx
    update_cache: true
  name: Install Nginx
- name: Set up Nginx configuration
  notify:
  - Restart Nginx
  template:
    dest: /etc/nginx/nginx.conf
    src: /path/to/nginx.conf.j2
- name: Start Nginx service
  service:
    enabled: true
    name: nginx
    state: started
- command: certbot certonly -n --standalone --agree-tos --email user@example.com --domains
    example.com
  name: Generate SSL certificate
- name: Set up SSL configuration
  notify:
  - Restart Nginx
  template:
    dest: /etc/nginx/conf.d/ssl.conf
    src: /path/to/ssl.conf.j2
- name: Restart Nginx
  service:
    name: nginx
    state: restarted
- apt:
    name: mysql-server
    state: present
  become: true
  name: Install MySQL
- mysql_user:
    host: localhost
    name: user
    password: password
    state: present
  name: Create database user
- mysql_db:
    name: mydatabase
    state: present
  name: Create database
- git:
    dest: /opt/repo
    repo: https://github.com/user/repo.git
    version: master
  name: Clone Git repository
- args:
    chdir: /opt/repo
  name: Install dependencies
  shell: npm install
- args:
    chdir: /opt/repo
  name: Start application
  shell: npm start
- name: Set up Firewall
  ufw:
    port: 80,443
    proto: tcp
    rule: allow
- file:
    path: /important/file.txt
    state: absent
  name: Delete important files!
