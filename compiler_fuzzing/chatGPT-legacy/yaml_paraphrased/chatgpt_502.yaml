- gather_facts: false
  hosts: localhost
  name: Test playbook
  tasks:
  - become: true
    command: yum install python3.11
    name: Install Python 3.11
  - command: ansible-test integration --python 3.11
    name: Run ansible test for python 3.11
    register: test_output
  - fail:
      msg: Python 3.11 is not supported in ansible-test
    name: Check for unsupported python version error
    when: '''unsupported python version'' in test_output.stderr'
