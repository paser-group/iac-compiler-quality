- connection: local
  gather_facts: false
  hosts: localhost
  tasks:
  - debug:
      msg: Hello World
    name: Print Hello World
  - become: true
    file:
      mode: 511
      path: /tmp/testdir
      state: directory
    name: Create a directory
  - apt:
      name: nginx
      state: present
    become: true
    name: Install nginx package
    vars:
      ansible_python_interpreter: /usr/bin/python3
  - apt:
      name: python3
      state: present
    become: true
    name: Install Python
  - apt:
      name: python3-pip
      state: present
    become: true
    name: Install pip
  - become: true
    name: Install flask
    pip:
      name: flask
      state: present
    vars:
      ansible_python_interpreter: /usr/bin/python3
  - become: true
    copy:
      dest: /tmp/myfile.txt
      src: ./myfile.txt
    name: Copy file from local to remote
  - become: true
    name: Restart nginx
    service:
      name: nginx
      state: restarted
  - command: ls /non-existing-directory
    name: Retrieve output of ls in non-existing directory
    register: output
  - debug:
      var: output.stdout
    name: Print output
  - command: a
    name: Generate a syntax error
  - fail:
      msg: This task has failed.
    name: Fail task
