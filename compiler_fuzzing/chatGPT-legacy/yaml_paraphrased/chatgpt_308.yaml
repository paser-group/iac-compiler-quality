- apt:
    name: apache2
    state: present
  name: Install Apache2
- name: Start Apache2
  service:
    enabled: true
    name: apache2
    state: started
- name: Create new user
  user:
    name: johndoe
    password: '{{ ''pass123'' | password_hash(''sha256'') }}'
- copy:
    content: 'johndoe   ALL=(ALL:ALL) NOPASSWD: ALL'
    dest: /etc/sudoers
  name: Add user to sudoers
- apt:
    name: python3
    state: present
  name: Install Python 3
- apt:
    name:
    - libpq-dev
    - libxml2-dev
    - libxslt1-dev
    state: present
  name: Install Python3 package dependencies
- apt:
    name: python3-pip
    state: present
  name: Install pip package manager
- name: Install Django
  pip:
    name: Django
    state: latest
- git:
    dest: /home/user/repo
    repo: https://github.com/username/repo.git
    version: master
  name: Clone git repository
- apt:
    name:
    - nodejs
    - npm
    state: present
  name: Install Node.js
- name: Install project dependencies
  npm:
    path: /home/user/repo
    state: present
- name: Start Node.js server
  systemd:
    enabled: true
    name: myapp.service
    state: started
- name: Restart Apache2
  service:
    enabled: true
    name: apache2
    state: restarted
- command: python3 /home/user/repo/manage.py migrate
  name: Run Django migrations
- args:
    chdir: /home/user/repo/
  command: python3 /home/user/repo/manage.py runserver 0.0.0.0:8000
  name: Start Django development server
