- gather_facts: false
  hosts: all
  name: Example Playbook
  tasks:
  - debug:
      msg: '{{ inventory_hostname }}'
    name: Print Hostname
  - name: Restart Service based on Limit
    service:
      name: '{{ service_name }}'
      state: restarted
    when: inventory_hostname | regex_search(search_pattern)
  vars:
    search_pattern: '{{^web-.+}}'
    service_name: nginx
