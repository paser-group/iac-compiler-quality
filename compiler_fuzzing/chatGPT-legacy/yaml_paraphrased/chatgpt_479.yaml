- become: true
  hosts: all
  name: Test Playbook
  tasks:
  - name: Install and run Apache web server
    service: name=httpd state=started
    yum: name=httpd state=installed
  - name: Enable SELinux
    selinux: state=enforcing
  - name: Create a new user
    user: name=testuser
  - firewalld: service=http permanent=yes state=enabled
    name: Configure firewall to allow HTTP traffic
  - name: Remove root user
    user: name=root state=absent
  - lineinfile:
      create: true
      line: 127.0.0.1   localhost
      path: /etc/hosts
      state: present
    name: Modify hosts file to include localhost
