- hosts: all
  ignore_errors: true
  name: Generate buggy playbook
  tasks:
  - changed_when: false
    ignore_errors: true
    name: Check worker status
    register: worker_status
    shell: systemctl status {{ worker_name }}
  - assert:
      fail_msg: '{{ worker_name }} is not in active state'
      success_msg: '{{ worker_name }} is in active state'
      that:
      - not ('Active: active' in worker_status.stdout)
    changed_when: false
    ignore_errors: true
    name: Report dead worker
  vars:
  - worker_name: '{{ item }}'
