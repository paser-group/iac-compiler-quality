- apt:
    name: python3
    state: present
  name: Install Python3
- apt:
    name: python3-pip
    state: present
  name: Install pip3
- name: Install maven with pip3
  pip:
    executable: python3
    name: maven
- copy:
    dest: /opt/maven_artifact
    src: '{{ playbook_dir}}/maven_artifact'
  name: Upload maven_artifact to remote host
- args:
    executable: python3
  name: Use maven_artifact to build Java app
  shell: mvn clean package -f /opt/maven_artifact/pom.xml
- name: Start Java app
  shell: java -jar /opt/maven_artifact/target/myapp.jar
