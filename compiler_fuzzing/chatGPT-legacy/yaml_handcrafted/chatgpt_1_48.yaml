- become: true
  gather_facts: false
  hosts: all
  tasks:
  - file:
      group: '{{ ansible_ssh_user }}'
      mode: 493
      owner: user with space
      path: /tmp/test_dir
      state: directory
    name: Create temp directory
    register: dir_result
  - fail:
      msg: Directory creation failed
    name: Fail if directory creation failed
    when: not dir_result.stat.exists
