- connection: local
  gather_facts: false
  hosts: localhost
  name: Async status playbook
  tasks:
  - async: 1
    name: Async status
    poll: 0
    register: task_result
    vmware_guest:
      hostname: '{{ vcenter_hostname }}'
      name: '{{ guest_name }}'
      password: '{{ vcenter_password }}'
      state: poweredon
      username: '{{ vcenter_username }}'
      validate_certs: false
      wait_for_ip_address: true
  - async_status:
      jid: '{{ task_result.ansible_job_id }}'
    name: Get task status
    register: task_status
  - debug:
      msg: '{{ task_status }}'
    name: Debug
    when: task_status.finished
