services:
  node1:
    build: .
    image: ubuntu:bdi
    networks:
      node-net:
        ipv4_address: 10.1.1.1
  node2:
    depends_on:
        - node1
    image: ubuntu:bdi
    networks:
      node-net:
        ipv4_address: 10.1.1.2
  node3:
    depends_on:
        - node1
    image: ubuntu:bdi
    networks:
      node-net:
        ipv4_address: 10.1.1.3

networks:
  node-net:
    name: node-net
    driver: bridge
    internal: true
    external: false
    ipam:
     config:
       - subnet: 10.1.1.0/24
         gateway: 10.1.1.254
