- gather_facts: false
  hosts: localhost
  tasks:
  - ansible.builtin.copy:
      content: secret
      dest: /home/user/file.txt
    name: create encrypted file
    vars:
      ansible_python_interpreter: /usr/bin/python3
  - ansible.builtin.command: 'ansible-vault encrypt /home/user/file.txt

      '
    environment:
      PYTHONPATH: /usr/lib/python3/dist-packages/
    name: encrypt file using vault
    vars:
      ansible_python_interpreter: /usr/bin/python3
  - ansible.builtin.command: 'ansible-vault decrypt /home/user/file.txt

      '
    environment:
      PYTHONPATH: /usr/lib/python3/dist-packages/
    name: decrypt file using vault
    vars:
      ansible_python_interpreter: /usr/bin/python3
