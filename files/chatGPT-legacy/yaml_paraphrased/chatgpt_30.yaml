- git:
    dest: /opt/example_repo
    repo: https://github.com/example_repo.git
    version: master
  name: Clone Repository
- apt:
    name: python3-pip
  name: Install dependencies
- name: Install required python modules
  pip:
    name:
    - requests
    - pandas
    - Flask
- command: python3 /opt/example_repo/app.py
  name: Run application
- name: Upload artifact to S3
  s3:
    bucket: my_bucket
    mode: put
    object: example_repo.tar.gz
    permission: public-read
    src: /opt/example_repo/
- file:
    path: /opt/example_repo
    state: absent
  name: Clean up
- mail:
    body: The bug in example_repo has been resolved.
    subject: Bug fixed!
    to:
    - developer1@example.com
    - developer2@example.com
  name: Notify developers
