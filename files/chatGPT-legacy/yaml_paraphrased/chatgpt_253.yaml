- ansible.builtin.service_facts:
  - name: '{{ service }}'
  - state: '{{ state }}'
  - enabled: '{{ enabled }}'
  name: Gather service facts
  register: service_facts
- debug:
    var: service_facts.services
  name: Print service facts
- ansible.builtin.service:
    name: '{{ service }}'
    state: started
  name: Start service
- ansible.builtin.copy:
    dest: /etc/{{ service }}.conf
    src: '{{ config_file }}'
  name: Update service configs
- ansible.builtin.service:
    name: '{{ service }}'
    state: stopped
  name: Stop service
- ansible.builtin.systemd:
    enabled: false
    name: '{{ service }}'
  name: Disable service
- ansible.builtin.service:
    enabled: true
    name: '{{ service }}'
    state: started
  name: Start and enable service on boot
- ansible.builtin.systemd:
    name: '{{ service }}'
    state: absent
  name: Remove service
