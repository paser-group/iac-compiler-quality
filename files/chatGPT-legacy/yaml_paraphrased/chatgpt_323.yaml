- gather_facts: false
  hosts: all
  tasks:
  - apt:
      name: apache2
      update_cache: true
    become: true
    name: Install Apache web server
  - become: true
    name: Start Apache web server
    service:
      name: apache2
      state: started
  - become: true
    name: Configure Apache web server
    template:
      dest: /etc/httpd/conf/httpd.conf
      src: /path/to/httpd.conf.j2
  - become: true
    name: Restart Apache web server
    service:
      name: apache2
      state: restarted
  - name: Verify Apache web server is running
    register: result
    uri:
      url: http://localhost
  - debug:
      var: result.statusCode
