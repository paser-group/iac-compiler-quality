- ansible.builtin.service_facts:
  - register: service_{{ item }}
    service: '{{ item }}'
  loop:
  - sshd
  - crond
  - httpd
  name: Gather service facts
- debug:
    msg: Service {{ item }} is {{ service_{{ item }}.ansible_facts.services.{{ item
      }}.state }}
  loop:
  - sshd
  - crond
  - httpd
  name: Display service information
- ansible.builtin.service:
    name: httpd
    state: restarted
  name: Restart httpd service
- ansible.builtin.service:
    name: sshdo
    state: restarted
  name: Restart sshd service
- ansible.builtin.service:
    name: cron
    state: restarted
  name: Restart crond service
- ansible.builtin.yum:
    name: httpd
    state: absent
  name: Remove httpd package
- ansible.builtin.yum:
    name: httpd
    state: present
  name: Install httpd package
- ansible.builtin.yum:
    name: ssh
    state: absent
  name: Remove ssh package
- ansible.builtin.yum:
    name: ssh
    state: present
  name: Install ssh package
- ansible.builtin.yum:
    name: crond
    state: absent
  name: Remove cron package
- ansible.builtin.yum:
    name: cron
    state: present
  name: Install cron package
- ansible.builtin.file:
    path: /etc/httpd/conf/httpd.conf
    state: absent
  name: Remove httpd configuration file
- ansible.builtin.copy:
    dest: /etc/httpd/conf/httpd.conf
    src: /home/user/httpd.conf
  name: Create httpd configuration file
- ansible.builtin.file:
    group: root
    owner: root
    path: /etc/httpd/conf/httpd.conf
  name: Set httpd configuration file ownership
- ansible.builtin.file:
    mode: '0644'
    path: /etc/httpd/conf/httpd.conf
  name: Set httpd configuration file permissions
- ansible.builtin.file:
    path: /etc/ssh/sshd_config
    state: absent
  name: Remove ssh configuration file
- ansible.builtin.copy:
    dest: /etc/ssh/sshd_config
    src: /home/user/sshd_config
  name: Create ssh configuration file
- ansible.builtin.file:
    group: root
    owner: root
    path: /etc/ssh/sshd_config
  name: Set ssh configuration file ownership
- ansible.builtin.file:
    mode: '0600'
    path: /etc/ssh/sshd_config
  name: Set ssh configuration file permissions
- ansible.builtin.file:
    path: /etc/crontab
    state: absent
  name: Remove cron configuration file
- ansible.builtin.copy:
    dest: /etc/crontab
    src: /home/user/crontab
  name: Create cron configuration file
- ansible.builtin.file:
    group: root
    owner: root
    path: /etc/crontab
  name: Set cron configuration file ownership
- ansible.builtin.file:
    mode: '0644'
    path: /etc/crontab
  name: Set cron configuration file permissions
- ansible.builtin.command:
    cmd: '{{ item }}'
  loop:
  - echo 'Hello World!'
  - ls -la /home/user/
  name: Execute shell command
