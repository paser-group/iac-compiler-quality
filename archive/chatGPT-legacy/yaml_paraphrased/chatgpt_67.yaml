- hosts: all
  name: Test playbook
  tasks:
  - debug:
      msg: This is a buggy playbook
  - delegate_to: '{{ item }}'
    ignore_errors: true
    loop: '{{ groups[''all''][0] }}'
    name: Perform task on limited hosts
    shell: echo "Task executed on limited hosts"
    when: inventory_hostname in groups['all'][0]
