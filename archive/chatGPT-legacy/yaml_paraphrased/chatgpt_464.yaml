- become: true
  hosts: localhost
  name: Testing ignore_errors with variable
  tasks:
  - command: /bin/false
    ignore_errors: '{{ ignore_all_errors }}'
    name: This task will always fail
  - command: /bin/true
    name: This task will only run if the previous task failed
    register: run_if_failed
    when: run_if_failed is failed
  - command: /bin/true
    name: This task will always succeed
  vars:
    ignore_all_errors: true
