- hosts: localhost
  name: An example playbook with async and wait
  tasks:
  - async: 300
    name: Create VM
    poll: 0
    register: async_output
    shell: echo "Creating VM"
  - async_status: jid={{ async_output.ansible_job_id }}
    name: Get status
    register: async_status
  - debug:
      var: async_status
    when: '''VM Created'' not in async_status.job_status'
