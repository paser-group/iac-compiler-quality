- hosts:
  - your_host
  name: Replace failed task
  tasks:
  - backup:
      dest: '{{ file_path }}.backup'
      src: '{{ file_path }}'
    name: Make a backup of the file
  - name: Replace string in file
    register: result
    replace:
      path: '{{ file_path }}'
      regexp: '{{ your_regex_here }}'
      replace: '{{ your_replace_string_here }}'
  - debug:
      var: result
    name: Show debug message if replace task failed
    when: result is failed
  vars:
    file_path: /path/to/your/file
