- become: true
  become_user: root
  hosts: localhost
  tasks:
  - environment:
      file_mode: 777
    file:
      mode: '{{ file_mode }}'
      path: /tmp/testfile
      state: touch
    name: Create a new file and set permission
  - debug:
      msg: File mode is {{ file_mode }}
    name: Display the value of the environment variable
  - file:
      path: /tmp/testfile
      state: absent
    name: Delete the created file
