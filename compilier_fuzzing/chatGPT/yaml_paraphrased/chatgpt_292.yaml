- handlers:
  - name: Restart nginx
    service: name=nginx state=restarted
  hosts: all
  name: Buggy playbook for testing
  tasks:
  - name: Print message
    shell: echo "I love {{ fodo }}"
  - apt: name=nginx state==installed
    name: Install package
  - name: Restart service
    service: name=nginx state=restarted
    when: ansible_distribution == "Ubuntu"
  - file: path=/tmp/test_dir state=directory
    name: Create directory
  - file: path=/tmp/test_file state=absent
    name: Delete file
    when: ansible_os_family != "Debian"
  - command: /bin/false
    ignore_errors: true
    name: Fail task
  - debug: msg="This is a debug message"
    name: Use debug module
  - name: Set fact
    set_fact:
      city: '{{ lookup(''csvfile'', ''cities.csv'', file_type=''csv'', delimiter='','')
        }}'
  - name: Run custom module
    test_module: argument1=value1 argument2=value2
  - name: Run shell command with sudo
    shell: sudo /bin/echo "Hello World!"
  - delegate_to: 10.0.0.100
    include: another_playbook.yml
    name: Run playbook on remote hosts
  - name: Wait for host to reboot
    wait_for_connection: connect_timeout=20 sleep=5
  - apt: update_cache=yes
    name: Update package list
  vars:
    food: pizza
