- become: true
  hosts: all
  name: Replace string in file
  tasks:
  - name: Replace string
    register: replace_output
    replace:
      path: '{{ filename }}'
      regexp: '{{ search_string }}'
      replace: '{{ replace_string }}'
  - debug:
      var: replace_output.changed
    name: Print output
  vars:
    filename: /etc/hosts
    replace_string: 127.0.0.1
    search_string: localhost
