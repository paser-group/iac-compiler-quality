- hosts: all
  name: Exclude REUSE licenses
  tasks:
  - block:
    - set_fact:
        matched: '{{ excluded_licenses | intersect(license | default([])) | list }}'
    - debug:
        msg: Matched licenses {{ matched }}
    name: Exclude licenses
    when: license is defined and excluded_licenses | intersect(license) | list | count
      > 0
  vars:
    excluded_licenses:
    - REUSE
