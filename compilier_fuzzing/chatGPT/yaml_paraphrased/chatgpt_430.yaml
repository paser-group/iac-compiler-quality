- hosts: localhost
  name: Sanity Test
  tasks:
  - file:
      path: /tmp/testfile
      state: touch
    name: Create a file
  - file:
      path: /tmp/testfile
      state: absent
    name: Delete file
  - name: Validate file existence
    register: result
    stat:
      path: /tmp/nonexistentfile
  - fail:
      msg: File exists
    name: Fail if file exists
    when: result.stat.exists is defined and result.stat.exists
