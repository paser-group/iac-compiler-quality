- become: true
  gather_facts: false
  hosts: localhost
  name: Install custom collections
  tasks:
  - community.general.collection:
      name: mycustom_collection
      state: latest
    name: Install custom collection
    register: result
  - debug:
      var: result
  - copy:
      dest: /usr/share/ansible/plugins/modules/
      src: mycustom_module.py
    name: Copy custom module to library
    when: result.changed
  - mycustom_module:
      arg1: value1
      arg2: value2
    name: Import custom module
