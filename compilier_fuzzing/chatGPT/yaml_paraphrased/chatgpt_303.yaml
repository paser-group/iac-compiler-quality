- gather_facts: false
  hosts: localhost
  tasks:
  - command: echo 'This task will fail'
    ignore_errors: '{{undefined_variable}}'
    name: Task1
  - command: echo 'This task will always execute'
    ignore_errors: true
    name: Task2
  - command: echo 'This task will also execute'
    ignore_errors: '{{var1}}'
    name: Task3
  - command: echo 'This task will also execute, but show a warning message'
    ignore_errors: '{{undefined_variable | default(False)}}'
    name: Task4
  - debug:
      var: result
    name: Task5
    register: result
  - fail:
      msg: This task will always fail
    name: Task6
    when: result.failed | default(False)
  vars:
    var1: '{{undefined_variable}}'
