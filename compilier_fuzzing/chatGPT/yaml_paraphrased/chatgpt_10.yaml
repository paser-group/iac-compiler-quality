- become: true
  hosts: localhost
  name: Test playbook
  tasks:
  - debug:
      var: main_var["nested_var1"]
    name: Task 1
  - debug:
      msg: nested_var1 is defined
    name: Task 2
    when: main_var["nested_var1"] is defined
  vars:
    main_var:
      nested_var1: '{{ undefined_var }}'
      nested_var2: some value
