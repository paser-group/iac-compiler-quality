- gather_facts: false
  hosts: localhost
  name: Clone repo
  tasks:
  - git:
      dest: <local-repo>
      repo: <repo-url>
    ignore_errors: true
    name: Clone repo
    register: git_output
  - git:
      dest: <local-repo>
      repo: <repo-url>
    ignore_errors: true
    name: Retry clone with host key verification
    register: git_output_retry
    when: '''Host key verification failed'' in git_output.stderr'
  - debug:
      var: git_output_retry.stdout_lines
    name: Display git output
    when: git_output_retry is defined and git_output_retry|success
