- hosts: all
  name: Install custom collections
  tasks:
  - name: Install custom collections
    pip:
      name: '{{ item }}'
      state: present
    with_items:
    - collection1
    - collection2
    - collection3
    - collection4
    - collection5
  - command: pip show {{ item }}
    name: Check installation
    with_items:
    - collection1
    - collection2
    - collection3
    - collection4
    - collection5
  - debug:
      msg: Installation failed for {{ item }}
    name: Debug
    when: result.rc != 0
    with_items:
    - collection1
    - collection2
    - collection3
    - collection4
    - collection5
