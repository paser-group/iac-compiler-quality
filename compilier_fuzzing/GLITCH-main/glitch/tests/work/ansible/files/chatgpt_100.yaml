- become: true
  hosts: all
  name: Install packages using apt
  tasks:
  - apt:
      name: '{{ item }}'
      state: present
    name: Install packages using apt
    when: ansible_os_family == "Debian"
    with_items:
    - package1
    - package2
    - package3
  - name: Install packages using yum
    when: ansible_os_family == "RedHat"
    with_items:
    - package1
    - package2
    - package3
    yum:
      name: '{{ item }}'
      state: present
  - apt:
      name: '{{ item }}'
      state: present
    name: Install packages using apt
    when: ansible_os_family == "Ubuntu" and ansible_distribution_version == "22.04"
    with_items:
    - package1
    - package2
    - package3
