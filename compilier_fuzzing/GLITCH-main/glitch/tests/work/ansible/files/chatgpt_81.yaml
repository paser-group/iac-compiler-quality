- gather_facts: false
  hosts: localhost
  tasks:
  - git:
      dest: '{{ item }}'
      repo: https://github.com/{{ item }}
    name: Clone git repository
    register: git_clone
    with_items:
    - repo1
    - repo2
  - fail:
      msg: Git clone failed for {{ item.item }}
    name: Check if git clone task failed
    when: item.failed
    with_items: '{{ git_clone.results }}'
  - git:
      dest: '{{ item }}'
      repo: https://github.com/{{ item }}
    name: Clone git repository again
    register: git_clone_again
    with_items:
    - repo1
    - repo2
  - fail:
      msg: Git clone failed for {{ item.item }}
    name: Check if git clone task failed
    when: item.failed
    with_items: '{{ git_clone_again.results }}'
