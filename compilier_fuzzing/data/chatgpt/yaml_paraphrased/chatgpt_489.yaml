- become: false
  environment:
    ANSIBLE_VAULT_PASSWORD: '{{ vault_password }}'
  hosts: localhost
  tags:
  - vault
  tasks:
  - ansible.builtin.command: 'echo "{{ secret_message }}" > message.txt

      ansible-vault encrypt message.txt

      '
    become: true
    name: Encrypt message
    vars:
      ansible_python_interpreter: /usr/bin/python3
  vars:
    secret_message: This message should be encrypted
  vars_prompt:
  - name: vault_password
    private: true
    prompt: Enter the ansible-vault vault password
