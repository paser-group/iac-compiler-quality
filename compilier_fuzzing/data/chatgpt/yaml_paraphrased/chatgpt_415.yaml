- apt:
    name: nginx
    update_cache: '{{ update_cache | default(true) }}'
  name: Install nginx
  notify: restart nginx
- name: Enable nginx at boot
  systemd:
    enabled: true
    name: nginx
- copy:
    dest: /etc/nginx/nginx.conf
    src: nginx.conf
  name: Update nginx config
  notify: reload nginx
- name: Start nginx
  service:
    name: nginx
    state: started
- name: Create user
  user:
    group: '{{ ansible_user }}'
    name: '{{ ansible_user }}'
    password: '{{ ansible_password }}'
    shell: /bin/bash
- copy:
    dest: /home/{{ ansible_user }}/.ssh/authorized_keys
    group: '{{ ansible_user }}'
    mode: '0600'
    owner: '{{ ansible_user }}'
    src: '{{ ssh_key }}'
  name: Copy ssh keys
- apt:
    name: mysql-server
    state: present
  name: Install mysql-server
- name: Restart mysql
  service:
    name: mysql
    state: restarted
- apt:
    name: php
    state: present
  name: Install php
- apt:
    name: php-mysql
    state: present
  name: Install php mysql extension
- apt:
    name: composer
    state: present
  name: Install composer
- name: Install laravel
  shell: composer create-project --prefer-dist laravel/laravel "{{ ansible_project
    }}"
