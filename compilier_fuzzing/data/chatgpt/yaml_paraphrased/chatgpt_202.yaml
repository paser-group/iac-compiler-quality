- connection: local
  hosts: localhost
  name: Build Ansible-core 2.14.1
  tasks:
  - file:
      path: /home/user/build
      state: directory
    name: Create build directory
  - git:
      dest: /home/user/build/ansible-core
      repo: https://github.com/ansible/ansible-core.git
    name: Clone Ansible-core from Git
  - git:
      dest: /home/user/build/ansible-core
      repo: https://github.com/ansible/ansible-core.git
      version: 2.14.1
    name: Checkout version 2.14.1
  - name: Install dependencies
    package:
      name: '{{ item }}'
      state: present
    with_items:
    - python3
    - python3-pip
    - gcc
  - command: pip3 install /home/user/build/ansible-core
    name: Install Ansible-core
  - command: ansible --version
    name: Test Ansible installation
