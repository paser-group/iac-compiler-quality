- gather_facts: false
  hosts: all
  name: Ansible Playbook to demonstrate SSLv3 alert handshake failure
  tasks:
  - ansible.builtin.get_url:
      dest: /tmp/file.txt
      url: https://example.com/file.txt
      validate_certs: false
    name: Download file using get_url
    register: get_url_result
  - fail:
      msg: get_url failed with SSLv3 alert handshake failure
    name: Check if get_url failed
    when: get_url_result.failed
  - ansible.builtin.uri:
      dest: /tmp/file.txt
      url: https://example.com/file.txt
      validate_certs: false
    name: Download file using uri
    register: uri_result
  - fail:
      msg: uri failed to download file
    name: Check if uri succeeded
    when: uri_result.failed
