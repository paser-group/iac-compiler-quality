- hosts: all
  name: Docker deployment playbook
  tasks:
  - apt: name=docker state=present
    become: true
    name: Install Docker
  - docker_image:
      name: myapp:latest
    name: Pull Docker image
  - docker_container:
      image: myapp:latest
      name: myapp
      ports:
      - 8080:80
      restart_policy: always
      state: started
    name: Run Docker container
  - name: Redirect Docker module
    replace:
      path: /usr/lib/python3/dist-packages/ansible/builtin/docker.py
      regexp: docker
      replace: community
