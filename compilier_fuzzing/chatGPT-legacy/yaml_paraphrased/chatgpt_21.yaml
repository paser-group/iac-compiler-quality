- hosts: all
  tasks:
  - name: Create a systemd user service
    systemd:
      copy: true
      daemon_reload: true
      enabled: true
      name: myservice
      source: /path/to/myservice.service
      state: started
      user: '{{ target_user }}'
  - name: Reload systemd
    systemd:
      daemon_reload: true
      name: myservice
      state: restarted
      user: '{{ target_user }}'
    when: myservice.changed == true
  - name: Verify myservice is running
    register: svc_status
    systemd:
      enabled: true
      name: myservice
      state: started
      user: '{{ target_user }}'
  - debug:
      var: svc_status
