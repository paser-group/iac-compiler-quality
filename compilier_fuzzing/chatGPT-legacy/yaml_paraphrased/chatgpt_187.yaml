- hosts: all
  name: Install Docker
  tasks:
  - apt_repository:
      repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release
        }} stable
      state: present
    name: Add Docker repository
  - apt:
      pkg:
      - docker-ce
      - docker-ce-cli
      - containerd.io
      update_cache: true
    name: Update apt and install Docker
  - name: Start Docker service
    service:
      enabled: true
      name: docker
      state: started
  - docker_image:
      name: nginx
      tag: latest
    name: Pull nginx image
  - docker_container:
      image: nginx
      name: nginx_container
      ports:
      - 80:80
      restart_policy: always
      state: started
    name: Run nginx container
