
- name: Connect to database with default database name
  become: yes
  hosts: all
  tasks:
    - name: Install PostgreSQL client  
      apt: name=postgresql-client state=present
      when: ansible_distribution == "Ubuntu"
    - name: Connect to PostgreSQL database with default database name
      postgresql_user:
        db: postgres
        login_user: postgres
        login_password: "{{ lookup('file', '/var/tmp/password_file') }}"
        name: ansible
        password: "{{ lookup('file', '/var/tmp/password_file') }}"
        state: present
