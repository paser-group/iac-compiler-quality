
- name: configure router
  hosts: network_devices
  gather_facts: no
  connection: network_cli
  tasks:
    - name: load configuration
      ios_config:
        lines: 
          - hostname Router1
          - interface fastEthernet 0/0
          - ip address 192.168.1.1 255.255.255.0
          - no shutdown
        parents: task
    - name: save configuration
      ios_command:
        command: write mem
      register: output
    - name: debug output
      debug:
        var: output.stdout_lines
