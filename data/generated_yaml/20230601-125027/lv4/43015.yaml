
- name: Check for parsing errors in Python3 YAML inventory
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Copy inventory file to the inventory server
    copy:
      src: inventory
      dest: /var/tmp/inventory
  - name: Parse the inventory file with Python3 YAML Parser
    command: python3 -c 'import yaml,sys;yaml.safe_load(sys.stdin)' < /var/tmp/inventory
    register: inventory_output
  - name: Debug inventory output
    debug:
      var: inventory_output
