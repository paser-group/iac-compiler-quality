
- name: Set correct ownership and permissions for Ansible roles directory
  hosts: all
  become: true
  tasks:
  - name: Ensure directory for Ansible roles exists
    become_user: "{{ansible_user}}"
    file:
      state: directory
      path: /etc/ansible/roles
      mode: 0700
  - name: Update owner and mode
    become_user: "{{ansible_user}}"
    file:
      path: /etc/ansible/roles
      owner: "{{ansible_user}}"
      mode: 0755
