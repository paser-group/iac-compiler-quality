
---
- name: Test playbook
  hosts: all
  tasks:
  - name: Create .cache directory
    file:
      path: /tmp/.cache/facts/
      state: directory

  - name: Read from cache
    debug:
      var: ansible_facts.cache_dir
    failed_when: "ansible_facts.cache_dir == ''"
    ignore_errors: True
