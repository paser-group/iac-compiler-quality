
- name: Configure IOS-XR L3 interface
  hosts: iosxr
  become: yes

  tasks:
  - name: "Configure the loopback interface with IPv4 address"
    iosxr_interface:
      name: Loopback0
      description: Loopback interface
      ipv4:
        address: 10.1.1.1/24
        prefix_length: 24
      state: present
    register: output1

  - name: "Configure the loopback interface with IPv6 address"
    iosxr_interface:
      name: Loopback0
      description: Loopback interface
      ipv6:
        address: 2001:db8::1/64
      state: present
    register: output2

  - name: "Check configuration idempotency"
    assert:
      that:
        - output1.changed == false
        - output2.changed == false
