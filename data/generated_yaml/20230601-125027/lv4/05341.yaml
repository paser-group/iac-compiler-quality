
- name: Load default roles path from ansible.cfg file if available
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Ensure ansible.cfg file is present
      stat:
        path: '/etc/ansible/ansible.cfg'
      register: cfg_file
      
    - name: Load default roles path from ansible.cfg file
      command: bash -c "source /etc/ansible/ansible.cfg && echo $ANSIBLE_ROLES_PATH"
      register: roles_path
      
    - name: Echo default roles path
      debug:
        var: roles_path.stdout_lines
      when: cfg_file.stat.exists == true
