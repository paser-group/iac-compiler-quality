
---
- name: Test play to check --tags option
  hosts: all
  become: true

  tasks:
  - name: Always run
    debug:
      msg: "This task should always run"

  - name: Test task with valid tag
    debug:
      msg: "This task should only run when the tag 'valid-tag' is specified"
    tags:
      - valid-tag

  - name: Test task with invalid tag
    fail:
      msg: "This task should never run, as the tag 'invalid-tag' is not defined"
    tags:
      - invalid-tag

  - name: Test task with no tag
    debug:
      msg: "This task should run if no tags are specified"

  - name: Test task with multiple tags
    debug:
      msg: "This task should only run when both 'valid-tag' and 'another-valid-tag' tags are specified"
    tags:
      - valid-tag
      - another-valid-tag
