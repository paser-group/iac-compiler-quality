
- hosts: all
  become: true
  tasks:
    - name: Install mkosi package
      apt:
        name: mkosi
        state: present

    - name: Check value of ansible_pkg_mgr before creating file
      debug:
        var: ansible_pkg_mgr

    - name: Create temp file under pkgs/usr/
      copy:
        content: "Hello, World!"
        dest: "/usr/tmp/test.txt"

    - name: Install package using ansible_pkg_mgr
      package:
        name: curl
        state: present
        use: "{{ ansible_pkg_mgr }}"

    - name: Check value of ansible_pkg_mgr after installation of package
      debug:
        var: ansible_pkg_mgr
