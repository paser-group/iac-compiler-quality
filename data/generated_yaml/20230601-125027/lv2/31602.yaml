
- name: Kubernetes Module stress test playbook
  hosts: all
  tasks:
    - name: Send requests with 422 response codes
      k8s:
        state: present
        definition:
          apiVersion: v1
          kind: Pod
          metadata:
            name: nginx
          spec:
            containers:
            - name: nginx
              image: nginx:latest
        namespace: default
        status:
          phase: "{{ item }}"
      with_items:
        - "422"
      register: k8s_result

    - name: Print the response body of requests with 422 responses
      debug:
        msg: "{{ k8s_result.results[0].json }}" 
