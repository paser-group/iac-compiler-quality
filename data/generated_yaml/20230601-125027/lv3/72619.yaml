yaml
- name: Example inventory file
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Load the custom inventory script
      vars:
        my_inventory: "{{ lookup('file', 'my_inventory.py') }}"
      script:
        script: "{{ my_inventory }}"
        terms: "env=prod"
      register: inventory_output

    - debug:
        var: inventory_output
