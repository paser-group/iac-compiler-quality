
- name: Install mkosi package
  apt:
    name: mkosi
    state: present

- name: Determine package manager for Ubuntu
  set_fact:
    ansible_pkg_mgr: "apt"

- name: Determine package manager for CentOS/Red Hat
  set_fact:
    ansible_pkg_mgr: "dnf"
  when: "'centos' in inventory_hostname or 'redhat' in inventory_hostname"

- name: Install package using determined package manager
  become: true
  become_method: sudo
  package:
    name: openssl
    state: present
