
---
- name: Test Ansible Fact Caching
  hosts: all
  gather_facts: True
  tasks:
    - name: Debug network information
      debug:
        var: ansible_all_ipv4_addresses

- name: Test Ansible Fact Caching with Stale Cache
  hosts: all
  gather_facts: True
  tasks:
    - name: Delay to Allow Fact Caching
      pause:
        seconds: 10
    - name: Remove Fact Cache File
      file:
        path: /tmp/.ansible/local/cache
        state: absent
    - name: Debug network information
      debug:
        var: ansible_all_ipv4_addresses
