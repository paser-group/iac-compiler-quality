
- name: Configure SVI on network device
  hosts: network_device
  gather_facts: no
  connection: network_cli
  vars:
    svi_ip: 10.1.1.5/24
    svi_name: VLAN10
  tasks:
    - name: Configure SVI
      nxos_config:
        lines:
          - interface {{ svi_name }}
          - ip address {{ svi_ip }}
        parents: interface Vlan1
      register: svi_output

    - name: Modify SVI configuration
      nxos_config:
        lines:
          - interface {{ svi_name }}
          - no ip address {{ svi_ip }}
          - ip address 192.168.0.1/24
        parents: interface {{ svi_name }}
      register: modify_output
