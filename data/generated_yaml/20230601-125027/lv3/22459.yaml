
- name: Idempotent issue with Unicode in eos_banner
  hosts: all
  become: yes

  tasks:
    - name: Set the EOS banner with a Unicode character
      eos_banner:
        banner: "{{ 'ğŸ‘‹ Hello Unicode! ğŸŒ' }}"
      register: eos_banner_output

    - name: Check if the banner was changed
      command: "cat /etc/motd"
      register: motd_output

    - name: Fail if the banner was not changed
      fail:
        msg: "The banner was not set correctly"
      when: "'ğŸ‘‹ Hello Unicode! ğŸŒ' not in motd_output.stdout"

  