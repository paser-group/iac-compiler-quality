
- name: Test Ansible Configuration
  hosts: all
  vars:
    custom_config: "/home/user/custom.conf"
  become: true
  tasks:
    - name: Verify Configuration
      debug: 
        var: custom_config
      
    - name: Copy Default Configuration
      copy:
        src: "/etc/ansible/default.conf"
        dest: "/home/user/custom.conf"
        mode: 0644
      when: not custom_config|d
      
    - name: Copy Custom Configuration
      copy:
        src: "{{ custom_config }}"
        dest: "/etc/ansible/custom.conf"
        mode: 0644
      when: custom_config|d
      
    - name: Verify Final Configuration
      debug: 
        var: ansible_distribution
