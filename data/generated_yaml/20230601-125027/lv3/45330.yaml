
- name: Create an Azure Container Registry
  azure_rm_containerregistry:
    name: test-registry
    resource_group: test-resource-group
    location: eastus
    admin_enabled: false
    sku: Basic
  register: registry

- name: Update the Azure Container Registry
  azure_rm_containerregistry:
    name: test-registry
    resource_group: test-resource-group
    location: eastus
    admin_enabled: false
    sku: Classic
  register: registry1

- name: Ensure idempotence by comparing registry and registry1 results
  assert:
    that:
      - registry is registry1
