yaml
- hosts: all
  gather_facts: no
  tasks:
    - name: read facts cache directory
      stat:
        path: .cache/facts/
        follow: no
      register: cache_facts

    - name: debug cache_facts
      debug:
        var: cache_facts.stat.isdir

    - name: remove the cache/facts directory
      file:
        path: .cache/facts
        state: absent

    - name: gather facts again
      setup:

    - name: debug after gather facts
      debug:
        msg: 'Facts gathered successfully'
