
- name: Create an Elastic Load Balancer
  ec2_elb_lb:
    name: "my-elastic-lb"
    region: "us-west-2"
    zones:
      - us-west-2a
      - us-west-2b
      - us-west-2c
    listeners:
      - instance_port: 8080
        instance_protocol: http
        load_balancer_port: 80
        protocol: http
  register: elb_result

- debug:
    msg: "{{ elb_result }}"

- name: Check idempotence with ELB
  ec2_elb_lb:
    name: "my-elastic-lb"
    region: "us-west-2"
    zones:
      - us-west-2a
      - us-west-2b
      - us-west-2c
    listeners:
      - instance_port: 8080
        instance_protocol: http
        load_balancer_port: 80
        protocol: http
  register: elb_result2

- debug:
    msg: "{{ elb_result2 }}"
