
---
- name: Test Linode inventory plugin access_token parsing issue
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Set the Linode inventory plugin
      set_fact:
        ansible_inventory_plugins: '{\"linode\": {\"path\": \"/path/to/custom/linode/inventory.py\", \"access_token\": \"{{ linode_access_token }}\"}}'

    - name: Print the parsed access_token
      debug:
        msg: "Access_token parsed by Linode inventory plugin: {{ hostvars['localhost']['inventory']['linode-api']['_data']['api_key'] }}"
