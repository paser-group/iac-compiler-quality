yaml
- name: Configure igmp snooping on n7k switch
  hosts: n7k_switch
  gather_facts: no
  connection: local
  vars:
    igmp_snooping_non_default:
      igmp_query_max_response_time: 10
      igmp_query_interval: 140
      igmp_last_member_query_interval: 110
      igmp_last_member_query_count: 10

  tasks:
    - name: Set igmp snooping to non-default values
      nxos_igmp_snooping:
        state: present
        provider: "{{ cli }}"
        igmp_snooping: "{{ igmp_snooping_non_default }}"
