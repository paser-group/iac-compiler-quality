
- name: Create a user with non-existing home directory
  hosts: all
  become: true
  tasks:
    - name: Ensure home directory exists
      file:
        path: "/home/testuser"
        state: "directory"
        mode: "0755"
    - name: Create a new user
      user:
        name: "testuser"
        comment: "Test user"
        home: "/home/testuser"
        shell: "/bin/bash"
