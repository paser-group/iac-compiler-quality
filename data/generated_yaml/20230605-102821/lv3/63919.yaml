
- hosts: all
  vars:
    file_path: "/tmp/example.txt"
  tasks:
    - name: Create directory
      file:
        path: "{{ file_path | dirname }}"
        state: directory
    - name: Write line to file
      lineinfile:
        path: "{{ file_path }}"
        line: "{{ body }}"
