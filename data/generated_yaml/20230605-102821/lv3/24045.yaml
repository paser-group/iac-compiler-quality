
- name: Get Compute Engine zones and permissions
  hosts: localhost
  gather_facts: false
  vars:
     gc_zone: europe-west1-b
     gc_project: my-gc-project
     gc_auth_file: /path/to/auth/file.json
  tasks:
    - name: Authenticate
      google.cloud.gcp_auth:
        credentials_file: "{{ gc_auth_file }}"

    - name: Get zones and permissions
      google.cloud.gcp_compute_region_instance_group_manager_info:
        zone: "{{ gc_zone }}"
        project: "{{ gc_project }}"
      register: gc_compute_info

    - name: Display output
      debug:
        var: gc_compute_info['instance_groups'][0]['name']
