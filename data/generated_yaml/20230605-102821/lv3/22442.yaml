
- name: Connect to EOS device via eAPI
  hosts: eos
  gather_facts: no
  vars:
    ansible_connection: httpapi
    ansible_httpapi_use_ssl: yes
    ansible_httpapi_validate_certs: yes # Change the value to 'no' to disregard SSL Certificate validation
    ansible_httpapi_port: "{{ api_port | default('443') }}"
    ansible_httpapi_transport: ssl
    ansible_become: yes
    ansible_become_method: enable
  tasks:
    - name: Gather facts using eAPI
      eos_facts:
        gather_subset: "!min"
