
- hosts: all
  gather_facts: false

  tasks:
    - name: Create a compressed archive
      archive:
        path: /tmp/data
        dest: /tmp/archive.tar.gz
        exclude_path:
          - /tmp/data/excluded_dir/*

    - name: Extract the archive
      unarchive:
        src: /tmp/archive.tar.gz
        dest: /tmp/extracted_data
