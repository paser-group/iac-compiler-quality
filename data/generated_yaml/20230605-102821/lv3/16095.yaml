
---
- name: Play to demonstrate ec2.py filter issue
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Set the path of ec2.py inventory script
    set_fact:
      ec2_inventory: "/path/to/ec2.py"

  - name: Create EC2 dynamic inventory
    ec2:
      regions: "us-west-2"
      filters:
        instance-state-name: "running"
        tag:Name: "my-instance"
      key_name: "my-key"
      group_by: tag_Name
      strict_permissions: no
      cache: no
      # Add additional filters to stress-test the script

  # Add additional tasks here as required
