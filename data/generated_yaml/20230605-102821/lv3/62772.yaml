
- name: Gather VMware VMkernel facts
  hosts: localhost
  connection: local
  gather_facts: no
  vars:
    vmware_hostname: "example.com"
    vmware_username: "myuser"
    vmware_password: "{{ lookup('file', '/path/to/password.txt') }}"
  tasks:
    - name: Get VMkernel facts
      vmware_vmkernel_facts:
        hostname: "{{ vmware_hostname }}"
        username: "{{ vmware_username }}"
        password: "{{ vmware_password }}"
      register: vmkernel_facts
      delegate_to: localhost

    - debug:
        var: vmkernel_facts
