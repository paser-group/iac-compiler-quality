
- name: Retrieve ISO by name from oVirt Engine ISO Domain
  hosts: localhost
  gather_facts: no
  vars:
    ovirt_url: "https://ovirt-engine.example.com/ovirt-engine/api"
    ovirt_auth: "{{ ovirt_user }}:{{ ovirt_password }}"
    ovirt_storage_domain: "iso-domain"
    ovirt_vm_name: "vm-name"
    ovirt_iso_name: "iso-name"
  tasks:
    - name: Get ISO by name
      ovirt_disk_image_facts:
        url: "{{ ovirt_url }}"
        validate_certs: False
        auth: "{{ ovirt_auth }}"
        disk: "{{ ovirt_iso_name }}"
        storage_domain: "{{ ovirt_storage_domain }}"
      register: iso_facts

    - assert:
        that:
          - iso_facts.qcow_size is defined
      fail_msg: 'ISO by the name {{ ovirt_iso_name }} not found'
