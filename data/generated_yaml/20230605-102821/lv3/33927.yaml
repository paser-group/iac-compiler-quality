
- name: Gather information about Auto Scaling groups
  hosts: localhost
  connection: local
  gather_facts: no

  vars:
    region: "us-east-1"
    target_group_name: "my-target-group"

  tasks:
    - name: Collect information about Auto Scaling groups in the specified region
      ec2_asg_facts:
        region: "{{ region }}"
      register: autoscaling_facts

    - name: Retrieve information about the target group
      ignore_errors: yes
      ec2_target_group_info:
        region: "{{ region }}"
        target_group_name: "{{ target_group_name }}"
      register: target_group_info
      
    - name: Print retrieved data
      debug:
        var: target_group_info
