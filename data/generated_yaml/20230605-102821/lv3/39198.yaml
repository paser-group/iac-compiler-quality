
---
- name: Test Zabbix Template Module
  hosts: all
  become: true
  tasks:
    - name: Set Zabbix Item with string value
      zabbix_template:
        server_url: "http://zabbix.example.com"
        login_user: "admin"
        login_password: "{{ lookup('file', '/etc/zabbix/.passwd') }}"
        template_name: "Test Template"
        item_name: "Test Item"
        item_key: "test.item"
        value: "invalid value"
      register: zabbix_item_result
      ignore_errors: true
  
    - name: Display Zabbix Item error message
      debug:
        var: zabbix_item_result.msg
      failed_when: "'\'<\' not supported between instances' in zabbix_item_result.msg"
