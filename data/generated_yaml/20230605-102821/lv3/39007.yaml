
- name: Dynamic inventory error playbook
  hosts: localhost
  gather_facts: no
  vars:
    node_subnet: 10.1.1.0/24
  tasks:
    - name: Create inventory file
      delegate_to: localhost
      run_once: true
      copy:
        content: |
          [ubuntu]
          ubuntu1 ansible_host=10.1.1.1 ansible_user=ubuntu1 ansible_ssh_private_key_file=/var/tmp/key_I.pem
          
          [alpine]
          alpine1 ansible_host=10.1.1.2 ansible_user=alpine1 ansible_ssh_private_key_file=/var/tmp/key_I.pem

          [centos]
          centos1 ansible_host=10.1.1.3 ansible_user=centos1 ansible_ssh_private_key_file=/var/tmp/key_I.pem

          [redhat]
          redhat1 ansible_host=10.1.1.4 ansible_user=redhat1 ansible_ssh_private_key_file=/var/tmp/key_I.pem

    - name: Test dynamic inventory with undefined host
      hosts: non-existent-host
      tasks:
        - name: Ping
          ping:
      ignore_errors: yes
