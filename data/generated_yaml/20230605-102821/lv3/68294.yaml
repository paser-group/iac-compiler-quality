
- name: Connect to EC2 and retrieve instance information
  hosts: ec2
  gather_facts: False
  vars_files:
      - vars/aws.yml
  tasks:
    - name: Retrieve EC2 instance information
      ec2_instance_info:
          region: "{{ec2_region}}"
          aws_access_key: "{{ec2_access_key}}"
          aws_secret_key: "{{ec2_secret_key}}"
          instance_ids: ["{{ec2_instance_id}}"]
      register: ec2_instances

    - name: Print EC2 instance information
      debug:
          var: ec2_instances
