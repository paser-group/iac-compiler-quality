
- hosts: all
  gather_facts: no

  tasks:
    - name: Sleep for three seconds
      command: sleep 3
      async: 10
      poll: 0
      register: async_output1

    - name: Sleep for two seconds
      command: sleep 2
      async: 10
      poll: 0
      register: async_output2

    - name: Sleep for one second
      command: sleep 1
      async: 10
      poll: 0
      register: async_output3

    - name: Check async tasks status
      async_status:
        jid: "{{ item }}"
      loop:
        - "{{ async_output1.ansible_job_id }}"
        - "{{ async_output2.ansible_job_id }}"
        - "{{ async_output3.ansible_job_id }}"
