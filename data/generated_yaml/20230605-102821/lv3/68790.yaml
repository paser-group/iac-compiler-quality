
- name: Create EC2 ELB Load Balancer
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create ELB
      ec2_elb_lb:
          name: my-elb
          zones:
            - us-west-2a
            - us-west-2b
          listeners:
            - protocol: HTTP
              load_balancer_port: 80
              instance_protocol: HTTP
              instance_port: 80
          health_check:
              healthy_threshold: 2
              unhealthy_threshold: 2
              timeout: 3
              interval: 30
              target: TCP:80
          subnets:
            - 10.1.1.0/24
          security_groups:
            - my-sg
          tags:
              Name: my-elb
