
- name: Install macports package
  hosts: all
  gather_facts: no
  tasks:
  - name: Install macports package
    shell: "sudo port install {{ package_name }}"
    register: install_status
  - name: Check if macports package is installed
    command: "pkg_info {{ package_name }}"
    register: check_status
    failed_when: check_status.rc != 0 and install_status.rc != 0
