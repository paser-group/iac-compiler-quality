yaml
- name: Ansible Vault variable cannot be decrypted in lists
  hosts: all
  gather_facts: false

  vars:
    user_list:
      - name: "{{ vault_user_name }}"
        password: "{{ vault_password }}"
        
  tasks:
    - name: Debug user list
      debug:
        var: user_list
      vars:
        decrypted_user_list: "{{ user_list | map(attribute='name') | list }}"

    - name: Print decrypted user list
      debug:
        var: decrypted_user_list
