
- name: Test Ansible virtualization detection on DigitalOcean droplets
  hosts: all
  gather_facts: yes

  tasks:
  - name: Verify ansible_virtualization_role is set to 'none' on DigitalOcean droplets
    assert:
      that: ansible_virtualization_role == 'none'
      success_msg: "ansible_virtualization_role is correctly set to 'none'."
    delegate_to: "{{groups['ungrouped'][0]}}"
