
- name: Install OS on nxos switch
  hosts: nxos_switch
  gather_facts: no
  vars:
    username: admin
    password: "{{ lookup('file', '/path/to/password/file') }}"
    ssh_key_file: "/path/to/.ssh/private_key"
  tasks:
    - name: Install OS using nxos_install_os
      nxos_install_os:
        image: "/path/to/image"
        transport: either
        host: "{{ inventory_hostname }}"
        username: "{{ username }}"
        password: "{{ password }}"
        private_key_file: "{{ ssh_key_file }}"
      register: os_install
      ignore_errors: yes
    - name: Debug output
      debug:
        var: os_install
