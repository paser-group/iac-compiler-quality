
- name: Add rule to default security group
  hosts: localhost
  gather_facts: no
  tasks:
  - name: add os security group rule
    os_security_group_rule:
      name: default
      description: "Allow SSH from 10.1.1.0/24"
      direction: ingress
      ethertype: IPv4
      protocol: tcp
      port_range_min: 22
      port_range_max: 22
      remote_ip_prefix: "10.1.1.0/24"
    register: security_group_rule_result
    ignore_errors: yes

  - name: Print debug information
    debug:
      var: security_group_rule_result
