
- name: Manage VPC resources on EC2
  hosts: localhost
  gather_facts: False
  vars:
    aws_profile: "{{ lookup('env', 'AWS_PROFILE') }}"
  tasks:
    - name: Create new VPC
      ec2_vpc:
        region: "us-east-1"
        cidr_block: "10.0.0.0/16"
        resource_tags:
          Name: "Test VPC"
        state: present
        profile: "{{ aws_profile }}"
      register: result
    - name: Debug
      debug:
        var: result
