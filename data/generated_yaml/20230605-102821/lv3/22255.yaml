yaml
- name: "Reproduce the 'all' variable bug in lineinfile module"
  hosts: all
  gather_facts: false
  vars:
    test_file: "/tmp/test_file"
    test_line: "hello world"
    test_var: "all"
  tasks:
    - name: "Create a test file with the specified line"
      copy:
        dest: "{{test_file}}"
        content: "{{test_line}}"
    - name: "Insert a line with variable 'all' using lineinfile module"
      lineinfile:
        path: "{{test_file}}"
        line: "{{test_var}}"
      register: result
    - name: "Check if the line is successfully inserted"
      assert:
        that: test_var in result.line
