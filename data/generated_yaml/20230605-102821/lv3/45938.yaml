
- name: Create a File
  hosts: all
  tasks:
  - name: Touch a file
    vars:
      filepath: "/tmp/foo.txt"
    file:
      path: "{{ filepath }}"
      state: touch
  - name: Fail if file already exists
    fail:
      msg: "File already exists"
    when: ansible_check_mode is not true and not touch_result.is_changed
