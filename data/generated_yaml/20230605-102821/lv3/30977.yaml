
- name: Test YAML inventory parsing error
  hosts: localhost
  gather_facts: false
  connection: local
  tasks:
    - name: Generate YAML inventory file
      command: python3 /path/to/inventory_script.py --list > /tmp/inventory.yml
    - name: Read YAML inventory file
      include_vars:
        file: /tmp/inventory.yml
        name: inventory

- name: Debug inventory output
  hosts: all
  gather_facts: false
  tasks:
    - name: Test inventory parsing
      debug:
        msg: "{{ hostvars[inventory['all']['hosts'][0]] }}"

