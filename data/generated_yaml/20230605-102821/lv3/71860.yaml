yaml
- name: Test ansible-galaxy timeout error
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Install role from ansible-galaxy
      shell: >
        ansible-galaxy install {{ role_name }}
        --roles-path {{roles_dir}}
        --force
        {% if timeout is defined %}
        --timeout {{timeout}}
        {% endif %}
      register: galaxy_result
      ignore_errors: true
      environment:
        HOME: /tmp
    - name: Display error message
      debug:
        var: galaxy_result.stderr_lines
      when: galaxy_result | failed
