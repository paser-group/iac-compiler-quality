
- name: Test open_url with basic authentication
  hosts: all
  gather_facts: no
  tasks:
  - name: Open URL with Basic Auth
    vars:
      body: "example body"
      url: "http://{{ inventory_hostname }}:5000/api"
      username: "username"
      password: "password"
      header_content_type: "application/json"
    uri:
      url: "{{ url }}"
      method: POST
      body_format: json
      headers:
        Content-Type: "{{ header_content_type }}"
      body: "{{ body }}"
      status_code: 200
      validate_certs: no
      user: "{{ username }}"
      password: "{{ password }}"
