
- name: Update security group with ELB rule
  hosts: localhost
  gather_facts: false
  tasks:
  - name: create security group with ELB rule
    ec2_group:
      name: test-security-group
      description: Test Security Group
      vpc_id: vpc-123456
      region: us-west-2
      rules:
        - proto: tcp
          from_port: 80
          to_port: 80
          src_group: elb-abc123
      state: present
  - name: update security group with ELB rule
    ec2_group:
      name: test-security-group
      description: Test Security Group
      vpc_id: vpc-123456
      region: us-west-2
      rules:
        - proto: tcp
          from_port: 80
          to_port: 80
          src_group: elb-abc123
      state: present
