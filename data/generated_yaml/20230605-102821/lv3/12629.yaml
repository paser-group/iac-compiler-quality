
- name: Create a file on a full filesystem
  hosts: ubuntu1
  gather_facts: no
  tasks:
    - name: Create a full filesystem
      file:
        path: /tmp/full
        state: directory
      register: out
    - name: Fill up the filesystem
      command: "dd if=/dev/zero of=/tmp/full/filler bs=1024M count=1"
    - name: Create a file on a full filesystem
      file:
        path: /tmp/full/testfile
        state: touch
      ignore_errors: true
