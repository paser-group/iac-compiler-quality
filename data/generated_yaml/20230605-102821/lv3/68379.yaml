
---
- name: Pull and run Docker image
  hosts: all
  vars:
    docker_repo_username: "username"
    docker_repo_password: "password"
  tasks:
    - name: Pull Docker image
      docker_image:
        name: "{{ image_name }}"
        repository: "{{ repository_name }}"
        tag: "{{ tag_name }}"
        source: pull
        docker_registry: "{{ docker_registry_url }}"
        docker_username: "{{ docker_repo_username }}"
        docker_password: "{{ docker_repo_password }}"
      register: result
    - name: Run Docker container
      docker_container:
        name: "{{ container_name }}"
        image: "{{ image_name }}"
        state: started
