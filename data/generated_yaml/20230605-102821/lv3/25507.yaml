
- name: Collect facts from Cisco Nexus switch
  hosts: nxos-switch
  gather_facts: no
 
  tasks:
  - name: Gather facts using the nxos_facts module
    nxos_facts:
      gather_subset:
        - hardware
        - interfaces
        - vlans
      provider:
        host: "{{ inventory_hostname }}"
        username: "{{ username }}"
        password: "{{ password }}"
        transport: cli
 