
- name: Test copy and template diff with string_conversion_action=error
  hosts: all
  gather_facts: false
  tasks:
    - name: Copy file with string_conversion_action
      copy:
        src: /tmp/source.txt
        dest: /tmp/destination.txt
        string_conversion_action: error
      register: copy_diff_output
    
    - name: Display copy diff output
      debug:
        var: copy_diff_output.diff_result
    
    - name: Generate template file with string_conversion_action
      template:
        src: /tmp/input.j2
        dest: /tmp/output.txt
        string_conversion_action: error
      register: template_diff_output
    
    - name: Display template diff output
      debug:
        var: template_diff_output.diff_result
