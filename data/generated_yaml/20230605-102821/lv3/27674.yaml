
- name: Test nxos_reboot module for Cisco Nexus switch in ACI mode
  hosts: nexus_switch
  gather_facts: no

  tasks:
    - name: Reboot the Nexus switch via CLI method
      nxos_reboot:
        method: cli

    - name: Reboot the Nexus switch via NX-API method
      nxos_reboot:
        method: nxapi

  vars:
    ansible_python_interpreter: /usr/bin/python3
    ansible_connection: local
  
  # Inventory configuration
  [nexus_switch]
  10.1.1.1

  [nexus_switch:vars]
  ansible_network_os=nxos
