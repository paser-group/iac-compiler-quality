
- name: Create EC2 security group
  ec2_group:
    name: existing-group
    description: Existing Group
    region: us-west-2
    rules:
      - proto: tcp
        from_port: 22
        to_port: 22
        cidr_ip: 0.0.0.0/0
  register: result

- name: Attempt to create EC2 security group with duplicate name
  ec2_group:
    name: existing-group
    description: New Group
    region: us-west-2
    rules:
      - proto: tcp
        from_port: 80
        to_port: 80
        cidr_ip: 0.0.0.0/0
  register: duplicate_result
  ignore_errors: "{{ result.failed }}"
