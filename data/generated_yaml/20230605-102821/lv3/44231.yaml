
- name: Check Python Installation
  hosts: all
  gather_facts: no
  tasks:
    - name: Check for Python interpreter
      raw: systemctl status python3
      register: output
      ignore_errors: yes

    - name: Notify user if Python is missing
      debug:
        msg: "Python interpreter not found on {{ inventory_hostname }}"
      when: "'python3: command not found' in output.stderr or 'Failed to get unit file state' in output.stderr"
