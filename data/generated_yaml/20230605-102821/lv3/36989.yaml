
- hosts: all
  tasks:
    - debug:
        msg: "Checking for distribution"
    - name: Check distribution
      stat:
        path: "/etc/{{ distribution }}_release"
      register: dist_file
      ignore_errors: true
    - fail:
        msg: "Distribution {{ distribution }} NOT found"
      when: not dist_file.stat.exists
