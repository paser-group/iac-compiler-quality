
- name: Create Proxmox LXC Container
  hosts: localhost
  gather_facts: no

  vars:
    name: my-lxc-container
    hostname: container
    password: secret
    ostemplate: local:vztmpl/debian-10-standard_10.10-1_amd64.tar.gz
    cores: 1
    cpulimit: 1024
    memory: 1024
    net0: name=eth0,ip={{ inventory_hostname }},gw=10.1.1.254,bridge=vmbr0
    storage: local-lvm

  tasks:
    - name: Create Proxmox LXC Container
      proxmox:
        pm_type: api
        api_user: root@pam
        api_password: secret
        hostname: localhost
        pm_vm_type: lxc
        pm_task_desc: "Created by ansible"
        state: present
        name: "{{ name }}"
        hostname: "{{ hostname }}"
        password: "{{ password }}"
        ostemplate: "{{ ostemplate }}"
        cores: "{{ cores }}"
        cpulimit: "{{ cpulimit }}"
        memory: "{{ memory }}"
        net0: "{{ net0 }}"
        storage: "{{ storage }}"
