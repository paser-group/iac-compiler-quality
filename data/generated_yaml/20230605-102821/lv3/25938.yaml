
---
- hosts: localhost
  gather_facts: false

  tasks:
  - name: Create security group
    ec2_group:
      name: my_security_group
      description: My security group
      aws_access_key: "{{aws_access_key}}"
      aws_secret_key: "{{aws_secret_key}}"
      vpc_id: "vpc-123456"
      rules:
        - proto: tcp
          from_port: 22
          to_port: 22
          cidr_ip: 0.0.0.0/0
        - proto: tcp
          ports: [80, 443]
          cidr_ip: 0.0.0.0/0
      state: present
