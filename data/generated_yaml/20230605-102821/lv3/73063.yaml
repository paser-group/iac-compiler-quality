
- hosts: all
  gather_facts: no
  tasks:
    - name: Clone git repository
      git:
        repo: "https://github.com/example/repo.git"
        dest: "/opt/repo"
        version: "master"
        recursive: true
      ignore_errors: yes

    - name: Install Galaxy dependencies
      command: ansible-galaxy install -r /opt/repo/requirements.yml -p /opt/repo/roles
      environment:
        ANSIBLE_CONFIG: /dev/null
      register: galaxy_install_output
      ignore_errors: yes
      
    - name: Debug galaxy install error
      debug:
        var: galaxy_install_output
