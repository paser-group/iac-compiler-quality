
---
- name: Test jenkins_plugin module with Python 3
  hosts: all
  gather_facts: false
  tasks:
    - name: Install jenkins_plugin module
      pip:
        name: jenkins_plugin
        virtualenv: "{{ lookup('env','VIRTUAL_ENV') }}"
      when: ansible_python.version.major == 3
    - name: Test jenkins_plugin module
      jenkins_plugin:
        name: "git"
        state: "present"
      register: plugin_status
      when: ansible_python.version.major == 3
    - name: Print plugin installation status
      debug:
        var: plugin_status
      when: ansible_python.version.major == 3
