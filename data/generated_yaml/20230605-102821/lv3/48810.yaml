
- name: Create CloudWatch logs group and stream
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Create CloudWatch logs group
      community.aws.cloudwatchlogs_log_group:
        name: test-log-group
        state: present
        retention: 30
        tags:
          environment: dev

    - name: Create CloudWatch logs stream
      community.aws.cloudwatchlogs_log_stream:
        name: test-log-stream
        log_group_name: test-log-group
        state: present
