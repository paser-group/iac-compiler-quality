
- name: Terminate EC2 Instance
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Set AWS credentials
      set_fact:
        aws_access_key: '<access-key>'
        aws_secret_key: '<secret-key>'

    - name: Terminate EC2 instance
      ec2:
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        region: us-west-1
        instance_ids: i-0123456789abcdef0
        state: absent
        wait: true
        wait_timeout: 300
        wait_retries: 60
