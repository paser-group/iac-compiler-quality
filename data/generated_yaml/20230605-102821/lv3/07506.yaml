
- name: Create Auto Scaling Group
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create Launch Configuration
    ec2_lc:
      name: my-launch-configuration
      image_id: ami-0c55b159cbfafe1f0
      instance_type: t2.micro
      region: us-west-2
      key_name: mykey
      group: mysecuritygroup
      state: present
    register: lc

  - name: Create Auto Scaling Group
    ec2_asg:
      name: my-auto-scaling-group
      launch_config_name: "{{ lc.name }}"
      min_size: 1
      max_size: 5
      region: us-west-2
      vpc_zone_identifier: subnet-12345678
      state: present
