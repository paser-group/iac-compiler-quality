
---
- name: Test gcp_compute module
  hosts: localhost
  connection: local
  tasks:
  - name: List GCP instances
    gcp_compute:
      auth_kind: serviceaccount
      project: your_project_id
      zone: your_zone
      filters:
        - "labels.appenv:*prod*"
    register: instances

  - name: Display instance names
    debug:
      msg: "{{ instances.instances | map(attribute='name') | list }}"
