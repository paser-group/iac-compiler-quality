
- name: Test nxos_facts module
  hosts: all
  gather_facts: no
  tasks:
    - name: Retrieve NX-OS facts
      nxos_facts:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ lookup('file', '/path/to/password_file') }}"
          transport: cli
      register: nxos_output

    - name: Debug
      debug:
        var: nxos_output
