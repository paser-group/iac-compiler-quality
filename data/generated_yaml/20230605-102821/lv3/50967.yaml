
- name: Test Azure dynamic inventory on Windows
  hosts: localhost
  connection: local

  tasks:
  - name: Set Azure credentials
    set_fact:
      azure_rm_subscription_id: "SUBSCRIPTION_ID"
      azure_rm_client_id: "CLIENT_ID"
      azure_rm_secret: "SECRET"
      azure_rm_tenant: "TENANT"

  - name: Execute Azure dynamic inventory script
    command: "python /path/to/azure_rm.py --list"
    register: azure_inventory

  - name: Display inventory hostname
    debug:
      var: inventory_hostname
