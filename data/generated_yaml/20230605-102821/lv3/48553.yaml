
- name: Check if service exists
  win_shell:
    cmd: Get-Service "{{ service_name }}" | Format-List
  register: service_exists

- name: Start service
  win_service:
    name: "{{ service_name }}"
    start_mode: auto
    state: started
  when: service_exists.stdout is not defined or service_exists.stdout == ''
