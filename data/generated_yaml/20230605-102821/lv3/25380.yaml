
- name: RabbitMQ User playbook
  hosts: all
  
  vars:
    rabbitmq_user: testuser
    rabbitmq_password: testpassword
    
  tasks:
    - name: Add user to RabbitMQ
      rabbitmq_user:
        user: "{{ rabbitmq_user }}"
        password: "{{ rabbitmq_password }}"
        node_port: "{{ ansible_port }}"
        configure_privs: .*
        tags: all
        runas_user: rabbitmq
        runas_group: rabbitmq
