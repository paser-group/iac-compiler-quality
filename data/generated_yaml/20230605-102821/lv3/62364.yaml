
- hosts: all
  gather_facts: no
  tasks:
  - name: Fetch ports facts with fixed_ips.ip_address filter
    os_port_facts:
      cloud: '{{ item.cloud }}'
      filters:
        fixed_ips.ip_address: '{{ item.ip_address }}'
    register: fixed_ip_ports
    with_items:
      - { cloud: 'openstack', ip_address: '10.1.1.1' }
      - { cloud: 'openstack', ip_address: '10.1.1.2' }
      - { cloud: 'openstack', ip_address: '10.1.1.3' }
      - { cloud: 'openstack', ip_address: '10.1.1.4' }
  - name: Print fixed ip ports
    debug:
      var: item.ansible_facts.os_port_facts
    with_items: '{{ fixed_ip_ports.results }}'
