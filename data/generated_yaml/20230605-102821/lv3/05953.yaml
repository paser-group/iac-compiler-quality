
- name: Check service status
  hosts: all
  tasks:
    - name: Enable and start a service
      service:
        name: <service_name>
        enabled: yes
        state: started
      register: service_status

    - name: Debug service status
      debug:
        var: service_status

    - name: Check service status with --check option
      service:
        name: <service_name>
        state: started
        enabled: yes
        check_mode: yes
      register: service_status_check_mode

    - name: Debug service status with --check option
      debug:
        var: service_status_check_mode
