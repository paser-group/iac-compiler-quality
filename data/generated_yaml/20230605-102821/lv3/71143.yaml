
- name: Deploy content to VMware
  hosts: all
  tasks:
    - name: Create content folder
      file:
        path: /tmp/content/
        state: directory
      register: content_create

    - name: Deploy template
      vmware_content_deploy_template:
        hostname: 10.1.1.1
        username: admin
        password: "{{ vaulted_password_file }}"
        datacenter: DC1
        vm_folder: path/to/folder
        object_name: test_vm
        template_path: /tmp/content/
        vm_network_name: node-net
        vm_network_mode: static
        cluster: Cluster1
      register: deploy_template
      
    - debug:
        var: deploy_template
