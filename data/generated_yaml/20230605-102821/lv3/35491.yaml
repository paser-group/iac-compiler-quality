
---
- name: Create VMKernel Interface
  hosts: vmware_host
  vars:
    interface_name: vmk4
    ipv4_address: 192.168.1.100
    subnet_mask: 255.255.255.0
    gateway_ip: 192.168.1.1
  tasks:
  - name: Create VMKernel Interface using vmware_vmkernel module
    vmware_vmkernel:
      hostname: "{{ inventory_hostname }}"
      username: "{{ vmware_username }}"
      password: "{{ vmware_password }}"
      validate_certs: no
      interface_name: "{{ interface_name }}"
      ipv4_address: "{{ ipv4_address }}"
      subnet_mask: "{{ subnet_mask }}"
      gateway: "{{ gateway_ip }}"
      state: present
