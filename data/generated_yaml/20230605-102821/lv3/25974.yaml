
---
- hosts: localhost
  gather_facts: no

  vars:
    container_name: my_container
    image_name: alpine

  tasks:
    - name: Create existing configuration dictionary
      set_fact:
        existing_config:
          Config: "{{ container_name }}"
          Image: "{{ image_name }}"
          State: started

    - name: Create requested configuration dictionary
      set_fact:
        requested_config:
          Config: "{{ container_name }}"
          Image: "{{ image_name }}"
          Label: "some_label"

    - name: Compare the two configurations
      debug:
        msg:
          - "existing_config: {{ existing_config }}"
          - "requested_config: {{ requested_config }}"
      when: existing_config != requested_config

