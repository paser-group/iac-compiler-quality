
- name: Test WinRM connection to Windows server 2019
  hosts: windows-servers
  gather_facts: no
  tasks:
  - name: Test connection
    win_ping:
    register: result
    vars:
      ansible_user: invalid_user
      ansible_password: invalid_password
      ansible_port: 5986
      ansible_connection: winrm
      ansible_winrm_server_cert_validation: ignore
  - name: Show WinRM connection result
    debug:
      var: result
