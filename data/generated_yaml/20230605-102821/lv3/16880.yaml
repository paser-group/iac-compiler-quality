
- name: Example Task
  hosts: all
  vars:
    my_dict:
      - name: Ubuntu
        os: Ubuntu 18.04
        package: apache2
      - name: CentOS
        os: CentOS 7
        package: httpd
  tasks:
    - name: Check OS and Install Package
      when:
        - "'Ubuntu' in item.name and item.package == 'httpd'"
        - "'CentOS' in item.name and item.package == 'apache2'"
      debug:
        msg: "Installing {{ item.package }} on {{ item.os }} OS"
      loop: "{{ my_dict }}"
