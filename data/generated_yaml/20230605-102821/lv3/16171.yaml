
- name: Configure HTTPS listener for AWS ELB
  hosts: localhost
  gather_facts: false

  vars:
    elb_name: my-elb
    listener_port: 443
    instance_port: 80
    ssl_certificate_name: my-cert
    ssl_certificate_body: "{{ lookup('file', '/path/to/certificate_body.pem') }}"
    ssl_certificate_key: "{{ lookup('file', '/path/to/certificate_key.pem') }}"

  tasks:
    - name: Set up HTTPS listener for ELB
      local_action:
        module: ec2_elb_listener
        load_balancer_name: "{{ elb_name }}"
        state: present
        protocol: HTTPS
        port: "{{ listener_port }}"
        instance_port: "{{ instance_port }}"
        ssl_certificate_id: "{{ ssl_certificate_name }}"
        ssl_certificate_chain: "{{ ssl_certificate_body }}"
        ssl_certificate_key: "{{ ssl_certificate_key }}"
