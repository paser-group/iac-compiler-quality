
- hosts: all
  gather_facts: no

  tasks:
    - name: Copy binary file
      copy:
        src: /path/to/binary/file
        dest: /tmp/binary.bin
        mode: '0755'
        binary: yes

    - name: Load binary file as string
      command: "base64 --wrap=0 /tmp/binary.bin"
      register: encoded_binary_output

    - name: Save decoded binary to file
      copy:
        content: "{{ encoded_binary_output.stdout }}"
        dest: /tmp/decoded.bin

    - name: Verify file contents
      command: "cmp /path/to/binary/file /tmp/decoded.bin"
      changed_when: false
      ignore_errors: true
