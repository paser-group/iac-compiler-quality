
- name: Set variable with Jinja2 template filter
  hosts: all
  gather_facts: no

  vars:
    message: "Hello world"
    my_var: "{{ message | upper }}"

  tasks:
    - name: Set fact with a Jinja2 template expression
      set_fact:
        my_fact: "{{ my_var }}"

    - name: Print the variable value
      debug:
        var: my_fact
