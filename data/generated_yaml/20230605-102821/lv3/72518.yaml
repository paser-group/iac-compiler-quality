
- name: Test custom fact for bad interpreter error
  hosts: all
  gather_facts: no
  tasks:
    - name: Create custom fact file
      copy:
        content: |
          #!/bin/bah
          echo "variable_name: some_value"
        dest: /etc/ansible/facts.d/custom.fact
        mode: "0755"
      become: true

    - name: Check if fact is available
      debug:
        var: ansible_local.custom.variable_name
