
- name: set_fact bug reproduction
  hosts: all
  gather_facts: no

  tasks:
    - name: create an array of dictionaries
      set_fact:
        my_array: >-
          [
            {"name": "ubuntu1", "ip": "10.1.1.1"},
            {"name": "alpine1", "ip": "10.1.1.2"},
            {"name": "centos1", "ip": "10.1.1.3"},
            {"name": "redhat1", "ip": "10.1.1.4"}
          ]

    - name: template the array using the loop construct
      set_fact:
        my_dict: "{{ item }}"
      loop: "{{ my_array }}"
      
    - name: display the dictionary keys and values
      debug:
        var: item
      loop: "{{ my_dict }}"
