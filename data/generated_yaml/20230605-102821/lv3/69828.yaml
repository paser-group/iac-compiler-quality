
- name: Connect to Windows node using winrm
  hosts: windows
  become: true
  gather_facts: no

  vars:
    ansible_connection: winrm
    ansible_winrm_transport: credssp
    ansible_winrm_transport_password: 'Pässwörd'

  tasks:
  - name: Check if the connection is successful
    raw: powershell Get-Date
    register: result

  - name: Display the output of the command
    debug:
      var: result.stdout_lines
