
- hosts: all
  gather_facts: no

  tasks:
  - name: Run failing tasks within loop
    shell: "{{ item }}"
    any_errors_fatal: true
    loop:
    - "echo 'Task 1'"
    - "echo 'Task 2'"
    - "exit 1"
    register: result

  - name: Check the result of the tasks
    debug:
      var: result
