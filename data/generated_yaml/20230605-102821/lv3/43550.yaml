
- name: Test SSH Connection with Private Key
  hosts: ubuntu1
  gather_facts: no
  become: yes
  become_method: sudo
  vars:
    ansible_ssh_extra_args: "-o StrictHostKeyChecking=no"
    ansible_ssh_private_key_file: /path/to/private/key
  tasks:
    - name: Attempt SSH Connection
      shell: ssh -o PasswordAuthentication=no -T -i {{ ansible_ssh_private_key_file }} {{ inventory_hostname }}
      register: ssh_output
      ignore_errors: true
    - name: Print SSH Connection Output
      debug:
        var: ssh_output.stderr_lines
