
- name: Configure Vxlan on NXOS device using nxapi transport
  hosts: nxos_device
  gather_facts: false
  connection: nxapi
  tasks:
    - name: Create VTEP
      nxos_vxlan_vtep_vni:
        vtep_ip: "{{ inventory_hostname }}"
        vni: 10001
        host: "{{ inventory_hostname }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        transport: grpc
      register: result
  
    - name: Print Vxlan VTEP Configuration
      debug:
        msg: "{{ result.stdout }}"
