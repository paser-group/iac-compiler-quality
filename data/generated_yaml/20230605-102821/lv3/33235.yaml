
- name: Change Semaphore Path
  hosts: all
  gather_facts: no
  become: yes
  tasks:
    - name: Create Semaphore Directory
      file:
        state: directory
        path: "{{ item.path }}"
        mode: '0755'
      loop:
        - { path: "/var/my_sem_dir", owner: "root", group: "root" }
        - { path: "/var/lock/my_sem_dir", owner: "root", group: "root" }
    - name: Write to Semaphore File
      copy:
        content: "test content"
        dest: "{{ item }}"
      loop:
        - /var/my_sem_dir/test_file
        - /var/lock/my_sem_dir/test_file
