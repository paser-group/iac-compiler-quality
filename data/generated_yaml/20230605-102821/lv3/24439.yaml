
- name: Test Ansible Compiler for 'map' filter issue
  hosts: all
  gather_facts: no
  vars:
    my_dict:
      - { name: 'test1', color: 'red' }
      - { name: 'test2', color: 'blue' }
      - { name: 'test3', color: 'green' }
  tasks:
    - name: Print 'color' key of each dictionary with 'map' filter
      debug:
        msg: "{{ item.color }}"
      with_items: "{{ my_dict | map(attribute='json') | list }}"
