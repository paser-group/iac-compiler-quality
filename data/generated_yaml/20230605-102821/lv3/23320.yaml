
- name: Test WinRM connection on Windows machine
  hosts: windows_machines
  gather_facts: no
  vars:
    ansible_user: administrator
    ansible_password: "{{ lookup('file', '/path/to/password/file') }}"
    ansible_connection: winrm
    ansible_winrm_transport: basic
    ansible_winrm_server_cert_validation: ignore
    ansible_winrm_read_timeout_sec: 10
  tasks:
    - name: Test WinRM connection to Windows machine
      win_ping:
