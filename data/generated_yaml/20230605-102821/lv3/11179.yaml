
- name: Install roles using the role-file option
  hosts: localhost
  vars:
    role_file_path: "/tmp/roles-to-install.yml"
  tasks:
    - name: Create a temporary file with desired role names
      tempfile:
         state: file
         suffix: '.yml'
      register: role_file
    - name: Add roles to the temporary file
      lineinfile:
        line: "{{ item }}"
        path: "{{ role_file_path }}"
      loop:
        - role-name-1
        - role-name-2
        - role-name-3
      register: result
    - name: Install roles using role-file option
      ansible-galaxy:
        role-file: "{{ role_file_path }}"
        state: present
  # Specify inventory file
  -i inventory
  # Specify private key file
  --private-key /var/tmp/key_I.pem
  # Specify become password file
  --become-password-file <path_to_password_file>
  