
---
- name: Testing bugs using skip tags
  hosts: all
  gather_facts: false
  vars:
    message: "This is a sample message"
  tasks:
    - name: Set message variable
      set_fact:
        my_message: "{{ message }}"
      tags:
        - set_message

    - debug:
        var: my_message
      when: "'set_message' not in group_names"
      tags:
        - debug_message

    - debug:
        var: my_message
      when: "'set_message' in group_names"
      tags:
        - debug_message_skipped
  
  tags:
    - test_tags
    - skip_tags_demo
