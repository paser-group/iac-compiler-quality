
- name: Test IAM module error message
  hosts: all
  gather_facts: no

  vars:
    username: "invalidusername"
    password: "invalidpassword"

  tasks:
  - name: Execute IAM module
    iam:
      iam_conn_name: "default"
      iam_module_name: "mymodule"
      aws_access_key: "{{ username }}"
      aws_secret_key: "{{ password }}"
    delegate_to: localhost
    register: iam_output

  - name: Display output
    debug:
      var: iam_output
