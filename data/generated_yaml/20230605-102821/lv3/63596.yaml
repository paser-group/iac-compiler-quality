
- name: Install role using ansible-galaxy
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure proxy settings
      set_fact:
        proxy_env: "{{ lookup('env', 'http_proxy') }}"
    - name: Install role
      ansible.builtin.shell: 'ansible-galaxy install <role_name> -vvv'
      environment:
        http_proxy: "{{ proxy_env }}"
