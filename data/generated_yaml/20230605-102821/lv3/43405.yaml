
- name: Clone Terraform module
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Clone Terraform module
    git:
      repo: <repository_url>
      dest: /home/user/module
  - name: Plan Terraform module deployment
    shell: "cd /home/user/module && terraform plan -var-file={{path_to_var_file}} -out=plan.out"
  - name: Deploy Terraform module
    shell: "cd /home/user/module && terraform apply plan.out"
