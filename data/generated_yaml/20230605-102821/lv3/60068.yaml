
- name: Create Windows DNS A and PTR records
  hosts: win_servers
  tasks:
    - name: Create A record
      win_dns_record:
        name: "{{ host_name }}"
        zone: "{{ dns_zone }}"
        value: "{{ host_ip }}"
        # Set rr_type attribute to "A"
        rr_type: A
        # IP address of the DNS name server
        nameserver: "{{ dns_server }}"
        # Allow overwrite of existing records
        overwrite: true
    - name: Create PTR record
      win_dns_record:
        name: "{{ host_ip.split('.')[3] }}.{{ host_ip.split('.')[2] }}.{{ host_ip.split('.')[1] }}.{{ host_ip.split('.')[0] }}.in-addr.arpa."
        # Set rr_type attribute to "PTR"
        rr_type: PTR
        zone: {{ dns_zone.split('.')[1:] | join('.') }}.in-addr.arpa
        # IP address of the DNS name server
        nameserver: "{{ dns_server }}"
        # Allow overwrite of existing records
        overwrite: true
