
---
- name: Testing the 'removes' option for command module
  hosts: all
  vars:
    remove_string: "rm /tmp/test_file"
  tasks:
    - name: Removing a file using 'removes' option
      command: "ls /tmp/test_file"
      register: output_1
      ignore_errors: yes

    - name: Removing a file using 'removes' option
      command: "ls /tmp/test_file"
      register: output_2
      removes: "{{ remove_string }}"
      ignore_errors: yes
      
    - name: Print output
      debug:
        var: item.stdout_lines
      loop:
        - "{{output_1}}"
        - "{{output_2}}"
