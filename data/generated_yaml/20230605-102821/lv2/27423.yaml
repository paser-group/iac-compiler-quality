yaml
---
- name: Openstack Plugin Performance Test Playbook
  hosts: all
  gather_facts: no

  tasks:
    - name: Install dependencies
      apt:
        name: ['python-openstackclient', 'python-novaclient', 'python-keystoneclient', 'python-glanceclient', 'python-swiftclient', 'python-cinderclient', 'python-neutronclient']
        state: present

    - name: Configure Openstack client with invalid credentials
      os_auth:
        cloud: 'testcloud'
        auth:
          auth_url: 'http://10.1.1.5:5000/v3'
          username: 'admin123'
          password: 'password123'
          project_name: 'admin'
          project_domain_name: 'Default'
          user_domain_name: 'Default'

    - name: List Openstack instances
      os_server_facts:
        timeout: 600
