
- name: Collect network device facts
  hosts: all
  gather_facts: no
  vars:
    ansible_python_interpreter: /usr/bin/python

  tasks:
  - name: Collect all device facts
    ios_facts:
      gather_subset:
      - "!min"
      - "!config"
      - "!interfaces"
      - "!interfaces_counters"
      - "!logging"
  - name: Collect NXOS device facts
    nxos_command:
      commands:
        - show interface brief
    register: nxos_facts
    when: "'nxos' in inventory_hostname"

- name: Print summary of collected facts
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Display collected facts
    debug:
      var: ansible_facts
