
- name: Error for shell with Grep highlighting
  hosts: all
  gather_facts: yes
  become: yes
  tasks:
    - name: Execute invalid command
      shell: "|'grep; sleep 5' </dev/null"
      register: cmd_output
      changed_when: false
      ignore_errors: true
    
    - name: Check if command failed
      assert:
        that: cmd_output.rc != 0
        fail_msg: "Command succeeded!"
        success_msg: "Command failed as expected."
