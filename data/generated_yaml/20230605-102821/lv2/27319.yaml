
---
- name: Stress test nxos_nxapi module
  hosts: all
  gather_facts: no
  
  tasks:
    - name: Perform invalid commands
      nxos_nxapi:
        command_string: "{{['show version','show running-config','invalid_command']}}"
        provider:
          host: "{{ item }}"
          username: admin
          password: admin123
          use_ssl: "{{ true | random }}"
          port: "{{ [10,20,30] | random }}"
      loop:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1
