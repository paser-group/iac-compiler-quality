
- name: Testing templating in set_fact method
  hosts: node-net
  gather_facts: false

  tasks:

  - name: Set variable using template
    set_fact:
      my_var: "{{ '{{' }} body {{ '}}' }}"
    tags:
      - stress_test

  - name: Set variable using hardcoded value
    set_fact:
      my_var: "hardcoded_value"
    tags:
      - stress_test

  - name: Set variable using Jinja2 function
    set_fact:
      my_var: "{{ lookup('env', 'HOME') }}"
    tags:
      - stress_test

  - name: Set variable using unavailable function
    set_fact:
      my_var: "{{ does_not_exist() }}"
    tags:
      - stress_test

  - name: Set variable using invalid syntax
    set_fact:
      my_var: "{{ 1 + }}"
    tags:
      - stress_test

  - name: Set variable using loop control variable
    set_fact:
      my_var: "{{ item }}"
    loop: "{{ ['val1', 'val2', 'val3'] }}"
    tags:
      - stress_test

  - name: Set variable using external file
    set_fact:
      my_var: "{{ lookup('file', 'path/to/file.txt') }}"
    tags:
      - stress_test
