
- name: Test win_firewall_rule module defaults
  hosts: all
  gather_facts: false
  vars:
    firewall_rules:
      - name: Allow RDP Inbound
        action: allow
        direction: inbound
        protocol: tcp
        localport: 3389
        remoteip: any
        enabled: yes
        ignore: yes
  tasks:
    - name: Ensure firewall rule set
      win_firewall_rule:
        rule: "{{ item }}"
      loop:
        - "{{ firewall_rules }}"
        - name: Leave Existing Rule
          ignore: yes
      ignore_errors: true
      register: result
      
    - name: Debug result
      debug:
        msg: "{{ result }}"
