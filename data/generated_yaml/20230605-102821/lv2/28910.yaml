
- name: Test Ansible compiler for password error
  hosts: all
  gather_facts: false
  become: true
  vars:
    my_password: "{{ 1 | random | string | password_hash('sha512') }}"
  tasks:
    - name: Check if password is correct
      command: whoami
      register: result
      become_password: "{{ my_password }}"
      
    - name: Display result of command
      debug:
        var: result.stdout_lines
