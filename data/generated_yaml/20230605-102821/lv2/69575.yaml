
- name: ipaddr filter bug detection
  hosts: all
  gather_facts: false
  
  tasks:
  - name: Test ipaddr filter on empty list
    debug:
      msg: "{{ [] | ipaddr }}"

  - name: Test ipaddr filter on non empty list
    debug:
      msg: "{{ [1,2,3] | ipaddr }}"

  - name: Test ipaddr filter on non existent variable
    debug:
      msg: "{{ var | ipaddr | default(False) }}" 

  - name: Test ipaddr filter on non-ip address value
    debug:
      msg: "{{ 'not_ip_address' | ipaddr }}"

  - name: Test ipaddr filter on non-string value
    debug:
      msg: "{{ 1234 | ipaddr }}" 

  - name: Test ipaddr filter on a valid ipv4 address
    debug:
      msg: "{{ '192.168.0.1' | ipaddr }}" 

  - name: Test ipaddr filter on a valid ipv6 address
    debug:
      msg: "{{ '2001:db8:0:1234:0:567:8:1' | ipaddr }}"
