yaml
---

- name: Slack notification stress test
  hosts: all
  gather_facts: false
  tasks:
    - name: Install Slack client
      when: "ansible_distribution == 'Ubuntu'"
      apt:
        name: slack
        state: present

    - name: Send message to Slack
      when: "inventory_hostname == 'ubuntu1'"
      command: >
        slack message "Testing 1, 2, 3"
        slack channel "#general"
        slack username "Ansible"
        slack icon_emoji ":robot_face:"

    - name: Send message to Slack
      when: "inventory_hostname == 'alpine1'"
      command: >
        slack message "Testing 1, 2, 3"
        slack channel "#general"
        slack username "Ansible"
        slack icon_emoji ":robot_face:"

    - name: Send message to Slack
      when: "inventory_hostname == 'centos1'"
      command: >
        slack message "Testing 1, 2, 3"
        slack channel "#general"
        slack username "Ansible"
        slack icon_emoji ":robot_face:"

    - name: Send message to Slack
      when: "inventory_hostname == 'redhat1'"
      command: >
        slack message "Testing 1, 2, 3"
        slack channel "#general"
        slack username "Ansible"
        slack icon_emoji ":robot_face:"
