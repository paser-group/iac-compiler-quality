
---
- name: Test playbook for template with default empty string as filter
  hosts: all
  gather_facts: no
  tasks:
    - name: Test with default filter
      template:
        src: "test_template.j2"
        dest: "/tmp/test_template"
        vars:
          body_value: "{{ body | default('') }}"
      register: result1
    - name: Print result from default filter
      debug:
        var: result1

    - name: Test with reject filter
      template:
        src: "test_template.j2"
        dest: "/tmp/test_template"
        vars:
          body_value: "{{ body | reject }}"
      register: result2
    - name: Print result from reject filter
      debug:
        var: result2

    - name: Test with count filter
      template:
        src: "test_template.j2"
        dest: "/tmp/test_template"
        vars:
          body_value: "{% for i in range(0,5) %} {{ i }} {% endfor %}"
      register: result3
    - name: Print result from count filter
      debug:
        var: result3
    
    - name: Test with invalid filter
      template:
        src: "test_template.j2"
        dest: "/tmp/test_template"
        vars:
          body_value: "{{ body | invalid }}"
      register: result4
    - name: Print result from invalid filter
      debug:
        var: result4
