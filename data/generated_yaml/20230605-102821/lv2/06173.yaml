
- name: Unarchive bug testing playbook
  hosts: all
  gather_facts: no

  tasks:
    - name: Extract ZIP file with wrong file extension
      unarchive:
        src: /path/to/archive.tar.gz
        dest: /path/to/extract
        remote_src: yes
        copy: no
        extra_opts: "--file-format=zip"
      register: zip_wrong_extension

    - name: Extract ZIP file with incorrect password
      unarchive:
        src: /path/to/archive.zip
        dest: /path/to/extract
        remote_src: yes
        copy: no
        password: "incorrect_password"
      register: zip_wrong_password

    - name: Extract GZ file with ZIP command
      unarchive:
        src: /path/to/archive.tar.gz
        dest: /path/to/extract
        remote_src: yes
        copy: no
        extra_opts: "--format=zip"
      register: gz_with_zip_command

    - name: Extract file with symbolic link source
      unarchive:
        src: /path/to/symlink
        dest: /path/to/extract
        remote_src: yes
        copy: no
      register: symlink_src

    - name: Extract from non-existent source
      unarchive:
        src: /path/to/non-existent
        dest: /path/to/extract
        remote_src: yes
        copy: no
      register: non_existent_src
