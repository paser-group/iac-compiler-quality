
- hosts: all
  gather_facts: no
  tasks:
  - name: Testing for nxos_igmp_interface
    nxos_igmp_interface:
      name: "{{ item }}"
      vrf: test_vrf
      pim: sparse-dense-mode
      last_member_query_count: "{{ 1 + 1 }}"
      static_group: "{{ [ '224.0.0.1/30', '224.0.0.4/24', '224.0.1.39/32' ] | join('.') }}"
      state: "{{ ['present', 'absent'][random.randint(0,1)] }}"
    loop:
      - invalid_name!@
      - "test interface"
      - "{{ 'nxos' }}" + "{{ 'igmp_interface' }}"
      - "interface_{{ item }}"
      - "{{ ansible_facts['nodename'] }}"
      - "10.1.1.{{ random.randint(1,255) }}"
      - "{{ ['enable', 'disable'][random.randint(0,1)] }}"
      - "{{ [ '238.0.0.1/30', '249.0.0.4/24', '168.1.39/32', '10.1.1.0/31' ] |random }}"
