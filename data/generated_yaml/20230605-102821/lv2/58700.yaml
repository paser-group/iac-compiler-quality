
- name: Stress test win_dns_record module
  hosts: all
  gather_facts: false
  tasks:
    - name: Generate random domain name
      set_fact:
        domain: "{{ ['example.com', 'domain.com', 'test.com', 'ansible-test.com', 'domain.xyz', 'test.xyz', 'foobar.com']|random }}"
    - name: Generate random record type
      set_fact:
        record_type: "{{ ['A', 'CNAME', 'MX', 'PTR', 'SRV', 'TXT']|random }}"
    - name: Generate random record value
      set_fact:
        record_value: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3', '10.1.1.4', 'ansible-test-1', 'test-domain-2', 'www.example.com', '@', 'localhost.local']|random }}"
    - name: Add DNS record
      win_dns_record:
        name: "{{ domain }}"
        record_type: "{{ record_type }}"
        record_value: "{{ record_value }}"
        zone: "{{ domain }}"
      register: result
    - name: Print result
      debug:
        var: result
