
- hosts: ubuntu1
  become: true
  gather_facts: true

  tasks:
    - name: Clone a repository from Bitbucket via SSH
      git:
        repo: git@bitbucket.org:{{bitbucket_username}}/{{bitbucket_repo}}.git
        version: "{{branch}}"
        dest: "{{local_directory}}"
        accept_hostkey: yes
        key_file: "{{ssh_key_path}}"
        clone: yes

      vars_prompt:
        - name: bitbucket_username
          prompt: "Enter Bitbucket username:"
        - name: bitbucket_repo
          prompt: "Enter Bitbucket repository name:"
        - name: branch
          prompt: "Enter git branch to checkout:"
          default: "main"
        - name: ssh_key_path
          prompt: "Enter SSH Key location:"
          default: "~/.ssh/id_rsa"
        - name: local_directory
          prompt: "Enter local directory to clone:"
          default: "~/project"
