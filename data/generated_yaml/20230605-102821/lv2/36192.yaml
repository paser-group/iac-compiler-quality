
- name: Gather EC2 ASG Facts
  hosts: node-net
  become: yes
  gather_facts: no
  tasks:
    - name: Gather ASG facts
      ec2_asg_facts:
        region: ap-southeast-2
        aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
        aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"
      register: asg_facts

    - debug:
        var: asg_facts
