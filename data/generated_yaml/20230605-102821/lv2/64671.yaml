
---
- name: Test bigip_dns_cache_resolver module
  hosts: all
  gather_facts: False

  tasks:
  - name: Configure F5 BIG-IP DNS cache resolver
    bigip_dns_cache_resolver:
      name: '{{ hostvars[item]['ansible_hostname'] }}'
      cache_resolvers:
        - "{{ '1.1.1.1' }}"
        - "{{ '8.8.8.8' }}"
    when: "'bigip' in group_names"
    with_items: "{{ groups['all'] }}"

  - name: Test incorrect module name
    shell:
      command: "echo 'Hello, World!'"
    when: "'alpine' in group_names"

  - name: Use CentOS with a wrong test command
    command: wrong_command
    when: "'centos' in group_names"

  - name: Test a non-existing module
    non_existing_module:
      key: value
    when: "'redhat' in group_names"

  - name: Use Ubuntu with unexpected input
    apt:
      pkg: "{{ foo }}"
    when: "'ubuntu' in group_names"
