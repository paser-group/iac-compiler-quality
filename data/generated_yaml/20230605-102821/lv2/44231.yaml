
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Execute command and capture output
      ignore_errors: true
      shell: "python -c 'print(\"Python version:\", python_version)'"
      register: output
      vars:
        python_version: "Python missing"
      failed_when: "'Python version:' not in output.stdout"
      changed_when: False
