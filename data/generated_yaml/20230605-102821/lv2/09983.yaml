
- name: Perform stress test for wait_for module
  hosts: all
  gather_facts: no
  tasks:
    - name: Execute wait_for with default options that hangs
      wait_for:
        host: "{{ inventory_hostname }}"
      register: wait_result

    - name: Print registered variable
      debug:
        msg: "{{ wait_result }}"

    - name: Execute wait_for with non-existing host
      wait_for:
        host: shouldnotexist.localhost
      register: wait_result_non_existing

    - name: Print registered variable
      debug:
        var: wait_result_non_existing

    - name: Execute wait_for with invalid state value
      wait_for:
        host: "{{ inventory_hostname }}"
        state: shouldnotexist
      register: wait_result_invalid_state

    - name: Print registered variable
      debug:
        var: wait_result_invalid_state
