
- name: mysql_db module stress test playbook
  hosts: all
  gather_facts: false
  become: true

  tasks:
  - name: Generate dump of MySQL databases including detailed error message
    mysql_db:
      login_host: "{{ host }}"
      login_user: "{{ user }}"
      login_password: "{{ password }}"
      state: dump
      name: "{{ db_name }}"
      connect_timeout: "`touch /tmp/mysql_dump_test; cat /etc/passwd >> /tmp/mysql_dump_test`"
      encoding: "{{ db_name }}'; touch /tmp/mysql_dump_test; cat /etc/passwd >> /tmp/mysql_dump_test; echo '"
