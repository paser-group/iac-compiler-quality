
- name: Test playbook for net_vlan issue
  hosts: all
  gather_facts: true
  vars:
    vlan_name: "{{ 'a' * 250 }}"
    vlan_id: "{{ 4097 }}"
  tasks:
    - name: Create VLAN with long VLAN name
      ios_vlan:
        name: "{{ vlan_name }}"
        vlan_id: 200
        provider:
          transport: cli
      register: create_vlan_result
      ignore_errors: true
      no_log: true
      tags: ['create_vlan']

    - name: Create VLAN with invalid VLAN ID
      ios_vlan:
        name: "test_vlan"
        vlan_id: "{{ vlan_id }}"
        provider:
          transport: cli
      register: create_vlan_result
      ignore_errors: true
      no_log: true
      tags: ['create_vlan']
