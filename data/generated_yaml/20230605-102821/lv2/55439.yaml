
---
- hosts: all
  gather_facts: false
  
  tasks:
  - name: Set non-ASCII string
    set_fact:
      non_ascii: "Zǎlžberg"
  
  - name: Export zabbix template with non-ASCII string
    shell: "zabbix_export -f /tmp/template.xml --template '{{ non_ascii }}'"

  - name: Import zabbix template with non-ASCII string
    shell: "zabbix_import -f /tmp/template.xml --template '{{ non_ascii }}'"

  - name: Configure Zabbix agent with non-ASCII string
    template:
      src: zabbix_agentd.conf.j2
      dest: /etc/zabbix/zabbix_agentd.conf
    vars:
      zabbix_server: "{{ non_ascii }}"
