yaml
---
- name: Invalid Host error for dynamic inventory
  hosts: all
  gather_facts: false

  tasks:
    - name: Ping all hosts
      ping:

    - name: Retrieve dynamic inventory
      include_vars:
        dir: "{{ inventory_dir }}"
        file: "{{ inventory_file }}"
        name: dynamic_inventory

    - name: Execute tasks on each inventory host
      include_tasks: "{{ playbook_dir }}/{{ dynamic_inventory['hosts'] | random }}.yml"
