
- name: Test ansible compiler with incorrect file module usage
  hosts: all
  gather_facts: no

  tasks:
    - name: Attempt to copy file without state=link
      file:
        src: /var/log/messages
        dest: /tmp/messages_copy

    - name: Attempt to create directory using file module without state=directory
      file:
        path: /tmp/test-dir

    - name: Attempt to delete a file without state=absent
      file:
        path: /tmp/messages_copy

    - name: Attempt to use file with invalid parameters
      file:
        src: "{{lookup('env','HOME')}}/temp"
        dest: "{{lookup('env','HOME')}}/temp2"
        mode: "{{random(1, 777)}}"
        owner: "{{random(1, 1000)}}:{{random(1, 1000)}}"
