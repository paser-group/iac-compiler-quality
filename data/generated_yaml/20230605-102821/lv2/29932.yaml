
- name: Docker Image Pull Stress Test
  hosts: all
  gather_facts: no

  tasks:
  - name: Install Docker
    apt:
      name: docker-ce
      state: present

  - name: Pull Docker Images Stress Test
    docker_image:
      name: "{{ item }}"
      pull: true
    with_items:
      - ubuntu:latest
      - alpine:latest
      - centos:latest
      - redhat:7.6

  - name: Cleanup Docker Images
    docker_container:
      state: absent
      image: "{{ item }}"
      force_stop: true
    with_items:
      - ubuntu:latest
      - alpine:latest
      - centos:latest
      - redhat:7.6
