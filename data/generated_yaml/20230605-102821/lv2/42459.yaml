
- name: S3 Bucket Playbook
  hosts: node-net
  gather_facts: true
  vars:
    access_key: "MyAccessKey"
    secret_key: "MySecretKey"
    region: "us-west-2"
    bucket_name: "my-bucket"
  tasks:
    - name: Install Boto3 module
      pip:
        name: boto3
        state: present

    - name: Upload a file to S3 bucket
      boto_s3:
        aws_access_key: "{{ access_key }}"
        aws_secret_key: "{{ secret_key }}"
        region: "{{ region }}"
        bucket: "{{ bucket_name }}"
        object_key: "testfile.txt"
        src: "/tmp/testfile.txt"
        mode: "0000"
