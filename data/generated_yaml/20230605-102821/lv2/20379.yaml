
---
- name: Test json_query filter
  hosts: ubuntu1
  gather_facts: False

  vars:
     test_cases:
       - "{'name': 'John', 'age': 27}"
       - "{'name': 'Jane', 'age': 32}"
       - "{'name': 'Bob', 'age': 'thirty'}"

  tasks:
    - block:
        - name: Execute json_query filter on each item in test_cases
          debug:
            var: item | json_query('age')
          with_items: "{{ test_cases }}"
      rescue:
        - name: Handle Type Error
          debug:
            msg: "Caught {{ ansible_failed_result.msg }}"

