
- name: Test uri module import error
  hosts: all
  tasks:
    - name: Install missing import dependencies
      command: pip3 install requests

    - name: Test uri module with missing dependency
      uri:
        url: http://localhost/
        validate_certs: no
      register: uri_result

    - name: Verify uri module import error occurred
      assert:
        that: "'ImportError:' in uri_result.msg"
