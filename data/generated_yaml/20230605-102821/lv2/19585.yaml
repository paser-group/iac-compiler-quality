yaml
- name: osx_defaults stress test
  hosts: all
  vars:
    invalid_value: "1, 2, 3, 4"
    valid_value: ['1', '2', '3', '4']

  tasks:
    - name: Test with an invalid value
      osx_defaults:
        domain: com.example.test
        key: test_key
        array: "{{ invalid_value }}"
      ignore_errors: true

    - name: Test with valid value but irregular syntax
      osx_defaults:
        domain: com.example.test
        key: "{{ valid_value }}"
        array: "{{ valid_value }}"
      ignore_errors: true
    
    - name: Test with invalid domain name
      osx_defaults:
        domain: com.example-test
        key: test_key
        array: "{{ valid_value }}"
      ignore_errors: true

    - name: Test with invalid key name
      osx_defaults:
        domain: com.example.test
        key: test/key
        array: "{{ valid_value }}"
      ignore_errors: true

    - name: Test with invalid array value
      osx_defaults:
        domain: com.example.test
        key: test_key
        array: 1234
      ignore_errors: true

    - name: Test with invalid action
      osx_defaults:
        domain: com.example.test
        key: test_key
        array: "{{ valid_value }}"
        action: add_or_update
      ignore_errors: true

    - name: Test with an extra argument
      osx_defaults:
        domain: com.example.test
        key: test_key
        array: "{{ valid_value }}"
        extra_arg: true
      ignore_errors: true
