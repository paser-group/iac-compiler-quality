
---
- name: Stress Test Playbook
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Execute process_common_errors function multiple times
      shell: python -c 'from ansible.utils.__init__ import process_common_errors; [process_common_errors({"name": "ERROR", "value": "Too many calls to process_common_errors in utils/__init__.py"}) for i in range(10000)]'
      ignore_errors: true

    - name: Execute sleep function
      command: "sleep {{ item }}"
      with_items:
        - 1
        - 2
        - 3
        - 4
        - 5

  post_tasks:
    - name: Print message after tasks have completed
      debug:
        msg: "Stress Test Completed"
---
