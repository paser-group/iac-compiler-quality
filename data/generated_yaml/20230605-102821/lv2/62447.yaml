
- name: Stress Test Playbook for azure_rm_sqlserver module
  hosts: all
  gather_facts: false

  tasks:
    - name: Install stress-ng package
      apt:
        name: stress-ng
        state: present

    - name: Run stress test on azure_rm_sqlserver module
      shell: stress-ng --vm 1 --fork 2 --timeout 10m --metrics-brief --timeout-keep-alive  --times
      register: stress_test_result

    - name: Print stress test result
      debug:
        var: stress_test_result.stdout
