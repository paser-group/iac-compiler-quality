
- name: Test Jinja2 Scoped Blocks with Roles and Default Variables
  hosts: all
  gather_facts: false

  vars:
    data: "{{ [1, 2, 3] }}"

  tasks:
  - name: Test Jinja2 Scoped Blocks
    block:
      - set_fact:
          data: "{{ [4, 5, 6] }}"
        when: "'2' in data"

      - debug:
          var: data

    rescue:
      - set_fact:
          data: "{{ [7, 8, 9] }}"

      - debug:
          var: data

    always:
      - debug:
          msg: "Jinja2 Scoped Blocks Test Completed with Roles and Default Variables"
