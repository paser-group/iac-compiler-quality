
- name: Testing aws_secret lookup plugin
  hosts: ubuntu1
  gather_facts: no

  tasks:
    - name: Load secrets from file
      set_fact:
        my_secrets: "{{ lookup('file', '/path/to/secrets.yml') }}"
    
    - name: Display secrets
      debug:
        var: my_secrets

    - name: Retrieve secret using aws_secret lookup
      debug:
        var: lookup('aws_secret', 'my_secret', 'us-west-2', region='us-west-2')
