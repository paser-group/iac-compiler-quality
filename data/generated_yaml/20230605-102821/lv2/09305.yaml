
- name: Test ssh and rsync connection
  hosts: all
  gather_facts: yes

  tasks:
    - name: Check ssh connection
      shell: ssh -V
      ignore_errors: yes
      when: inventory_hostname == 'ubuntu1'

    - name: Check rsync installation
      shell: rsync --version
      ignore_errors: yes
      when: inventory_hostname == 'centos1'

    - name: Check rsync installation
      command: rsync --version
      ignore_errors: yes
      when: inventory_hostname == 'alpine1'
