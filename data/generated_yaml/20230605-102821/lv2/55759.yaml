
---
- name: Testing azure_rm_virtualnetworkpeering
  hosts: all
  gather_facts: false
  tasks:
  - name: Create virtual network peering with invalid remote resource ID
    azure_rm_virtualnetworkpeering:
      resource_group: "test-resource-group"
      virtual_network: "test-virtual-network"
      name: "test-peering"
      remote_virtual_network_id: "invalid-remote-resource-id"
    register: result1
    ignore_errors: true

  - name: Create virtual network peering with invalid virtual network name
    azure_rm_virtualnetworkpeering:
      resource_group: "test-resource-group"
      virtual_network: "test-virtual-network"
      name: "test-peering"
      remote_virtual_network_id: "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/test-resource-group/providers/Microsoft.Network/virtualNetworks/invalid-virtual-network"
    register: result2
    ignore_errors: true

  - name: Create virtual network peering with invalid resource group name
    azure_rm_virtualnetworkpeering:
      resource_group: "invalid-resource-group"
      virtual_network: "test-virtual-network"
      name: "test-peering"
      remote_virtual_network_id: "/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/test-resource-group/providers/Microsoft.Network/virtualNetworks/test-virtual-network"
    register: result3
    ignore_errors: true

  - name: Debug output
    debug:
      msg: "{{ item }}"
    loop:
    - "{{ result1 }}"
    - "{{ result2 }}"
    - "{{ result3 }}"
