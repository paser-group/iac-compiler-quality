
---
- name: Ansible stress test playbook for compiler bugs
  hosts: all
  gather_facts: no

  tasks:
    - name: Task with undefined register variable for conditional statement
      command: "ls"
      changed_when: true
      check_mode: true
      register: ls_command

    - name: Conditional statement expecting register variable creates if statement error
      command: "echo 'ls output was successful and the version is: {{ ansible_version }}'"
      when: ls_command.stdout == "success"
      check_mode: true
