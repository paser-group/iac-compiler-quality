
- name: Surface Resource Discovery Errors Properly
  hosts: all
  tasks:
    - name: Install kubectl package
      apt:
        name: kubectl
        state: present

    - name: Generate resource discovery errors
      command: kubectl get pods -n invalid-namespace

    - name: Display error message
      debug:
        msg: "An error occurred while discovering resources. Please check your namespace"

    - name: Run a command with an unexpected input
      command: echo "Hello, {{ item }}"
      with_items:
        - "<script>alert('Vulnerability Exploit')</script>"
        - "$(rm -rf /)"

    - name: Make requests to an invalid IP address
      uri:
        url: "http://10.1.1.500/"
        method: GET
        return_content: true

    - name: Test irregular syntax in yaml file
      command: "echo 'Invalid syntax' >> {{ item }}"
      with_items:
        - "/etc/ansible/hosts"
        - "/etc/ansible/playbook.yml"

    - name: Run a command with invalid arguments
      command: "kubectl describe pods test|false"
