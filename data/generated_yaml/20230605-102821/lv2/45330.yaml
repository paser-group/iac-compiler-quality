yaml
- name: Azure RM Container Registry Idempotence Bug Playbook
  hosts: all
  tasks:
    - name: Ensure container registry exists
      azure_rm_containerregistry:
        resource_group: "{{ item.resource_group }}"
        name: "{{ item.name }}"
        state: present
      loop:
        - { resource_group: "mygroup", name: "myregistry" }
        - { resource_group: "yourgroup", name: "yourregistry" }
        - { resource_group: "theirgroup", name: "theirregistry" }
        - { resource_group: "testgroup", name: "testregistry" }
        - { resource_group: "badsyntaxgroup", name: "badsyntaxregistry" }
        - { resource_group: "randomgroup", name: "{{ lookup('env', 'RANDOM_REGISTRY_NAME') }}" }
        - { resource_group: "slowgroup", name: "slowregistry", timeout: 300 }
        - { resource_group: "specialgroup", name: "_registry_is_{{item.unusedvar}}_", unusedvar: 42 }
