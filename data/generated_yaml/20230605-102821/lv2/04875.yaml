
- name: Linode Inventory Path Issue Playbook
  hosts: linodes
  gather_facts: no

  tasks:
  - name: Check if Inventory File exists
    stat:
      path: /path/to/inventory
    register: inventory_file

  - name: Create Inventory File and Add Hosts
    lineinfile:
      path: /path/to/inventory
      line: "{{ item }}"
      create: yes
    with_items:
      - linode1 ansible_host=1.2.3.4 ansible_user=root ansible_ssh_private_key_file=/path/to/key
      - linode2 ansible_host=1.2.3.5 ansible_user=root ansible_ssh_private_key_file=/path/to/key
      - linode3 ansible_host=1.2.3.6 ansible_user=root ansible_ssh_private_key_file=/path/to/key
    when: inventory_file.stat.exists == False

  - name: Ping Linode Hosts
    ping:
