
- name: Test win_dns_record
  hosts: all
  gather_facts: false
  become: true

  tasks:
  - name: Testing win_dns_record PTR record
    win_dns_record:
      state: present
      record_type: "PTR"
      name: "{{ item.ip_address | regex_replace('\\.','-') }}.in-addr.arpa"
      data: "{{ item.hostname }}"
    with_items:
    - { ip_address: "192.168.0.1", hostname: "ubuntu1" }
    - { ip_address: "192.168.0.2", hostname: "alpine1" }
    - { ip_address: "192.168.0.3", hostname: "centos1" }
    - { ip_address: "192.168.0.4", hostname: "redhat1" }

  - name: Testing win_dns_record A record
    win_dns_record:
      state: present
      record_type: "A"
      name: "{{ item.hostname }}.example.com"
      data: "{{ item.ip_address }}"
    with_items:
    - { ip_address: "192.168.0.1", hostname: "ubuntu1" }
    - { ip_address: "192.168.0.2", hostname: "alpine1" }
    - { ip_address: "192.168.0.3", hostname: "centos1" }
    - { ip_address: "192.168.0.4", hostname: "redhat1" }
