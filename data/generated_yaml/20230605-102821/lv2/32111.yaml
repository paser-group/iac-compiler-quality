
- hosts: all
  become: true

  tasks:
  - name: configure non-default vrfs
    eos_eapi_config:
      lines:
        - "vrf instance vrf1"
      provider:
        host: "{{ inventory_hostname }}"
        transport: eosapi
        username: admin
        password: "{{ lookup('file', '/path/to/password_file') }}"

        # This parameter is expected to enable non-default VRFs
        enable_rbe_vrfs: True
