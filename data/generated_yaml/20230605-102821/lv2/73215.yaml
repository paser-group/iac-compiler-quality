
---
- name: Stress test the ansible_facts.service module
  hosts: all
  gather_facts: no
  
  tasks:
  
  - name: Start the service
    service:
      name: network
      state: started
      
  - name: Stop the service
    service: 
      name: "{{ item }}"
      state: stopped
    with_items:
      - ssh
      - apache2
      - mysql

  - name: Get the status of a service
    service:
      name: "does_not_exist"
      state: "{{ ansible_facts.service_does_not_exist.state }}"
      
  - name: Delete a service that does not exist
    service:
      name: "delete_me"
      state: absent
      enabled: "{{ ansible_facts.service_delete_me.enabled }}"
      
  - name: Enable a non-existent service
    service:
      name: "{{ ansible_facts.service_enable_me.name }}"
      enabled: yes
      
  - name: Disable a non-existent service
    service:
      name: "{{ ansible_facts.service_disable_me }}"
      enabled: no
