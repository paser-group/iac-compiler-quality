
- hosts: all
  become: true
  vars_files:
    - variable1.yml
    - variable2.yml
  tasks:
    - name: Multiple Inventory files result in incorrect resolution of variables
      debug:
        var: "{{ item }}"
      with_items:
        - "{{ var1 }}"
        - "{{ var2 }}"
      failed_when: "{{ var1 is undefined or var2 is undefined }}"
