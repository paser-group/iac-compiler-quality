
- name: Stress test vmware_host_facts module
  hosts: all
  gather_facts: false

  tasks:
    - name: Attempt to retrieve facts from VMware hosts
      vmware_host_facts:
        hostname: "{{ item }}"
        username: "{{ lookup('env', 'VMWARE_USERNAME') }}"
        password: "{{ lookup('file', '/path/to/credentials/file') }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1
        
    - name: Retrieve facts from non-existent host
      vmware_host_facts:
        hostname: nonexistenhost
        username: "{{ lookup('env', 'VMWARE_USERNAME') }}"
        password: "{{ lookup('file', '/path/to/credentials/file') }}"

    - name: Retrieve facts using invalid credentials
      vmware_host_facts:
        hostname: "{{ item }}"
        username: "{{ lookup('env', 'VMWARE_USERNAME') }}"
        password: "{{ lookup('env','VMWARE_PASSWORD') }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1
