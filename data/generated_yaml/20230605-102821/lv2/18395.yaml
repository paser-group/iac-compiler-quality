
- name: Ansible Compiler Bug Testing Playbook
  hosts: all
  gather_facts: no
  vars:
    - invalid_input: "{{ 'this is an invalid input!' | invalid_filter }}"
    - invalid_list: "{{ [1, 2, 3] | invalid_filter }}"
    - invalid_dict: "{{ {'key': 'value'} | invalid_filter }}"
    - invalid_var: "{{ invalid_var }}"
  tasks:
    - name: Import invalid yaml using include_vars without specifying filename
      include_vars:
      register: import_output
      vars:
        - invalid_yaml: |-
            - name: Invalid YAML Test
              hosts: "{{ invalid_input }}"
              tasks:
                - debug:
                    msg: "{{ invalid_list }} {{ invalid_dict }} {{ invalid_var }}"
    - name: Display output of importing invalid yaml
      debug:
        var: import_output
