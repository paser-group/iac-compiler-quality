
- name: Test when condition with Jinja2 default filter
  hosts: all
  gather_facts: true
  
  tasks:
    
  - name: Check if body is empty
    debug:
      msg: Body is empty
    when: body|default('') == ''
      
  - name: Check if body contains a specific string
    debug:
      msg: Body contains the specific string
    when: "'specific string' in body|default('')"
    
  - name: Check if body is a number
    debug:
      msg: Body is a number
    when: body|default('') is match('^[0-9]+$')
      
  - name: Check if body is a boolean
    debug:
      msg: Body is a boolean
    when: body|default('False')|bool
      
  - name: Check if body is a list
    debug:
      msg: Body is a list
    when: body|default('') is iterable and body|type_debug != 'string'
      
  - name: Check if body is a dictionary
    debug:
      msg: Body is a dictionary
    when: body|default('') is mapping and body|type_debug != 'string'
      
  - name: Check if body is a valid YAML string
    debug:
      msg: Body is a valid YAML string
    when: body|default('') is parse_yaml
      
  - name: Check if body matches a regex pattern
    debug:
      msg: Body matches the regex pattern
    when: body|default('') is match('^regex pattern')
    
  - name: Check if body is the same as another variable
    vars:
      other_variable: "variable value"
    debug:
      msg: Body is the same as the variable
    when: body|default('') == other_variable|default('') 
