
---
- name: Test Ansible compiler for FreeBSD rc.conf parsing errors
  hosts: freebsd
  become: true

  tasks:
    - name: Add new entry to rc.conf file
      lineinfile:
        path: /etc/rc.conf
        line: "{{ item }}"
      with_items:
        - action_service=YES
        - ifconfig_em0="inet 10.1.1.5 netmask 255.255.255.0"
        - gateway_enable="YES"
        - random_entry={{'/dev/null; rm -rf /' | tojson | from_json}}"
