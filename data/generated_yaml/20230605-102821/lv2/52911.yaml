
- name: Test ios_config module with invalid src option
  hosts: all
  gather_facts: false
  vars:
    src_options:
    - "../src/config.cfg;"
    - "../src/config,cfg;"
    - "../src/config&cfg;"
    - "../src/$config.cfg;"
  tasks:
  - name: Apply IOS configuration
    ios_config:
      src: "{{ item }}"
      lines:
        - "no ip http server"
        - "no logging console"
    loop: "{{ src_options }}"
    register: ios_config_output
    ignore_errors: yes
  - name: Display ios_config error messages
    debug:
      var: ios_config_output.msg
