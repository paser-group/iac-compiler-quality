
- name: Stress test playbook for 'Unhandled error in Python...' issue with shell module and delegate_to
  hosts: all
  become: true
  
  tasks:
    - name: Execute shell command as root user
      shell:
        cmd: "{{ body }}"
      delegate_to: "{{ item }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1

    - name: Execute shell command with incorrect syntax
      shell:
        cmd: "{{ body }} && `exit 0`"
      delegate_to: "{{ item }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1

    - name: Execute shell command with excessive output
      shell:
        cmd: "seq 1 10000000 | awk '{print \"a\"}' | head -c 100000000"
      delegate_to: "{{ item }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1
