
- name: Add new prefix to NetBox
  community.general.netbox_prefix:
    url: "http://{{ inventory_hostname }}:32768"
    token: "{{ vault_netbox_token }}"
    state: present
    prefix: "{{ item }}"
  with_items:
  - "192.168.0.0/16"
  - "10.0.0.0/8"
  - "172.16.0.0/12"
  register: added_prefixes

- name: Fail if no prefixes were added
  fail:
    msg: "No prefixes were added to NetBox!"
  when: added_prefixes.changed == false
