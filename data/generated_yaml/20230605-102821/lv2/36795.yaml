
- name: Gather facts from NX-OS switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Retrieve NX-OS facts
      nxos_facts:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ nxos_username }}"
          password: "{{ nxos_password }}"
      register: facts

    - name: Display interface list
      debug:
        var: facts['ansible_facts']['nxos_interfaces']
