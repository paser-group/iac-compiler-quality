
---
- name: Stress Test Ansible Compiler for Docker Volume Labels
  hosts: all
  gather_facts: no
  become: true

  tasks:
    - name: Install Docker
      package:
        name: docker.io
        state: present

    - name: Create a Docker Container with Volume Labels as Dict
      docker_container:
        name: dict-label-container
        image: ubuntu:latest
        command: sleep infinity
        labels:
          'environment': 'dev'
          'zone': 'us-east'
        volumes:
          - /var/tmp:/mnt/tmp

    - name: Create a Docker Container with Volume Labels as List
      docker_container:
        name: list-label-container
        image: ubuntu:latest
        command: sleep infinity
        labels:
          - 'environment=dev'
          - 'zone=us-east'
        volumes:
          - /var/tmp:/mnt/tmp

    - name: Create a Docker Container with Volume Labels of Invalid Type
      docker_container:
        name: invalid-label-container
        image: ubuntu:latest
        command: sleep infinity
        labels: 'environment=dev'
        volumes:
          - /var/tmp:/mnt/tmp
