
---
- name: Test playbook for Openstack dynamic inventory
  hosts: ubuntu1
  gather_facts: no
  become: yes
  
  tasks:
    
    - name: Include Openstack inventory plugin
      include_vars:
        file: openstack.yml
        
    - name: ServerList Task
      debug:
        msg: "{{ item }}"
      with_inventory_hostnames:
        - all
        - '["_meta", "hostvars"]'
        - '["_meta", "hostvars", "localhost"]'
        - '["_meta", "hostvars", "localhost", "vars"]'
        - '["_meta", "hostvars", "localhost", "vars", "ansible_env"]'
        - '["_meta", "hostvars", "localhost", "vars", "ansible_env"]["HOME"]'
        - '["_meta", "hostvars", "localhost", "vars", "ansible_env"]["HOMEPATH"]'
        - '["_meta", "hostvars", "localhost", "vars", "ansible_env"]["USERDNSDOMAIN"]'
        - '["_meta", "hostvars", "localhost", "vars", "ansible_env"]["PUBLIC"]'
