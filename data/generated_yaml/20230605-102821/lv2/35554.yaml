
- name: Assign multiple interfaces to a VLAN to trigger an index error
  hosts: all
  become: true

  vars:
    vlan_id: 100
    num_of_interfaces: 7
    interface_list: []
  
  tasks:
    - name: Generate list of interfaces to assign
      set_fact:
        interface_list: "{{ interface_list + ['eth' + item | string] }}"
      loop: "{{ range(1,num_of_interfaces)|list }}"
    
    - name: Assign interfaces to VLAN
      vlan:
        vlan_id: "{{ vlan_id }}"
        vlan_interfaces: "{{ interface_list }}"
