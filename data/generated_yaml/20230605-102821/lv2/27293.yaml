
- name: Make GET request to URL
  hosts: all
  gather_facts: false
  vars:
    url: "https://www.example.com"
    validate_certs: no
  tasks:
    - name: Fetch URL and validate response
      uri:
        url: "{{ url }}"
        validate_certs: "{{ validate_certs }}"
        return_content: no
      register: url_response
      failed_when: url_response.status != 200

- name: Stress test the Ansible compiler
  hosts: all
  gather_facts: false
  vars:
    urls:
      - "https://example.com"
      - "https://www.example.com"
      - "https://example.net"
  tasks:
    - name: Fetch URL and validate response
      uri:
        url: "{{ item }}"
        validate_certs: "{{ validate_certs }}"
        return_content: no
      register: url_response
      failed_when: url_response.status != 200
      loop: "{{ urls }}"
