
- name: Test Ansible Compiler for 'null' when statements
  hosts: all
  gather_facts: no
  tasks:
    - name: Test Null Variable in When Statement
      vars:
        null_var: null
      debug:
        msg: "Null variable evaluated as {{null_var}} in when statement"
      when: null_var is defined and null_var is not none

    - name: Test Non-existent Variable in When Statement
      debug:
        msg: "Non-existent variable evaluated as {{non_existent_var}} in when statement"
      when: non_existent_var is defined

    - name: Test Two Variables Comparison
      vars:
        string_var: "Test String"
        integer_var: 10
        null_var: null
      fail:
        msg: "Incorrect comparison of {{item.0}} and {{item.1}}"
      when: item.0 == item.1
      loop:
        - [null_var, 0]
        - [null_var, ""]
        - [integer_var, ""]
        - [integer_var, null_var]
        - [string_var, null_var]
        - [string_var, 0]
        - [string_var, ""]
