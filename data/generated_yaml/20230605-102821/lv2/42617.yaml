
- name: Test the zabbix_host module
  hosts: all
  become: yes

  tasks:
    - name: Set invalid minimum availability
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "invalid_min_availability"
      register: result
      ignore_errors: yes

    - name: Set invalid maximum availability
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "invalid_max_availability"
      register: result
      ignore_errors: yes

    - name: Set invalid status
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "2"
        available: "3"
      register: result
      ignore_errors: yes

    - name: Set invalid name
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: 123
        status: "0"
        available: "1"
      register: result
      ignore_errors: yes

    - name: Set invalid hostname
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "1"
        interface_type: "{{ inventory_hostname }}"
      register: result
      ignore_errors: yes

    - name: Set invalid interface type
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "1"
        interface_type: "invalid_interface_type"
      register: result
      ignore_errors: yes

    - name: Set invalid IP address
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "1"
        interfaces:
          - ip: "invalid_ip"
            type: "agent"
      register: result
      ignore_errors: yes

    - name: Set invalid port
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "1"
        interfaces:
          - ip: "{{ inventory_hostname }}"
            port: "invalid_port"
            type: "agent"
      register: result
      ignore_errors: yes

    - name: Set invalid interface type in interfaces
      zabbix_host:
        server_url: "{{ inventory_hostname }}"
        login_user: admin
        login_password: admin
        name: "test_host"
        status: "0"
        available: "1"
        interfaces:
          - ip: "{{ inventory_hostname }}"
            port: "10050"
            type: "invalid_interface_type"
      register: result
      ignore_errors: yes

    - debug:
        var: result
