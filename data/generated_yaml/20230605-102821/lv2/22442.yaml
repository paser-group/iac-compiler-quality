
- name: eos eapi connection test playbook
  hosts: all
  gather_facts: no
  become: yes

  tasks:
    - name: Install necessary libraries
      apt:
        name:
          - python3-pip
          - python3-requests
        state: present

    - name: Connect to EOS eAPI
      uri:
        url: "{{ eoapi_url }}"
        method: GET
        status_code: "200"
        headers:
          "Content-Type": "application/json"
          "Accept": "application/json"
          "Authorization": "Basic {{ eoapi_username|b64encode }}:{{ eoapi_password|b64encode }}"
