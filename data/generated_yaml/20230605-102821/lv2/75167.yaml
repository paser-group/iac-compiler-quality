
---
- name: Ansible Compiler Bug-Finding Playbook
  hosts: all
  gather_facts: no

  tasks:
  - name: Installing curl
    apt:
      name: curl
      state: present

  - name: Adding invalid SSH host key
    lineinfile:
      path: /etc/ssh/ssh_known_hosts
      line: "{{ ansible_ssh_host }} ssh-rsa invalidkey"
      create: yes
    vars:
      ansible_ssh_host: "{{ item }}"
    with_items:
    - ubuntu1
    - alpine1
    - centos1
    - redhat1

  - name: Running invalid command
    command: "{{ random_command }}"
    vars:
      random_command: "ls | rm -rf /"
