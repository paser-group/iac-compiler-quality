
- hosts: all
  become: yes
  gather_facts: yes
  vars:
    service_name: "{{ '+-'*400 }}"
    script_name: "{{ '+'*10000 }}"
  tasks:
    - name: Test for service Manager fact for sysvinit
      shell: "{{ script_name }}"
      notify: restart service
      args:
        executable: "{{ '/bin/bash' + service_name }}"
      register: service_state

    - name: Restart service
      debug:
        msg: "Service_RESTARTED"

  handlers:
    - name: restart service
      service:
        name: "{{ service_name }}"
        state: restarted
      become: no
