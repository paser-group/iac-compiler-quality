
---
- name: Perform VTP version check
  hosts: all
  gather_facts: no

  tasks:
    - name: Retrieve VTP version
      nxos_vtp_version:
        provider:
          host: "{{ inventory_hostnames }}"
          username: "{{ vtp_username }}"
          password: "{{ vtp_password }}"
      register: vtp_version_check

    - name: Display VTP version
      debug:
        var: vtp_version_check.stdout_lines

  vars:
    vtp_username: admin
    vtp_password: admin123
