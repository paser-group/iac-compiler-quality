
- name: Test with_url
  hosts: all
  gather_facts: no

  tasks:
    - name: Test with_url
      shell: "curl {{ item }}"
      loop:
        - "http://test.com/file1"
        - "http://test.com/file2?param=1"
        - "{{ hostvars[groups['all'][0]]['ansible_eth0']['ipv4']['address'] }}"
