
---
- name: Test Jinja2 Scoped Blocks with Roles and Default Variables
  hosts: all
  gather_facts: no
  tasks:
  - name: Display msg with overridden variable value
    debug:
      msg: "{% set my_var = 'new_value' %} {{my_var}} {%- block test %}{{ my_var }}{%- endblock %}"
    vars:
      my_var: "{{ my_var | default('default_value') }}"
