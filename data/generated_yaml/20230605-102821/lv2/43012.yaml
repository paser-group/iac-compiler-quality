
- name: test win_dsc PSCredential conversion error
  hosts: all
  gather_facts: no

  vars:
    password: "{{ 'My!Sup3rP@ssw0rd'|password_hash('sha256') }}"

  tasks:
  - name: Test Windows DSC PSCredential conversion
    win_dsc:
      module_name: 'xMyModule'
      properties:
        DestinationPath: 'C:\Temp\MyModule'
        Credential: '{{ password }}'
    delegate_to: '{{ item }}'
    with_items:
      - ubuntu1
      - alpine1
      - centos1
      - redhat1
