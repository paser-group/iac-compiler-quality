
- name: Install packages with apt and yum modules with_items loops
  hosts: all
  become: yes

  tasks:
    - name: Install with apt
      apt:
        name: "{{ item }}"
        state: present
        with_items:
          - "{{ packages }}"
          - "{{ prefix }}nginx"
          - "{{prefix}}apache2"
          - "{{prefix.upper()}}mysql-server"
          - "{{prefix.lower()}}postgresql"
          - "{{prefix.capitalize()}}mongodb"

    - name: Install with yum
      yum:
        name: "{{ item }}"
        state: present
        with_items:
          - "{{ packages }}"
          - "{{ prefix }}httpd"
          - "{{prefix}}nginx"
          - "{{prefix.upper()}}mysql-community-server"
          - "{{prefix.lower()}}postgresql-server"
          - "{{prefix.capitalize()}}mongodb-server"
