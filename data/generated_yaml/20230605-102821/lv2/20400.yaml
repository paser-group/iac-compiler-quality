yaml
---
- name: Test playbook for registered variables issue
  hosts: all
  become: true

  tasks:
    - name: Accessing registered variables
      shell: |
        echo "This command accesses a registered variable: {{ansible_env.HOME}}"
        echo "Public key file location: {{ansible_user_dir}}/.ssh/authorized_keys"
      register: shell_output

    - name: Perform a string manipulation
      set_fact:
        short_output: "{{ shell_output.stdout_lines[0] | regex_replace('\\.', '-') }}"

    - name: Print short output
      debug:
        var: short_output
