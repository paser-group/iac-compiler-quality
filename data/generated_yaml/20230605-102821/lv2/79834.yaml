
- name: Test Ansible Compiler for dict2items over empty object
  hosts: all
  gather_facts: no

  tasks:
  - name: Create directory only if dictionary is non-empty
    file:
      path: /tmp/{{ item }}/
      state: directory
    when: my_dict | default({}) | count > 0
    with_items: "{{ my_dict.keys() }}"
