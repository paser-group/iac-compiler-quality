
---
- hosts: all
  become: true
  tasks:
  - name: Test ec2_asg module with replace_all_instances and target groups
    ec2_asg:
      name: "test-asg"
      launch_template:
        id: "lt-0a1b2c3d4e5f"
      replace_all_instances: "{{ ['true', 'false'] | random }}"
      target_group_arns:
        - "arn:aws:elasticloadbalancing:us-east-2:123456789012:targetgroup/test1/123"
        - "arn:aws:elasticloadbalancing:us-east-2:123456789012:targetgroup/test2/456"
