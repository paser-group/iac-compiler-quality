
---
- name: Test GCP Compute Instance Network Config
  hosts: all
  gather_facts: no
  tasks:
    - name: Replace network config with default
      gcp_compute_instance:
        name: "{{ item }}"
        network_interface_configs:
        - name: "default"
      loop:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1
      register: instance_config

    - debug: 
        msg: "GCP compute instance {{ item.item }} is {{ item.status }}" 
      loop: "{{ instance_config.results }}"
