
- name: Test Playbook
  hosts: all
  become: true
  gather_facts: true

  vars:
    - packages:
        - tree
        - vim
        - curl

  tasks:

  - name: Test list of dictionaries 
    debug:
      msg: "{{ item.name }}, {{ item.age }}, {{ item.job }}, {{ item.marital_status }}, {{ item.likes }}"
    with_items:
      - { name: 'Alice', age: '28', job: 'Engineer', marital_status: 'Single', likes: 'yoga' }
      - { name: 'Bob', age: '32', job: 'Developer', marital_status: 'Married', likes: 'hiking' }
      - { name: 'Charlie', age: '25', job: 'Analyst', marital_status: 'Single'}

  - name: Test lineinfile
    lineinfile:
      path: /etc/hosts
      line: "{{ item }}"
      regexp: "{{ item }}"
    with_items:
      - ubuntu1 10.1.1.1
      - alpine1 10.1.1.2
      - centos1 10.1.1.3
      - redhat1 10.1.1.4
      - Example invalid input

  - name: Test with_items loop sequence generates unexpected invalid results
    ping:
    with_items:
      - 1
      - 'invalid_input'
      - 3
      - 4

  - name: Test duplicate name and state values in user module
    user:
      name: testuser
      state: present
      name: testuser
      state: absent
