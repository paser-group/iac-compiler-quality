
- name: Test unexpected exception in Ansible compiler
  hosts: all
  tasks:
    - name: Create temp directory on remote nodes
      ansible.builtin.file:
        path: /tmp/test_dir
        state: directory
    
    - name: Set fact with a None value
      ansible.builtin.set_fact:
        foo: null
      
    - name: Test NoneType object attribute in set_fact
      ansible.builtin.set_fact:
        test: "{{ foo.set_options }}"
      
    - name: Debug the test variable
      ansible.builtin.debug:
        var: test
