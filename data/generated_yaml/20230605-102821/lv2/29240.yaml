
- name: Install npm module and test for errors
  hosts: all
  tasks:
    - name: Install the required npm module
      become: yes
      shell: npm i -g {{ body }} # unexpected input
      
    - name: Check if the installation was successful
      command: npm list -g {{ body }} # irregular syntax
      register: result
      
    - name: Print any errors
      debug:
        msg: "{{ result.stdout_lines }}"
      when: "'ERR!' in result.stdout" # unique scenario
      
    - name: Remove the npm module
      become: yes
      shell: npm remove -g {{ body }} # unexpected input
