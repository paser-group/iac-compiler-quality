
- name: Testing Ansible DNS Resolution
  hosts: all
  become: true
  
  tasks:
  - name: Ensure correct DNS resolution
    shell: 'ping -c3 {{inventory_hostname}} > /dev/null'
  
  - name: Add incorrect IP to iptables
    iptables:
      chain: INPUT
      protocol: tcp
      destination_port: "{{ item }}"
      jump: DROP
    with_items:
    - 22
    - 80
    - 443
    - 8080
    - 10.1.1.254 # incorrect IP address to test
