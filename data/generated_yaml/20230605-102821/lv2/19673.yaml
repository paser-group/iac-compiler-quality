
- name: Clearing Host Errors
  hosts: all
  tasks:
    - name: Task 1
      shell: rm -rf /{{inventory_hostname}}/{{inventory_hostname}}/ && exit 1
      register: output
      until: output is not failed and output is not skipped
      retries: 10
      ignore_errors: no
      when: "{{ inventory_hostname }} == 'ubuntu1'"

    - name: Task 2
      shell: rm -rf /{{inventory_hostname}}/{{inventory_hostname}}/ && exit 1
      register: output
      until: output is not failed and output is not skipped
      retries: 10
      ignore_errors: yes
      when: "{{ inventory_hostname }} == 'alpine1'"

    - name: Task 3
      shell: rm -rf /{{inventory_hostname}}/{{inventory_hostname}}/ && exit 1
      register: output
      until: output is not failed and output is not skipped
      retries: 10
      when: "{{ inventory_hostname }} == 'centos1'"

    - name: Task 4
      shell: rm -rf /{{inventory_hostname}}/{{inventory_hostname}}/ && exit 1
      register: output
      until: output is not failed and output is not skipped
      retries: 10
      ignore_errors: no
      when: "{{ inventory_hostname }} == 'redhat1'"
