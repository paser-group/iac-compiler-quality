
---
- name: Test playbook for ios_vlans errors
  hosts: all
  gather_facts: false

  tasks:
    - name: Add VLANs
      ios_vlans:
        provider:
          host: 10.1.1.1
          username: '{{ foo.bar }}'
          password: '{{ "password" }}'
        vlans:
          - vlan_id: "{{ item|abs }}"
            name: "VLAN {{ item }}"
            state: "present"
        validate_certs: false
      with_items:
        - -1
        - 0
        - '-2'
        - "foo"
      register: vlan_result

    - name: Debug vlan_result
      debug:
        var: vlan_result
