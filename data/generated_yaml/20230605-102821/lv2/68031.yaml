
- name: Test for ANSIBLE_VYOS_TERMINAL_LENGTH bug
  hosts: all
  gather_facts: no
  tasks:
    - name: Set ANSIBLE_VYOS_TERMINAL_LENGTH to an invalid value
      set_fact:
        ansible_env:
          ANSIBLE_VYOS_TERMINAL_LENGTH: foo
    - name: Show interface command test on VyOS
      vyos_terminal:
        command: show interface
      register: result
    - name: Display VyOS terminal output
      debug:
        var: result.stdout_lines
