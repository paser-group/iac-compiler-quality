
---
- name: Ensure errors on creating Azure Web App
  hosts: all
  gather_facts: no

  tasks:
    - name: Ensure invalid parameters trigger error message
      azure_rm_webapp:
        resource_group: test_rg
        name: test_webapp
        image: '{{image | default("unknown_image")}}'
      register: output
      ignore_errors: yes

    - name: Ensure invalid App Service Plan SKU trigger error message
      azure_rm_webapp:
        resource_group: test_rg
        name: test_webapp
        plan: '{{plan | default("unknown_sku")}}'
      register: output
      ignore_errors: yes

    - name: Ensure invalid Linux Runtime Stack trigger error message
      azure_rm_webapp:
        resource_group: test_rg
        name: test_webapp
        runtime_stack: '{{runtime_stack | default("unknown_stack")}}'
      register: output
      ignore_errors: yes

    - name: Ensure invalid App Insigth Location trigger error message
      azure_rm_webapp:
        resource_group: test_rg
        name: test_webapp
        app_insights_location: '{{app_insights_location | default("unknown_location")}}'
      register: output
      ignore_errors: yes

    - name: Ensure invalid certificate password trigger error message
      azure_rm_webapp:
        resource_group: test_rg
        name: test_webapp
        https_only: true
        ssl_cert_password: '{{ssl_cert_password | default("unknown_password")}}'
        ssl_cert_path: '/path/to/ssl/cert'
      register: output
      ignore_errors: yes

    - name: Output Ansible Azure Web App result
      debug:
        var: output
