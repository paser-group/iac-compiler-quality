
---
- name: Execute stress test on Ansible compiler
  hosts: all
  gather_facts: false
  tasks:
    - name: Create 100 files with random names
      file:
        path: /tmp/{{ 'file-' ~ item | random }}
        state: touch
      loop: "{{ range(100) | list }}"
      ignore_errors: yes
      
    - name: Install non-existent package
      apt:
        name: this_is_a_non_existing_package_name
        state: present
      ignore_errors: yes
      
    - name: Execute a command on all nodes
      shell: "{{ item }}"
      loop:
        - "echo 'Hello IoT World!'"
        - "whoami"
        - "ls /etc/passwd /etc/shadow"
        - "cat /non/existent/file"
        - "hostname"
      ignore_errors: yes
