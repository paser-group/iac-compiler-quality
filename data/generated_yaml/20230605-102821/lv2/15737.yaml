
---
- name: Stress Test for Win_ACL Module
  hosts: windows
  gather_facts: no

  tasks:
  - name: Set user permissions
    win_acl:
      user: "JohnDoe"
      path: "C:\Program Files\MyApp\"
      rights:
        - file_read
        - file_write
        - file_execute
      state: present

  - name: Set group permissions
    win_acl:
      path: "C:\Program Files\MyApp\"
      rights:
        - file_read
        - file_write
        - file_execute
      state: present
      access_control:
        grant:
          - "JohnDoe:(OI)(CI)(R,W,D)"
          - "Administrators:(OI)(CI)(F)"

  - name: Remove user permissions
    win_acl:
      user: "JohnDoe"
      path: "C:\Program Files\MyApp\"
      rights:
        - file_read
        - file_write
        - file_execute
      state: absent
