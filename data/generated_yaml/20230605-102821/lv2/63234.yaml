
- name: Testing gcp_storage_bucket_access_control module for bugs
  hosts: all
  gather_facts: false
  
  tasks:
  - name: Set invalid bucket name input
    gcp_storage_bucket_access_control:
      bucket: "{{ ['test-', 'invalid-bucket-name-', '!!!-invalid-characters', 123456789] | random }}"
      entity: "{{ ['user-test@example.com', 'group-test@example.com', 'domain-test.com'] | random }}"
      role: "{{ ['roles/storage.objectViewer', 'roles/storage.objectCreator', 'roles/storage.objectAdmin', 'roles/storage.legacyBucketReader', 'roles/storage.legacyBucketWriter', 'roles/storage.legacyBucketOwner'] | random }}"
      state: present
    register: result
  - debug:
      var: result
