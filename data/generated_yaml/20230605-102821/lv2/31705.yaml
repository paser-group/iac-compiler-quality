
- name: Vault variable in lists error playbook
  hosts: all
  gather_facts: false
  vars:
    - vault_var: "{{ lookup('vault', 'secret/testing') }}"
    - list_var: [1, 2, 3]
  
  tasks:
    
    - name: Substitute vault variable in a list
      set_fact:
        combined_var: "{{ list_var + vault_var }}"
        invalid_syntax: "{{ list_var + vault_var }]"
      register: var_substitute
    
    - name: Print the combined variable
      debug:
        var: combined_var
      when: var_substitute.changed
      
    - name: Print the invalid syntax
      debug:
        var: invalid_syntax
      ignore_errors: true
      
