
- name: Test Docker Container Homedir Issue
  hosts: all
  become: true

  tasks:
  - name: Create Docker container with invalid homedir
    docker_container:
      name: testcontainer
      image: nginx
      state: started
      pulls: always
      volumes:
        - "/var/www/html:/usr/share/nginx/html/"
      command: >
        sh -c '
          if [[ -d "/~" ]]; then
            echo "Invalid homedir!";
          else
            nginx -g "daemon off;";
          fi'
