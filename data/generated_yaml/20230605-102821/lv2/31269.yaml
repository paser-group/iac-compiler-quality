
- hosts: all
  gather_facts: false
  tasks:
  - name: "Create EC2 Launch Configuration"
    ec2_lc:
      name: "{{ 'test_lc_' ~ ansible_date_time.epoch }}"
      image_id: ami-0c94855ba95c71c99
      instance_type: m5.large
      key_name: my_key
      security_groups: default
      placement_tenancy: "{{ None }}"
      spot_price: "{{ 0.02 }}"
    register: launch_config

  - name: "Check the number of created launch configurations"
    assert:
      that:
      - launch_config.created == 1
