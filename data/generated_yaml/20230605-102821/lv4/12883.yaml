
- name: Test ec2_vpc module with profile parameter
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create a VPC with an invalid profile name
      ec2_vpc_net:
        name: test_vpc
        cidr_block: 10.0.0.0/16
        region: us-west-2
        profile: invalid_profile_name
      register: vpc_result_profile

    - name: Create a new VPC without a profile
      ec2_vpc_net:
        name: test_vpc
        cidr_block: 10.0.1.0/24
        region: us-west-2
      register: vpc_result_no_profile

    - name: Debug ec2_vpc results
      debug:
        var: item
      with_items:
        - vpc_result_profile
        - vpc_result_no_profile
