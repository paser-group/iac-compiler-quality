
- hosts: localhost
  gather_facts: no
  tasks:
    - name: create plist file
      file:
        path: ~/Library/Preferences/com.test.plist
        state: touch
    - name: add array value to new key
      osx_defaults:
        domain: com.test
        key: testKey
        value: 
          - testValue1
          - testValue2
    - name: read plist file
      osx_defaults:
        domain: com.test
        key: testKey
        value: _
      register: result
    - name: debug output
      debug:
        var: result.stdout_lines
