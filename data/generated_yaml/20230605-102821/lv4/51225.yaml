
- name: Run Docker container without default bridge network
  hosts: ubuntu1
  gather_facts: no

  tasks:
  - name: Create Docker network with custom driver
    docker_network:
      name: node-net
      driver: overlay
      state: present
      ipam_options:
        subnet: "10.1.1.0/24"
        gateway: "10.1.1.254"

  - name: Create Docker container with custom network
    docker_container:
      name: alpine1
      image: alpine:latest
      state: started
      network_mode: bridge
      networks:
        - name: node-net
          ipv4_address: "10.1.1.2"
