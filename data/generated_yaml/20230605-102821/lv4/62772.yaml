
---
- name: Gather VMKernel details
  hosts: localhost
  vars:
    vcenter_ip: "{{ hostvars['localhost']['vcenter_ip'] }}"
    vcenter_username: "{{ hostvars['localhost']['vcenter_username'] }}"
    vcenter_password: "{{ hostvars['localhost']['vcenter_password'] }}"
  tasks:
    - name: Get VMKernel Facts
      vmware_vmkernel_facts:
        hostname: "{{ vcenter_ip }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: no
      register: vmkernel_details

    - name: Debug VMKernel Facts
      debug:
        var: vmkernel_details
