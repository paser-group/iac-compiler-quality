
- name: Test IOS Config Module
  hosts: all
  gather_facts: false
  tasks:
  - name: Test IOS Command
    ios_command:
      commands: show version
    register: result
  - debug:
      var: result
  - name: Configure SSH
    ios_config:
      lines:
        - "ip ssh version 2"
        - "ip ssh time-out 60"
        - "ip ssh authentication-retries 2"
  - name: Configure NTP
    ios_config:
      lines:
        - "ntp server 192.0.2.1"
        - "ntp server 192.0.2.2"
  - name: Configure DNS
    ios_config:
      lines:
        - "ip domain-name corp.example.com"
        - "ip name-server 192.0.2.3"
