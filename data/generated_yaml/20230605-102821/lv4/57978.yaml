
- name: Set Azure subscription
  hosts: localhost
  connection: local
  gather_facts: no
  tasks:
  - name: Azure login
    azure_rm_login:
      client_id: "<client_id>"
      secret: "<client_secret>"
      tenant: "<tenant_id>"
      subscription_id: "<subscription_id>"
  - name: Set default subscription
    azure_rm_subscription:
      subscription_id: "<subscription_id>"
      state: present
