
- name: Verify Precedence Issue for group_vars/all and array variables
  hosts: all
  tasks:
    - name: Print Array and Overridden Variables
      debug:
        msg: "fruits = {{ fruits }}"
      vars:
        fruits:
          - grape
          - lemon
      when: inventory_hostname == 'ubuntu1'

    - name: Print Array and Base Variables
      debug:
        msg: "fruits = {{ fruits }}"
      vars:
        fruits:
          - apple
          - banana
          - cherry
      when: inventory_hostname == 'alpine1' or inventory_hostname == 'centos1'  or inventory_hostname == 'redhat1'

    - name: Print group_vars/all Variables
      debug:
        var: testvar
      vars:
        testvar: "{{ lookup('file', group_names[0]|lower +'/testvar') }}"
      when: inventory_hostname == 'alpine1' or inventory_hostname == 'centos1'  or inventory_hostname == 'redhat1'
