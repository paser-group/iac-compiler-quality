
- name: Create a new credential
  tower_credentials:
    name: mynewcredential
    description: A new credential created by Ansible
    organization: myorg
    type: machine
    username: myusername
    password: mypassword
  register: result

- name: Check idempotency
  assert:
    that:
      - not result.changed
    success_msg: "Credential creation is idempotent"
    fail_msg: "Credential creation is not idempotent"
