
- hosts: all
  gather_facts: no
  become: yes

  tasks:
  - name: Clone git repo with --depth and --branch
    git:
      repo: "https://github.com/xyz/repo.git"
      dest: "/path/to/repo"
      depth: 1
      version: "{{ branch_name }}"
    register: git_output
  
  - name: Echo git output
    debug:
      msg: "{{ git_output.stdout }}"
    when: git_output is defined
