
---
- name: Test 404 handling
  hosts: all
  gather_facts: no
  
  vars:
    url: "https://example.com/nonexistent"

  tasks:
    - name: Make HTTP request
      uri:
        url: "{{ url }}"
        return_content: yes
      register: http_response

    - name: Fail if response status code is 404
      fail:
        msg: "Failed with status code {{ http_response.status }}"
      when: http_response.status == 404
