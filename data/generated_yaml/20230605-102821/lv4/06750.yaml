
- name: Git submodule test
  hosts: all
  gather_facts: false
  tasks:
    - name: Clone git repository and submodules
      git:
        repo: <git repository URL>
        dest: /home/user/gitrepo
        submodules: yes
      register: clone_output

    - name: Initialize and update submodules
      git:
        repo: /home/user/gitrepo
        dest: /home/user/gitrepo
        submodules: yes
        init: yes
        update: yes
      register: submodule_output

    - name: Debug git output
      debug:
        var: submodule_output
