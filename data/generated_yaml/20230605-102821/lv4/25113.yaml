
- name: Create an LXC container on Proxmox
  hosts: proxmox
  gather_facts: no

  tasks:
    - name: create lxc container
      proxmox:
        vmid: 999
        node: node1
        api_user: root@pam
        api_password: xxxxxxx
        api_host: "{{ proxmox_host }}"
        api_port: "{{ proxmox_port }}"
        hostname: test_container
        ostemplate: local:vztmpl/ubuntu-18.04-standard_18.04-1_amd64.tar.gz  
        password: "{{ lookup('password', '/path/to/password/file') }}"
        state: present
      register: lxc_container

    - name: debug output
      debug:
        var: lxc_container
