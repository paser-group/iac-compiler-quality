
- name: Test GCP Inventory Plugin
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Configure GCP Inventory Plugin
    gcp_compute:
      project: my-project
      auth_kind: serviceaccount
      credentials_file: /path/to/sa.json
      service_account_email: "{{ lookup('env', 'SERVICE_ACCOUNT_EMAIL') | default(omit) }}"
      scopes:
        - https://www.googleapis.com/auth/cloud-platform
    register: gcp_inventory

  - name: Print GCP Inventory Plugin Results
    debug:
      var: gcp_inventory
