yaml
---
- name: Gather Facts from NXOS Devices using nxapi or cli
  hosts: nxos
  gather_facts: no
  connection: network_cli
  vars:
    ansible_network_os: nxos
    transport: nxapi
  
  tasks:
  - name: Get NXOS Facts
    nxos_facts:
      gather_subset:
        - hardware
        - config
        - interface
        - vlan
      transport: "{{ transport }}"
    register: nxos_data

  - name: Show Facts
    debug:
      var: nxos_data
