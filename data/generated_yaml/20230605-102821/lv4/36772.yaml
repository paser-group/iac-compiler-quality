yaml
- hosts: all
  become: yes
  gather_facts: no
  any_errors_fatal: yes
  tasks:
  - name: Execute a command which will fail
    shell: /bin/false
    ignore_errors: true
    register: result

  - name: Handle errors
    debug:
      var: result | combine({'failed': result.rc | bool})
    when: result is failed
    force_handlers: yes

  handlers:
  - name: Error Handler
    debug: msg="Error handled."
