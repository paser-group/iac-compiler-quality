
- name: Create or update an SQL Database
  hosts: localhost
  gather_facts: no
  vars:
    resource_group: myResourceGroup
    server_name: myServer
    database_name: myDatabase
    sku_name: GP_S_Gen5_2
    tier: Standard
  tasks:
    - name: Create or update SQL Database
      azure_rm_sqldatabase:
        resource_group: "{{ resource_group }}"
        server_name: "{{ server_name }}"
        name: "{{ database_name }}"
        sku_name: "{{ sku_name }}"
        tier: "{{ tier }}"
        collation: "SQL_Latin1_General_CP1_CI_AS"
        max_size_bytes: "1073741824" # 1 GB
        edition: "Standard"
        sample_name: "AdventureWorksLT"
        sample_schema: "SalesLT"
        sample_recovery_mode: "SIMPLE"
        tags:
          tag1: "value1"
          tag2: "value2"
          tag3: "{{variable_with_syntax_error}}"
      register: db
      ignore_errors: yes
    - name: Print the result
      debug:
        var: db
