
- name: Check if MSSQL database exists
  hosts: all
  gather_facts: no
  vars:
    db_name: "mydatabase"
    db_user: "myuser"
    db_password: "{{ lookup('file', '/path/to/db_password_file') }}"
    db_collation: "SQL_Latin1_General_CP1_CS_AS"
  tasks:
    - name: Check if the MSSQL Database exists
      mssql_db:
        name: "{{ db_name }}"
        state: list
        login_host: "localhost"
        login_user: "{{ db_user }}"
        login_password: "{{ db_password }}"
        collation: "{{ db_collation }}"
      register: result
      
    - name: Debug if MSSQL database exists
      debug:
        msg: "{{ result }}"
