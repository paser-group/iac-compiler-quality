
- name: Validate the facts.d script JSON output
  hosts: all
  gather_facts: false
  tasks:
    - name: Get the facts.d script result
      shell: /path/to/facts_script.sh
      register: facts_result

    - name: Validate the JSON output
      debug:
        msg: "Error: Invalid JSON"
      failed_when: "'{{ facts_result.stdout | from_json }}' is undefined"
