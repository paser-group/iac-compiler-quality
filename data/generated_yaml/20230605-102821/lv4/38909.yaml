
- name: Create a Docker container with IPv6 port binding
  docker_container:
    name: my_container
    image: ubuntu
    state: started
    ipc_mode: host
    pid_mode: host
    cap_add:
      - NET_ADMIN
    ports:
      - "[\"{{ipv6_address}}\":{{container_port}}]:{{host_port}}"
    ipv6_address: "2001:db8:1::1"
    container_port: 80
    host_port: 8080

- name: Test ipv6 port binding
  shell: nc -z6 ::1 {{host_port}}
  ignore_errors: True
