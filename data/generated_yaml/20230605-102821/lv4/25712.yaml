
---
- hosts: all
  tasks:
    - name: Create temporary directory
      tempfile:
        state: directory
      register: tempdir

    - name: Copy host_vars file to temporary directory
      copy:
        src: "/etc/ansible/group_vars/all/host_vars/{{ inventory_hostname }}"
        dest: "{{ tempdir.path }}/host_vars"
      when: inventory_hostname is defined

    - name: Display contents of host_vars file
      debug:
        msg: "{{ lookup('file', tempdir.path + '/host_vars') }}"
