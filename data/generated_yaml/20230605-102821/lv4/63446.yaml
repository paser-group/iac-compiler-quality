
- name: Test YAML Tag Bug
  hosts: all
  tasks:
    - name: Write YAML with tag
      copy:
        content: !!binary "VGhpcyBpcyBhIHRlc3Qgc3RyaW5n"
        dest: /tmp/test.yml
    - name: Read YAML with tag
      slurp:
        src: /tmp/test.yml
      register: test_yml
    - name: Compare input and output
      assert:
        that:
          - test_yml['content'] | b64decode == "This is a test string"
        fail_msg: "Input and output do not match. The output is: {{ test_yml['content'] | b64decode }}"
