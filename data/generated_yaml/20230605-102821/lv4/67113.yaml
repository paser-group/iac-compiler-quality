
- name: Check for upgrades using Macports
  hosts: all
  become: yes
  gather_facts: false

  tasks:
  - name: Run MacPorts upgrade check
    shell: "port outdated"
    register: output

  - name: Display output if changes exist
    debug:
      var: output.stdout_lines
    when: "'Nothing to upgrade' not in output.stdout_lines"
