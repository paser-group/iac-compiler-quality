
---
- name: Test ipaddr filter in loop
  hosts: all
  gather_facts: no

  tasks:
  - name: Display node IP addresses
    debug:
      msg: "Node {{ inventory_hostname }} has IP address {{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
  - name: Display network IP addresses using ipaddr filters
    debug:
      msg: "Nodes in subnet {{ loop_subnet }}: {{ groups['node-net'] | ipaddr(loop_subnet) }}"
    vars:
      loop_subnet: "10.1.1.0/24"
