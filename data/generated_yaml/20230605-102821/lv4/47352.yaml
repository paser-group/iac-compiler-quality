
- name: Manage DNS record for Windows domain
  win_dns_record:
    name: "{{ dns_record_name }}"
    zone: "{{ dns_zone }}"
    type: "{{ dns_type }}"
    value: "{{ dns_value }}"
    ttl: "{{ dns_ttl }}"
  register: result

- name: Fail if DNS record was not changed
  fail:
    msg: "DNS record was not changed"
  when: result.changed == false
