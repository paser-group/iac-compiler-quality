
- hosts: localhost
  vars:
    resource_group: "testrg1"
    deployment_name: "testdeployment1"
    template_path: "templates/deployment.json"
  tasks:
    - name: Deploy a template in a resource group
      azure_rm_deployment:
        resource_group_name: "{{ resource_group }}"
        deployment_name: "{{ deployment_name }}"
        template: "{{ lookup('file', template_path) }}"
        parameters: {}
      register: result
    - name: Print deployment errors
      debug: var=result.deployment_output.errors
