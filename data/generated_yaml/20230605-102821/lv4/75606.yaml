
- name: Test known_hosts module
  hosts: all
  gather_facts: false
  tasks:
    - name: Create a fake ssh directory
      file:
        path: /tmp/fake_ssh
        state: directory
    - name: Copy known_hosts file to fake ssh dir
      copy:
        content: ""
        dest: /tmp/fake_ssh/known_hosts
    - name: Test the known_hosts module
      known_hosts:
        name: "{{ inventory_hostname }}"
        path: /tmp/fake_ssh/known_hosts
        state: present
