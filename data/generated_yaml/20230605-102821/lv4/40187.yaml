
- name: Test EAPI connection in eos_config
  eos_config:
    lines:
      - "interface loopback 1"
      - "ip address 1.1.1.1/32"
      - "ip address 2.2.2.2/32"
    parents:
      - "{{ interface }}"
    provider:
      host: "{{ inventory_hostname }}"
      username: "{{ ansible_user }}"
      password: "{{ lookup('file', '{{password_file_path}}') }}"
      transport: eapi
      use_ssl: no
    gather_facts: no
  ignore_errors: true
