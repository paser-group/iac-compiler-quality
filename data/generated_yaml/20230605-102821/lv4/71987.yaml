yaml
- name: Ensure custom repositories are removed
  apt_repository:
    repo: '{{ item }}'
    state: absent
  with_items:
    - 'deb http://demo.example.com/debian stretch main'
    - 'deb http://repo.example.com/ubuntu xenial main'

- name: Check if repositories are removed
  command: 'grep -q "demo.example.com\|repo.example.com" /etc/apt/sources.list.d/*'
  register: grep_output
  ignore_errors: true

- name: Print grep output
  debug:
    var: grep_output.stdout
