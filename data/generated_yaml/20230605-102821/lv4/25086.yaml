
- hosts: localhost
  gather_facts: no
  connection: local

  tasks:
  - name: Display Hostname in vmware_inventory.yml Dynamic Inventory script
    command: echo "hostname-{{ item }}"
    register: output
    with_sequence: start=0 end=3
    changed_when: false

- name: Display filtered inventory
  hosts: vmware
  vars:
    possible_hostnames:
      - ubuntu1
      - alpine1
      - centos1
      - redhat1
  tasks:
  - name: Debug hosts filtered based on OS
    debug:
      var: inventory_hostnames
    with_inventory_hostnames:
      - vmware
    when: inventory_hostname in possible_hostnames and "ubuntu" in inventory_hostname and "alpine" not in inventory_hostname
