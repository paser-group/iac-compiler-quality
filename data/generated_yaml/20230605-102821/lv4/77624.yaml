
- name: Install Ansible Galaxy Collection
  hosts: localhost
  become: yes
  gather_facts: no

  tasks:
  - name: Ensure the galaxy installation directory exists
    file:
      path: "/home/user/.ansible/collections/ansible_collections/"
      state: directory
      mode: "0755"

  - name: Galaxy Collection Installation
    shell: "ansible-galaxy collection install {{YOUR_COLLECTION}} -p /home/user/.ansible/collections/ansible_collections/"
    register: output
    ignore_errors: yes

  - debug:
      var: output

  - assert:
      that: "output is failed"
      fail_msg: "Error installing the Ansible Galaxy Collection"
