
- hosts: all
  gather_facts: no
  tasks:
    - name: Check role installation
      stat:
        path: /etc/ansible/roles/example_role
      register: roles_exist
      
    - name: Install roles from specified path
      when: not roles_exist.stat.exists
      ansible.builtin.command: ansible-galaxy install --roles-path /path/to/roles example_role
