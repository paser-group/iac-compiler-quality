
- name: Test ios_vlans module
  hosts: ios
  gather_facts: no

  vars:
    vlan_id: 100

  tasks:
  - name: Show VLAN {{ vlan_id }}
    ios_command:
      commands:
        - show vlan id {{ vlan_id }}
      wait_for:
        timeout: 2
        sleep: 1
        pattern: "{{ vlan_id }}"
    register: vlanoutput

  - debug:
      var: vlanoutput.stdout_lines
