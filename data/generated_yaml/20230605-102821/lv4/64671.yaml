
- name: Install bigip_dns_cache_resolver module
  pip:
    name: bigip_dns_cache_resolver
    state: present

- name: Test bigip_dns_cache_resolver module
  hosts: all
  tasks:
    - name: Resolve DNS
      bigip_dns_cache_resolver:
        state: present
        server: "{{ inventory_hostname }}"
        domain_name: "example.com"
        query: "www.example.com"
      register: dns_result

    - name: Print DNS result when module execution fails
      debug:
        msg: "{{ dns_result }}"
      when: dns_result | failed
