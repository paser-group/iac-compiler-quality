
- name: Check if S3 bucket exists
  s3_bucket_facts:
    bucket: my_bucket
    region: us-east-1
  register: bucket

- name: Create S3 bucket
  s3_bucket:
    name: my_bucket
    region: us-east-1
    state: present
  when: bucket.s3_buckets is not defined
