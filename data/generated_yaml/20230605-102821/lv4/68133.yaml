
- name: Create a GCE instance
  hosts: localhost
  connection: local

  vars:
    gcp_project: my-gcp-project
    gcp_zone: us-west1-b

  tasks:
    - name: Create an instance
      gcp_compute_instance:
        name: test-instance
        machine_type: n1-standard-1
        disks:
          - auto_delete: true
            boot: true
            initialize_params:
              source_image: projects/debian-cloud/global/images/family/debian-9
        network_interfaces:
          - network: invalid
            access_configs:
              - name: External NAT
                type: ONE_TO_ONE_NAT
      register: result

    - debug:
        var: result
