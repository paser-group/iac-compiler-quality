
- name: Collect security group facts from Azure
  hosts: localhost
  vars:
    azure_subscription_id: "<subscription_id>"
    azure_client_id: "<client_id>"
    azure_secret: "<secret>"
    azure_tenant: "<tenant>"
    azure_proxy: "<proxy_host:port>"
    azure_ca_path: "<path_to_ca_file>"
  tasks:
    - name: Retrieve security group facts
      azure_rm_securitygroup_facts:
        subscription_id: "{{ azure_subscription_id }}"
        client_id: "{{ azure_client_id }}"
        secret: "{{ azure_secret }}"
        tenant: "{{ azure_tenant }}"
        proxy_host: "{{ azure_proxy.split(':')[0] }}"
        proxy_port: "{{ azure_proxy.split(':')[1] }}"
        ca_path: "{{ azure_ca_path }}"
      register: sg_facts

    - name: Print security group facts
      debug:
        var: sg_facts
