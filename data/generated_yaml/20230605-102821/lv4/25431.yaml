
- name: Copy file
  hosts: all
  become: yes
  vars:
    file_src: "{{ '/etc/hosts' }}"
    file_dest: "{{ '/tmp/hosts' }}"
  tasks:
    - name: Copying file using copy module without backup
      copy:
        src: "{{ file_src }}"
        dest: "{{ file_dest }}"
      register: copy_result
 
    - name: Copying file using copy module with backup
      copy:
        src: "{{ file_src }}"
        dest: "{{ file_dest }}"
        backup: yes
      register: copy_result_with_backup

    - name: Echo copy result and copy result with backup
      ansible.builtin.debug:
        msg: "{{ item }}"
      loop: 
        - "{{ copy_result }}"
        - "{{ copy_result_with_backup }}"
