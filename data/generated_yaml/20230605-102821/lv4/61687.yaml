
- name: Configure S3 bucket
  hosts: localhost
  become: true

  vars:
    s3_bucket_name: "my-s3-bucket"
    encryption_type: "aws:kms"
    encryption_key_id: "my-kms-key"

  tasks:
  - name: Ensure S3 bucket exists
    s3_bucket:
      name: "{{ s3_bucket_name }}"

  - name: Configure S3 bucket encryption
    s3_bucket:
      name: "{{ s3_bucket_name }}"
      encryption: "{{ encryption_type }}"
      encryption_key_id: "{{ encryption_key_id }}"
