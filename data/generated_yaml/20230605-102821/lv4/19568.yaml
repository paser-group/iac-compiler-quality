yaml
- name: Upload file to Google Cloud Storage
  hosts: all
  gather_facts: false
  vars:
    bucket_name: "my-bucket"
    object_name: "test.txt"
    local_path: "/local/file/path"
    project_id: "my-project"
    google_creds_file: "/path/to/my/keyfile.json"
  tasks:
    - name: Install Google Cloud SDK
      apt:
        name: google-cloud-sdk
        update_cache: yes

    - name: Authenticate with Google Cloud SDK
      command: "gcloud auth activate-service-account --key-file={{ google_creds_file }}"

    - name: Upload file to Google Cloud Storage
      command: "gsutil cp {{ local_path }} gs://{{ bucket_name }}/{{ object_name }}"
