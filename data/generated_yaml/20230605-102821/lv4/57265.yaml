
- name: Create a Kubernetes cluster in GCP
  hosts: localhost
  gather_facts: no
  vars:
    zone: "us-west1-a"
    name: "test-cluster"
    network: "default"
    sub_network: "node-net"
    sub_network_ip_range: "10.1.1.0/24"
    machine_type: "e2-medium"
    disk_size_gb: 50
    num_nodes: 1
  tasks:
    - name: Creating a cluster
      google.cloud.gcp_container_cluster:
        name: "{{ name }}"
        zone: "{{ zone }}"
        network: "{{ network }}"
        subnetwork: "{{ sub_network }}"
        subnetwork_project: "ansible-gcp-test"
        subnetwork_ip_range: "{{ sub_network_ip_range }}"
        machine_type: "{{ machine_type }}"
        disk_size_gb: "{{ disk_size_gb }}"
        num_nodes: "{{ num_nodes }}"
