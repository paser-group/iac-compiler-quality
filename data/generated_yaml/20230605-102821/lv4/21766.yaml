yaml
- name: test apt-repository
  hosts: all
  gather_facts: no
  become: yes
  tasks:
    - name: add test repository
      apt_repository:
        repo: "deb {{ '\"' }}[test-repo]{{ '\"' }} {{ ansible_distribution_release }} main"
        state: present
        update_cache: yes
      register: result
    - debug:
        var: result
      when: result.changed
