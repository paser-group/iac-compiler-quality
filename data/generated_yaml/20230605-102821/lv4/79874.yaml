
- name: Test is defined bug in Ansible
  hosts: all
  gather_facts: false
  vars:
    var1:
      key1:
        key2: "{{ incorrect_var }}"
  tasks:
    - name: Check if variable is defined
      debug:
        msg: "Variable is defined"
      when: var1['key1']['key2'] is defined
