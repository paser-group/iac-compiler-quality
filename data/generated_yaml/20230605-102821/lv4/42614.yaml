yaml
- name: Create virtual machine with IPv6 address
  hosts: localhost
  gather_facts: no
  tasks:
  - name: "Create a virtual machine with IPv6 address"
    vmware_guest:
      hostname: "{{ lookup('env','VMWARE_HOST') }}"
      username: "{{ lookup('env','VMWARE_USER') }}"
      password: "{{ lookup('env','VMWARE_PASS') }}"
      validate_certs: no
      name: "{{ inventory_hostname }}"
      folder: /{{ vmware_folder }}
      os_type: "{{ vmware_os }}"
      cdrom: "{{ vmware_cdrom }}"
      state: "{{ vmware_state }}"
      hardware:
        memory_mb: "{{ vmware_mem }}"
        num_cpus: "{{ vmware_cpu }}"
      networks:
        - name: "{{ vmware_network }}"
          ip: "{{ vmware_ipv6 }}"
          netmask: "{{ vmware_netmask }}"
          adapter_type: vmxnet3
    delegate_to: localhost
