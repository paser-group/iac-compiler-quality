
- name: Test SSL Validation for Slack Channel Webhook
  hosts: all
  vars:
    slack_url: https://slack_webhook_url.com
  tasks:
    - name: Send HTTPS Request to Slack Channel
      uri:
        url: "{{ slack_url }}"
        method: POST
        validate_certs: true
        body_format: json
        body:
          text: "Test Message"
          channel: "#test_channel"
          username: "Ansible Bot"
      register: webhook_response

    - name: Check Response Code
      assert:
        that:
          - webhook_response.status == 200
        success_msg: "Webhook Request Successful"
        fail_msg: "Webhook Request Failed"

    - name: Print Webhook Response
      debug:
        var: webhook_response.content
        verbosity: 1
