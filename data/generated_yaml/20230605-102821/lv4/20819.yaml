
- name: Raise exception on vmware_host
  hosts: vmware
  gather_facts: no
  vars:
    error_message: "Error on vmware_host : 'vim.fault.DuplicateName' object has no attribute 'thumbprint'"
  tasks:
  - block:
      - set_fact:
          exception: "{{ error_message }}"
      - fail:
          msg: "{{ error_message }}"
    rescue:
      - debug:
          msg: "VMware exception raised, skipping host {{ inventory_hostname }}"
