
- name: Test ansible galaxy module
  hosts: all
  gather_facts: no
  vars:
    collection_dir: "~/collections"
  tasks:
    - name: Install collection from Ansible Galaxy 
      ansible.builtin.command: "ansible-galaxy collection install <collection_name>"
      changed_when: False
      register: result

    - debug:
        var: result

    - name: List installed collections 
      ansible.builtin.command: "ansible-galaxy collection list"
      register: list_of_collections

    - debug:
        var: list_of_collections.stdout_lines
