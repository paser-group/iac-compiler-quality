
- name: Execute shell command with unexpected return code
  hosts: all
  gather_facts: false
  tasks:
    - name: Execute shell command with negative exit code
      shell: "some_command_that_gives_negative_exit_code"
      ignore_errors: true
      register: shell_output
    - name: Debug shell output
      debug:
        msg: "{{ shell_output.stdout }}"
      when: shell_output is defined and shell_output.stdout is defined
