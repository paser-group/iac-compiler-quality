
---
- name: delegate_to issue
  hosts: localhost

  vars:
    target_host: alpine1
    delegate_host: centos1

  tasks:
    - name: Run a command on a remote host
      shell: |
        echo "{{ body }}" > /tmp/output.txt
      delegate_to: "{{ delegate_host }}"
      delegate_facts: true
      when: inventory_hostname == "{{ target_host }}"
    - name: Print output
      debug:
        var: cat /tmp/output.txt
      when: inventory_hostname == "{{ target_host }}"
