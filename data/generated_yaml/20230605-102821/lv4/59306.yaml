
---

- name: Asynchronous Task Test
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Execute multiple asynchronous tasks against local hosts
      async:
        poll: "{{ item.delay }}"
        cmd: "{{ item.command }}"
      with_items:
        - { command: "sleep 2 && echo task1", delay: 1 }
        - { command: "sleep 1 && echo task2", delay: 2 }
