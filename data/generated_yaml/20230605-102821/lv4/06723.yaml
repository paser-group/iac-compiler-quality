
- name: Unarchive module tickling md5sum bug
  hosts: ubuntu1
  become: yes
 
  vars:
    archive_file_path: "/home/user/archive.tar.gz"
    destination_dir: "/home/user/destination"
    
  tasks:
    - name: Transfer archive file to remote server
      copy:
        src: "{{ archive_file_path }}"
        dest: "{{ destination_dir }}"
      register: copy_result
    
    - name: Unarchive the archive file
      unarchive:
        src: "{{ destination_dir }}/{{ archive_file_path | basename }}"
        dest: "{{ destination_dir }}/unarchive-test"
        remote_src: yes
        copy: no
      register: unarchive_result
     
    - name: Print the result of the unarchive task
      debug:
        msg: "{{ unarchive_result }}"
