
- hosts: all
  gather_facts: false
  tasks:
  - name: Create a vault file
    ansible.builtin.copy:
      content: |
        secret_password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              35386330653539336231636237616362643566666461636365326630313637643630306461623230
      dest: /tmp/vault.yml
  - name: Read the vault file
    ansible.builtin.shell: cat /tmp/vault.yml
    register: vault_contents
  - name: Debug the vault contents
    ansible.builtin.debug:
      var: vault_contents.stdout_lines
