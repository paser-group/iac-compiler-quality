
---
- name: Configure interface VLAN SVI for Cisco Nexus
  hosts: nxos
  gather_facts: no

  vars:
    my_vlan: 100
    my_ip: "192.168.1.1/24"

  tasks:
    - name: Configure VLAN interface SVI
      nxos_interface:
        name: "Vlan{{ my_vlan }}"
        svi: True
        ipv4:
          address: "{{ my_ip }}"
      register: config
      become: yes

    - name: Check interface configuration idempotency
      debug:
        var: config.changed
