
- name: Ensure wait_for_instances set to True in AWS ASG module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Install boto3 library
      pip:
        name: boto3

    - name: Check if wait_for_instances enabled for all Auto Scaling Groups
      boto3:
        region: "{{ region }}"
        service: autoscaling
        operation: describe_auto_scaling_groups
      register: autoscaling_groups

    - name: Debug output for wait_for_instances property
      debug:
        msg: "{{ item.wait_for_instances }}"
      loop: "{{ autoscaling_groups.auto_scaling_groups }}"
