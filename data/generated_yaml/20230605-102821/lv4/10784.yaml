
---
- name: Testing Ansible Lookup Module Failure
  hosts: all
  tasks:
    - name: create directory to house passwords
      file:
        path: "/etc/ansible/passwords"
        state: directory
      register: directory_check

    - name: echo if directory already exists
      debug:
        msg: "Directory already exists"
      when: directory_check is failed

    - name: lookup password
      debug:
        msg: "Password: {{ lookup('password', '/etc/ansible/passwords/password.txt')}}"
