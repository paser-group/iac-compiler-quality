
- hosts: all
  gather_facts: no
  vars:
    linux_distros:
      - ubuntu1
      - alpine1
      - centos1
      - redhat1
  tasks:
    - name: loop over distros
      block:
        - name: command with loop
          shell: "echo {{ item }}"
          loop: "{{ linux_distros }}"
          register: test_result
        - fail:
          when: true
      rescue:
        - name: Print rescue information
          debug:
            msg: "An error occurred in the looped command"
        - name: Print registered messages
          debug:
            var: test_result
