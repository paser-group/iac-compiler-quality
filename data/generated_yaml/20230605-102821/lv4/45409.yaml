
- name: Create VM with multiple SCSI controllers and resize disk
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create the VM
      vmware_guest:
        hostname: "{{ vcenter_server }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: no
        name: "test_vm"
        disk:
          - size_gb: 20
            type: "thin"
            controller_type: "ParaVirtual"
            unit_number: 0
          - size_gb: 10
            type: "thin"
            controller_type: "ParaVirtual"
            unit_number: 1
        hardware:
          memory_mb: 2048
          num_cpus: 2
