
- name: test host vars priority
  hosts: all
  gather_facts: no
  tasks:
    - debug:
        msg: "Host: {{ inventory_hostname }}, Var1: {{ var1 }}, Var2: {{ var2 }}"
      vars:
        var1: "{{ hostvars[inventory_hostname]['var1'] | default('undefined') }}"
        var2: "{{ hostvars['all']['var2'] | default('undefined') }}"
