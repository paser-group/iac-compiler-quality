
- name: Test SHELL access from web UI
  hosts: all
  gather_facts: false
  become: true
  vars:
    target_shell_path: "/bin/bash"
  tasks:
    - name: Install dependencies
      apt:
        name: ["python3", "python3-pip"]
        state: present
      when: ansible_distribution == "Ubuntu"
    - name: Test SHELL access from web UI
      shell: "{{ target_shell_path }} -c 'echo SHELL access successful'"
      register: test_result
    - name: Handle error
      debug:
        var: test_result
      when: test_result.rc != 0
