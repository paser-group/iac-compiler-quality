
- hosts: all
  gather_facts: False
  tasks:
    - name: Gather facts
      setup:

  post_tasks:
    - name: Run a command and print its output
      shell: cat /proc/mounts > /tmp/mounts
      register: command_output
      ignore_errors: True

    - name: Conditional execution
      debug: var=command_output
      when: command_output is failed
