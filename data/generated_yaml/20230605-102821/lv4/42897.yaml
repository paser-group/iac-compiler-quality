
- name: Test Docker Module with TLS Config
  hosts: docker_nodes
  gather_facts: no
  vars:
    docker_tls_verify: yes
    docker_tls_ca_cert: "/path/to/ca.pem"
    docker_tls_cert: "/path/to/client-cert.pem"
    docker_tls_key: "/path/to/client-key.pem"

  tasks:
    - name: Check Docker Status
      docker_info:
        tls: true
      ignore_errors: yes
      register: out
    - name: Debug TLS Handshake Failure
      debug:
        var: out
      when: "'Handshake Failure' in out.msg"
