
- name: Gather facts from the remote device
  hosts: switch
  connection: network_cli
  gather_facts: no

  tasks:
  - name: Get the operating system facts
    ios_facts:
      gather_subset: all
    register: os_facts

  - name: Print the gathered facts
    debug:
      var: os_facts
