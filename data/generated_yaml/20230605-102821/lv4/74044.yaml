
- name: Test Error Handling
  hosts: all
  gather_facts: False

  tasks:
    - name: Test Inventory Script with Errors
      script: ./test_inventory.sh
      register: inventory_out
      ignore_errors: True
  
    - name: Pass Output to Debug
      debug:
        var: inventory_out
      failed_when: "'ERROR' in inventory_out.stderr_lines"
      ignore_errors: True
