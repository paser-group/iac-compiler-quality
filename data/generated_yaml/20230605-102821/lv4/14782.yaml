
- hosts: all
  gather_facts: false
  tasks:
    - name: Download file using get_url module
      get_url:
        url: "http://{{ ansible_default_ipv4.address }}/{{ file_name }}"
        dest: "{{ dest_path }}"
        status_code: 200
        validate_certs: False
      register: result

    - name: Print HTTP status code
      debug:
        var: result.status

    - name: Unmask HTTP response headers
      debug:
        var: result.headers
