
# Begin Ansible code snippet
- name: Include a Role with a Default Variable
  hosts: all
  become: yes
  roles:
    - role: example_role
  tasks:
    - name: Fail the Task and Echo the Default Variable
      debug:
        msg: "This task will fail due to an undefined variable: {{ some_default_var }}"
    - name: Ensure Default Variable is in Scope
      set_fact:
        some_default_var: "Default variable is now in scope"
      when: "'some_default_var' not in hostvars[inventory_hostname]"
    - name: Echo the Default Variable
      debug: var=some_default_var
# End Ansible code snippet
