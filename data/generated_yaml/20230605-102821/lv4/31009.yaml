
- name: ec2_lc module test
  hosts: localhost
  gather_facts: no
  vars:
    aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
    aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"
    region: "{{ lookup('env', 'AWS_EC2_REGION') }}"
    instance_profile_name: "testInstanceProfileName"
  tasks:
    - name: Create AutoScalingLaunchConfiguration
      ec2_lc:
        name: TestLaunchConfiguration
        image_id: ami-04b9e92b5572fa0d1
        key_name: test-key
        instance_type: t2.micro
        security_group_ids: sg-0187263a52991c4e8
        instance_profile_name: "{{ instance_profile_name }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        region: "{{ region }}"
      register: result
    - name: Debug information
      debug:
        var: result
