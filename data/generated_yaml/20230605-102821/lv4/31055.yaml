
- name: Test ec2_vpc_net module
  hosts: localhost
  gather_facts: false
  vars:
    aws_access_key: "<ACCESS_KEY>"
    aws_secret_key: "<SECRET_KEY>"
  tasks:
    - name: Test ec2_vpc_net with profile
      ec2_vpc_net:
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        profile: default
      register: result_with_profile
    - name: Test ec2_vpc_net without profile
      ec2_vpc_net:
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
      register: result_without_profile
    - name: Echo results
      debug:
        var: result_with_profile
      debug:
        var: result_without_profile
