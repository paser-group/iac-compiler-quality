
- name: Create GCP Kubernetes Cluster
  hosts: localhost
  gather_facts: no
  vars:
    project_id: <your_project_id>
    zone: <your_zone>
    cluster_name: <your_cluster_name>
  tasks:
    - name: Create Kubernetes Cluster
      gcp_container_cluster:
        name: "{{ cluster_name }}"
        location: "{{ zone }}"
        project: "{{ project_id }}"
        network: default
        initial_node_count: 1
        master_auth:
          client_certificate_config:
            issue_client_certificate: false
        node_config:
          machine_type: n1-standard-1
          oauth_scopes:
            - "https://www.googleapis.com/auth/compute"
            - "https://www.googleapis.com/auth/devstorage.read_only"
            - "https://www.googleapis.com/auth/logging.write"
            - "https://www.googleapis.com/auth/monitoring"
      delegate_to: localhost
      register: cluster_response
    - name: Echo Response
      debug:
        var: cluster_response
