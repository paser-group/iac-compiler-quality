
- name: Install role
  hosts: all
  become: true
  tasks:
    - name: Install Ansible role
      ansible-galaxy:
        name: <role_name>
        path: <path_to_roles>
        state: present
      register: install_role

    - name: Check file permissions
      stat:
        path: "{{ item }}"
      with_items:
        - <path_to_roles>/<role_name>/tasks
        - <path_to_roles>/<role_name>/templates
        - <path_to_roles>/<role_name>/files
        - <path_to_roles>/<role_name>/vars
        - <path_to_roles>/<role_name>/defaults
      register: permissions

    - name: Output file permissions
      debug:
        var: item.stat.mode
      with_items: "{{ permissions.results }}"

    - name: Check file ownership
      stat:
        path: "{{ item }}"
      with_items:
        - <path_to_roles>/<role_name>/tasks
        - <path_to_roles>/<role_name>/templates
        - <path_to_roles>/<role_name>/files
        - <path_to_roles>/<role_name>/vars
        - <path_to_roles>/<role_name>/defaults
      register: ownership

    - name: Output file ownership
      debug:
        var: item.stat.uid 
      with_items: "{{ ownership.results }}"
