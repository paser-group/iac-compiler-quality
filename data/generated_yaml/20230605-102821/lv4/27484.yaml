
- name: Test nxos_igmp_interface module idempotency
  hosts: all
  gather_facts: no

  tasks:
    - name: Configure igmp_interface with default values
      nxos_igmp_interface:
        name: ethernet1/1
      register: result

    - name: Debug module output
      debug:
        var: result

    - name: Configure igmp_interface with default values again
      nxos_igmp_interface:
        name: ethernet1/1
      register: result2

    - name: Debug module output
      debug:
        var: result2

    - name: Assert idempotency
      assert:
        that: "'changed' not in result2"
