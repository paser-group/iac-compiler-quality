
- name: Unarchive file
  hosts: all
  tasks:
    - name: Copy archive file to remote node
      copy:
        src: "{{ playbook_dir }}/file.tar.gz"
        dest: "/tmp/file.tar.gz"
      become: yes

    - name: Unarchive file
      unarchive:
        src: "/tmp/file.tar.gz"
        dest: /var/www/html/
        remote_src: yes
      become: yes
