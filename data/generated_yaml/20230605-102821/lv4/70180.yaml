
- name: Install Ansible Galaxy Collection
  hosts: localhost
  vars:
    branch: master
  tasks:
    - name: Clone Ansible Galaxy Collection
      git:
        repo: git@github.com:mymachine/ansible-galaxy.git
        dest: /opt/ansible-galaxy/
        version: "{{ branch }}"
      register: git_output
    - name: Debug git output
      debug:
        var: git_output.stdout_lines
    - name: Install Required Collection Dependencies
      ansible-galaxy:
        role-file: /opt/ansible-galaxy/collection.yml
        force: yes
