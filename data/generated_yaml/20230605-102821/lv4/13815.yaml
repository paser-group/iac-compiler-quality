
- name: Test custom module with pipelining
  hosts: all
  tasks:
    - name: Execute command1 and pipe output to command2 using custom module
      custom_module:
        command1: "ls -la"
        command2: "grep test"
      register: output
    - name: Print output of custom module
      debug:
        var: output.stdout
