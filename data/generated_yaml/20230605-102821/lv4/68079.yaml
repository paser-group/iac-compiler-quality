
---
- hosts: all
  become: true
  tasks:
  - name: Test Privilege Escalation
    become_method: sudo
    shell: cat /etc/shadow
    register: result
    ignore_errors: true
  - debug:
      msg: "{{ result }}"
  - name: show shell error messages
    debug:
      var: ansible_failed_results
  - name: show any relevant logs
    debug:
      msg: "See /var/log/secure or /var/log/messages"
  - name: show who you are
    command: whoami
    register: whoami
    ignore_errors: true
  - debug:
      msg: "You are {{ whoami.stdout }}"
