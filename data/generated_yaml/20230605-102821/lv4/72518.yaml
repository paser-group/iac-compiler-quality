
- name: Test custom fact
  hosts: all
  tasks:
    - name: Set custom fact path
      set_fact:
        custom_fact_path: /opt/custom_fact.py

    - name: Copy custom fact file
      copy:
        src: "{{ playbook_dir }}/custom_fact.py"
        dest: "{{ custom_fact_path }}"
        mode: '0755'
     
    - name: Display custom fact value
      debug:
        var: ansible_local.custom.custom_fact
