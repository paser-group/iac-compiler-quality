
--- 
- name: "eos_banner idempotency issue with Unicode"
  hosts: all
  gather_facts: true
  
  vars:
    banner_text: "%CE%A4%CE%B5%CE%BE%CE%BD%CE%B9%CE%BA%CF%8C%CF%82"

  tasks:
    - name: "Set banner"
      eos_banner:
        banner: "{{ banner_text | string }}"
        idempotent: true
      register: banner_output

    - name: "Check banner output"
      debug:
        var: banner_output

    - name: "Change banner"
      eos_banner:
        banner: "Hello World!"
        idempotent: true
      register: banner_output_changed

    - name: "Check banner output with changed"
      debug:
        var: banner_output_changed
