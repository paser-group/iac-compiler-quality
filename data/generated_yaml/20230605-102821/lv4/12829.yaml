
- name: Test for undefined variable in loops
  hosts: all
  gather_facts: no
  tasks:
  - name: Generate error when undefined variable is used in loop
    debug:
      msg: "Variable {{ item }} is not defined"
    ignore_errors: yes
    with_items:
    - "{{ undefined_var }}"
