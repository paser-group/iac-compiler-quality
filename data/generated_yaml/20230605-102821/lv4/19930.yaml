
- name: Send POST request using open_url module
  hosts: all
  tasks:
  - name: Send POST request with basic authentication and body
    vars:
      url: "https://example.com/api/endpoint"
      user: "user"
      passwd: "{{ lookup('file', '/path/to/password/file') }}"
      body: "{{ body }}"
    uri:
      url: "{{ url }}"
      method: POST
      user: "{{ user }}"
      password: "{{ passwd }}"
      validate_certs: False
      return_content: True
      body_format: json
      headers:
        Content-Type: "application/json"
      body: "{{ body }}"
