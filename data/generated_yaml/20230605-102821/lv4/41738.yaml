
- name: Set firewalld interface zone on CentOS/Rhel
  hosts: all
  become: true
  vars:
    zone: public
    interface: eth0
  tasks:
    - name: Check the current zone of the interface
      firewalld:
        get_zones_interface: "{{ interface }}"
      register: interface_zone

    - name: Set the zone for the interface
      firewalld:
        interface: "{{ interface }}"
        zone: "{{ zone }}"
        permanent: yes
        state: enabled
        immediate: yes
      when: interface_zone.zones[0] != zone
