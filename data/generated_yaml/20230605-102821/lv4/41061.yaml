
- name: Check ansible_virtualization_role on DigitalOcean droplets
  hosts: digitalocean_droplets
  vars:
    expected_virtualization_role: kvm
  tasks:
  - name: Print ansible_virtualization_role value
    debug:
      var: ansible_virtualization_role
  - name: Check if ansible_virtualization_role is equal to expected value
    assert:
      that:
        - ansible_virtualization_role == expected_virtualization_role
      fail_msg: "The ansible_virtualization_role variable is not set correctly on DigitalOcean droplets."
  - name: Display success message
    debug:
      msg: "The ansible_virtualization_role variable is set correctly on DigitalOcean droplets."
