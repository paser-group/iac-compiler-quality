
- name: Group Variable Misuse
  hosts: all
  gather_facts: no

  vars:
    group1_var: "Group 1 Variable"
    group2_var: "Group 2 Variable"

  tasks:
  - name: Print Group Variable
    debug:
      var: "{{ groups['group1'][0] }}_{{ group1_var }}"
      verbosity: 2
    when: inventory_hostname not in groups['group1']
    
  - name: Print Group Variable
    debug:
      var: "{{ groups['group2'][0] }}_{{ group2_var }}"
      verbosity: 2
    when: inventory_hostname in groups['group2']
