
- name: Install nxos operating system on network devices
  hosts: nxos_devices
  gather_facts: no

  tasks:
    - name: Change prompt for debugging
      expect:
        command: install_os
        responses:
          'Are you sure you want to continue?': "yes\r"
          'Enter the file name': "nxos.0.0.0.bin\r"
          'Enter the IP address of the default gateway': "10.1.1.254\r"
          'Enter the IP address for this interface': "10.1.1.{{ ansible_inventory_hostname.split(\".\")[3] }}\r"
          'Enter the net mask for this interface': "255.255.255.0\r"
        timeout: 30

    - name: Debugging output
      debug:
        var: ansible_output
