yaml
- name: create zabbix host
  hosts: all
  become: yes
  become_user: root
  tasks:
    - name: add host to Zabbix server
      zabbix_host:
        server_url: "http://zabbix.example.com/api_jsonrpc.php"
        login_user: "admin"
        login_password: "{{ lookup('file', '/path/to/pwdfile') }}"
        name: "test host"
        description: "test host description"
        groups:
          - "Linux servers"
        interfaces:
          - type: "agent"
            main: true
            ip: "127.0.0.1"
            port: 10050
