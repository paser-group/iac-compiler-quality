
---
- name: Verify Dynamic Inventory
  hosts: localhost
  connection: local
  gather_facts: no
  tasks:
    - name: Retrieve inventory information
      set_fact:
        inventory_ips: "{{ lookup('ini', 'ansible_host type=ssh') }}"
    - name: Ping all internal hosts
      ping:
      with_items: "{{ inventory_ips }}"
      when: item.value != 'localhost'
