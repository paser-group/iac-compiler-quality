yaml
- name: Check sudo privileges
  hosts: centos1
  become: yes
  gather_facts: no
  tasks:
    - name: Check sudo access without providing the password
      shell: whoami
      register: whoami_output

    - name: Print error message if password is required but not given
      debug:
        msg: "Please provide your sudo password using --ask-sudo-pass flag."
      when: "'sudo: a password is required' in whoami_output.stderr"
