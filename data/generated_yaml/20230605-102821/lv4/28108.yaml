
- name: Execute long-running command on Windows host
  hosts: windows
  gather_facts: no
  vars:
    ps_command: "Write-Output ('A' * 50000000)"
  
  tasks:
  - name: Run the command
    win_shell: "{{ ps_command }}"
    register: output
    async: 20
    poll: 1
    
  - name: Print the output
    debug:
      var: output.stdout_lines
