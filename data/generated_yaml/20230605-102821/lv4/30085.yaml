
- name: Create EC2 Launch Configuration
  hosts: localhost
  gather_facts: no
  tasks:

  - name: Set region and vars for ec2_lc module
    set_fact:
      region: "us-east-1"
      img_id: "ami-0c94855ba95c71c99"
      inst_type: "t2.micro"
      subnet_id: "subnet-XXXXXXXX"  # Change this to a valid non-default subnet id in the region
      sg_id: "sg-XXXXXXXX"  # Change this to a valid security group id
      ec2_lc_name: "test_lc"
      key: "test-key"
  
  - name: Create EC2 Launch Configuration
    ec2_lc:
      name: "{{ ec2_lc_name }}"
      instance_name: "{{ ec2_lc_name }}"
      instance_id: "{{ ec2_lc_name }}"
      image_id: "{{ img_id }}"
      instance_type: "{{ inst_type }}"
      subnet_id: "{{ subnet_id }}"
      security_groups: ["{{ sg_id }}"]
      key_name: "{{ key }}"
      region: "{{ region }}"
