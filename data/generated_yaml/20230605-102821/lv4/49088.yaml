
- name: Test SSH connectivity to Docker containers
  hosts: all
  gather_facts: no
  tasks:
    - name: Test SSH connectivity using username and password
      expect:
        command: ssh <host>
        responses:
          'password:': '{{ ssh_password }}'
        timeout: 30
        echo: yes
      vars:
        ssh_password: "{{ lookup('file', '/path/to/password/file') }}"
