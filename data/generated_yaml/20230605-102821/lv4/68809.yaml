
- name: FortiOS Firewall Address
  hosts: fortios_firewall
  vars:
    fortios_api_username: "{{lookup('env','FORTIOS_API_USERNAME')}}"
    fortios_api_password: "{{lookup('file','/var/opt/ansible/passwords/FORTIOS_API_PASSWORD.txt')}}"
    fortios_api_uri: "/api/v2/cmdb/firewall/address/"
  tasks:
  - name: Get FortiOS Firewall Address - {{inventory_hostname}}
    fortios_firewall_address:
      host: "{{inventory_hostname}}"
      username: "{{fortios_api_username}}"
      password: "{{fortios_api_password}}"
      uri: "{{fortios_api_uri}}"
      verify_ssl: "False"
    register: result
  - name: Debug task - {{inventory_hostname}}
    debug:
      var: result
