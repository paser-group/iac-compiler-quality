
- name: Loading variables from include_vars
  hosts: localhost
  gather_facts: no
  vars:
    include_var_file: "{{ playbook_dir }}/vars.yml"
    user: admin
    password: "{{ vaulted_password }}"
  pre_tasks:
    - name: Setting the vault password
      set_fact:
        vaulted_password: "{{ lookup('env', 'ANSIBLE_VAULT_PASSWORD') }}"
    - name: Loading variables from file
      include_vars: "{{ include_var_file }}"
  tasks:
    - name: Printing the variables
      debug:
        var: "{{ user }}"
