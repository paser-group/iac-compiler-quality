
- hosts: all
  gather_facts: False
  vars:
    nodes:
      - node: ubuntu1
        ip: 10.1.1.1
        ansible_user: user1
      - node: alpine1
        ip: 10.1.1.2
        ansible_user: user2
      - node: centos1
        ip: 10.1.1.3
        ansible_user: user3
      - node: redhat1
        ip: 10.1.1.4
        ansible_user: user4
    delegate_host: centos1

  tasks:
  - name: Include secondary task
    include_tasks: subelementstask.yml
    delegate_to: "{{ delegate_host }}"
    loop: "{{ nodes }}"
    loop_control:
      loop_var: item
    when: item.node == delegate_host
