
- name: Get GCP Instances
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Get GCP Instance Details
      gcp_compute:
        project: "my-project-id"
        zone: "us-central1-a"
        auth_kind: "serviceaccount"
        service_account_file: "/path/to/service-account.json"
        instance_name: "*"
        format: json
      register: gcp_instances

    - name: Print Instance Details
      debug:
        var: gcp_instances
