
- name: Demonstrate hostname module not working on Docker
  hosts: all
  gather_facts: no

  tasks:
    - name: Print the hostname for Docker container
      command: docker exec -it {{ inventory_hostname }} hostname
      register: hostname_output

    - name: Display the hostname of the Docker container
      debug:
        var: hostname_output.stdout_lines

    - name: Fail task if the hostname is not displayed
      fail:
        msg: "Hostname module not working on Docker container"
      when: "'localhost' in inventory_hostname and hostname_output.stdout_lines == []"
