
- name: Test bigip_node server_port module
  hosts: bigip
  gather_facts: no

  tasks:
  - name: Install BIG-IP Python SDK
    pip:
      name: f5-sdk
  - name: Test bigip_node server_port
    bigip_node:
      state: present
      partition: Common
      name: ansible-test-node
      host: "{{ inventory_hostname }}"
      server_port: "{{ server_port }}"
      user: "{{ username }}"
      password: "{{ password }}"
    delegate_to: localhost
    register: result
  - name: Print result
    debug:
      var: result
