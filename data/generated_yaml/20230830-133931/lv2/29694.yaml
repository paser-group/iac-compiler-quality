---
- name: Ansible Latent Bug Finder
  hosts: all
  gather_facts: false

  tasks:
    - name: Create symlink paths with space
      file:
        state: link
        src: "/tmp/symlink-path-with-space"
        dest: /tmp/symlink path with space
      become: true

    - name: Generate malformed unicode strings for inventory
      shell: echo -e '[weirdhost\udcc1\udcc1]' >> /etc/ansible/hosts
      become: true

    - name: Set negative Cache timeout values
      lineinfile:
        path: /etc/ansible/ansible.cfg
        line: "gather_timeout = -1"
      become: true