---
- name: Test playbook for Ansible compiler bugs
  hosts: all
  gather_facts: true

  tasks:
    - name: Display IPv6 addresses
      debug:
        msg: "IPv6 Address for {{ inventory_hostname }}: {{ ansible_default_ipv6.address }}"
      vars:
        inventory_hostname: "{{ inventory_hostname }}"

    - name: Generate subnet mask
      set_fact:
        subnet_mask: "{{ ansible_default_ipv6.address.split(':')[3] }}"
      
    - name: Display subnet mask
      debug:
        msg: "Subnet mask for {{ inventory_hostname }}: {{ subnet_mask }}"

    - name: Mismatch network and router names
      set_fact:
        network_name: "subnet-net"
        router_name: "gateway"
      when: inventory_hostname == 'ubuntu1'

    - name: Display network and router names
      debug:
        msg: "Network: {{ network_name }}, Router: {{ router_name }}"