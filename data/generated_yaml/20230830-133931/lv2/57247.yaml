---
- name: Test Ansible Latent Type Bugs
  hosts: all
  gather_facts: false

  vars:
    inventory_path: "/etc/ansible/hosts"
    cache_timeout: -1
    invalid_var: "{{ non_existent_var}}"

  tasks:
    - name: Create symlink paths with space
      file:
        path: "/tmp/my {{ item }}"
        state: "link"
        src: "/etc/ansible/hosts"
      with_items:
        - "link1"
        - "link2"

    - name: Generate malformed unicode strings for inventory
      copy:
        content: "{{ item }}"
        dest: "{{ inventory_path }}"
        mode: "0644"
      with_items:
        - "ubuntu1 ansible_host=10.1.1.1 ansible_user=root"
        - "alpine1 ansible_host=10.1.1.2 ansible_user=root"
        - "centos1 ansible_host=10.1.1.3 ansible_user=root"
        - "redhat1 ansible_host=10.1.1.4 ansible_user=root"
        - "{{ invalid_var }}"

    - name: Negative Cache timeout values
      copy:
        content: "cache_timeout: {{ cache_timeout }}"
        dest: "{{ inventory_path }}"
        mode: "0644"