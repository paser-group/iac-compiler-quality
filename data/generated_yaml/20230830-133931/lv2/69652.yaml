- hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Docker nodes
      vars:
        nodes:
          - name: ubuntu1
            image: ubuntu
          - name: alpine1
            image: alpine
          - name: centos1
            image: centos
          - name: redhat1
            image: redhat
      ansible_python_interpreter: /usr/bin/python3
      ansible_modules_namespace: custom
      custom.os_server:
        state: present
        name: "{{ item.name }}"
        flavor: m1.small
        image: "{{ item.image }}"
        key_name: mykey
        network: node-net
      loop: "{{ nodes }}"