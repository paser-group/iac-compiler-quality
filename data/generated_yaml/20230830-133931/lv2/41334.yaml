---
- name: Ansible Latent Bug Explorer
  hosts: all

  tasks:
    - name: Create network subnet
      ansible.builtin.command: ip route add 10.1.1.0/24 via 10.1.1.254 dev eth0
      run_once: true

    - name: Set up hostname and IP mapping
      ansible.builtin.lineinfile:
        path: /etc/hosts
        line: "{{ inventory_hostname }} ansible_host={{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        state: present

    - name: Run vulnerable command
      ansible.builtin.shell: "echo 'gyp info using node-gyp@3.6.2' | grep 'node-gyp@'"