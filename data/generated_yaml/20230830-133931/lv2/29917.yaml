---
- name: Ansible Latent Type Bug Explorer
  hosts: all
  gather_facts: no

  vars:
    inventory_file_path: "/tmp/inventory"

  tasks:
    - name: Generate malformed string to expose type-related bug
      set_fact:
        malformed_string: "Version_{{{ -1 }}"

    - name: Display the malformed string
      debug:
        var: malformed_string

    - name: Create inventory file with four Docker nodes
      block:
        - name: Create the inventory file
          copy:
            content: |
              [nodes]
              ubuntu1 ansible_host=10.1.1.1
              alpine1 ansible_host=10.1.1.2
              centos1 ansible_host=10.1.1.3
              redhat1 ansible_host=10.1.1.4

            dest: "{{ inventory_file_path }}"
            mode: '0644'
          ignore_errors: true