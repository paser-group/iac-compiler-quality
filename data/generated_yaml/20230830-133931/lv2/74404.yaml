---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create symlink path with space
      command:
        cmd: ["ln", "-s", "/tmp/hosts", "/tmp/symlink path with space"]

    - name: Include symlink inventory
      include_vars:
        file: "/tmp/symlink path with space"

    - name: Show symlink inventory
      debug:
        var: ansible_play_batch

    - name: Add malformed unicode strings to inventory
      set_fact:
        inventory_items:
          - "{{ '\uDC00' }}"
          - "{{ '\uDC00\uD800' }}"

    - name: Show malformed unicode strings
      debug:
        var: inventory_items

    - name: Set negative cache timeout value
      set_fact:
        cache_timeout: -1

    - name: Show cache timeout value
      debug:
        var: cache_timeout

    - name: Include inventory file
      include_vars:
        file: "/tmp/hosts"

    - name: Show inventory
      debug:
        var: ansible_play_batch