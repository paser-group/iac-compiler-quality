---
- name: Ansible Bug Explorer
  hosts: localhost
  gather_facts: no

  vars:
    subnet: "10.1.1.0/24"
    gateway: "10.1.1.254"

  tasks:
    - name: Create network and gateway
      debug:
        msg: "Creating network {{ subnet }} and gateway {{ gateway }}"

    - name: Generate IP addresses for nodes
      set_fact:
        ubuntu_ip: "{{ subnet | ipaddr(subnet + '/24') + 1 }}"
        alpine_ip: "{{ subnet | ipaddr(subnet + '/24') + 2 }}"
        centos_ip: "{{ subnet | ipaddr(subnet + '/24') + 3 }}"
        redhat_ip: "{{ subnet | ipaddr(subnet + '/24') + 4 }}"