---
- name: Ansible Latent Bug Finder
  hosts: all
  gather_facts: false

  tasks:
    - name: Add user without explicitly setting nopassword
      eos_user:
        username: testme
        state: present
        provider:
          host: "{{ host }}"
          username: "{{ username }}"
          password: "{{ password }}"
          authorize: "{{ authorize }}"
          transport: "{{ transport }}"
          port: "{{ port }}"
      vars:
        host: 10.1.1.1
        username: administrator
        password: testtest
        authorize: yes
        transport: cli
        port: 22

    - name: Debug message
      debug:
        msg: "User added successfully"