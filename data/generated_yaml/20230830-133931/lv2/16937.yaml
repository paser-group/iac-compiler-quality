---
- name: Expose latent type-related bugs in Ansible compiler
  hosts: all
  gather_facts: false
  vars:
    run_once_fact: "{{ run_once_var | default(false) }}"
  tasks:
    - name: Execute task before running once
      debug:
        msg: "Executing task before running once"
      run_once: false

    - name: Execute task with run_once_fact
      command: /bin/false
      run_once: "{{ run_once_fact }}"

    - name: Execute task after running once
      debug:
        msg: "Executing task after running once"