---
- name: Test Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set state variable
      set_fact:
        state: '{{ lookup("env", "STATE") }}'

    - name: Execute role
      include_role:
        name: rolename
      vars:
        my_role_parameters:
          - state: '{{ state | int }}'