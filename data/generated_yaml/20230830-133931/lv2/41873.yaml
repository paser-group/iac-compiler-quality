---
- name: Generate random password
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate password
      command: "openssl rand -base64 12"
      register: password_output

    - name: Set password fact
      set_fact:
        password: "{{ password_output.stdout | from_yaml }}"
        ansible_facts:
          sensitive_variables: [password]

    - name: Debug password
      debug:
        var: password