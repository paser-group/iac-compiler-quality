---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create network interface
      ec2_network_interface:
        subnet_id: subnet-12345678
        groups: sg-12345678
        delete_on_termination: "{{ subnet_id is undefined }}"
        interfacesettings:
          device_index: "{{ subnet_id }}"
          ipv6_addresses: "{{ groups }}"
      register: network_interface
      when: network_interface is undefined