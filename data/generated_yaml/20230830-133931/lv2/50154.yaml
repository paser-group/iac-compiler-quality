---
- name: Test playbook for Ansible compiler bugs
  hosts: localhost
  gather_facts: false

  vars:
    users:
      - { hosts: ['ubuntu1'], name: 'user-one' }
      - { hosts: ['alpine1'], name: 'user-two' }
      - { hosts: ['centos1'], name: 'user-three' }
      - { hosts: ['redhat1'], name: 'user-four' }

  tasks:
    - name: Include tasks
      include_tasks: tasks/included_tasks.yml
      loop: "{{ users | subelements('hosts') }}"