---
- name: Deploy EC2 Instances
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Provision EC2 instances
      ec2:
        region: "us-east-1"
        keypair: mykey
        group: ansibleDeployedFrontend
        instance_type: t2.micro
        image: ami-0c55b159cbfafe1f0
        vpc_subnet_id: subnet-xxxxxxxxx
        wait: yes
        private_ip: 10.1.10.10
        assign_public_ip: true
        instance_tags:
          type: 'frontend'
          Name: 'zone1.t2.micro.frontend.01'
        volumes:
          - device_name: /dev/sda1
            volume_size: 150
        retries: 5
        register: ec2_instances

    ### Potential latent type-related bug ###
    - name: Print EC2 Instances
      debug:
        var: ec2_instances.instances|length