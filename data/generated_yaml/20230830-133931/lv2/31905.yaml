---
- hosts: all
  gather_facts: false

  tasks:
    - name: Create symlink paths with spaces
      file:
        src: /etc/ansible
        dest: "/tmp/ansible symlink"
        state: link

    - name: Generate malformed unicode string for inventory
      command: echo "ubuntu1 ansible_host=u"\u0336buntu1 ansible_user=admin ansible_ssh_pass=Password1" >> /etc/ansible/hosts

    - name: Set negative Cache timeout values
      lineinfile:
        dest: /etc/ansible/ansible.cfg
        line: "cache_timeout=-1"

    - name: Create subnet
      ec2_vpc_subnet:
        vpc_id: "{{ vpc_id }}"
        cidr: "{{ subnet_cidr }}"
        region: "{{ ec2_region }}"
        az: "{{ availability_zone }}"
        state: present
        tags:
          Name: "subnet-{{ subnet_id }}"