- name: Ansible Latent Bug Finder
  hosts: all
  gather_facts: false

  vars:
    - interface_names:
        - Gi0/0
        - Gi0/1
        - Gi0/2

  tasks:
    - name: State check
      ios_interface:
        name: "{{ item }}"
        neighbors:
          - port: eth0
      loop: "{{ interface_names }}"
      ignore_errors: true

    - name: Debug
      debug:
        var: ansible_failed_task