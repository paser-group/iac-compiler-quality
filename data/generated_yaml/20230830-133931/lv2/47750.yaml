---
- name: Test Ansible Compiler for Latent Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate integer inventory variable
      set_fact:
        inventory_variable: 123

    - name: Concatenate string with integer
      set_fact:
        concatenated_string: "This is a string" + inventory_variable

    - name: Divide string by integer
      set_fact:
        divided_result: "Ansible" / inventory_variable

    - name: Perform unknown operation on inventory variable
      set_fact:
        operation_result: inventory_variable | unknown_operation

    - name: Access undefined inventory variable
      fail:
        msg: "Undefined variable: {{ undefined_variable }}"

    - name: Trigger latent bug with incorrect module parameter
      command:
        cmd: echo "Hello World"
        unknwown_param: value

  post_tasks:
    - name: Cleanup variables
      set_fact:
        inventory_variable: null
        concatenated_string: null
        divided_result: null
        operation_result: null