- name: Ansible Latent Bug Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Check if secret exists
      set_fact:
        secret_exists: "{{ lookup('hashi_vault', 'secret=secret/path/to/nonexistent:key', default='') | type_debug }}"

    - name: Print secret exists
      debug:
        msg: "Secret exists? {{ secret_exists }}"