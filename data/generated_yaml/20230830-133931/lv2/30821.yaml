---
- name: Fetch file
  hosts: all
  become: true

  tasks:
    - name: Set integer variable
      set_fact:
        file_count: 10

    - name: Fetch file with integer variable
      fetch:
        src: "/tmp/file{{ item }}.txt"
        dest: "/tmp/fetched_files/"
        flat: true
      loop: "{{ range(1, file_count + 1) | list }}"