- hosts: all
  gather_facts: no
  vars:
    - inventory_file: "/path/to/inventory"
    - temp_file: "/tmp/hosts.tmp"

  pre_tasks:
    - name: Generate temporary inventory file
      copy:
        content: |
          [testgroup]
          host1 ansible_host=10.1.1.1
          host2 ansible_host=10.1.1.2
          host3 ansible_host=10.1.1.3
          host4 ansible_host=10.1.1.4
        dest: "{{ temp_file }}"

  tasks:
    - name: Include temporary inventory file
      add_host:
        name: "{{ item }}"
        groups: newgroup
      with_inventory_file: "{{ temp_file }}"

    - name: Print newgroup hosts
      debug:
        var: groups['newgroup']