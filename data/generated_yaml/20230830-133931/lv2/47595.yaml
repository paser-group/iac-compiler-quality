---
- name: Test Ansible Compiler for Latent Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set variables
      set_fact:
        source_region: "us-east-1"
        source_image_id: "ami-0a65asfd4"
        ami_name: "TestAMI"
        ami_tags: '{"Name": "TestAMI"}'
        tag_equality: true
        wait: true

    - name: Test ec2_ami_copy module
      ec2_ami_copy:
        source_region: "{{ source_region }}"
        source_image_id: "{{ source_image_id }}"
        name: "{{ ami_name }}"
        tags: "{{ ami_tags }}"
        tag_equality: "{{ tag_equality }}"
        wait: "{{ wait }}"
      register: result

    - name: Print module output
      debug:
        var: result