---
- name: Ansible Latent Bug Finder
  hosts: docker
  gather_facts: false

  tasks:
    - name: Set variable with an integer
      set_fact:
        test_var: 1

    - name: Check variable type
      fail:
        msg: "Error: The test_var type should be a string."
      when: test_var | type_debug != 'string'
...