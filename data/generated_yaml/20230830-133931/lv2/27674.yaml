---
- name: Ansible Latent Bug Explorer
  hosts: all
  gather_facts: false

  vars:
    inventory_subnet: "10.1.1.0/24"
    inventory_gateway: "10.1.1.254"
    nodes:
      - name: ubuntu1
        ip: "10.1.1.1"
        os: "ubuntu"
      - name: alpine1
        ip: "10.1.1.2"
        os: "alpine"
      - name: centos1
        ip: "10.1.1.3"
        os: "centos"
      - name: redhat1
        ip: "10.1.1.4"
        os: "redhat"

  tasks:
    - name: Generate subnet mask
      set_fact:
        subnet_mask: "{{ inventory_subnet.split('/')[1] }}"

    - debug:
        msg: "Subnet Mask: {{ subnet_mask }}"

    - name: Generate inventory file
      copy:
        content: |
          [nodes]
          {% for node in nodes %}