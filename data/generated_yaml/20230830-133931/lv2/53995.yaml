---
- name: Expose Latent Type-Related Bugs
  hosts: localhost
  gather_facts: no

  vars:
    inventory_file: "{{ playbook_dir }}/inventory.ini"

  tasks:
    - name: Create temporary inventory file
      copy:
        content: |
          [nodes]
          ubuntu1 ansible_host=10.1.1.1 ansible_python_interpreter=/usr/bin/python
          alpine1 ansible_host=10.1.1.2 ansible_python_interpreter=/usr/bin/python
          centos1 ansible_host=10.1.1.3 ansible_python_interpreter=/usr/bin/python
          redhat1 ansible_host=10.1.1.4 ansible_python_interpreter=/usr/bin/python
        dest: "{{ inventory_file }}"

    - name: Fetch inventory facts
      command: ansible-inventory -i "{{ inventory_file }}" --list
      register: inventory_facts
      ignore_errors: true

    - name: Debug inventory facts
      debug:
        var: inventory_facts.stdout_lines