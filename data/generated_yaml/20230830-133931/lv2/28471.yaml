- name: Test playbook
  hosts: all
  gather_facts: no

  tasks:
    - name: Set variable
      set_fact:
        subnet_mask: "{{ (subnet_mask | default('10.0.0.0/24')) | ipaddr(subnet=False) | ipwrapper(subnet=False) | ipaddr(subnet=True) }}"

    - name: Debug variable
      debug:
        var: subnet_mask