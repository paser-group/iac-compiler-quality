---
- name: Expose latent type-related bugs
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Set vulnerable variable
      set_fact:
        vulnerable_var: "{{ vulnerable_var | default(0) }}"

    - name: Perform vulnerable operation
      set_fact:
        vulnerable_var: "{{ vulnerable_var }} + 1"
      
    - name: Display vulnerable variable
      debug:
        var: vulnerable_var

    - name: Trigger type-related bug
      command: "echo {{ vulnerable_var }}"

    - name: Ensure type safety
      assert:
        that: "vulnerable_var | int == vulnerable_var"