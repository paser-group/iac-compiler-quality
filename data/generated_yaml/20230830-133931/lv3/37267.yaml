---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Generate an integer as a string
      set_fact:
        some_var: "123"
      when: inventory_hostname == 'ubuntu1'

    - name: Perform arithmetic operation on a string
      set_fact:
        calculated_value: "{{ some_var|int + 1 }}"
      when: calculated_value|int < 100

    - name: Create symlink with non-string inventory_hostname
      file:
        src: /tmp/foo
        dest: "/tmp/{{ inventory_hostname }}"
        state: link