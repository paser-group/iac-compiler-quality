
---
- hosts: localhost
  tasks:
    - name: Include template file with variable
      include_vars:
        file: template_vars.yml

    - name: Set a variable using included template file
      set_fact:
        foo: "{{ template_var }}"

    - name: Render the main template file
      template:
        src: template.j2
        dest: /tmp/rendered_template

    - name: Print the variable value
      debug:
        var: foo
