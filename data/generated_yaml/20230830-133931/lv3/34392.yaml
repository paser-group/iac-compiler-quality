---
- name: Expose latent type-related bugs
  hosts: localhost
  gather_facts: false
  vars:
    - target_file: "/tmp/test_file.txt"
    - file_content: "Testing Ansible type-related bugs"

  tasks:
    - name: Create a file with incorrect permissions
      file:
        path: "{{ target_file }}"
        state: touch
        mode: "0644"

    - name: Change the file to a directory (type coercion)
      file:
        path: "{{ target_file }}"
        state: directory
        
    - name: Print the file content (expect an error)
      shell: cat "{{ target_file }}"
      register: file_output
      ignore_errors: true

    - name: Debug file output
      debug:
        var: file_output