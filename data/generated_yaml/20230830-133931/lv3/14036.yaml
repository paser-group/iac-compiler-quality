- name: Latent Type Bug Finder
  hosts: all

  tasks:
    - name: Create symlink with space
      file:
        src: "/tmp/symlink_file"
        dest: "/tmp/symlink with space"
        state: link

    - name: Generate malformed unicode string for inventory
      lineinfile:
        path: "/tmp/inventory.ini"
        line: "{{ 'รถ' * 100000 | b64encode }}"

    - name: Set negative cache timeout
      lineinfile:
        path: "/tmp/ansible.cfg"
        line: "ansible_cache_plugin_timeout=-1"

    - name: Test latent type bug
      debug:
        msg: "{{ item }}"
      loop:
        - "{{ ['item1', 123, True] }}"