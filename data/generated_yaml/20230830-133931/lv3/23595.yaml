---
- name: Latent Type-related Bug Finder
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate inventory
      add_host:
        name: "{{ item.name }}"
        ansible_host: "{{ item.ip }}"
        ansible_python_interpreter: /usr/bin/python3
        ansible_user: "{{ lookup('env', 'USER') }}"
        ansible_ssh_private_key_file: "{{ lookup('env', 'HOME') }}/.ssh/id_rsa"
      with_items:
        - { name: "ubuntu1", ip: "10.1.1.1" }
        - { name: "alpine1", ip: "10.1.1.2" }
        - { name: "centos1", ip: "10.1.1.3" }
        - { name: "redhat1", ip: "10.1.1.4" }

    - name: Debug inventory data
      debug:
        var: hostvars[inventory_hostname]