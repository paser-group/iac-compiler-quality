---
- hosts: all
  gather_facts: false

  tasks:
    - name: Create directories
      hosts: all
      run_once: true
      gather_facts: false
      vars:
        dir_list:
          - name: 'directory'
            prefix: 'my_'
          - name: 'other_directory'
      block:
        - name: Check prefix
          set_fact:
            prefix_exists: "{{ item.prefix is defined and item.prefix }}"
          run_once: true
        - name: Create directories
          file:
            state: directory
            dest: "{{ item.prefix | default('') + item.name }}"
          when:
            - prefix_exists
          run_once: true