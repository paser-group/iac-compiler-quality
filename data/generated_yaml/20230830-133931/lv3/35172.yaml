---
- name: Execute shell command with variable
  hosts: all
  gather_facts: false

  vars:
    cmd: echo "{{ non_existent_var }}"

  tasks:
    - name: Execute shell command
      ansible.builtin.shell: "{{ cmd }}"