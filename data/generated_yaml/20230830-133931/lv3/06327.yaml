---
- name: Test Type Handling Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate inventory file
      blockinfile:
        path: inventory.ini
        block: |
          [nodes]
          ubuntu1 ansible_host=10.1.1.1
          alpine1 ansible_host=10.1.1.2
          centos1 ansible_host=10.1.1.3
          redhat1 ansible_host=10.1.1.4

    - name: Create symlink paths with space
      file:
        path: "/tmp/symlink path with space"
        state: link
        src: "/etc/passwd"
      delegate_to: localhost

    - name: Generate malformed unicode strings for inventory
      debug:
        msg: "{{ 'test' | as_unicode }}"
      delegate_to: localhost

    - name: Negative Cache timeout values
      shell: |
        echo "[testyourlatentskills.com]
        when: *LDAP_CONNECTION_ACTIVE_TIMEOUT
        maxsize: 10
        timeout: -10" > /tmp/test-inventory.ini
      delegate_to: localhost