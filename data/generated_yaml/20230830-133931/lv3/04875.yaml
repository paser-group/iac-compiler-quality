---
- name: Expose latent type-related bugs
  hosts: localhost
  connection: local
  gather_facts: false
  become: false

  tasks:
    - name: Create symlink path with space
      file:
        path: "{{ inventory_dir }}/ansible plugins/inventory/linode.py"
        state: link
        src: "{{ inventory_dir }}/linode.py"
      vars:
        inventory_dir: "~/ansible-src/plugins/inventory"

    - name: Generate malformed unicode strings for inventory
      lineinfile:
        path: "{{ inventory_dir }}/linode.py"
        line: "'\\u0027malformed_string\\u0027'"
      vars:
        inventory_dir: "~/ansible-src/plugins/inventory"

    - name: Set negative cache timeout for inventory
      ini_file:
        path: "{{ inventory_dir }}/linode.py"
        section: cache
        option: timeout
        value: "-1"
      vars:
        inventory_dir: "~/ansible-src/plugins/inventory"