
---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure bond interface
      ovirt_host_network:
        auth:
          url: "https://ovirt.example.com/ovirt-engine/api"
          username: "admin"
          password: "password"
        name: "compute.example.com"
        networks:
          - name: "ovirtmgmt"
            address: "10.10.83.2"
            boot_protocol: "static"
            gateway: "10.10.83.1"
            netmask: "255.255.255.0"
          - name: "vm_provider"
            boot_protocol: "none"
          - name: "vm_okd"
            boot_protocol: "none"
        bond:
          name: "bond0"
          mode: 4
          interfaces:
            - "enp61s0f0"
            - "enp61s0f1"
          options:
            lacp_rate: "fast"
            xmit_hash_policy: "layer3+4"
        save: yes
        check: yes
        timeout: 180
        wait: yes
