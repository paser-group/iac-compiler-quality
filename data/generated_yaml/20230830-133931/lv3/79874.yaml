
---
- hosts: all
  gather_facts: false
  tasks:
    - name: Set nested variable with error
      set_fact:
        myvar:
          nested: "{{ some_other_var.missing_var }}"

    - name: Debug nested variable
      debug:
        var: myvar.nested
      when: myvar is defined
