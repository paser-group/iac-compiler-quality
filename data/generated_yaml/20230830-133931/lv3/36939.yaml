- name: Provision Docker nodes
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Docker network
      docker_network:
        name: node-net
        ipam_config:
          - subnet: 10.1.1.0/24
        state: present

    - name: Create Docker nodes
      docker_container:
        name: "{{ item.name }}"
        state: started
        image: "{{ item.image }}"
        networks:
          - name: node-net
            ipv4_address: "{{ item.ip }}"
      with_items:
        - { name: ubuntu1, image: ubuntu:latest, ip: 10.1.1.1 }
        - { name: alpine1, image: alpine:latest, ip: 10.1.1.2 }
        - { name: centos1, image: centos:latest, ip: 10.1.1.3 }
        - { name: redhat1, image: redhat:latest, ip: 10.1.1.4 }