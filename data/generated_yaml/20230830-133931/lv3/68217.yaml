
- name: Create security group referencing group from different VPC
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Retrieve default security group info
      ec2_group_info:
        filters:
          vpc-id: '{{ some_other_vpc }}'
          group-name: default
      register: some_default_security_group

    - name: Create security group
      ec2_group:
        name: some-security-group
        description: Some security group
        vpc_id: '{{ some_vpc_id }}'
        rules:
          - proto: all
            group_id: '{{ some_default_security_group.security_groups[0].group_id }}'
