
---
- name: Configure SNMP settings
  hosts: all
  gather_facts: false

  tasks:
    - name: Provision SNMP settings
      delegate_to: localhost
      vars:
        provider:
          host: "{{ inventory_hostname }}"
          username: admin
          password: my_password
      ios_config:
        provider: "{{ provider }}"
        commands:
          - snmp-server community public RO
          - snmp-server community private RW
      register: config_result

    - name: Print playbook output
      debug:
        var: config_result.changed
