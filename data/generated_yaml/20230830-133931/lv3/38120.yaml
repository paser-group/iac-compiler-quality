---
- name: Ping all hosts
  hosts: all
  gather_facts: false

  tasks:
    - name: Ping hosts
      ping:
        data_item: "{{ hostvars['localhost'] }}"
        <<comment>> # The issue might be related to handling of dynamic variables in the 'ping' module.
        <<comment>> # Using an undefined variable 'hostvars['localhost']' could potentially expose type-related bugs.

    - debug: var=hostvars['localhost']