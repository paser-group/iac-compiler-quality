---
- name: Test Playbook for Ansible Type-related Bug Exploration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Type Conversion Test
      vars:
        bool_var: true
        int_var: 42
        str_var: "Ansible"
      debug:
        msg: "{{ item }}: {{ hostvars['localhost'][item] }}"
      loop:
        - bool_var | default('')
        - int_var | default('')
        - str_var | default('')
        - (bool_var + int_var) | default('')
        - (bool_var + str_var) | default('')
        - (int_var + str_var) | default('')

    - name: Type Interaction Test
      vars:
        dict_var:
          foo: 42
          bar: "Ansible"
      debug:
        msg: "{{ item }}: {{ hostvars['localhost'][item] }}"
      loop:
        - dict_var.foo
        - dict_var['foo']
        - dict_var.bar
        - dict_var['bar']
        - dict_var.foo + dict_var.bar
        - dict_var.foo * dict_var.bar