
---
- name: Test playbook
  hosts: localhost
  connection: local
  gather_facts: no

  tasks:
    - name: Provision Docker nodes
      docker_container:
        name: "{{ item.name }}"
        image: "{{ item.image }}"
        state: started
        interactive: true
        tty: true
        privileged: true
        networks:
          - name: node-net
        ip_address: "{{ item.ip }}"
        env:
          ANSIBLE_HOSTS: "{{ inventory_dir }}/hosts"
          ANSIBLE_CONFIG: "{{ inventory_dir }}/ansible.cfg"
      with_items:
        - { name: ubuntu1, image: "ubuntu:latest", ip: "10.1.1.1" }
        - { name: alpine1, image: "alpine:latest", ip: "10.1.1.2" }
        - { name: centos1, image: "centos:latest", ip: "10.1.1.3" }
        - { name: redhat1, image: "redhat:latest", ip: "10.1.1.4" }
