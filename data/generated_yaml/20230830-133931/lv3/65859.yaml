
---
- name: Test playbook to reveal latent bug
  hosts: all
  gather_facts: false

  vars:
    ansible_ssh_port: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      31613837626135323464356362306562343837323932613462386534386437633666306230396463
      3932653365633539313265326366316333376232346362360a366630323665633763386463316536
      66336434383063346632373337393961323763613238336338346132336438653331653264343331
      3264656632626435380a623734316366636165386431666239363737393239666130646463303032
      6465

  tasks:
    - name: Convert ansible_ssh_port to integer
      set_fact:
        port: "{{ ansible_ssh_port | int }}"

    - name: Debug port value
      debug:
        var: port
