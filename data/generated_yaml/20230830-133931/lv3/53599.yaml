---
- name: Test Playbook for Ansible Compiler Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Validate subnet masks
      vars:
        subnet_masks:
          - 10.1.1.0/31   # Invalid subnet mask (should be at least /30)
          - 10.1.1.0/32   # Invalid subnet mask (should be at least /30)
          - 10.1.1.0/33   # Invalid subnet mask (should be at most /32)
          - 10.1.1.0/30   # Valid subnet mask
      debug:
        msg: "{{ item }}"
      loop: "{{ subnet_masks }}"

    - name: Check mismatching network and router names
      vars:
        network_router_mappings:
          - { network: "node_net", router: "node_net" }     # Matches network and router names (valid)
          - { network: "node_net", router: "my_network" }   # Mismatched network and router names (invalid)
      debug:
        msg: "Network: {{ item.network }}, Router: {{ item.router }}"
      loop: "{{ network_router_mappings }}"