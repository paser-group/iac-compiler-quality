
---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Create file with non-default permissions
      copy:
        content: 'testing'
        dest: /test-file
        mode: '0644'
      register: file_copy

    - name: Archive file
      command: tar -cf /test-archive.tar /test-file

    - name: Extract non-default permission file
      unarchive:
        src: /test-archive.tar
        dest: /
      register: unarchive_result

    - name: Print unarchive result
      debug:
        var: unarchive_result.changed
