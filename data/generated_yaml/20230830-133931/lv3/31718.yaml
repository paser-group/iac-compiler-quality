
---
- name: Provoke finding a State Inquiry related bug in Ansible compiler
  hosts: all
  gather_facts: false

  tasks:
    - name: Set subnet mask to a base-10 problem
      set_fact:
        subnet_mask: "{{ 2**31 }}"

    - name: Display subnet mask
      debug:
        var: subnet_mask

    - name: Verify mismatching network and router names
      shell: |
        if [[ "{{ ansible_default_ipv4.network }}" != "{{ ansible_default_ipv4.gateway }}" ]]; then
          echo "The network and router names do not match"
        fi
      register: result
      ignore_errors: true

    - name: Display the result
      debug:
        var: result
