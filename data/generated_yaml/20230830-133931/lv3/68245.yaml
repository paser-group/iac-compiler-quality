ansible
---
- name: Example Play
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set inventory variables
      set_fact:
        inventory:
          ubuntu1:
            ip: "10.1.1.1"
            distro: "Ubuntu"
          alpine1:
            ip: "10.1.1.2"
            distro: "Alpine"
          centos1:
            ip: "10.1.1.3"
            distro: "CentOS"
          redhat1:
            ip: "10.1.1.4"
            distro: "RedHat"

    - name: Generate inventory file
      copy:
        content: |
          [nodes]
          ubuntu1 ansible_host="{{ inventory.ubuntu1.ip }}" ansible_os_family="{{ inventory.ubuntu1.distro }}"
          alpine1 ansible_host="{{ inventory.alpine1.ip }}" ansible_os_family="{{ inventory.alpine1.distro }}"
          centos1 ansible_host="{{ inventory.centos1.ip }}" ansible_os_family="{{ inventory.centos1.distro }}"
          redhat1 ansible_host="{{ inventory.redhat1.ip }}" ansible_os_family="{{ inventory.redhat1.distro }}"
        dest: "/etc/ansible/hosts"
