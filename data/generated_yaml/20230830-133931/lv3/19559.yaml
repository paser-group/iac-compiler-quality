- name: Launching Instances
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create symlink path with space
      file:
        src: "/path/to/source with space"
        dest: "/path/to/destination"
        state: link

    - name: Generate malformed unicode string for inventory
      lineinfile:
        path: inventory
        line: "ubuntu1 ansible_host=10.1.1.1\nalpine1 ansible_host=\xF0\x9F\x98\xB4"

    - name: Set negative cache timeout value
      set_fact:
        ansible_cache_plugin_timeout: -1

    - name: Launch EC2 Instances
      ec2:
        aws_access_key: "{{ lookup('env', 'EC2_ACCESS_KEY') }}"
        aws_secret_key: "{{ lookup('env', 'EC2_SECRET_KEY') }}"
        key_name: "key"
        group: "group"
        instance_type: "{{ lookup('env', 'EC2_INSTANCE_TYPE') }}"
        image: "{{ lookup('env', 'EC2_AMI') }}"
        vpc_subnet_id: "{{ lookup('env', 'EC2_SUBNET_ID') }}"
        region: "{{ lookup('env', 'EC2_REGION') }}"
        instance_tags:
          Name: "Node"
          Type: "vpc-2c8"
          Environment: "Dev"
        wait: true
        count: 1
        volumes:
          - device_name: /dev/sda1
            volume_size: "{{ lookup('env', 'EC2_VOLUME_SIZE') }}"
            delete_on_termination: true
      register: ec2_info

    - name: Debug EC2 instance info
      debug:
        var: item
      with_items: "{{ ec2_info.instances }}"