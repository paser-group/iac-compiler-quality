---
- name: Latent Bug Finder
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create symlink path with space
      copy:
        content: ""
        dest: "/tmp/inventory_directory_with_space"
        force: yes

    - name: Generate malformed unicode string for inventory
      copy:
        content: ""
        dest: "/tmp/unicode_host_{{ '\u2603' }}"
        force: yes

    - name: Trigger potential bug with negative cache timeout value
      copy:
        content: |
          ubuntu1 ansible_host=10.1.1.1 ansible_connection=docker_inventory_cache ansible_cache_timeout=-10
        dest: "/tmp/inventory"
        force: yes

    - name: Gather facts from inventory
      setup:
        ansible_inventory_sources: "/tmp/inventory"
        ansible_inventory_python_interpreter: "{{ ansible_playbook_python }}"