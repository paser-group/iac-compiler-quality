
---
- name: Test Latent INVENTORY Bugs
  hosts: localhost
  gather_facts: false

  vars:
    inventory_file: "/path/to/inventory"

  tasks:
    - name: Create symlink paths with spaces
      file:
        src: "/tmp/my symlink"
        dest: "/tmp/my symlink dest"
        state: link

    - name: Generate malformed unicode strings for inventory
      shell: echo "ubuntu1 ansible_host=\u9001" >> "{{ inventory_file }}"

    - name: Print inventory hostnames
      debug:
        var: hostvars[inventory_hostname].ansible_hostname
