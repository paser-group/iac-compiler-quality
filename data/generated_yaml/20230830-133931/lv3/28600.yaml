
- name: Create IAM Policy
  hosts: localhost
  gather_facts: false

  vars:
    aws_region: us-west-2
    aws_access_key: YOUR_ACCESS_KEY
    aws_secret_key: YOUR_SECRET_KEY

  tasks:
    - name: Create node-iam-policy
      iam_policy:
        region: "{{ aws_region }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        iam_type: role
        iam_name: NodePolicy
        policy_name: node-describe
        policy_document: files/node-iam-pol.json
        state: present
