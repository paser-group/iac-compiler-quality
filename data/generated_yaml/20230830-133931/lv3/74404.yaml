---
- name: Ansible Latent Bug Finder
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate multi-member group with a host and a group
      add_host:
        hostname: testhost
        groupname: testgroup

    - name: Execute a task with undefined variable
      shell: "{{ undefined_variable }}"
      register: undefined_variable_result
      ignore_errors: true

    - name: Convert a string to an integer
      set_fact:
        integer_var: "{{ '123' | int }}"

    - name: Perform arithmetic operation between string and integer
      set_fact:
        result: "{{ string_var + integer_var }}"

    - name: Debug results
      debug:
        var: item
      loop:
        - undefined_variable_result
        - integer_var
        - result