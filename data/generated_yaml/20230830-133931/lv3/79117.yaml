---
- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set inventory variable
      ansible.builtin.set_fact:
        subnet_mask: "{{ '10.109.188.206' }}"

    - name: Generate subnet mask bug
      ansible.builtin.set_fact:
        subnet_mask_binary: "{{ subnet_mask | ipaddr('ipv4') | ipaddr('network/prefix') }}"
      vars:
        subnet_mask: "{{ ansible_facts['ansible_default_ipv4']['netmask'] }}"

    - name: Print subnet mask bug
      ansible.builtin.debug:
        var: subnet_mask_binary

    - name: Generate network and router name mismatch
      ansible.builtin.set_fact:
        router_name: "{{ 'utun5' }}"
        network_name: "{{ 'node-net' }}"

    - name: Print network and router names
      ansible.builtin.debug:
        msg: "Network: {{ network_name }}, Router: {{ router_name }}"