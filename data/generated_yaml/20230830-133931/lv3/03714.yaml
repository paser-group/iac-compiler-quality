
---
- name: Test for latent bugs in Ansible compiler
  hosts: all
  gather_facts: no

  tasks:
    - name: Check if the volume group exists
      command: vgs store
      ignore_errors: yes
      register: vg_exists

    - name: Print volume group existence status
      debug:
        var: vg_exists

    - name: Remove logical volume if the volume group exists
      lvol:
        lv: live
        vg: store
        state: absent
      when: vg_exists.rc == 0
