---
- name: Exposing Latent Bugs
  hosts: localhost
  gather_facts: false

  vars:
    subnet_mask: 255.255.255.0
    network_gateway: 10.1.1.254

  tasks:
    - name: Convert subnet mask to integer
      set_fact:
        subnet_mask_int: "{{ subnet_mask|regex_replace('\\.', '')|int }}"

    - name: Create network and gateway variables
      set_fact:
        network: "10.1.1.{{ subnet_mask_int }}"
        gateway: "10.1.1.{{ subnet_mask_int + 254 }}"

    - debug:
        msg: "Network: {{ network }}, Gateway: {{ gateway }}"