---
- name: Test Ansible Type-Related Bugs
  hosts: all
  gather_facts: false
  vars:
    node_net_subnet: "10.1.1.0/24"
    node_net_gateway: "10.1.1.254"
    node_subnet: "10.1.1.{{ (inventory_hostname.split('.')[-1]) | int }}"
  
  tasks:
    - name: Debug node subnet
      debug:
        var: node_subnet

    - name: Validate node subnet
      assert:
        that:
          - node_subnet is version
        fail_msg: "Node subnet is not a valid IP version"

    - name: Configure network
      debug:
        msg: "Configuring network with subnet {{ node_subnet }} and gateway {{ node_net_gateway }}"