---
- hosts: all
  gather_facts: false

  tasks:
    - name: Check if Docker is installed
      shell: docker version
      register: docker_output
      failed_when: docker_output.rc != 0

    - name: Display Docker version
      debug:
        var: docker_output.stdout_lines

    - name: Check if Docker containers are running
      shell: docker ps -a
      register: container_output
      failed_when: container_output.rc != 0

    - name: Display Docker container details
      debug:
        var: container_output.stdout_lines