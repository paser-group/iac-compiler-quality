
---
- name: Test INVENTORY Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Create Symlink Path with Space
      file:
        src: "/tmp/my link"
        dest: "/tmp/my_symlink"

    - name: Generate Malformed Unicode String for Inventory
      lineinfile:
        dest: "/etc/ansible/host_vars/{{ inventory_hostname }}"
        line: "{{ '\u043E\u0437\u043D\u0430\u043A\u043E\u043C\u044C\u0442\u0435\u0441\u044C' | to_json }}"

    - name: Set Negative Cache Timeout Value
      lineinfile:
        dest: "/etc/ansible/ansible.cfg"
        regexp: '^CACHE_PLUGIN_TIMEOUT'
        line: "CACHE_PLUGIN_TIMEOUT=-1"
        create: true
        backup: yes
