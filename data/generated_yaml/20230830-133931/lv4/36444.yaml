---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Create network interface with private IP address
      azure_rm_networkinterface:
        name: cloudnode01
        resource_group: test-resourcegroup
        virtual_network_name: test-vnet
        subnet_name: test-subnet
        ip_configurations:
          - name: test-cloudnode01
            primary: true
            private_ip_allocation_method: Dynamic
            private_ip_address: "{{ 10.1.1.1 }}"