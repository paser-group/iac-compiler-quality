---
- name: Test Provision
  hosts: all
  gather_facts: false

  vars:
    webserver_root: '/var/www'
    webserver_user: 'nginx'
    instances:
      - name: 'dev'
        docroot: "{{webserver_root}}/dev"
      - name: 'stage'
        docroot: "{{webserver_root}}/stage"

  tasks:
    - name: Debug webserver_root
      debug:
        var: webserver_root

    - name: Debug instances/items
      debug:
        var: item.docroot
      with_items: "{{ instances }}"

    - name: Debug instances single item
      debug:
        var: instances[0].docroot