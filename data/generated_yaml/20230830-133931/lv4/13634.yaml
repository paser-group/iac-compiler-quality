
---
- name: Dynamic Group Creation
  hosts: all
  gather_facts: false

  tasks:
    - name: Get Network Facts
      setup:
        filter: ansible_eth0.ipv4

    - name: Create Active/Passive Groups
      group_by:
        key: "tiers-production-app-mysql-replication-master-{{ 'active' if hostvars[inventory_hostname].ansible_eth0.ipv4.address == '10.0.2.75' else 'passive' }}"
