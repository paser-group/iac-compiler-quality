
---
- hosts: all
  gather_facts: false
  tasks:
    - name: Create default security group
      os_security_group:
        cloud: mycloud
        state: present
        name: default

    - name: Add rule to default security group
      os_security_group_rule:
        cloud: mycloud
        security_group: default
        protocol: tcp
        direction: ingress
        remote_ip_prefix: 0.0.0.0/0
        port_range_min: 22
        port_range_max: 22

    - name: Print debug information
      debug:
        var: ansible_hostname
