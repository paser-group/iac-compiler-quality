---
- name: Latent Bug Finder Playbook
  hosts: all
  become: true

  tasks:
    - name: Create custom inventory directory
      file:
        path: /etc/ansible/inventory
        state: directory

    - name: Generate malformed inventory with different types
      block:
        - set_fact:
            inventory_items:
              - name: "Host 1"
                ip: 10.1.1.1
                type: "{{ 'server' | random }}"
              - name: "Host 2"
                ip: "{{ 10.1.1.2 }}"
                type: "{{ 'client' | random }}"
              - name: "Host 3"
                ip: "{{ ['10.1.1.3'] }}"
                type: "{{ {'key': 'value'} | random }}"
              - name: "Host 4"
                ip: "{{ {netmask: '255.255.255.0'} }}"
                type: "{{ [1, 2, 3, 4] | random }}"
              - name: "Host 5"
                ip: "{{ bool('random') }}"
                type: "{{ range(1,10) | random }}"
        run_once: true

    - name: Debug inventory items
      debug:
        var: inventory_items

    # Other tasks...