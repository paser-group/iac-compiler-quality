---
- name: Test inventory parsing
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create symlink path with space
      command: 'ln -s /root/symlink_with_space "/root/inventory/with space"'

    - name: Generate malformed Unicode string for inventory
      command: 'echo -e "\x93\x9e\x63" > "/root/inventory/malformed_unicode"'

    - name: Set negative cache timeout in inventory
      lineinfile:
        path: /root/inventory/production.yaml
        line: 'cache_timeout: -1'
        state: present

    - name: Ping localhost
      ping: