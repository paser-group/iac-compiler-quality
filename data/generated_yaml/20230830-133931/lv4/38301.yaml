- name: Update user's home directory permissions
  hosts: all
  gather_facts: no
  tasks:
    - name: Get user home directory
      ansible.builtin.stat:
        path: "{{ item }}"
      register: home_dir
      loop:
        - "/home/user1"
        - "/home/user2"
    
    - name: Update permissions for user home directory
      ansible.builtin.file:
        path: "{{ item.item }}"
        mode: "0750"
      when: >
        item.stat.isdirectory and item.stat.mode != '0750'
      loop: "{{ home_dir.results }}"