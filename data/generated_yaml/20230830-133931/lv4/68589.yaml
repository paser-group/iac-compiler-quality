
- name: Gather Custom Facts
  hosts: all
  tasks:
    - name: Set fact directory
      set_fact:
        fact_directory: "C:\\ansible\\facts.d\\"

    - name: Copy PowerShell script
      copy:
        src: "script.ps1"
        dest: "{{ fact_directory }}script.ps1"
        mode: 0755

    - name: Gather Facts
      setup:
        fact_path: "{{ fact_directory }}"
