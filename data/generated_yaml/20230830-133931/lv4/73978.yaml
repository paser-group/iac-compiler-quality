- name: Test for Ansible Type-related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    test_var: ['pkg1', 'pkg2', 'pkg3', 'pkg4']

  tasks:
    - name: Debug with_items loop
      debug:
        msg: "{{ item }}: {{ item | type_debug }}"
      with_items: "{{ test_var | map('extract', [0]) | list }}"