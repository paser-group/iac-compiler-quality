---
- name: Test Type-Related Bugs
  hosts: all
  become: false

  tasks:
    - name: Create symlink paths with space
      file:
        src: "/tmp/symlink with space"
        dest: "/etc/ansible/hosts"
        state: link

    - name: Generate malformed unicode strings for inventory
      lineinfile:
        path: "/etc/ansible/hosts"
        line: "{{ '\ud800\ud800' }}"
        state: present
        create: true

    - name: Negative Cache timeout values
      lineinfile:
        path: "/etc/ansible/ansible.cfg"
        line: "cache_timeout: -1"
        create: true

    - name: Execute Ansible
      command: ansible all -m ping