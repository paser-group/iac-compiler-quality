---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create inventory directory
      file:
        path: "{{ inventory_dir }}"
        state: directory

    - name: Create inventory file
      copy:
        dest: "{{ inventory_dir }}/hosts"
        content: |
          [ubuntu1]
          10.1.1.1

          [alpine1]
          10.1.1.2

          [centos1]
          10.1.1.3

          [redhat1]
          10.1.1.4

    - name: Set ANSIBLE_INVENTORY variable to integer
      set_fact:
        ansible_inventory: 123

    - name: Execute tasks using inventory
      debug:
        msg: "Tasks executed successfully"

  vars:
    inventory_dir: "/tmp/inventory"