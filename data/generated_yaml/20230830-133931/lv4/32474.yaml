---
- name: Unveiling Ansible Compiler Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Import Ansible Release Key
      run_once: true
      command: gpg --import RPM-GPG-KEY-ansible-release.pub
      register: import_key_output

    - name: Display Imported Keys
      run_once: true
      command: gpg --list-keys
      register: list_keys_output
      changed_when: false

    - name: Add Ansible Repository
      yum_repository:
        name: ansible-rhel7
        description: Ansible RPM repository for RHEL7
        baseurl: https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/
        gpgkey: http://releases.ansible.com/keys/RPM-GPG-KEY-ansible-release.pub
      register: add_repo_output

    - name: Install Ansible Package
      package:
        name: ansible
        state: present
      register: install_output