
---
- name: Expose Ansible Latent Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Create symlink path with spaces
      file:
        path: "/path/with spaces"
        src: "/tmp/test"
        state: link

    - name: Generate malformed unicode strings for inventory
      shell: |
        mkdir -p "/tmp/{{ '\xe5\xb0\xb9\xe5\xb0\xb9' }}"
      delegate_to: localhost

    - name: Set negative cache timeout value
      ini_file:
        path: "/etc/ansible/ansible.cfg"
        section: "defaults"
        option: "host_key_checking"
        value: "-1"
      delegate_to: localhost

    - name: Get file from S3 bucket
      aws_s3:
        bucket: my-special-bucket
        object: just_some_file.txt
        dest: /usr/local/test/just_some_file.txt
        mode: get
