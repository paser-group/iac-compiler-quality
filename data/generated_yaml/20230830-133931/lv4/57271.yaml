
---
- name: Ansible Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create temp file
      tempfile:
        state: directory
      register: temp_dir

    - name: Generate variables file
      copy:
        dest: "{{ temp_dir.path }}/vars.yml"
        content: |
          my_var: "This is a string"
    
    - name: Convert variable to integer
      set_fact:
        my_var_int: "{{ my_var|int }}"
      vars:
        my_var: "{{ lookup('file', '{{ temp_dir.path }}/vars.yml') }}"
          
    - name: Print variable
      debug:
        var: my_var_int
