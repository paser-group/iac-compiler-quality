
---
- name: Test inventory-based bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Debug inventory variables
      debug:
        msg: "{{ inventory_hostname }} - {{ ansible_host }}"

    - name: Create symlink with space
      file:
        src: "/tmp/test"
        dest: "/tmp/symlink with space"
        state: link

    - name: Generate malformed unicode string
      file:
        path: "/tmp/unicode_dir/{{ 'üñîcódé'|decode('unicode_escape') }}"
        state: directory

    - name: Set negative cache timeout
      set_fact:
        ansible_cache_valid_time: -3600

    - name: Print ansible_cache_valid_time
      debug:
        var: ansible_cache_valid_time
