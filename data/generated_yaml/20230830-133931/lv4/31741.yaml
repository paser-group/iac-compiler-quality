
---
- name: Ansible Latent Bug Finder Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Check if user is root
      command: id -u
      register: result
      changed_when: false

    - name: Print message if user is root
      debug:
        msg: "User is root"

    - name: Print message if user is not root
      debug:
        msg: "User is not root"

    - name: Check if ansible_user is ansible
      assert:
        that:
          - ansible_user == "ansible"
        fail_msg: "ansible_user is not set to ansible"
        success_msg: "ansible_user is set to ansible"
      ignore_errors: true

    - name: Print message if ansible_user is set to ansible
      debug:
        msg: "ansible_user is set to ansible"

    - name: Print message if ansible_user is not set to ansible
      debug:
        msg: "ansible_user is not set to ansible"
