
---
- name: Ansible Compiler Vulnerability Tester
  hosts: all
  gather_facts: false

  vars:
    ansible_python_interpreter: "/usr/bin/env python3"

  tasks:
    - name: Check if caskroom directory exists
      stat:
        path: "/usr/local/Caskroom"
      register: caskroom_check

    - name: Install caskroom if it doesn't exist
      command: "/usr/bin/env brew tap caskroom/cask"
      when: caskroom_check.stat.isreg == false

    - name: Install firefox using homebrew_cask module
      homebrew_cask:
        name: firefox
        state: present
