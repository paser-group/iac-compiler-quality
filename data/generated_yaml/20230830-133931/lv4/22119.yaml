
- name: Test Ansible Compiler for Security Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Lookup nonexistent secret
      set_fact:
        secret: "{{ lookup('hashi_vault', 'secret=secret/path/to/nonexistent:key') }}"
      ignore_errors: yes

    - name: Continue play
      debug:
        msg: "Play continues even if secret does not exist"

    - name: Display secret
      debug:
        var: secret
