
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Create symlink with space in path
      file:
        src: /tmp/symlink with space
        dest: /tmp/target

    - name: Generate malformed unicode string in inventory
      command: echo -e '[ubuntu1]\nu000D;x x x'
      register: malformed_inventory
      changed_when: false

    - name: Print the output of the malformed inventory command
      debug:
        var: malformed_inventory.stdout

    - name: Set negative cache timeout value
      set_fact:
        ansible_cache_valid_time: -1

    - name: Gather facts after setting negative cache value
      setup:
        gather_subset: ['all']

    - name: Print ansible_facts for host ubuntu1
      debug:
        var: hostvars['ubuntu1'].ansible_facts
