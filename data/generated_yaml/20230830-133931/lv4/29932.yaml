---
- name: Docker image pull test
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate inventory file
      copy:
        content: |
          [docker]
          ubuntu1 ansible_host=10.1.1.1 ansible_user=root
          alpine1 ansible_host=10.1.1.2 ansible_user=root
          centos1 ansible_host=10.1.1.3 ansible_user=root
          redhat1 ansible_host=10.1.1.4 ansible_user=root

        dest: /etc/ansible/inventory

    - name: Pull docker image
      docker_image:
        name: registry:2
        state: pulled