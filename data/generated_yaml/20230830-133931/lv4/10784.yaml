
---
- name: Ansible Latent Bug Finder
  hosts: all
  gather_facts: false

  tasks:
    - name: Create password directory
      file:
        path: /tmp/passwords
        state: directory

    - name: Generate random password
      command: openssl rand -base64 12
      register: random_password

    - name: Store password in lookup file
      copy:
        content: "{{ random_password.stdout }}"
        dest: /tmp/passwords/password.txt

    - name: Retrieve password from lookup file
      debug:
        msg: "Password: {{ lookup('file', '/tmp/passwords/password.txt') }}"
