
---
- name: Ansible Latent Bug Finder Playbook
  hosts: all
  connection: local
  gather_facts: false

  tasks:
    - name: Set facts
      set_fact:
        subnet_mask: 192.168.0.0/16
        network_name: node-net

    - name: Create network
      docker_network:
        subnet: "{{ subnet_mask }}"
        name: "{{ network_name }}"
        state: present

    - name: Create nodes
      docker_container:
        name: "{{ item.name }}"
        image: "{{ item.image }}"
        state: started
        network_mode: "{{ network_name }}"
      loop:
        - { name: ubuntu1, image: ubuntu }
        - { name: alpine1, image: alpine }
        - { name: centos1, image: centos }
        - { name: redhat1, image: redhat }
