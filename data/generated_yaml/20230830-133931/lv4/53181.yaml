
---
- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create network with invalid subnet mask
      ovirt_network:
        auth:
          url: https://api.ovirt.org/ovirt-engine/api
          username: admin
          password: password
        data_center: Default
        name: "{{ network_name }}"
        vlan: "{{ vlan_id }}"
        ip: 10.1.1.0
        subnet: "{{ subnet_mask }}"
        gateway: 10.1.1.254
        state: present
      vars:
        network_name: mynetwork
        vlan_id: 100
        subnet_mask: 255.255.255.300
    
    - name: Create network with mismatching names
      ovirt_network:
        auth:
          url: https://api.ovirt.org/ovirt-engine/api
          username: admin
          password: password
        data_center: Default
        name: "{{ network_name }}"
        vlan: "{{ vlan_id }}"
        ip: 10.1.1.0
        subnet: 255.255.255.0
        gateway: 10.1.1.254
        state: present
      vars:
        network_name: "mymismatchednetwork"
        vlan_id: 100
