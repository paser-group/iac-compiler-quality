
---
- hosts: leaf-1
  gather_facts: no
  vars:
    eos_connection:
      host: "{{ ansible_host }}"
      port: 8080
      username: 'eapiuser'
      password: 'icanttellyou'
      transport: eapi
      use_ssl: true
      validate_certs: false

  tasks:
    - name: Retrieve EOS inventory
      eos_command:
        commands: "show inventory"
        provider: "{{ eos_connection }}"
      register: result

    - debug:
        var: result
