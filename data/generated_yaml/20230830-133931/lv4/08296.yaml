
---
- name: Test Ansible Compiler for INVENTORY-related Bugs
  hosts: all
  gather_facts: False

  tasks:
    - name: Create symlink path with space
      file:
        src: /tmp/my link to file
        dest: /tmp/my_symlink
        state: link

    - name: Generate malformed unicode strings for inventory
      command: echo -e 'ubuntu1\U00000771' > /etc/ansible/hosts
      become: true

    - name: Set negative cache timeout value
      lineinfile:
        path: /etc/ansible/ansible.cfg
        line: "cache_timeout = -1"
        state: present
      become: true
