---
- hosts: all
  gather_facts: false
  tasks:
    - name: garbage collect sudo authorized keys (users deleted)
      authorized_key:
        user: non_existing_user
        key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIZwyo6tX8DZ+HQM4ppEdueTPhp+XJCh7Lcpn/Vx5ofY
        state: absent
        path: "/etc/ansible/authorized_keys"
        manage_dir: "no"
        sysadmins:
          - "{{ ansible_user }}"