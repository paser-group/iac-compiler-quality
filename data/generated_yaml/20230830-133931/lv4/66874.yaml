
---
- name: Test Ansible Inventory Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create symlink with space in path
      file:
        src: "{{ ansible_playbook_dir }}/inventory/{{ ansible_distribution }}1"
        dest: "{{ ansible_playbook_dir }}/inventory/{{ ansible_distribution }} 1"
        state: link
      failed_when: false
      changed_when: false

    - name: Generate malformed unicode string
      set_fact:
        inventory_string: "u'\uFFFF'"

    - name: Check if malformed unicode string is parsed successfully
      debug:
        var: "{{ inventory_string }}"
      failed_when: false
      changed_when: false

    - name: Set negative cache timeout
      set_fact:
        ansible_inventory_cache_timeout: -1
