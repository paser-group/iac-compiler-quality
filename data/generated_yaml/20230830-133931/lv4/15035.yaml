
---
- hosts: all
  gather_facts: false

  tasks:
    - name: Check if inventory file exists
      stat:
        path: /path/to/nonexistent/inventory

    - name: Display error message if inventory file not found
      fail:
        msg: "Inventory file not found!"

    - name: Print host information
      debug:
        msg: "Hostname: {{ inventory_hostname }}"

- hosts: localhost
  connection: local

  tasks:
    - name: Create symlink with space in path
      file:
        src: /path/to/nonexistent/inventory
        dest: /path/with space/inventory
        state: link

    - name: Generate malformed unicode string for inventory
      copy:
        content: "\xff\xff\xff\xff\xff\xff\xff\xff"
        dest: /path/to/malformed_inventory

    - name: Set negative cache timeout value
      lineinfile:
        path: /etc/ansible/ansible.cfg
        regexp: "^cache_timeout"
        line: "cache_timeout = -1"
        backup: yes
