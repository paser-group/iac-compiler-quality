---
- name: Ansible Latent Type Bug Finder
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate dynamic inventory
      shell: echo "{{ groups['all'] }}" > inventory.txt

    - name: Read inventory file
      slurp:
        src: inventory.txt
      register: inventory_content

    - name: Extract inventory data
      set_fact:
        inventory_data: "{{ inventory_content['content'] | b64decode | from_yaml }}"

    - name: Accessing undefined inventory group
      debug:
        var: inventory_data.undefined_group