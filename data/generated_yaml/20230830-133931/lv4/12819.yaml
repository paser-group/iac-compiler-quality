
---
- name: Test Playbook
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Generate Inventory
      copy:
        content: |
          [node]
          ubuntu1 ansible_host=10.1.1.1 ansible_user=root
          alpine1 ansible_host=10.1.1.2 ansible_user=root
          centos1 ansible_host=10.1.1.3 ansible_user=root
          redhat1 ansible_host=10.1.1.4 ansible_user=root
        dest: /tmp/inventory

    - name: Provision Docker Nodes
      shell: |
        ansible-playbook -i /tmp/inventory -e @/tmp/extra_vars.yml playbook.yml -v
      register: result

    - name: Display Result
      debug:
        var: result
