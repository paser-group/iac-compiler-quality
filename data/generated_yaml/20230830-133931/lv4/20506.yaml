
---
- hosts: all
  gather_facts: false
  vars:
    allowed_list:
      - protocol: tcp
        ports: '1-65535'
      - protocol: udp
        ports: '1-65535'
      - protocol: icmp

  tasks:
    - name: Update Firewall Rule
      gce_net:
        name: my-firewall-rule
        allowed: "{{ allowed_list }}"
      register: result

    - debug:
        var: result
