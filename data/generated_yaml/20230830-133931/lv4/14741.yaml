---
- name: Debug type-related bug
  hosts: all
  gather_facts: false

  tasks:
    - name: Set variable with different types
      set_fact:
        my_variable: "{{ item }}"
      with_items:
        - 1
        - '2'
        - []
        - {}

    - name: Print variable type
      debug:
        msg: "Variable type: {{ my_variable | type_debug }}"
      vars:
        my_variable: "{{ my_variable }}"