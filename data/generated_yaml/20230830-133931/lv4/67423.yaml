
---
- hosts: all
  gather_facts: false

  tasks:
    - name: Set DHCP numerical options for an IPv4 fixed address
      nios_fixed_address:
        name: hostname.domain
        ipaddr: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        mac: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['macaddress'] }}"
        network: 10.0.0.0/24
        network_view: default
        options:
          - num: "{{ number }}"
            value: "{{ vm_name }}"
        state: present
        provider: "{{ nios_provider }}"
      connection: local
      register: dhcp_results
