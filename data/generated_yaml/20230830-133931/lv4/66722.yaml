---
- name: Bug-Finding Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Execute command
      shell: echo "{{ command }}"
      register: command_output
      until: command_output.stdout | int > 5
      retries: 3
      delay: 5
      when:
        - ansible_distribution == 'CentOS'
        - ansible_distribution_major_version|int >= 7
        - ansible_distribution_major_version|int <= 8

    - name: Debug command output
      debug:
        var: command_output.stdout