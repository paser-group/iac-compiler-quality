---
- name: Test Ansible Compiler Bugs
  hosts: localhost
  gather_facts: false
  
  tasks:

  - name: Create VM with invalid variable type
    vmware_guest:
      hostname: 'myhost'
      username: 'test'
      password: 'test'
      esxi_hostname: '10.1.1.1'
      validate_certs: False
      datacenter: Datacenter
      name: 'myhost'
      template: 'vm-template'
      folder: /
      disk:
        - size_gb: 8
          type: thin
          datastore: 'Datastore'
      hardware:
        memory: 32768
        num_cpus: test   # Invalid variable type
      networks:
        - name: VM Network
          ip: '10.1.1.100'
          netmask: '255.255.255.0'
          gateway: '10.1.1.1'
      customization:
        dns_servers: '8.8.8.8'
      wait_for_ip_address: yes
      state: present