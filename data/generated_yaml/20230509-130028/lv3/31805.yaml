
---
- name: Test playbook
  hosts: localhost
  tasks:
    - name: Run with CallbackModule
      command: echo "Hello"
      register: result
      become: true
      tags: 
        - callback

  # Define a custom CallbackModule
  callback_plugins:
    - plugins/
    
  # Create a custom CallbackModule that overrides the original setup function
  # and does not include the set_options function
  # This is designed to expose a potential vulnerability in the compiler
  callback:
    - type: stdout
      output: always

      def setup(self):
          self.results = []
          self._params = {'log_path': '/tmp/callback_plugin.log'}
