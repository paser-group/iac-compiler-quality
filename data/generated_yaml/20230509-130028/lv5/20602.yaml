
- hosts: all
  tasks:
    - name: Print a string with newlines
      debug:
        var: "string with\nnewlines"

- name: Ensure debug callback plugin formats newlines correctly
  become: no
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Run playbook and capture output
    command: ansible-playbook -i inventory.yml playbook.yml
    register: playbook_output

  - name: Check output for correctly formatted newlines
    assert:
      that: '"string with\nnewlines" in playbook_output.stdout'
