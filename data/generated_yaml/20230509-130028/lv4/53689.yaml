
- name: Example playbook utilizing the slack callback plugin
  hosts: localhost
  tasks:
    - name: Task 1
      debug:
        msg: "This is task 1."
    - name: Task 2
      debug:
        msg: "This is task 2, and it will fail."
      failed_when: true
    - name: Task 3
      debug:
        msg: "This is task 3."
      notify: Slack notification
      
  handlers:
    - name: Slack notification
      slack:
        token: "{{ slack_token }}"
        channel: "#general"
        username: "Ansible Bot"
        color: '#FF0000'
        message: "Task 3 in playbook '{{ playbook_name }}' has completed."
        failed_when: false
        changed_when: false
