
$resourceGroupName = "<your resource group name>"
$deploymentName = "<your deployment name>"

$errorDetails = (Get-AzureRmResourceGroupDeployment -ResourceGroupName $resourceGroupName -DeploymentName $deploymentName -ErrorVariable error | Out-Null -ErrorVariable errorContents) 4>&1
if($error)
{
    Write-Host "Deployment failed with the following errors:" -ForegroundColor Red
    Write-Host $errorContents.Exception.Message -ForegroundColor Red
}
else
{
    Write-Host "Deployment succeeded" -ForegroundColor Green
}
