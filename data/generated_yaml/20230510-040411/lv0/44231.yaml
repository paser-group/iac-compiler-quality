
- name: Playbook for executing commands on remote hosts
  hosts: all
  gather_facts: True

  tasks:
    - name: Check if Python is installed
      raw: which python
      register: python_check
      ignore_errors: yes
      changed_when: False

    - name: Install Python if it is not installed
      raw: sudo apt-get install python -y
      when: python_check.rc != 0

    # Other tasks go here
