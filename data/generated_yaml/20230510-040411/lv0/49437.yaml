python
import requests

# Define the endpoint
url = 'https://example.com/tower_credentials'

# Define the payload
payload = {
    'username': 'myusername',
    'password': 'mypassword',
    'secret_key': 'mysecret'
}

# Generate a unique identifier for the request
# Use a UUID generator or any other method to generate a unique ID
request_id = '12345678-9101-1121-3141-51617181920'

# Define the headers with the unique identifier
# Use the same identifier for subsequent requests
headers = {
    'Content-Type': 'application/json',
    'X-Request-ID': request_id
}

# Send the POST request with idempotency
response = requests.post(url, json=payload, headers=headers)

# Check the status code and response
if response.status_code == 200:
    print("Tower credential created successfully!")
elif response.status_code == 409:
    print("A Tower credential with the same ID already exists.")
else:
    print(f"Failed to create the credential. Status code: {response.status_code}")
    print(response.text)
