python
import socket

def receive_response(sock):
    buffer_size = 1024
    response = b''
    while True:
        try:
            chunk = sock.recv(buffer_size)
        except socket.error as e:
            # The prompt was not found in the current response, so this may be a temporary network error
            if b'prompt' not in response:
                continue
            else:
                raise e
        if not chunk:
            break
        response += chunk
        if b'prompt' in response:
            break
    return response
