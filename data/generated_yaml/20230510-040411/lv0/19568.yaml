
---

- name: Upload new file to Google Cloud Storage bucket
  hosts: localhost
  gather_facts: false

  vars:
    gcp_project_id: "my-project-id"
    gcp_auth_kind: "serviceaccount"
    gcp_service_account_file: "/path/to/service-account.json"
    gcp_bucket_name: "my-bucket-name"
    local_file_path: "/path/to/local/file.txt"
    remote_file_name: "remote-file-name.txt"

  tasks:
    - name: Upload file to GCS bucket
      gc_storage:
        state: present
        project: "{{ gcp_project_id }}"
        auth_kind: "{{ gcp_auth_kind }}"
        service_account_file: "{{ gcp_service_account_file }}"
        bucket: "{{ gcp_bucket_name }}"
        object: "{{ remote_file_name }}"
        src: "{{ local_file_path }}"
