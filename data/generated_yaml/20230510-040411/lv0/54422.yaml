
resource "google_service_account" "my_service_account" {
  account_id   = "my-service-account"
  display_name = "My Service Account"
}

module "gcp_iam_service_account_module" {
  source  = "terraform-google-modules/iam/google//modules/service-accounts"
  version = "5.0.0"

  service_accounts = [
    {
      id        = google_service_account.my_service_account.email
      role      = "roles/viewer"
      member    = "user:user@example.com"
      condition = null
    }
  ]
  
  on_service_account_exists = "error"
}
