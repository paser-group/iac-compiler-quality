yaml
- name: Example of using delegate_to with changing target
  hosts: web_servers
  tasks:
  - name: Check that a file exists on the web_servers
    stat:
      path: /etc/hosts
    register: file_check

  - name: Print file check results on the control machine
    debug:
      var: file_check

  - name: Edit the file on the web_servers
    lineinfile:
      path: /etc/hosts
      line: "127.0.0.1 localhost ansible_managed"
      backup: yes
    delegate_to: "{{ item }}"
    with_items: "{{ groups['web_servers'] }}"
