
def os_keypair(name, force=False):
    existing_keypair = get_existing_keypair(name)

    if existing_keypair:
        if force:
            delete_keypair(name)
        else:
            raise ExistingKeypairError('Keypair with name {} already exists.'.format(name))

    create_keypair(name)
    return get_keypair(name)
