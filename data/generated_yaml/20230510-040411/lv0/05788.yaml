python
import urllib.request
import urllib.error

def get_url(url, username=None, password=None):
    """
    Retrieves the contents of the given URL.
    If authentication is required, pass in a username and password.
    """
    req = urllib.request.Request(url)

    if username and password:
        password_mgr = urllib.request.HTTPPasswordMgrWithDefaultRealm()
        password_mgr.add_password(None, url, username, password)
        handler = urllib.request.HTTPBasicAuthHandler(password_mgr)
        opener = urllib.request.build_opener(handler)
        urllib.request.install_opener(opener)

    try:
        response = urllib.request.urlopen(req)
        return response.read().decode('utf-8')
    except urllib.error.URLError as e:
        raise Exception(f"Error retrieving URL: {e}")
