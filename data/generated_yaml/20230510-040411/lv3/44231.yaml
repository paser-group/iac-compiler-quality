
- hosts: all
  gather_facts: no
  tasks:
    - name: Check Python installation on the remote host
      command: python --version
      ignore_errors: yes
      register: python_version_output
    
    - debug: var=python_version_output
    
    - name: Fail if Python is not installed
      fail:
        msg: "Python is not installed on the remote host"
      when: "'Python' not in python_version_output.stderr"
