
---
- name: Test Ansible-Vault Decrypt Bug
  hosts: localhost
  vars:
    # Encrypt a variable containing sensitive information
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              31323334353637386162636465663730656439643038313363323332623131643263336531343736
  tasks:
    - name: Decrypt sensitive data without providing password - should fail
      vars:
          # Try to decrypt the sensitive data without providing the password
          db_password: "{{ password|vault }}"
      debug: var=db_password
