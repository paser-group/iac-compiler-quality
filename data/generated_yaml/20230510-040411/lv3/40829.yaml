
---
- name: Recreate ios_facts tunnel interface MAC address issue
  hosts: localhost
  connection: local
  gather_facts: no

  tasks:
  - name: Configure tunnel interface on loopback0
    ios_config:
      lines:
        - interface Tunnel1
        - ip address 10.0.0.1 255.255.255.0
        - tunnel source Loopback0
        - tunnel destination 192.168.1.1
        - tunnel mode gre
      parents: interface Loopback0

  - name: Gather Facts on Tunnel Interface 1
    ios_facts:
      gather_subset: interfaces
  
  - name: Display MAC Address of Tunnel Interface 1
    debug:
      var: ansible_net_interfaces.Tunnel1.macaddress
