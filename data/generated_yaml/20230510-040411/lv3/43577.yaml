
---

- name: MySQL Table Creation Playbook
  hosts: localhost
  gather_facts: no

  tasks:

  - name: Create Database
    mysql_db:
      name: testdb
      state: present

  - name: Create Table
    mysql_query:
      db: testdb
      state: present
      sql: "CREATE TABLE IF NOT EXISTS test_table (
              id INT NOT NULL AUTO_INCREMENT,
              name VARCHAR(100),
              PRIMARY KEY (id)
            );"

  - name: Test Duplicate Table Creation
    mysql_query:
      db: testdb
      state: present
      sql: "CREATE TABLE IF NOT EXISTS test_table (
              id INT NOT NULL AUTO_INCREMENT,
              name VARCHAR(100),
              PRIMARY KEY (id)
            );"
