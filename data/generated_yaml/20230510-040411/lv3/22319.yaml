
- name: Check EOS connectivity
  hosts: router
  gather_facts: no

  vars:
    command: show interfaces

  tasks:
  - name: Execute command on target device
    eos_command:
      commands: "{{ command }}"
    register: result
    
  - name: Check for error messages or connection issues
    fail:
      msg: "EOS connection error: {{ result.stderr }}"
    when: result.stderr is defined and result.stderr != ''
    
  - name: Print output
    debug:
      var: result.stdout_lines
