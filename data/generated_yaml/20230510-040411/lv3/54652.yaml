
- name: Create an OpenStack server with a specific port
  hosts: localhost
  gather_facts: false
  vars:
    server_name: test-server
    server_image: CentOS
    server_flavor: m1.small
    network_id: 6cb5f1f4-7311-49a6-9d94-432e12db47c1
    port_id: f9c5fe7e-2359-4c20-8087-4f0a83c54cf8
  tasks:
  - name: Create server with specific port
    os_server:
      state: present
      name: "{{ server_name }}"
      image: "{{ server_image }}"
      flavor: "{{ server_flavor }}"
      network: "{{ network_id }}"
      port_id: "{{ port_id }}"
