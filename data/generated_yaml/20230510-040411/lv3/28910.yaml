
---
- hosts: all
  gather_facts: no

  vars:
    password: "{{lookup('env','SUDO_PASSWORD')}}"

  tasks:
    - name: Attempt password authentication
      command: echo {{password}} | sudo -S ls /root
  
    - name: Print successful authentication message
      debug:
        msg: 'Authentication successful with the wrong password!'
