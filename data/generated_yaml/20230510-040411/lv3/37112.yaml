
- name: Creating an EC2 instance
  hosts: all
  gather_facts: False
  vars:
    user_data_script: |
      #!/bin/bash
      echo "Hello, this is user data script"
  tasks:
  - name: Launch EC2 instance with user data
    ec2:
      instance_type: t2.micro
      ami: ami-0c55b159cbfafe1f0
      region: us-west-2
      count: 1
      key_name: keypair
      security_group: webserver
      user_data: "{{ user_data_script }}"
      wait: true
