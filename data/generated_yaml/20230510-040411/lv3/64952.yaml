
---
- name: Testing SSL Support for pycurl
  hosts: localhost

  vars:
    ovirt_version: "4.4"

  tasks:
    - name: Install SSL Support Packages
      become: yes
      apt:
        name:
          - libssl-dev
          - openssl
        state: present

    - name: Try Installing ovirtsdk4 without SSL Support
      become: yes
      pip:
        name:
          - ovirtsdk4=={{ ovirt_version }}
        extra_args: >-
                    --global-option=build_ext
                    --global-option="--without-ssl"
        state: absent
      register: pip_result

    - name: Call Debug Module
      debug:
        var: pip_result
