
---
- name: Test for copy module bug
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Copy a file from source to destination directory
      copy:
        src: "/path/to/source/file"
        dest: "/path/to/destination/file"
      register: result

    - name: Test if path and dest variables have changed
      fail:
        msg: "copy module returned inconsistent value for path and dest variables"
      when: result.path != result.dest
