
---
- hosts: localhost
  vars:
    vault_address: "https://vault.example.com"
    vault_token: "my_vault_token"
    secret_path: "secret/mysecret"

  tasks:
    - name: Retrieve secrets from HashiCorp Vault
      hashi_vault:
        vault_addr: "{{ vault_address }}"
        token: "{{ vault_token }}"
        secret: "{{ secret_path }}"
      register: vault_secret

    - name: Print the retrieved secret value
      debug:
        msg: "The secret value is {{ vault_secret['data']['value'] }}"

