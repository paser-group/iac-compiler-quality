
---
- name: Ansible playbook to recreate ec2_group module errors 
  hosts: localhost
  connection: local 
  gather_facts: no

  vars:
    existing_group: "test_group"

  tasks:
    - name: create an existing group
      local_action:
        module: ec2_group
        name: "{{ existing_group }}"
        region: us-west-2
        description: "Test group"
        state: present

    - name: attempt to create the existing group again
      local_action:
        module: ec2_group
        name: "{{ existing_group }}"
        region: us-west-2
        description: "Test group"
        state: present
      register: result

    - name: debug the error
      debug:
        msg: "{{ result }}"
