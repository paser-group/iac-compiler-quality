
---
- hosts: localhost
  gather_facts: false
  vars:
    aws_access_key: "{{ lookup('env','AWS_ACCESS_KEY') }}"
    aws_secret_key: "{{ lookup('env','AWS_SECRET_KEY') }}"
    region: "{{ lookup('env','AWS_REGION') }}"
  tasks:
    - name: Gather facts about Auto Scaling Groups
      ec2_asg_facts:
        region: "{{ region }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        policy_names: 
            - "AutoScalingReadOnly"
