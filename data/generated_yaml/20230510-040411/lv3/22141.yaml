
---
- name: Attempt to execute a command with denied access
  hosts: all
  become: yes
  tasks:
  - name: Execute a command as root
    command: whoami
    register: result
    ignore_errors: yes

  - name: Deny access to a command
    file:
      path: /bin/ls
      owner: root
      group: root
      mode: 550

  - name: Try executing a denied command
    command: /bin/ls
    register: denied_result
    ignore_errors: yes

  - name: Output result
    debug:
      var: denied_result
