
---
- name: Recreate ios_* paramiko connection issues
  hosts: ios_devices
  gather_facts: no
  connection: local

  vars:
    ios_username: "user"
    ios_password: "password"

  tasks:
    - name: Connect to IOS device using ios_* modules with paramiko backend
      ios_command:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ios_username }}"
          password: "{{ ios_password }}"
          transport: paramiko
        commands:
          - show version
      register: ios_output

    - name: Print ios_* command output
      debug:
        msg: "{{ ios_output.stdout }}"
