yaml
---
- name: Playbook to test gcp_compute_instance module
  hosts: localhost
  connection: local
  gather_facts: no
  vars:
    project_id: "<insert_project_id>"
    auth_kind: serviceaccount
    service_account_file_location: "<insert_service_account_file_location>"
    disk_image: "<insert_disk_image>"
    network_interface: "<insert_network_interface>"
  tasks:
    - name: Create a Virtual Machine
      gcp_compute_instance:
        name: test-instance
        zone: us-central1-a
        machine_type: n1-standard-1
        network_interfaces:
          - network: "{{ network_interface }}"
            access_configs:
              - name: External NAT
                type: ONE_TO_ONE_NAT
        service_account_contents: "<insert_service_account_contents>"
        disk_image: "{{ disk_image }}"
        project_id: "{{ project_id }}"
        auth_kind: "{{ auth_kind }}"
        service_account_file: "{{ service_account_file_location }}"
      register: instance
