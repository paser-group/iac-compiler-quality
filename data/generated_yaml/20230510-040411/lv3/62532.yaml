
---
- name: Exposing vulnerabilities in gcp_container_node_pool
  hosts: localhost
  gather_facts: no
  
  vars:
    project_id: "my-project-id"
    cluster_id: "my-cluster-id"
    node_pool_name: "my-pool-name"
  
  tasks:
  - name: Create a node pool in existing cluster
    gcp_container_node_pool:
      name: "{{ node_pool_name }}"
      location: "invalid-location"
      initial_node_count: 1
      cluster_id: "{{ cluster_id }}"
      project_id: "{{ project_id }}"
      auth_kind: serviceaccount
      service_account_file: "{{ lookup('env','GOOGLE_APPLICATION_CREDENTIALS') }}"
    register: result
  
  - name: Print the result
    debug:
      var: result
