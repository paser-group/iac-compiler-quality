
---
- name: Create symlink and file
  hosts: all

  tasks:
  - name: Create file
    file:
      path: /tmp/ansible_symlink_test.txt
      state: touch
      mode: '0644'
  - name: Create symlink
    file:
      src: /tmp/ansible_symlink_test.txt
      dest: /tmp/ansible_symlink_test_link
      state: link
  - name: Verify symlink
    assert:
      that:
      - "'/tmp/ansible_symlink_test.txt' is symlink to '/tmp/ansible_symlink_test_link'"
