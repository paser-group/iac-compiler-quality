
- name: Create and manage CloudWatch event rules
  hosts: localhost
  become: true
  tasks:
    - name: Create a new CloudWatch event rule
      cloudwatchevent_rule:
        name: "my-rule"
        description: "This rule triggers an action when a certain condition is met"
        state: present
        schedule_expression: "rate(5 minutes)"
        targets:
          - id: "MyLambdaFunction"
            arn: "arn:aws:lambda:us-west-2:123456789012:function:my-lambda-function"
      register: result

    - name: Print the result of the cloudwatchevent_rule task
      debug:
        var: result
