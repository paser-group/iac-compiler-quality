
---
- name: macOS Environment Setup with Ansible 2.4
  hosts: localhost
  gather_facts: false
  vars:
    ansible_python_interpreter: /usr/bin/python3
  
  tasks:
  
  - name: Ensure Ansible 2.4 is installed
    macports:
      name: ansible24
      state: installed
      update: yes
      
  - name: Verify Ansible Version on macOS
    shell: ansible --version
    register: output
    changed_when: false
    failed_when: false
    
  - name: Confirm Ansible installation and Version on macOS
    debug:
      var: output.stdout_lines
      
  - name: Execute set of tasks to test Ansible 2.4 on macOS
    shell: python -c "import os; os.system('ansible-playbook -i inventory main.yml')"
    args:
      chdir: /path/to/playbook-directory
