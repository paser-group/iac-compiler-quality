
- name: Test playbook for nxos_reboot module
  hosts: network_device
  connection: network_cli
  gather_facts: no

  tasks:
    - name: Reboot network device using nxapi protocol
      nxos_reboot:
        provider: "{{ nxos_provider }}"
        method: "nxapi"
      register: output_nxapi
      ignore_errors: yes

    - name: Debug nxapi output
      debug:
        var: output_nxapi
      when: output_nxapi is not success

    - name: Reboot network device using cli protocol
      nxos_reboot:
        provider: "{{ nxos_provider }}"
        method: "cli"
      register: output_cli
      ignore_errors: yes
  
    - name: Debug cli output
      debug:
        var: output_cli
      when: output_cli is not success
