
---
- name: Test cache plugin
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Configure the cache plugin
    ansible.builtin.file:
      path: /etc/ansible/facts.d
      state: directory

  - name: Run a command and cache the result
    command: date
    register: result
    cache:
      plugin: jsonfile
      path: /tmp/test_cache_dir
