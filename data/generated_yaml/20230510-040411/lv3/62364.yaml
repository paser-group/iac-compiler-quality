
- name: Recreate os_port_facts module issue
  hosts: localhost
  gather_facts: false

  vars:
    fixed_ips:
      - subnet_id: "subnet-123456789"
        ip_address: "10.0.0.5"

    filters:
      - "fixed_ips.ip_address"

  tasks:
    - name: Collect port facts
      os_port_facts:
        creds: "{{ creds }}"
        filters: "{{ filters }}"
      register: port_facts

    - debug:
        var: port_facts
