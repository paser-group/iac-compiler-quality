
- name: Create Cloudwatch Logs Log Group
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create log group with retention
    cloudwatchlogs_log_group:
      name: "{{ my_log_group_name }}"
      retentionInDays: "{{ my_retention_days }}"
      state: present
  
  - name: Retrieve log group with retention
    cloudwatchlogs_log_group_facts:
      name: "{{ my_log_group_name }}"
    register: log_group

  - name: Check if retention is correct
    debug: 
      var: log_group.log_groups[0].retentionInDays
