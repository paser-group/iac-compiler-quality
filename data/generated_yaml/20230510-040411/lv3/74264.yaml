
- hosts: localhost
  vars:
    vault_file: ""
  tasks:
  - name: Create a vault without a filename
    ansible.builtin.command: /usr/bin/ansible-vault create {{ vault_file }}
    args:
      warn: no
    register: create_vault
    ignore_errors: yes

  - name: Display error message if too few arguments are provided
    ansible.builtin.fail:
      msg: "Too few arguments. Please input a valid file name!"
    when: create_vault.rc != 0 and create_vault.stderr.find('no such option') == -1 and create_vault.stderr.find('too few arguments') != -1
