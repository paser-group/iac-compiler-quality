
# Ansible Playbook to trigger selective callback failure

- hosts: all
  gather_facts: no

  vars:
    test_loop: ["value1", "value2", "value3"]
    failed_item: "value2"

  tasks:
    - name: Loop through test_loop variable
      command: echo "{{ item }}"
      loop: "{{ test_loop }}"

      register: result
      failed_when: item == failed_item

    - name: Print results
      debug:
        msg: "{{ result }}"
