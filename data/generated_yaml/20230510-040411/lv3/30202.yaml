
---
 - name: Multiple Default Groups Playbook
   hosts: localhost
   vars:
     default_group_1: "group1"
     default_group_2: "group2"
   tasks:
     - name: Create Multiple Default Groups Using ec2_group module
       ec2_group:
         name: "{{ item }}"
         description: "Default Group {{ item }}"
         region: us-east-1
         vpc_id: "vpc-1234567"
         rules:
           -
             proto: tcp
             from_port: 22
             to_port: 22
             cidr_ip: 0.0.0.0/0
         state: present
         profile: default
       with_items:
         - "{{ default_group_1 }}"
         - "{{ default_group_2 }}"
         - "default"
       register: result

     - name: Display the Result
       debug:
         var: result
