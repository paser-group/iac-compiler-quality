
- name: GCP Compute Resource Management
  hosts: localhost
  gather_facts: no
  vars:
    project_id: my-project-id
    credential_file: /path/to/credential-file.json

  tasks:
  - name: Create a GCP Compute Instance
    gcp_compute_instance:
      zone: us-central1-a
      name: my-instance
      machine_type: n1-standard-1
      disk_size_gb: 50
      source_image: projects/debian-cloud/global/images/family/debian-9
      project: "{{ project_id }}"
      auth_kind: serviceaccount
      service_account_file: "{{ credential_file }}"
    register: instance

  - name: Show GCP Compute Instance Output
    debug:
      var: instance

  - name: Output JSON Data
    copy:
      content: "{{ instance | to_json }}"
      dest: "/tmp/gcp-compute-output.json"
