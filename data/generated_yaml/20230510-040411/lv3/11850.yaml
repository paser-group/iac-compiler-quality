
- name: Test Shell Module with Incorrect Error Code
  hosts: target_host
  gather_facts: no
  tasks:
    - name: Execute Shell Command
      shell: "{{ shell_command }}"
      register: shell_output
      ignore_errors: True

    - name: Check for Expected Error Code
      assert:
        that: shell_output.rc == expected_error_code
