
- name: Test Playbook for winrm/connector issue
  hosts: windows_machines
  gather_facts: no
  tasks:
    - name: Test connection with winrm/connector
      win_ping:
      register: winrm_status

    - name: Print winrm connection status
      debug:
        var: winrm_status

    - name: Create new user
      win_user:
        name: "{{ 'a' | random_string(5) }}"
        password: "{{ 'b' | random_string(5) }}"
        state: present
      register: user_status
      
    - name: Print new user creation status
      debug:
        var: user_status
