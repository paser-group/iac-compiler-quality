
---
- name: ios_config idempotency check
  hosts: cisco_ios
  gather_facts: no
  connection: network_cli

  tasks:
    - name: configure interface GigabitEthernet1/0/1
      ios_config:
        lines:
          - "interface GigabitEthernet1/0/1"
          - "ip address 192.168.1.1 255.255.255.0"
          - "description test interface"
      register: output
      become: yes

    - name: check if changes were made
      debug:
        var: output.changed
