
---
- hosts: all
  become: true
  vars:
    user: test_user
    ssh_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDPicbbFnH3PfLhT/nkwsF8M5CxnZ7jmYoJzQ0D+EqfbsbQj7L/0zy4hFj8H1QfR5Jdfz7bG9ChgPuVfW23HvG5WlNnnrWdpK9pTkA+I3eSDePzSx3TCcfa9EgCF5KwRZoxyXyHG+bL4nKYp6QaexK7W5h7HPRYqM1oRQlR/hztIPMEDgIZVzpG98gY9Cc1ajy8zCUfL8HlpckMPNtUii6Jo22W8H/3d1OqrVv+o3mRMCAty7pvklPLH/2CZaA4OugPc5YMvgwDU4wLpPQlrpFeswJt4Q5yEafIqMvtZvBq8cpf+MQm3T8Fse0t5VksX84VcNxB6uJqVmml5"
    path: "/home/{{ user }}/.ssh/authorized_keys"
  tasks:
    - name: Add SSH key for user
      authorized_key:
        user: "{{ user }}"
        state: present
        key: "{{ ssh_key }}"
        path: "{{ path }}"
