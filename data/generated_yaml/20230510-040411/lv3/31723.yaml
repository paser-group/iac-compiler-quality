
---
- name: Create a Jenkins job
  hosts: localhost
  vars:
    script_content: |
      import json
      data = {'name': 'John', 'age': 30}
      json_data = json.dumps(data)
      print(json_data)
      # The output of this script is in the form of bytes and not a string
      
  tasks:
    - name: Execute the Jenkins script
      jenkins_script:
        script: "{{ script_content }}"
        # Passing the output of script_content as bytes instead of a string
        script_vars: {'output': b'{{ output }}'}
      register: result
      
    - debug:
        var: result
