
- name: Example playbook to expose Ansible compiler bug
  hosts: localhost
  
  tasks:
  - name: Define task with task_from variable
    file:
      dest: "{{ playbook_dir }}/temp/file.txt"
      state: touch
    vars:
      task_source: "{{ playbook_dir }}/temp/task.yml"
    delegate_to: localhost_temp
    run_once: true

  - name: Include role that references task_from variable
    include_role:
      name: myrole
      tasks_from: "{{ task_source }}"
