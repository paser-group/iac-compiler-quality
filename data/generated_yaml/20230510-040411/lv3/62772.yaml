
- name: Gather VMware host information
  hosts: all
  vars:
    gather_vmkernel_info: true
  tasks:

  - name: Gather VMKernel interfaces on VMware hosts
    vmware_vmkernel_facts:
      hostname: "{{ inventory_hostname }}"
      username: "{{ ansible_user }}"
      password: "{{ ansible_password }}"
      validate_certs: no
    register: vmkernel_interface_info

  - name: Gather network info from the VMware host
    vmware_host_network_info:
      hostname: "{{ inventory_hostname }}"
      username: "{{ ansible_user }}"
      password: "{{ ansible_password }}"
      validate_certs: no
    register: vm_network_info

  - name: Gather DNS info from the VMware host
    vmware_host_dns_info:
      hostname: "{{ inventory_hostname }}"
      username: "{{ ansible_user }}"
      password: "{{ ansible_password }}"
      validate_certs: no
    register: vm_dns_info
      
  - name: Gather Host Facts from the VMware host
    vmware_host_facts:
      hostname: "{{ inventory_hostname }}"
      username: "{{ ansible_user }}"
      password: "{{ ansible_password }}"
      validate_certs: no
    register: vm_host_facts
