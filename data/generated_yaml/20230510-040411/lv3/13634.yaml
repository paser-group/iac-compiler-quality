
- name: Example Playbook to replicate 'group_by creates incorrect groups' issue
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Create sample data
      set_fact:
        student_data:
          - name: Alice
            marks: 75
          - name: Bob
            marks: 85
          - name: Charlie
            marks: 75

    - name: Group by marks
      group_by:
        key: '{{ item.marks }}'
        name: '{{ item.name }}'
      with_items: "{{ student_data }}"

    - name: Display groups
      debug:
        msg: "{{ group_names }}"
