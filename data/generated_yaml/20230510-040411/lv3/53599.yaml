
- hosts: localhost
  gather_facts: no
  
  vars:
    instance_type: t2.micro
    image: ami-0c55b159cbfafe1f0
    region: us-east-1
    keypair: my_key
    sec_group: my_security_group
    
  tasks:
    - name: Create EC2 instance
      ec2:
        key_name: "{{ keypair }}"
        instance_type: "{{ instance_type }}"
        image: "{{ image }}"
        region: "{{ region }}"
        group: "{{ sec_group }}"
        count_tag:
          Name: "test-instance"
        instance_tags:
          Name: "test-instance"
        network_interfaces:
          - device_index: 0
            subnet_id: "invalid_subnet_id"
            mac_address: "invalid_mac_address"
      register: ec2

    - debug:
        var: ec2
