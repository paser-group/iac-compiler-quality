
- hosts: all
  become: true
  become_user: root
  tasks:
  - name: Create a directory with root ownership
    file:
      path: "/tmp/.ansible"
      state: directory
      owner: root
      group: root
      mode: '0755'
    delegate_to: localhost

  - name: Ensure correct ownership of /tmp/.ansible
    file:
      path: "/tmp/.ansible"
      state: directory
      owner: "{{ ansible_ssh_user }}"
      group: "{{ ansible_ssh_user }}"
      mode: '0755'
