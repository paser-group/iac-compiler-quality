
- name: Test faulty ios_command output
  hosts: <target device hostname/IP>
  gather_facts: no
  connection: local
  tasks:
  - name: Gather hostname
    ios_command:
      commands:
      - show hostname
    register: output1
  - debug: var=output1

  - name: Gather interfaces
    ios_command:
      commands:
      - show interfaces
      wait_for: result[0] contains "Ethernet0/1"
    register: output2
  - debug: var=output2

  - name: Gather OSPF database
    ios_command:
      commands:
      - show ip ospf database
    register: output3
  - debug: var=output3
