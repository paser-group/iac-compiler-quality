yaml
---
- name: Create Services with Common Prefix
  hosts: localhost
  become: true
  vars:
      service1_name: "myapp_service1"
      service2_name: "myapp_service2"
      image_name: "myapp_image"
  tasks:
  - name: Create Service1
    docker_swarm_service:
      name: "{{ service1_name }}"
      image: "{{ image_name }}"
      state: present

  - name: Create Service2
    docker_swarm_service:
      name: "{{ service2_name }}"
      image: "{{ image_name }}"
      state: present
      
  - name: Check if both services are detected
    assert:
      that:
          - service1_name in ansible_swarm_services.service_names
          - service2_name in ansible_swarm_services.service_names
