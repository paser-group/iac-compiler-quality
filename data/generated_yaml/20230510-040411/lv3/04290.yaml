
---
- name: Create a new MySQL Database User and Assign Privileges
  hosts: database_server
  vars:
    database_user: "new_user"
    database_password: "password"
    database: "sample_database"

  tasks:
    - name: Create new MySQL User
      mysql_user:
        name: "{{ database_user }}"
        password: "{{ database_password }}"
        state: present
	      host: "%"

    - name: Add privileges to the user for the sample database
      mysql_user:
        name: "{{ database_user }}"
        priv: "{{ database }}.*: ALL"
	      state: present
	      append_privs: yes
	      host: "%"
