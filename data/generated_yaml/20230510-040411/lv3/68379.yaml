
---
- name: Pull docker image with incorrect credentials
  hosts: localhost
  become: yes

  vars:
    docker_username: "incorrect-username"
    docker_password: "incorrect-password"
    docker_image_name: "nginx:latest"

  tasks:
    - name: Log in to Docker registry
      docker_login:
        username: "{{ docker_username }}"
        password: "{{ docker_password }}"

    - name: Pull Docker image
      docker_image:
        name: "{{ docker_image_name }}"
        source: pull

  handlers:
    - name: Remove Docker image
      docker_image:
        name: "{{ docker_image_name }}"
        state: absent
