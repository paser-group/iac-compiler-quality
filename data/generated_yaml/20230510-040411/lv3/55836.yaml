
---
- name: Create Azure Web App
  hosts: localhost
  connection: local
  vars:
    resource_group_name: my-rg
    web_app_name: my-web-app
    location: westus
  tasks:
    - name: "Create Resource Group"
      azure_rm_resourcegroup:
        name: "{{ resource_group_name }}"
        location: "{{ location }}"

    - name: "Create Web App"
      azure_rm_webapp:
        resource_group: "{{ resource_group_name }}"
        name: "{{ web_app_name }}"
        location: "{{ location }}"
        plan:
            publisher: Microsoft
            product: {{ product }}
            name: {{ plan_name }}
        state: "{{ state }}"

    - name: Start the Web App
      azure_rm_webapp:
        resource_group: "{{ resource_group_name }}"
        name: "{{ web_app_name }}"
        state: running
