
- name: Export VM as OVF file
  hosts: localhost
  vars:
    data_string: "this is some VM data"
    byte_string: "{{ data_string.encode() }}"
  tasks:
    - name: Export OVF
      vmware_export_ovf:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        datacenter: "{{ datacenter_name }}"
        datastore: "{{ datastore_name }}"
        vm_id: "{{ vm_id }}"
        ovf_path: "/tmp/exported_vm.ovf"
        power_off: yes
        export_option: no_manifest
        disk_type: thin
        byte_string: "{{ byte_string }}"
