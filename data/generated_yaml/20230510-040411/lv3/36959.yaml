
- hosts: local
  gather_facts: no

  tasks:
    - name: Create CloudFront distribution
      cloudfront_distribution:
        origin: "my-website.s3.amazonaws.com"
        state: present
        comment: "Distribution for my-website"
        enabled: yes
        price_class: PriceClass_200
      register: cf_result 

    - name: Update geolocation of CloudFront distribution
      cloudfront_distribution:
        id: "{{ cf_result['distribution']['id'] }}"
        state: present
        georestriction: "{{ item }}"
      with_items: 
        - whitelist
        - blacklist      
