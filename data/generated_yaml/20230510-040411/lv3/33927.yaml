
---
- name: Test Target Group Not Found Error
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create EC2 instance with invalid target group
      ec2:
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        region: "{{ region }}"
        instance_type: "{{ instance_type }}"
        image: "{{ image }}"
        key_name: "{{ key_name }}"
        count: 1
        vpc_subnet_id: "{{ vpc_subnet_id }}"
        group_id: "{{ group_id }}"
        assign_public_ip: "{{ assign_public_ip }}"
        monitoring: no
        instance_tags: '{"Name":"test-instance"}'
        target_group_arns:
          - "arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/invalid-target-group/abcdef0123456789"
        validate_certs: no
      register: ec2_instance

    - name: Print EC2 instance
      debug:
        var: ec2_instance
