
- name: Install Jenkins Plugins
  hosts: all
  vars:
    plugin_name: "non_existing_plugin"
    plugin_url: "http://www.google.com"
  tasks:
    - name: Install Plugin
      jenkins_plugin:
        name: "{{ plugin_name }}"
        url: "{{ plugin_url }}"
      register: plugin_install_state
    - name: Check Installation Status
      fail:
        msg: "Plugin installation failed!"
      when: plugin_install_state is failed
    - name: Confirm Installation
      debug:
        msg: "Plugin installed successfully!"
      when: plugin_install_state is success
    - name: Fuzz Test Incorrect 'changed' Value 
      debug: 
        msg: "Changed value: {{ plugin_install_state.changed }}"
