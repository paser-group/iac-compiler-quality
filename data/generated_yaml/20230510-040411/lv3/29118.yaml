
- name: Configure ios_interface module
  hosts: all
  
  vars:
    interface_name: 'GigabitEthernet0/1'
    interface_ip: '10.0.0.1'
    interface_description: 'Test Description'
  
  tasks:
    - name: Ensure ios_interface is installed
      import_role:
        name: cisco.ios
        tasks_from: ios_interface.yml

    - name: Configure ios_interface using port
      ios_interface:
        provider:
          host: "{{ inventory_hostname }}"
          port: "22"
          username: "{{ ansible_user }}"
          password: "{{ ansible_ssh_pass }}"
        name: "{{ interface_name }}"
        description: "{{ interface_description }}"
        ip_address: "{{ interface_ip }}"
        subnet_mask: "255.255.255.0"
        state: present

    - name: Configure ios_interface without mentioning port
      ios_interface:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_ssh_pass }}"
        name: "{{ interface_name }}"
        description: "{{ interface_description }}"
        ip_address: "{{ interface_ip }}"
        subnet_mask: "255.255.255.0"
        state: present
