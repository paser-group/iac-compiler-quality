
- name: Create Router with os_router
  hosts: localhost
  tasks:
     - name: Create a new router
       os_router:
         state: present
         name: "test_router"
       register: new_router

     - name: Attach router to external network
       os_router_gateway:
         router: "{{ new_router.id }}"
         network: "external"
         
     - name: Add a subnet to the router
       os_router_interface:
         router: "{{ new_router.id }}"
         subnet: "{{ subnet_id }}"
