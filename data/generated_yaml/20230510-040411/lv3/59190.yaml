
---
- name: Test vmware_guest module
  hosts: localhost
  gather_facts: no
  vars:
    num_cpus: 2
    mem_size_mb: 2048
    mem_reservation: "invalid_value"
  tasks:
  - name: Create a guest VM
    vmware_guest:
      name: test_vm
      state: poweredon
      hardware:
        num_cpus: "{{ num_cpus }}"
        memory_mb: "{{ mem_size_mb }}"
        memory_reservation: "{{ mem_reservation }}"
