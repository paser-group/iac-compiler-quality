
---
- name: Test playbook
  hosts: localhost
  gather_facts: no

  tasks:

    - name: Task 1 - local_action
      local_action:
        module: debug
        msg: "Executing the local action Task 1"

    - name: Task 2 - add_host
      add_host:
        name: test_host
        ansible_connection: local

    - name: Task 3 - Play to localhost
      hosts: localhost
      gather_facts: yes
      roles:
        - { role: my_app }

    - name: Task 4 - Debug message
      debug:
        var: ansible_host

