
---
- name: "Assume role error for boto.sts module"
  hosts: localhost
  become: false
  gather_facts: no

  tasks:
  - name: "set sts assume role parameters"
    set_fact:
      role_arn: "arn:aws:iam::<account-id>:role/<role-name>"
      role_session_name: "AssumedRoleSession1"
      region: "invalid_region"
  - name: "assume role with invalid region"
    sts_assume_role:
      role_arn: "{{ role_arn }}"
      role_session_name: "{{ role_session_name }}"
      region: "{{ region }}"
    register: result
    ignore_errors: yes

  - name: "debug sts assume role output"
    debug:
      var: result
