
---
- name: Ansible playbook to replicate AWS route53 connection issue
  hosts: localhost
  vars:
    aws_access_key: "<access key>"
    aws_secret_key: "<secret key>"
    zone_id: "<zone id>"
 
  tasks:
    - name: Create DNS record in Route53
      route53:
        state: present
        zone: "{{ zone_id }}"
        record: "{{ item.record }}"
        type: "{{ item.type }}"
        ttl: "{{ item.ttl }}"
        value: "{{ item.value }}"
      loop:
        - { record: 'www.example.com', type: 'A', ttl: '3600', value: '1.2.3.4' }
      register: result
