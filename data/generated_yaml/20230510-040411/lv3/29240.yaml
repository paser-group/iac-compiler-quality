
---
- hosts: localhost
  become: yes
  tasks:
    - name: Install npm package
      npm:
        name: package_name
        version: wrong_version

    - name: Check if package is installed
      shell: npm list package_name | grep package_name@correct_version
      register: result

    - name: Fail if package is not installed
      fail:
        msg: "Package is not installed or is not the correct version"
      when: result.rc != 0

    - name: Display success message
      debug:
        msg: "Package is installed and is the correct version"
