
- name: Recreate Ansible tower_role module field not found error
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Configure Ansible Tower Role
    tower_role:
      name: "{{ role_name }}"
      description: "{{ description }}"
      organizations:
      - "{{ org_name }}"
      project: "{{ project_name }}"
      inputs: "{{ inputs }}"

- name: Example tower_role specification file
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a YAML specification file with an additional field
    copy:
      dest: /tmp/tower_role_spec.yml
      content: |
        ---
        name: test_role
        description: Example role with an additional field
        organizations:
        - example_organization
        project: example_project
        inputs:
          - arg1=value1
          - arg2=value2
          - new_field: new_value
          
- name: Execute tower_role module with the generated specification file
  hosts: localhost
  gather_facts: no
  vars:
    role_name: test_role
    description: Example role with an additional field
    org_name: example_organization
    project_name: example_project
    inputs: 
      - arg1=value1
      - arg2=value2  
  tasks:
  - name: Execute the Ansible tower_role module
    tower_role:
      name: "{{ role_name }}"
      description: "{{ description }}"
      organizations:
      - "{{ org_name }}"
      project: "{{ project_name }}"
      inputs: "{{ lookup('file', '/tmp/tower_role_spec.yml') }}"
