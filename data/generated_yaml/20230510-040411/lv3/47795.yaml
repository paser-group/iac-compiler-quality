
---
- hosts: localhost
  gather_facts: no

  vars:
    my_dict:
      date_key: "{{ lookup('pipe', 'date +%Y-%m-%d') }}"

  tasks:
    - debug:
        var: my_dict

    - set_fact:
        my_dict_string: "{{ my_dict | to_nice_json }}"

    - debug:
        var: my_dict_string
