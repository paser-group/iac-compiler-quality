
- name: Testing environment variable lookup
  hosts: localhost
  gather_facts: no
  vars:
    my_var: "{{ lookup('env', 'MY_VAR', default=None) }}"
  tasks:
    - name: Print environment variable value
      run: python -c "import os; print(os.environ.get('MY_VAR'))"
    - name: Assign default value if not present
      set_fact:
        my_var: "default value"
      when: my_var is none
