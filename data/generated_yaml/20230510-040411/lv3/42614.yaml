yaml
---
- name: Instantiate VM with IPv6
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create VM with IPv6
      vmware_guest:
        hostname: "{{ vmware_hostname }}"
        username: "{{ vmware_username }}"
        password: "{{ vmware_password }}"
        datacenter: "{{ vmware_datacenter }}"
        cluster: "{{ vmware_cluster }}"
        name: "{{ vm_name }}"
        state: present
        hardware:
          memory_mb: "{{ vm_memory }}"
          num_cpus: "{{ vm_cpus }}"
        disk:
          size_gb: "{{ vm_storage }}"
          scsi: paravirtual
          autoselect_datastore: yes
        networks:
          - name: "{{ vm_network }}"
            ip: "{{ ipv6 }}"
            netmask: "{{ vm_subnet_mask }}"
            gateway: "{{ vm_gateway }}"
            dns_servers: "{{ vm_dns_servers }}"
      register: vm

    - name: Fail for testing purposes
      fail:
        msg: "Testing syntax error message"
