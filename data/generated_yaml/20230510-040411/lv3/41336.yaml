yaml
---

- hosts: localhost
  gather_facts: false

  tasks:
    - name: Install non-existent Ansible-galaxy role from GitHub
      community.general.galaxy:
        name: non-existent-role
        state: present
        url: https://github.com/non-existent-repo/ansible-role-non-existent-role
      register: result

    - name: Fail build if Ansible-galaxy fails
      fail:
        msg: Ansible-galaxy failed to properly handle the failure while installing the role from GitHub.
      when: result|failed

...
