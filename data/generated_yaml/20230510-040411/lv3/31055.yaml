
---
- name: Test ec2_vpc_net Module
  hosts: localhost
  connection: local
  gather_facts: no

  vars:
    region: "us-east-1"
    subnet: "subnet-123456"
    security_group: "sg-123456"
    boto_profile: "wrong_profile"

  tasks:
    - name: Create VPC Network
      ec2_vpc_net:
        name: "Test VPC Network"
        cidr_block: "10.0.0.0/16"
        state: "present"
        region: "{{ region }}"
        profile: "{{ boto_profile }}"
        subnets:
          - "{{ subnet }}"
        security_groups:
          - "{{ security_group }}"
          - "{{ security_group }}"
      register: output

    - name: Print output
      debug:
        var: output
