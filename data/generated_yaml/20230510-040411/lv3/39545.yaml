
- name: Provision EC2 instance
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create EC2 instance
      ec2:
        instance_type: t2.micro
        image: ami-0c94855ba95c71c99
        wait: true
        count: 1
        region: us-west-2
        key_name: my-key

    - name: Configure hostname with Jinja2 template
      ec2_hostname:
        instance_id: "{{ ec2.instance_ids[0] }}"
        hostname: "{{ error_template }}"
        region: us-west-2
