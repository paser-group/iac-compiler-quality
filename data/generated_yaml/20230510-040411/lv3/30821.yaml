
- name: Unzip an archive and copy a file
  hosts: localhost
  gather_facts: false

  vars:
      filename: 'test.zip'
      archive_path: '/path/to/archive/folder'
      dest_path: '/path/to/copy/files'

  tasks:

  - name: Extracting a file from an archive
    unarchive:
      src: "{{ archive_path }}" + "{{ filename }}"
      dest: '{{ dest_path }}'
      copy: yes
      extract: yes
      extra_opts: ["-C", "{{ dest_path }}"]

  - name: Copy contents of extracted file to a new location
    copy:
      src: "{{ dest_path }}" + "{{ filename }}"
      dest: "{{ dest_path }}" + "test.txt"
      mode: 444

  - name: Check the copied file contents
    shell:
      cmd: cat "{{ dest_path }}" + "test.txt"
