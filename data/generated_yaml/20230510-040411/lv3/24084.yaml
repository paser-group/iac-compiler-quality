
- name: Deploy the virtual machine in Azure
  hosts: localhost
  become: no
  gather_facts: no
  vars:
    rg_name: myResourceGroup
    location: East US
  tasks:
  - name: Create a deployment
    azure_rm_deployment:
      state: present
      deployment_name: myDeployment
      resource_group_name: "{{ rg_name }}"
      location: "{{ location }}"
      template_link_uri: "https://mytemplates.blob.core.windows.net/templates/template.json"
      template_link_content_version: "1.0.0.0"
    register: deployment_output
  - name: Debug the error
    debug:
      var: deployment_output
