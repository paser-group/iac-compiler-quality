yaml
---
- name: test resolve_image functionality with private registry
  hosts: localhost
  vars:
    image_name: "myprivateregistry.com/myimage"
  tasks:
    - name: create docker swarm service
      docker_swarm_service:
        name: testservice
        image: "{{ image_name }}"
        state: present
        replicas: 1
      register: svc_details

    - name: debug task
      debug:
        var: svc_details.stdout_lines
