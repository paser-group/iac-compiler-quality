yaml
---
- name: Test shell module with delegate_to
  hosts: localhost
  gather_facts: no
  vars:
    remote_hosts:
      - 192.168.0.10
      - 192.168.0.20
  tasks:
    - name: Run command on remote host
      shell: "echo 'test command'"
      delegate_to: "{{ item }}"
      with_items: "{{ remote_hosts }}"
