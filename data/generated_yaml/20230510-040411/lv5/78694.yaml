
- name: Test command module error handling
  hosts: all
  tasks:
    - name: Execute command that fails
      command: /bin/false
      register: cmd_output
    - name: Check for error message
      assert:
        that: cmd_output.stdout.find('command not found') != -1
