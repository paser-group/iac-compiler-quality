
---
- name: Testing multiple inventory files
  hosts: localhost
  vars:
    common_var: "common"
  tasks:
  - name: Include inventory file 1
    include_vars:
      file: "inventory1.yml"
      name: "inventory1"
  - name: Include inventory file 2
    include_vars:
      file: "inventory2.yml"
      name: "inventory2"
  - name: Debug conflicting variable
    debug:
      var: conflicting_var
    vars:
      conflicting_var: "{{ inventory1.inventory_var | default(common_var) }}"
  - name: Debug inventory1 variable
    debug:
      var: inventory1.inventory_var
  - name: Debug inventory2 variable
    debug:
      var: inventory2.inventory_var
