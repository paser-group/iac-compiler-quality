
---
- name: Test Win_copy
  hosts: localhost
  vars:
    filename: "testfile.txt"
    dest_list:
      - "c:\\"
      - "c:\\temp"
      - "c:\\folder\\"
      - "c:\\folder\\subfolder"
  tasks:
    - name: Playbook start
      debug: msg="Starting the Playbook: {{ playbook_name }}"
      
    - name: Creating test file
      file:
        path: "{{ filename }}"
        state: touch
        
    - name: Test different values for dest
      win_copy:
        src: "{{ filename }}"
        dest: "{{ item }}"
      with_items: "{{ dest_list }}"
      ignore_errors: yes
      register: result
      
    - name: Output errors
      debug: var=result.msg
      when: result is failed
      
    - name: Playbook end
      debug: msg="Ending the Playbook: {{ playbook_name }}"
