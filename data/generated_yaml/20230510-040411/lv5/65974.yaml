
---
- hosts: localhost
  gather_facts: False
  vars:
    my_dict: {key1: value1, key2: value2, key1: value3}  # Dictionary with duplicate keys
  tasks:
  - name: Test for duplicate dictionary keys
    assert:
      that:
      - my_dict.items() | list | items2dict == my_dict  # Make sure conversion back to dictionary doesn't throw away key-value pairs
    fail_msg: "Found duplicate key in dictionary!"
