
- name: Include AWS credentials
  include_vars:
    file: /path/to/credentials.yml
    name: credentials

- name: Test AWS credentials using URI
  uri:
    url: https://sts.amazonaws.com/?Action=GetCallerIdentity&Version=2011-06-15
    method: GET
    return_content: yes
    headers:
      Content-Type: application/xml
    validate_certs: yes
    timeout: 10
    status_code: 200
    body_format: xml
    body:
      "<GetCallerIdentityRequest xmlns='https://sts.amazonaws.com/doc/2011-06-15/'/>":
  register: response

- name: Print Boto logs for debugging
  debug:
    var: boto.logs
