
- name: Test Ansible filter 'default' for ansible_port variable
  hosts: localhost
  gather_facts: no

  vars:
    my_port: 1234
  
  tasks:
  - name: Test 'default' filter for 'ansible_port'
    debug:
      var: ansible_port|default(my_port)
      
  - name: Test 'default' filter for 'ansible_port' while connecting to remote machine
    debug:
      msg: "Connecting to remote machine with ansible_port={{ ansible_port|default(my_port) }}"
    delegate_to: localhost
    run_once: true
