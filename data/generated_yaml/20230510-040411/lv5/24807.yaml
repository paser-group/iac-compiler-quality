
- name: Test ec2_asg module
  hosts: localhost 
  tasks:
    - name: Create an Auto Scaling Group
      ec2_asg:
        name: "test-asg"
        launch_config_name: "test-lc"
        availability_zones: "us-east-1"
        min_size: 1
        max_size: 4
        desired_capacity: 2
        load_balancers: "test-lb"
        region: "us-east-1"
      register: asg

    - name: Attempt to add instances to ASG with invalid inputs
      ec2_asg:
        name: "{{ asg.name }}"
        availability_zones: "us-west-2"
        min_size: 4
        max_size: 1
        desired_capacity: 3
        load_balancers: "invalid-lb"
        region: "us-west-2"
      ignore_errors: yes
