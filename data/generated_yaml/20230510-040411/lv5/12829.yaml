
- name: Test illegal variable usage in loops
  hosts: localhost
  vars:
    my_list:
      - illegal_var@

  tasks:
    - name: Iterate over list with illegal var
      loop: "{{ my_list }}"
      debug:
        msg: "{{ item }}"

    - name: Attempt to use illegal var
      debug:
        msg: "{{ illegal_var }}"
