
- name: Test empty list looping bug
  hosts: localhost
  tasks:
    - name: Loop over empty list defined using variable
      vars:
        empty_list: []
      debug:
        msg: "{{ item }}"
      with_items:
        "{{ empty_list }}"

    - name: Loop over empty list defined as a literal value
      debug:
        msg: "{{ item }}"
      with_items:
        "[]"

    - name: Loop over empty list defined by register statement
      shell: echo []
      register: empty_list
      debug:
        msg: "{{ item }}"
      with_items:
        "{{ empty_list.stdout_lines }}"
