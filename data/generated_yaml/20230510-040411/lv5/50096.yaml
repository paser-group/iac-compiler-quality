
- name: Test Ansible MySQL module SSL/TLS configuration
  hosts: localhost
  vars:
    database: test_db
    user: test_user
    password: test_password
    ssl_ca: /path/to/ca.pem
    ssl_cert: /path/to/cert.pem
    ssl_key: /path/to/key.pem
  tasks:
    - name: Create database
      mysql_db:
        name: "{{ database }}"
        state: present
        login_user: "{{ user }}"
        login_password: "{{ password }}"
        ssl_ca: "{{ ssl_ca }}"
        ssl_cert: "{{ ssl_cert }}"
        ssl_key: "{{ ssl_key }}"
    - name: Dump database
      mysql_db:
        name: "{{ database }}"
        state: dump
        login_user: "{{ user }}"
        login_password: "{{ password }}"
        ssl_ca: "{{ ssl_ca }}"
        ssl_cert: "{{ ssl_cert }}"
        ssl_key: "{{ ssl_key }}"
