
- name: Test osx_defaults with different default types
  osx_defaults:
    domain: com.apple.screensaver
    key: idleTime
    type: int
    value: 300
  register: result

- name: Set incorrect data type for the same key
  osx_defaults:
    domain: com.apple.screensaver
    key: idleTime
    value: testvalue
  register: error

- name: Check if error message contains 'Type mismatch'
  assert:
    that:
      - "'Type mismatch' in error.stderr"
      - "'rc=1' in error.stderr"
    success_msg: "Type mismatch error detected successfully"
