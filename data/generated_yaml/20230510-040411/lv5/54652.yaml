
- name: Test Ansible compiler for Idempotency issues with os_server module
  hosts: localhost
  gather_facts: false
  tasks:
  - name: Create server with port-id
    os_server:
      state: present
      name: test_server
      port-id: 12345
  - name: Ensure Idempotency
    os_server:
      state: present
      name: test_server
      port-id: 12345
  - name: Create server with different port-id
    os_server:
      state: present
      name: test_server_different_port
      port-id: 34567
