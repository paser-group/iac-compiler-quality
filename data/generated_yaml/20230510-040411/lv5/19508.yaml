
---
- name: Test Docker container network configurations
  hosts: all
  become: true

  tasks:
    - name: Create Docker container with custom network and default bridge
      docker_container:
        name: container1
        image: nginx:latest
        state: started
        networks:
          - my_custom_network
          - bridge

    - name: Check if container is part of both custom network and default bridge
      command: docker network inspect my_custom_network
      register: network_output
      failed_when: network_output.stdout.find('bridge') == -1
