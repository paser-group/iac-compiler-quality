
- name: Test nxos modules
  hosts: localhost
  vars:
    interface: "Ethernet1/1"
    vlan_id: "100"
    network: "10.10.1.0/24"
  tasks:
    - name: Test nxos_vlan module
      nxos_vlan:
        vlan_id: "{{ vlan_id }}"
      register: result
    - debug: var=result

    - name: Test nxos_interfaces module
      nxos_interfaces:
        interfaces: "{{ interface }}"
        description: "Test interface"
      register: result
    - debug: var=result

    - name: Test nxos_bgp module
      nxos_bgp:
        local_as: 65001
        router_id: "10.10.1.1"
        bgp_neighbors:
          - remote_as: 65000
            remote_ip: "10.10.1.2"
        networks:
          - "{{ network }}"
      register: result
    - debug: var=result
