
- name: Testing file module with symlink error
  hosts: localhost
  gather_facts: no

  tasks:
  
  - name: Create a symlink to a file with blocked permission
    file:
      src: /etc/hosts
      dest: /tmp/hosts_symlink
      state: link
      owner: root
      group: root
      mode: 000

  - name: Create a symlink to an invalid path
    file:
      src: /etc/hosts
      dest: /tmp/random_directory/hosts_symlink
      state: link
      owner: root
      group: root
      mode: 0777

  - name: Create a symlink to a directory with blocked permission
    file:
      src: /var/log/
      dest: /tmp/varlog_symlink
      state: link
      owner: root
      group: root
      mode: 000

  - name: Create a symlink using an invalid user account
    file:
      src: /etc/hosts
      dest: /tmp/hosts_symlink
      state: link
      owner: invalid_user
      group: group_name
      mode: 0777
