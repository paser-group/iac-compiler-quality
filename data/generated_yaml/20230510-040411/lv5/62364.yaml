yaml
- hosts: localhost
  tasks:
    - name: Get port facts
      os_port_facts:
      register: port_facts

    - name: Filter port facts by fixed_ips.ip_address
      set_fact: 
        filtered_facts: "{{ port_facts | json_query(query) }}"
      vars:
        query: "ports[?fixed_ips[?ip_address == '10.0.0.1']]"

    - name: Display filtered port facts
      debug:
        var: filtered_facts
