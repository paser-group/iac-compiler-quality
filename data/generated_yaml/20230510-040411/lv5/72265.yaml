yaml
---

- name: Test SSH connection
  hosts: all
  gather_facts: no

  tasks:

    - name: Test SSH connectivity
      ping:

    - name: Transfer file to remote host
      copy:
        src: /local/path/to/file
        dest: /remote/path/to/file

    - name: Install SSH keys
      authorized_key:
        user: remote_user
        state: present
        key: "{{ lookup('file', '/local/path/to/ssh/key.pub') }}"

    # Insert additional SSH commands here...

...

