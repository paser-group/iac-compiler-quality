
vars:
  INTERPRETER_TYPE: 'python3'
  INTERPRETER_PATH: '/usr/bin/python3'

tasks:
  - name: Test Interpreter Type Template Error 
    command: "ansible-playbook -i inventory --interpreter {{ INTERPRETER_TYPE }} test.yml"
    ignore_errors: true

  - name: Test Interpreter Path Template Error
    command: "ansible-playbook -i inventory --interpreter {{ INTERPRETER_PATH }} test.yml"
    ignore_errors: true

  - name: Test variable interpolation
    shell: "echo 'interpreter type is {{ INTERPRETER_TYPE }}'"

  - name: Test looping
    debug: msg="Loop message {{ item }}"
    loop:
      - 'python3'
      - 'python2'
      - 'python'
      - 'p'
    when: item == INTERPRETER_TYPE
