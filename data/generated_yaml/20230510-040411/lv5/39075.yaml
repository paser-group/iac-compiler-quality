
---
- name: Testing Ansible installation on Ubuntu Bionic
  hosts: localhost
  vars:
    ansible_python_interpreter: /usr/bin/python3
  tasks:
    - name: Install Ansible via pip
      pip:
        name: ansible
        state: latest

    - name: Check the presence of ansible.errors module
      command: python3 -c "import ansible.errors"
      ignore_errors: yes
      register: result

    - name: Print the error if any
      debug:
        var: result.stderr
      when: result.rc != 0
