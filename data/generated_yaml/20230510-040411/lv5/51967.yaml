
- name: Test win_iis_webbinding with different SSL certificates
  hosts: web_servers
  tasks:
    - name: Update default binding SSL cert with test cert
      win_iis_webbinding:
        site: Default Web Site
        action: set
        state: present
        name: "*:80:"
        sslFlags: 0
        certHash: 547e28fedefd6ae55a938ffd5cfb3347a44fb20d
      register: result
      
    - name: Check if SSL cert was correctly updated
      assert:
        that:
        - result.changed == True
        - result.stdout != ''
      failed_when: False
