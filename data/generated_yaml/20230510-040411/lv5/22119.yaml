
- name: Test hashi_vault fatal error
  hosts: localhost
  vars:
    secret_path: "secret/hello-world"
    nonexistent_secret_path: "secret/nonexistent"
  tasks:
    - name: Fetch secret
      hashi_vault:
        path: "{{ secret_path }}"
        register: secret
        ignore_errors: true

    - name: Fetch nonexistent secret (this should cause a fatal error)
      hashi_vault:
        path: "{{ nonexistent_secret_path }}"
      register: nonexistent_secret
