
# Create EC2 Instance
- name: Create EC2 Instance in VPC
  ec2:
    key_name: my_keypair
    instance_type: t2.micro
    image: ami-0c55b159cbfafe1f0
    vpc_subnet_id: subnet-12345678
    private_ip: 10.0.0.10
    assign_public_ip: no
    count: 1
  register: ec2_instance

# Get Public IP
- name: Get Public IP of EC2 Instance
  ec2_instance_info:
    instance_ids:
      - "{{ ec2_instance.instance_ids[0] }}"
  register: ec2_public_ip
