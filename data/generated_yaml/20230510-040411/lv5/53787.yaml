
- name: Test gcpubsub module
  hosts: localhost
  tasks:
    - name: Import gcpubsub module
      import_module:
        name: google.cloud.pubsub_v1

    - name: Create Pub/Sub client
      google.cloud.pubsub_v1:
        mode: create
        auth_kind: serviceaccount
        project_id: "{{ gcp_project_id }}"
        credentials_file: "{{ gcp_credentials_file }}"
