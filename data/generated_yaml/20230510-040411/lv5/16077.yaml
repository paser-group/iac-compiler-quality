
- hosts: target_hosts
  gather_facts: false
  remote_user: username
  winrm_transport: transport_name
  winrm_server_cert_validation: ignore

  tasks:
    - name: Asynchronous task with WinRMTransport
      command: some_command
      async: 10
      poll: 0
      ignore_errors: true
      register: async_result

- name: Capture any errors or exceptions
  fail:
    msg: "Asynchronous task failed with errors: {{ async_result }}"
  when: async_result is failed
