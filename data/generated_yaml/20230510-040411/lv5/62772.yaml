
- name: Fetch VMKernel interface details
  hosts: all
  gather_facts: false
  tasks:
  - name: Retrieve VMKernel interface details
    vmware_vmkernel_facts:
      hostname: "{{ inventory_hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
    register: vmkernel_details

  - name: Pass incorrect parameters to check for potential NoneType errors
    vmware_vmkernel_facts:
      hostname: wrong_address
      username: "{{ username }}"
      password: "{{ password }}"
    register: incorrect_parameter_test

  - name: Filter VMKernel details in unexpected ways to check for potential exceptions
    set_fact:
      filtered_vmkernel: "{{ vmkernel_details | reject('match','invalid_regex') | list }}"
    ignore_errors: true
