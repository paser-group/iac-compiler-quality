
---
- name: Test playbook for 'map' filter
  hosts: localhost
  gather_facts: False
  tasks:
    - name: Render template with 'map' filter
      template:
        src: "{{ playbook_dir }}/templates/map_filter_test.j2"
        dest: "{{ playbook_dir }}/output/map_filter_test_output.txt"
      register: render_output
      ignore_errors: True

    - name: Log output
      debug:
        var: render_output.stdout_lines
  
    - name: Log error
      debug:
        msg: "Error rendering template: {{ render_output.msg }}"
      when: render_output.failed
