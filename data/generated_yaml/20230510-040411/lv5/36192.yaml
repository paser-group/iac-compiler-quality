
- name: Retrieve ASG details using ec2_asg_facts module
  ec2_asg_facts:
    region: "{{region}}"
    filters:
      "policy-type": "AutoScalingReadOnly"
  register: asg_details

- name: Check for errors in ASG Details
  assert:
    that:
      - asg_details is not None
      - asg_details.policy is not None
      - asg_details.policy[0].policy_type == 'AutoScalingReadOnly'
      - asg_details.policy[0].policy_name is not None
  fail_msg: "Error: AutoScalingReadOnly Policy not found or incorrect"
