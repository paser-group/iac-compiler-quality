
- hosts: localhost
  gather_facts: no
  
  tasks:
    - name: Install dependent role
      ansible.builtin.command: ansible-galaxy install <dependent_role>
      ignore_errors: True
      
    - name: Check if compilation throws error when main.yml is missing
      ansible.builtin.command: ansible-playbook <path_to_playbook> --syntax-check
      register: compilation_output

    - name: Check compilation output for missing 'main.yml' error message
      assert:
        that: "'main.yml' not found" in compilation_output.stderr
