
---
- name: Test junos_facts module for l3_interfaces 
  hosts: "{{ target_hosts }}"
  gather_facts: no
  connection: local

  tasks:
    - name: Gather correct network resources
      junos_facts:
        facts:
          - interfaces
          - routing_tables
      register: correct_resources

    - name: Gather received network resources
      junos_facts:
        facts:
          - interfaces
          - routing_tables
      register: received_resources

    - name: Compare resources
      assert:
        that:
          - correct_resources.interfaces == received_resources.interfaces
          - correct_resources.routing_tables == received_resources.routing_tables
