
- name: Test EC2 module with null/empty VPC
  ec2_vpc:
    count: 1
    name: "{{ name }}"
    region: "{{ region }}"
    cidr_block: "{{ VPC_cidr_block }}"
    tags:
      Name: "{{ name }}"
    state: present
    security_groups: []
    internet_gateway: yes
    vpc_id: "{{ VPC_id }}"
    subnet_id: "{{ Subnet_id }}"
    wait: yes
  register: result

- name: Test EC2 module with invalid CIDR block 
  ec2_vpc:
    count: 1
    name: "{{ name }}"
    region: "{{ region }}"
    cidr_block: "{{ CIDR_block }}"
    tags:
      Name: "{{ name }}"
    state: present
    security_groups: []
    internet_gateway: yes
    vpc_id: "{{ VPC_id }}"
    subnet_id: "{{ Subnet_id }}"
    wait: yes
  register: result
