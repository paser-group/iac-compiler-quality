
- name: Test na_ontap_gather_facts with cDot 9.1
  hosts: target
  gather_facts: False
  tasks:
    - name: Include the na_ontap_gather_facts module
      na_ontap_gather_facts:
        hostname: "{{ inventory_hostname }}"
        username: "{{ netapp_username }}"
        password: "{{ netapp_password }}"
        ontapi: "{{ ontap_version }}"
      register: na_ontap_facts
    
    - name: Test module output
      assert:
        that:
          - na_ontap_facts is defined
          - na_ontap_facts | type_debug == 'dict'
