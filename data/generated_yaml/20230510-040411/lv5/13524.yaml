
- name: Test dynamic set of module vars
  hosts: localhost
  vars:
    var1: value1
    var2: value2
  tasks:
    - name: Test module parameters with dynamic variables
      test_module:
        param1={{var1}}
        param2={{var2}}
      register: module_output
      ignore_errors: true

    - name: Check if template error occurred
      debug:
        var: module_output
      failed_when: module_output | failed
