
- name: Test ec2_vpc_net module
  hosts: localhost
  vars:
    aws_access_key: 'AKIA**************'
    aws_secret_key: '2Sw1**************'
    aws_profile: 'default'
  tasks:
    - name: Create VPC and Subnet
      ec2_vpc_net:
        name: mytestvpc
        state: present
        cidr_block: 10.0.0.0/16
        subnets:
          - cidr_block: 10.0.1.0/24
            availability_zone: us-west-2a
        region: us-west-2
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        aws_profile: "{{ aws_profile }}"
