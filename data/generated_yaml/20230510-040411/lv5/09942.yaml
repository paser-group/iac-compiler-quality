
- hosts: all
  tasks:
  - name: Gather disk and hardware information
    setup:
  - name: Print disk sizes
    debug:
      msg: "Disk size: {{ item.size_total }}"
    with_items: "{{ ansible_mounts }}"
  - name: Check partition sizes
    command: "fdisk -l | grep Disk | awk '{print $3}'"
    register: fdisk_output
    changed_when: false
  - name: Print partition sizes
    debug:
      msg: "Partition size: {{ item }}"
    with_items: "{{ fdisk_output.stdout_lines }}"
