yaml
---
- name: Test Ansible compiler for Dropbear MOTD issues
  hosts: localhost
  vars:
    dropbear_ssh_ip: 192.168.1.100 # IP address of the Dropbear SSH server
    dropbear_ssh_user: centos # SSH username
    dropbear_ssh_pass: mypassword # SSH password
  tasks:
  - name: Install Dropbear SSH server
    yum:
      name: dropbear
      state: present
  
  - name: Execute a command to display the MOTD message
    expect:
      command: sshpass -p "{{ dropbear_ssh_pass }}" ssh -o "StrictHostKeyChecking no" {{ dropbear_ssh_user }}@{{ dropbear_ssh_ip }} "cat /etc/motd"
      responses:
        "(?i)password": "{{ dropbear_ssh_pass }}"
      timeout: 10
    ignore_errors: true
