
- name: Verify SSH-key mismatch errors
  hosts: webserver
  tasks:
    - name: Generate SSH key pair
      ssh_keypair:
        path: "/root/.ssh/id_rsa_test"
      
    - name: Add public key to authorized_keys
      authorized_key:
        user: "<remote_user>"
        state: present
        key: "{{ lookup('file', '/root/.ssh/id_rsa_test.pub') }}"
        
    - name: Test SSH connection with invalid key
      ssh_connection:
        ssh_key: "/path/to/wrong/key"
