
- name: Test include_role module leakage
  hosts: some_hosts
  tasks:
    - name: Run include_role limited to specific hosts
      include_role: name=example_role
      when: inventory_hostname in groups['some_hosts']
    - name: Run include_role with condition
      include_role: name=example_role
      when: some_condition

- name: Test when statement leakage
  hosts: all
  tasks:
    - name: Test when statement with vars and defaults
      some_module: 
        var1: "{{ default_var | default('default_value') }}"
      when: some_condition

- name: Test loop control structure leakage
  hosts: all
  tasks:
    - name: Test loop control structure with vars and defaults
      some_module:
        var1: "{{ default_var }}"
      loop:
        - item1:
            value1: "val1"
        - item2:
            value1: "val2"
      loop_control:
        loop_var: loop_item

