
---
- name: Remove and recreate Docker container
  hosts: localhost
  become: true
 
  tasks:
  - name: Check if container exists
    docker_container_info:
      name: my_container
      state: present
    register: container_info
 
  - name: Remove container if it exists
    docker_container:
      name: my_container
      state: absent
      force_kill: true
    when: container_info.exists
 
  - name: Create Docker container
    docker_container:
      name: my_container
      image: my_image
      state: started
