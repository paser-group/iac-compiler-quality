
---
- name: Test Ansible Compiler for Unset Variables
  hosts: localhost
  gather_facts: no
  
  vars:
    some_var: null

  tasks:
    - name: Set variable to undefined value
      set_fact:
        var_name: !!null
      when: some_var is not defined
     
    - name: Check if variable is defined
      assert:
        that:
          - var_name is not defined
          - 'var_name | default("undefined") == "undefined"'
      when: var_name is defined
