
- name: Test ec2_vpc_peer.py error messages
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Test invalid VPC ID
    command: python /path/to/ec2_vpc_peer.py --vpc-id invalid_vpc_id
    register: cmd_output
    ignore_errors: yes

  - name: Check error message
    fail:
      msg: "Invalid VPC ID error message not found"
    when: "'InvalidVpcID' not in cmd_output.stderr"

  - name: Test invalid peer VPC ID
    command: python /path/to/ec2_vpc_peer.py --peer-vpc-id invalid_peer_vpc_id --vpc-id valid_vpc_id
    register: cmd_output
    ignore_errors: yes

  - name: Check error message
    fail:
      msg: "Invalid Peer VPC ID error message not found"
    when: "'InvalidPeerVPCID' not in cmd_output.stderr"
