
---
- name: Test ec2_vpc_vgw_facts module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Get VPN Gateway facts without tags
      ec2_vpc_vgw_facts:
        region: "{{ region }}"
        filters:
          "tag-key": "test-tag"
      register: vg1

    - name: Get VPN Gateway facts with tags
      ec2_vpc_vgw_facts:
        region: "{{ region }}"
      register: vg2

    - name: Debug output
      debug: 
        var: vg1

    - name: Debug output
      debug: 
        var: vg2
