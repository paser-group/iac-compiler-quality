
- name: Test for successful copy of file with spaces in name with ssh
  hosts: all
  tasks:
    - name: copy file with spaces
      copy:
        src: "/path/to/file with spaces"
        dest: "/path/on/remote/host/file with spaces"
      become: yes
      become_user: root
      vars:
        ansible_ssh_common_args: "-o ProxyCommand='ssh -q \
                             -W %h:%p bastion_alias'"
      delegate_to: localhost

- name: Test for unsuccessful copy of file with spaces in name with ssh
  hosts: all
  tasks:
    - name: copy file with spaces
      copy:
        src: "/path/to/file with spaces"
        dest: "/path/on/remote/host/file with spaces"
      ignore_errors: yes
      become: yes
      become_user: root
      vars:
        ansible_ssh_common_args: "-o ProxyCommand='ssh -q \
                             -W %h:%p bastion_alias'"
      delegate_to: localhost

- name: Test for file path with special characters with ssh
  hosts: all
  tasks:
    - name: create directory with special characters
      file:
        path: "/path/on/remote/host/directory-$with~!special#characters!"
        state: directory
      become: yes
      become_user: root
      delegate_to: localhost

