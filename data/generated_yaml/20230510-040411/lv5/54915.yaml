
- hosts: localhost
  gather_facts: no

  tasks:
   - name: Create an empty vars file
     file:
       path: "{{ inventory_dir }}/group_vars/all/empty_vars.yml"
       state: touch

   - name: Access a variable from an empty vars file
     debug:
       var: some_variable
     register: result
     failed_when: "'some_variable' not in result.stderr_lines[0]"
     vars_files:
       - "{{ inventory_dir }}/group_vars/all/empty_vars.yml"
