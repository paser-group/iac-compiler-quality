
- name: Test playbook for Ansible compiler bug
  hosts: localhost
  gather_facts: no

  vars_prompt:
    - name: vault_pass
      prompt: "Please enter the vault password: "
      private: yes

  tasks:
    - name: Configure vault
      include_vars:
        file: "vault_file.yml"
        name: vault_data
      with_vault:
        - "{{ vault_pass }}"

    - name: Execute operations requiring vault password
      ...
