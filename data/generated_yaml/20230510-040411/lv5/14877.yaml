
- name: Test changed_when and ignore_errors parameters
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Execute invalid command with ignore_errors set to true
      shell: invalid-command
      ignore_errors: true
      changed_when: "rc!=0"
      register: result
    - debug:
        var: result
      changed_when: "rc!=0"
      when: result is defined
