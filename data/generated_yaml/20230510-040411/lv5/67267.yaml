
- hosts: all
  vars:
    default_port: 3260
  tasks:
    - name: Open iSCSI module with default port argument
      open_iscsi:
        target: "{{ inventory_hostname }}"
        port: "{{ default_port }}"
      register: iscsi_result
      failed_when: "'string field expected' not in iscsi_result.stderr_lines"
