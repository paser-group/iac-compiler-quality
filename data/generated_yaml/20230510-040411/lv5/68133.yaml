
- name: Test gcp_compute_instance
  hosts: localhost
  gather_facts: no
  vars:
    gcp_compute_instance:
      name: instance-1
      zone: us-west1-a
      machine_type: n1-standard-1
      networkInterfaces:
        - network: "projects/your-project-id/global/networks/default"
        - network: "invalid-value"
  tasks:
    - name: Test gcp_compute_instance with valid value
      gcp_compute_instance:
        name: "{{ gcp_compute_instance.name }}"
        zone: "{{ gcp_compute_instance.zone }}"
        machine_type: "{{ gcp_compute_instance.machine_type }}"
        networkInterfaces: "{{ gcp_compute_instance.networkInterfaces[0] }}"
      register: result_valid
    - name: Test gcp_compute_instance with invalid value
      gcp_compute_instance:
        name: "{{ gcp_compute_instance.name }}"
        zone: "{{ gcp_compute_instance.zone }}"
        machine_type: "{{ gcp_compute_instance.machine_type }}"
        networkInterfaces: "{{ gcp_compute_instance.networkInterfaces[1] }}"
      ignore_errors: yes
      register: result_invalid
    - name: Print result
      debug:
        msg:
          - "Valid value result:  {{ result_valid }}"
          - "Invalid value result: {{ result_invalid }}"
