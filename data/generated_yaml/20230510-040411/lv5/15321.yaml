
- name: Validate SSH Host Key
  hosts: remote
  gather_facts: no
  tasks:
    - name: Test SSH Key
      shell: ssh-keygen -F {{ inventory_hostname }}
      register: ssh_key_output
    - name: Validate Key
      assert:
        that:
          - 'ssh_key_output.stdout is not defined or ssh_key_output.stdout.find("found") != -1'
