
---
- name: Test ios_facts Tunnel interface MAC Address
  hosts: cisco_ios
  gather_facts: no
  connection: network_cli
  tasks:
    - name: Collect Tunnel Interface Facts
      ios_facts:
        gather_subset:
          - interfaces
        filter:
          type: Tunnel
      register: tunnel_facts

    - name: Display Collected Facts
      debug:
        var: tunnel_facts.interfaces

    - name: Compare MAC to IP address/prefix
      debug:
        msg: "MAC: {{ item.mac_address }}, IP: {{ item.ip_address }}, Prefix: {{ item.prefix }}"
      with_items: "{{ tunnel_facts.interfaces | default([]) }}"
