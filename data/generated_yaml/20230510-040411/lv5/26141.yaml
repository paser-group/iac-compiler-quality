
- name: Test template with default empty string as filter
  hosts: localhost
  tasks:
    - name: Generate template with default filter
      template:
        src: /path/to/template.j2
        dest: /path/to/output_file
      vars:
        value: ''
      register: result

    - name: Verify output is not None
      fail:
        msg: "Template output is None."
      when: result|default('') is none
      changed_when: false
      
    - name: Output template contents
      debug:
        var: result.stdout_lines
