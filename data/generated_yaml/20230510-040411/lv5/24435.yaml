
- name: Create a VM from template with disk options
  vmware_guest:
    hostname: "{{ vcenter_hostname }}"
    username: "{{ vcenter_username }}"
    password: "{{ vcenter_password }}"
    validate_certs: no
    template: "{{ template_name }}"
    name: "{{ vm_name }}"
    disk:
      - label: disk1
        size_gb: 8
        type: thin
        datastore: datastore1
    hardware:
      memory_mb: "{{ memory_mb }}"
      num_cpus: "{{ num_cpus }}"
