
- name: Test Absent Packages with Wildcards Errors
  hosts: all
  sudo: yes

  tasks:
    - name: Test absent with Wildcards with Yum
      yum:
        name: '*'
        state: absent
      register: yum_result
      failed_when: "'Exiting on user command' not in ansible_failed_result.msg"
      
    - name: Test absent with Wildcards with Apt
      shell:
        cmd: >
          dpkg -l | grep -E "^ii" | awk '{print $2}' | grep "*" | xargs sudo apt-get remove -y
      register: apt_result
