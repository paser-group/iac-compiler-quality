
- name: Create SSH keypair
  command: ssh-keygen -P '' -t rsa -f ~/.ssh/id_rsa

- name: Copy public key to remote machine
  copy:
    content: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"
    dest: "/home/user/.ssh/authorized_keys"
    mode: "0600"

- name: Synchronize files from remote machine to local machine
  synchronize:
    src: "/home/user/file.txt"
    dest: "/local/path/to/save/file.txt"
    mode: pull
