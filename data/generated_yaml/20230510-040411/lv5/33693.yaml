
- name: Set parent variable
  set_fact:
    parent_var: "parent_value"

- name: Child play with import_role
  hosts: localhost
  vars:
    child_var: "child_value"
  tasks:
    - name: Print parent variable
      debug:
        var: parent_var

    - name: Import role with undefined variable
      import_role:
        name: my_role
      vars:
        role_var: "{{ undefined_variable }}"

    - name: Print child variable
      debug:
        var: child_var
