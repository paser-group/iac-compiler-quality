yaml
- hosts: all
  gather_facts: false
  tasks:
    - name: Generate facts
      command: generate_facts.py
      register: facts
    - wait_for:
        timeout: 10
        command: echo "Fact generation completed"
      become: false
    - name: Access facts
      debug:
        var: "{{ hostvars[inventory_hostname]['ansible_facts'][item] }}"
      with_items: "{{ facts.stdout_lines }}"
