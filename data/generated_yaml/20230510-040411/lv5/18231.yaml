
- name: Install the latest version of Setuptools
  command: "pip install setuptools --upgrade"

- name: Install Ansible via the setup.py script
  command: "python setup.py install"
  args:
    chdir: "{{ playbook_dir }}/ansible"

- name: Check if the directory 'lib/ansible/galaxy/data/default' has been copied correctly
  stat: 
    path: "{{ playbook_dir }}/ansible/lib/ansible/galaxy/data/default"
  register: default_directory

- name: If the directory was not copied correctly, trigger an error message
  assert: 
    that: default_directory.stat.exists == True
    fail_msg: "The directory lib/ansible/galaxy/data/default has not been copied correctly"
    success_msg: "The directory lib/ansible/galaxy/data/default was copied successfully"
