
- name: Test profile_tasks.py functionality
  hosts: all
  tasks:
    - name: Check if CALLBACK constants are defined
      set_fact:
        callback_constants_defined: "{{ callback_type is defined and callback_plugin is defined }}"
      when:
        - "'callback_type' not in callback_data"
        - "'callback_plugin' not in callback_data"
      vars:
        callback_data: |
          {{ lookup('template', '/path/to/ansible/callback_plugins/__init__.py') }}
      register: callback_constants_defined_result
      changed_when: False

    - name: Output CALLBACK constants
      debug:
        var: callback_type
        msg: "callback_type: {{ callback_type }}"
      when: callback_constants_defined_result.changed

      - debug:
        var: callback_plugin
        msg: "callback_plugin: {{ callback_plugin }}"
      when: callback_constants_defined_result.changed
      
    - name: Output display parameter value
      debug:
        var: display
        msg: "display: {{ display }}"

