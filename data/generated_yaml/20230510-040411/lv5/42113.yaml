
- hosts: localhost
  vars:
    my_var: "default-value"
  tasks:
    - name: Create a file with the default value
      blockinfile:
        block: "{{ my_var }}"
        dest: "/tmp/myfile"
    - name: Override the default-value
      blockinfile:
        block: "new-value"
        dest: "/tmp/myfile"
    - name: Retrieve the value from the file
      shell: "cat /tmp/myfile"
      register: read_file
    - name: Use the retrieved value
      command: "{{ read_file.stdout_lines[0] }}"
