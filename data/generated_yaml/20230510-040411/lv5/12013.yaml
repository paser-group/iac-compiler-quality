
- name: Test SSL Certificates
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Test SSL certificate error
      uri:
        url: https://invalid.com
        validate_certs: true
      register: result

    - block:
        - name: Report SSL Certificate Error
          fail:
            msg: "SSL Certificate Error"
          when: "'certificate verify failed' in result.content"
      rescue:
        - name: Report SSL Handshake Error
          fail:
            msg: "SSL Handshake Error"
          when: "'SSL handshake failed' in result.content"
