
- hosts: all
  gather_facts: false
  
  vars:
    ssh_key_path: "/path/to/ssh/key"
    ssh_username: "username"
    ssh_hostname: "hostname"
  
  tasks:
    - name: Clone repository using ssh protocol and ssh-keyscan
      git:
        repo: "git@{{ssh_hostname}}:user/repo.git"
        dest: "/path/to/destination"
        accept_hostkey: yes
        ssh_key: "{{ssh_key_path}}"
        ssh_opts: "-o User={{ssh_username}}"
