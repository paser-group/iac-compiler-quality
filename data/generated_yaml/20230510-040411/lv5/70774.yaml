
---
- name: Install packages on EC2 RHEL instance
  hosts: ec2
  become: true
  tasks:
    - name: Install packages using the package module
      package:
        name: "{{ item }}"
        state: present
      with_items:
        - package1
        - package2
    - name: Handle errors during package installation
      fail:
        msg: "Failed to install {{ item }}"
      with_items:
        - package1
        - package2
