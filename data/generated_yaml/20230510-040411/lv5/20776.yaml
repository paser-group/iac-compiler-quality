
- name: Test docker_container module
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a docker container without specifying the image
    docker_container:
      name: test-container
    register: result

  - name: Fail the task if a minimum version of docker-py is not installed
    fail:
      msg: "Minimum version of docker-py not installed"
    when: "'docker-py >= 2.0' not in ansible_python_requirements_state.get('actions', {}).get('set', {}).get('docker-py', {}).get('version')"
