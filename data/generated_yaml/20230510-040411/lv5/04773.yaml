
- name: Test for bug in with_items
  hosts: localhost
  gather_facts: no
  vars:
    test_dict:
      foo: bar
  tasks:
    - name: Loop over dictionary with undefined key
      debug:
        msg: "{{ item }}"
      with_items: "{{ test_dict.non_existing_key }}"
