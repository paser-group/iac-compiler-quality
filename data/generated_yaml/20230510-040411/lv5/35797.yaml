
- name: Configure Layer 2 interface
  hosts: nexus-1
  gather_facts: false

  vars:
    interface_name: Ethernet1/1
    interface_description: "Test interface"
    interface_speed: 10000

  tasks:
  - name: Check current interface state
    nxos_command:
      command_string: show interface {{ interface_name }}
    register: current_state

  - name: Configure interface
    nxos_l2_interface:
      name: "{{ interface_name }}"
      description: "{{ interface_description }}"
      speed: "{{ interface_speed }}"
    register: result
