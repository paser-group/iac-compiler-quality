
- hosts: all
  tasks:
  - name: Copying the file to remote host
    copy:
      src: /path/to/local/file
      dest: /path/to/remote/directory
  - name: Calculating checksum
    shell: "sha1sum /path/to/remote/directory/file"
    register: result
  - name: Verifying the checksum
    ansible_checksum:
      path: "/path/to/remote/directory/file"
      algorithm: sha1
      checksum: "{{ result.stdout.split()[0] }}" 
