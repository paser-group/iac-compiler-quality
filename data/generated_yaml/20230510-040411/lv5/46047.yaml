
- name: Generate OpenSSL PKCS12 file
  openssl_pkcs12:
    name: "{{ item }}"
    password: "secretpassword"
    certificate: "/etc/ssl/certs/cert.pem"
    key: "/etc/ssl/private/cert.key"
    path: "{{ item }}.p12"
    state: present
  loop:
    - "byte_string"
    - "unicode_string"
    - "None"

- name: Decrypt OpenSSL PKCS12 file
  openssl_pkcs12:
    name: "{{ item }}"
    password: "secretpassword"
    path: "{{ item }}.p12"
    state: present
    decrypt: yes
    include_cert: yes
    include_key: yes
  loop:
    - "byte_string"
    - "unicode_string"
    - "None"
