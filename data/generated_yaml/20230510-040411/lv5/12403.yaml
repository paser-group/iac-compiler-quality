
- name: Test get_file_parser
  hosts: all
  gather_facts: no
  tasks:
    - name: Test get_file_parser with wrong argument count
      command: "{{ get_file_parser('/path/to/file', 'extra_argument') }}"
      register: output
      ignore_errors: yes
      
      assert:
        that: 
          - "output is failed"
          - "'get_file_parser() takes exactly 2 arguments (2 given)' in output.stderr"
        fail_msg: "get_file_parser() failed to generate an error message with wrong argument count"
