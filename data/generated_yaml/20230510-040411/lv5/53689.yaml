
---
- hosts: localhost
  gather_facts: no

  tasks:
    - name: Enable Slack Callback Plugin
      ansible.builtin.lineinfile:
        path: '/etc/ansible/ansible.cfg'
        regexp: '^#?callback_whitelist.*$'
        line: 'callback_whitelist = slack'
        state: present

    - name: Generate 404 Error
      ansible.builtin.uri:
        url: 'http://localhost/doesnotexist'
        status_code: 404
      register: uri_result

    - name: Print Results
      ansible.builtin.debug:
        var: uri_result
