
- name: Test whether ansible-vault create without filename returns expected error message
  hosts: localhost
  gather_facts: no
  
  tasks:
    - name: Create encrypted file without filename
      command: ansible-vault create
      args:
        stdin: ''
      register: output
      ignore_errors: true
    
    - name: Check output for expected error message
      fail:
        msg: "Too few arguments provided to ansible-vault create"
      when: "'Too few arguments' not in output.stderr"
      changed_when: false
