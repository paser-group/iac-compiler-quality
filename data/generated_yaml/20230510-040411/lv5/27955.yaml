
- name: Set file permissions
  hosts: localhost
  become: True
  tasks:
    - name: Set acl permissions on file
      acl:
        path: /path/to/file
        entity: user1
        etype: user
        perms: r
        state: present
        default: yes
    - name: Remove default permissions
      acl:
        path: /path/to/file
        entity: user1
        etype: user
        state: absent
        default: yes
    - name: Set default permissions with other parameters
      acl:
        path: /path/to/file
        entity: user2
        etype: user
        perms: rw
        state: present
        default: yes
    - name: Verify default permissions
      command: "getfacl /path/to/file"
      register: file_acl
    - name: Debug output
      debug:
        var: file_acl.stdout_lines
