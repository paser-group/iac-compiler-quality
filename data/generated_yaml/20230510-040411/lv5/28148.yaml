
---
- hosts: example.com
  vars:
    domain_name: "example.com"
    letsencrypt_email: "me@example.com"
  tasks:
    - name: Create certificate
      acme_certificate:
        account_email: "{{ letsencrypt_email }}"
        terms_agreed: true
        cert_dir: "/etc/letsencrypt/live/{{ domain_name }}"
        domains: "{{ domain_name }}"
        challenge: http-01
        validate_certs: true
      register: cert_result
    - name: Display validation results
      debug:
        var: cert_result
