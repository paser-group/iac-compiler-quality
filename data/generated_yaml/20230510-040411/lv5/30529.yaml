
---
- name: Collect Facts from NXOS Devices
  hosts: nxos_devices
  gather_facts: no

  vars:
    devices:
      - name: device1
        ip_address: 10.0.0.1
      - name: device2
        ip_address: 10.0.0.2

  tasks:
    - name: Gather Facts
      nxos_command:
        command_string: show version
      register: version

    - debug:
        var: version.stdout_lines

  post_tasks:
    - name: Print Results
      debug:
        msg: "Fact gathering complete"
