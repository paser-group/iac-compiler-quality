
- name: Test ios_command error handling
  hosts: ios_devices
  gather_facts: no

  tasks:
    - name: Send invalid command
      ios_command:
        commands:
          - show invalid command
      register: command_result
      ignore_errors: true

    - name: Check for error message in response
      assert:
        that:
          - "'matched error in response' in command_result.msg"
