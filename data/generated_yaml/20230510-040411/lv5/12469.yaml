
- hosts: localhost
  gather_facts: no
  tasks:
    - name: Test environment variables as template strings
      debug:
        var: "{{ 'Hello, {{ WORLD }}!' | template }}"
      environment:
        WORLD: "world"

    - name: Test environment variables as template lists
      debug:
        var: "{{ [1, '{{ VAR }}', 3] | template }}"
      environment:
        VAR: "2"

    - name: Test environment variables as template dictionaries
      debug:
        var: "{{ {'key': '{{ VAL }}'} | template }}"
      environment:
        VAL: "value"
