yaml
- hosts: digital-ocean-droplets
  gather_facts: true

  tasks:
    - name: Set ansible_virtualization_type to docker
      set_fact:
        ansible_virtualization_type: docker
      
    - name: Verify that the ansible_virtualization_type is set correctly
      assert:
        that:
          - ansible_virtualization_type == "docker"
      
    - name: Test that the setting persists across reboots
      expect:
        command: systemctl status docker
        regexp: 'Active: active'

  handlers:
    - name: Restart Docker service
      service:
        name: docker
        state: restarted

