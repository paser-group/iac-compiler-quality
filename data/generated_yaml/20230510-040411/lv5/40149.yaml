
- name: Transfer file to remote server and delete
  hosts: <remote_host>
  gather_facts: false
  vars:
    filepath: /tmp/sample_file.txt

  tasks:
  - name: Transfer file
    copy:
      src: "{{ playbook_dir }}/files/sample_file.txt"
      dest: "{{ filepath }}"

  - name: Delete transferred file
    shell: rm "{{ filepath }}"
