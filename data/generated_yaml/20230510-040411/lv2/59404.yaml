
---
- name: Example playbook for IOS Terminal issue
  hosts: localhost
  gather_facts: false
  vars:
    error_message: "ERROR'\"; echo corrupted >&2; echo '"
    command: "ls -la"
  tasks:
    - name: Run command and capture stdout/stderr
      ios_command:
        commands: "{{ command }} 2> >(echo {{ error_message }} >&2)"
      register: output
      ignore_errors: true
    - name: Print output
      debug:
        var: output.stdout_lines
    - name: Print error message
      debug:
        var: output.stderr_lines
