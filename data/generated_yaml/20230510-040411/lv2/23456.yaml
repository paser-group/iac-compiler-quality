
- hosts: all
  tasks:
    - wait_for:
        host: "{{ ip }}"
        port: 22
        state: "{{ state }}"
        delay: "{{ delay }}"
        timeout: "{{ timeout }}"
      vars:
        ip: "localhost"
        state: "present"
        delay: "10"
        timeout: "30"
      ignore_errors: true

    - debug:
        var: ansible_failed_result
