
- name: Test playbook for nxos_facts error
  hosts: all
  gather_facts: false

  tasks:
    - name: Test invalid value
      nxos_facts:
        provider:
          username: "{{ '' }}"
          password: "{{ [] }}"
          host: "{{ none }}"
        gather_subset: "{{ ['none'] }}"
      ignore_errors: true

    - name: Test invalid argument
      nxos_facts:
        gather_subset: "{{ 42 }}"
      ignore_errors: true

    - name: Test unexpected input
      nxos_facts:
        provider:
          username: "{{ unfound }}"
          password: "{{ unknown }}"
        gather_subset: all
      ignore_errors: true

    - name: Test unconventional syntax
      nxos_facts: provider={{username=foo, password=bar, host=baz}}
      ignore_errors: true

    - name: Test edge case
      nxos_facts: gather_subset=""
      ignore_errors: true
