
- name: Change default path of Ansible semaphore
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Set semaphore path environment variable for current session
      shell: export ANSIBLE_LOCK_DIR=/new/semaphore/path

    - name: Check that semaphore path variable was set correctly
      debug:
        var: ANSIBLE_LOCK_DIR
    
    - name: Restart ansible service for changes to take effect
      systemd:
        name: ansible
        state: restarted
