
- name: Test playbook for sudo error with become false
  hosts: all
  become: false
  gather_facts: true

  tasks:
  
    - name: Test incorrect password attempt
      shell: "echo 1234 | sudo -S echo hello"
      register: result
      ignore_errors: true

    - name: Test shell command with curly braces inside quotes
      shell: "{{ '{' }} sleep {{ '1' }} {{ '}' }}"

    - name: Test setting environment variables with colon in its name
      shell: "export VAR_WITH_COLON=test"
      environment:
        VAR_WITH_COLON: test

    - name: Test running shell command with variable inside quotes
      shell: "echo '{{ ''var with quotes'' }}' > /dev/null"

    - name: Test using special characters in module name
      "!dodo%#kota":
        arg1: "value1"
        arg2: "value2"

    - name: Test running command with double asterisks
      command: "**"

    - name: Test incorrect sudo password without ignore_errors
      shell: "echo 1234 | sudo -S echo hello"
      register: result
      
    - name: Test running shell command with variable inside double quotes
      shell: "echo \"{{ ''var with double quotes'' }}\" > /dev/null"

