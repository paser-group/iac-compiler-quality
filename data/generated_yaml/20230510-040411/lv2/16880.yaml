
---
- hosts: localhost
  vars:
    my_dict:
      one:
        subone:
          - a
          - b
        subtwo:
          - c
      two:
        subone:
          - d
          - e
        subtwo:
          - f
    my_non_dict_var: "{{ ['this', 'is', 'not', 'a', 'dict'] }}"
  tasks:
    - name: task with complex conditionals and dicts
      debug:
        msg: "Hello World"
      when: "my_dict.one.subtwo[0] == 'c' and my_dict.two.subone[1] == 'e' and my_dict.invalid_key | default(False) and my_non_dict_var[5] == 'a'"
    - name: task with invalid dict 
      debug:
        msg: "This should fail with 'dict object' has no attribute"
      when: "my_dict.invalid_key | default(False)"
