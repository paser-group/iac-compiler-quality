yaml
- name: Test include_role with with_items
  hosts: localhost
  gather_facts: no

  vars:
    roles_to_include:
      - role1
      - role2
      - role3

  tasks:
    - name: Test include_role with items
      include_role:
        name: "{{ item }}"
      with_items:
        - "{{ roles_to_include }}"
      loop_control:
        loop_var: role

    - name: Test include_role with invalid include_paths
      include_role:
        name: invalid_role
        include_paths:
          - "/path/to/invalid/role"
      loop: "{{ roles_to_include }}"

    - name: Test include_role with vars
      include_role:
        name: "{{ item }}"
        vars:
          role_var_1: var1
          role_var_2: var2
      with_items:
        - "{{ roles_to_include }}"

    - name: Test include_role with vars_files
      include_role:
        name: "{{ item }}"
        vars_files:
          - vars1.yml
          - vars2.yml
      with_items:
        - "{{ roles_to_include }}"
        
    - name: Test include_role with when statements
      include_role:
        name: "{{ item }}"
      with_items:
        - "{{ roles_to_include }}"
      when: role == 'role1'

    - name: Test include_role with invalid role names and paths
      include_role:
        name: "{{ item }}"
      with_items:
        - invalid_role
        - /path/to/invalid/role
        - ""
        
    - name: Test include_role with invalid with_items
      include_role:
        name: role1
      with_items: "{{ invalid_variable }}"
