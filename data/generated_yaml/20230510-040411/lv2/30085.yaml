
---
- name: ec2_lc fail to create playbook
  hosts: localhost
  connection: local

  vars:
    region: "{{ ['eu-west-1', 'us-east-2', 'ap-southeast-1', 'unknown-region'] | random }}"

  tasks:
  - name: create EC2 launch configuration
    ec2_lc:
      name: "test_lc"
      image_id: "ami-123"
      instance_type: "t2.micro"
      key_name: "mykeypair"
      security_groups: "{{ ['sg-123', 'sg-456'] | random }}"
      region: "{{ region }}"
      vpc_id: "{{ ['vpc-123', 'vpc-456', ''] | random }}"
      assign_public_ip: "{{ ['true', 'false'] | random }}"
      user_data: "{{ ['userdatastring', 123, 'specialchars!@#$%^&*()'] | random }}"
    register: ec2_lc_result

  - name: debug EC2 launch configuration
    debug:
      var: ec2_lc_result
