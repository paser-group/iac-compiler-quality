
- name: Test pkgng error messages
  hosts: localhost
  gather_facts: no

  tasks:

  - name: Install package
    pkgng:
      name: pkgng
      state: present
      update_cache: yes
    register: pkgng_install_result

  - name: Test error response
    fail:
      msg: "pkgng failed to install package properly"
    when: pkgng_install_result.rc != 0

  - name: Remove package
    pkgng:
      name: pkgng
      state: absent
      update_cache: yes

  - name: Test error response
    fail:
      msg: "pkgng failed to remove package properly"
    when: pkgng_remove_result.rc != 0
