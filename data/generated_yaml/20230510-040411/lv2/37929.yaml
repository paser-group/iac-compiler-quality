
- name: Fuzzing playbook for ansible_failed_task
  hosts: localhost
  tasks:
    - name: Test case 1: Undefined variable inside a role
      include_role:
        name: test_role
      vars:
        var1: '{{ undefined_var }}'

    - name: Test case 2: Undefined variable inside defaults/
      debug:
        msg: '{{ undefined_var }}'
      vars_files:
        - defaults/main.yml

    - name: Test case 3: Undefined variable inside vars/
      debug:
        msg: '{{ undefined_var }}'
      vars:
        - vars/main.yml

    - name: Test case 4: Unconventional syntax inside role
      include_role:
        name: test_role
      vars:
        '{{ unconventional_syntax }}': 'value'

    - name: Test case 5: Unexpected input inside role
      include_role:
        name: test_role
      vars:
        var1:
          'unexp{ected_input': '{{ }}'

    - name: Test case 6: Multiple undefined variables inside defaults/
      debug:
        msg: '{{ undefined_var1 }} {{ undefined_var2 }}'
      vars_files:
        - defaults/main.yml
