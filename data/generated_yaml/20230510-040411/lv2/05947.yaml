
---
- hosts: all
  gather_facts: false
  tasks:

  - name: Create a regular file with src without state=link
    file:
      path: /tmp/test.txt
      src: /tmp/test_link.txt

  - name: Delete a symlink without state=link
    file:
      path: /tmp/test_link.txt
      state: absent

  - name: Create a symlink with state=absent
    file:
      src: /tmp/test.txt
      dest: /tmp/test_link.txt
      state: absent

  - name: Create a regular file with state=link
    file:
      path: /tmp/test.txt
      src: /tmp/test_link.txt
      state: link

  - name: Create a symlink with src=absent
    file:
      path: /tmp/test.txt
      src: absent
      state: link
