
- name: Zabbix Template Module Error Test
  hosts: localhost
  gather_facts: no
  vars:
    invalid_arg: "<bad arg>"
    valid_arg: "good_arg"

  tasks:
    - name: Call Zabbix template with wrong datatype for threshold
      zabbix_template:
        name: "test"
        threshold: [1,2,3]
      register: result
      ignore_errors: true
    
    - name: Exception should be raised due to wrong datatype
      fail:
        msg: "Expecting TypeError: '<' not supported between instances of 'int' and 'str' to be raised"
      when: "'TypeError: '<' not supported between instances of' not in result.stderr"
