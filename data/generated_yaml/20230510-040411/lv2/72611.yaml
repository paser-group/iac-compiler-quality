
- name: Unhandled error with shell module and delegate_to
  hosts: localhost
  tasks:
    - name: String with single quotes and spaces
      shell: 'echo "Hello, World!"'
      delegate_to: "{{'localhost'}}"
    - name: String with double quotes and special character
      shell: "echo $'\e[31mHello, World!\e[0m'"
      delegate_to: "{{127.0.0.1}}"
    - name: Execute command as a different user
      become: true
      become_user: someuser
      shell: |
        echo "Hello, World!"
        whoami
      delegate_to: "{{'localhost'}}"
    - name: Command with missing parameters
      shell: "ls /path/to/missing/directory"
      delegate_to:
    - name: Command with multiple shell commands
      shell: |
        echo "Starting up..."
        sleep 3
        echo "Performing some action..."
        sleep 5
        echo "Shutting down..."
        sleep 2
      delegate_to: "{{'localhost'}}"
