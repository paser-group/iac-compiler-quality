
---
- name: Test GCP Compute Instance network configs
  hosts: localhost
  gather_facts: False

  tasks:
    # Edge case: Invalid variable type
    - set_fact:
        instance_name: 12345
    - name: Replace network configs to default
      gcp_compute_instance:
        name: "{{ instance_name }}"
        network_interfaces:
          - name: "nic0"
            network_ip: "10.0.0.1"
            network: "default"

    # Edge case: Incorrect module name
    - name: Incorrect module name
      gcp_compute_instancee:
        name: "test-instance"
        network_interfaces:
          - name: "nic0"
            network_ip: "10.0.0.1"
            network: "default"

    # Edge case: Invalid network name
    - name: Invalid network name
      gcp_compute_instance:
        name: "test-instance"
        network_interfaces:
          - name: "nic0"
            network_ip: "10.0.0.1"
            network: "non-existent-network"

    # Unconventional syntax
    - name: Unconventional syntax
      gcp_compute_instance: name=test-instance network_interfaces=[{"name": "nic0", "network_ip": "10.0.0.1", "network": "default"}]

    # Unexpected input: Provide a string instead of a list for network_interfaces
    - name: Provide a string instead of a list for network_interfaces
      gcp_compute_instance:
        name: "test-instance"
        network_interfaces: "nic0"

    # Unexpected input: Missing required "name" parameter
    - name: Missing required "name" parameter for network_interfaces
      gcp_compute_instance:
        name: "test-instance"
        network_interfaces:
          - network_ip: "10.0.0.1"
            network: "default"
