
- name: Test mysql_db module defaults-file option
  hosts: localhost
  gather_facts: no
  
  tasks:
    - name: Create database with empty defaults file
      mysql_db:
        name: testdb
        state: present
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file: "/path/to/empty/defaults/file"
        
    - name: Create database with no defaults file
      mysql_db:
        name: testdb
        state: present
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file:
        
    - name: Create database with non-existent defaults file
      mysql_db:
        name: testdb
        state: present
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file: "/path/to/non/existent/defaults/file"
        
    - name: Remove a non-existent database
      mysql_db:
        name: non_existent_db
        state: absent
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file: "/path/to/empty/defaults/file"
        
    - name: Create a database with a very long name
      mysql_db:
        name: "{{ 'a' * 100000 }}"
        state: present
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file: "/path/to/empty/defaults/file"
        
    - name: Create database with unsupported option
      mysql_db:
        name: testdb
        state: present
        login_unix_socket: /var/run/mysqld/mysqld.sock
        login_user: root
        login_password: root
        login_host: localhost
        login_port: 3306
        defaults_file: "--unsupported-option"
