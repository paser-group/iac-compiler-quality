
- name: An example playbook to test docker_service errors
  hosts: localhost
  gather_facts: no

  vars:
    service_name: "my-docker-service"
    invalid_port: 80000
    invalid_volume: "missing_volume:/container/path:rw"

  tasks:
    - name: Create invalid service with invalid port
      docker_service:
        name: "{{ service_name }}"
        state: started
        ports:
          - "{{ invalid_port }}:8080"

    - name: Create invalid service with invalid volume
      docker_service:
        name: "{{ service_name }}"
        state: started
        volumes:
          - "{{ invalid_volume }}"

    - name: Create invalid service with invalid image
      docker_service:
        name: "{{ service_name }}"
        state: started
        image: "invalid_image:latest"

    - name: Create invalid service with invalid command
      docker_service:
        name: "{{ service_name }}"
        state: started
        command: "this_command_does_not_exist"

    - name: Create invalid service with invalid restart policy
      docker_service:
        name: "{{ service_name }}"
        state: started
        restart_policy: "this_restart_policy_does_not_exist"
