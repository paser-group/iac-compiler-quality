
- name: Generate maximum recursion depth exceeded error in Fortios httpapi
  hosts: localhost
  connection: local
  gather_facts: no

  tasks:
    - name: Invoke Fortios httpapi with large data payload
      fortios:
        httpapi_login_user: "{{ ansible_env.USER }}"
        httpapi_login_password: "{{ lookup('env','USER_PASSWORD') }}"
        httpapi_action: login
        httpapi_payload:
            "payload": "{{ lookup('file', '/dev/urandom') | b64encode }}"
