
- name: Test playbook for cloudfront_origin_access_identity error
  hosts: all
  vars:
    empty_list: []
    nonempty_list: ['id1', 'id2', 'id3']
    access_identity_name: 'my-access-identity'
  tasks:
  - name: Test with empty CloudFrontOriginAccessIdentityList
    cloudfront_origin_access_identity:
      state: present
      CloudFrontOriginAccessIdentityList: "{{ empty_list }}"
    register: empty_result

  - name: Test with non-empty CloudFrontOriginAccessIdentityList
    cloudfront_origin_access_identity:
      state: present
      CloudFrontOriginAccessIdentityList: "{{ nonempty_list }}"
    register: nonempty_result

  - name: Test with invalid CloudFrontOriginAccessIdentityList
    cloudfront_origin_access_identity:
      state: present
      CloudFrontOriginAccessIdentityList: "invalid_list"
    register: invalid_result

  - name: Test with unconventional syntax for CloudFrontOriginAccessIdentityList
    cloudfront_origin_access_identity:
      state: present
      CloudFrontOriginAccessIdentityList: "{{ 'id1:input1, id2:input2' }}"
    register: unconventionnal_result

  - name: Test with non-string input for CloudFrontOriginAccessIdentityList
    cloudfront_origin_access_identity:
      state: present
      CloudFrontOriginAccessIdentityList: "{{ 123 }}"
    register: nonstring_result

  - name: Test with invalid state value
    cloudfront_origin_access_identity:
      state: absent
      CloudFrontOriginAccessIdentityList: "{{ empty_list }}"
    register: invalid_state_result

  - name: Test with nonexistent access identity
    cloudfront_origin_access_identity:
      state: present
      access_identity_name: "{{ access_identity_name }}"
    register: nonexistent_result

  - debug:
      var: item
    loop:
      - "{{ empty_result }}"
      - "{{ nonempty_result }}"
      - "{{ invalid_result }}"
      - "{{ unconventionnal_result }}"
      - "{{ nonstring_result }}"
      - "{{ invalid_state_result }}"
      - "{{ nonexistent_result }}"
