
- name: Slack notification module error bug hunting playbook
  hosts: localhost
  vars:
    slack_token: "<MY_SLACK_TOKEN>"

  tasks:
    - name: Send notification to Slack with valid settings
      slack:
        token: "{{ slack_token }}"
        channel: "#general"
        message: "This is a test notification from Ansible"
      register: slack_result_1

    - name: Print Slack module output with valid settings
      debug:
        var: slack_result_1

    - name: Send notification to an invalid Slack channel
      slack:
        token: "{{ slack_token }}"
        channel: "#nonexistent"
        message: "This is a test notification to an invalid Slack channel"
      register: slack_result_2

    - name: Print Slack module output with invalid channel
      debug:
        var: slack_result_2

    - name: Send notification with a blank message
      slack:
        token: "{{ slack_token }}"
        channel: "#general"
        message: ""
      ignore_errors: yes

    - name: Send notification with invalid token
      slack:
        token: "invalid_token"
        channel: "#general"
        message: "This is a test notification with an invalid token"
      ignore_errors: yes

    - name: Send notification without a message
      slack:
        token: "{{ slack_token }}"
        channel: "#general"
      ignore_errors: yes
