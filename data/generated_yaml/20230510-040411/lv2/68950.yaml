
- name: Test Ansible compiler for bug in comparison operator
  hosts: localhost
  gather_facts: no

  vars:
    less_than: 1
    greater_than: 2
    string_var: "This is a string"

  tasks:
  - name: Set variable with non-integer value
    set_fact:
      non_int_var: "abc"

  - name: Attempt comparison between string and integer variables
    assert:
      that:
        - less_than < string_var

  - name: Attempt comparison between integer and non-integer variables
    assert:
      that:
        - less_than < non_int_var

  - name: Attempt comparison between integer and boolean variables
    assert:
      that:
        - less_than < true

  - name: Attempt comparison between integer and list variables
    assert:
      that:
        - less_than < [1,2,3]

  - name: Attempt comparison with invalid operator
    assert:
      that:
        - less_than -> greater_than

  - name: Attempt comparison between incompatible variable types
    assert:
      that:
        - less_than < "string"

