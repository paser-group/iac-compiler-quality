
---
- hosts: localhost
  vars:
    empty_list: []
    filled_list: [192.168.1.1, 192.168.1.2]
  tasks:
    - name: test ipaddr filter on empty list
      debug:
        msg: "{{ empty_list | ipaddr }}"
    - name: test ipaddr filter on filled list
      debug:
        msg: "{{ filled_list | ipaddr }}"
    - name: test ipaddr filter on non-list
      debug:
        msg: "{{ '192.168.1.1' | ipaddr }}"
    - name: test ipaddr filter with invalid IP
      debug:
        msg: "{{ '1000.1000.1000.1000' | ipaddr }}"
    - name: test ipaddr filter on empty string
      debug:
        msg: "{{ '' | ipaddr }}"
    - name: test ipaddr filter with whitespace
      debug:
        msg: "{{ ' 192.168.1.1 ' | ipaddr }}"
    - name: test ipaddr filter with multiple IPs
      debug:
        msg: "{{ '192.168.1.1, 192.168.1.2' | ipaddr }}"
    - name: test ipaddr filter with mixed data types in list
      debug:
        msg: "{{ [192.168.1.1, 'invalid.ip'] | ipaddr }}"
    - name: test ipaddr filter with nested list
      debug:
        msg: "{{ [[192.168.1.1, 192.168.1.2], [192.168.1.1]] | ipaddr }}"
    - name: register ipaddr filter
      set_fact:
        empty_list_result: "{{ empty_list | ipaddr }}"
        filled_list_result: "{{ filled_list | ipaddr }}"
        non_list_result: "{{ '192.168.1.1' | ipaddr }}"
        invalid_ip_result: "{{ '1000.1000.1000.1000' | ipaddr }}"
        empty_string_result: "{{ '' | ipaddr }}"
        whitespace_result: "{{ ' 192.168.1.1 ' | ipaddr }}"
        multiple_ips_result: "{{ '192.168.1.1, 192.168.1.2' | ipaddr }}"
        mixed_data_types_result: "{{ [192.168.1.1, 'invalid.ip'] | ipaddr }}"
        nested_list_result: "{{ [[192.168.1.1, 192.168.1.2], [192.168.1.1]] | ipaddr }}"
