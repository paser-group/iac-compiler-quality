
- name: Test inventory script errors
  hosts: all
  gather_facts: no
  tasks:
    - name: Execute inventory script with unsupported option
      command: /path/to/inventory_script.sh --invalid-option
      ignore_errors: true
    - name: Execute inventory script with missing argument
      command: /path/to/inventory_script.sh --arg
      ignore_errors: true
    - name: Execute inventory script with invalid argument
      command: /path/to/inventory_script.sh --arg invalid_value
      ignore_errors: true
    - name: Execute inventory script with permission denied
      command: /path/to/inventory_script.sh
      become: yes
      become_user: root
      ignore_errors: true
    - name: Verify inventory script fails if no hosts are returned
      shell: /path/to/inventory_script.sh
      register: output
      failed_when: "'No hosts found' not in output.stdout"
