
---
- name: Use setup module
  hosts: localhost
  gather_facts: no
  
  tasks:
    - name: Test facts.py
      setup:
        filter: ansible_distribution_major_version == "1"
        
    - name: Test without gather_facts
      setup:
        gather_subset: [non_existent_variable]

    - name: Test without filter
      setup:

    - name: Test with empty filter
      setup:
        filter: ""
      
    - name: Test with invalid fact name
      debug:
        var: {{ invalid_fact_name }}

    - name: Test with unconventional syntax
      setup:
        gather_subset: "{{ item }}"
      with_items:
          - "non_existent_variable"
          - ["ansible_B","ansible_C"]
          - "{{ invalid_variable }}"
  
    - name: Test with unexpected input
      setup:
        filter: "{{ ansible_machine }}"
          
    - name: Test with unexpected input format
      setup:
        filter: "{{ ''|map('regex_replace', '.*', '')|join(',') }}"
