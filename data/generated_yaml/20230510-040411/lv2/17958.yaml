
- name: Test for fatal errors sent to stdout instead of stderr
  hosts: all
  tasks:
    - name: Execute command and redirect stderr to stdout
      command: "some command 2>&1"
      register: cmd_output

    - name: Check for fatal error in command output
      debug:
        msg: "Fatal error occurred: {{ item }}"
      with_items: "{{ cmd_output.stdout_lines }}"
      when: "'fatal error' in item|lower"
