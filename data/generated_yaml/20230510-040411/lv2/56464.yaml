
---
- hosts: localhost
  gather_facts: no

  vars:
    loop_items:
      - item1
      - item2

  tasks:
    - name: Loop over items
      debug:
        msg: "{{ item }}"
      loop: "{{ loop_items }}"
      register: item_register
      failed_when: item_register is failed

    - name: Use selective callback
      debug:
        msg: "{{ item }}"
      loop: "{{ loop_items }}"
      loop_control:
        label: "{{ item }}"
      when: item != 'item1'         
