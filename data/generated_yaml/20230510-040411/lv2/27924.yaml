
- name: Configure NX-OS VXLAN VTEP VNI with suppress_arp option
  hosts: switches

  tasks:
  - name: Add VXLAN VTEP VNI entry
    nxos_vxlan_vtep_vni:
      vni: "{{ item.vni }}"
      vni_multicast_group: "{{ item.multicast_group }}"
      suppress_arp: "{{ item.suppress_arp | default(true) }}"
      vni_type: evpn
    with_items:
    - { vni: 10001, multicast_group: 225.1.1.1, suppress_arp: 'yes/no' }
    - { vni: 10002, multicast_group: 225.1.1.2, suppress_arp: 1 }
    - { vni: 10003, multicast_group: 225.1.1.3, suppress_arp: 'true/false' }
    - { vni: 10004, multicast_group: 225.1.1.4, suppress_arp: [] }
    - { vni: 10005, multicast_group: 225.1.1.5, suppress_arp: {} }
    - { vni: 10006, multicast_group: 225.1.1.6, suppress_arp: null }
