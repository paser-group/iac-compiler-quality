
---
- name: Test Find module contains option with regex sub-option
  hosts: localhost
  tasks:
  - name: Search directory for file with regex pattern
    find:
      paths: /home/user/test_dir
      patterns: '*.txt'
      contains:
        - regex: "[a-z]+[0-9]+"
        - regex: "[0-9]+"
        - regex: "[a-zA-Z]{3,5}"
        - regex: "[]"
        - regex: "[]]]"
        - regex: "[[[]]"
        - regex: "{{"
  - name: Fail if more than one file found
    fail:
      msg: "More than one file found"
    when:
      - "'results' in find_out"
      - "find_out.results | length > 1"
