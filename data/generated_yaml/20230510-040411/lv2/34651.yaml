yaml
- name: Playbook for testing Win_dns_client
  hosts: all
  gather_facts: no
  
  tasks:
    - name: Detect and change order of DNS resolvers
      win_dns_client:
        adapter_names: "{{ item }}"
        search_domain: "{{ lookup('env', 'USERDOMAIN') }}"
        primary_dns: "{{ lookup('env', 'DNS_SERVER_1') }}"
        secondary_dns: "{{ lookup('env', 'DNS_SERVER_2') }}"
      loop:
        - Ethernet
        - Ethernet 2
        - Ethernet 3
        - Ethernet 4
        - Ethernet 5
        - Unknown
        - ""
      register: win_dns_client_result
      
    - name: Display result of DNS resolvers
      debug:
        var: win_dns_client_result
