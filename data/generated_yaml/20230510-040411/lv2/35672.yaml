
---
- name: Uninstall a package using Yum module with state=absent
  hosts: localhost
  gather_facts: no
  tasks:

  # Test when the package is not installed
  - name: Test absent state when package is not installed
    yum:
      name: my_package
      state: absent
    register: test_result1
  - debug: var=test_result1

  # Test when the package is already absent
  - name: Test absent state when package is already absent
    yum:
      name: my_package
      state: absent
    register: test_result2
  - debug: var=test_result2

  # Test invalid package name
  - name: Test invalid package name input
    yum:
      name: this_package_does_not_exist
      state: absent
    register: test_result3
  - debug: var=test_result3

  # Test invalid state input
  - name: Test invalid state input
    yum:
      name: my_package
      state: install
    register: test_result4
  - debug: var=test_result4

  # Test no package name input
  - name: Test no package name input
    yum:
      state: absent
    register: test_result5
  - debug: var=test_result5

  # Test no state input
  - name: Test no state input
    yum:
      name: my_package
    register: test_result6
  - debug: var=test_result6
