
---
- name: File Module Testing
  hosts: localhost
  gather_facts: false
  tasks:
  - name: Create empty file with unconventional mode value
    file:
      path: '/tmp/testfile1.txt'
      state: touch
      mode: "xyz"
  - name: Change file mode to unconventional value
    file:
      path: '/tmp/testfile1.txt'
      mode: "rwxrwxrwxrwx"
  - name: Create new file with invalid file mode value
    file:
      path: '/tmp/testfile2.txt'
      state: touch
      mode: "0RT"
  - name: Change file mode to invalid value
    file:
      path: '/tmp/testfile2.txt'
      mode: "7777"
  - name: Create new directory with unconventional mode value
    file:
      path: '/tmp/testdir1'
      state: directory
      mode: "abc"
  - name: Change directory mode to unconventional value
    file:
      path: '/tmp/testdir1'
      mode: "rwxrwxrwxrwx"
  - name: Create new directory with invalid file mode value
    file:
      path: '/tmp/testdir2'
      state: directory
      mode: "0PO"
  - name: Change directory mode to invalid value
    file:
      path: '/tmp/testdir2'
      mode: "7777"
  - name: Delete test files and directories
    file:
      state: absent
      path: '{{ item }}'
    with_items:
    - /tmp/testfile1.txt
    - /tmp/testfile2.txt
    - /tmp/testdir1
    - /tmp/testdir2
