
- name: Test connecting to v-center
  hosts: localhost
  vars:
    vcenter:
      hostname: vcenter.example.com
      username: admin
      password: password123
  tasks:
  - name: Test connection to v-center
    vmware_guest:
      hostname: "{{ vcenter.hostname }}"
      username: "{{ vcenter.username }}"
      password: "{{ vcenter.password }}"
      name: test_vm
      state: present
      hardware:
        memory_mb: "{{ 1024 * random.choices([1,2,4]) }}"
        num_cpus: "{{ random.randint(1, 10) }}"
      protected: "{{ 'yes' if random.random() < 0.5 else 'no' }}"
      template: "{{ 'yes' if random.random() < 0.5 else 'no' }}"
      folder: "{{ '/folder/' + ''.join(random.choices(string.ascii_uppercase + string.ascii_lowercase, k=8)) }}"
      network:
        name: "{{ 'Network ' + ''.join(random.choices(string.ascii_uppercase + string.ascii_lowercase, k=8)) }}"
        start_connected: "{{ 'yes' if random.random() < 0.5 else 'no' }}"
        allow_guest_control: "{{ 'yes' if random.random() < 0.5 else 'no' }}"
      disk:
        size_gb: "{{ random.randint(10, 500) }}"
        type: "{{ random.choice(['thin', 'thick']) }}"
