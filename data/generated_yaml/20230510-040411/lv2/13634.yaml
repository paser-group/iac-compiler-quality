
- name: Test group_by module
  hosts: localhost
  gather_facts: no

  tasks:
    # Test with empty list
    - name: Test empty list
      debug:
        msg: "{{ [] | group_by('item') }}"

    # Test with no 'attribute' parameter
    - name: Test group_by without attribute parameter
      debug:
        msg: "{{ [1, 2, 3] | group_by }}"

    # Test with non-iterable value
    - name: Test non-iterable value
      debug:
        msg: "{{ 'hello' | group_by('item') }}"

    # Test with a list of dictionaries where each dictionary has different keys
    - name: Test mixed dictionary keys
      vars:
        dict1:
          name: John
          age: 25
        dict2:
          name: Ben
          city: New York
          pets: ['dog', 'cat']
      debug:
        msg: "{{ [dict1, dict2] | group_by('item.age') }}"

    # Test with a list of mixed data types
    - name: Test mixed data types
      debug:
        msg: "{{ [1, '2', True, {'name': 'John'}] | group_by('item') }}"
