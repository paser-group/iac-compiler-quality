
- hosts: localhost
  tasks:
    - name: Deploy Azure Resource Manager Template
      azure_rm_deployment:
        state: present
        resource_group_name: "{{ my_resource_group }}"
        name: "{{ my_template_name }}"
        template: "{{ my_template }}"
        parameters:
          - name: param1
            value: "{{ my_value }}"
      register: deployment_result

    - name: Check if ARM Template Deployment has failed
      assert:
        that:
          - deployment_result.failed == true
      failed_when: false
