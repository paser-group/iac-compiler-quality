
- name: Test playbook for ansible-playbook with --check
  hosts: localhost
  connection: local
  gather_facts: no
  
  vars:
    my_list: []
    my_dict:
      key: value
    my_str: "This is a test string."
  
  tasks:
    - name: Task 1 - register variable
      command: echo "Test" > /dev/null
      register: output
      
    - name: Task 2 - conditional with undefined register variable
      debug:
        msg: "This task should error out due to undefined register variable."
      when: output.something is defined
      
    - name: Task 3 - conditional with defined register variable
      debug:
        msg: "This task should run successfully since the register variable is defined."
      when: output.stdout is defined
      
    - name: Task 4 - unconventional syntax
      debug: msg="{{my_list[0]}}"
      
    - name: Task 5 - unexpected input
      debug: msg={{my_dict.key + " Test"}}
      
    - name: Task 6 - edge case
      debug: msg="{{not_defined_variable | default('Fallback Value', true)}}"
