
---
- hosts: all
  vars:
    -   var1: 1
    -var2 : 2
    -  var3 : 3
    - var4: "{{ var5 }}"
    - var6: '\'escaped\''
    - var7: 2 > 1 or 1 < 2
    - var8: 2 > 1 and 1 < 2
    - var9: ['one', 'two', 'three']
    - var10: {'key1': 'value1', 'key2': 'value2'}

  tasks:
  - name: Testing extra-vars parsing with whitespace prefixing
    command: echo "Hello world"
    register: result
    become: true
    become_user: root
    become_method: sudo 
    environment:
      - "  extra_var1={{ var1 }}"
      - "extra_var2 ={{ var2 }}"
      - "   extra_var3 = {{ var3 }}"
      - "extra_var4 =     {{ var4 }}"
      - "  extra var 5={{ var5 }}"
      - "extra var 6={{var6}}"
      - "  extra-var-{{ var7 }}={{ var8 }}"
      - "extra_var_{{ var9[0] }}={{ var10.key1 }}"
      - "extra_var_{{ var9[1] }}={{ var10['key2'] }}"

  - debug:
      msg: "{{result.stdout}}"
