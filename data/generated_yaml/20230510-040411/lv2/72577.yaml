
- name: Test shell and command plugins
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Execute a command with an exit code of 1
      command: /bin/false
      register: result
      
    - name: Output the result variable
      debug:
        var: result
      
    - name: Execute a failing command with an argument
      shell: "invalid_command {{ undefined_variable }}"
      register: result
      
    - name: Output the result variable
      debug:
        var: result
      
    - name: Execute a command with an invalid syntax
      shell: "echo '"
      register: result
      
    - name: Output the result variable
      debug:
        var: result
      
    - name: Execute a command with long output
      command: "dd if=/dev/zero bs=1M count=100"
      register: result
      
    - name: Output the result variable
      debug:
        var: result
