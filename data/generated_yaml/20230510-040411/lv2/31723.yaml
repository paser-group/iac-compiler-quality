
- hosts: all
  vars:
    jenkins_script_output: "{'foo': ['bar']}"
  tasks:
  - name: Run jenkins_script
    script: |
      import json
      output = {('foo'): ['bar']}
      print(json.dumps(output).encode())
    register: jenkins_script_result
    ignore_errors: yes
  - name: Assert jenkins_script output
    assert:
      that:
        - jenkins_script_result.stdout | from_json | dict2items == jenkins_script_output | dict2items
      success_msg: "Jenkins script output is as expected"
      fail_msg: "Unexpected Jenkins script output"
