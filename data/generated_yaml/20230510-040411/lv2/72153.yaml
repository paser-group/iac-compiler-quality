
- hosts: localhost
  become: true
  vars:
    global_var: "I'm global!"

  tasks:
  - name: Set local_var1
    set_fact:
      local_var1: "I'm local to this play"
    
  - name: Include tasks with variables
    include_tasks: tasks.yml
    vars:
      included_var: "I should be available to the included tasks but not the parent play"
  
  - name: Import tasks with shared variables
    import_tasks: shared_tasks.yml
    vars:
      global_var: "I've been overridden!"
  
  - name: Show variable values
    debug:
      var: "{{ item }}"
    with_items:
      - global_var
      - local_var1
      - local_var2
      - included_var
