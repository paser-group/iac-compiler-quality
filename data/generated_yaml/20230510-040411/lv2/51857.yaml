
---
- hosts: all
  gather_facts: no
  vars:
    extra_vars: ["VAR1", "VAR2"]
    additional_vars: "myvars"
  tasks:
  - name: Extra Vars with File but missing @ Prefix
    command: echo "Extra Vars with file but missing @ prefix"
    register: result
    with_file:
      - "{{ extra_vars }}"
    failed_when: "'@' not in item.path and item.path.endswith('myvars')"
    ignore_errors: "{{ additional_vars }} == 'ignore_errors'"
