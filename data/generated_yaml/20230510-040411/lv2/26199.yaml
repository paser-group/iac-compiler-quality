
- hosts: all
  become: true
  vars:
    plugin_list:
      - jenkins_plugin:foo
      - jenkins_plugin:bar
      - jenkins_plugin:foobar
  tasks:
    - name: Install Jenkins Plugins
      jenkins_plugin:
        name: "{{ item.split(':')[1] }}"
        state: latest
        url_username: "{{ url_username | default('admin') }}"
        url_password: "{{ url_password | default('secret') }}"
        verify_ssl: "{{ verify_ssl | default(omit) }}"
        force: "{{ force | default(true) }}"
        backup: "{{ backup | default(true) }}"
        update_center_url: "{{ update_center_url | default('http://updates.jenkins-ci.org/update-center.json') }}"
        retries: "{{ retries | default(0) }}"
        delay: "{{ delay | default(0) }}"
        timeout: "{{ timeout | default(60) }}"
        install_deps: "{{ install_deps | default(true) }}"
        description: "{{ description | default(omit) }}"
  ignore_errors: True
  register: result
  changed_when: result is not defined
  failed_when: result is not defined
