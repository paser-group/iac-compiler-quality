
---
- hosts: localhost
  gather_facts: no

  tasks:
    - name: Initialize a list with a vault variable
      set_fact:
        my_list: "{{ [vault_var_one, vault_var_two] | default([]) }}"

    - name: Test if the list is not empty
      assert:
        that: my_list | length > 0

    - name: Iterate over the list and print each item
      debug:
        var: item
      loop: "{{ my_list }}"

    - name: Test if the list contains a specific value
      assert:
        that: "specific_value" in my_list

    - name: Test if the list contains a non-existent value
      assert:
        that: "non_existent_value" not in my_list

    - name: Test if the list contains a null value
      assert:
        that: null not in my_list

    - name: Test if the list contains an undefined variable
      assert:
        that: undefined_var not in my_list

    - name: Test if the list contains a string that resembles a vault variable
      assert:
        that: "{{ 'Vault_var' + 'iable' }}" not in my_list

    - name: Test if the list contains a string that starts with a vault variable
      assert:
        that: "{{ 'vault_var' }}" not in my_list

    - name: Test if the list contains a string that ends with a vault variable
      assert:
        that: "{{ 'variable' + 'vault_var' }}" not in my_list
