
- hosts: all
  gather_facts: no

  tasks:

    # Empty list variable
    - set_fact:
        empty_list: []

    # Loop over empty list
    - debug:
        msg: "{{ item }}"
      loop: "{{ empty_list }}"

    # Test an undefined variable
    - set_fact:
        undefined_var: "{{ non_existent_var }}"      

    # Nested loops
    - set_fact:
        nested_loop_var: "{{ item }}-{{ subitem }}"
      loop:
        - 1
        - 2
      loop_control:
        label: outer_loop
      vars:
        subitem: "{{ ['a', 'b'] }}"

    # Unconventional syntax
    - set_fact:
        uncon_{{ item }}: "{{ range(0,9)|random }}"
      loop:
        - a
        - b
        - c
        - d
        - e

    # Inline variable definition
    - debug:
        var: "{{ {'new_var': range(0,10)}['new_var'] }}"

    # Multiple variables in one set_fact task
    - set_fact:
        var1: "{{ range(1,5) }}"
        var2: "{{ 'hello' }}"
