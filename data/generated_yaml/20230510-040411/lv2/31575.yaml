
- name: Test ios_config command failures
  hosts: target
  gather_facts: false
  tasks:
  - name: Test invalid command
    ios_config:
      provider: "{{ ios_provider }}"
      commands:
        - invalid_command
      ignore_errors: yes

  - name: Test exception handling
    ios_config:
      provider: "{{ ios_provider }}"
      commands:
        - show run | invalid_command
      ignore_errors: yes

  - name: Test command execution failure
    ios_config:
      provider: "{{ ios_provider }}"
      commands:
        - invalid_command
      register: result
    ignore_errors: yes

  - name: Test config commands failure
    ios_config:
      provider: "{{ ios_provider }}"
      commands:
        - ios_config mode exec
        - invalid_command
        - ios_config mode terminal
      ignore_errors: yes
