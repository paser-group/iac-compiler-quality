
---
- hosts: localhost
  tasks:
    - name: Downloading multipart S3 objects
      s3:
        bucket: mybucket
        object: "{{ item }}"
        dest: /folder
        mode: get
        multipart_threshold: 5MB
        validate_certs: no
      loop:
        - object1.part1
        - object1.part2
        - object1.part3
        - object2.part1
        - object2.part2

    - name: Downloading single S3 object with dest as directory
      s3:
        bucket: mybucket
        object: object3
        dest: /folder/
        mode: get
        validate_certs: no

    - name: Downloading single non-existent S3 object
      s3:
        bucket: mybucket
        object: non_existent_object
        dest: /folder
        mode: get
        validate_certs: no

    - name: Uploading to S3 with access key and secret key
      s3:
        bucket: mybucket
        object: myobject.txt
        src: /local/path/to/file
        mode: put
        access_key: AKIAYOURACCESSKEY
        secret_key: YOURSECRETACCESSKEY
        validate_certs: no

    - name: List objects from S3 with delimiter
      s3:
        bucket: mybucket
        prefix: mydir/
        delimiter: /
        mode: list
        validate_certs: no
