
- name: test ec2_vpc with ignored profile parameter
  hosts: localhost
  gather_facts: no
  
  tasks:
    - name: create vpc
      ec2_vpc:
        state: present
        cidr_block: 10.0.0.0/24
        region: us-west-2
        profile: "{{ item }}"
      with_items:
        - default
        - non-existent-profile
        - "{{ [] }}"
        - 123
        - null
        - undefined_variable
      register: result
  
    - name: debug result
      debug:
        var: result

