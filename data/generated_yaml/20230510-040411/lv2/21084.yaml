
---
- name: Test Ansible Compiler with Edge Cases
  hosts: localhost
  gather_facts: false

  vars:
      somevar: "{{ {'key1': 'value1', 'key2': 'value2', 'key3': 'value3'} }}"
      missingvar: "{{ hostvars['badhost'] | default('default value', True) }}"

  tasks:
  - name: Test Unconventional Syntax
    debug:
      msg: "{{ somevar['key4', 'key5'] | default('default msg') }}"

  - name: Test Unexpected Input
    debug:
      msg: "{{ missingvar }}"
