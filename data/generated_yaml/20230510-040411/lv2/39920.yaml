
- name: Test Junos Config module
  hosts: all
  gather_facts: no
  vars:
    junos_config: "# Some sample Junos Config"
  tasks:
    - name: Test with invalid key name
      junos_config:
        provider:
          host: 192.0.2.1
          username: testuser
          password: testpassword
        config:
          - invalid_key: "{{ junos_config }}"
      register: result
      ignore_errors: yes

    - name: Test with unicode in config
      junos_config:
        provider:
          host: 192.0.2.1
          username: testuser
          password: testpassword
        config:
          - "{{ junos_config | replace('sample', '\\u221E') }}"
      register: result
      ignore_errors: yes

    - name: Test with invalid provider credentials
      junos_config:
        provider:
          host: 192.0.2.1
          username: testuser
          password: invalid_password
        config:
          - "{{ junos_config }}"
      register: result
      ignore_errors: yes

    - name: Test with invalid provider hostname
      junos_config:
        provider:
          host: invalid.example.com
          username: testuser
          password: testpassword
        config:
          - "{{ junos_config }}"
      register: result
      ignore_errors: yes

    - name: Test with invalid provider username
      junos_config:
        provider:
          host: 192.0.2.1
          username: invalid_username
          password: testpassword
        config:
          - "{{ junos_config }}"
      register: result
      ignore_errors: yes
