
- name: copy module test playbook
  hosts: localhost
  gather_facts: no

  tasks:
    # Ensure copy behaves properly with path specified
    - name: copy file to destination directory with path specified
      copy:
        src: /path/to/source/file
        dest: /path/to/destination/directory/
        path: /path/to/destination/directory/
      register: result1
      ignore_errors: yes

    # Ensure copy behaves properly with dest specified
    - name: copy file to destination directory with dest specified
      copy:
        src: /path/to/source/file
        dest: /path/to/destination/directory/
      register: result2
      ignore_errors: yes

    # Test copy with various and invalid path/dest values
    - name: copy file with invalid/missing path value
      copy:
        src: /path/to/source/file
        path: /invalid/path/
      register: result3
      ignore_errors: yes

    - name: copy file with invalid/missing dest value
      copy:
        src: /path/to/source/file
        dest: /invalid/path/to/destination/directory/
      register: result4
      ignore_errors: yes

    - name: copy file with invalid/missing path and dest values
      copy:
        src: /path/to/source/file
        path: /invalid/path/
        dest: /invalid/path/to/destination/directory/
      register: result5
      ignore_errors: yes

    # Test copy with unconventional syntax
    - name: unconventional syntax test
      copy:
        src: /path/to/source/file
        dest: /path/to/destination/directory/
      register: "{{ 'result6' }}"
      ignore_errors: yes

    # Test copy with expected change true/false values
    - name: copy file to destination directory with path specified and expects change
      copy:
        src: /path/to/source/file
        dest: /path/to/destination/directory/
        path: /path/to/destination/directory/
      register: result7
      ignore_errors: yes
      changed_when: true

    - name: copy file to destination directory with dest specified and expects no change
      copy:
        src: /path/to/source/file
        dest: /path/to/destination/directory/
      register: result8
      ignore_errors: yes
      changed_when: false

    # Test copy with unexpected input type
    - name: copy file with unexpected input type
      copy:
        src: /path/to/source/file
        dest: "{{ [1,2,3] }}"
      register: result9
      ignore_errors: yes
