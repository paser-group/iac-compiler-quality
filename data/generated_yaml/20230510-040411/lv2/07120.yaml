
- name: Test rhn_channel
  hosts: all
  vars:
    invalid_channel: "||cat /etc/passwd||"
    valid_channel: "rhel-6-server-rpms"
    non_string_channel: 123
    nested_dict_channel:
      child: "rhel-7-server-rpms"
  tasks:
    - name: Test invalid rhn_channel
      rhn_channel:
        channel: "{{ invalid_channel }}"
      ignore_errors: true
      
    - name: Test non-string rhn_channel
      rhn_channel:
        channel: "{{ non_string_channel }}"
      ignore_errors: true

    - name: Test nested dict rhn_channel
      rhn_channel:
        channel: "{{ nested_dict_channel }}"
      ignore_errors: true

    - name: Test valid rhn_channel
      rhn_channel:
        channel: "{{ valid_channel }}"
      ignore_errors: true
      
    - name: Test non-existent rhn_channel
      rhn_channel:
        channel: "nonexistent-channel"
      ignore_errors: true
