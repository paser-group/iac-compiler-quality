
---
- name: Test AWS EC2 module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Launch EC2 instance without specifying image id
      ec2:
        key_name: ec2-keypair
        instance_type: t2.nano
        region: us-west-2
        count: 1
      register: ec2_instance

    - name: Print Instance IDs of created EC2 instances
      debug:
        var: ec2_instance.instances[*].id
