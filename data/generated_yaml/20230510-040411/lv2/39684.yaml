
- hosts: localhost
  gather_facts: no
  vars:
    var1: "default_value"
  roles:
    - role: "example_role"
      var1: "{{ var1_var }}"
      var2: "{{ undefined_var }}"
      var3: "{{ var1|default('default_value') }}"
      var4: "{{ var1 if var5 is defined else 'default_value' }}"
      var5: "{{ (True and False) or (True and (not False)) }}"
      var6: "{{ [{'key': 'value_1'}, {'key': 'value_2'}] | selectattr('key', undefined_var) | join(', ') }}"
  tasks:
  - debug:
      var: var1_var
  - import_role:
      name: "example_role"
      tasks_from: "{{ task_file }}"
  - include_role:
      name: "example_role"
      tasks_from: "{{ undefined_variable }}"
