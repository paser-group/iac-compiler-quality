
- name: Memory Issue with include_tasks
  hosts: localhost
  vars:
    my_list: [1, 2, 3]
    my_dict:
      a: 1
      b: 2
      c: 3
  tasks:
    - name: Task 1
      debug:
        msg: "This is task 1."
    - name: Task 2
      set_fact:
        my_fact: "{{ my_list | length }}"
      debug:
        msg: "my_fact is {{ my_fact }}"
    - name: Task 3
      shell: |
        echo "This is task 3."
    - name: Task 4
      pause:
        seconds: 10
      debug:
        msg: "This is task 4."
    - name: Task 5
      include_tasks: "{{ my_list }}"
      when: my_list | length > 0
    - name: Task 6
      include_tasks: "{{ my_dict }}"
      when: my_dict is defined 
    - name: Task 7
      include_tasks: "non_existent_tasks.yaml"
      ignore_errors: true
    - name: Task 8
      include_vars: non_existent_file.yaml
      ignore_errors: true
    - name: Task 9
      fail:
        msg: "This is task 9."
    - name: Task 10
      assert:
        that: (my_list | length) == 3
      debug:
        msg: "This is task 10."
    - name: Task 11
      set_fact:
        long_string: "{{ 'a' * 1000000 }}"
    - name: Task 12
      debug:
        msg: "{{ long_string | regex_replace('^a+', '') }}"
