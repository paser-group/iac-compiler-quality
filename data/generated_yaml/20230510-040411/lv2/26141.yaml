
- name: Test template with default empty string as filter
  hosts: all
  vars:
    my_var: ""

  tasks:
    - name: Template with default empty string as filter
      template:
        src: template.j2
        dest: /tmp/output.txt
        vars:
          my_var: "{{ my_var | default('') }}"

    - name: Display output file contents
      shell: cat /tmp/output.txt
      register: output

    - name: Debug output
      debug:
        var: output.stdout

    - name: Fail if output contains "None"
      fail:
        msg: "Output contains 'None'."
      when: output.stdout.find("None") != -1
