
- hosts: switches
  gather_facts: no

  vars:
    vlan_id: 200

  tasks:
    - name: Create VLAN with more than 6 interfaces
      vlan:
        vlan_id: "{{ vlan_id }}"
        name: "vlan{{ vlan_id }}"
        state: present
        interfaces: 
          - ge-0/0/{{ item }}
      with_items: 
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
        - 10
      ignore_errors: yes

    - name: Verify VLAN is created
      command: "show vlan id {{ vlan_id }} | display json"
      register: vlan_json
      ignore_errors: yes

    - debug: var=vlan_json
