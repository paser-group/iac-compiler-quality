
- name: Expose Ansible compiler issues related to ec2_vpc_route_table error
  hosts: localhost
  gather_facts: no
  tasks:
    - ec2_vpc_route_table:
        vpc_id: "{{ item }}"
        state: present
        tags:
          - "{{ lookup('env', 'TAGS') }}"
          - "Name:test{{[1,2,3,4,5,6,7,8,9,0]|random}}"
        subnets:
          -  subnet-12345
        route_table_name: "{{ 'test'*1024 }}"
      with_items:
        - vpc-12345
        - vpc-67890
      register: ec2_vpc_route_table_result

    - assert:
        that:
          - "ec2_vpc_route_table_result is not failed"
