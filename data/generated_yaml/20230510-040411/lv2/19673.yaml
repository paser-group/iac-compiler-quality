
---

- hosts: all
  vars:
    hosts: "{{ groups['all'] | join(' ') }}"
    invalid_hostnames: "foo,bar,baz"

  tasks:
    # Task 1: Clear host errors when no errors are present
    - name: Clear errors when there are no errors
      clear_host_errors:

    # Task 2: Clear host errors when invalid hosts are specified
    - name: Clear errors for invalid hosts
      clear_host_errors:
        hosts: "{{ invalid_hostnames }}"

    # Task 3: Clear host errors for a specific host
    - name: Clear errors for a specific host
      clear_host_errors:
        hosts: "{{ groups['all'][0] }}"

    # Task 4: Clear host errors for multiple hosts
    - name: Clear errors for multiple hosts
      clear_host_errors:
        hosts: "{{ groups['all'][:2] | join(' ') }}"

    # Task 5: Clear host errors with invalid syntax
    - name: Clear errors with invalid syntax
      clear_host_errors: "{{ invalid_syntax }}"

    # Task 6: Clear host errors with unexpected input
    - name: Clear errors with unexpected input
      clear_host_errors:
        hosts: "{{ groups['all'] | sort | reverse }}"
      
    # Task 7: Clear host errors with nested dictionary input
    - name: Clear errors with nested dictionary input
      clear_host_errors:
        hosts:
          foo:
            bar:
              - invalid_host1
              - invalid_host2
          baz:
            - invalid_host3

    # Task 8: Clear host errors with malformed input
    - name: Clear errors with malformed input
      clear_host_errors:
        '- hosts: all':
          - clear_host_errors:

