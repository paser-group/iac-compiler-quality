
- hosts: all
  tasks:
  - name: create sql server
    azure_rm_sqlserver:
      resource_group: "{{ item.resource_group }}"
      name: "{{ item.name }}"
      location: "{{ item.location }}"
      admin_user: "{{ item.admin_user | default('admin') }}"
      admin_password: "{{ item.admin_password | default('P@ssword1') }}"
      version: "{{ item.version | default('12.0') }}"
      state: "{{ item.state | default('present') }}"
      service_objective: "{{ item.service_objective | default('S0') }}"
    with_items:
    - { resource_group: "test-rg", name: "' OR ''='", location: "westus2", admin_user: "adminuser", admin_password: "password", version: "12.0", service_objective: "S0" }
    - { resource_group: "test-rg", name: "test-sqlsrv-1", location: "eastus", admin_user: "", admin_password: "password", version: "", state: "absent", service_objective: "T0" }
    - { resource_group: "test-rg", name: "", location: "centralus", admin_user: "admin", admin_password: "", version: "14.0", service_objective: "S1" }
    - { resource_group: "", name: "test-sqlsrv-4", location: "southcentralus", admin_user: "adminuser", admin_password: "pa$$word1", version: "12.0", state: "present", service_objective: "" }
