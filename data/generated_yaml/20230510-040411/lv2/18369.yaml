
- hosts: localhost
  gather_facts: no

  tasks:
    - name: Set INI lookup with default value
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=section_name file=/tmp/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup without default value
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=section_name file=/tmp/config.ini") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with empty option value
      set_fact:
        ini_lookup: '{{ lookup("ini", "option= section=section_name file=/tmp/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with empty section value
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section= file=/tmp/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with empty file value
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=section_name file= default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set non-existent config file path
      set_fact:
        file_path: '/tmp/no_file.ini'

    - name: Set INI lookup with non-existent config file path
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=section_name file=" ~ file_path ~ " default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with invalid config file path
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=section_name file=/tmp/invalid_directory/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with invalid option key
      set_fact:
        ini_lookup: '{{ lookup("ini", "invalid_key=value section=section_name file=/tmp/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup

    - name: Set INI lookup with invalid section key
      set_fact:
        ini_lookup: '{{ lookup("ini", "option=value section=invalid_section file=/tmp/config.ini default=not_found") }}'

    - name: Print INI lookup result
      debug:
        var: ini_lookup
