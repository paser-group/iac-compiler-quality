
- name: Azure RM Web App Error Testing Playbook 
  hosts: localhost 
  gather_facts: no

  tasks:
    - name: Add a Web App which already exists
      azure_rm_webapp:
        resource_group: "{{ invalid_resource_group }}"
        name: "{{ existing_webapp_name }}"
        location: "{{ location }}"
        kind: "{{ kind }}"
        sku:
          name: "{{ sku_name }}"
          tier: "{{ sku_tier }}"
        state: present
      register: result

    - name: Add a Web App with invalid resource group
      azure_rm_webapp:
        resource_group: "{{ invalid_resource_group }}"
        name: "{{ non_existing_webapp_name }}"
        location: "{{ location }}"
        kind: "{{ kind }}"
        sku:
          name: "{{ sku_name }}"
          tier: "{{ sku_tier }}"
        state: present
      register: result

    - name: Add a Web App with invalid SKU
      azure_rm_webapp:
        resource_group: "{{ resource_group }}"
        name: "{{ new_webapp_name }}"
        location: "{{ location }}"
        kind: "{{ kind }}"
        sku:
          name: "{{ invalid_sku_name }}"
          tier: "{{ sku_tier }}"
        state: present
      register: result

    - name: Remove the newly added Web App
      azure_rm_webapp:
        resource_group: "{{ resource_group }}"
        name: "{{ new_webapp_name }}"
        state: absent
