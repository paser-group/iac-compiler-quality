
- hosts: all
  tasks:
    - name: "Ensure variable is defined with a default value"
      set_fact:
        some_var: "{{ some_undefined_var | default('default_value') }}"

    - name: "Check if variable is defined"
      debug:
        var: some_var
      when: some_var is defined

    - name: "Check if variable is undefined"
      debug:
        var: some_undefined_var
      when: some_undefined_var is not defined

    - name: "Ensure variable evaluates to true"
      fail:
        msg: "Variable is not true"
      when: not some_var

    - name: "Ensure variable evaluates to false"
      fail:
        msg: "Variable is not false"
      when: some_var

    - name: "Ensure variable evaluates to false using default filter"
      fail:
        msg: "Variable is not false"
      when: "{{ some_var | default(false) }}"

    - name: "Ensure variable evaluates to false using ternary operator"
      fail:
        msg: "Variable is not false"
      when: "{{ some_var if some_var != 'default_value' else false }}"
