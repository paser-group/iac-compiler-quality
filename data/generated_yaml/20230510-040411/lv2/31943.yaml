
- name: Test playbook for 'include_role' tasks
  hosts: localhost
  vars:
    roles_dir: "/path/to/roles"
  tasks:
    # Test basic functionality
    - include_role:
        name: my_role

    # Test dynamic option
    - include_role:
        name: "{{ some_var }}"
        dynamic: yes

    # Test include_vars with a non-string argument
    - include_vars:
        file: ["not_a_valid_file"]

    # Test include with a non-existent file path
    - include:
        file: "/non_existent_file.yml"

    # Test include_tasks with unconventional syntax
    - include_tasks: "{{ some_var" + " }}.yml"

    # Test setting arguments in a dict format
    - include_role:
        name: my_role
        static: no

    # Test using an undefined variable
    - include_role:
        name: "{{ var_does_not_exist }}"

    # Test chaining include_role and include_tasks
    - include_role:
        name: my_role
      tasks:
        - name: subtask1
          debug:
            msg: "Subtask 1"
        - name: subtask2
          debug:
            msg: "Subtask 2"

    # Test including a role with a non-existent path
    - include_role:
        name: my_role
        role_path: "/non_existent_path/{{ roles_dir }}"
