
---
- name: Test CVE-2020-10729 fix in Ansible 2.8
  hosts: all
  become: true
  tasks:
    - name: Install package with vulnerable dependency
      yum:
        name: <script>alert("CVE-2020-10729");</script>
        state: present

    - name: Verify package installation
      shell: "rpm -qa|grep CVE-2020-10729"
      register: package_output
      ignore_errors: true

    - name: Display package output
      debug:
        var: package_output

    - name: Check if package was removed
      shell: "rpm -qa|grep CVE-2020-10729"
      register: package_output2
      failed_when: package_output2.stdout is not None

    - name: Display package output after remove
      debug:
        var: package_output2
...
