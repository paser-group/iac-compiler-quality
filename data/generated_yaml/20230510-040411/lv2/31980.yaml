
- name: Test include_role default variable values
  hosts: localhost
  vars:
    role_var: "{{ undefined | default(default_var) }}"
    nested_var: "{{ { item: undefined_nested | default(default_nested) } }}"
    complex_var: "{{ ansible_os_family == 'RedHat' | ternary({'value': [(undefined_nested_1 | default(default_nested_1))]}, {'value': [(undefined_nested_2 | default(default_nested_2))]}) }}"
  tasks:
    - name: Include role with default vars
      include_role:
        name: test-role
        vars:
          role_var: "{{ role_var }}"
          nested_var: "{{ nested_var }}"
          complex_var: "{{ complex_var }}"
