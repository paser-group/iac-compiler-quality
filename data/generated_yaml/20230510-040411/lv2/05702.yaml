
- name: Synchronize module SSH local connection issue test
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Test synchronize module local connection
      synchronize:
        mode: push
        src: /tmp/
        dest: /var/www/html/
        rsync_opts:
          - "--rsh=ssh"
        delegate_to: localhost

    - name: Test synchronize mode with invalid SSH connection attempt
      synchronize:
        mode: push
        src: /tmp/
        dest: /var/www/html/
        rsync_opts:
          - "--rsh=invalid"
        delegate_to: localhost

    - name: Test synchronize mode with different SSH identity
      synchronize:
        mode: push
        src: /tmp/
        dest: /var/www/html/
        rsync_opts:
          - "-i=/path/to/other/identity"
        delegate_to: localhost

    - name: Test synchronize mode using local connection
      synchronize:
        mode: push
        src: /tmp/
        dest: /var/www/html/
        delegate_to: localhost

    - name: Test synchronize mode with invalid source path
      synchronize:
        mode: push
        src: /nonexistent/path/
        dest: /var/www/html/
        delegate_to: localhost

    - name: Test synchronize mode with invalid destination path
      synchronize:
        mode: push
        src: /tmp/
        dest: /nonexistent/path/
        delegate_to: localhost
