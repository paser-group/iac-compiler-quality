
- name: Stress Test Ansible Galaxy Collection Installation Process
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Install Galaxy Collection with Large Name
    community.general.collection:
      name: "{{ 'a' * 260 }}"
      force: yes
      
  - name: Install Nonexistent Collection
    community.general.collection:
      name: "nonexistentcollection"
      force: yes

  - name: Install Collection with Invalid Character
    community.general.collection:
      name: "my>collection"
      force: yes

  - name: Install Collection with Invalid Version
    community.general.collection:
      name: "mycollection:invalidversion"
      force: yes

  - name: Install Collection without Force Flag
    community.general.collection:
      name: "mycollection"
      
  - name: Install Collection with Force Flag and Path
    community.general.collection:
      name: "mycollection"
      force: yes
      path: "/tmp/mycollection"

  - name: Install Collection with Invalid Path
    community.general.collection:
      name: "mycollection"
      force: yes
      path: "/tmp/non-existent-directory/mycollection"

  - name: Install Collection with Alternate Credential
    community.general.collection:
      name: "mycollection"
      force: yes
      ansible_connection: docker

  - name: Install Excessive Number of Collections
    community.general.collection:
      name: "mycollection"
      force: yes
    loop: "{{ range(1, 100) | list }}"

  - name: Install Collection with Integer instead of String
    community.general.collection:
      name: 1234
      force: yes

  - name: Install Collection with Space in Name
    community.general.collection:
      name: "my collection"
      force: yes

  - name: Install Collection with Uppercase Letters
    community.general.collection:
      name: "MyCollection"
      force: yes

  - name: Install Collection with Multiple Colons
    community.general.collection:
      name: "mycollection:version:1.0"
      force: yes

  - name: Install Collection with Multiple Versions
    community.general.collection:
      name: "mycollection:1.0,2.0"
      force: yes

  - name: Install Collection with Multiple Names
    community.general.collection:
      name:
        - "mycollection"
        - "anothercollection"
      force: yes
