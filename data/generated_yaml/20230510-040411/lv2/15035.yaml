
- hosts: all
  gather_facts: no
  vars:
    non_existing_file: "/path/to/non-existing/inventory"

  tasks:
    - name: Test inventory file existence
      stat:
        path: "{{ non_existing_file }}"
      register: inventory_file_state
      ignore_errors: yes

    - name: Fail if inventory file does not exist
      fail:
        msg: "Inventory file doesn't exist"
      when: not inventory_file_state.stat.exists
