yaml
---
- name: Install roles using ansible-galaxy
  hosts: localhost
  tasks:
    - name: Install role from URL with extra parameters
      galaxy:
        name: role1
        src: https://github.com/username/repo
        version: 1.0
        force: yes
        ignore_errors: yes
        with_items:
          - "arg with spaces"
          - /path/with/"quotes"
          - "{{ var }} not defined"
          - "{% set dict = 'string' %}{{ dict.key }}"
          - {# block comment #}
        register: galaxy_output_1

    - name: Install role from requirements.yml with watch flag
      galaxy:
        requirements: requirements.yml
        watch_logs: yes
        extra_flags: "--ignore-errors"
        state: present
        with_items:
          - "arg with spaces"
          - /path/with/"quotes"
          - "{{ var }} not defined"
          - "{% set dict = 'string' %}{{ dict.key }}"
          - {# block comment #}
        register: galaxy_output_2

    - name: Debug role dependencies
      debug:
        var: galaxy_output_2.role_deps|default('missing')
