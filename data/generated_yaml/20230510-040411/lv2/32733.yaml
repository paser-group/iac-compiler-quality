
- hosts: all
  gather_facts: false
  tasks:
  - name: Install Pacman
    pacman:
      name: "{{ item }}"
    with_items:
      - package1
      - ["package2", "package3"]
      - {"name": "package4", "state": "present"}
      - {"name": "package5", "state": "absent"}
      - "package6"
      - "space package"
      - "{{ variable }}"

  - name: Remove Pacman
    pacman:
      name: package7
      state: "removed"
    when: ansible_distribution == "Ubuntu"

  - name: Upgrade Pacman
    pacman:
      name: ["package8", "package9"]
      state: "latest"
    loop: "{{ packages }}"
    vars:
      packages: "{{ ['package8', 'package9'] }}"

  - name: Test get_bin_path
    command:
      "{{ ansible_pkg_mgr }} --version"
