
- name: Aggregated Inventory Test
  hosts: localhost
  gather_facts: no
  
  vars:
    inventory_list:
      - invalid_inventory_1.yml
      - invalid_inventory_2.yml
      - valid_inventory.yml

  tasks:
    - name: Load multiple inventories
      include_vars:
        dir: "{{ item }}"
      with_items: "{{ inventory_list }}"
      ignore_errors: true
      
    - name: Run a command on all hosts
      command: echo "Running command on {{ item }}"
      register: command_output
      with_inventory_hostnames:
        - all
      ignore_errors: true
      
    - name: Display command output
      debug:
        msg: "{{ command_output }}"
