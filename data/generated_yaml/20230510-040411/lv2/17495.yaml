
- name: Test Ansible Playbook
  hosts: all
  tasks:
    - name: Install docker-py
      pip:
        name: docker-py="{{ ['2.7.0', '2.8.0', '2.9.0', '2.10.0'] | random }}"
        state: present
    - name: Check docker-py version
      command: docker --version | awk '{print $3}' | awk -F '[:]' '{print $2}'
      register: docker_py_version_output
    - name: Check docker-py version again
      command: "{{ 'docker --version' | random }} | awk '{print $3}' | awk -F '[:]' '{print $2}'"
      register: docker_py_version_output2
    - name: Debug output
      debug:
        var: docker_py_version_output
        verbosity: 2
    - name: Uninstall docker-py
      pip:
        name: docker-py
        state: absent
