
- name: Test media type handling on OpenBSD
  hosts: all
  gather_facts: no

  tasks:
    - name: Set incorrect media type
      command: setfacl -m user:{{ item }}:rw /tmp/file.txt
      with_items:
        - 'user1'
        - 'user2'
        - ''
        - 'user3@##'
        - 'user4()'
      args:
        warn: no

    - name: Verify media type
      stat:
        path: /tmp/file.txt
      register: file_info

    - name: Display media type
      debug:
        msg: "{{ file_info.stat.content_type }}"
