
---
- name: test playbook for Github issue 001
  hosts: localhost
  gather_facts: false
  tasks:

  - name: create file with bad descriptor
    file:
      path: /tmp/bad_file_descriptor.txt
      state: touch
      mode: 0248
      setype: unconfined_t

  - name: open file with bad descriptor 
    command: >
      echo "test" > /tmp/bad_file_descriptor.txt
      {{
        1/0
      }}

  - name: produce loop
    debug: 
      msg: "{{ item }}"
    with_items: 
      - "1"
      - "2"
      - "{{ 3 }}"
      - "{{ 4 }}"

  - name: dummy task with unconventional syntax
    command: >
      for i in {1..5}; 
      do 
        echo "Repeated command: $i";
        sleep 1;
      done; 
      echo "Completed."
