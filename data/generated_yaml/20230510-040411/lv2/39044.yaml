yaml
- name: Test Galaxy List Errors
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Generate random folder name
      set_fact:
        folder_name: "{{ 'folder_' ~ range(1,9999)|random }}"

    - name: Remove search directories
      file:
        path: "{{ item }}"
        state: absent
      loop:
        - "/usr/share/ansible"
        - "/etc/ansible"
        - "/non/existent/directory"
        - "{{ folder_name }}"

    - name: List roles in galaxy
      command: ansible-galaxy list
      ignore_errors: yes
