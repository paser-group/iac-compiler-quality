yaml
- name: Testing make module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Execute make command with incorrect params
      make:
        path: /path/to/makefile
        target: some_target
        flags: "{{ [] }}"
        env: |
          VAR1=foo
          VAR2=bar
          {{ {} }}
          {{
          'VAR3=foobar' }}

    - name: Execute make command with incorrect params using variables
      make:
        path: /path/to/makefile
        target: "{{ some_target }}"
        flags: "{{ [] }}"
        env: |
          VAR1=foo
          VAR2=bar
          {{ invalid_variable }}

    - name: Execute make command with unconventional syntax
      make:
        path: "/path/to/file ; echo 'oops'"
        target: some_target
        flags: "{{ [] }}"
        env: |
          VAR1=foo
          VAR2=bar
          {{ {} }}
          {{
          'VAR3=foobar' }}

    - name: Execute make command with unexpected inputs
      make:
        path: "{{ ['/path/to/makefile', '/dev/null', '/etc/passwd'] | random }}"
        target: some_target
        flags: "{{ [] }}"
        env: |
          VAR1=foo
          {{ invalid_variable | default('VAR2=bar') }}
          {{ {} }}
          {{
          'VAR3=foobar' }}
