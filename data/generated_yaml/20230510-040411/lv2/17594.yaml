
- name: Test playbook for Parsing Errors
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Define an empty variable as a dictionary
      set_fact:
        my_dict: "{}"

    - name: Define a variable with an invalid JSON string
      set_fact:
        my_json: '{{ "key: value" }}'

    - name: Define a variable with an invalid YAML string
      set_fact:
        my_yaml: |
          ---
          key: value
          -

    - name: Use an undefined variable as a dictionary key
      debug:
        var: {{ my_dict.undefined_key }}

    - name: Use an undefined variable in a Jinja2 expression
      debug:
        msg: '{{ my_undefined_variable | random }}'

    - name: Use an invalid filter in a Jinja2 expression
      debug:
        msg: '{{ "hello world" | undefined_filter }}'

    - name: Use an undefined module
      undefined_module:
        arg: value

    - name: Raise an exception
      fail:
        msg: "This task is designed to fail"
