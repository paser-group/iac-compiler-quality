
- name: Test Ansible Playbook for nova_keypair bug
  hosts: localhost
  gather_facts: no
  tasks:

  - name: Create nova_keypair with empty name
    os_keypair:
      name: ""

  - name: Create nova_keypair with special characters in name
    os_keypair:
      name: "keypair!@#$%^&*()_+-={}[]|\\:;'\"<>,.?/~`"

  - name: Create nova_keypair with long name
    os_keypair:
      name: "a" * 100

  - name: Create nova_keypair with invalid character in name
    os_keypair:
      name: "keypair with space"

  - name: Create nova_keypair with invalid argument
    os_keypair:
      name: "keypair"
      state: invalid_argument

  - name: Create nova_keypair with custom public key path
    os_keypair:
      name: "keypair"
      public_key_file: "/tmp/non_existing_public_key.pub"

  - name: Delete non-existent nova_keypair
    os_keypair:
      name: "non_existent_keypair"
      state: absent

  - name: List nova_keypairs with invalid authentication credentials
    os_keypair_facts:
      auth:
        auth_url: "http://invalid_auth_url.com"
        username: "invalid_username"
        password: "invalid_password"
        project_name: "invalid_project_name"
      validate_certs: false
