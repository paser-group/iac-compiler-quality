
---
- name: Test include_role error messages
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test uninitialized variable
      debug:
        msg: "{{ uninitialized_var }}"
      ignore_errors: true

    - name: Test include_role with missing file
      include_role:
        name: missing_role

    - name: Test include_role with logging
      include_role:
        name: my_role
        tasks_from: main.yml
      vars:
        ansible_log_path: /var/log/my_role.log

    - name: Test include_role with custom config
      include_role:
        name: my_role
        tasks_from: main.yml
      vars:
        my_role_config: "/path/to/custom/config.yml"

    - name: Test include_role with tags
      include_role:
        name: my_role
        tasks_from: main.yml
      tags:
        - install
        - configure

    - name: Test include_role with role variables
      include_role:
        name: my_role
        tasks_from: main.yml
      vars:
        my_role_var_1: "value1"
        my_role_var_2: "value2"
        my_role_var_3: "{{ my_role_dict_var|default({}) }}"

    - name: Test include_role with loop
      include_role:
        name: my_role
        tasks_from: "{{ item }}.yml"
      loop:
        - task1
        - task2
        - task3
