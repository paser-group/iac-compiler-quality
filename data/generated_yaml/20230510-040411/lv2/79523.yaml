
---
- name: Test apt module with unconventional syntax and inputs
  hosts: all
  become: true

  tasks:
    - name: Update apt cache with unconventional syntax
      apt:
        update_cache: yes
        autoclean: True
        force_apt_get: True
        update_cache_valid_time: '{{ "" }}" + (((60*60)*24)*3) + 1 ' + "{{ "" }}"'

    - name: Install package with unexpected input
      apt:
        name: '["unzip", "apache2"]'
        state: present

    - name: Update apt cache with edge case input
      apt:
        update_cache: yes
        update_cache_valid_time: {{ "none" }}

    - name: Uninstall package with unconventional syntax
      apt:
        name: 'unzip apache2'
        state: absent
        purge: True
        force_apt_get: '{{ ansible_boolean_false|bool }}'

    - name: Install package with invalid state
      apt:
        name: zip
        state: install

    - name: Update apt cache with empty string
      apt:
        update_cache: yes
        update_cache_valid_time: ''

    - name: Install package with unconventional input type
      apt:
        name: "{{ 'unzip' + '.' * 10000 }}"
        state: present
