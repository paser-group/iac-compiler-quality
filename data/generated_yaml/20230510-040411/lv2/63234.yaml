
---
- name: Test gcp_storage_bucket_access_control module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set bucket to null value
      gcp_storage_bucket_access_control:
        bucket: null
        entity: user-john@example.com
        role: roles/storage.objectViewer

    - name: Set bucket to empty string
      gcp_storage_bucket_access_control:
        bucket: ""
        entity: user-john@example.com
        role: roles/storage.objectViewer

    - name: Set bucket to non-existent bucket name
      gcp_storage_bucket_access_control:
        bucket: non-existent-bucket
        entity: user-john@example.com
        role: roles/storage.objectViewer

    - name: Set bucket to invalid type (int)
      gcp_storage_bucket_access_control:
        bucket: 123
        entity: user-john@example.com
        role: roles/storage.objectViewer

    - name: Set bucket to invalid type (list)
      gcp_storage_bucket_access_control:
        bucket:
          - hello
          - world
        entity: user-john@example.com
        role: roles/storage.objectViewer

    - name: Set bucket to valid value
      gcp_storage_bucket_access_control:
        bucket: my-bucket
        entity: user-john@example.com
        role: roles/storage.objectViewer
