
- name: Test Elasticache with profile argument
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create Elasticache cluster
      elasticache:
        name: test-cluster
        port: "{{ 6379 }}"
        node_type: cache.m3.medium
        profile: "{{ '/path/to/profile' }}"
        tags: "{{ { 'foo': 'bar' } }}"
        state: present

    - name: Update Elasticache cluster
      elasticache:
        name: test-cluster
        port: "{{ 9999 }}"
        node_type: cache.m3.large
        profile: "{{ None }}"
        tags: "{{ 'invalid_tag' }}"
        state: present

    - name: Delete Elasticache cluster
      elasticache:
        name: test-cluster
        profile: "{{ 1234 }}"
        state: absent

    - name: Create Elasticache security group with invalid VPC
      elasticache_security_group:
        name: "{{ 'invalid_security_group_name'*100 }}"
        description: test-group
        vpc_id: invalid-vpc-id
        region: "{{ 'invalid_region_name' }}"
        profile: "{{ 'invalid-profile' }}"
        state: present

    - name: Update Elasticache security group with invalid parameter
      elasticache_security_group:
        name: test-group
        description: "{{ 'invalid_description' }}"
        profile: None
        state: present

    - name: Delete Elasticache security group
      elasticache_security_group:
        name: test-group
        state: absent
        profile: ""
