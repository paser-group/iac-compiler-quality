
---
- hosts: localhost
  gather_facts: no
  vars:
    region: us-west-2
    profile: ""

  tasks:
    # EC2 VPC Net with profile set to ""
    - name: Test ec2_vpc_net with empty profile
      ec2_vpc_net:
        profile: "{{ profile }}"
        region: "{{ region }}"
        cidr_block: "172.16.0.0/20"
        state: present
      register: ec2_vpc_net_output_empty_profile
    - debug:
        var: ec2_vpc_net_output_empty_profile

    # EC2 VPC Net with invalid region
    - name: Test ec2_vpc_net with invalid region
      ec2_vpc_net:
        profile: "my_profile"
        region: "us-west-999"
        cidr_block: "172.16.0.0/20"
        state: present
      register: ec2_vpc_net_output_invalid_region
    - debug:
        var: ec2_vpc_net_output_invalid_region

    # EC2 VPC Net with invalid CIDR block
    - name: Test ec2_vpc_net with invalid cidr_block
      ec2_vpc_net:
        profile: "my_profile"
        region: "{{ region }}"
        cidr_block: "172.16.0.0/99"
        state: present
      register: ec2_vpc_net_output_invalid_cidr
    - debug:
        var: ec2_vpc_net_output_invalid_cidr

    # EC2 VPC Net with subnet_ids
    - name: Test ec2_vpc_net with subnet_ids
      ec2_vpc_net:
        profile: "my_profile"
        region: "{{ region }}"
        cidr_block: "172.16.0.0/20"
        state: present
        subnet_ids:
          - subnet-12345678
          - subnet-abcdefgh
      register: ec2_vpc_net_output_with_subnet_ids
    - debug:
        var: ec2_vpc_net_output_with_subnet_ids

    # EC2 VPC Net with tags
    - name: Test ec2_vpc_net with tags
      ec2_vpc_net:
        profile: "my_profile"
        region: "{{ region }}"
        cidr_block: "172.16.0.0/20"
        state: present
        tags:
          key1: value1
          key2: value2
      register: ec2_vpc_net_output_with_tags
    - debug:
        var: ec2_vpc_net_output_with_tags
