
- name: Test compute zone list permissions issue
  hosts: localhost
  gather_facts: false
  
  tasks:
  
    - name: Create a new project with an unconventional syntax for zone list permissions
      gcp_compute_project_info:
        name: "{{ 'example-project-' + ('a' * 251) }}"
        zone_list_permissions: "{{ ['europe-west1-b:' + ('a' * 251)] }}"
      register: project_result
      
    - name: Generate a variety of edge cases for testing zone list permissions
      debug:
        msg: |
          {%- set zone_name = 'us-central1-a' -%}
          {%- for i in range(1, 10) -%}
          '{%- if i >= 2 -%},'{%- endif -%}'compute.zones.get,{%- if i >= 6 -%}'{%- endif -%}compute.${{undefined}}{%- endfor -%}'
          
    - name: Test invalid input for zone list permissions
      gcp_compute_disk:
        zone: "{{ 'us-west-' + ('a' * 251) + '-1' }}"
