
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Create droplet
      digital_ocean:
        state: present
        api_token: "{{ digital_ocean_api_token }}"
        name: "{{ droplet_name }}"
        size_id: "invalid_input"
        region: "{{ region }}"
        image: "{{ image }}"
        ssh_keys: []
        wait_timeout: 30
      register: result
      failed_when: "'msg' in result and 'state' in result['msg'] and ('HTTP Error 404: Not Found' in result['msg']['state'] or 'HTTP Error 422: Unprocessable Entity' in result['msg']['state'])"

    - name: Debug output
      debug:
        var: result
