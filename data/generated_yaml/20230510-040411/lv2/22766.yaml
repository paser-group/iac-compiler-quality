
---
- name: Test Ansible facts
  hosts: all
  gather_facts: true

  tasks:
    - name: Get ansible_cmdline fact
      set_fact:
        ansible_cmdline_fact: "{{ ansible_cmdline }}"

    - name: Print the ansible_cmdline fact
      debug:
        var: ansible_cmdline_fact

    - name: Check if rd.lvm.lv is present in the ansible_cmdline fact
      debug:
        var: item
      loop: "{{ ansible_cmdline_fact.split(' ') }}"
      when: "'rd.lvm.lv' in item"
