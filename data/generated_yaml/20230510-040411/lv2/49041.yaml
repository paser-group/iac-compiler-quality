yaml
- hosts: localhost
  gather_facts: no
  tasks:
    - block:
        - name: Task 1
          command: /invalid/command
          register: result
      rescue:
        - name: Rescue Task 1
          debug:
            msg: "Handled Rescue Task 1"
        - name: Rescue Task 2
          debug:
            msg: "Handled Rescue Task 2"
      any_errors_fatal: true

    - block:
        - name: Task 2
          command: /invalid/command
          register: result
      rescue:
        - name: Rescue Task 3
          debug:
            msg: "Handled Rescue Task 3"
          ignore_errors: true
        - name: Rescue Task 4
          debug:
            msg: "Handled Rescue Task 4"
      any_errors_fatal: false

    - block:
        - name: Task 3
          command: /invalid/command
          register: result
        - name: Task 4
          command: /invalid/command
          register: result2
      rescue:
        - name: Rescue Task 5
          debug:
            msg: "Handled Rescue Task 5"
      any_errors_fatal: "{{ invalid_var }}"
