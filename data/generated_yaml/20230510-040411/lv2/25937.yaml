
- name: Test Git Module for ssh-keyscan errors
  hosts: localhost
  tasks:
  - name: Clone using standard syntax
    git:
      repo: git@github.com:ansible/ansible.git
      dest: /tmp/ansible
  - name: Clone using invalid protocol
    git:
      repo: foo@github.com:ansible/ansible.git
      dest: /tmp/ansible
  - name: Clone using incorrect path
    git:
      repo: git@github.com:ansible/nonexistent-repo.git
      dest: /tmp/ansible
  - name: Clone using SSH without ssh-agent or private key
    git:
      repo: git@github.com:ansible/ansible.git
      dest: /tmp/ansible
      ssh_opts: "-o StrictHostKeyChecking=no"
  - name: Clone using http with invalid url
    git:
      repo: http://non-existent.server.com/org/repo.git
      dest: /tmp/repo
  - name: Clone using custom ssh-keyscan path
    git:
      repo: git@github.com:ansible/ansible.git
      dest: /tmp/ansible
      ssh_keyscan_path: /usr/local/bin/ssh-keyscan
  - name: Clone using invalid ssh-keyscan path
    git:
      repo: git@github.com:ansible/ansible.git
      dest: /tmp/ansible
      ssh_keyscan_path: /usr/bin/ssh-keyscan-nonexistent-path
  - name: Clone using other ssh-keyscan options
    git:
      repo: git@github.com:ansible/ansible.git
      dest: /tmp/ansible
      ssh_keyscan_options: '-p 2222'
