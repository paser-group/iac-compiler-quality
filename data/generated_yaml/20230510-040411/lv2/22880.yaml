yaml
- name: Generate Junos Config Update
  hosts: junos
  tasks:
    - name: Generate Junos Config Update
      debug:
        msg: "Generating Junos Config Update"
    - name: Generate Junos Config
      junos_config:
        lines:
          - "set groups {{ random('abcdefghijklmnopqrstuvwxyz', 10) }} system host-name {{ random('abcdefghijklmnopqrstuvwxyz', 10) }}"
          - "set interface {{ random('abcdefghijklmnopqrstuvwxyz', 10) }} {{ random(['unit', 'sub', 'sub-sub']) }}-interface {{ random(range(0, 5000)) }} {{ random(['encapsulation ethernet-vlan', 'encapsulation pp0.1', 'encapsulation jumbo-frames']) }}"
          - "set interface {{ random('abcdefghijklmnopqrstuvwxyz', 10) }} {{ random(['unit', 'sub', 'sub-sub']) }}-interface {{ random(range(0, 5000)) }} vlan members {{ random(range(1, 4096)) }}, {{ random('abcdefghijklmnopqrstuvwxyz', 10) }}"
          - "{{ random(['set system syslog host 192.0.2.1 any', 'set system syslog user * any emergency', 'set system syslog archive size 10m files 10']) }} {{ random(range(1, 100)) }}"
        diff: "rollback 1"
      register: junos_config

    - name: Check for Junos Config Update
      debug:
        msg: "Junos Config Update {{ 'succeeded' if junos_config.changed else 'failed' }}"
