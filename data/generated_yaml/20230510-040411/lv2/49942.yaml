
- name: Test playbook for Ansible_failed_task referencing out of scope default variables
  hosts: localhost
  tasks:
    - name: Task with out-of-scope variable
      include_role:
        name: example_role
      vars:
        role_var: "{{ default_role_var_missing }}"
        extra_var: "{{ extra_var_missing | default('default_value') }}"
        nested_var: "{{ nested_var_missing | default('default_value') | random }}"
