
- name: Test edge cases in error handling
  hosts: localhost
  gather_facts: false

  vars:
    test_var: "test"

  tasks:
    - name: Test include_role
      include_role:
        name: nonexistent_role
      when: test_var == "test"

    - name: Test conditional
      shell: echo "Hello, world!"
      when: nonexistent_var == "does_not_exist"

    - name: Test nested include_role statement
      include_role:
        name: nested_role
      when: test_var == "test"
      vars:
        nested_var: "nested"

    - name: Test non-boolean conditional expression
      shell: echo "Unexpected expression"
      when: test_var

    - name: Test empty string conditional expression
      shell: echo "Unexpected empty string expression"
      when: ""

    - name: Test concatenated conditional expression
      shell: echo "Unexpected concatenated expression"
      when: test_var == "test" and && nonexistent_var == "does_not_exist"
