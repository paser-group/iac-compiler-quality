
- hosts: localhost
  gather_facts: false

  vars:
    proxy: http://proxy-server:8080/

  tasks:
    - name: Lookup hashi_vault with proxy
      hashi_vault:
        path: /secrets/app
        field: password
        proxy: "{{ proxy }}"

    - name: Lookup hashi_vault without proxy
      hashi_vault:
        path: /secrets/app
        field: password

    - name: Lookup hashi_vault with wrong path
      hashi_vault:
        path: /secrets/wrong
        field: password

    - name: Lookup hashi_vault with wrong field
      hashi_vault:
        path: /secrets/app
        field: wrong_field

    - name: Lookup hashi_vault with no path
      hashi_vault:
        field: password

    - name: Lookup hashi_vault with no field
      hashi_vault:
        path: /secrets/app

    - name: Lookup hashi_vault with invalid proxy
      hashi_vault:
        path: /secrets/app
        field: password
        proxy: invalid_proxy

    - name: Lookup hashi_vault with numeric proxy
      hashi_vault:
        path: /secrets/app
        field: password
        proxy: 8080

    - name: Lookup hashi_vault with empty proxy
      hashi_vault:
        path: /secrets/app
        field: password
        proxy: ""

    - name: Lookup hashi_vault with space in proxy
      hashi_vault:
        path: /secrets/app
        field: password
        proxy: " "

    - name: Lookup hashi_vault with multi-level path
      hashi_vault:
        path: /secrets/app/multi-level
        field: password
        proxy: "{{ proxy }}"

    - name: Lookup hashi_vault with multi-level path and field
      hashi_vault:
        path: /secrets/app/multi-level
        field: password.secure
        proxy: "{{ proxy }}"
