
- name: Create MySQL user
  hosts: localhost
  tasks:
    - name: Include MySQL credentials
      include_vars:
        file: .my.cnf

    - name: Create user with non-existent host
      mysql_user:
        name: test
        host: invalidhost
        password: test
        state: present

    - name: Create user with excessively long name
      mysql_user:
        name: "{{ 'a' * 200 }}"
        password: test
        state: present

    - name: Create user with a non-string name
      mysql_user:
        name: 123
        password: test
        state: present

    - name: Create user with an invalid password
      mysql_user:
        name: test
        password: "<>"
        state: present

    - name: Create user with an excessively long password
      mysql_user:
        name: test
        password: "{{ 'a' * 200 }}"
        state: present

    - name: Create user with an invalid state
      mysql_user:
        name: test
        password: test
        state: absent-invalid

    - name: Create user without specifying a password
      mysql_user:
        name: test
        state: present

    - name: Create user without specifying a name
      mysql_user:
        password: test
        state: present
