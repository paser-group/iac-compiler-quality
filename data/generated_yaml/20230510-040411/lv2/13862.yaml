
- hosts: all
  tasks:
    # Unconventional syntax
    - name: Run command with unconventional syntax
      command: "echo ${{unknown_variable}}"
      register: command_unconventional_syntax

    # Edge case 1: K=V syntax
    - name: Run command with k=v argument
      command: 'echo "This is {{env_variable}}"'
      environment:
        env_variable: "VALUE"

    # Edge case 2: Double quotes in single quotes
    - name: Run command with double quotes in single quotes
      command: 'echo "I am using \\"double quotes\\" inside single quotes"'
      register: command_double_quotes

    # Unexpected input
    - name: Run command with unexpected input
      command: "{{command_with_unexpected_input}}"
      register: command_unexpected_input
      ignore_errors: true

    # Shell module edge case 1: unexpected output
    - name: Run shell command with unexpected output
      shell: "echo $unknown_variable"
      register: shell_unexpected_output
      ignore_errors: true

    # Shell module edge case 2: nested quotes
    - name: Run shell command with nested quotes
      shell: "echo 'single quotes nested {{\"double quotes\"}} inside single quotes'"
      register: shell_nested_quotes

    # Shell module unexpected input
    - name: Run shell command with unexpected input
      shell: "{{shell_command_with_unexpected_input}}"
      register: shell_unexpected_input
      ignore_errors: true
