
- name: Test Playbook for Connection Error
  hosts: ios_device
  gather_facts: no
  
  vars:
    commands:
      - show interfaces
      - show ip route
      - show version
      - show running-config
      - show logging
      - show tech-support
      - show diag
      - show startup-config

  tasks:
    - name: Execute Command
      ios_command:
        commands: "{{ commands }}"
      register: output
      connection: faulty
      
    - name: Print Output
      debug:
        var: output.stdout
