
- name: Pip Segfault Playbook
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Install Package with --ignore-installed
    pip:
      name: "{{ item }}"
      extra_args: "--ignore-installed{{{ 's' * 10000 }}}"
    with_items:
      - package1
      - package2
      - package3

  - name: Attempt to remove package3
    pip:
      name: package3
      state: absent
      extra_args: "--ignore-installed{{{ 's' * 10000 }}}"

  - name: Attempt to upgrade package2
    pip:
      name: package2
      extra_args: "--ignore-installed{{ 's' * 1000000 }}"
      state: latest

  - name: Attempt to list packages
    pip:
      extra_args: "{{ 'x' * 100000 }}"
      list: yes
