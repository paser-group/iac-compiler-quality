
- name: Double extended error message testcase
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Define an empty string variable
      set_fact:
        my_var: ''

    - name: Set the variable with an undefined var
      set_fact:
        my_var: '{{ some_var }}'

    - name: Define a nonexistent path
      file:
        path: /tmp/does_not_exist
        state: directory

    - name: Execute an invalid command on a remote host
      command: some_invalid_command

    - name: Define an undefined group variable
      set_fact:
        group_var: '{{ groups.undefined_group }}'

    - name: Try to access a nonexistent file
      debug:
        var: nonexistent_file

    - name: Set a nonexistent variable as a fact
      set_fact:
        '{{ nonexistent_var }}': some_value
