yaml
- name: Configure nxos_pim_rp_address
  hosts: <your_target_host_or_group>
  gather_facts: no

  tasks:
    - name: Set nxos_pim_rp_address for cli transport
      nxos_pim_rp_address:
        rp_address: <Enter RP Address>
        host: <Enter Host>
        username: <Enter Username>
        password: <Enter Password>
      register: cli_output
      when: ansible_transport == 'cli'

    - name: Set nxos_pim_rp_address for nxapi transport
      nxos_pim_rp_address:
        rp_address: <Enter RP Address>
        host: <Enter Host>
        port: <Enter Port>
        protocol: https
        username: <Enter Username>
        password: <Enter Password>
      register: nxapi_output
      when: ansible_transport == 'nxapi'

    - name: Check for errors
      debug:
        msg: "Errors found for both transports"
      when: cli_output.failed and nxapi_output.failed
