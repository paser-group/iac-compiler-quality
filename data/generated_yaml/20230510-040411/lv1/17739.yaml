yaml
---
- name: Update Service module boilerplate
  hosts: all
  become: yes
  
  tasks:
  - name: Install python3-pip
    apt:
      name: python3-pip
      state: latest
      
  - name: Install virtualenv
    pip:
      name: virtualenv
      state: latest
      
  - name: Create virtualenv
    command: virtualenv venv
    args:
      chdir: ~/path/to/ansible/playbook/directory
      
  - name: Activate virtualenv
    shell: source venv/bin/activate
    args:
      chdir: ~/path/to/ansible/playbook/directory
      
  - name: Update Service module boilerplate
    git:
      repo: https://github.com/ansible/ansible.git
      dest: ~/path/to/ansible/playbook/directory
    args:
      chdir: ~/path/to/ansible/playbook/directory
      
  - name: Install requirements.txt
    pip:
      requirements: requirements.txt
    args:
      chdir: ~/path/to/ansible/playbook/directory
      
  - name: Run Service module boilerplate
    command: ansible-service-boilerplate run
    args:
      chdir: ~/path/to/ansible/playbook/directory
