
- name: Install and configure RouterOS command
  hosts: your_router_host
  gather_facts: no

  vars:
    routeros_user: your_username
    routeros_password: your_password

  tasks:
  - name: Install RouterOS command
    apt:
      name: routeros-utils
      state: present

  - name: Configure RouterOS command
    routeros_command:
      commands:
      - /system/routerboard/print
      host: your_router_host
      user: "{{ routeros_user }}"
      password: "{{ routeros_password }}"
      validate_certs: no
    register: result

  - name: Check RouterOS command errors
    assert:
      that:
      - result is not failed and result.rc == 0
      fail_msg: "RouterOS command failed on first connection"
