
---
- name: Azure Key Vault Secrets
  hosts: localhost
  connection: local
  tasks:
  
  - name: Set authentication variables
    set_fact:
      azure_client_id: "<your Azure client ID>"
      azure_secret: "<your Azure secret>"
      azure_tenant: "<your Azure tenant>"
  
  - name: Get Key Vault secrets
    azure_rm_keyvaultsecret:
      vault_url: "https://<your vault name>.vault.azure.net/"
      secret_name: "<your secret name>"
      client_id: "{{ azure_client_id }}"
      client_secret: "{{ azure_secret }}"
      tenant: "{{ azure_tenant }}"
    register: secret_result
  
  - name: Print secret values
    debug:
      var: secret_result
