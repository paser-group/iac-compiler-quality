
---
- name: Configure VLANs on IOS Devices
  hosts: ios_devices
 
  tasks:
  - name: Show VLANs
    ios_command:
      commands:
        - show vlan
    register: vlan_output
    
  - name: Configure VLANs
    ios_vlans:
      vlan_id: 20
      name: Test_VLAN_20
      state: present
    when: "'shows' not in vlan_output.stdout_lines[0]"
