
---
- name: Demonstrate MODULE FAILURE issue
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Execute shell command
      shell: <command-to-execute>
      register: shell_command_output
      ignore_errors: true
      
    - name: Check registered output for error
      fail:
        msg: "Failed to execute shell command"
      when: shell_command_output is failed
      
    - name: Execute command
      command: <command-to-execute>
      register: command_output
      ignore_errors: true
      
    - name: Check registered output for error
      fail:
        msg: "Failed to execute command"
      when: command_output is failed
