
- name: Configure IOS Device
  hosts: ios_devices
  gather_facts: no
  vars:
    ansible_network_os: ios
  tasks:
    - name: configure ios device
      ios_config:
        lines:
          - access-list 101 permit ip any any
          - interface GigabitEthernet0/0
          - ip address 192.168.0.100 255.255.255.0
        parents:
          - interface GigabitEthernet0/0
      register: result
      until: result is succeeded
      retries: 3
      delay: 5
