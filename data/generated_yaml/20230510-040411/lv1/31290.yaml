
---
- name: Debugging YAML Inventory Plugin issue
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Debugging YAML Inventory Plugin issue
      debug: msg="Error message for YAML Inventory Plugin failure: {{ output.stdout }}"
      ignore_errors: true
      failed_when: false
      run_once: yes
      delegate_to: localhost

    - name: Run YAML Inventory Plugin
      include_vars:
        file: "inventory.yml"
        name: "inventory_data"
      delegate_to: localhost

    - name: Check if hosts are loaded from YAML Inventory Plugin
      debug: msg="{{ ansible_play_batch }} is loaded from inventory file"
