yaml
---
- name: Fix precedence issue for variables in arrays
  hosts: all
  become: true
  
  vars:
    my_array:
      - "{{ var1 }}"
      - "{{ var2 }}"

  tasks:
    - name: Set variables for group_vars/all
      set_fact:
        var1: "value1"
        var2: "value2"
      when: inventory_hostname == groups['all'][0]

    - name: Print array contents with correct values
      debug:
        var: my_array
