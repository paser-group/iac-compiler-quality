
---
- hosts: your_host
  become: yes
  gather_facts: yes
  tasks:
    - name: Install dependencies
      apt:
        name:
          - python3-pip
          - python3-setuptools

    - name: Upgrade pip
      pip:
        name: pip
        extra_args: --upgrade

    - name: Install ansible
      pip:
        name: ansible

    - name: Install galaxy roles
      shell: "ansible-galaxy collection install community.general --force"
      register: galaxy_roles

    - name: Include the role in the playbook
      include_role:
        name: your_role
