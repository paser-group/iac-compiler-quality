yaml
---
- hosts: all
  gather_facts: false

  vars:
    url: "http://example.com/api/resource"
    api_token: "{{ lookup('env', 'API_TOKEN') }}"

  tasks:
    - name: Make API request with token
      uri:
        url: "{{ url }}"
        method: GET
        headers:
          Authorization: "Bearer {{ api_token }}"
        validate_certs: no

