yaml
---
- name: Fix eos_config task failure issue
  hosts: your_host

  vars:
    eosapi_transport: eapi

  tasks:
    - name: Configure eos_config module with eAPI transport
      eos_config:
        provider: "{{eosprovider}}"
        transport: "{{eosapi_transport}}"
        lines:
          - interface loopback0
          - ip address 192.0.2.1/24
          - shutdown
      register: eos_config_result
      ignore_errors: yes
      
    - name: Check if eos_config task failed or not
      fail:
        msg: "eos_config task failed"
      when: eos_config_result.failed == true
