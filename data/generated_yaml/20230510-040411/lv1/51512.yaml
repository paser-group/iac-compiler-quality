
- name: Win_DSC PSCredential Conversion Error for xFailoverCluster xCluster Resource
  hosts: windows_hosts
  gather_facts: no
  tasks:
    - name: Import WinRM module
      win_import_playbook:
        code: "Import-Module -Name 'PSDscResources' -ModuleName 'xFailOverCluster' -Verbose"
        ps_credential: "{{ ps_cred }}"
    - name: Fix xFailoverCluster xCluster resource error
      win_xcluster:
        clustername: "{{ cluster_name }}"
        address: "{{ cluster_ip }}"
        type: "{{ cluster_type }}"
      register: cluster_result
    - name: Print results
      debug:
        msg: "{{ cluster_result }}"
