yaml
- hosts: localhost
  gather_facts: false
 
  vars: 
    gcp_project_id: "YOUR_GCP_PROJECT_ID"
    service_account_email: "YOUR_SERVICE_ACCOUNT_EMAIL"

  tasks:
  - name: Install required python modules
    pip:
      name:
      - requests
      - google-auth
      - google-auth-oauthlib
      - google-auth-httplib2
  
  - name: Create Compute Engine Instance
    gce:
      instance_names: "{{ item.instance_name }}"
      zone: "{{ item.zone }}"
      machine_type: "{{ item.machine_type }}"
      image_family: "{{ item.image_family }}"
      image_project: "{{ item.image_project }}"
      service_account_email: "{{ service_account_email }}"
      project_id: "{{ gcp_project_id }}"
    loop:
    - {instance_name: "test-instance-1", zone: "us-central1-a", machine_type: "n1-standard-1", image_family: "debian-cloud", image_project: "debian-cloud"}
