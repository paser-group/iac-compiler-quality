
---
- hosts: big-ip
  gather_facts: no
  become: true
 
  vars:
    provider:
      server: 'big-ip.example.com'
      user: 'admin'
      password: 'mypassword'
      validate_certs: no
  
  tasks:
  
    - name: Ensure correct provider parameters
      set_fact:
        bigip_provider: "{{ provider }}"
      when: bigip_provider is undefined
  
    - name: Add pool member to existing pool
      bigip_pool_member:
        provider: "{{ bigip_provider }}"
        state: present
        pool: 'my-pool'
        name: '10.0.0.1'
        port: '80'
