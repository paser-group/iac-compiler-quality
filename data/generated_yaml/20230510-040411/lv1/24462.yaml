yaml
---
- name: Fix become prompt issue
  hosts: all

  vars:
    become_prompt: "sudo"

  tasks:
    - name: Set become prompt
      lineinfile:
        dest: /etc/ansible/ansible.cfg
        regexp: '^#( )?(become_ask_pass = ).*'
        line: '{{ item }}'
      become: true
      with_items:
        - 'become_ask_pass = False'  
        - 'become_prompt = {{ become_prompt }}'
        - 'become_method = sudo'

    - name: Ping all hosts
      ping:
