yaml
---
- name: Azure deployment
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Retry Azure deployment if encounter 503 error
      azure_rm_deployment:
        resource_group_name: my_resource_group
        deployment_name: my_deployment_name
        template_file: my_template.json
        parameters_file: my_parameters.json
      register: azure_result
      retries: 3
      delay: 10
      until: azure_result.status == 'Succeeded'
