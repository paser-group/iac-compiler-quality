
- name: Delete Default Security Group Rules
  hosts: localhost
  become: true
  gather_facts: false

  vars:
    openstack_username: your_openstack_username
    openstack_password: your_openstack_password
    openstack_auth_url: https://example.com:5000/v3
    openstack_project_name: your_project_name
    openstack_domain_name: default

  tasks:
    - name: Delete Default SG Rules
      os_security_group_rule:
        state: absent
        auth:
          auth_url: "{{ openstack_auth_url }}"
          username: "{{ openstack_username }}"
          password: "{{ openstack_password }}"
          project_name: "{{ openstack_project_name }}"
          domain_name: "{{ openstack_domain_name }}"
          project_domain_name: "{{ openstack_domain_name }}"
          user_domain_name: "{{ openstack_domain_name }}"
        security_group: default
        direction: ingress
        delete_on_unassociated: true
        from_port: 1
        to_port: 65535
        ip_protocol: tcp
      register: os_sg_rule_deleted

    - name: Print task result
      debug:
        var: os_sg_rule_deleted
