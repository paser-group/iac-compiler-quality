
---
- name: Install Ansible Galaxy Collections
  hosts: localhost
  become: true
  gather_facts: true

  tasks:
    - name: Update pip to latest version
      pip:
        name: pip
        state: latest
    
    - name: Install resolvelib version 0.7.1
      pip:
        name: resolvelib==0.7.1
        state: present
    
    - name: Install Ansible Galaxy Collections
      ansible-galaxy:
        collection: <collection_name>
      loop: "{{ collections }}"
      vars:
        collections:
          - <collection_name>

  handlers:
    - name: Restart Ansible service
      systemd:
        name: ansible
        state: restarted
