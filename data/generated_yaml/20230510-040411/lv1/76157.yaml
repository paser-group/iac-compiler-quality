
---
- name: Invoking ansible as unprivileged user but ssh with sudo
  hosts: all
  become: yes
  tasks:
    - name: Set permissions on temporary directory
      file:
        path: /tmp
        mode: 1777
        state: directory

    - name: Run the playbook
      remote_user: unprivileged_user
      become: yes
      become_method: sudo
      become_user: root
      connection: ssh
      gather_facts: yes
      ignore_errors: yes # To ignore any other errors and move on with execution 
      # The rest of your tasks to configure the host(s) go here
