yaml
---
- name: Configure AWS VPC using ec2_vpc module
  hosts: localhost
  gather_facts: no

  vars:
    aws_profile: "my_aws_profile"
    vpc_region: "us-west-2"
    vpc_cidr: "10.0.0.0/16"
    vpc_name: "my_vpc"

  tasks:
    - name: Create VPC
      ec2_vpc:
        aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
        aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"
        region: "{{ vpc_region }}"
        cidr_block: "{{ vpc_cidr }}"
        state: present
        name: "{{ vpc_name }}"
        profile: "{{ aws_profile }}"
      register: vpc

    - name: Print VPC details
      debug:
        var: vpc
