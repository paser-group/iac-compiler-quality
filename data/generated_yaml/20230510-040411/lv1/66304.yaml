yaml
---
- name: Correct ‘ansible_virtualization_type’ fact for Alpine containers
  hosts: localhost
  gather_facts: true

  tasks:
    - name: Update fact cache
      setup:
        filter:
          ansible_virtualization_type

    - name: Set proper ‘ansible_virtualization_type’ for Alpine containers
      set_fact:
        ansible_virtualization_type: "docker"
      when: ansible_distribution == ‘Alpine’

    - name: Print fact on console
      debug:
        var: ansible_virtualization_type
