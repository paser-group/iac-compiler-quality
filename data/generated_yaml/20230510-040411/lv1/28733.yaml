
- name: Demonstrate 'when' condition issue
  hosts: all
  tasks:
    - name: Create a variable
      set_fact:
        my_var: some_value
    
    - name: Try to access a non-existent variable
      debug:
        var: my_non_existent_var
      ignore_errors: true
      
    - name: Print a message based on whether variable exists or not
      debug:
        msg: "Variable 'my_var' exists."
      when: my_var is defined
      
    - name: Print a message based on whether non-existent variable exists or not
      debug:
        msg: "Variable 'my_non_existent_var' exists."
      when: my_non_existent_var is defined
