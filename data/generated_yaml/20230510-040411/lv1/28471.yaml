
---

- name: Example playbook for vmware_guest MAC address gather facts error
  hosts: all
  gather_facts: true
  vars:
    mac_address: "00:50:56:XX:XX:XX" # replace with desired MAC address
  tasks:
    - name: Gather facts from VMware guests
      vmware_guest_facts:
        validate_certs: false # replace with desired value if necessary
      register: guest_facts

    - name: Check for correct MAC address
      fail:
        msg: "Mac address {{ mac_address }} not found. Please assign MAC address to vmware_guest NIC interface."
      when: "mac_address not in guest_facts.instance.hw_eth0.macaddress"

...

