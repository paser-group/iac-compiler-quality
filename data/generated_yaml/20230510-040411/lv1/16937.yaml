yaml
---
- name: Example Playbook
  hosts: all
  gather_facts: true

  tasks:
  - name: run_once task
    command: some-command
    run_once: true

  - name: task that can fail
    command: some-failing-command
    register: cmd_result

  - name: always task
    debug:
      msg: "This task will always run"
    always:
      - debug:
          msg: "The last command result was {{ cmd_result }}"

  - name: rescue task
    debug:
      msg: "This task will only run if a task fails"
    rescue:
      - debug:
          msg: "The last command result was {{ cmd_result }} and the previous task failed"
