
---
- name: Update Application Load Balancer (ALB) configuration
  hosts: all
  become: true

  tasks:
    - name: Check ALB configuration
      elb_application_lb_info:
        name: my-alb
      register: alb_config

    - name: Update ALB configuration
      elb_application_lb:
        name: my-alb
        access_logs_s3_prefix: /my-bucket/alb-logs/
      when: alb_config.access_logs_s3_prefix is not defined
