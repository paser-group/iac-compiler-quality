yaml
- name: Unzip faulty compressed file on Windows
  hosts: windows_servers

  tasks:
    - name: Unzip file
      win_unzip:
        src: C:\path\to\faulty\compressed\file.zip
        dest: C:\path\to\destination\folder\
        creates: C:\path\to\destination\folder\file.txt
      register: unzip_result

    - name: Check if unzip command failed
      fail:
        msg: "Unzip command failed: {{unzip_result}}."
      when: unzip_result.return_code != 0
