yaml
---
- name: Provision GCP Compute Instance
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Create GCP Instance
      community.gcp.gcp_compute_instance:
        name: my-instance
        machine_type: n1-standard-1
        zone: us-west1-b
        project: my-project
        auth_kind: serviceaccount
        service_account_file: "{{ lookup('env', 'GOOGLE_APPLICATION_CREDENTIALS') }}"
        scopes:
          - "https://www.googleapis.com/auth/compute"
        network_interfaces:
          - network: https://www.googleapis.com/compute/v1/projects/{{ project }}/global/networks/default
            subnetwork: https://www.googleapis.com/compute/v1/projects/{{ project }}/regions/us-west1/subnetworks/default

