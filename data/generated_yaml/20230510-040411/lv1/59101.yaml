
---
- name: Fix gcp_compute JSON output for ansible-inventory
  hosts: localhost
  connection: local

  tasks:

  - name: Install necessary Python libraries for gcp_compute
    pip:
      name: google-auth google-auth-oauthlib google-auth-httplib2 google-cloud-compute
      state: present

  - name: Update gcp_compute script
    lineinfile:
      path: /usr/bin/gcp_compute
      regexp: '^print'
      line: '    # print'
