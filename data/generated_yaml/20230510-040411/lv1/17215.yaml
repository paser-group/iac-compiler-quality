yaml
---
- name: Handle out of disk space issue
  hosts: your_servers
  become: true
  
  tasks:
    - name: Define temp_path variable
      set_fact:
        temp_path: /tmp # or any other directory that has enough space
      
    - name: Check free disk space
      shell: df -h "{{ temp_path }}"
      register: disk_space
      
    - name: Perform action if disk space is low
      fail:
        msg: "Out of disk space, cannot continue."
      when: disk_space.stdout_lines[-1].split()[3] | int < 1000000000 #minimum free space is 1GB
