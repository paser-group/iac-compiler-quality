yaml
- name: Update CloudFront Distribution
  hosts: aws_ec2_instances
  gather_facts: true
  vars:
    distribution_id: "EXAMPLE_DISTRIBUTION_ID"
    geolocation_setting:
      continent: "NA"
      country: "US"
      region: "CA"
  tasks:
    - name: Get Distribution Configuration
      cloudfront_distribution_facts:
        distribution_id: "{{ distribution_id }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
      register: dist_config
      
    - name: Update Geolocation Setting
      cloudfront_distribution:
        distribution_id: "{{ distribution_id }}"
        geolocation_setting: "{{ geolocation_setting }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
      when: "dist_config.distribution.config.geo_restriction.restriction_type == 'whitelist'"
