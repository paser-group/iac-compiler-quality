
- name: GCE modules using specified service account
  hosts: localhost
  gather_facts: no

  vars:
    my_service_account: your-service-account@your-project-id.iam.gserviceaccount.com

  tasks:
    - name: Create an instance using the specified service account
      gce:
        instance_names: my-instance
        machine_type: f1-micro
        zone: us-central1-a
        image: projects/debian-cloud/global/images/debian-10-buster-v20220920
        service_account_email: "{{ my_service_account }}"
      register: instance

    - name: Display the instance information
      debug:
        msg: "Instance summary - {{ instance.instance }}"
