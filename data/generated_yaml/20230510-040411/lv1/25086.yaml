
---
- name: Filter inventory hosts in VMware
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Gather VMware inventory
    vmware_inventory:
      hostname: "{{ vcenter_hostname }}"
      username: "{{ vcenter_username }}"
      password: "{{ vcenter_password }}"
      validate_certs: no
      vms:
      - name: "{{ vm_name }}"
        host_filter: "{{ host_filter }}"

  - name: Debug filtered hosts
    debug:
      var: inventory_hostname
