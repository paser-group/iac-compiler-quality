yaml
---
- name: Install packages with prefix using apt or yum
  hosts: all
  become: true
  
  tasks:
    - name: Install packages with prefix using apt
      apt:
        name: "{{ item }}"
      loop: "{{ packages }}"
      loop_control:
        label: "{{ 'Installing packages with prefix using apt: ' ~ item }}"
      when: "'apt' in ansible_pkg_mgr"
      vars:
        packages:
          - prefix1_package1
          - prefix1_package2
          - prefix1_package3

    - name: Install packages with prefix using yum
      yum:
        name: "{{ item }}"
      loop: "{{ packages }}"
      loop_control:
        label: "{{ 'Installing packages with prefix using yum: ' ~ item }}"
      when: "'yum' in ansible_pkg_mgr"
      vars:
        packages:
          - prefix2_package1
          - prefix2_package2
          - prefix2_package3
