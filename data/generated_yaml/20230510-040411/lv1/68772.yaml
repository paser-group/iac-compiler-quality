
- name: Fix osx_defaults integer type check issue
  hosts: [HOSTS]
  gather_facts: no
  become: yes
  tasks:
  - name: Modify osx_defaults integer type check
    command: >
      defaults write {{ item.domain }} {{ item.key }} -{{ item.type }} {{ item.value }}
    with_items:
      - { domain: "com.domain.app", key: "integerKey", type: "int", value: 10 }
  - name: Restart affected apps
    command: >
      killall {{ item }}
    with_items:
      - "app1"
      - "app2"
