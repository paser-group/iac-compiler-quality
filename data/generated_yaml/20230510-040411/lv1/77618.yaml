
- name: Install Python and Upgrade PIP
  hosts: all
  become: true

  tasks:
    - name: Install Python and PIP
      apt:
        name: python python-pip
        state: present

    - name: Upgrade setuptools
      pip:
        name: setuptools
        state: latest

    - name: Upgrade PIP
      pip:
        name: pip
        state: latest

- name: Add `f` Prefix to f-strings
  hosts: all
  become: true

  tasks:
    - name: Update Python for f-prefix
      pip:
        name: regex
        state: present

    - name: Replace f-strings with `f` Prefix
      replace:
        path: /path/to/file.py
        regexp: "'(?<!\\\\)(\'{1,3})(.*?)(?<!\\\\)\\1'"
        replace: '"f\\1'\\2''


