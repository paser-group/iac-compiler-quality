
- name: Playbook to fix Invalid Host error
  hosts: localhost
  gather_facts: False
  tasks:
  - name: Include dynamic inventory
    include_vars:
      file: inventory-script.yml

  - name: Ensure host is present in inventory
    add_host:
      name: "{{ inventory_hostname }}"
      ansible_user: "{{ ansible_user }}"
      ansible_port: "{{ ansible_port }}"
      ansible_ssh_private_key_file: "{{ ansible_ssh_private_key_file }}"
      ansible_host_key_checking: False
      groups: "{{ inventory_hostname }}"
    when: inventory_hostname is defined

  - name: Run the task for the host
    hosts: "{{ inventory_hostname }}"
    roles:
      - your_role_name
