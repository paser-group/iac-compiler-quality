
---
- name: Troubleshoot EOS EAPI Connection Issue
  hosts: your_host

  tasks:

    - name: Check if connection is successful
      eos_command:
        commands:
          - show version
      register: eos_output
      failed_when: eos_output is not defined

    - name: Display EAPI Connection Status
      debug:
        var: eos_output.stdout

    - name: Restart EAPI Service
      service:
        name: eos-configd
        state: restarted
