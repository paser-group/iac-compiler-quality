yaml
---
- name: Copy files from remote share
  hosts: all
  
  tasks:
  
  - name: Mount remote share on client machine
    mount:
      src: //remote-server/share
      name: /mnt/remote-share
      fstype: cifs
      state: mounted
      opts: "username=user,password=secret"
  
  - name: Copy files from share to local
    synchronize:
      src: "/mnt/remote-share/path/to/files"
      dest: "/local/path/to/files"
      mode: pull
  
  - name: Unmount remote share
    mount:
      path: /mnt/remote-share
      state: unmounted
