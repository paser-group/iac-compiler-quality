
---
- name: Gather NX-OS Facts
  hosts: your_host_group_name

  tasks:

  - name: Gather facts with nxapi transport
    nxos_facts:
      transport: nxapi
    register: nxapi_facts
    ignore_errors: yes

  - name: Gather facts with cli transport
    nxos_facts:
      transport: cli
    register: cli_facts
    ignore_errors: yes

  - name: Ensure facts were retrieved
    assert:
      that:
        - "nxapi_facts | success"
        - "cli_facts | success"
