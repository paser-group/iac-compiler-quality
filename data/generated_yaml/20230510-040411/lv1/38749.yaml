
---
- name: Playbook Name
  hosts: all

  tasks:
    - name: Task Name
      include_role:
        name: example_role
      delegate_to: "{{ inventory_hostname }}"
      become: true
      ignore_errors: true
      register: result

    - name: "Fail task if include_role used with delegate_to"
      fail:
        msg: "Using include_role with delegate_to is not supported"
      when: result is not failed
