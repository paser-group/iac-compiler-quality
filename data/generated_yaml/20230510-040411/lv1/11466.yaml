yaml
---
- name: Fix module error when using 'name'
  hosts: all
  tasks:
  - name: Install dependencies
    become: true
    apt:
      name:
      - python
      - python-pip
    ignore_errors: yes

  - name: Ensure package 'python-dev' is installed
    become: true
    apt:
      name:
      - python-dev
    when: ansible_distribution == "Ubuntu"

  - name: Upgrade pip
    become: true
    pip:
      name: pip
      extra_args: "--upgrade"

  - name: Install required Python modules
    become: true
    pip:
      name:
      - module-name
      - other-module-name
      - another-module-name

  - name: Test module
    command: module-name --name a_name --option-1 value-1 --option-2 value-2
    register: result

  - name: Debug output
    debug: var=result.stdout_lines
