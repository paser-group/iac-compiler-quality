
---
- name: Install the MySQL module
  hosts: all
  
  tasks:
    - name: Install required packages
      become: true
      apt:
        name:
          - python-mysqldb
          - python3-mysqldb
        state: present

    - name: Install MySQL library dependencies
      become: true
      apt:
        name:
          - libmysqlclient-dev
        state: present

    - name: Perform SQL query
      become: true
      mysql_query:
        query: "SELECT * FROM my_table"
        login_host: localhost
        login_user: myuser
        login_password: mypassword
      register: result

    - name: Print result
      debug:
        var: result.stdout_lines
