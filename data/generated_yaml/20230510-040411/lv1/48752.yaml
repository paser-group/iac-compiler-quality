yaml
---
- hosts: all
  become: true
  tasks:
    - name: Fetch hostname
      hostname:
      register: host_output

    - name: Display hostname
      debug:
        var: host_output.stdout_lines

    - name: Update hostname
      hostname:
        name: <new_hostname>
      when: host_output.stdout_lines[0] != "<new_hostname>"
