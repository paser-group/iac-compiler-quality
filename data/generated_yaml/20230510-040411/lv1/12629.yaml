
---
- name: Run commands on Ansible worker
  hosts: ansible_worker # Replace with the name or IP address of your Ansible worker(s)
  become: true
  tasks:
    - name: Check file system usage
      shell: df -h
      register: file_system_usage

    - name: Run command
      shell: your_command_here
      ignore_errors: true
      register: command_output

    - name: Debug command output
      debug:
        var: command_output

    - name: Alert on error
      fail:
        msg: "Command failed on {{ inventory_hostname }} with error {{ command_output.stderr }}"
      when: command_output|failed
