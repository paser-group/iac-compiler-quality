yaml
---
- name: Fix Ansible-vault Odd-length string error
  hosts: all
  become: true
  tasks:
    - name: Check if Ansible version is 2.5 or above
      assert:
        that: ansible_version.full | version_compare('2.5', '>=')
        msg: "Ansible version must be 2.5 or above"
    
    - name: Decrypt vaulted variable file
      ansible.builtin.command: ansible-vault decrypt /path/to/vaulted_file.yml --output /path/to/decrypted_file.yml

    - name: Install passlib python library
      ansible.builtin.pip:
        name: passlib

    - name: Encrypt vaulted variable file
      ansible.builtin.command: ansible-vault encrypt /path/to/decrypted_file.yml --output /path/to/vaulted_file.yml
