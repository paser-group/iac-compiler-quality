yaml
- name: Install Homebrew and Homebrew-Cask
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Install Homebrew
      command: >
        /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
      when: ansible_os_family == 'Darwin' and not 'homebrew' in ansible_pkg_mgr
    
    - name: Install Homebrew-Cask
      command: >
        brew tap caskroom/cask
      when: ansible_os_family == 'Darwin' and not 'homebrew-cask' in ansible_pkg_mgr
    
    - name: Update the Homebrew-Cask repository
      command: >
        brew update
      when: ansible_os_family == 'Darwin'
    
    - name: Install app via Homebrew-Cask
      command: >
        brew cask install app
      when: ansible_os_family == 'Darwin'
