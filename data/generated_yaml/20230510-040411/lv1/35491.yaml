
- name: Create VMkernel Interface
  hosts: your_vmware_host
  gather_facts: no

  vars:
    vmkernel_name: your_vmkernel_name
    vmkernel_portgroup: your_portgroup_name

  tasks:
    - name: Create VMkernel Interface
      vmware_vmkernel:
        hostname: your_vmware_host
        username: your_vmware_username
        password: your_vmware_password
        datacenter: your_datacenter_name
        cluster: your_cluster_name
        datastore: your_datastore_name
        portgroup: "{{ vmkernel_portgroup }}"
        ipv4_addr: your_ipv4_address
        ipv4_netmask: your_ipv4_netmask
        ipv4_gateway: your_ipv4_gateway
        device_type: vmxnet3
        vmkernel_name: "{{ vmkernel_name }}"
      delegate_to: localhost
