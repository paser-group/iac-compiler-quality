
---
- name: Debug ansible errors
  hosts: all
  gather_facts: no

  tasks:
    - name: Run the failing step
      # Replace with the task(s) that caused the error
      command: "some failing command"
      register: task_result
      ignore_errors: true

    - name: Display error message
      debug:
        var: task_result | failed_when(true) | stderr_lines
      when: task_result is failed
