yaml
---
- name: Create OpenStack router
  hosts: localhost
  gather_facts: false
  vars:
    router_name: my_router
    external_network: public
  tasks:
    - name: Create router
      os_router:
        state: present
        name: "{{ router_name }}"
        external_network: "{{ external_network }}"
      register: router_created
      ignore_errors: yes
    - name: Handle PolicyNotAuthorized error
      fail:
        msg: "{{ router_created.msg }}"
      when: "'PolicyNotAuthorized' in router_created.msg"
