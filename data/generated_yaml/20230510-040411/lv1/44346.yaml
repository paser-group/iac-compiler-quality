
# playbook.yml

---
- name: Install NPM modules
  hosts: all
  become: true
  
  tasks:
    - name: Install NPM modules
      npm:
        name:
          - "{{ item }}"
        state: present
      with_items:
        - module1
        - module2
        - module3
    
    - name: Check for errors during installation
      fail:
        msg: "NPM modules failed to install."
      when:
        - "'ERROR' in npm.stderr_lines"
