
---
- name: Install ios_system and run domain commands
  hosts: ios_devices
  gather_facts: no
  become: yes

  tasks:
    - name: Install ios_system library
      pip:
        name: ios_system

    - name: Run domain commands
      ios_command:
        commands:
          - show running-config interface GigabitEthernet1
          - show ip interface brief
          - show clock
      register: ios_output

    - name: Ensure idempotency
      meta: noop
      when: ios_output is not changed
