
---
- hosts: your_host
  become: true
  vars:
    default_tablespace: "{{ some_default_tablespace_value }}"
  tasks:
    - name: install PostgreSQL
      apt:
        name: postgresql
        state: present
    - name: create tablespace folder
      file:
        path: "{{ default_tablespace }}"
        state: directory
      register: folder_exist
    - name: set default tablespace
      postgresql_set:
        option: default_tablespace
        value: "{{ default_tablespace }}"
        database: "{{ some_database_name }}"
      when: not folder_exist.changed
