yaml
---
- name: Include Role with Vars and Defaults
  hosts: all
  gather_facts: true
  tasks:
  - name: Create a list of items to loop
    set_fact:
      my_list: ["server1", "server2", "server3"]

  - name: Include role with vars and defaults
    include_role:
      name: your_role_name
      vars:
        your_variable: "{{ item }}"
    with_items:
      - "{{ my_list }}"
    when: inventory_hostname_regex is search('server.*')
