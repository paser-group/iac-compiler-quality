
---
- hosts: localhost
  gather_facts: false
  tasks:
  - name: Create EC2 security group
    ec2_group:
      name: my_security_group
      description: "My security group description"
      vpc_id: my_vpc_id
      rules:
        - proto: tcp
          from_port: 22
          to_port: 22
          cidr_ip: 0.0.0.0/0
        - proto: tcp
          ports: 80        # This should cause an error
          cidr_ip: 0.0.0.0/0
    register: my_group
  - name: Debug group
    debug:
      msg: "{{ my_group }}"
