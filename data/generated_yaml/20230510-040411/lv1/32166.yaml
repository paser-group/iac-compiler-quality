
- name: Fix symlinked ansible path with space issue
  hosts: all
  become: true

  tasks:
    # Stop remote system's service running ansible.
    - name: Stop ansible service
      systemd:
        name: ansible
        state: stopped

    # Update the symlink path.
    - name: Update symlinked ansible path
      file:
        src: /usr/bin/ansible\ playbook
        dest: /usr/local/bin/ansible\ playbook
        state: link
        force: yes

    # Restart remote system's service running ansible.
    - name: Start ansible service
      systemd:
        name: ansible
        state: started
