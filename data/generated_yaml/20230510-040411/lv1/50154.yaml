
---
- name: Example playbook to demonstrate Ansible issue with subelements filter
  hosts: localhost
  
  tasks:
  
  - name: Include tasks file
    include_tasks: tasks.yml
    delegate_to: localhost
    
  - name: Debug subelements filter
    debug:
      var: outer_item.inner | subelements('subkey')
    loop: "{{ outer_list }}"
    loop_control:
      loop_var: outer_item
      
  vars:
    outer_list:
    - inner:
        - subkey: value1
        - subkey: value2
      name: list1
    - inner:
        - subkey: value3
        - subkey: value4
      name: list2
