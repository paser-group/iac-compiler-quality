
- name: Get facts from NXOS devices
  hosts: nxos_devices
  gather_facts: no
  connection: network_cli

  vars:
    ansible_network_os: nxos
    ansible_user: user
    ansible_password: password
    ansible_become: yes

  tasks:
    - name: Gather facts
      nxos_facts:
      register: result

    - name: Display the facts
      debug:
        var: result
