yaml
---
- name: Playbook to handle missing role dependencies
  hosts: all
  tasks:
    - name: Check for main.yml file in role dependency
      stat:
        path: "/path/to/role/dependencies/{{ item }}/tasks/main.yml"
      register: task_file_existence
      failed_when: false
      loop:
        - role1
        - role2
        - role3

    - name: Abort if main.yml file doesn't exist
      fail:
        msg: "main.yml file doesn't exist for {{ item.item }}"
      when: not item.stat.exists
      loop: "{{ task_file_existence.results }}"
