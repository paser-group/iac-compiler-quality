
---
- name: Troubleshoot Ansible Load Error
  hosts: all
  become: yes

  tasks:
    - name: Load Inventory Data
      setup:

    - name: Check Ansible Version
      command: ansible --version

    - name: Install missing dependencies
      package:
        name: "{{ item }}"
        state: present
      with_items:
        - python3
        - python3-pip
        - python3-setuptools

    - name: Install Ansible
      pip:
        name: ansible
        state: latest
