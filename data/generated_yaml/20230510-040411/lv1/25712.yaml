
- name: Fix host_group_vars.py
  hosts: all
  become: yes
  
  tasks:
    - name: Replace incorrect access file with YAML
      lineinfile:
        path: /path/to/host_group_vars.py
        regexp: 'incorrect_file(.*)'
        line: 'correct_file.yaml{{ ansible_facts["distribution_major_version"] }}'

    - name: Add correct file to YAML inventory
      ini_file:
        path: /path/to/inventory.ini
        section: group_var
        option: file
        value: 'correct_file.yaml'
