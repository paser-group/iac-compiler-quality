yaml
- name: Resolve Kerberos issue - Can't find client principal *** in cache collection
  hosts: all
  become: true

  tasks:
  - name: Install Kerberos client
    yum:
      name: krb5-workstation
      state: present

  - name: Update Kerberos configuration file
    lineinfile:
      path: /etc/krb5.conf
      regexp: '{{ item.regexp }}'
      line: '{{ item.line }}'
    with_items:
    - { regexp: '# default_realm = EXAMPLE.COM', line: 'default_realm = YOUR_REALM' }
    - { regexp: '# dns_lookup_realm = false', line: 'dns_lookup_realm = true' }
    - { regexp: '# dns_lookup_kdc = false', line: 'dns_lookup_kdc = true' }
