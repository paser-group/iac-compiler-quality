
---
- name: DNF module RPM scriptlet errors
  hosts: [your_host]
  become: yes

  tasks:
    - name: Update packages with DNF
      dnf:
        update_cache: yes
        name: "*"
      register: dnf_output

    - name: Fail task if any scriptlet errors found
      fail:
        msg: 'RPM scriptlet errors detected'
      when: "'scriptlet_errors' in dnf_output and dnf_output['scriptlet_errors'] != ''"
