
---
- name: Proxmox LXC Internal Server Error 500
  hosts: my_host
  become: true

  tasks:
  - name: Install required packages
    apt:
      name:
        - python3
        - python3-pip
        - python3-requests
        - python3-ssl
        - python3-lxml
      update_cache: yes

  - name: Install Proxmoxer module
    pip:
      name: proxmoxer
      state: present

  - name: Create LXC container
    proxmox:
      vmid: 100
      node: my_node
      ostemplate: debian-10-standard_10.10-1_amd64.tar.gz
      password: my_password
      hostname: container1
      net0: name=eth0,bridge=vmbr0,ip=dhcp
      state: present
    register: results

  - name: Check Results
    debug:
      msg: "{{ results }}"
