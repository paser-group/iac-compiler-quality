
- name: Install boto3 Python module
  pip:
    name: boto3
    state: present

- name: Create a CloudWatch Event rule
  hosts: localhost
  tasks:

    - name: Show how to set up a cloudwatch event rule
      amazon.aws.ec2_event:
        name: "my_cloudwatch_event_rule"
        event_pattern:
          source:
            - "aws.ec2"
          detail-type:
            - "EC2 Instance State-change Notification"
          detail:
            state:
              - "running"
        state: "present"
