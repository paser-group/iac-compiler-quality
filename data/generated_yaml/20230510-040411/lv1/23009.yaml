yaml
- name: playbook to handle jinja parsing error in shell task
  hosts: all
  gather_facts: true

  tasks:
    - name: execute shell command with variables
      shell: "echo {{ some_variable }}"
      register: shell_output
      ignore_errors: yes

    - name: debug shell output
      debug:
        var: shell_output.stdout_lines

    - name: fail if registered variable has no stdout
      fail:
        msg: "Error in jinja parsing in shell task, but not name or debug msg."
      when: shell_output.stdout is not defined
