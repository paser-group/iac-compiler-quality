
---
- name: AWS Security Group management error
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Add entries by group name
      ec2_group:
        name: my_security_group
        region: us-west-2
        state: present
        rules:
          - proto: tcp
            from_port: 22
            to_port: 22
            cidr_ip: "{{item}}"
        purge_rules: yes
        group_id: sg-1234 # replace with actual security group ID
      with_items:
        - "{{groups['web']}}" # replace with appropriate group name
        - "{{groups['app']}}" # replace with appropriate group name
