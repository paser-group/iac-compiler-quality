yaml
---
- name: Playbook to Gather Facts
  hosts: all
  gather_facts: true
  tasks:
    - name: Fail if gathering facts fails
      fail:
        msg: "Gathering facts failed"
  become: true
