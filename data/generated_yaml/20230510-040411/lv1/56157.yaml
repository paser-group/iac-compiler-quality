yaml
---
- name: Collect NX-OS Facts
  hosts: your_device_name
  gather_facts: no

  tasks:
    - name: Get facts from device
      nxos_facts:
        gather_subset:
          - default
          - interfaces
      register: nxinfo
  
    - name: Fail if nxos_facts fails to return data
      fail:
        msg: "nxos_facts issue - no data in ansible_net_interfaces"
      when: 
        - not nxinfo.ansible_facts.interfaces
