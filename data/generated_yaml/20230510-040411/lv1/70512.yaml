yaml
- name: Gather Facts and Perform Tasks
  hosts: all
  gather_facts: true
  become: true
  tasks:
    - name: Check ansible_user_* facts
      debug:
        var:
          ansible_user_id: "{{ ansible_user_id }}"
          ansible_user_shell: "{{ ansible_user_shell }}"
          ansible_user_uid: "{{ ansible_user_uid }}"
          ansible_user_gid: "{{ ansible_user_gid }}"
      run_once: true

    - name: Perform tasks as sudo
      debug:
        msg: "I'm performing tasks as sudo"
      become_method: sudo

    - name: Perform tasks as su
      debug:
        msg: "I'm performing tasks as su"
      become_method: su
