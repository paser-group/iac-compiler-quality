yaml
- hosts: all
  become: true
  gather_facts: true

  tasks:
    - name: Execute make command with parameters
      command: "make {{ make_params }}"
      args:
        executable: /usr/bin/make
      register: make_output
      ignore_errors: true

    - name: Fail the playbook if make fails
      fail:
        msg: "Make command exited with non-zero status code {{ make_output.rc }}"
      when: make_output.rc != 0
