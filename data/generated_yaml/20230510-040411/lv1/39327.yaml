
---
- hosts: #your_host
  gather_facts: false
  tasks:
    - name: Run batch file using win_command
      win_command: "cmd /c my_batch_file.bat"
      register: cmd_output
      args:
        creates: "{{ inventory_hostname }}.creating"
        removes: "{{ inventory_hostname }}.creating"
        ignore_errors: yes

    - name: Check for out-of-memory error
      assert:
        that: "'out of memory' not in cmd_output.stderr"
      ignore_errors: true
