
---
- name: Execute Script Using Ansible
  hosts: localhost
  gather_facts: no

  # Define your script here
  vars:
    script_path: /path/to/your/script.sh

  tasks:
    - name: Checking File
      stat:
        path: "{{ script_path }}"
      register: script_exists

    - name: Running script
      shell: |
        if [ -f "{{ script_path }}" ]; then
            {{ script_path }}
        else
            echo "File not found"
            exit 1
        fi
      register: script_output
      ignore_errors: yes

    - name: Handling script errors
      fail:
        msg: "{{ script_output.stderr }}"
      when: script_output.rc != 0
