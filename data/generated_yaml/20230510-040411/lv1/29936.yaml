
- name: Update ec2_elb_lb health check ping_path
  hosts: all
  vars:
    elb_name: your-elb-name # replace with your ELB name
    ping_path: / # replace with your desired ping path

  tasks:
    - name: Get ELB info
      ec2_elb_lb_facts:
        names: "{{ elb_name }}"
      register: elb_info
      
    - name: Update ping path
      elb_target_group:
        target_group_arn: "{{ elb_info.load_balancers[0].target_group_arns[0] }}"
        health_check_path: "{{ ping_path }}"
      when: elb_info.load_balancers[0].target_group_arns|length > 0
