
- name: Docker login with TLS configuration
  hosts: localhost
  gather_facts: no
  become: yes

  vars:
    docker_registry: my.docker.registry.com
    docker_username: myuser
    docker_password: mypwd
    docker_tls_verify: yes
    docker_tls_hostname: "{{ docker_registry }}"

  tasks:
    - name: Login to docker registry
      docker_login:
        registry_url: "{{ docker_registry }}"
        username: "{{ docker_username }}"
        password: "{{ docker_password }}"
        tls_verify: "{{ docker_tls_verify }}"
        tls_hostname: "{{ docker_tls_hostname }}"
      delegate_to: localhost
