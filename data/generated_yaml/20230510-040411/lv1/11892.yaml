yaml
---
- hosts: all
  gather_facts: yes
  tasks:
    - name: Test Conditional with Registered Variable
      shell: echo "Hello, world!"
      register: message

    - name: Conditional Task
      shell: echo "Hello, Ansible!"
      when: message.stdout == "Hello, world!"

    - name: Error Out on Failure
      fail:
        msg: "The playbook failed due to some reason."
