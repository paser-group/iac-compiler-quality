yaml
---
- name: Configure nxos_l2_interface
  hosts: nxos_switches
  gather_facts: no

  tasks:
    - name: Set up Ethernet interface
      nxos_l2_interface:
        name: Ethernet1/1
        access_vlan: 10
        state: present
      register: result

    - name: Ensure idempotence
      debug:
        msg: "Interface {{ result.interface.name }} was already configured."

      when: result.status == 200 and result.idempotent is defined and result.idempotent is true
