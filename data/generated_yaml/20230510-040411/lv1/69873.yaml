yaml
---
- name: EC2_Transit_Gateway issues with specific regions
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Get the list of regions
      ec2_region_info:
        region: "{{ item }}"
      loop:
        - us-east-1
        - us-west-2
        - eu-west-1
        - ap-southeast-1
        - ap-northeast-1
      register: region_info

    - name: Display regions with issues
      debug:
        msg: "Region {{ item.region_name }} has EC2 Transit Gateway issues"
      loop_control:
        label: "{{ item.region_name }}"
      when: "'transit_gateway' in item.instance_types_supported"
      with_items: "{{ region_info.results }}"
