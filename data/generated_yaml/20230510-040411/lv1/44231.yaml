yaml
---
- name: Install Python on remote hosts
  hosts: all
  gather_facts: False
  become: true
  
  tasks:
  - name: Check Python installation
    raw: python --version
    ignore_errors: true
    register: python_version

  - name: Install Python
    raw: "apt-get update && apt-get install -y python-minimal"
    when: "'No such file or directory' in python_version.stderr or 'command not found' in python_version.stderr"
    
- name: Run your tasks
  hosts: all
  become: true
  tasks:
    - name: Run your task
      # Add your task here
