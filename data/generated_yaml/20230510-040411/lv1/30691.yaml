
---
- name: Update ansible/stable-2.4
  hosts: all
  gather_facts: true
  any_errors_fatal: true
  tasks:
    - name: Update ansible
      git:
        repo: https://github.com/ansible/ansible.git
        version: stable-2.4
        update: yes
      register: git_result
   
    - name: Fail if any errors
      fail:
        msg: "Any errors occurred while updating ansible!"
      when: git_result.failed == true
