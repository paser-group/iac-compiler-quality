yaml
---
- name: Run dellos9_command and reload remote device
  hosts: remote_device
  tasks:
    - name: Reload remote device
      dellos9_command:
        commands:
          - reload
      register: reload_output

    - name: Wait for remote device to come back online
      wait_for:
        host: "{{ inventory_hostname }}"
        port: 22
        delay: 10
        timeout: 180
        state: started

    - name: Run dellos9_command after remote device comes back online
      dellos9_command:
        commands:
          - show interfaces
