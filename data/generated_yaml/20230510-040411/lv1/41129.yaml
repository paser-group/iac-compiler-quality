
- name: Update npm modules
  hosts: all  # replace with your target hosts
  become: true

  tasks:
    - name: Ensure npm is installed
      apt:
        name: npm
        state: latest  # make sure npm is up to date

    - name: Configure npm registry to use official registry
      npm_config:
        registry: https://registry.npmjs.org/

    - name: Update npm modules
      npm:
        name: '*'
        global: true  # update all global npm modules

    - name: Restart Node.js application
      command: systemctl restart myapplication.service  # replace with your application name
