yaml
---
- name: Playbook to demonstrate import_role error
  hosts: all

  tasks:
    - name: Importing role in child play
      import_role:
        name: my_role
      when: my_role_var is defined

    - name: Child play
      block:
        - name: Task that sets role variable
          set_fact:
            my_role_var: true

        - name: Task that runs role task
          import_role:
            name: my_role
      become: true
      become_user: root
