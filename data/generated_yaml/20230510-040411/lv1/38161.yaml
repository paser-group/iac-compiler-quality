yaml
---
- name: Fix firewalld module error
  hosts: all
  become: yes
  tasks:
    - name: Install firewalld package
      yum:
        name: firewalld
        state: present
    
    - name: Reload firewalld
      service:
        name: firewalld
        state: reloaded
    
    - name: Disable firewalld offline mode
      lineinfile:
        path: /usr/lib/python2.7/site-packages/firewall/client.py
        regexp: '^fw_offline\ \=\ True$'
        line: 'fw_offline = None'
        backup: yes

    - name: Start firewalld
      service:
        name: firewalld
        state: started
