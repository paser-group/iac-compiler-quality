yaml
---
- name: Install IOS Software
  hosts: your_ios_device
  gather_facts: no

  vars:
    software_version: "16.9.4"
    software_url: "http://www.example.com/ios/{{ software_version }}.tar.gz"

  tasks:
    - name: Download the IOS Software
      get_url:
        url: "{{ software_url }}"
        dest: "/tmp/ios.tgz"

    - name: Unpack the IOS Software
      unarchive:
        src: "/tmp/ios.tgz"
        dest: "/tmp"
        remote_src: yes

    - name: Install the IOS Software
      ios_command:
        commands:
          - "request platform software package install switch all file /tmp/{{ software_version }}.tar"
