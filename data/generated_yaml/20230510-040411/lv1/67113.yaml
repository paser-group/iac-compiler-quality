
---
- name: Check Macports Package Upgrades
  hosts: localhost
  become: yes

  tasks:
    - name: Upgrade Macports
      command: port selfupdate

    - name: Check for available upgrades
      command: port outdated
      register: port_outdated

    - name: Update ports
      when: port_outdated.stdout_lines
      command: port upgrade outdated
