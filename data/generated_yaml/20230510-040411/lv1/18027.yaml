yaml
- name: Example playbook with error handling in loops
  hosts: all
  become: true

  tasks:
    - name: Create list of numbers
      set_fact:
        numbers: "{{ range(1, 5) | list }}"

    - name: Loop over numbers and print
      debug:
        msg: "Number: {{ item }}"
      loop: "{{ numbers }}"
      loop_control:
        label: "{{ item }}"

      # Handle errors within the loop
      ignore_errors: true
      register: loop_result

    - name: Check for errors in loop
      fail:
        msg: "Error in loop detected"
      when: loop_result is failed
