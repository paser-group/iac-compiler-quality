yaml
---
- name: Update Netscaler Configuration
  hosts: my_netscaler_server
  gather_facts: false
  
  tasks:
    - name: Install NetScaler module dependency
      pip: name=nitro-sdk-python
      
    - name: Apply Netscaler Configuration
      netscaler:
        url: https://my.netscaler.server
        username: my_username
        password: my_password
        nitro_protocol: https
        validate_certs: no
        state: present
        nitro_timeout: 30
        nitro_user_agent: ansible-netscaler-module
        object: lbvserver
        attrs:
          - name: my_lbvserver
            servicetype: HTTP
            ipv46: 192.0.2.1
            port: 80
      register: result
      
    - name: Handle Errors
      fail:
        msg: "Error: {{ result.msg }}"
      when: result.failed
...
