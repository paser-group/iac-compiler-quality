yaml
---
- name: My Playbook to Fix eos_facts issue with debug logs
  hosts: all
  become: yes
  tasks:
  - name: Gather EOS facts
    eos_facts:
      debug_log: no
    ignore_errors: yes
    register: eos_facts_output

  - name: Gather EOS facts with debug logs
    eos_facts:
      debug_log: yes
    ignore_errors: yes
    register: eos_facts_output_debug

  - name: Re-run eos_facts with debug logs restricted
    eos_facts:
      debug_log: false
    when: "'AF_UNIX path too long' in eos_facts_output_debug.stderr" 
