yaml
---
- name: Install Boto library
  hosts: all
  gather_facts: no
  become: yes

  tasks:
  - name: Install Boto library prerequisites
    apt:
      name:
        - python-pip
        - python-dev
        - libssl-dev
      state: present

  - name: Install Boto library using pip
    pip:
      name: boto
      state: latest

- name: Set AWS region in environment
  hosts: all
  gather_facts: no
  become: yes

  tasks:
  - name: Set environment variable for AWS region
    command: 'export AWS_DEFAULT_REGION=<region_name>'

- name: Assume Role with STS
  hosts: all
  gather_facts: no
  become: yes

  tasks:
  - name: Assume role using STS
    sts_assume_role:
      role_arn: "<role_arn>"
      role_session_name: "<session_name>"
      region: "<region_name>"
      aws_access_key: "<aws_access_key>"
      aws_secret_key: "<aws_secret_key>"
    register: assume_role

  - name: Print output of assume role
    debug:
      msg: "{{ assume_role }}"
