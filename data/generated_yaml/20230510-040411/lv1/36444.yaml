yaml
---

- name: Create an Azure VM with a NIC without Public IP
  hosts: localhost
  connection: local
  gather_facts: no
 
  tasks:
  - name: Create a Resource Group
    azure_rm_resourcegroup:
      name: MyResourceGroup
      location: eastus
      
  - name: Create a virtual network
    azure_rm_virtualnetwork:
      resource_group: MyResourceGroup
      name: MyVirtualNetwork
      address_prefixes: "10.0.0.0/16"
      
  - name: Create a subnet
    azure_rm_subnet:
      resource_group: MyResourceGroup
      name: MySubnet
      address_prefix: "10.0.0.0/24"
      virtual_network: MyVirtualNetwork
      
  - name: Create a Network Interface without Public IP
    azure_rm_networkinterface:
      resource_group: MyResourceGroup
      name: MyNetworkInterface
      virtual_network: MyVirtualNetwork
      subnet: MySubnet
      enable_ip_forwarding: false
      enable_accelerated_networking: false
      public_ip_address_type: "None"
      
  - name: Debug
    debug:
      var: azure_network_interface
