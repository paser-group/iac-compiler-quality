
---
- name: Fix Parsing Issue in Inventory Files
  hosts: all
  gather_facts: no
  
  tasks:
    - name: Check Inventory Files for Syntax Errors
      ansible.builtin.command: /usr/bin/ansible-inventory --list --yaml --playbook-dir=. > /dev/null
      ignore_errors: yes
      
    - name: Fix Syntax Errors in Inventory Files
      ansible.builtin.command: /usr/bin/ansible-inventory --list --yaml --playbook-dir=.
      check_mode: yes
      register: ansible_inventory
      
    - name: Show Inventory Fixes
      debug:
        var: ansible_inventory.stdout_lines
      when: ansible_inventory.changed
