yaml
---
- name: Install Role
  hosts: all
  become: yes

  tasks:
    - name: Clone role from GitHub
      git:
        repo: https://github.com/user/repo.git
        dest: /etc/ansible/roles/role
      register: git_output

    - fail:
        msg: "Failed to clone role from GitHub. {{ git_output.msg }}"
      when: git_output.failed

    - name: Install role dependencies
      ansible-galaxy:
        role_file: /etc/ansible/roles/role/requirements.yml
      register: dep_output

    - fail:
        msg: "Dependency installation failed. {{ dep_output.msg }}"
      when: dep_output.failed
