yaml
---
- name: Install Ansible Galaxy dependency
  hosts: all
  become: true
  gather_facts: false

  tasks:
  - name: Install Python
    raw: test -e /usr/bin/python || (sudo apt -y update && sudo apt-get install -y python-minimal)
    register: output
    changed_when: output.stdout != ""
  - name: Install Ansible dependencies
    raw: sudo apt-get update && sudo apt-get -y install software-properties-common && sudo apt-add-repository universe && sudo apt-get -y update && sudo apt-get -y install python3-pip python3-setuptools
    register: output
    changed_when: output.stdout != ""
  - name: Upgrade pip
    raw: sudo -H pip3 install --upgrade pip
    register: output
    changed_when: output.stdout != ""
  - name: Install Ansible Galaxy dependency
    pip: name=ansible-galaxy
