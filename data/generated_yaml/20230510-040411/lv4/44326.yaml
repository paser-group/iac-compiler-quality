
---
- hosts: localhost
  gather_facts: no

  tasks:
    - name: Test vmware_portgroup module
      vmware_portgroup:
        hostname: "{{ hostname }}"
        username: "{{ username }}"
        password: "{{ password }}"
        datacenter_name: "{{ datacenter_name }}"
        cluster_name: "{{ cluster_name }}"
        state: present
        name: "{{ name }}"
        vlan_id: "{{ vlan_id }}"
        security:
          allow_promiscuous: false
          mac_changes: false
          forged_transmits: false
        validate_certs: no
      register: response

    - name: Debug response output
      debug:
        var: response
