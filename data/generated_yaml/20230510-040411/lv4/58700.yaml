
- name: Test win_dns_record module
  hosts: windows_host
  gather_facts: no
  vars:
    dns_name: "test_dns"
    dns_type: "A"
    dns_value: "10.0.0.1"
    dns_ttl: 3600
  tasks:
  - name: Add DNS record
    win_dns_record:
      name: "{{ dns_name }}"
      value: "{{ dns_value }}"
      type: "{{ dns_type }}"
      ttl: "{{ dns_ttl }}"
    register: result
  - name: Check if DNS record added successfully
    assert:
      that:
        - result is success
