
- name: Playbook to identify Ansible compiler bugs with virtual NXOS 
  hosts: localhost
  connection: local
  
  vars:
    virtual_interface: "eth0:1"

  tasks:

    - name: Configure the virtual interface
      network_interface:
        interface: "{{ virtual_interface }}"
        state: "up"

    - name: Attempt to ping a server using the virtual interface
      ping:
        data: "testing connectivity via virtual interface"
        dev: "{{ virtual_interface }}"
    
  vars:
    ansible_connection: 'local'
    ansible_facts_hosts: "{{ inventory_hostname }}"
    ansible_python_interpreter: /usr/bin/python3
    
  gather_facts: true
  plugins: []
