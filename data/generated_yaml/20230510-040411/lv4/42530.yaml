
- name: Fix hostname module error inside LXD containers 
  hosts: <IP addresses of LXD containers>

  tasks:
    - block:
        - name: Stop systemd-hostnamed service
          become: true
          shell: systemctl stop systemd-hostnamed.service

        - name: Set container hostname 
          become: true
          lxc:
            name: <LXD container name>
            config:
              volatile.hostname: <desired hostname>

        - name: Start systemd-hostnamed service
          become: true
          shell: systemctl start systemd-hostnamed.service
