
- hosts: localhost
  vars:
    ftp_server_url: "ftp://example.com/"
    ftp_username: "username"
    ftp_password: "password"

  tasks:
    - name: Download file from FTP site
      get_url:
        url: "{{ ftp_server_url }}/file"
        dest: "/tmp/file.txt"
        force_basic_auth: yes
        user: "{{ ftp_username }}"
        password: "{{ ftp_password }}"
        
    - name: Confirm downloaded file
      uri:
        url: file:///tmp/file.txt
        method: HEAD
      register: response

    - name: Validate downloaded file
      assert:
        that: response.status == 200
        msg: "File could not be downloaded"

