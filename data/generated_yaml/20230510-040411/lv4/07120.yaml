
---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Test the rhn_channel module
      rhn_channel:
        name: "{{ item }}"
        server_url: "{{ randstr(10) }}"
      loop: "{{ query('file', 'words.txt').splitlines() }}"
      register: output
      ignore_errors: true
    - name: Assert the module output
      assert:
        that: "'failed to parse' not in output.stderr"
