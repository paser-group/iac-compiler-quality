
---
- name: Test inventory plugin error handling
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Use multiple inventory plugins
      ansible.builtin.add_host:
        name: "{{ item }}"
        groups: "{{ groups[item] }}"
      with_items: "{{ groups }}"
      vars:
        ansible_inventory_plugins:
          - my_custom_plugin
          - script
          - ini
          - yaml
        ansible_host_patterns:
          - '*'
