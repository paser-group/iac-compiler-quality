
- name: Test networkInterfaces field validation
  hosts: localhost
  gather_facts: no

  vars:
    instance_name: "test-instance"
    zone: "us-central1-a"

  tasks:
  - name: Attempt to create GCP compute instance with various network values
    gcp_compute_instance:
      name: "{{ instance_name }}"
      zone: "{{ zone }}"
      machine_type: "f1-micro"
      disks:
        - auto_delete: true
          boot: true
          source_image: "debian-cloud/debian-9"
      network_interfaces:
        - network: "default"
        - network: "legacy"
        - network: "random_nonsense"
      auth_kind: serviceaccount
      service_account_file: "/path/to/service_account.json"
    register: instance_creation_result

  - name: Debug
    debug: var=instance_creation_result
