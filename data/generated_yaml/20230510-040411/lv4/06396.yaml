
- name: Test Ansible Compiler for Bugs
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Set ssh_user variable
    set_fact:
      ssh_user_var: incorrect_value

  - name: Test ssh_user
    shell: ssh {{ ssh_user_var }}@localhost 'ls'
    register: ssh_output
    ignore_errors: true
    when: ansible_ssh_user != ssh_user_var

  - name: Print ssh output
    debug:
      var: ssh_output
