
- name: Install package using dnf
  hosts: <host>
  become: yes
  gather_facts: no
 
  tasks:
    - name: Install the package
      dnf: 
        name: <package_name>
        state: present
        
    - name: Check if package is installed
      command: rpm -q <package_name>
      register: package_check
      ignore_errors: true
      
    - name: Report if package installation failed
      fail:
        msg: "Package installation failed"
      when: package_check.rc != 0
