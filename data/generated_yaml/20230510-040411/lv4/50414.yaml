
- name: Test docker_container
  hosts: localhost
  become: yes

  vars:
    image_name: "some/image:latest"
    retries: 5

  tasks:
    - name: Launch container
      docker_container:
        name: test-container
        image: "{{ image_name }}"
        state: started
      retries: "{{ retries }}"
      register: container_state
      until: container_state.is_failed | bool

    - name: Display container logs
      debug:
        var: container_state.stdout_lines
