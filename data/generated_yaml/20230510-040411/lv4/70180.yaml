
---
- name: Test Playbook to check for fatal errors in SCM collections
  hosts: localhost
  become: false

  tasks:
  - name: Create a dummy SCM repository with faulty syntax
    git:
      repo: 'https://github.com/faulty-scm-repo.git'
      version: 'main1%% 2invalid branch name'
      dest: '/opt/test-scm-repo'
    register: git_checkout_output

  - name: Debug task
    debug:
      var: git_checkout_output
