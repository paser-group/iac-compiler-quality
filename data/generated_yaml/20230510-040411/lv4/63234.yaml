
- hosts: localhost
  tasks:
    - name: Test GCP Storage Bucket Access Control module for bugs
      gcp_storage_bucket_access_control:
        bucket: ""
        entity: user-test@test.com
        role: roles/storage.objectViewer
      ignore_errors: yes
    - name: Change the value of bucket parameter
      set_fact:
        bucket: "incorrect-bucket"
    - name: Use bad permissions to access object
      gcp_storage_bucket_access_control:
        bucket: "{{ bucket }}"
        entity_project: "some-project-id"
        entity: user-test@test.com
        role: roles/storage.objectCreator
      ignore_errors: yes
