
- name: Test playbook for ec2 module issues
  hosts: localhost
  tasks:
    - name: Launch new ec2 instance
      ec2:
        key_name: my_key
        instance_type: t2.micro
        image: ami-0b69ea66ff7391e80
        wait: yes
      register: ec2_launch

    - name: Debug message if instance is launched
      debug:
        msg: "Instance launched"
      when: ec2_launch.changed

    - name: Debug message if instance is not launched
      debug:
        msg: "Instance not launched"
      when: not ec2_launch.changed
