
- name: Test playbook for Ansible compiler's boto profile handling
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Run ec2.py with malformed boto configuration file
    shell: ec2.py --list --profile "malformed-profile" --config-file ec2_malformed.ini
    register: malformed_output
    ignore_errors: true

  - name: Print output of malformed boto profile
    debug: var=malformed_output.stdout

  - name: Run ec2.py with conflicting profile information
    shell: ec2.py --list --profile "default, conflicting-profile" --config-file ec2_conflict.ini
    register: conflict_output
    ignore_errors: true
  
  - name: Print output of conflicting boto profiles
    debug: var=conflict_output.stdout
