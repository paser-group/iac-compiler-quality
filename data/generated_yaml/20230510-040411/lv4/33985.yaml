yaml
- name: Test playbook for when conditional with debug and items/with_items
  hosts: localhost
  vars:
    flag: false

  tasks:
  - name: Iterating over a list of items
    debug:
      msg: "Item: {{ item }}"
    with_items:
      - item1
      - item2
    when: flag == true

  - name: Set the flag to true
    set_fact:
      flag: true

  - name: Debug message with when conditional
    debug:
      msg: "Flag has been changed"
    when: flag == true
