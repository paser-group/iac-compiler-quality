
- name: Check installed version of package
  pacman:
    name: "{{ pkgname }}"
    state: installed
  
- name: Retrieve installed version of package
  set_fact:
    installed_version: "{{ ansible_facts.packages[pkgname].version }}"
  
- name: Test error handling mechanism
  command: invalid_command_with_invalid_argument
  ignore_errors: true
  
- name: Assert the existence of an error
  assert:
    that: failed_task is defined
  
- name: Clean up
  command: valid_command
