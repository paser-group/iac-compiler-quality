yaml
---
- name: Test for GCP compute plugin JSON output bug
  hosts: localhost
  gather_facts: no

  vars:
    project_id: "my-project-id"
    zone: "us-central1-c"

  tasks:
    - name: Collect GCP Compute inventory
      gcp_compute:
        project: "{{ project_id }}"
        zone: "{{ zone }}"
        auth_kind: serviceaccount
        service_account_file: "{{ lookup('env', 'GOOGLE_APPLICATION_CREDENTIALS') }}"
      register: compute_inventory

    - name: Debug - Print inventory to console
      debug:
        var: compute_inventory
        verbosity: 2
        stdout_callback: json
