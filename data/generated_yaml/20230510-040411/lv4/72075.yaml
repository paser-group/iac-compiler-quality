
---
- name: Test playbook
  hosts: localhost
  gather_facts: no

  roles:
    - role: example_role
  
  tasks:
    - name: Check if main.yml exists
      assert:
        that:
          - "{{ lookup('file', item + '/main.yml') is file }}"
        fail_msg: "File not found: {{ item }}/main.yml"
      loop: "{{ ansible_playbook_python | dirname }}"
