
- name: Create new firewall rule
  win_firewall_rule:
    name: allow-icmpv4
    localport: 0-65535
    direction: in
    protocol: tcp
    action: allow

- name: Modify created firewall rule with 'leave existing'
  win_firewall_rule:
    name: allow-icmpv4
    profile: public
    state: present
    enabled: yes
    display_group: Ansible
    description: Ansible created rule
    leave_existing: yes
    localport: 0-65535
    direction: in
    protocol: tcp
    action: allow

- name: Leave existing firewall rule untouched
  win_firewall_rule:
    name: allow-icmpv4
    leave_existing: yes
