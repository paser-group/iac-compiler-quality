yaml
- name: Azure VM Tag-based Facts Retrieval
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Retrieve VM facts
      azure_rm_virtualmachine_facts:
        resource_group: <resource-group-name>
        tag:
          <tag-name>: <tag-value>
      register: vm_facts

    - name: Display VM facts
      debug:
        var: vm_facts
