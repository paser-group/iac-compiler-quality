
- hosts: localhost
  tasks:
    - name: List inventory with toml format
      shell: ansible-inventory --list --export --toml
      register: inventory_output

    - debug:
        var: inventory_output.stdout_lines

    - name: Check Python version
      assert:
        that: ansible_playbook_python.startswith('/usr/bin/python3')
        msg: 'Unexpected Python version'

    - name: Print inventory sources
      debug:
        var: ansible_inventory_sources
