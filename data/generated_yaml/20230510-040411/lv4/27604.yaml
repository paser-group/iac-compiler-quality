
---
- name: Testing nxos_install_os module
  hosts: cisco_nxos
  gather_facts: no
  become: yes
  vars:
    image_url: https://example.com/nxos.tar.gz
    image_type: kickstart
  tasks:
    - name: Install NX-OS using CLI transport
      nxos_install_os:
        transport: cli
        image: "{{ image_url }}"
        image_type: "{{ image_type }}"
      register: cli_result

    - name: Display CLI transport result
      debug:
        var: cli_result

    - name: Install NX-OS using NXAPI transport
      nxos_install_os:
        transport: nxapi
        image: "{{ image_url }}"
        image_type: "{{ image_type }}"
        username: admin
        password: 1234
      register: nxapi_result

    - name: Display NXAPI transport result
      debug:
        var: nxapi_result
