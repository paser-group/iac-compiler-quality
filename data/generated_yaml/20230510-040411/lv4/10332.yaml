
- name: Test playbook generation with different arguments
  hosts: localhost
  vars:
    playbook_name: "test-playbook.yml"
  tasks:
    - name: Generate playbook with no arguments
      command: ansible-playbook playbook.yml
      args:
        chdir: /etc/ansible
      register: no_args_result

    - name: Generate playbook with quoted string arguments
      command: ansible-playbook playbook.yml -i "localhost," -e "name='Jim Rohn'"
      args:
        chdir: /etc/ansible
      register: quoted_string_result

    - name: Generate playbook with escape characters in arguments
      command: ansible-playbook playbook.yml -i "localhost," -e "name='Jim \\'Rohn\\''"
      args:
        chdir: /etc/ansible
      register: escape_char_result

    - name: Generate playbook with special character arguments
      command: ansible-playbook playbook.yml -i "localhost," -e "name='$!@#%^&*()'"
      args:
        chdir: /etc/ansible
      register: special_char_result
      
    - name: Generate playbook with file argument using jinja templates
      template:
        src: playbook.j2
        dest: "{{ playbook_name }}"
      args:
        chdir: /etc/ansible
      register: template_result
