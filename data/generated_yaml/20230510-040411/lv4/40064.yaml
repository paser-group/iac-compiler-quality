
- name: Configure the device
  hosts: ios
  gather_facts: no
  vars:
    config_commands:
      - interface loopback 123
      - ip address 192.0.2.1 255.255.255.255
      - description "This is a loopback interface"
  tasks:
    - name: Configure device
      ios_config:
        lines: "{{ config_commands }}"
      when: "'interface Loopback123' not in device_config.running_config"
