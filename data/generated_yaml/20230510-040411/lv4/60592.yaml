
- name: Test eos_facts module
  hosts: switches
  gather_facts: no
  tasks:
    - name: Test parsing of facts
      eos_facts:
      register: eos_facts_result
    
    - name: Test fetching of specific fact
      eos_facts:
        gather_subset: "'hardware'"
      register: eos_hardware_result
      
    - name: Test fetching of non-existent fact
      eos_facts:
        gather_subset: "'foobar'"
      register: eos_nonexistent_result
      
    - name: Verify registered variables
      assert:
        that:
          - eos_facts_result is success
          - "'hardware'" in eos_facts_result['ansible_facts']
          - eos_nonexistent_result is failed
      
