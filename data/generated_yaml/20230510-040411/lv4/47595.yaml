yaml
- name: Test ec2_ami_copy module
  hosts: localhost
  vars:
    source_ami_id: ami-08f3d892de259504d
    dest_region: us-west-2
    dest_name: test-ami-copied
    tags:
      - { Name: test, Value: copied-ami }
  tasks:
    - name: Copy AMI with tag equality
      ec2_ami_copy:
        source_region: "{{ inventory_hostname }}"
        source_image_id: "{{ source_ami_id }}"
        region: "{{ dest_region }}"
        name: "{{ dest_name }}"
        tag_equality:
          - tag: Name
            value: test
        wait: yes
      register: ami_copy_result

    - name: Report results
      debug:
        msg: "{{ ami_copy_result }}"
