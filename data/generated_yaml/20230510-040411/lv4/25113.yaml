
- name: Deploy LXC container using Proxmox module
  hosts: proxmox
  gather_facts: no
  vars:
    container_name: "{{ inventory_hostname }}-container"
    container_template: "ubuntu-20.04"
  tasks:
    - name: Create LXC container
      proxmox:
        vmid: "{{ inventory_hostname }}"
        hostname: "{{ container_name }}"
        node: "pve"
        ostemplate: "{{ container_template }}"
        state: present
        password: "strong_password"
        cores: 2
        memory: 2048
      register: result

    - name: Check LXC container status
      command: "pct status {{ container_name }}"
      register: status

    - name: Debug Playbook
      debug:
        var: status
