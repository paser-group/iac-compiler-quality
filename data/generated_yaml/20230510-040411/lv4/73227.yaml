
- name: Encrypted Variables with uri module
  hosts: localhost
  vars:
    password: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                39353061623434346263626464376330383238363034386362363763653665313132373931346662
                6332383463343234373238363463653837346439656332300a333235643731646539383965336534
                33613866376565313164663931326132306339393539663061363365373339386233663638326237
                3264396363346536340a
  tasks:
    - name: Encrypted Variables in Query String
      uri:
        url: "http://example.com/api?key={{ password }}"
        method: GET

    - name: Encrypted Variables in Request Body
      uri:
        url: "http://example.com/api"
        method: POST
        body_format: raw
        body: '{{ password }}'
