
---
- name: Test network module with debug logs
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Enable debug logs
    debug:
      msg: "Debug logs enabled for {{ item }}"
    with_items:
    - network

  - name: Test network module
    network_cli:
      command_string: show run
    register: result

  - name: Verify the result
    assert:
      that:
        - result | success

  - name: Disable debug logs
    debug:
      msg: "Debug logs disabled for {{ item }}"
    with_items:
    - network
