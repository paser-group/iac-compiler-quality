
- name: Detect all services with common prefix
  docker_swarm_service:
    state: list
  register: services
- name: Check service name conflicts
  assert:
    that: >
      len(services.services | map(attribute='name') | map('startswith', 'common_prefix') | list ) < 2
