
---
- name: Test Winrm with Kerberos authentication
  hosts: windows
  gather_facts: False
  vars:
    ansible_user: username
    ansible_password: password
    ansible_connection: winrm
    ansible_winrm_transport: kerberos
    
  tasks:
  - name: Execute remote command successfully
    win_command: hostname
    register: result
    ignore_errors: yes
      
  - name: Execute remote command unsuccessfully
    win_command: nonexistent_command
    register: result
    ignore_errors: yes
