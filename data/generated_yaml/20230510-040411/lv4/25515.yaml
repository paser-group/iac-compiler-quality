
- name: Check for nxos_vxlan_vtep module errors
  hosts: switches
  gather_facts: no
  vars:
    vrf_name: default
    vlan_vni_mappings:
      1000: 10000
      1001: 10001
    vtep_list:
      - 10.0.0.1
      - 10.0.0.2
      - 10.0.0.3
  tasks:
    - name: Test with nxapi transport
      nxos_vxlan_vtep:
        vrf_name: "{{ vrf_name }}"
        vlan_vni_mappings: "{{ vlan_vni_mappings }}"
        vtep_list: "{{ vtep_list }}"
        transport: nxapi
        host: "{{ inventory_hostname }}"
        username: acme_user
        password: acme_pass
      register: nxos_vxlan_vtep_nxapi
      
    - name: Print output for nxapi transport
      debug:
        var: nxos_vxlan_vtep_nxapi
        
    - name: Test with cli transport
      nxos_vxlan_vtep:
        vrf_name: "{{ vrf_name }}"
        vlan_vni_mappings: "{{ vlan_vni_mappings }}"
        vtep_list: "{{ vtep_list }}"
        transport: cli
        host: "{{ inventory_hostname }}"
        username: acme_user
        password: acme_pass
      register: nxos_vxlan_vtep_cli
      
    - name: Print output for cli transport
      debug:
        var: nxos_vxlan_vtep_cli

