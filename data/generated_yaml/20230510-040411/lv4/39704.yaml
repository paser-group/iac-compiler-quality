
- hosts: all
  become: yes

  tasks:
    - name: Install non-existent package
      dnf:
        name: non-existent-pkg
        state: present
      ignore_errors: true

    - name: Verify error message
      fail:
        msg: "Expected error message not found."
      when: "'Error: No package found for' not in ansible_failed_result.msg"
