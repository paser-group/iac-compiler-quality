
---
- name: Test vmware_content_deploy_template module
  hosts: localhost
  vars:
    content_deploy_template:
      content_library_name: my-content-library
      content_created_choice: create_new
      content_folder_name: non-existent-folder  # This is what we're fuzzing
      item_name: test-item
      ovf_name: test.ovf
      source_type: OVF
      url: https://example.com/test.ovf
  tasks:
    - name: Deploy content from URL
      vmware_content_deploy_template:
        hostname: 192.0.2.10
        username: root
        password: secret
        validate_certs: False
        item_name: "{{ content_deploy_template.item_name }}"
        content_url: "{{ content_deploy_template.url }}"
        content_library_name: "{{ content_deploy_template.content_library_name }}"
        content_folder_name: "{{ content_deploy_template.content_folder_name }}"
        ovf_name: "{{ content_deploy_template.ovf_name }}"
        source_type: "{{ content_deploy_template.source_type }}"
        content_created_choice: "{{ content_deploy_template.content_created_choice }}"
      register: result
    - debug: var=result
