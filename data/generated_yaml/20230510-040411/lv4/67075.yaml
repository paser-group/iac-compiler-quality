
- hosts: all
  gather_facts: False

  tasks:
    - name: Attempt to use a non-existent SSH key
      ipa_user:
        name: testuser
        state: present
        sshpubkey: "{{ lookup('file', 'fake_key.pub') }}"

    - name: Attempt to use an invalidly formatted SSH key
      ipa_user:
        name: testuser
        state: present
        sshpubkey: "{{ lookup('file', 'invalid_key.pub') }}"

   - name: Attempt to use a named SSH key with a missing file
      ipa_user:
        name: testuser
        state: present
        sshpubkey: missing_key.pub
