
---
- name: Check Variable is Defined
  hosts: localhost
  gather_facts: false

  vars:
    variable_with_errors: "{{ var1.undef_var2.undef_var3 }}"

  tasks:
  - name: Check if variable is defined
    set_fact:
      var_is_defined: "{{ variable_with_errors is defined }}"

  - name: Report if variable is not defined
    debug:
      msg: "Variable is not defined"
    when: not var_is_defined
