
- name: Copying large files
  hosts: localhost
  vars:
    memory_limit: "2048m"
  tasks:
    - name: Increase memory allocation
      set_fact:
        ansible_memory_mb_limit: "{{ memory_limit }}"
    
    - name: Copy files
      debug:
        msg: "Copying file {{ item }}..."
      command: "cp {{ item }} /destination"
      with_items:
        - /path/to/large/file1
        - /path/to/large/file2
    
    - name: Validate file size
      assert:
        that:
          - "stat('/path/to/large/file1').size == stat('/destination/file1').size"
          - "stat('/path/to/large/file2').size == stat('/destination/file2').size"
