
---
- name: Reset Host Errors
  hosts: all

  tasks:
  - name: Debug Error States
    debug:
      msg: "Error States: {{ ansible_failed_task }}"
  
  - name: Reset Host Errors
    block:
    - name: Generate Failure
      shell: /bin/false
      register: failure_output
      ignore_errors: True

    - name: Check Failure Output
      fail:
        msg: "Failed to generate failure output"
      when: failure_output.rc == 0

    always:
    - meta: clear_host_errors
