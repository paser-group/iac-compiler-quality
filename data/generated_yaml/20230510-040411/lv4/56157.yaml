
---
- name: Gather facts from a network device using nxos-facts
  hosts: nxos_devices
  connection: network_cli

  tasks:
  - name: Gather facts from the network device
    nxos_facts:

  - name: Print interfaces information
    debug:
      var: ansible_net_interfaces

  - name: Verify ansible_net_interfaces have data
    fail:
      msg: "'ansible_net_interfaces' variable is not defined"
    when: ansible_net_interfaces is not defined
