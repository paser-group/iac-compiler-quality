
- hosts: web1
  tasks:
    - name: Test SSH connection
      become: yes
      become_method: sudo
      ignore_errors: yes
      shell: echo "Testing SSH Connection"
      register: ssh_connect_result
      vars:
        ansible_ssh_user: root
        ansible_ssh_pass: wrong_password
      failed_when: ssh_connect_result.rc not in [0, 255]

