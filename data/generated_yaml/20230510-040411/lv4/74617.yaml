
---
- name: Test sudo command behavior
  hosts: all
  become: true
  tasks:
   - name: Execute command with sudo
     shell: "sudo echo 'Testing sudo command behavior' > /tmp/test_sudo_command_behavior.txt"
     register: sudo_result
     changed_when: false

   - name: Verify sudo command output
     shell: "cat /tmp/test_sudo_command_behavior.txt"
     register: sudo_output

   - name: Assert sudo command output
     assert:
       that:
         - "'Testing sudo command behavior' in sudo_output.stdout"
         - "sudo_result.rc == 0"
