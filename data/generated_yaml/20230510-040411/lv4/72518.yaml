
- name: Test playbook for file handling bugs
  hosts: all
  tasks:
  - name: Copy file to directory
    copy:
      src: /path/to/testfile.txt
      dest: /etc/ansible/testfile.txt

  - name: Change file permissions
    file:
      path: /etc/ansible/testfile.txt
      owner: root
      group: root
      mode: '0600'

  - name: Add incorrect character to file
    lineinfile:
      path: /etc/ansible/testfile.txt
      backup: yes
      line: 'This is a test file with an incorrect char: â˜¹'

  - name: Retrieve file information
    stat:
      path: /etc/ansible/testfile.txt
    register: file_info

  - name: Debug file information
    debug:
      var: file_info
