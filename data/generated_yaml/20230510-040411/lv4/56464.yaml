
- hosts: localhost
  gather_facts: no
  vars:
    items:
      - one
      - two
      - three
      - four
  tasks:
    - name: test selective callback with loop
      debug:
        msg: "{{ item }}"
      loop: "{{ items }}"
      loop_control:
        label: "{{ item }}"
      register: results
      failed_when: "'FAIL' in results.msg"
