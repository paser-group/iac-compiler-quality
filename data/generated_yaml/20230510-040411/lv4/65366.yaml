
- name: Check for duplicate keys in dictionary
  debug:
    var: "{{ dictionary_variable | dictsort }}"
  ignore_errors: yes

- name: Fail if duplicate keys are found
  fail:
    msg: "Duplicate key found in dictionary"
  when: dictionary_variable | length != dictionary_variable | dict2items | list | count
