
- name: Discover Bugs in Ansible Compiler
  hosts: localhost
  tasks:
    - set_fact:
        string: "{{ ['{{', '}}'] + ansible_reserved_variables }}"
    - set_fact:
        tags: "{{ ['S'] + ['S'] }}"
    - set_fact:
        template_string: "{% set chars = '1234567890abcdefghijklmnopqrstuvwxyABCDEFGHIJKLMNOPQRSTUVWXYZ' %}{% for t in tags %}{{ string | random(length=1) if t == 'S' else t }}{{ chars | random(length=1) }}{% endfor %}"
    - debug:
        var: template_string
