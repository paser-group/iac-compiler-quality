
- name: Test hostname module on Docker container
  hosts: docker_container
  gather_facts: false
  tasks:
    - name: Execute hostname module
      hostname:
      register: result
    - name: Print result
      debug:
        var: result
    - name: Fail task if hostname module works on container
      fail:
        msg: "Hostname module should not work on Docker containers!"
      when: result is not failed

- name: Test hostname module on non-Docker host
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Execute hostname module
      hostname:
      register: result
    - name: Print result
      debug:
        var: result
