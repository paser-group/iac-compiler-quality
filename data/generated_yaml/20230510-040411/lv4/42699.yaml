
- name: Example playbook for dynamic variables in with_items
  hosts: localhost
  vars:
    dynamic_var_1: "{{ item }}"
    dynamic_var_2: "{{ item.split('.')[0] }}"
    dynamic_var_3: "{{ static_var }}"
  vars_files:
    - vars.yml
  gather_facts: no
  tasks:
    - name: task using dynamic_var_1
      debug:
        msg: "dynamic_var_1={{ dynamic_var_1 }}"
      with_items: "{{ items_list }}"
    - name: task using dynamic_var_2
      debug:
        msg: "dynamic_var_2={{ dynamic_var_2 }}"
      with_items: "{{ items_list }}"
    - name: task using dynamic_var_3
      debug:
        msg: "dynamic_var_3={{ dynamic_var_3 }}"
      with_items: "{{ items_list }}"

