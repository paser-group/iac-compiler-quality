
- name: Validate input and test for undefined variables
  hosts: localhost
  gather_facts: false
  
  tasks:
  - name: Set some variables
    set_fact:
      scm_archive_role: '{{ lookup("env", "SCM_ARCHIVE_ROLE") }}'
    
  - name: Debug the results
    debug:
      var: scm_archive_role
      
  - name: Test the Archive process
    archive:
      path: /path/to/files
      dest: /path/to/destination/{{ scm_archive_role }}
