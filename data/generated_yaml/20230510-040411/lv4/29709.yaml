
- name: Playbook to uncover potential bugs in azure_rm_virtualmachine
  hosts: ansible-host
  tasks:
    - name: Create a virtual machine with an invalid subnet name
      azure_rm_virtualmachine:
        name: vm1
        resource_group: test
        location: eastus
        admin_username: testadmin
        admin_password: "{{ secret_admin_password }}"
        vm_size: Standard_D2_v2
        network_interface_names: nic1
        subnet_name: invalid_subnet_name
      register: result

    - name: Print the playbook output
      debug:
        var: result
