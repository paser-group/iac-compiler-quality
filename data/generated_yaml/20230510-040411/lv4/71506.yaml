
- name: Test Ansible compiler for file mode issues
  hosts: servers
  become: yes
  tasks:
    - name: Install role using ansible-galaxy
      community.general.galaxy_collection:
        name: myrole
        state: present
      register: galaxy_install_result

    - name: Check installation result
      assert:
        that:
          - galaxy_install_result is success

    - name: Modify file mode
      file:
        path: /path/to/file
        mode: 644
