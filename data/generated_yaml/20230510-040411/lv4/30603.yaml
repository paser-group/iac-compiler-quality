
- hosts: windows
  gather_facts: true
  tasks:
    - name: Get IP address of the host
      shell: ipconfig | awk '/IPv4 Address/ {print $NF}'
      register: ip_address
    - set_fact:
        ansible_default_ipv4: "{{ ip_address.stdout_lines[0] }}"
    - name: Ensure ansible_default_ipv4 fact is not empty
      assert:
        that:
          - ansible_default_ipv4
        msg: "Error: ansible_default_ipv4 fact is empty"
