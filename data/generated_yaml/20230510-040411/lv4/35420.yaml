
- name: Test Playbook for http2 filter
  hosts: localhost
  tasks:
    - name: Test http2 filter with variables
      debug:
        msg: "{{ item | http2 }}"
      with_items:
        - "www.example.com"
        - "http://example.com"
        - "http://example.com/file.txt"
        - "http://example.com/dir1/dir2/file.txt"

    - name: Test http2 with template
      debug:
        msg: "{{ 'example.com' | http2 }}"

    - name: Test http2 filter in conditionals
      debug:
        msg: "Split: {{ item | http2 | split('.') }} "
             "Extract: {{ item | http2 | extract(1) }}"
      with_items:
        - "http://example.com/file.txt"
        - "https://www.example.com/dir1/dir2/file.txt"

    - name: Test http2 filter edge cases
      debug:
        msg: "{{ long_string_var | http2 }}"
      vars:
        long_string_var: "{{ 'X' | multiply(1024*1024) }}"

