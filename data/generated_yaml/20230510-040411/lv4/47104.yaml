yaml
- name: Test follow option on non-existent symlink
  hosts: localhost
  tasks:
  - name: Create a symlink with missing target 
    file:
      src: /tmp/non-existent-link
      dest: /tmp/link
      state: link
  - name: Check if follow option raises error or creates file
    file:
      path: "{{ item.path }}"
      follow: "{{ item.follow }}"
    loop:
      - { path: "/tmp/link", follow: "yes" }
      - { path: "/tmp/link", follow: "no" }
