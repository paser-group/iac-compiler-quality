
# roles/ansible_compiler_bug_tester/defaults/main.yml
---
test_var:

# roles/ansible_compiler_bug_tester/vars/main.yml
---
test_var:

# roles/ansible_compiler_bug_tester/tasks/main.yml
---
- name: Set a new fact with the value of test_var
  set_fact:
    new_var: "{{ test_var }}"

# playbook.yml
---
- name: Test compiler bug
  hosts: localhost
  connection: local
  gather_facts: no
  tasks:
    - name: Include ansible_compiler_bug_tester role
      include_role:
        name: ansible_compiler_bug_tester
    - name: Capture output
      register: output
      failed_when: False
    - name: Debug output
      debug:
        var: output
