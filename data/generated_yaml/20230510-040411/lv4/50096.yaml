
- name: Test MySQL connection with SSL_CA attribute
  hosts: localhost
  gather_facts: false
  vars:
    db_name: test_db
    db_ssl_ca: "/path/to/ca.pem"
  tasks:
    - name: Create database with SSL_CA attribute
      mysql_db:
        name: "{{ db_name }}"
        state: present
        login_host: "{{ inventory_hostname }}"
        login_user: root
        login_password: ""
        ssl_ca: "{{ db_ssl_ca }}"
      register: result

    - name: Dump database with SSL_CA attribute
      mysql_db:
        name: "{{ db_name }}"
        state: dump
        login_host: "{{ inventory_hostname }}"
        login_user: root
        login_password: ""
        ssl_ca: "{{ db_ssl_ca }}"
      register: result
