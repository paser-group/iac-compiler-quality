
- hosts: all
  tasks:

  - name: Generate MAC address with prefix of length 2
    set_fact:
      mac_address: "{{ '02:' + '%02x:%02x:%02x:%02x:%02x' | format(*[randint(0, 255) for _ in range(5)]) }}"
    # expected MAC address: starts with 02, followed by 5 hex blocks separated by colons 
    assert:
      that:
        - mac_address is regex('^02(:[0-9a-f]{2}){5}$')
        
  - name: Generate MAC address with prefix of length 4
    set_fact:
      mac_address: "{{ 'abcd:' + '%02x:%02x:%02x:%02x:%02x' | format(*[randint(0, 255) for _ in range(5)]) }}"
    # expected MAC address: starts with abcd, followed by 5 hex blocks separated by colons 
    assert:
      that:
        - mac_address is regex('^abcd(:[0-9a-f]{2}){5}$')
