
- name: Testing any_errors_fatal with includes
  hosts: localhost
  any_errors_fatal: true
  tasks:
    - name: Including playbook 1
      include: playbook1.yml

    - name: Including playbook 2
      any_errors_fatal: false
      include: playbook2.yml

- name: Playbook 1
  hosts: localhost
  tasks:
    - name: Task 1 in Playbook 1
      command: some_command1
      register: result1
      ignore_errors: True

    - name: Task 2 in Playbook 1
      command: some_command2
      register: result2

    - name: Debug Result 1
      debug:
        var: result1

    - name: Debug Result 2
      debug:
        var: result2

- name: Playbook 2
  hosts: localhost
  tasks:
    - name: Task 1 in Playbook 2
      command: some_command1
      register: result1
      ignore_errors: True

    - name: Task 2 in Playbook 2
      command: some_command2
      register: result2

    - name: Debug Result 1
      debug:
        var: result1

    - name: Debug Result 2
      debug:
        var: result2
