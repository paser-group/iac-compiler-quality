
- name: Check default gateway/interface
  shell: ip route
  register: default_route

- name: Modify routing table
  shell: ip route add default via <incorrect_gateway> dev <incorrect_interface>
  when: "'<incorrect_gateway>' not in default_route.stdout"

- name: Ping external host
  ping:
  delegate_to: <external_host>

- name: Remove modified routing table
  shell: ip route del default via <incorrect_gateway> dev <incorrect_interface>
  when: "'<incorrect_gateway>' not in default_route.stdout"
