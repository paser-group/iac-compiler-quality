
- name: Test Ansible Windows connection plugin with SSL configurations
  hosts: windows_hosts
  gather_facts: false
  vars:
    ansible_winrm_transport: kerberos
    ansible_user: domain\username
    ansible_password: mypassword
  tasks:
  - name: Test WinRM connection with TLSv1.0 + RC4-MD5
    win_ping:
    vars:
      ansible_winrm_transport: ssl
      ansible_winrm_server_cert_validation: ignore
      ansible_winrm_ssl_protocol: TLSv1
      ansible_winrm_ssl_cipher_suite: RC4-MD5
  - name: Test WinRM connection with TLSv1.2 + AES256-GCM-SHA384
    win_ping:
    vars:
      ansible_winrm_transport: ssl
      ansible_winrm_server_cert_validation: ignore
      ansible_winrm_ssl_protocol: TLSv1.2
      ansible_winrm_ssl_cipher_suite: AES256-GCM-SHA384
  - name: Test WinRM connection with TLSv1.3 + CHACHA20-POLY1305
    win_ping:
    vars:
      ansible_winrm_transport: ssl
      ansible_winrm_server_cert_validation: ignore
      ansible_winrm_ssl_protocol: TLSv1.3
      ansible_winrm_ssl_cipher_suite: CHACHA20-POLY1305
