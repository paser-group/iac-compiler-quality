
- name: Test Macports upgrade process
  hosts: localhost
  tasks:
    - name: Try to upgrade a non-existent package version
      shell: "sudo port upgrade non-existent-package@1.0.0"
      register: output

    - name: Check if Macports reports upgrade
      debug:
        msg: "Macports reported an upgrade" 
      when: "'Nothing to upgrade' not in output.stdout_lines"
