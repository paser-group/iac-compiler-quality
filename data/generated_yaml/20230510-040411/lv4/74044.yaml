
- name: Run inventory script with expected error
  command: /path/to/inventory_script_with_expected_error
  register: script_output
  ignore_errors: true

- name: Check that expected error is in stderr
  assert:
    that:
      - "Error message" in script_output.stderr
    fail_msg: "Expected error message not found"
