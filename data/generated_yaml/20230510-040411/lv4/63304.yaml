
---
- hosts: localhost
  tasks:
    - name: Test API Call
      uri:
        url: "http://{{ api_server }}/api/v2/path/to/api"
        method: GET
        headers:
          Content-Type: "application/json"
        return_content: yes
        status_code: 200
      register: api_call
      vars:
        api_server: "{{ server }}"

    - name: Debug API Call Output
      debug:
        var: api_call
      when: api_call.status == 200
