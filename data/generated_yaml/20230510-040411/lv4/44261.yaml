
- name: Test Playbook for default(omit) variable behavior
  hosts: all
  vars:
    my_var: "{{ variable_which_does_not_exist | default(omit) }}"
  tasks:
    - name: Output variable value
      debug:
        var: my_var
    - name: Use variable with default(omit)
      shell: |
        if [ "{{ my_var }}" == "" ]; then
          echo "Variable is empty, as expected"
        fi
