
- name: Check for Error Using Command Module
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Execute Command with Error
      command: ls -l /nonexistent_directory
      register: command_output
      timeout: 5
      ignore_errors: true
    - name: Print Command Output
      debug: var=command_output
    - name: Fail Task if Error Occurs
      fail:
        msg: "Command Failed"
      when: command_output.rc != 0
