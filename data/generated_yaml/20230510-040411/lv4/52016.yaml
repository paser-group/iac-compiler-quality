
---
- name: Test playbook for elb_application_lb
  hosts: localhost
  gather_facts: no

  vars:
    elb_application_lb_name: my-load-balancer
    elb_application_lb_scheme: internet-facing
    elb_application_lb_listener_protocol: HTTP
    elb_application_lb_listener_port: 80
    elb_application_lb_target_groups:
      - target_group_arn: arn:aws:elasticloadbalancing:us-west-2:123456789012:targetgroup/my-targets/73e2d6bc24d8a067
        weight: 100

  tasks:
    - name: Create an elb_application_lb
      elb_application_lb:
        name: "{{ elb_application_lb_name }}"
        scheme: "{{ elb_application_lb_scheme }}"
        listener:
          protocol: "{{ elb_application_lb_listener_protocol }}"
          port: "{{ elb_application_lb_listener_port }}"
        target_groups: "{{ elb_application_lb_target_groups }}"
        access_logs:
          bucket: my-log-bucket
          prefix: "{{ access_logs_s3_prefix }}"
