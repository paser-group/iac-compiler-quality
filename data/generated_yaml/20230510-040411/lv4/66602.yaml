
- name: Add XML fragment to Windows machine
  win_xml:
    path: C:\test.xml
    element: '<root><child attr="test">text</child></root>'

- name: Query added XML fragment
  win_command: 'powershell -Command "(Select-Xml -Path C:\test.xml -XPath "//child").Node.InnerText"'
  register: result

- name: Verify XML fragment
  assert:
    that:
      - result.stdout == 'text'
