
- hosts: localhost
  tasks:
  - name: Test Ansible Lookup module
    tempdir:
      path: "/tmp/password_lookup_dir"
      state: directory

  - name: Test Ansible Lookup error handling
    tempdir:
      path: "/tmp/password_lookup_dir"
      state: directory
    register: error_output
    ignore_errors: yes

  - name: Verify Ansible error handling message
    assert:
      that: "Lookup module failed with {{ error_output.stderr }} due to [Errno 17] File exists"
