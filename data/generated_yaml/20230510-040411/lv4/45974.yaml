
- name: Iterate through a list of items
  hosts: all
  vars:
    items_list:
        - item1
        - item2
        - item3
  tasks:
    - set_fact:
        index: 0
        max_index: "{{ items_list|length }}"
    - name: Loop through the items list
      debug:
        msg: "Current item: {{ item }}"
      with_items: "{{ items_list }}"
      when: "index < max_index"
