
- name: Test nxos_vtp_version module
  hosts: switches

  vars:
    n1_images:
      - image1.n1
      - image2.n1
      - image3.n1

  tasks:
    - name: Get VTP Password for N1 images
      nxos_vtp_version:
        image: "{{ item }}"
      register: vtp_output
      loop: "{{ n1_images }}"

    - name: Debug output
      debug:
        msg: "{{ vtp_output }}"

    - name: Assert no errors occurred
      assert:
        that: "'error' not in vtp_output.stdout"
