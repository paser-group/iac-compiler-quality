
---
- hosts: <remote_hosts>
  become: yes
  
  tasks:
  - name: Check if ~/.ssh exists
    stat:
      path: "{{ ansible_env.HOME }}/.ssh"
    register: ssh_dir_exist

  - name: Create ~/.ssh directory
    file:
      path: "{{ ansible_env.HOME }}/.ssh"
      state: directory
    when: not ssh_dir_exist.stat.exists

  - name: Generate known_hosts file with empty key
    known_hosts:
      name: <remote_host>
      key: ''
      path: "{{ ansible_env.HOME }}/.ssh/known_hosts"
      state: present
      mode: '0600'
