
- name: Test vmware_vm_facts module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Fetch facts for a single virtual machine
      vmware_vm_facts:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: False
        uuid: "{{ vm_uuid }}"
      register: single_vm_facts

    - name: Fetch facts for all virtual machines on a datastore
      vmware_vm_facts:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: False
        datastore: "{{ datastore_name }}"
      register: datastore_vm_facts

    - name: Fetch facts for all virtual machines in a folder
      vmware_vm_facts:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: False
        folder: "/{{ folder }}"
      register: folder_vm_facts

    - name: Fetch facts for all virtual machines
      vmware_vm_facts:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: False
      register: all_vm_facts
