
- name: Check for bad error message when Python is not available
  hosts: localhost
  tasks:
    - name: Attempt to run Ansible compiler without Python
      command: ansible-playbook playbook.yml -e "ansible_python_interpreter=/nonexistent/python"
      register: output

    - name: Check for bad error message
      debug:
        msg: "{{ output.stderr }}"
      when: "'/usr/bin/python' not in output.stderr"
