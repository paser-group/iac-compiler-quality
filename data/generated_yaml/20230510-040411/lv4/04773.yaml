
- hosts: all
  vars:
    some_dict:
      existing_key: value
      missing_key:
      another_existing_key: another_value
  tasks:
    - name: Ensure all keys are present in some_dict
      fail:
        msg: "Missing key(s) in some_dict"
      when: "'missing_key' not in item.keys()"
      with_dict: "{{ some_dict }}"
