
- hosts: localhost
  vars:
    s3_bucket_name: "my-s3-bucket"
    s3_default_encryption_key_id: "1234abcd-5678-efgh-9012-ijklmnopqrst"
  tasks:
    - name: Create S3 bucket with KMS encryption
      s3_bucket:
        name: "{{ s3_bucket_name }}"
        state: present
        object_acl: private
        encryption: "aws:kms"
        kms_master_key_id: "{{ s3_default_encryption_key_id }}"
