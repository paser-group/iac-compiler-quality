yaml
---
- name: Fix 'file' module error on Oracle Enterprise Linux
  hosts: all
  become: yes

  tasks:
    - name: Check if 'file' module is installed
      command: ansible-doc file
      register: file_module_check
      ignore_errors: yes

    - name: Install 'file' module if it is not installed
      package:
        name: ansible
        state: present
      when: "'FAILED TO FIND MODULE' in file_module_check.stderr"
