yaml
---
- name: Ansible playbook to display clearer error reason on remote target
  hosts: your_remote_target
  gather_facts: False

  tasks:
  - name: Check if remote command succeeds
    shell: echo "This is a test"
    register: test_command
    ignore_errors: True

  - name: Check if file exists
    stat:
      path: /path/to/your/file
    register: file_exists
    ignore_errors: True

  - fail:
      msg: "Unable to execute the command or file doesn't exist"
    when: test_command | failed or not file_exists.stat.exists
