
- hosts: all
  gather_facts: false

  tasks:
    - name: Check if dict is empty
      set_fact:
        dict_empty: "{{ my_dict is defined and my_dict|length == 0 }}"

    - name: Display message if dict is empty
      debug:
        msg: "Dictionary is empty"
      when: dict_empty

    - name: Display message if dict is not empty
      debug:
        msg: "Dictionary has {{ my_dict|length }} item(s)"
      when: not dict_empty
