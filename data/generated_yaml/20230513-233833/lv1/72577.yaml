
---
- name: Example playbook for logging shell and command plugin errors
  hosts: all
  become: yes
  
  tasks:
    - name: Run shell script
      shell:
        cmd: /path/to/script.sh
      register: result
      ignore_errors: true
    
    - name: Debug shell script output
      debug:
        var: result.stderr_lines
      when: result.rc != 0
    
    - name: Run command
      command: /path/to/command
      register: result
      ignore_errors: true
    
    - name: Debug command output
      debug:
        var: result.stderr_lines
      when: result.rc != 0
