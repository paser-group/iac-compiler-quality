yaml
---
- name: Playbook to demonstrate using 'when' with 'include_role'
  hosts: all
  become: true

  tasks:
    - name: Include role with 'when' conditional
      include_role:
        name: my_role
      when: 
        - not my_variable

    - name: Task after role
      debug:
        msg: "Executing the task"

  vars:
    my_variable: true
