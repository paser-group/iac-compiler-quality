
- name: Configure GCP Compute Engine instances
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Create GCP Compute Engine instance
    gcp_compute_instance:
      name: my-instance
      machine_type: n1-standard-1
      disk_auto_delete: true
      zone: us-central1-a
      network_interface:
        network: projects/{{ gcp_project_id }}/global/networks/default
      service_account_email: my-service-account@{{ gcp_project_id }}.iam.gserviceaccount.com
      project: "{{ gcp_project_id }}"
    register: gce_instance
