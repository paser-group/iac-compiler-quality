
---
- name: Fix ANSIBLE_VYOS_TERMINAL_LENGTH Type Error Issue
  hosts: all
  connection: local

  tasks:
    - name: Include vars
      include_vars:
        file: /path/to/vars.yml

    - name: Set ANSIBLE_VYOS_TERMINAL_LENGTH
      set_fact:
        ansible_vyos_terminal_length: "{{ vyos_terminal_length }}"

    - name: Run playbook with vyos plugin
      vyos_command:
        transport: ssh
        provider: "{{ vyos }}"
        commands: |
          show version
      register: vyos_version_output

    - name: Debug plugin output
      debug:
        var: vyos_version_output

