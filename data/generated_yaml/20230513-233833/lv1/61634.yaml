
---
- name: Create a Google Compute Engine image from a disk
  hosts: localhost
  become: yes
  gather_facts: no

  vars:
    disk_name: "disk_name"
    project_id: "project_id"
    image_name: "image_name"
    zone: "us-central1-a"
    image_labels:
      key: value

  tasks:
  - name: create image from disk
    gcp_compute_image:
      name: "{{ image_name }}"
      source_disk: "{{ disk_name }}"
      project: "{{ project_id }}"
      labels: "{{ image_labels }}"
      state: present
      zone: "{{ zone }}"
    register: result

  - name: Print results
    debug:
      var: result
