yaml
---
- name: Playbook to fix extra-vars issue
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Run a command with extra-vars
      command: ./my_command.sh --extra-vars @extra_vars_file.txt
      args:
        chdir: /path/to/my_command/
      register: cmd_output
      ignore_errors: true

    - name: Retry the command with the variable file prefix @ added
      command: ./my_command.sh --extra-vars @extra_vars_file.txt
      args:
        chdir: /path/to/my_command/
      when: "'@' not in cmd_output.stderr"
