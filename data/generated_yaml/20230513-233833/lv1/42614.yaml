
---
- name: Create a VMware guest with IPv6
  hosts: localhost
  gather_facts: no
  vars:
    vmware_hostname: your_hostname
    vmware_username: your_username
    vmware_password: your_password
    vmware_guest_ipv6: your_vmware_guest_ipv6
  tasks:

  - name: Instantiate a VMware guest
    vmware_guest:
      hostname: "{{ vmware_hostname }}"
      username: "{{ vmware_username }}"
      password: "{{ vmware_password }}"
      name: your_vm_name
      guest_id: ubuntu64Guest
      hardware:
        memory_mb: 4096
        num_cpus: 2
        scsi: paravirtual
      networks:
        - name: your_network_name
          start_connected: yes
          ipv6_address: "{{ vmware_guest_ipv6 }}"
      state: powered_on
    delegate_to: localhost
    register: vmware_guest

  - name: Print the VM power state
    debug:
      var: vmware_guest
