
---
- name: Configure Docker container IPV6 port bindings
  hosts: all
  become: yes

  tasks:
  - name: Enable IPV6 on the default bridge
    sysctl:
      name: net.ipv6.conf.all.disable_ipv6
      value: 0
      state: present
      sysctl_set: yes

  - name: Restart Docker service
    service:
      name: docker
      state: restarted

  - name: Expose Docker container with IPV6 binding
    docker_container:
      name: my_app
      image: my_image:latest
      state: started
      restart_policy: unless-stopped
      ports:
        - "80:80/tcp"
        - "[::]:80:80/tcp"
