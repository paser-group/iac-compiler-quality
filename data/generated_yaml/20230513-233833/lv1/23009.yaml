yaml
---
- name: Jinja Parsing Error Handling Playbook
  hosts: all
  become: true
  tasks:
    - name: execute shell command with Jinja parsing
      shell: "{{ command }}"
      register: shell_output
      ignore_errors: yes # will ignore any exit status other than 0
      vars:
        command: "{{ some_variable }}" # variable that may contain Jinja expressions

    - name: handle Jinja parsing errors
      debug:
        msg: "{{ shell_output.stderr }}"
      when: shell_output.rc != 0 and "'template error while" in shell_output.stderr
