yaml
- hosts: all
  gather_facts: no
  tasks:
    - name: Check connection via net_cli
      expect:
        command: net_cli
        responses:
          (?i)login: myuser
          (?i)password: mypassword
          (?i)failed: exit 1\n{{abortConnect()}}
        timeout: 10
      register: net_cli_result
      
    - name: Check prompt in output
      assert:
        that:
          - "'prompt' in net_cli_result.stdout"
