
---
- hosts: all
  become: yes
  gather_facts: yes

  tasks:
    - name: Copy Ansible Config File
      copy:
        src: /path/to/ansible.cfg
        dest: /etc/ansible/ansible.cfg

    - name: Start Vault Password Prompt
      vars_prompt:
        - name: vault_pass
          prompt: "Enter vault password:"
          private: yes

    - name: Include Vault Password in Playbook
      include_vars:
        file: /etc/ansible/vault_pass.txt
        name: vault_pass

    - name: Execute Playbook with Vault Password
      command: ansible-playbook -i inventory.yml playbook.yml --vault-password-file /etc/ansible/vault_pass.txt
