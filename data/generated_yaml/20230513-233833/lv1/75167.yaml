yaml
- hosts: all
  become: true
  gather_facts: false
  
  tasks:
    - name: SSH keycheck disabling
      ansible.builtin.lineinfile:
        path: /etc/ansible/ansible.cfg                                                                      # change path accordingly
        regexp: "^host_key_checking[[:space:]]*=[[:space:]]*.*"
        line: "host_key_checking = False"
        backup: yes

    - name: Verify ssh keycheck is disabled
      ansible.builtin.shell: |
        grep -i "host_key_checking = false" /etc/ansible/ansible.cfg                                         # change path accordingly
      register: keycheck_status

    - name: Print ssh keycheck disabled status
      debug:
        msg: "SSH keycheck is disabled {{'-' if keycheck_status.stdout else 'not'}}"                     
