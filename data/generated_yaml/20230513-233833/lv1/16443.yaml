
---
- name: Fix "Missing end of comment tag" error
  hosts: all
  vars:
    file_path: /path/to/file

  tasks:
  - name: Ensure file has correct ending
    lineinfile:
      path: "{{ file_path }}"
      regexp: '^template-data:'
      line: 'template-data: # This is a comment'
      state: present

  - name: Restart service
    service:
      name: my-service
      state: restarted
