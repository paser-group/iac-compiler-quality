yaml
---
- name: Dynamic set of module var fails with template error
  hosts: localhost
  gather_facts: no
  
  vars:
    var_list:
      - var1
      - var2
      - var3
  
  tasks:
    - name: Set module variable dynamically
      set_fact:
        "{{ item }}": "{{ lookup('env', item) }}"
      loop: "{{ var_list }}"
  
    - name: Display module variables
      debug:
        var: "{{ item }}"
      loop: "{{ var_list }}"
