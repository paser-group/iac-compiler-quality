yaml
---
- name: Fix variable precedence issue in arrays with group_vars/all
  hosts: all
  become: true

  tasks:
    - name: Update variables in group_vars/all
      vars:
        my_array:
          - "{{ my_var }}"
          - "{{ my_second_var }}"
      set_fact:
        my_array: "{{ my_array }}"

    - name: Use variable from group_vars/all
      debug:
        msg: "The value of my_var is {{ my_array[0] }} and the value of my_second_var is {{ my_array[1] }}"
