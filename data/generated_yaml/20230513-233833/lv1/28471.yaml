yaml
---
- name: Configure VMware guest MAC address
  hosts: all
  vars:
    vm_name: "your-guest-vm-name-here"
    mac_address: "00:0C:29:8E:73:11"    
  tasks:
    - name: Gather VMware guest facts
      gather_facts: yes
      gather_subset: virt
    - name: Set guest MAC address
      vmware_guest:
        hostname: your-vmware-hostname-here
        username: your-vmware-username-here
        password: your-vmware-password-here
        validate_certs: False
        datacenter: your-datacenter-name-here
        vm_name: "{{ vm_name }}"
        hardware:
          ethernet:
            '4000':
              mac: "{{ mac_address }}"
