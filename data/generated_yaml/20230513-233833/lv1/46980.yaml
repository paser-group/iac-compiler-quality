
---
- name: Install Python on remote servers
  hosts: all
  become: yes
  tasks:
    - name: Check Python version
      shell: python --version
      register: python_version_check
      ignore_errors: yes

    - name: Install Python
      raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)
      when: python_version_check.rc != 0
