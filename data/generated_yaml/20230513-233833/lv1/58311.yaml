yaml
- name: Install necessary dependencies for snow modules
  become: true
  apt:
    name:
      - python3-pip
      - libssl-dev
      - libffi-dev
    state: present

- name: Install snow-utilities package using pip
  become: true
  pip:
    name: snow-utilities
    executable: pip3
    state: latest

- name: Configure ADFS authentication for snow modules
  vars:
    snow_user: your_snow_user
    snow_password: your_snow_password
    adfs_url: your_adfs_url
  become: true
  snow_host:
    name: "{{ adfs_url }}"
    username: "{{ snow_user }}"
    password: "{{ snow_password }}"
    auth: adfs

- name: Test snow modules
  snow_record:
    username: "{{ snow_user }}"
    password: "{{ snow_password }}"
    instance: your_snow_instance
    table: your_snow_table
    state: present
