
---
- name: Update host group vars
  hosts: all
  tasks:
  - name: Ensure host group vars access only YAML files
    find:
      paths: "/path/to/host/group/vp"
      patterns: "*.yaml,*.yml"
    register: yaml_files

  - name: Update host group vars
    include_vars:
      dir: "/path/to/host/group/var/"
    loop: "{{ yaml_files.files }}"
    loop_control:
      loop_var: file_info
    when: file_info.path.endswith('.yaml') or file_info.path.endswith('.yml')
