
---
- hosts: <your_hosts>
  become: yes

  tasks:
    - name: Install Ansible Galaxy dependencies
      pip:
        name:
          - git
          - sshpass
        state: present
      become: yes

    - name: Clone Galaxy and Install Packages
      ansible.builtin.shell: |
        git clone https://github.com/ansible/galaxy.git
        cd galaxy
        pip install -r requirements.txt
        python setup.py install
      become: yes

    - name: Verify Galaxy installation
      ansible.builtin.command: galaxy --help 

    - name: Test SCM errors
      ansible.builtin.command: galaxy init test-galaxy
      ignore_errors: true

    - name: Debug Galaxy installation
      debug:
        var: ansible_last_result
