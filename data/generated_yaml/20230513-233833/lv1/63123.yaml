
- name: Fix segfault error in shell module
  hosts: all
  gather_facts: true

  tasks:
  - name: Run command in shell
    shell: your_command_here
    register: shell_result
    ignore_errors: true

  - name: Check shell command exit status
    fail:
      msg: "Shell command failed with negative exit code '{{ shell_result.rc }}'"
    when: shell_result.rc < 0
