
---

- name: ec2 Module issue in Ansible 2.2
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required Python libraries
      become: true
      apt:
        name: python-pip
        state: present

    - name: Install boto library
      become: true
      pip:
        name: boto
        state: present

    - name: Run ec2 instance creation
      become: true
      ec2:
        keypair: my_keypair
        group: my_security_group
        instance_type: t2.micro
        image: ami-0c94855ba95c71c99
        region: us-west-2
        count: 1
        wait: true
