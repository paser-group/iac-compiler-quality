
---
- hosts: all

  vars:
    my_list:
    - item1
    - item2
    - item3

  tasks:
  - name: Loop through list
    command: ls
    loop: "{{ my_list }}"
    register: result

  - name: Print results
    debug:
      var: result.item
      failed_when: result is failed and result.skipped == false
