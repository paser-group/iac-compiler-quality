yaml
---
- name: Ansible SSH error logging
  hosts: all
  gather_facts: true
  vars:
    gather_subset: '!all'
  tasks:
  - name: Run command which causes SSH errors
    command: echo "This is a sample command" && echo "This is an invalid command" && echo "This is another sample command"
    ignore_errors: yes
    register: ssh_output
  - name: Log SSH errors
    debug:
      var: ssh_output.stderr_lines
