
---
- name: Perform robocopy operation on Windows
  hosts: windows_hosts

  tasks:
    - name: Copy files using robocopy
      win_robocopy:
        src: C:\source\
        dest: C:\destination\
        files: '*.txt'
      register: robocopy_result
      
    - name: Debug robocopy result
      debug:
        var: robocopy_result

    - name: Fail if robocopy returned changed incorrectly
      fail:
        msg: "Robocopy task did not return correctly"
      when: robocopy_result.changed != true
