
---
- hosts: your_host
  gather_facts: true
  become: true
  
  vars:
    spot_price: null
  
  tasks:
    - name: EC2 user-data
      ec2_instance:
        spot_price: "{{ spot_price }}"
        image_id: "your_image_id"
        instance_type: "your_instance_type"
        wait: true
        user_data: |
          #!/bin/bash
          # Your user data script here
      register: ec2_instance_result
  
  - name: Display EC2 instance details
    debug:
      var: ec2_instance_result
