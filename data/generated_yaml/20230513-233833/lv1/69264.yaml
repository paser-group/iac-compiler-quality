
- name: Configure RouterOS
  hosts: routeros

  tasks:
  - name: Test RouterOS Connection
    routeros_command:
      commands:
        - "/system/resource/print"

  - name: Configure RouterOS System
    routeros_command:
      commands:
        - "/system/identity/set name=router1"
        - "/system/ntp/client set enabled=yes primary-ntp=0.pool.ntp.org"
        - "/system/routerboard settings set cpu-frequency=auto"

  - name: Save RouterOS Configuration
    routeros_command:
      commands:
        - "/system backup save name=routeros-auto.backup"
