
---
- name: Run playbook
  hosts: all
  gather_facts: yes
  
  tasks:
    - name: Run task only once
      command: /some/command
      run_once: true
      register: result
  
    - name: Do something else
      block:
        - name: Do first task
          command: /some/other/command
          
        - name: Do second task
          command: /yet/another/command
          
      rescue:
        - name: Do backup task
          command: /do/backup/command
          
      always:
        - name: Record result
          debug:
            msg: "{{ result }}"
