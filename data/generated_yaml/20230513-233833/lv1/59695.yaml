
---
- name: Fix string index out of range exception
  hosts: all
  become: true

  tasks:
  - name: Update apt cache
    apt:
      update_cache: yes

  - name: Install required dependencies
    apt:
      name: python3-pip
      state: present

  - name: Update Python to latest stable version
    pip:
      name: setuptools
      state: latest
      executable: /usr/bin/python3
      extra_args: "--user"

  - name: Install required libraries
    pip:
      name:
        - ansible
      state: latest
      executable: /usr/bin/python3
      extra_args: "--user"
