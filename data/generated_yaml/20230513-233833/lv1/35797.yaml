
---
- name: Ensure idempotence for nxos_l2_interface
  hosts: my_network_device
  gather_facts: no

  tasks:
    - name: Configure nxos_l2_interface
      nxos_l2_interface:
        intf: Ethernet1/1
        state: present
        access_vlan: 100
        mode: access
      register: intf_response

    - name: Verify idempotence
      assert:
        that: intf_response is not changed
      msg: "Interface configuration has changed. Please check the configuration."

