
---
- name: Restart Service on Dead State Failure
  hosts: all
  gather_facts: true

  tasks:
  - name: Stop Service
    service:
      name: myservice
      state: stopped
    register: stopped_svc
    ignore_errors: true

  - name: Start Service
    service:
      name: myservice
      state: started
    when: stopped_svc is failed
