
---
- name: Fix bigip_pool_member error
  hosts: all
  gather_facts: false

  tasks:
  - name: Install dependencies
    become: true
    apt:
      name: python3-pip
      state: present

  - name: Install f5-sdk
    become: true
    pip:
      name: f5-sdk
      state: present

  - name: Update BIG-IP pool member
    f5networks.f5_bigip.bigip_pool_member:
      provider:
        server: "{{ inventory_hostname }}"
        user: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        validate_certs: no
      pool: "my_pool"
      partition: "Common"
      name: "my_member"
      state: "present"
      address: "10.0.0.10"
      port: "80"
      monitor: "http"
