
---
- name: Troubleshoot playbook errors
  hosts: all
  gather_facts: yes

  tasks:
  - name: Attempt to run playbook
    ansible.builtin.command: ansible-playbook playbook.yml
    register: playbook_output
    ignore_errors: true

  - name: Check for error in playbook output
    debug:
      msg: "Error found in playbook output"
    when: playbook_output.rc != 0

  - name: Parse arguments off playbook file
    ansible.builtin.command: ansible-playbook playbook.yml  --extra-vars "arg1=val1 arg2=val2 arg3=val3"
