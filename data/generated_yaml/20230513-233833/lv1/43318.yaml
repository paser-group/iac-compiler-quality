
- name: Ensure macports module uses correct check for package install
  hosts: all
  become: true
  
  tasks:
  
  - name: Install macports module
    pip:
      name: macports
      state: latest
  
  - name: Update package list
    command: port selfupdate
  
  - name: Ensure correct check is set in macports.conf
    lineinfile:
      path: /opt/local/etc/macports/macports.conf
      regexp: '^useAlwaysYes'
      line: 'useAlwaysYes       yes'
      state: present
      backup: yes
