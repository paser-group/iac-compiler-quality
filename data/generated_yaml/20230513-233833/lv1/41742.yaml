yaml
---
- name: Azure_SQL_Database Fix
  hosts: all
  become: yes
  tasks:
    - name: Install Python pip Package Manager
      become: yes
      apt:
        name: python-pip
        state: latest

    - name: Install PyODBC package
      pip:
        name: pyodbc
        state: latest

    - name: Install Freetds Package
      apt:
        name: freetds-dev
        state: latest

    - name: Configure Azure_rm_sqldatabase
      command: pip install git+https://github.com/ansible/ansible-modules-hashivault.git#egg=hashivault

    - name: Test the play
      azure_rm_sqldatabase:
        mode: login
        server_name: "mydatabase.database.windows.net"
        resource_group: "myresourcegroup"
        database_name: "mydb"
