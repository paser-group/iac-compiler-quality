yaml
- name: Reboot Windows server
  hosts: windows_server
  tasks:
    - name: Wait for server to be ready after reboot
      win_reboot:
        msg: "Another ReadTimeout issue (defaulting to 5 seconds)"
        timeout: 300
      register: reboot_result
  
    - name: Check if server is back online
      wait_for:
        host: "{{ inventory_hostname }}"
        port: 22
        state: started
        timeout: 600
      register: ping_result
    
    - name: Print reboot result
      debug:
        var: reboot_result
    
    - name: Print ping result
      debug:
        var: ping_result
