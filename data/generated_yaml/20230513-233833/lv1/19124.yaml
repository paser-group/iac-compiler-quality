yaml
- name: Add Security Group Rule
  hosts: all
  gather_facts: false
    
  vars:
    sg_group_name: "default"
    sg_protocol: "tcp"
    sg_port: 80
    sg_cidr_ip: "0.0.0.0/0"
    
  tasks:
    - name: Add a new rule to the security group
      ec2_group:
        name: "{{ sg_group_name }}"
        region: "{{ region }}"
        rules:
          - proto: "{{ sg_protocol }}"
            from_port: "{{ sg_port }}"
            to_port: "{{ sg_port }}"
            cidr_ip: "{{ sg_cidr_ip }}"
        state: present
      register: result
    - debug:
        var: result
