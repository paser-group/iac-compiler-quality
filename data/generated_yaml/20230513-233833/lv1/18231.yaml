
---
- name: Install Ansible via setup.py
  hosts: all
  become: true

  tasks:
  - name: Install setuptools
    apt:
      name: python-setuptools
    when: ansible_pkg_mgr == 'apt' or ansible_pkg_mgr == 'aptitude'
    
  - name: Install Ansible dependencies
    apt:
      name:
        - python-dev
        - libffi-dev
        - libssl-dev
        - python-pip
    when: ansible_pkg_mgr == 'apt' or ansible_pkg_mgr == 'aptitude'

  - name: Install Ansible via setup.py
    command: python setup.py install
    args:
      chdir: /path/to/ansible
