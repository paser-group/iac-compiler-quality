yaml
---
- name: Inventory Script Error Handling
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Check if inventory script is executable
      stat:
        path: /path/to/inventory_script
      register: inventory_script_stat

    - name: Execute inventory script
      shell: /path/to/inventory_script
      register: inventory_output
      ignore_errors: true
      
    - name: Fail if inventory script had errors
      fail:
        msg: "Inventory script failed with the following error: {{ inventory_output.stderr }}"
      when: inventory_output.rc != 0
