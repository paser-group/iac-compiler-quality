
---
- name: Update Inventory File
  hosts: inventory
  become: yes
  
  tasks:
  - name: Check if inventory file exists
    stat:
      path: /path/to/inventory
    register: file_check

  - name: Create inventory file if it does not exist
    copy:
      dest: /path/to/inventory
      content: |
        # Ansible inventory file
        
        [servers]
        192.168.1.1
        192.168.1.2
        
  - name: Update inventory file with template module
    template:
      src: /path/to/mytemplate.j2
      dest: /path/to/inventory
    notify:
      - Restart Service
      
  handlers:
  - name: Restart Service
    service:
      name: myservice
      state: restarted
