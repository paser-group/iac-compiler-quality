
---
- name: Azure Playbook
  hosts: localhost
  connection: local
  vars:
    - tag_name: your_tag_name_here
  tasks:
    - name: Fetch all Azure VMs by tag
      azure_rm_virtualmachine_facts:
        resource_group: your_resource_group_name_here
        tag_name: "{{ tag_name }}"
      register: azure_vms
      delegate_to: localhost

    - name: Display azure VM facts
      debug:
        var: azure_vms.virtualmachines
