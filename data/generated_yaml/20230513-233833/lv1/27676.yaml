
---
- hosts: <host>
  connection: network_cli

  vars:
    vtp_password: <password>

  tasks:
  - name: Ensure vtp password is configured
    nxos_vtp_password:
      password: "{{ vtp_password }}"
    register: vtp_password_state

  - name: Remove vtp password
    nxos_vtp_password:
      state: absent
    when: vtp_password_state.changed
