
---
- hosts: localhost
  vars:
    s3_bucket: 'your_s3_bucket_name'
    s3_object_key: 'your_s3_object_key'
    local_download_dir: '/path/to/local/folder'

  tasks:
    - name: Downloading S3 Object
      s3:
        bucket: "{{ s3_bucket }}"
        object: "{{ s3_object_key }}" 
        dest: "{{ local_download_dir }}"
        mode: get
        headers: {'Content-Encoding': 'gzip'}
      register: s3_download

    - name: Checking download success
      fail:
        msg: 'Error: S3 Object download unsuccessful'
      when: not s3_download.changed
