yaml
---
- name: Attach EBS Volume from Snapshot
  hosts: all
  vars:
    ec2_vol_snapshot_id: 'snapshot-XXXXXXX'
    ec2_vol_device_name: '/dev/sdf'
  tasks:
  - name: Create EBS Volume from Snapshot
    ec2_vol:
      snapshot: "{{ ec2_vol_snapshot_id }}"
      device_name: "{{ ec2_vol_device_name }}"
      region: "{{ ansible_ec2_placement_region }}"
      state: present
    register: ec2_vol_result
  - name: Attach EBS Volume from Snapshot
    ec2_vol:
      instance: "{{ ansible_ec2_instance_id }}"
      device_name: "{{ ec2_vol_device_name }}"
      id: "{{ ec2_vol_result.volume_id }}"
      region: "{{ ansible_ec2_placement_region }}"
      state: attached
