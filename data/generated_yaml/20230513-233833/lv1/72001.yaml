
---
- name: Update virtualization roles of KubeVirt VMs
  hosts: kubevirt_vms
   
  tasks:
  
  - name: Gather facts about VMs
    gather_facts:
      ansible_facts:
        ansible_facts_filter: kubevirt_vm

  - name: Set virtualization roles
    set_fact:
      ansible_virtualization_role: {{ your_new_role_here }}
    when: ansible_virtualization_type == "kvm"

  - name: Print updated facts
    debug:
      var: ansible_virtualization_role
