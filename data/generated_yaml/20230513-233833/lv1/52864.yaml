
- name: Gather facts about the system
  hosts: all
  gather_facts: yes # Ensure the facts are gathered for this playbook

  tasks:
    - name: Display the CPU count
      debug:
        var: ansible_processor_count

    - name: Re-gather facts using Python
      set_fact:
        gathered_facts: "{{ ansible_facts }}"
      register: arm_facts

    - name: Verify correct CPU count on ARM
      debug:
        var: arm_facts.ansible_processor_count
