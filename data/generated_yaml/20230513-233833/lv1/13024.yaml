
- hosts: all
  become: true
  vars:
    http_proxy: "http://your.proxy.server:proxy_port/"
    https_proxy: "https://your.proxy.server:proxy_port/"
    no_proxy: "localhost,127.0.0.1"
  tasks:
  - name: Install Python Certificate Authority
    become: true
    yum:
      name: python-certifi
      state: present
  - name: Configure Pip Proxy
    become: true
    blockinfile:
      path: /etc/pip.conf
      block: |
        [global]
        proxy = {{ http_proxy }}
        trust_pip_cert = yes
