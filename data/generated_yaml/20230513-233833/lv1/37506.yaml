yaml
---
- hosts: all
  tasks:
  - name: Copy script file to remote host
    copy:
      src: /path/to/script/file.py
      dest: /opt/script/file.py
      mode: 0755

  - name: Set INTERPRETER_TYPE and INTERPRETER_PATH variables
    lineinfile:
      path: /opt/script/file.py
      regexp: '^#!'
      line: '#!{{ INTERPRETER_TYPE }} {{ INTERPRETER_PATH }}'

  - name: Restart the script
    systemd:
      name: script.service
      state: restarted
