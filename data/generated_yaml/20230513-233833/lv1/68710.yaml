yaml
---
- name: Handle undefined error in rescue block
  hosts: all
  gather_facts: false

  tasks:

    - name: Perform the loop task
      debug:
        msg: "This is a loop task"
      loop:
        - item 1
        - item 2
        - item 3
      register: loop_result

    - name: Handle undefined error
      debug:
        msg: "Undefined error occured"
      when: ansible_failed_task is defined
      rescue:
        - debug:
          msg: "Caught the exception in rescue block"
