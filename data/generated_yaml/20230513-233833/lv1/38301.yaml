
- name: Configure IOS System
  hosts: <HOSTS_TO_CONFIGURE>
  gather_facts: no
  connection: network_cli

  tasks:
  
  - name: Configure domain command
    ios_command:
      commands:
        - domain my.domain.com
      provider:
        username: <USERNAME>
        password: <PASSWORD>
    register: domain_output

  - name: Check output of domain command
    debug:
      var: domain_output

  - name: Configure TTL of domain
    ios_command:
      commands:
        - ip domain lookup ttl 7200
      provider:
        username: <USERNAME>
        password: <PASSWORD>
    register: ttl_output

  - name: Check output of TTL command
    debug:
      var: ttl_output

  - name: Save the configuration to the device
    ios_command:
      commands:
        - write memory
      provider:
        username: <USERNAME>
        password: <PASSWORD>
