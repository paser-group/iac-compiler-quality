
---
- name: Ansible Tower Authentication
  hosts: localhost
  gather_facts: no

  tasks:
  - name: Check if Ansible Tower is running
    uri:
      url: https://<ansible_tower_ip>/api/v2/ping/
      method: GET
      return_content: yes
      validate_certs: no
    register: tower_ping

  - name: Authenticate to Ansible Tower
    uri:
      url: https://<ansible_tower_ip>/api/v2/authtoken/
      method: POST
      body_format: form-urlencoded
      body:
        username: "{{ tower_username }}"
        password: "{{ tower_password }}"
      headers:
        Content-Type: "application/x-www-form-urlencoded"
      validate_certs: no
    register: tower_login

  - name: Display authentication response
    debug:
      var: tower_login.content
