
---
- name: Ensure default_tablespace is not converted to uppercase
  hosts: all
  become: true
  
  tasks:
    - name: Modify postgresql.conf
      lineinfile:
        path: /etc/postgresql/12/main/postgresql.conf
        regexp: '^default_tablespace'
        line: 'default_tablespace = my_tablespace' # Replace my_tablespace with the name of your desired tablesapce
        state: present
      notify:
        - restart postgresql

  handlers:
    - name: restart postgresql
      service:
        name: postgresql
        state: restarted
