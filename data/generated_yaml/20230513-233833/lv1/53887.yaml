
- name: Manage VLANs on Cisco NXOS switches
  hosts: network_switches
  gather_facts: false

  vars:
    vlan_id: 10
    vlan_name: "vlan10"
    vlan_state: present
    vlan_mode: fabricpath

  tasks:
  - name: Create VLAN
    nxos_vlan:
      vlan_id: "{{ vlan_id }}"
      vlan_name: "{{ vlan_name }}"
      state: "{{ vlan_state }}"
      mode: "{{ vlan_mode }}"
