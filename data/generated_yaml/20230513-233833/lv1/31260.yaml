
---
- name: Configure Ansible fact caching for Inventory
  hosts: all
  become: true
  tasks:
    - name: Set fact cache type to jsonfile
      lineinfile:
        dest: /etc/ansible/ansible.cfg
        regexp: '^#?fact_caching\s*='
        line: 'fact_caching = jsonfile'
    - name: Set fact cache path
      lineinfile:
        dest: /etc/ansible/ansible.cfg
        regexp: '^#?fact_caching_connection\s*='
        line: 'fact_caching_connection = /tmp/facts'
