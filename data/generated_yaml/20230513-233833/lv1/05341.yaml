
---
- name: Customize Ansible-galaxy Role Path
  hosts: localhost
  gather_facts: false

  tasks:
  - name: Check if ansible.cfg exists
    stat:
      path: ansible.cfg
    register: ansible_cfg

  - name: Set default role path if ansible.cfg exists
    set_fact:
      galaxy_role_path: "{{ ansible_cfg.stat.path }}/roles"
    when: ansible_cfg.stat.exists

  - name: Install Sample Role
    community.general.collection:
      name: community.general
      version: latest
      galaxy_roles_path: "{{ galaxy_role_path }}"
    become: true
