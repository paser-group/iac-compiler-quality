yaml
---
- name: Troubleshoot grep highlighting error for shell command
  hosts: all
  become: true

  tasks:
    - name: Run shell command with grep highlighting
      shell: |
        <insert your command here>
        # e.g. echo "this is a test" | grep --color=always test
      register: shell_output

      ignore_errors: yes

    - name: Investigate shell error message
      debug:
        var: shell_output.stderr_lines
      when: shell_output.rc != 0

    - name: Print shell output
      debug:
        var: shell_output.stdout_lines
      when: shell_output.rc == 0
