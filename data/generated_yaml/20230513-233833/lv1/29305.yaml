
- hosts: server
  tasks:
    - name: Install Netscaler module
      pip:
        name: netscaler
        version: "{{ netscaler_version }}"
        state: present

    - name: Run Netscaler playbook
      delegate_to: localhost
      netscaler:
        hostname: "{{ netscaler_host }}"
        username: "{{ netscaler_username }}"
        password: "{{ netscaler_password }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        ssl_cert_validation: "{{ ssl_cert_validation }}"
        operation: "{{ operation }}"
        objecttype: "{{ objecttype }}"
        objectname: "{{ objectname }}"
      register: netscaler_output

    - debug:
        var: netscaler_output

