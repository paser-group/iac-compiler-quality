
- name: Azure RM Security Group Facts Playbook
  hosts: localhost
  connection: local
  gather_facts: False
  vars:
    proxy_host: "your-proxy-hostname"
    proxy_port: "your-proxy-port"

  tasks:
    - name: Gather Azure Security Group Facts
      azure_rm_securitygroup_facts:
        ad_user: "{{ ad_user }}"
        password: "{{ password }}"
        subscription_id: "{{ subscription_id }}"
      register: security_group_facts
      environment:
        http_proxy: "http://{{ proxy_host }}:{{ proxy_port }}"
        https_proxy: "http://{{ proxy_host }}:{{ proxy_port }}"
        no_proxy: "localhost,127.0.0.1,{{ ad_fqdn }}"
      retries: 3
      delay: 10
      until: security_group_facts is succeeded

