
---
- name: Create RoleBinding in OpenShift
  hosts: localhost
  gather_facts: no
  vars:
    service_account_name: "demo-service-account"
    role_name: "demo-role"
    namespace: "demo-namespace"
  tasks:
    - name: Create RoleBinding
      oc:
        state: present
        namespace: "{{ namespace }}"
        kind: RoleBinding
        name: "{{ role_name }}"
        api_version: rbac.authorization.k8s.io/v1
        role_ref:
          name: "{{ role_name }}"
        subjects:
        - kind: ServiceAccount
          name: "{{ service_account_name }}"
