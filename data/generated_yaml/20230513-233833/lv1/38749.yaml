yaml
- name: Example playbook to raise error for include_role and delegate_to
  hosts: all
  gather_facts: True

  tasks:
    - name: Example task with include_role and delegate_to
      include_role:
        name: example_role
      delegate_to: "{{ ansible_play_hosts[0] }}"

      # raise an error if include_role is used with delegate_to
      # otherwise, simply return a success message
      fail:
        msg: "Error: cannot use include_role with delegate_to"
      when: "'delegate_to' in item.ansible_facts"
      register: result
      ignore_errors: true

    - name: Display playbook results
      debug:
        var: result
