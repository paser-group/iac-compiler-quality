
- name: Deprecate DISPLAY_SKIPPED_HOSTS in favor of ANSIBLE_ prefix
  hosts: all
  become: true
  
  tasks:
    - name: Create a backup of the ansible.cfg file
      backup: 
        src: /etc/ansible/ansible.cfg 
        dest: /etc/ansible/ansible.cfg.bak
    - name: Update ansible.cfg file to use ANSIBLE_ prefix
      replace:
        path: /etc/ansible/ansible.cfg
        regexp: 'DISPLAY_SKIPPED_HOSTS'
        replace: 'ANSIBLE_DISPLAY_SKIPPED_HOSTS'
