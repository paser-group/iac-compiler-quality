yaml
- hosts: all
  vars:
    ssh_port: 22
    ssh_user: "{{ ansible_user }}"
    ssh_pass: "yourpassword:withcolons"
  tasks:
    - name: set ssh port
      set_fact:
        ssh_port: "{{ ansible_ssh_port }}"
      when: ansible_ssh_port is defined
    - name: copy file via ssh
      copy:
        src: /path/to/file
        dest: /remote/path
      delegate_to: "{{ ssh_user }}:{{ ssh_pass }}@{{ inventory_hostname }}:{{ ssh_port }}"
