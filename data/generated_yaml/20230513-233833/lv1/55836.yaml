yaml
---
- name: Create Azure RM Web App
  hosts: localhost
  connection: local
  vars:
    resource_group_name: "myResourceGroup"
    web_app_name: "myWebApp"
    app_service_plan_name: "myAppServicePlan"
    app_service_plan_tier: "Free"
    app_service_plan_sku_name: "F1"
    location: "eastus"
  tasks:
  - name: Create Resource Group
    azure_rm_resourcegroup:
      name: "{{resource_group_name}}"
      location: "{{location}}"
      state: present
  - name: Create App Service Plan
    azure_rm_appserviceplan:
      resource_group: "{{resource_group_name}}"
      name: "{{app_service_plan_name}}"
      location: "{{location}}"
      sku:
        name: "{{app_service_plan_sku_name}}"
        tier: "{{app_service_plan_tier}}"
      state: present
  - name: Create Web App
    azure_rm_webapp:
      resource_group: "{{resource_group_name}}"
      name: "{{web_app_name}}"
      location: "{{location}}"
      app_service_plan: "{{app_service_plan_name}}"
      state: present
