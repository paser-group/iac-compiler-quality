
---
- name: Gather remote facts from EC2 instance
  hosts: localhost
  connection: local
  gather_facts: no

  vars:
    aws_region: us-east-1
    aws_access_key: <AWS_ACCESS_KEY>
    aws_secret_key: <AWS_SECRET_KEY>

  tasks:
    - name: Set AWS credentials
      set_fact:
        access_key: "{{ aws_access_key }}"
        secret_key: "{{ aws_secret_key }}"

    - name: Gather EC2 Instance Facts
      ec2_remote_facts:
        region: "{{ aws_region }}"
        access_key: "{{ access_key }}"
        secret_key: "{{ secret_key }}"
        instance_ids: <ec2-instance-id>
      register: ec2_info

    - name: Debug EC2 Instance Facts
      debug:
        var: ec2_info
