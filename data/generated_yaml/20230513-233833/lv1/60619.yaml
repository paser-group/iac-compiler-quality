
---
- name: Deploy Azure Resource Manager Template
  hosts: localhost
  tasks:
    - name: Validate ARM template
      azure_rm_deployment:
        resource_group_name: "{{ resource_group }}"
        template: "{{ template_file }}"
        parameters: "{{ parameters_file }}"
        operation: validate
      register: deployment_output

    - name: Deploy ARM template
      azure_rm_deployment:
        resource_group_name: "{{ resource_group }}"
        template: "{{ template_file }}"
        parameters: "{{ parameters_file }}"
        operation: create_or_update
      register: deployment_output

    - name: Display deployment output
      debug:
        var: deployment_output
