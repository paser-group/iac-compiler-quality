yaml
- hosts: all
  become: yes
  
  tasks:
    # create virtual environment
    - name: Ensure python3-venv is installed
      apt: name=python3-venv state=present

    - name: Create virtual environment
      ansible.builtin.command: python3 -m venv /path/to/venv
    
    # activate virtuale environment
    - name: Activate virtual environment
      ansible.builtin.command: source /path/to/venv/bin/activate
    
    # install dependencies on virtual environment
    - name: Install dependencies on virtual environment
      ansible.builtin.command: pip3 install -r /path/to/requirements.txt
    
    # run script on virtual environment
    - name: Run script on virtual environment
      ansible.builtin.command: /path/to/existing/script.py
