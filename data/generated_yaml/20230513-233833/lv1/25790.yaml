
- name: Playbook to fix ec2 module error
  hosts: localhost
  gather_facts: False
  
  vars:
    region: "us-west-2"
    instance_type: "t2.micro"
    ami_id: "ami-0c94855ba95c71c99"

  tasks:
  - name: Launch EC2 instance
    ec2:
      region: "{{ region }}"
      instance_type: "{{ instance_type }}"
      image: "{{ ami_id }}"
      key_name: "my-keypair"
      wait: true
      count: 1
      instance_tags:
        Name: "webserver"
    register: ec2_instance

  - name: Print instance details
    debug:
      var: ec2_instance
