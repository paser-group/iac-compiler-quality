
---
- name: Remove Duplicate Vault-IDs
  hosts: all
  vars:
    vault_id: default
  tasks:
    - name: Check Vault-IDs for Duplicates
      shell: grep -R "{{ vault_id }}" /path/to/vault/folder/
      register: result
      ignore_errors: true

    - name: Remove Duplicates
      shell: sed -i '/^'"{{ vault_id }}"'/d' /path/to/vault/folder/*
      when: result.rc == 0
