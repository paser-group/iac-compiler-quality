yaml
---
- name: File Permission Management
  hosts: all
  become: true

  vars:
    dir_to_change_permission: /path/to/directory
    file_permission: '755'

  tasks:
    - name: Set permission for directory recursively
      file:
        path: "{{ dir_to_change_permission }}"
        state: directory
        mode: "{{ file_permission }}"
        recurse: true

    - name: Verify directory permission recursively
      stat:
        path: "{{ dir_to_change_permission }}"
        recurse: true
      register: file_stat

    - name: Display directory permissions
      debug:
        var: file_stat.stat.mode
