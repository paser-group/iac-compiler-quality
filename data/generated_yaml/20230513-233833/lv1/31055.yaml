
---

- name: Configure EC2 VPC network with Ansible
  hosts: localhost
  connection: local

  tasks:
    - name: Install Boto3 Python module
      pip:
        name: boto3
        state: present

    - name: Configure AWS credentials
      include_vars:
        file: ~/.aws/credentials
        name: aws_creds

    - name: Create VPC network
      ec2_vpc_net:
        name: my-vpc
        cidr_block: 10.0.0.0/16
        region: us-east-1
        aws_access_key: "{{ aws_creds.aws_access_key_id }}"
        aws_secret_key: "{{ aws_creds.aws_secret_access_key }}"
