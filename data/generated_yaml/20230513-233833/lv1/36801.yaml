yaml
---
- name: Configure SVI (Interface VLAN) on NX-OS devices
  hosts: nxos_devices
  gather_facts: no
  vars:
    vlan_id: 10    # Change this to the desired VLAN ID
    vlan_name: test_vlan   # Change this to the desired VLAN name
  tasks:
    - name: Configure VLAN on the switch
      nxos_vlan:
        vlanid: "{{ vlan_id }}"
        vlan_name: "{{ vlan_name }}"
        state: present

    - name: Configure SVI for the VLAN
      nxos_interface:
        interface: "vlan{{ vlan_id }}"
        ipv4:
          address: "{{ hostvars[inventory_hostname]['ansible_bridge_ipv4']['address'] }}"
          netmask: "{{ hostvars[inventory_hostname]['ansible_bridge_ipv4']['netmask'] }}"
          dhcp: false
        state: present
