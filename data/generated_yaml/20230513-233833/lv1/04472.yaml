
---
- name: Set EC2 tags
  hosts: localhost
  vars:
    region: us-east-1
    instance_id: <enter_instance_id_here>
    tag_name: <enter_tag_name_here>
    tag_value: <enter_tag_value_here>
  tasks:
    - name: Get instance facts
      ec2_instance_facts:
        region: "{{ region }}"
        filters:
          instance-id: "{{ instance_id }}"
      register: ec2_info

    - name: Set tags
      ec2_tag:
        region: "{{ region }}"
        resource: "{{ ec2_info.instances[0].id }}"
        state: present
        tags:
          "{{ tag_name }}": "{{ tag_value }}"
