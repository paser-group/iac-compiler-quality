yaml
---
- name: Verify random MAC addresses
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    # Install required python package
    - name: Install netaddr python package
      pip:
        name: netaddr
        state: present

    # Verify random MAC address with prefix length of 2
    - name: Verify random MAC address with prefix length of 2
      assert:
        that:
          - "'00-50' in result.stdout"
      vars:
        mac: "{{ '00:50:' + '%02x:%02x:%02x:%02x' | random_mac }}"
      command: "echo {{ mac }} | tr ':' '-'"

    # Verify random MAC address with prefix length of 4
    - name: Verify random MAC address with prefix length of 4
      assert:
        that:
          - "'00-00-00-50' in result.stdout"
      vars:
        mac: "{{ '00:00:00:50:' + '%02x:%02x' | random_mac }}"
      command: "echo {{ mac }} | tr ':' '-'"
