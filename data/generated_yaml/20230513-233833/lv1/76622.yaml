
---
- hosts: localhost
  gather_facts: false
  
  vars:
    openstack_user: "your_user"
    openstack_password: "your_password"
    openstack_project_name: "your_project"
    openstack_auth_url: "your_auth_url"

  tasks:
    - name: set openstack credentials
      set_fact:
        openstack_creds:
          auth:
            auth_url: "{{ openstack_auth_url }}"
            username: "{{ openstack_user }}"
            password: "{{ openstack_password }}"
            project_name: "{{ openstack_project_name }}"
          interface: public
          validate_certs: False

    - name: create dynamic inventory
      inventory_plugin:
        plugin: openstack
        auth: "{{ openstack_creds }}"
        regions:
          - "{{ openstack_region }}"
      register: openstack_inventory

    - name: output inventory
      debug:
        var: openstack_inventory
