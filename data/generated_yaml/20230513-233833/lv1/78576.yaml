
---
- name: Loop over empty list without throwing error
  hosts: localhost
  vars:
    my_list: []

  tasks:
  - name: Set fact if list is empty
    set_fact:
      my_var: []
    when: not my_list

  - name: Loop over list
    debug:
      msg: "{{ item }}"
    loop: "{{ my_list | default(my_var) }}"
