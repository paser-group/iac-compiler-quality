
- hosts: esxi_host
  vars:
    esxi_username: admin
    esxi_password: mypassword
    management_network: "Management Network"
    interface_name: vmk1
    ip_address: 192.168.1.100
    subnet_mask: 255.255.255.0
  tasks:
  - name: Create VMware vmkernel interface
    vmware_vmkernel:
      hostname: "{{ inventory_hostname }}"
      username: "{{ esxi_username }}"
      password: "{{ esxi_password }}"
      port: 443
      datacenter_name: "Datacenter"
      cluster_name: "Cluster"
      management_network: "{{ management_network }}"
      interface_name: "{{ interface_name }}"
      ip_address: "{{ ip_address }}"
      subnet_mask: "{{ subnet_mask }}"
