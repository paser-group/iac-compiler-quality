
---
- name: Assigning EC2 Groups
  hosts: localhost
  gather_facts: false
 
  vars:
    group1: default
    group2: default
    
  tasks:
    - name: Create EC2 group
      ec2_group:
        name: "{{ group1 }}"
        description: "{{ group1 }} group"
        region: us-west-2
        rules:
          - proto: tcp
            from_port: 22
            to_port: 22
            cidr_ip: 0.0.0.0/0

    - name: Create a second group
      ec2_group:
        name: "{{ group2 }}"
        description: "{{ group2 }} group"
        region: us-west-2
        rules:
          - proto: tcp
            from_port: 80
            to_port: 80
            cidr_ip: 0.0.0.0/0
