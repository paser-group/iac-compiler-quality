
---
- name: Test PLAYBOOK - Deprecate DISPLAY_SKIPPED_HOSTS
  hosts: all
  vars:
    - _vars_tilde: "~"
    - _selected_var: "{{ _vars_tilde }}"
    - _selected_item: "{{ _selected_var.split(\"/\")[0] }}/{{ _vars_tilde.split(\"/\")[1] }}"
    - _legacy_ansible_folder: "{{ '/etc/ansible' }}"
    - _new_ansible_folder: "{{ '/opt/ansible' }}"
  environment:
    ANSIBLE_DEPRECATION_WARNINGS: "False"
    ANSIBLE_{{ _selected_item }}_DISPLAY_SKIPPED_HOSTS: "{{ _selected_var }}"
  tasks:
    - name: Debug message 1
      debug:
        msg: "{{ 'Ansible legacy folder: ' + _legacy_ansible_folder}}"
    - name: Debug message 2
      debug:
        msg: "{{ _selected_item }}"
    - name: Creating the new Ansible folder
      file:
        name: "{{ _new_ansible_folder }}"
        state: directory
      when: "'/opt' in _new_ansible_folder"
    - name: Debug message 3
      debug:
        msg: "{{ 'Ansible folder: ' + _new_ansible_folder }}"
