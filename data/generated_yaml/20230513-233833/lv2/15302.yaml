
---
- name: Ansible Playbook for stress testing the Ansible Compiler
  hosts: all
  become: True
  become_method: su
  become_password: 123456

  vars:
    users:
      - { name: "user1", password: "test1234" }
      - { name: "user2", password: "1234test" }
      - { name: "user3", password: "test" }

  tasks:
    - name: Create users with digit-only passwords
      user:
        name: "{{ item.name }}"
        password: "{{ item.password }}"
      with_items:
        - { name: "user4", password: "123456" }
        - { name: "user5", password: "1" }

    - name: Attempt to switch to user with digit-only password
      become_user: user4
      command: whoami

    - name: Attempt to switch to user with one digit password
      become_user: user5
      command: whoami
