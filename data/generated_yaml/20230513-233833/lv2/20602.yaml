
---
- name: Test playbook for stdout_callback issue
  hosts: all
  gather_facts: false

  tasks:
    - name: Print message with newline characters and debug callback
      command: echo 'Hello\nworld'
      register: output
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug

    - name: Print message with special characters and debug callback
      command: echo '$$$Test###'
      register: output_special_chars
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug

    - name: Print message with multiple newlines and debug callback
      command: echo -e 'This\nis\na\ntest'
      register: output_newlines
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug

    - name: Print message with null byte character and debug callback
      command: echo -ne 'Hello\0world'
      register: output_null_byte
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug

    - name: Print message with backspace character and debug callback
      command: echo -e 'Hello\bworl\bd'
      register: output_backspace
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug

    - name: Print message with carriage return and debug callback
      command: -e 'Hello\rworld'
      register: output_carriage_return
      environment:
        ANSIBLE_STDOUT_CALLBACK: debug
