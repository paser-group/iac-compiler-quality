
- name: Test Python3 YAML Inventory Parsing Errors
  hosts: node1
  gather_facts: no
  
  vars:
    invalid_inventory: |
      # This is an invalid YAML inventory file
      - host1
        ansible_user: admin
        ansible_password: password
      - host2
        ansible_user: admin
        ansible_password: password

  tasks:
    - name: Test Invalid Inventory File
      expect:
        command: ansible-inventory -i '{{ invalid_inventory }}'
        responses:
          (?i)invalid.*inventory:
            rc: 1
