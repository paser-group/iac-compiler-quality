
---
- name: Test delegate_to in module
  hosts: all
  become: yes
  vars:
    delegate_to_var: "node1"
  tasks:
    - name: Check for valid delegate_to
      command: echo "Hello World"
      delegate_to: "{{ delegate_to_var }}"
    - name: Check for invalid delegate_to
      command: echo "Hello World"
      delegate_to: "{{ delegate_not_existing }}"
    - name: Check for invalid delegate_to which is an empty string
      command: echo "Hello World"
      delegate_to: ""
    - name: Check for multiple delegate_tos
      command: echo "Hello World"
      delegate_to: "{{ delegate_to_var }} {{ delegate_to_var }} {{ delegate_to_var }}"
    - name: Check for nested delegate_to
      delegate_to: "{{ delegate_to_var }}"
      command: echo "Hello World"
      delegate_to: "{{ delegate_to_var }}"
    - name: Check for delegate_to with array
      command: echo "Hello World"
      delegate_to: 
        - "{{ delegate_to_var }}"
    - name: Check for delegate_to with string and array
      command: echo "Hello World"
      delegate_to: 
        - "{{ delegate_to_var }}"
        - node2
    - name: Check for delegate_to syntax not using colons
      command: echo "Hello World"
      delegate_to "{{ delegate_to_var }}"
    - name: Check for delegate_to syntax using single quotes
      command: echo "Hello World"
      delegate_to: '{{ delegate_to_var }}'
