
- name: Load Docker image using python 3
  hosts: all
  gather_facts: no

  tasks:
    - name: Install python 3
      apt:
        name: python3
        state: present

    - name: Load Docker image
      docker_image:
        name: "{{ not_a_docker_image }}"
        state: present
      ignore_errors: yes

    - name: Ensure Docker image is present
      shell: 'docker inspect {{ not_a_docker_image }}'
      changed_when: False
      ignore_errors: yes

    - name: Load Docker image using binary open
      docker_image:
        name: "{{ binary_open(loading_image_path) }}"
        state: present
      ignore_errors: yes

    - name: Encode Docker image using UTF-8
      docker_image:
        name: "{{ loading_image_path | string | to_json | b64encode('UTF-8') }}"
        state: present
      ignore_errors: yes

    - name: Attempt to load incorrect image
      docker_image:
        name: "{{ incorrect_image }}"
        state: present
      ignore_errors: yes
