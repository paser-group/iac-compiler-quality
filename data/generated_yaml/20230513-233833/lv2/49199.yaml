
---
- name: Ansible Playbook to test docker_swarm_service 
  hosts: all
  gather_facts: false
  tasks:
    - name: Create Docker Service with root user
      docker_swarm_service:
        name: test_service
        image: nginx
        state: started
        user: root

    - name: Create Docker Service with invalid user
      docker_swarm_service:
        name: test_service2
        image: nginx
        state: absent
        user: invalid_user_name*@#

    - name: Create Docker Service with unconventional syntax
      docker_swarm_service:
        name: test_service3
        image: nginx
        state: present
        user: $%&()

    - name: Create Docker Service with unexpected input
      docker_swarm_service:
        name: test_service{{ 1+1 }}
        image: nginx
        state: started
        user: "{{ ['root', 'invalid_user', '$%&()', 'user with spaces'] | random }}"

    - name: Remove Docker Service
      docker_swarm_service:
        name: test_service
        state: absent
