yaml
- hosts: all
  gather_facts: true
  tasks:
  - name: Get VMware VM facts
    vmware_vm_facts:
      hostname: "{{ item }}"
      username: "{{ ansible_user }}"
      password: "{{ ansible_password }}"
      folder: "{{ weird['folder'] }}"
      datacenter: "{{ datacenter | upper }}"
      vm_type: "{{ item }}"
      validate_certs: "{{ weird['validate_certs'] | bool }}"
      template: "{{ invalid['template'] }}"
    register: vm_facts
    loop:
      - "{{ node1_ip }}"
      - "{{ node2_ip }}"
      - "{{ node3_ip }}"
    no_log: "{{ weird['no_log'] | bool }}"
  
  - name: Print VMware VM facts
    debug:
      var: vm_facts
