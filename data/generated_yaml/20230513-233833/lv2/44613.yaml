
---
- hosts: all
  become: true
  tasks:
    - name: Install required packages
      apt:
        name:
          - python3
          - python3-pip
        update_cache: yes

    - name: Install boto3 module
      pip:
        name: boto3
        executable: python3

    - name: Connect to Route53 using Unicöde characters
      route53:
        command: list
        zone: "{{ lookup('env','ZONE_NAME') }}"
        access_key: "{{ lookup('env',u'ACCESS_KËY') }}"
        secret_key: "{{ lookup('env',u'SECRET_KËY') }}"
        region: us-east-1
        check_invalid_cert: "no"
        validate_certs: "no"

    - name: Connect to Route53 with an invalid access key
      route53:
        command: list
        zone: "{{ lookup('env','ZONE_NAME') }}"
        access_key: "invalid-access-key"
        secret_key: "{{ lookup('env',u'SECRET_KËY') }}"
        region: us-east-1

    - name: Connect to Route53 with an invalid secret key
      route53:
        command: list
        zone: "{{ lookup('env','ZONE_NAME') }}"
        access_key: "{{ lookup('env',u'ACCESS_KËY') }}"
        secret_key: "invalid-secret-key"
        region: us-east-1

    - name: Make a call to a non-existent Route53 resource
      route53:
        command: list
        zone: "{{ lookup('env','ZONE_NAME') }}"
        access_key: "{{ lookup('env',u'ACCESS_KËY') }}"
        secret_key: "{{ lookup('env',u'SECRET_KËY') }}"
        region: non-existent-region

    - name: Connect to Route53 zone with invalid DNS name
      route53:
        command: list
        zone: "{{ lookup('env','ZONE_NAME') }}."
        access_key: "{{ lookup('env',u'ACCESS_KËY') }}"
        secret_key: "{{ lookup('env',u'SECRET_KËY') }}"
        region: us-east-1
        check_invalid_cert: "no"
        validate_certs: "no"
