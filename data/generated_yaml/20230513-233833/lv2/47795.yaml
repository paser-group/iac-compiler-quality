
---
- name: Debug dict with date
  hosts: all
  vars:
    my_dict:
      date: "{{ ansible_date_time.date }}"
  tasks:
    - name: Print dict using debug
      debug:
        var: my_dict

    - name: Filter dict through Jinja
      debug:
        msg: "{{ my_dict | to_yaml | from_yaml }}"

    - name: Combine dict with string
      debug:
        msg: "{{ 'The date is ' ~ my_dict.date }}"

    - name: Loop through dict
      debug:
        msg: "{{ item.key }}: {{ item.value }}"
      loop: "{{ my_dict | dict2items }}"
      loop_control:
        label: "{{ item.key }}"

    - name: Use dict in template
      template:
        src: my_template.j2
        dest: /tmp/my_file

- name: Execute some unexpected input
  hosts: all
  tasks:
    - name: Execute arbitrary command
      command: "{{ my_dict.date }}"
