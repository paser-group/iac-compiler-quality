yaml
---
- name: Ensure sudo password is prompted
  hosts: all
  gather_facts: false
  tasks:
    - name: Run command as root
      become: true
      command: whoami

- name: Expect playbook to hang without sudo password
  hosts: all
  gather_facts: false
  tasks:
    - name: Run command as username
      become: false
      command: whoami

- name: Expect playbook to raise error message with sudo password
  hosts: all
  gather_facts: false
  tasks:
    - name: Run command as root
      become: true
      become_method: sudo
      command: whoami
      become_user: root

- name: Expect no error message with wrong password
  hosts: all
  gather_facts: false
  tasks:
    - name: Run command as root with wrong password
      become: true
      become_method: sudo
      command: whoami
      become_user: root
      vars:
        ansible_become_pass: 'wrong_password'

- name: Expect no prompt and no error message with wrong password and flag
  hosts: all
  gather_facts: false
  tasks:
    - name: Run command as root with wrong password and flag
      become: true
      become_method: sudo
      command: whoami
      become_user: root
      vars:
        ansible_become_pass: 'wrong_password'
        ansible_sudo_pass: 'wrong_password'
