
---
- name: String conversion error edge case playbook
  hosts: all
  gather_facts: false
  vars:
    invalid_string: 12345
  tasks:
    # Unconventional syntax
    - copy:
        content: >-
          {% if invalid_string | int %} 
          This will break because invalid_string cannot be converted to an integer. 
          {% endif %}
        dest: /tmp/test.txt

    # Unexpected input
    - template:
        src: templates/{{ invalid_string }}.j2
        dest: /tmp/test.txt

    # Edge cases
    - copy:
        content: |
          {% set str = "This is some text." %} 
          {{ str | map(attribute='nosuchattribute') | list }}
        dest: /tmp/test.txt
      ignore_errors: true
