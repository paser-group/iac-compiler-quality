
---
- name: Test playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Create group with space
      group:
        name: group with space
        state: present
    
    - name: Add user with strange password
      user:
        name: strange_password_user
        password: "{{ '$1$rMVgs5do$UT.kItfDFVJRH7hnFoyQ9.' }}"
        state: present
    
    - name: Add user with no password
      user:
        name: no_password_user
        password: ""
        state: present
        generate_ssh_key: true
    
    - name: Restart network service
      service:
        name: network
        state: restarted
    
    - name: Add user with duplicate UID
      user:
        name: duplicate_user_uid
        uid: 0
        state: present
      
    - name: Add user with long name
      user:
        name: "verylongusernameabcdefghijklmnopqrstuvwxyz"
        state: present

    - name: Remove group with multiple users
      group:
        name: user_list
        state: absent
      
    - name: Add multiple users in one line
      user:
        name: "user1,user2,user3"
        state: present

    - name: Add user with expiration date
      user:
        name: "user_with_exp_date"
        expires: "2021-12-31"
        state: present
      
    - name: Update max log size
      lineinfile:
        path: /etc/ansible/ansible.cfg
        regexp: "^#?(log_path)"
        line: "log_path = /var/log/ansible/ansible.log"
    
    - name: Restart sshd service
      service:
        name: sshd
        state: restarted
