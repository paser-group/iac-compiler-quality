
- name: Test nxos_igmp_interface module
  hosts: node1
  gather_facts: no
  tasks:
    - name: Validate interface name input
      nxos_igmp_interface:
        interface: "{{ item }}"
        join_group: "224.0.0.1"
      with_items:
        - "Ethernet1/1' ; rm -rf /'"

    - name: Validate group input
      nxos_igmp_interface:
        interface: "Ethernet1/1"
        join_group: "{{ item }}"
      with_items:
        - "224.0.0.1', sleep 30, '224.0.0.1"
        - '{"a": "b"}'

    - name: Validate empty interface input
      nxos_igmp_interface:
        interface: ""
        join_group: "224.0.0.1"

    - name: Validate empty join group input
      nxos_igmp_interface:
        interface: "Ethernet1/1"
        join_group: ""

    - name: Validate interface non-existence
      nxos_igmp_interface:
        interface: "Ethernet5/1"
        join_group: "224.0.0.1"
