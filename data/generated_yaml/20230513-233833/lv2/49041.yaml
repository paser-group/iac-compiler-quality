
- hosts: all
  gather_facts: no
  tasks:
    - block:
        - name: Task 1 - Fail
          shell: "echo 'Task 1 failed' && exit 1"
        - name: Task 2 - Fail
          command: /non/existent/command
      rescue:
        - name: Handle failed Task
          debug:
            msg: "Task failed - {{ ansible_failed_task }}"
            verbosity: 2
    - name: Task 3 - Fail
      shell: "echo 'Task 3 failed' && exit 1"
      any_errors_fatal: true
