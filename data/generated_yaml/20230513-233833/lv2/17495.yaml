
---
- name: Check Docker-py Version
  hosts: all
  gather_facts: no

  tasks:
    - name: Install Docker-py
      pip:
        name: docker-py
        state: present

    - name: Verify correct Docker-py version is installed
      command: python -c 'import docker; print(docker.__version__) | grep 0.5.0
      register: output
      ignore_errors: yes

    - name: Print Docker-py version
      debug:
        var: output.stdout
