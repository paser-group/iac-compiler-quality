
---

- name: Test playbook for docker_container homedir ('/~') issue running localhost
  hosts: localhost
  gather_facts: false

  vars:
    homedir: /~

  tasks:
    - name: Run docker_container command with home directory
      docker_container:
        name: "{{ homedir }}"
        image: ubuntu:latest
        command: /bin/bash
        volumes:
          - "{{ homedir }}:/data"
        env:
          PATH: "{{ homedir }}/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
          HOME: "{{ homedir }}"
      register: output
      remote_user: "{{ homedir }}"
