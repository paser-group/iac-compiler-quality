
---
- name: Test Playbook for GitHub Issue #1
  hosts: all
  gather_facts: no
  tasks:
    - name: Ensure 'msrest' Python module is installed
      pip:
        name: msrest
        state: present

    - name: Introducing unconventional syntax
      command: |
        echo "Hello World!" &&
        if [ $(($RANDOM % 2)) -eq 0 ]; then
          echo "This shouldn't be printed"
        fi &&
        echo "Goodbye World!"

    - name: Testing unexpected inputs
      shell: |
        if [ $1 == 'foo' ]; then
          echo "You entered foo!"
        elif [ $1 == 'bar' ]; then
          echo "You entered bar!"
        else
          echo "You entered something else"
        fi
      args:
        executable: /bin/bash
        argv:
          - "{{ lookup('env', 'INPUT') | default('') }}"

    - name: Generating edge cases
      apt:
        name: "{{ item }}"
        state: "{{ ['latest', 'absent'] | random }}"
      loop:
        - apache2
        - curl
        - emacs
        - git
        - nodejs
        - nginx
        - postgresql
