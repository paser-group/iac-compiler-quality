
- name: CloudFront Origin Access Identity error test playbook
  hosts: all
  gather_facts: true

  tasks:
    - name: Test creating a new CloudFront Origin Access Identity
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating new Origin Access Identity"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        distribution_id: "E3EYPCF4XUD0PB"
        caller_reference: "myidentity"
        state: present

    - name: Test deleting a CloudFront Origin Access Identity
      cloudfront_origin_access_identity:
        state: absent
        comment: "Deleting Origin Access Identity with Empty List"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        identity_id: []
    
    - name: Test creating with empty CloudFrontOriginAccessIdentityList
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating new Origin Access Identity with Empty List "
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        identity_id: []

    - name: Test creating duplicate Identity with same CallerReference
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating duplicate Identity with same CallerReference"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        distribution_id: "E3EYPCF4XUD0PB"
        caller_reference: "myidentity"
        state: present

    - name: Test creating Identity without Distribution ID
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating Identity without Distribution ID"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        caller_reference: "myidentity"
        state: present

    - name: Test creating Identity with invalid Distribution ID
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating Identity with invalid Distribution ID"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        distribution_id: "invalid"
        caller_reference: "myidentity"
        state: present

    - name: Test creating Identity without Caller Reference
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating new Origin Access Identity without Caller Reference"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        distribution_id: "E3EYPCF4XUD0PB"
        state: present

    - name: Test creating Identity with numeric Caller Reference
      cloudfront_origin_access_identity:
        state: present
        comment: "Creating Identity with numeric Caller Reference"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_key: "{{ aws_secret_key }}"
        distribution_id: "E3EYPCF4XUD0PB"
        caller_reference: 1234
        state: present
