
---
- hosts: all
  become: true
  vars:
    ansible_service_mgr: "{{ ['sysvinit', 'systemd', 'upstart'][random(3)] }}"
    invalid_fact: "{'a': 1, 'b': 2,}"
    dangerous_input: "' || rm -rf / #"
    complex_fact: "{{ {'foo': 'bar', 'baz': [1, 2, 3], 'qux': {'a': {'b': 'c'}}} }}"
  tasks:
    - name: Check service manager fact
      debug:
        msg: "ansible_service_mgr is {{ ansible_service_mgr }}"
    - name: Access invalid fact
      debug:
        var: invalid_fact
    - name: Echo dangerous input
      shell: "echo {{ dangerous_input }}"
    - name: Print complex fact
      debug:
        var: complex_fact.baz[1]
