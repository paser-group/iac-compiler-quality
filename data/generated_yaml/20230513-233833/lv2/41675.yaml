
- name: Test Jinja2 Scoped Blocks
  hosts: all
  vars:
    message: "hello"
  roles:
    - role: test-role
      vars:
        message: "{{ message }} world"
  tasks:
    - name: Ensure message is set
      assert:
        that:
          - message is defined
        fail_msg: "message variable not set"
        success_msg: "message variable successfully set"
    - name: Print message
      debug:
        var: message
