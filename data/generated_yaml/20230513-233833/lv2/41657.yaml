
---
- name: Sample Playbook for ios_l2_interface bug
  hosts: ios_devices
  gather_facts: no
  
  vars:
    nonetype_var: None
    string_var: "abc"
    number_var: 123
    bool_var: true
    list_var: [1, 2, 3]
    dict_var: {'a': 1, 'b': 2, 'c': 3}
    
  tasks:
    - name: Check interface status with None value
      ios_command:
        commands:
          - "show interfaces {{ nonetype_var }}"
      register: cmd_output_with_none
      ignore_errors: yes
      
    - name: Check interface status with string value
      ios_command:
        commands:
          - "show interfaces {{ string_var }}"
      register: cmd_output_with_string
      
    - name: Check interface status with invalid value type
      ios_l2_interface:
        name: "{{ number_var }}"
        state: "up"
      register: l2_int_with_invalid_type
      ignore_errors: yes
      
    - name: Check interface status with boolean value type
      ios_l2_interface:
        name: "{{ bool_var }}"
        trunk: "{{ bool_var }}"
        port_mode: "{{ bool_var }}"
      register: l2_int_with_bool_type
      ignore_errors: yes
      
    - name: Check interface status with list value type
      ios_l2_interface:
        name: "{{ list_var }}"
        state: "{{ list_var }}"
        trunk_vlans: "{{ list_var }}"
        access_vlan: "{{ list_var }}"
      register: l2_int_with_list_type
      ignore_errors: yes
      
    - name: Check interface status with dictionary value type
      ios_l2_interface:
        name: "{{ dict_var }}"
        state: "{{ dict_var }}"
        port_mode: "{{ dict_var }}"
        description: "{{ dict_var }}"
      register: l2_int_with_dict_type
      ignore_errors: yes
      
    - debug: var=cmd_output_with_none
    - debug: var=cmd_output_with_string
    - debug: var=l2_int_with_invalid_type
    - debug: var=l2_int_with_bool_type
    - debug: var=l2_int_with_list_type
    - debug: var=l2_int_with_dict_type
