
- name: Test playbook for parent role's params in child roles
  hosts: all
  gather_facts: false
  tasks:
    - name: Set vars
      vars:
        parent_var: "parent_value"
        child_var: "{{ parent_var | upper }}_{{ not_existing_var }}"
      debug:
        var: child_var

    - name: Include parent role
      include_role:
        name: test_parent_role
      vars:
        parent_var: "{{ not_existing_var }}"
