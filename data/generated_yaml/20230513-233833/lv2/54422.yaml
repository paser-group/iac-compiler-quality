yaml
- name: Test gcp_iam_service_account_module error
  hosts: all
  gather_facts: no
  tasks:
  - name: Create IAM service account with existing name
    gcp_iam_service_account:
      name: "existing-name"
      service_account_state: present
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    register: existing_account_result
    ignore_errors: yes

  - name: Create IAM service account with illegal characters
    gcp_iam_service_account:
      name: "illegal?name"
      service_account_state: present
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    ignore_errors: yes

  - name: Create IAM service account with long name
    gcp_iam_service_account:
      name: "{{ 'a' * 101 }}"
      service_account_state: present
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    ignore_errors: yes

  - name: Create IAM service account with missing required parameter
    gcp_iam_service_account:
      service_account_state: present
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    ignore_errors: yes

  - name: Delete IAM service account with non-existing name
    gcp_iam_service_account:
      name: "non-existing-name"
      service_account_state: absent
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    ignore_errors: yes

  - name: Delete IAM service account with missing required parameter
    gcp_iam_service_account:
      service_account_state: absent
      auth_kind: serviceaccount
      project: "example-project"
      credentials_file: "service_account.json"
    ignore_errors: yes
