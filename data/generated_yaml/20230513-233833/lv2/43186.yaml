yaml
---
- name: Test azure_rm_virtualmachine for vm_size error
  hosts: node1
  gather_facts: no
  tasks:
    - name: Create virtual machine
      azure_rm_virtualmachine:
        resource_group: "{{ ['rg1','rg2'] | random }}"
        name: "{{ 'vm-' ~ range(100, 200) | random }}"
        vm_size: "{{ 'invalid-size' }}"
        publisher: "{{ ['Canonical', 'RedHat', 'Microsoft'] | random }}"
        offer: "{{ 'UbuntuServer','RHEL', 'WindowsServer' | random }}"
        sku: "{{ ['18.04-LTS', '8.4', '2019-Datacenter'] | random }}"
        os_disk:
          caching: "{{ ['None', 'ReadOnly', 'ReadWrite'] | random }}"
          create_option: "{{ ['FromImage', 'Empty'] | random }}"
          name: "{{ 'osdisk-' ~ range(200, 300) | random }}"
          vhd:
            uri: "/invalid/path/{{['ubuntu1804.vhd', 'rhel8.vhd', 'win2019.vhd'] | random }}"
            storage_account: "{{ ['storage1', 'storage2'] | random }}"
        image:
          publisher: "{{ ['Canonical', 'RedHat', 'Microsoft'] | random }}"
          offer: "{{ 'UbuntuServer', 'RHEL', 'WindowsServer' | random }}"
        network_interfaces:
          - name: "{{ 'nic-' ~ range(300, 400) | random }}"
            properties:
              primary: "{{ [true, false] | random }}"
              ip_configurations:
                - name: "{{ 'ipconfig-' ~ range(400, 500) | random }}"
                  properties:
                    private_ip_address_allocation: "{{ ['Static', 'Dynamic'] | random }}"
                    private_ip_address: "{{ '10.1.' ~ range(10, 50) | random }}.{{ range(1, 255) | random }}"
                    subnet_name: "{{ 'subnet-' ~ range(500, 600) | random }}"
                    public_ip_address_id: "/subscriptions/<subscription-id>/resourceGroups/<rg-name>/providers/Microsoft.Network/publicIPAddresses/<ip-name>"
...        
