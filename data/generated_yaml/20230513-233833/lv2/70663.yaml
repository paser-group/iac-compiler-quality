yaml
---
- name: Test playbook for any_errors_fatal
  hosts: all
  gather_facts: no
  vars:
    any_errors_fatal: "True if you want any fatal task to stop everything, immediately"
  tasks:
    - name: Testing any_errors_fatal dynamic configuration
      shell: echo "any_errors_fatal={{ any_errors_fatal }}"
      any_errors_fatal: "{{ any_errors_fatal }}"
      register: result
      ignore_errors: true

    - name: Fail task 1
      command: /bin/false
      any_errors_fatal: "{{ any_errors_fatal }}"
      
    - name: Fail task 2
      command: /bin/false
      any_errors_fatal: "{{ any_errors_fatal }}"
      
    - name: Success task
      command: /bin/true
      
    - name: Debug task
      debug:
        var: result.stdout_lines
