
---
- name: Fuzzing playbook to test Ansible compiler
  hosts: all
  gather_facts: false

  vars:
    # Unconventional syntax examples
    unconventional_vars: >-
      var_with_quote: "'quote'"
      var_with_newline: "new\nline"
      var_with_list: !<tag> [item1, item2, item3]

    # Unexpected input examples
    unexpected_vars: >-
      var_with_backslash: "backslash \\"
      var_with_octal: "\301"
      var_with_unicode_escape: "\\u03A9"
      var_with_binary: "0b0010"
      var_with_hex: "0xa"

  tasks:
    # Variety of edge cases
    - name: Failed galaxy install with a bug
      shell: ansible-galaxy install
      register: result
      ignore_errors: true

    - name: Print result
      debug:
        var: result

    # Unconventional syntax
    - name: Print unconventional vars
      debug:
        var: "{{ unconventional_vars }}"

    # Unexpected input
    - name: Print unexpected vars
      debug:
        var: "{{ unexpected_vars }}"  
