
---
- name: EC2_Transit_Gateway issues with specific regions
  hosts: node1
  gather_facts: false

  vars:
    regions:
      - us-west-1
      - us-east-1
      - eu-west-1
      - ap-southeast-2

  tasks:
    - name: Create Transit Gateway
      ec2_transit_gateway:
        region: "{{ item }}"
        state: present
      with_items: "{{ regions }}"

    - name: Disable Transit Gateway
      ec2_transit_gateway:
        region: "{{ item }}"
        state: disabled
      with_items: "{{ regions }}"

    - name: Enable Transit Gateway
      ec2_transit_gateway:
        region: "{{ item }}"
        state: enabled
      with_items: "{{ regions }}"

    - name: Delete Transit Gateway
      ec2_transit_gateway:
        region: "{{ item }}"
        state: absent
      with_items: "{{ regions }}"

    - name: Create Transit Gateway with invalid region
      ec2_transit_gateway:
        region: invalid-region-{{ item }}
        state: present
      with_items: "{{ regions }}"

    - name: Create Transit Gateway with invalid state
      ec2_transit_gateway:
        region: "{{ item }}"
        state: invalid-state
      with_items: "{{ regions }}"

    - name: Create Transit Gateway with invalid parameter
      ec2_transit_gateway:
        region: "{{ item }}"
        state: present
        invalid_parameter: invalid_value
      with_items: "{{ regions }}"
