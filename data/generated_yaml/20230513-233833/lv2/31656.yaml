
- name: Inventory Parsing Issue Stress Test
  hosts: node1
  gather_facts: no
  tasks:
    - name: Using a variable inside inventory
      debug:
        msg: "{{ my_var }}"
      vars:
        my_var: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3'] }}"
        ansible_host: "{{ my_var.pop(0) }}"
    - name: Using an invalid inventory path
      command: ansible-playbook -i /invalid/inventory/path playbook.yml
      ignore_errors: yes
    - name: Using a non-existent group in the inventory
      debug:
        var: groups['invalid_group_name']
    - name: Using invalid syntax in the inventory
      include_vars:
        file: "{{ inventory_dir }}/invalid_syntax_inventory.ini"
    - name: Using unquoted variables in the inventory
      include_vars:
        file: "{{ inventory_dir }}/invalid_unquoted_vars_inventory.ini"
  vars:
    inventory_dir: "/etc/ansible"
  