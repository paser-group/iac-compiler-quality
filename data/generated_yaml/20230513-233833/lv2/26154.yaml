
---
- name: Test playbook for network_group_modules
  hosts: all
  gather_facts: no
  vars:
    subnet: 10.1.1.0/24
    gateway: 10.1.1.254
    invalid_variable: 'This should not be valid'
  tasks:
  - name: Configure network group module incorrectly
    network_group:
      name: network_group_1
      config: "{{ invalid_variable }}"
      state: present

  - name: Configure network group module with correct subnet and gateway
    network_group:
      name: network_group_2
      config: "{{ subnet }},{{ gateway }}"
      state: present

  - name: Remove network group module with invalid syntax
    network_group:
      name: network_group_1
      state: absent

  - name: Remove network group module with correct configuration
    network_group:
      name: network_group_2
      state: absent
