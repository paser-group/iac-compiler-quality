
---
- name: Stress test nxos_snmp_community module
  hosts: all
  gather_facts: no
  vars:
    community_list:
      - public
      - private
      - invalid_community_name
      - "community with space"
      - "com'muni'ty"
      - "{{ unknown_variable }}"

  tasks:
  - name: Test nxos_snmp_community module with various inputs
    nxos_snmp_community:
      name: "{{ item }}"
      state: "{{ ['present', 'absent', 'test_invalid_state'][item|length % 3] }}"
      transport: "{{ ['cli', 'nxapi', 'telnet'][item|length % 3] }}"
      provider:
        username: "{{ ['username', 'invalid_username', 'user%name'][item|length % 3] }}"
        password: "{{ ['password', 'invalid_password', 'pass%word'][item|length % 3] }}"
        authorize: "{{ ['yes', 'no', 'invalid'][item|length % 3] }}"
        auth_pass: "{{ ['auth_pass', 'invalid_auth_pass', 'auth%pass'][item|length % 3] }}"
        host: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3', 'invalid_host', '10.1.1.256'][item|length % 5] }}"
        port: "{{ ['22', '23', 'invalid'][item|length % 3] }}"
    with_items: "{{ community_list }}"
