
- name: Inventory reliability stress test playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Use dynamic inventory with missing plugin
      inventory_plugin: missing_plugin
      register: missing_plugin_inventory
      ignore_errors: true
    
    - name: Use dynamic inventory with malformed input
      inventory_plugin: malformed_input_plugin
      register: malformed_input_inventory
      ignore_errors: true

    - name: Use static inventory file with missing file path
      include_vars: "{{ missing_file_path | default('/path/to/missing/file') }}"
      ignore_errors: true

    - name: Use YAML inventory file with missing file path
      include_vars: "{{ missing_yaml_file_path | default('/path/to/missing/yaml/file') }}"
      ignore_errors: true
      
    - name: Use JSON inventory file with invalid JSON
      include_vars:
        file: "{{ playbooks_dir }}/inventory_files/invalid.json"
        format: json
      ignore_errors: true

    - name: Use valid JSON inventory file with missing required field
      include_vars:
        file: "{{ playbooks_dir }}/inventory_files/missing_required_field.json"
        format: json
      ignore_errors: true

    - name: Use valid JSON inventory file with extra fields
      include_vars:
        file: "{{ playbooks_dir }}/inventory_files/extra_fields.json"
        format: json
      ignore_errors: true

    - name: Use valid JSON inventory file with unparseable data
      include_vars:
        file: "{{ playbooks_dir }}/inventory_files/unparseable.json"
        format: json
      ignore_errors: true

