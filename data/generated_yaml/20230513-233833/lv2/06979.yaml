yaml
- name: Test playbook for precedence issue in arrays and group_vars/all
  hosts: all
  gather_facts: false
  
  vars:
    my_arr:
      - var1
      - "{{ my_var }}"
    my_var: "hello"
    
  tasks:
    - name: Print the array
      debug:
        var: my_arr

    - name: Update the variable in group_vars/all
      lineinfile:
        path: /etc/ansible/group_vars/all
        regexp: '(^my_var:).*$'
        line: 'my_var: world'

    - name: Print the array again
      debug:
        var: my_arr
