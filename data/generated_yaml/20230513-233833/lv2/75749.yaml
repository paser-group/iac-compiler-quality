
- name: Test playbook for variable parsing issue
  hosts: all
  gather_facts: no
  
  tasks:
    - name: Edge case 1 - Task name starts with curly brace
      {{{ variable }}:
        register: result_edge_case_1

    - name: Edge case 2 - Task name starts with brace followed by variable
      {{ '{' + variable }}:
        register: result_edge_case_2

    - name: Edge case 3 - Task name containing variable within curly braces
      This task contains {{ variable }} in name:
        debug:
          msg: This is edge case 3

    - name: Edge case 4 - Task name containing variable within jinja tags
      This task contains {{ '{{' + variable + '}}' }} in name:
        debug:
          msg: This is edge case 4

    - name: Unconventional syntax 1 - Task name contains unbalanced opening brace
      {{ '{' + variable }}:
        register: result_unconventional_syntax_1

    - name: Unconventional syntax 2 - Task name contains unbalanced closing brace
      {{ variable + '}' }}:
        register: result_unconventional_syntax_2

    - name: Unexpected input 1 - Task name starts with number
      1{{ variable }}:
        debug:
          msg: This is unexpected input 1

    - name: Unexpected input 2 - Task name starts with special character
      ${{ variable }}:
        debug:
          msg: This is unexpected input 2
