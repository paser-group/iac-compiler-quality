
- name: Test get_file_parser function
  hosts: all
  tasks:
    - name: Verify get_file_parser raised an error with unexpected input
      command: "{{ get_file_parser('file', '1', {'unexpected_input': 'True'}) }}"
      register: result
      ignore_errors: yes

    - name: Verify get_file_parser raised an error with incorrect number of arguments
      command: "{{ get_file_parser('file', '1', '2') }}"
      register: result
      ignore_errors: yes

    - name: Verify get_file_parser returns the expected output with a valid input
      command: "{{ get_file_parser('file', '1') }}"
      register: result
      ignore_errors: yes

    - name: Verify get_file_parser can parse a non-existent file
      command: "{{ get_file_parser('non-existent-file', '1') }}"
      register: result
      ignore_errors: yes

    - name: Verify get_file_parser can parse a 0-length file
      command: "{{ get_file_parser('empty-file', '1') }}"
      register: result
      ignore_errors: yes

    - name: Verify get_file_parser can parse very large file
      command: "{{ get_file_parser('large-file', '1') }}"
      register: result
      ignore_errors: yes

    - name: Debug
      debug:
        var: result
