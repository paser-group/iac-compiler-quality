
---
- name: Test eos_facts module for LocalEapi instance attribute error
  hosts: all
  gather_facts: no
  vars:
    eos_facts:
      - memory
      - interfaces
      - routing
  tasks:
    - name: Test basic eos_facts module execution
      eos_facts:
        gather_subset: "{{ eos_facts }}"
      register: out
    - name: Execute eos_facts module with invalid gather_subset input
      eos_facts:
        gather_subset: xyz
      register: out
    - name: Execute eos_facts module with invalid option
      eos_facts:
        invalid_option: abc
      register: out
    - name: Execute eos_facts module with unconventional syntax
      eos_facts: gather_subset="{{eos_facts}}", invalid_option="abc"
      register: out
    - name: Execute eos_facts module with unexpected value
      eos_facts:
        gather_subset: ["memory", "xyz"]
      register: out
    - name: Execute eos_facts module with invalid host filter
      eos_facts:
        gather_subset: "{{ eos_facts }}"
      when: inventory_hostname == 'invalid_host'
      register: out
