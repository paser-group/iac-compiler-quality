
- name: Start Service on Nodes Matching Condition
  hosts: all
  become: true
  vars:
    service_name: "{{ item }}"
  tasks:
    - name: Check if Service is Running
      service:
        name: "{{ service_name }}"
        state: started
        enabled: yes
        when: "'node1' in inventory_hostname and inventory_hostname not in groups['group1'] or 'node2' in inventory_hostname and inventory_hostname not in groups['group2'] or 'node3' in inventory_hostname and inventory_hostname not in groups['group3']"
    - name: Print Node Information
      debug:
        msg: "{{ inventory_hostname }}: {{ service_name }} Service Started"
      with_items:
        - sshd
        - "{{ 's' + 'e' + 'r' + 'v' + 'i' + 'c' + 'e' }}"
        - "{{ '{{ }} ' + 'i' + 't' + 'e' + 'm' + ' {{ }}' }}"
        - "{{ '1' + '0' + '.' + '1' + '.' + '1.1' }}"

