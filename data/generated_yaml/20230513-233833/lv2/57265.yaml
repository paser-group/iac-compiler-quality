
---
- name: Testing gcp_container_cluster module
  hosts: node1
  gather_facts: false
  tasks:
    - name: Create a cluster in an unknown region
      gcp_container_cluster:
        name: mycluster
        zone: "{{ zone }}"
        project_id: myproject
        initial_node_count: 3
        master_auth:
          username: myuser
          password: mypassword
      ignore_errors: true
      register: result
      
    - name: Display the cluster creation status
      debug:
        var: result

    - name: Create a cluster without a project_id
      gcp_container_cluster:
        name: mycluster
        zone: us-central1-a
        initial_node_count: 3
        master_auth:
          username: myuser
          password: mypassword
      ignore_errors: true
      
    - name: Create a cluster with invalid number of nodes
      gcp_container_cluster:
        name: mycluster
        zone: us-central1-a
        project_id: myproject
        initial_node_count: -2
        master_auth:
          username: myuser
          password: mypassword
      ignore_errors: true
      
    - name: Create a cluster with invalid authentication credentials
      gcp_container_cluster:
        name: mycluster
        zone: us-central1-a
        project_id: myproject
        initial_node_count: 3
        master_auth:
          username: myuser
          password: mywrongpassword
      ignore_errors: true
      
    - name: Create a duplicate cluster in the same location
      gcp_container_cluster:
        name: mycluster
        zone: us-central1-a
        project_id: myproject
        initial_node_count: 3
        master_auth:
          username: myuser
          password: mypassword
      ignore_errors: true      
