
---
- hosts: all
  gather_facts: no

  tasks:
    - name: Generate a variety of edge cases for aws_s3_bucket_facts module
      aws_s3_bucket_facts:
        bucket: "{{ item }}"
      with_items:
        - "test_bucket"
        - "{{ lookup('file', '/etc/passwd') }}"
        - "{{ hostvars['localhost']['ansible_eth0']['ipv4']['address'] }}"
        - "{{ playbook_dir }}"
        - "{{ 1/0 }}"
        - "{{ 'test_bucket_' + lookup('password', '/dev/null chars=ascii_letters,digits length=10') }}"
        - "{{ lookup('pipe', 'echo test_bucket') }}" | truncate 4
        - "{{ [1,2,3] | random }}"
