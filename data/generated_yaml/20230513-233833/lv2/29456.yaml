yaml
- hosts: localhost
  connection: local
  gather_facts: no
  tasks:
  - name: create ec2 instance with unintelligent default
    ec2:
      aws_access_key: "{{ aws_access_key }}"
      aws_secret_key: "{{ aws_secret_key }}"
      region: "{{ region }}"
      instance_type: "{{ instance_type }}"
      instance_initiated_shutdown_behavior: "{{ ['stop_after_shutdown', 'terminate_after_shutdown', 'stop', 'terminate', 'unknown'] | random }}"
      image: "{{ image }}"
      count: 1
      security_group: "{{ security_group }}"
      vpc_subnet_id: "{{ vpc_subnet_id }}"
      assign_public_ip: "{{ ['no', 'yes', 'link-local'] | random }}"
      key_name: "{{ key_name }}"
      instance_tags: "{{ instance_tags }}"
