
- hosts: all
  gather_facts: false

  tasks:
    - name: Install default collection explicitly
      ansible.builtin.shell:
        cmd: "ansible-galaxy collection install -p /usr/share/ansible/collections --type=ansible_collections ansible.posix"
        creates: "/usr/share/ansible/collections/ansible_collections/ansible/posix"
      become: true

    - name: Install default collection using unconventional syntax
      ansible.builtin.shell: >
        ansible-galaxy collection install ansible.posix
        -p /usr/share/ansible/collections
        --type=ansible_collections
      become: true

    - name: Install default collection using unexpected input
      ansible.builtin.shell:
        cmd: "ansible-galaxy collection install ansible.posix --force"
      become: true

    - name: Verify that the default collection is installed
      ansible.builtin.stat:
        path: "/usr/share/ansible/collections/ansible_collections/ansible/posix"
      register: default_collection

    - name: Debug info
      ansible.builtin.debug:
        var: default_collection.stat.exists
