
- name: Stress test for vmware_host_facts issue
  hosts: all
  gather_facts: false

  tasks:
  - name: Incorrect indentation
    vmware_host_facts:
    connection: local
      validate_certs: no
    delegate_to: localhost

  - name: Missing Required parameter
    vmware_host_facts:
      hostname: "{{ inventory_hostname }}"
    delegate_to: localhost

  - name: Wrong type for parameters
    vmware_host_facts:
      hostname: 10.1.1.1
      username: []
      password: {}
    delegate_to: localhost

  - name: Unexpected Parameters
    vmware_host_facts:
      foo: bar
      baz: qux
    delegate_to: localhost

  - name: Setting Custom Timeout
    vmware_host_facts:
      hostname: "{{ inventory_hostname }}"
      username: admin
      password: password
      api_timeout: 1
    delegate_to: localhost

  - name: Get Facts for a Non-existent Host
    vmware_host_facts:
      hostname: "wrong_ip_address"
      username: admin
      password: password
    delegate_to: localhost
