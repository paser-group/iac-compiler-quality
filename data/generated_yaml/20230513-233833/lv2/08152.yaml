
- name: Netscaler auth and json decode errors
  hosts: node1
  gather_facts: no
  
  vars:
    username: "{{ 'hello' | b64encode }}"
    password: "{{ 'world' | b64encode }}"
  
  tasks:
    
  # Test invalid credentials
  - name: Test invalid credentials
    netscaler_auth:
      host: "{{ inventory_hostname }}"
      username: "{{ 'invalid' }}"
      password: "{{ 'invalid' }}"
    register: result
    failed_when: False
    ignore_errors: yes
  
  # Test JSON decode error
  - name: Test JSON decode error
    shell: "echo '{\"test\":}' | jq '.'"
    register: result
    failed_when: False
    ignore_errors: yes
  
  # Test invalid input
  - name: Test invalid input
    netscaler_config:
      host: "{{ inventory_hostname }}"
      nsip: "{{ 'invalid' }}"
      nitro_user: "{{ 'invalid' }}"
      nitro_pass: "{{ 'invalid' }}"
      object: "{{ 'invalid' }}"
      attributes: "{{ 'invalid' }}"
    register: result
    failed_when: False
    ignore_errors: yes
  