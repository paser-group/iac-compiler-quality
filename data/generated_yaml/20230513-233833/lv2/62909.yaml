
---
- name: Test ovirt_host_network TypeError bug
  hosts: ovirt_host
  gather_facts: no
  vars:
    network_info:
      - { ip: '10.1.1.1', netmask: '255.255.255.0', name: 'eth0' }
      - { ip: '10.1.1.2', netmask: '255.255.255.0', name: 'eth1' }
  tasks:
    - name: Configure host network
      ovirt_host_network:
        auth: { url: 'https://ovirt.example.com/ovirt-engine/api', username: 'admin', password: 'password' }
        network: "{{ item.ip }}/{{ item.netmask }}"
        interface: "{{ item.name }}"
        state: present
      with_items: "{{ network_info }}"
