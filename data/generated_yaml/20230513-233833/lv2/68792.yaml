
---
- name: Junos fact gathering
  hosts: all
  gather_facts: no

  tasks:
    # Task 1 - Testing the l3_interfaces with junos_facts when the 'network_os' property is not specified
    - name: Test 1 - junos_facts with l3_interfaces
      junos_facts:
        facts:
          - l3_interfaces
      register: result1
      ignore_errors: yes

    # Task 2 - Testing the l3_interfaces with junos_facts for an invalid hostname 
    - name: Test 2 - Invalid Hostname for junos_facts with l3_interfaces
      junos_facts:
        host: invalid-hostname
        facts:
          - l3_interfaces
      ignore_errors: yes

    # Task 3 - Testing the l3_interfaces with junos_facts for an incorrect username and password 
    - name: Test 3 - Incorrect username and password for junos_facts with l3_interfaces
      junos_facts:
        host: "{{ ansible_host }}"
        user: invalid-user
        passwd: invalid-password
        facts:
          - l3_interfaces
      ignore_errors: yes

    # Task 4 - Testing the l3_interfaces with junos_facts for not passing facts parameter
    - name: Test 4 - Omit `facts` parameter for junos_facts with l3_interfaces
      junos_facts:
      register: result4
      ignore_errors: yes

    # Task 5 - Testing the l3_interfaces with junos_facts when `gather_network_resources` is not set to True
    - name: Test 5 - junos_facts with l3_interfaces when gather_network_resources is not set to True
      junos_facts:
        facts:
          - l3_interfaces
        gather_network_resources: no
      register: result5
      ignore_errors: yes

    # Debug messages
    - debug: msg="{{ item }} - {{ item.value }}"
      with_dict: "{{ result1.ansible_facts.l3_interfaces }}"
