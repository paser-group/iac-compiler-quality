
- hosts: all
  gather_facts: false
  tasks:
    - name: Assign group variable
      set_fact:
        my_group: "{{ groups['groupname'] | length }}"
    
    - name: Print group length
      debug:
        msg: "{{ my_group }}"
    
    - name: Assign invalid group variable
      set_fact:
        my_invalid_group: "{{ groups['invalid_groupname'] | length }}"
      ignore_errors: true
    
    - name: Print invalid group length
      debug:
        msg: "{{ my_invalid_group }}"
    
    - name: Assign integer to group variable
      set_fact:
        my_group_int: "{{ groups[1] | length }}"
      ignore_errors: true
    
    - name: Print integer group length
      debug:
        msg: "{{ my_group_int }}"
    
    - name: Assign list to group variable
      set_fact:
        my_group_list: "{{ groups['groupname', 'invalid_groupname'] | length }}"
      ignore_errors: true
    
    - name: Print list group length
      debug:
        msg: "{{ my_group_list }}"
    
    - name: Assign string to group variable
      set_fact:
        my_group_string: "{{ groups['string'] | length }}"
      ignore_errors: true
    
    - name: Print string group length
      debug:
        msg: "{{ my_group_string }}"
