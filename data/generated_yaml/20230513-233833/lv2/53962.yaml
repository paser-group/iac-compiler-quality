
---
- name: Test playbook for unexpected exception
  hosts: all
  gather_facts: false
  tasks:

  - name: Test iteration over an integer
    debug:
      msg: "{{ item }}"
    with_items: 123

  - name: Test adding integer to string
    debug:
      msg: "test" + 123

  - name: Test using a non-existent variable
    debug:
      msg: "{{ non_existent_var }}"

  - name: Test calling a non-existent module
    command: /bin/false
    args:
      _invalid_option: "{{ non_existent_module }}"

  - name: Test using invalid syntax for conditionals
    debug:
      msg: "Hello"
    when: >-
      }{ This is not valid syntax! }{ ansible_play_hosts[0] == inventory_hostname

  - name: Test reading non-existent file
    slurp:
      src: "/path/to/non-existent/file"
    register: slurp_output

  - name: Test using invalid syntax for loop variable
    debug:
      msg: "{{ item.upper() }}"
    with_items:
      - 'one'
      - 'two'
      - 'three'
      - 4

  - name: Test using invalid syntax for logical operator
    debug:
      msg: "{{ 1 == 0 | 1 == 1 }}"

  - name: Test running command with invalid arguments
    command: /bin/true
    args:
      _invalid_option: "flag_value"
