
---
- name: Test apt_repository module
  hosts: node1
  become: yes
  tasks:
    - name: Test with invalid repository string
      apt_repository:
        repo: '{{ "<[email protected]>ubuntu.com:foo/testing" }}'
        state: present

    - name: Test with empty repository string
      apt_repository:
        repo: ''
        state: present

    - name: Test with invalid parameter
      apt_repository:
        repo: 'deb http://archive.ubuntu.com/ubuntu {{ ansible_distribution_release }} main'
        state: present
        foo: bar

    - name: Test with missing mandatory parameters
      apt_repository:
        name: test-repo
        state: present

    - name: Test with special characters
      apt_repository:
        repo: 'http://archive.ubuntu.com/{{ "<>[]{}()&^%$#/\|" }}'
        state: present

    - name: Test with custom key server and key ID
      apt_repository:
        repo: 'deb http://archive.ubuntu.com/ubuntu {{ ansible_distribution_release }} main'
        state: present
        keyserver: '{{ "<[email protected]>ubuntu.com" }}'
        key_id: '{{ "<>[email protected]>ubuntu.com" }}'

  