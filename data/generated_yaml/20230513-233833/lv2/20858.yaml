
- name: Test Become returns timeout with sudo over local connection
  hosts: localhost
  become: true

  tasks:
    - name: Test sudo timeout with host resolution failure
      command: echo "test"
      become: true
      become_user: root
      become_flags: "-n"
      register: result

    - debug:
        var: result

    - name: Test sudo timeout with missing become_path
      command: echo "test"
      become: true
      become_user: root
      become_path: "/nonexistent_path/sudo"
      register: result

    - debug:
        var: result
