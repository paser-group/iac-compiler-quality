
---
- name: Test Ansible 2.2.1 default() filter for hostvars
  hosts: all
  remote_user: ubuntu
  tasks:
    - name: Test edge cases for default() filter
      debug:
        msg: "{{ hostvars[item] | default(omit) }}"
      with_items:
        - node1
        - node2
        - node3
        - non-existent-node
    
    - name: Test unconventional syntax for default() filter
      debug:
        msg: "{{ hostvars[item][invalid-key] | default(omit) }}"
      with_items:
        - node1
        - node2
        - node3
    
    - name: Test unexpected input type for default() filter
      debug:
        msg: "{{ hostvars[item] | default(not-a-valid-input-type) }}"
      with_items:
        - node1
        - node2
        - node3
