
- name: Stress test playbook for ansible_service_mgr
  hosts: all
  become: yes

  tasks:
  - name: Use unconventional syntax for ansible_service_mgr
    service:
      name: service_name
      state: stopped
      daemonize: yes
      service_mgr: mode1

  - name: Use an unexpected value for service_mgr
    service:
      name: service_name
      state: started
      service_mgr: 1,2,3

  - name: Use an undefined variable in service command
    service:
      name: "{{ app_name }}"
      state: restarted
      service_mgr: init

  - name: Use a malformed service command
    command: servicectl -{{ service_mgr }} start

  - name: Use an invalid service name with init system
    systemd:
      name: "invalid_name"
      state: started
      service_mgr: init
      daemonize: yes

  - name: Use a non-existent user in systemd service
    systemd:
      name: "service_name"
      user: "non_existent_user"
      state: started
      service_mgr: init
      daemonize: yes
