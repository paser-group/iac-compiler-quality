
- name: Check CVE-2020-10729 issue status in Ansible branch 2.8
  hosts: all
  vars:
    ansible_python_interpreter: /usr/bin/python
  tasks:
    - name: Ensure vulnerable package is not installed
      apt:
        name: "{{ item }}"
        state: absent
      with_items:
        - vulnerable_package1
        - vulnerable_package2
    - name: Ensure packages are up-to-date
      apt:
        update_cache: yes
    - name: Install Ansible 2.8.0
      apt:
        name: ansible=2.8.0
        state: present
    - name: Verify Ansible version
      command: ansible --version
    - name: Run Ansible test playbook
      command: ansible-playbook -i inventory --private-key /path/key test.yml
