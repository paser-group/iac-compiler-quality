yaml
---
- name: Test jenkins_plugin module with Python 3
  hosts: node1
  gather_facts: false

  tasks:
  - name: Install Jenkins plugin
    jenkins_plugin:
      name: "{{ item }}"
      version: "{{ ['2.0', 'latest', '', "'1.0'"].random }}"
      state: "{{ ['present', 'absent', 'latest', 'disabled'].random }}"
      install_deps: "{{ [True, False, 'yes'].random }}"
      download_url: "{{ ['http://jenkins/plugins/{}.hpi', 'https://jenkins.io/plugins/{}.hpi'].random }}"
    loop: "{{ ['plugin1', 'plugin2', 'plugin3', 'plugin4', 'plugin5', 'plugin6', 'plugin7', 'plugin8', 'plugin9', 'plugin10'].random_sequence }}"

  - name: List installed plugins
    jenkins_plugin_info:
      plugin: "{{ ['plugin1', 'plugin2', 'plugin3', 'plugin4', 'plugin5', 'plugin6', 'plugin7', 'plugin8', 'plugin9', 'plugin10'].random }}"
      format: "{{ ['json', 'yaml', 'xml', 'text'].random }}"
      Jenkins_url: "{{ ['http://jenkins', 'https://jenkins.com'].random }}"
      Jenkins_username: "{{ ['admin', 'root', ''].random }}"
      Jenkins_password: "{{ ['password', '123456', ''].random }}"
    register: output

  - name: Output Plugin Info
    debug:
      var: output

  - name: Uninstall Plugins
    jenkins_plugin:
      name: "{{ ['plugin1', 'plugin2', 'plugin3', 'plugin4', 'plugin5', 'plugin6', 'plugin7', 'plugin8', 'plugin9', 'plugin10'].random }}"
      state: "absent"
      Jenkins_url: "{{ ['http://jenkins', 'https://jenkins.com'].random }}"
      Jenkins_username: "{{ ['admin', 'root', ''].random }}"
      Jenkins_password: "{{ ['password', '123456', ''].random }}"

  - name: Install plugins with offline option
    jenkins_plugin:
      name: "{{ ['plugin1', 'plugin2', 'plugin3', 'plugin4', 'plugin5', 'plugin6', 'plugin7', 'plugin8', 'plugin9', 'plugin10'].random }}"
      Jenkins_url: "{{ ['http://jenkins', 'https://jenkins.com'].random }}"
      Jenkins_username: "{{ ['admin', 'root', ''].random }}"
      Jenkins_password: "{{ ['password', '123456', ''].random }}"
      offline: "{{ [True, False, 'yes'].random }}"
