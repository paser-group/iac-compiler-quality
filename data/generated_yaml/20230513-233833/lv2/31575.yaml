
---
- name: ios_config test playbook
  hosts: all
  gather_facts: no

  tasks:
  # Command that fails with an uncommon message
  - name: Testing failure message
    ios_config:
      lines:
      - "invalid command"
    register: output
    ignore_errors: yes
  - debug:
      var: output

  # Unconventional syntax completion task
  - name: Testing syntax
    ios_config:
      syntax-check: yes
    register: syntax_output
    ignore_errors: yes
  - debug:
      var: syntax_output

  # Unexpected input task with custom timeout
  - name: Testing timeout with unexpected input
    ios_config:
      lines:
      - "end"
      - "###"
    register: timeout_output
    ignore_errors: yes
    vars:
      ansible_command_timeout: 5
  - debug:
      var: timeout_output

  # Unexpected list input task
  - name: Testing list input
    ios_config:
      lines:
        - "hello"
        - "world"
      parents:
        - interface GigabitEthernet0/0
    register: list_output
    ignore_errors: yes
  - debug:
      var: list_output

  # Edge case task with multiple parents and lines
  - name: Testing multiple parents and lines
    ios_config:
      lines:
        - "line1"
        - "line2"
      parents:
        - interface GigabitEthernet0/0
        - line vty 0 15
    register: parent_output
    ignore_errors: yes
  - debug:
      var: parent_output
