
- hosts: all
  gather_facts: no

  tasks:
  - name: Run VMWare Inventory Script
    script: "/path/to/script.sh"

  - name: Check cache age
    shell: "{{ item }} | awk '{print int($0/3600)}'"
    loop:
      - "{{ ansible_local.cache_age }}"
      - "{{ ansible_local.cache_age }} + 10"
      - "{{ ansible_local.cache_age }} - 10"
      - "{{ ansible_local.cache_age }} + 100"
      - "{{ ansible_local.cache_age }} - 100"
      - "{{ ansible_local.cache_age }} + 1000"
      - "{{ ansible_local.cache_age }} - 1000"
      - "{{ ansible_local.cache_age }} + abc"
      - "{{ ansible_local.cache_age }} - abc"
      - "{{ ansible_local.cache_age }} + ''"
      - "{{ ansible_local.cache_age }} - ''"
      - "{{ ansible_local.cache_age }} + null"
      - "{{ ansible_local.cache_age }} - null"
      - "{{ ansible_local.cache_age }} + []"
      - "{{ ansible_local.cache_age }} - []"
      - "{{ ansible_local.cache_age }} + {}"
      - "{{ ansible_local.cache_age }} - {}"

    register: cache_result

  - name: Debug cache age
    debug:
      var: cache_result
