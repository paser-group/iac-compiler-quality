yaml
---
- name: Test get_cpu_facts module with unconventional syntax
  hosts: all
  gather_facts: no

  tasks:
    - name: Set fact for edge case 1
      set_fact:
        cpu: 'zero_division_error {{ 1/0 }}'
      register: edge_case_1

    - name: Debug edge case 1 result
      debug:
        var: edge_case_1

    - name: Set fact for edge case 2
      set_fact:
        cpu: '{{ foo | random }}'
      vars:
        foo:
          - 1
          - 2
          - 0
      register: edge_case_2

    - name: Debug edge case 2 result
      debug:
        var: edge_case_2

    - name: Set fact for edge case 3
      set_fact:
        cpu: '{{ foo | upper }}'
      vars:
        foo: zero_division_error
      register: edge_case_3

    - name: Debug edge case 3 result
      debug:
        var: edge_case_3
