
- hosts: all
  become: true
  tasks:
    - name: Create new DNS entry
      route53:
        command: create
        zone: example.com
        record: "{{ item.record }}"
        type: "{{ item.type }}"
        ttl: "{{ item.ttl }}"
        value: "{{ item.value }}"
      with_items:
        - { record: "example-1", type: "A", ttl: "60", value: "10.0.0.1" }
        - { record: "example-2", type: "CNAME", ttl: "3600", value: "example.com." }
        - { record: "example-3", type: "MX", ttl: "1800", value: "10 mail.example.com." }
        - { record: "example-4", type: "TXT", ttl: "86400", value: "\"v=spf1 mx include:example.com -all\"" }
        - { record: "example-5", type: "AAAA", ttl: "7200", value: "2001:db8::1" }
        - { record: "{{ var }}", type: "AAAA", ttl: "7200", value: "2001:db8::1" }
        - { record: "example-6", type: "FOO", ttl: "3600", value: "bar" }
        - { record: "example-7", type: "A", ttl: "60", value: "10.0.0.100", alias: "true" }
