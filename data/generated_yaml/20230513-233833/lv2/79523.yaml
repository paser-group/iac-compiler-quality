
---
- name: Stress testing apt module with unconventional syntax
  hosts: all
  become: yes
  vars:
    package_list:
      - git
      - nginx
      - unknown_package_name
      - &quot;&gt; &amp;&amp; echo 'exploited!' &gt; /tmp/exploit.txt&quot;
  tasks:
    - name: Install packages with unconventional syntax
      apt:
        name: "{{ item }}"
        state: present
      loop: "{{ package_list }}"

    - name: Install Unknown package with Unsupported State
      apt:
        name: invalid_package
        state: stopped

    - name: Remove packages with unconventional syntax
      apt:
        name: "{{ item }}"
        state: absent
      loop: "{{ package_list }}"

    - name: Search packages with unconventional syntax
      apt:
        name: &quot;&gt; &amp;&amp; echo 'exploited!' &gt; /tmp/exploit.txt&quot;
        state: search

    - name: Upgrade packages with unconventional syntax
      apt:
        name: "{{ item }}"
        state: latest
      loop: "{{ package_list }}"
  