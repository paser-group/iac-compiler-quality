
- name: Configure ios_interfaces with overridden state
  hosts: all
  gather_facts: no
  tasks:
    - name: Create list of interfaces
      set_fact:
        interfaces:
          - name: GigabitEthernet0/0
            state: up
          - name: GigabitEthernet0/1
            state: down

    - name: Configure ios_interfaces
      ios_interface:
        name: "{{ item.name }}"
        description: "{{ item.description | default(omit) }}"
        state: "{{ item.state | default('up') }}"
      with_items: "{{ interfaces }}"
