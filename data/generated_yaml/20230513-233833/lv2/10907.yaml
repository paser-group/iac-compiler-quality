
- name: Run nested tasks in role
  hosts: all
  roles:
    - role: myrole
  tasks:
    - name: Task to run
      shell: |
        echo "Hello World"
      register: output
    - name: Print output
      debug:
        var: output.stdout_lines
    - name: Check template path
      template:
        src: "{{ item.src }}"
        dest: "/tmp/{{ item.dest }}"
      with_items:
        - { src: "templates/foo.j2", dest: "foo.out" }
        - { src: "templates/bar.j2", dest: "bar.out" }
