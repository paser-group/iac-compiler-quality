
---
- name: Test playbook for Jinja2 if/else syntax
  hosts: all
  become: true
  gather_facts: false

  tasks:
    - name: Test if/else syntax with string variables
      debug:
        msg: |
          {% if 'a' in item %}A{% elif 'b' in item %}B{% elif 'c' in item %}C{% else %}None{% endif %}
      loop:
        - 'abc'
        - 'bcd'
        - 'cde'
        - 'def'
        - 'efg'
    
    - name: Test if/else syntax with boolean variables
      debug:
        msg: |
          {% if item[0] == 'a' %}A{% elif item[1] is not defined %}B{% else %}C{% endif %}
      loop:
        - ['a', True]
        - ['b', False]
        - ['c']
    
    - name: Test if/else syntax with numerical variables
      debug:
        msg: |
          {% if item > 10 %}A{% elif item <= 5 %}B{% else %}C{% endif %}
      loop:
        - 15
        - 3
        - 7
    
    - name: Test if/else syntax with mixed variables
      set_fact:
        result: |
          {% if item[0] == 'a' and item[2] >= 5 %}A{% elif item[1] == True %}B{% else %}C{% endif %}
      with_items:
        - ['a', True, 7]
        - ['b', False, 2]
        - ['c', True, 4]

    - name: Test if/else syntax with invalid input
      debug:
        msg: |
          {% if 2 + 'a' %}not valid{% endif %}
