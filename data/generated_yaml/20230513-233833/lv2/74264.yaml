yaml
---
- name: Ansible vault create edge case
  hosts: all
  become: true
  gather_facts: false

  tasks:
  - name: Create vault without file name
    command: ansible-vault create
    args:
      stdin: 'very secret content'

  - name: Create vault with unconventional syntax
    command: ansible-vault create "{{ 'too/few/arguments' }}"
    args:
      stdin: 'very secret content'

  - name: Create vault with unexpected input
    command: ansible-vault create "file'"
    args:
      stdin: 'very secret content'

  - name: Create vault with empty stdin
    command: echo '' | ansible-vault create file.yml

  - name: Create vault with invalid password
    command: ansible-vault create --vault-password-file invalid_password.txt file.yml
