
---
- hosts: all
  become: true
  vars:
    content: |
      some_text_here

  tasks:
    - name: Insert block of text
      blockinfile:
        path: /path/to/file
        block: "{{ content }}"
        state: present
        insertafter: EOF
        backup: yes
        marker: "# {mark} ANSIBLE MANAGED BLOCK {mark}"

    - name: Insert block of text with Python3
      blockinfile:
        path: /path/to/file
        block: |
          "some_text_here"
        state: present
        insertafter: EOF
        backup: yes
        marker: "# {mark} ANSIBLE MANAGED BLOCK {mark}"

    - name: Insert block of text with the wrong type
      blockinfile:
        path: /path/to/file
        block: 1234567
        state: present
        insertafter: EOF
        backup: yes
        marker: "# {mark} ANSIBLE MANAGED BLOCK {mark}"

    - name: Insert block of text with byte type
      blockinfile:
        path: /path/to/file
        block: b"some_text_here"
        state: present
        insertafter: EOF
        backup: yes
        marker: "# {mark} ANSIBLE MANAGED BLOCK {mark}"

    - name: Insert block of text with tuple of bytes
      blockinfile:
        path: /path/to/file
        block:
          - b"some_text_here"
        state: present
        insertafter: EOF
        backup: yes
        marker: "# {mark} ANSIBLE MANAGED BLOCK {mark}"
