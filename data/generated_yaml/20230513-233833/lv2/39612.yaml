
---
- name: mssql_db fatal error playbook
  hosts: node1
  vars:
    db_name: "Test''Database" # unconventional database name to test for SQL injection
    invalid_var: !invalid # unexpected input
  tasks:
    - name: Create database with unconventional name
      mssql_db:
        name: "{{ db_name }}"
      register: db_result
    - name: Print database creation result
      debug:
        var: db_result
    - name: Attempt to drop an invalid variable
      mssql_db:
        name: "{{ invalid_var }}"
      register: invalid_var_result
      ignore_errors: yes # ignore expected errors related to invalid variable reference
    - name: Print invalid variable drop result
      debug:
        var: invalid_var_result
