yaml
---
- hosts: localhost
  connection: local
  gather_facts: no

  tasks:
    - name: Execute local command
      local_action: command echo "Hello world"
      register: local_output

    - name: Add new host
      add_host:
        name: "{{ local_output.stdout }}"
        groups: new_group

    - name: Execute command on new host
      shell: echo "This command will execute on a new host"
      delegate_to: "{{ groups['new_group'][0] }}"
        
    - name: Get hostname of all nodes
      gather_facts: no
      debug:
        msg: "{{ inventory_hostname }}"    
