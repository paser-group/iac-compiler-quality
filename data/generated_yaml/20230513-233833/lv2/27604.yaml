
---
- name: Stress Test Ansible Compiler for nxos_install_os errors
  hosts: all
  gather_facts: false

  tasks:
    - name: Install OS using CLI transport
      nxos_install_os:
        src:
          - /path/to/image1.bin
          - /path/to/image2.bin
        dest: bootflash:/image.bin
        provider: "{{ item }}"
      with_items:
        - { transport: cli, username: admin, password: admin123 }
        - { transport: cli, username: admin, password: password1 }
        - { transport: cli, username: admin, password: }
        - { transport: cli, username: admin }
        - { transport: cli, username: }
        - { transport: cli }
        - { transport: invalid }
        - { transport: "", username: admin, password: admin123 }
        - { transport: null, username: admin, password: admin123 }

    - name: Install OS using NXAPI transport
      nxos_install_os:
        src:
          - /path/to/image1.bin
          - /path/to/image2.bin
        dest: bootflash:/image.bin
        provider: "{{ item }}"
      with_items:
        - { transport: nxapi, host: 10.1.1.1, port: 443, username: admin, password: admin123 }
        - { transport: nxapi, host: 10.1.1.2, port: 443, username: admin, password: password1 }
        - { transport: nxapi, host: 10.1.1.3, port: 80, username: admin, password: admin123 }
        - { transport: nxapi, host: 10.1.1.4, username: admin, password: admin123 }
        - { transport: nxapi, port: 443, username: admin, password: admin123 }
        - { transport: nxapi, username: admin, password: admin123 }
        - { transport: nxapi, host: 10.1.1.1, port: 443, username: admin, password: admin123, invalid_param: value }
        - { transport: nxap, host: 10.1.1.1, port: 443, username: admin, password: admin123 }
        - { transport: "", host: 10.1.1.1, port: 443, username: admin, password: admin123 }
        - { transport: null, host: 10.1.1.1, port: 443, username: admin, password: admin123 }
