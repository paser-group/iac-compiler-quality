
---
- name: Test Case for GitHub Issue
  hosts: node1
  gather_facts: no

  tasks:
  - name: Test case 1
    include_role:
      name: example_role
    register: result
    when: "{{ 1/0 }}"

  - name: Test case 2
    include_role:
      name: example_role
    register: result
    when: "invalid"

  - name: Test case 3
    include_role:
      name: example_role
    register: result
    when: "{{ item|random if invalid }}"

  - name: Test case 4
    include_role:
      name: example_role
    register: result
    when: "{{ lookup('env', 'undefined_var') is defined }}"

  - name: Test case 5
    include_role:
      name: example_role
    register: result
    when: "'missing_var' in vars"

  - name: Test case 6
    include_role:
      name: example_role
    register: result
    when: "{{ var|missing_function }}"

  - name: Test case 7
    include_role:
      name: example_role
    register: result
    when: var.undeclared_attribute
