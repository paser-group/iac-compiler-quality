
---
- name: Test Ansible Virtualization Role
  hosts: all
  vars:
    ansible_virtualization_role: false
    obj: {{ [1,2,3]|random }}
    bool: {{ [true,false]|random }}
    str: "{{ [1,2,3]|random|string }}"
  
  tasks:
    - name: Set ansible_virtualization_role to host
      set_fact:
        ansible_virtualization_role: host
      when: obj == 1

    - name: Set some unconventional syntax
      debug:
        msg: "{{ ';;::/*-+"/¿?¿?¿' }}"

    - name: Set ansible_virtualization_role to kvm
      set_fact:
        ansible_virtualization_role: kvm
      when: obj == 2

    - name: Set ansible_virtualization_role to xen
      set_fact:
        ansible_virtualization_role: xen
      when: obj == 3

    - name: Test Bool Value
      debug:
        msg: "Bool value is: {{ bool }}"
      when: bool == true

    - name: Test String Value
      debug:
        msg: "Random string is: {{ str }}"
      when: obj == 2
