
---
- name: Test playbook for incorrect custom library module resolution order
  hosts: all
  become: true
  tasks:
    - name: Testing order and path of library modules
      include:
        file: "{{ item }}"
        apply:
          tags: "{{ item }}"
      with_items:
        - custom_modules/library1.py
        - /usr/share/ansible_plugins/library2.py
        - ../extra_modules/library3.py
        - /nonexistent_modules/library4.py
        - ab$cd/l1br@ry5.py
        - /usr/share/ansible_plugins/
      tags:
        - edge_cases
        - unconventional_syntax
        - unexpected_inputs
