
---
- name: Test open_url with basic authentication and python3
  hosts: all
  gather_facts: false
  tasks:
    - name: Execute open_url with basic Authentication
      uri:
        url: "http://site.com"
        user: "{{ 'test' }}"
        password: "{{ 'test' }}"
      when: item == 1
      with_items:
        - 1
        - "{{['test']|map('regex_replace', 't', 'T')|list}}"
        - "{{test}}"
        - "{{{'key': 'value'}}|to_json}}"
        - "{{[{'key': 'value'}]}|to_json}}"
        - "{{undefined}}"
        - "{{int('invalid')}}"
        - "{{assert('false')}}"
        - "{{ansible_env['HOME']}}"
        - "{{ansible_inventory_hostname}}"
