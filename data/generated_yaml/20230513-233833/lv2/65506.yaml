
- name: Test beadm module
  hosts: node1
  become: true
  gather_facts: false
  tasks:
    - name: Test AttributeError with invalid command
      beadm:
        name: test
        state: invalid_command
      register: result1

    - name: Test AttributeError with invalid name
      beadm:
        name: ''
        state: present
      register: result2

    - name: Test AttributeError with invalid state
      beadm:
        name: test
        state: invalid_state
      register: result3
      
    - name: Test AttributeError with invalid zpool
      beadm:
        name: test
        state: present
        zpool: ''
      register: result4
      
    - name: Test AttributeError with invalid properties
      beadm:
        name: test
        state: present
        properties: ''
      register: result5

    - name: Check for AttributeError in results
      assert:
        that:
          - "'AttributeError' in result1.stderr"
          - "'AttributeError' in result2.stderr"
          - "'AttributeError' in result3.stderr"
          - "'AttributeError' in result4.stderr"
          - "'AttributeError' in result5.stderr"
