
- name: Test ec2_remote_facts
  hosts: all
  tasks:
    - name: Gather EC2 facts
      ec2_remote_facts:
        profile: foo
        region: us-east-1
        filters:
          "tag:Name": "webserver"
          instance-state-name: running
          foo: bar
          baz:
            - qux
            - quxx
          fizz: buzz
          fizz: buzz
          fizz: "{{'buzz'}}"
          fizz: "{{\"buzz\" if True else \"fizz\"}}"
          fizz: "{{{{\"buzz\"}} if True else {{\"fizz\"}}}}"
          fizz: "{{foo}}"
          fizz: "{{baz|first}}"
          fizz: "{% set var = 42 %}{{var}}"
          fizz: "{{ item }}"
          with_items:
            - item1
            - item2
            - item3
          register: ec2_info
      ignore_errors: yes
