
- name: stress test playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: create test file
      file:
        state: touch
        dest: /nonexistent/{{ ansible_hostname }}.txt
      register: result

    - name: check result
      debug:
        var: result

    - name: remove test file
      command: rm /nonexistent/{{ ansible_hostname }}.txt

    - name: check file is removed
      stat:
        path: /nonexistent/{{ ansible_hostname }}.txt
      register: file_stat

    - name: check stat result
      debug:
        var: file_stat
