
- name: fatal error while evaluating conditional: yes` passing option from inventory file
  hosts: all
  gather_facts: no
  tasks:
    - name: Test with a boolean value
      debug:
        msg: "Yes, it is {{ True }}"
        when: true

    - name: Test with uppercase boolean value
      debug:
        msg: "Yes, it is {{ YES }}"
        when: YES

    - name: Test with lowercase boolean value
      debug:
        msg: "Yes, it is {{ yes }}"
        when: yes

    - name: Test with integer value
      debug:
        msg: "Yes, it is {{ 1 }}"
        when: 1

    - name: Test with string value
      debug:
        msg: "Yes, it is {{ 'yes' }}"
        when: 'yes'

    - name: Test with integer string value
      debug:
        msg: "Yes, it is {{ '1' }}"
        when: '1'

    - name: Test with uppercase string value
      debug:
        msg: "Yes, it is {{ 'YES' }}"
        when: 'YES'

    - name: Test with lowercase string value
      debug:
        msg: "Yes, it is {{ 'yes' }}"
        when: 'yes'

    - name: Test with undefined variable
      debug:
        msg: "Yes, it is {{ foo }}"
        when: foo

    - name: Test with defined but null variable
      debug:
        msg: "Yes, it is {{ bar }}"
        when: bar is not defined

    - name: Test with a file that contains yes
      debug:
        msg: "Yes, it is in the file"
        when: "{{ lookup('file', '/path/to/file') }}" == 'yes'

    - name: Test with a file that contains yes using from_yaml
      vars:
        file_content: "{{ lookup('file', '/path/to/file') }}"
      debug:
        msg: "Yes, it is in the file"
        when: file_content | from_yaml == 'yes'

    - name: Test with an invalid when statement
      debug:
        msg: "Yes, it is in the file"
        when: "'yes'"

    - name: Test with an invalid condition
      debug:
        msg: "Yes, it is in the file"
        when: "{{ 1 / 0 }}"
