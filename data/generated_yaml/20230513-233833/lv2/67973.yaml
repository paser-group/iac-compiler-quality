
---
- hosts: all
  gather_facts: no
  vars:
    build_flags: [ "-O2", "-Wall", "-Werror=deprecated-declarations" ]
  tasks:
  - name: Install gem module with build_flags parameter
    apt:
      name: gem
      update_cache: yes
      state: present
      install_recommends: yes
      build_flags: "'{{ build_flags | join(";") }}'"
  - name: Install gem module without build_flags parameter
    apt:
      name: gem
      update_cache: yes
      state: present
      install_recommends: yes
  - name: Install gem module with empty build_flags parameter
    apt:
      name: gem
      update_cache: yes
      state: present
      install_recommends: yes
      build_flags: ""
  - name: Uninstall gem module
    apt:
      name: gem
      state: absent
  - name: Install gem module with unconventional syntax
    apt: name=gem update_cache=yes state=present install_recommends=yes
  - name: Install gem module with unexpected parameter
    apt:
      name: gem
      update_cache: yes
      state: present
      install_recommends: yes
      fake_parameter: true
  - name: Install gem module without specifying install recommendations
    apt:
      name: gem
      update_cache: yes
      state: present
