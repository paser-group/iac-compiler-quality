
- name: Test 'removes' option for command module
  hosts: node1
  gather_facts: false
  
  tasks:
  
  - name: Run command with valid removes option
    command: "ls -la"
    removes: "/etc/passwd"
  
  - name: Run command with invalid removes option
    command: "ls -la"
    removes: "{{ unknown_variable }}"
  
  - name: Run command with empty removes option
    command: "ls -la"
    removes: ""
  
  - name: Run command without removes option
    command: "ls -la"
  
  - name: Run command with removes option pointing to a directory
    command: "ls -la"
    removes: "/etc"
    
  - name: Run command with removes option containing a wildcard
    command: "ls -la"
    removes: "/etc/pas*"
