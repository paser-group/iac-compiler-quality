
---
- name: Test apt_key module with unconventional syntax and unexpected inputs
  hosts: node1
  become: true
  vars:
    apt_key_url_cert: "/etc/apt/certs/mycert.pem"
  tasks:
    - apt_key:
        url: "{{ apt_key_url_cert }}"
        state: present
        validate_certs: "{{ true if apt_key_url_cert else false }}"
        fingerprint: "{{ lookup('file', apt_key_url_cert) | openssl_fingerprint('sha256') }}"
        timeout: -1
        idempotency_delay: 0
      register: result

    - debug:
        var: result
