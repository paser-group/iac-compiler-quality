
- hosts: all
  gather_facts: false

  tasks:
    - name: Configure ntp on nxos nodes
      nxos_ntp:
        state: stopped
        servers: "{{ item }}"
      with_items:
        - 10.1.1.1 10.1.1.2 10.1.1.3
      register: result

    - name: Debug Task
      debug:
        var: result

    - name: Validate NTP Config
      assert:
        that:
          - "'10.1.1.1' in result.msg"
          - "'10.1.1.2' in result.msg"
          - "'10.1.1.99' not in result.msg"
      ignore_errors: true
