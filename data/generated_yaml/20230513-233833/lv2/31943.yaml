
- name: Include Role Dynamic Test
  hosts: node1
  gather_facts: no

  vars:
    role_name: "{{ ['foo', 'bar', 'baz'] }}"

  tasks:
    - include_role:
        name: "{{ role_name }}"
        tasks_from: |
          {% for host in groups['node1'] %}
          - name: Do something on {{ host }}
            debug:
              msg: "Hello from {{ host }}"
          {% endfor %}
