
- name: Test tower_job_launch with multiple results error
  hosts: node1
  become: yes

  tasks:
    - name: Launch job template
      tower_job_launch:
        tower_username: "{{ tower_username }}"
        tower_password: "{{ tower_password }}"
        tower_host: "{{ tower_host }}"
        job_template: "{{ job_template }}"
        extra_vars: "{{ extra_vars }}"
        wait: yes
        wait_interval: 5
        validate_certs: yes
      register: results

    - name: Debug results
      debug:
        var: results

    - name: Assert multiple results error
      assert:
        that: "'Expected one result' in results.stderr"
      ignore_errors: yes
