
---
- name: Symlink Error Test Playbook
  hosts: all
  become: yes

  tasks:
    - name: Create symlink with a non-existent file
      file:
        src: /tmp/non-existent-file
        dest: /tmp/link-to-non-existent-file
        state: link

    - name: Create symlink with wrong owner
      file:
        src: /etc/hosts
        dest: /tmp/link-to-hosts
        owner: wrong-owner
        state: link

    - name: Create broken symlink
      file:
        src: /tmp/non-existent-file
        dest: /tmp/broken-link
        state: link
        force: yes

    - name: Create relative symlink
      file:
        src: ../hosts
        dest: /tmp/link-to-hosts-relative
        state: link

    - name: Create symlink with unconventional syntax
      file: src={{ /tmp/non-existent-file }} dest=/tmp/link-to-non-existent-file state=link

    - name: Delete symlink with unconventional syntax
      file: path=/tmp/link-to-non-existent-file state=absent (and 1=1)

    - name: Create symlink with unexpected input - list
      file: src=[/tmp/non-existent-file] dest=/tmp/link-to-non-existent-file state=link

    - name: Create symlink with unexpected input - dictionary
      file: src={"file": "/tmp/non-existent-file"} dest=/tmp/link-to-non-existent-file state=link

    - name: Create symlink with unexpected input - boolean
      file: src=true dest=/tmp/link-to-non-existent-file state=link

    - name: Create symlink with unexpected input - integer
      file: src=123 dest=/tmp/link-to-non-existent-file state=link
