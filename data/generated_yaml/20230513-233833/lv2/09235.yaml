
---
- name: Test apt module with_items
  hosts: node1
  become: true
  tasks:
    - name: Install multiple packages
      apt:
        name: "{{ item }}"
        state: present
      with_items:
        - package1
        - package2
        - package3 "{{ 'invalid_input' }}"
        - "{{ 'invalid_input' }}" package4
        - { package: package5, state: present }
        - "{{ '' }}" # empty string
      ignore_errors: true

    - name: Upgrade package with invalid state input
      apt:
        name: "{{ item }}"
        state: "{{ 'upgrade' + 'invalid_input' }}"
      with_items:
        - package6
      ignore_errors: true

    - name: Install package with invalid version input
      apt:
        name: package7
        state: present
        update_cache: true
        version: "{{ 'invalid_input' }}"
      ignore_errors: true

    - name: Remove package with invalid state input
      apt:
        name: package8
        state: "{{ 'remove' + 'invalid_input' }}"
      ignore_errors: true
