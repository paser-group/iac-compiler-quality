
---
- name: Example Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Test invalid tag value
      debug:
        msg: "This task has a tag of [invalid_tag|{{ 1 / 0 }}]"

    - name: Test invalid tag name
      debug:
        msg: "This task has a tag of [{{ 1 / 0 }}]"

    - name: Test tag with whitespace
      debug:
        msg: "This task has a tag of [' tag with whitespace ']"

    - name: Test multiple tags, one invalid
      debug:
        msg: "This task has tags [valid_tag1,valid_tag2,{{ 1 / 0 }}]"

    - name: Test duplicates in tags
      debug:
        msg: "This task has tags [valid_tag1,valid_tag2,valid_tag2]"

    - name: Test list of tags
      debug:
        msg: "This task has tags {{ ['valid_tag1', 'valid_tag2'] }}"

    - name: Test invalid input for tags
      debug:
        msg: "This task has tags {{ foo }}"

    - name: Test tags with special characters
      debug:
        msg: "This task has tags ['valid_tag!@#$%^&*()_-+=']"
