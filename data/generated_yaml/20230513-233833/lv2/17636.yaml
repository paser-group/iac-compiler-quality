
---
- name: Stress Test Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Use with_dict with a string instead of a dictionary
      debug:
        msg: "{{ item }}"
      with_dict: "invalid input"

    - name: Use with_dict with a null input
      debug:
        msg: "{{ item }}"
      with_dict: "{{ variable | default(None) }}"

    - name: Use with_dict with an undeclared variable
      debug:
        msg: "{{ item }}"
      with_dict: "{{ undeclared_variable }}"

    - name: Use with_dict with a list element instead of a dictionary
      debug:
        msg: "{{ item }}"
      with_dict: "{{ ['invalid input'] }}"

    - name: Use with_dict with a nested dictionary input
      debug:
        msg: "{{ item.key }}, {{ item.value }}"
      with_dict:
        - key: value
        - key: value

    - name: Use with_dict with a missing key in the input dictionary
      debug:
        msg: "{{ item }}"
      with_dict:
        - key: value
        - key2: value2
