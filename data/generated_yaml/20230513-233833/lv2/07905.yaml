
---
- name: Test ec2_vpc module with invalid input
  hosts: localhost
  connection: local

  tasks:
  - name: Create a VPC with no subnets
    ec2_vpc:
      state: present
      cidr_block: 10.0.0.0/16
      region: us-east-1
      subnets: []

  - name: Create a VPC with an invalid CIDR block
    ec2_vpc:
      state: present
      cidr_block: 192.168.0.0/33
      region: us-east-2

  - name: Create a VPC with invalid subnets
    ec2_vpc:
      state: present
      cidr_block: 172.16.0.0/16
      region: us-west-1
      subnets:
        - {id: invalid_subnet_1}
        - {id: invalid_subnet_2}

  - name: Create a VPC with an existing CIDR block
    ec2_vpc:
      state: present
      cidr_block: 10.0.0.0/16
      region: us-east-1
      subnets:
        - {id: subnet-11111111}
        - {id: subnet-22222222}
