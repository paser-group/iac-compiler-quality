
---
- name: RabbitMQ Password Update
  hosts: rabbitmq
  become: yes
  
  tasks:
    - name: Update password for rabbitmq
      rabbitmq_user:
        user: testuser
        vhost: /
        password: "{{ item }}"
        tags: management
        state: present
      loop:
        - "newpassword"
        - ""
        - "{{ not_a_variable }}"
        - "'{{escaped_password}}'"
        - "{{ [1, 2, 3] }}"
        - "{{ true }}"
        - "{{ false }}"
        - "{{ {'key': 'value'} }}"
      register: output

    - name: Display output
      debug:
        var: output
