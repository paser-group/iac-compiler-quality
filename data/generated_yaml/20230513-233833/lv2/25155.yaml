
---
- name: Test wait_for : host parameter
  hosts: all
  gather_facts: false
  tasks:
    - name: Wait for host with a non-standard port
      wait_for:
        host: 10.1.1.1:2222
        port: 22
        delay: 10
        timeout: 30
      ignore_errors: true

    - name: Wait for host that responds with a different string
      wait_for:
        host: 10.1.1.2
        port: 22
        delay: 5
        timeout: 30
        search_regex: 'Welcome to my server!'
      ignore_errors: true

    - name: Wait for a host that responds with a different string
      wait_for:
        host: 10.1.1.3
        port: 80
        delay: 1
        timeout: 30
        search_regex: 'Welcome to my server!'
      ignore_errors: true
      
    - name: Wait on non-existent host
      wait_for:
        host: 10.1.1.4
        port: 22
        delay: 5
        timeout: 30
      ignore_errors: true

    - name: Wait for a bad hostname
      wait_for:
        host: badhostname1293.com
        port: 22
        delay: 5
        timeout: 30
      ignore_errors: true

    - name: Wait for a host on an invalid IP address
      wait_for:
        host: 10.256.20.30
        port: 22
        delay: 5
        timeout: 30
      ignore_errors: true
