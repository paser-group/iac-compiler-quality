
---
- hosts: all
  become: true
  tasks:
    - name: Ensure Elastic IP absent for non-existent IP
      ec2_eip:
        region: us-east-1
        state: absent
        public_ip: "1.2.3.4"

    - name: Ensure Elastic IP absent for non-existent allocation_id
      ec2_eip:
        region: us-east-1
        state: absent
        allocation_id: "eipalloc-0123456789abcdef"

    - name: Ensure Elastic IP present with invalid public IP
      ec2_eip:
        region: us-east-1
        state: present
        public_ip: "invalid"

    - name: Ensure Elastic IP present with invalid allocation_id
      ec2_eip:
        region: us-east-1
        state: present
        allocation_id: "invalid"

    - name: Ensure Elastic IP present with invalid instance_id
      ec2_eip:
        region: us-east-1
        state: present
        instance_id: "i-0123456789abcdefg"
