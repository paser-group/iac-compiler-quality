
---
- name: ios_config fails with wrong error for invalid src option
  hosts: all
  gather_facts: no

  tasks:
    - name: Test with invalid src option
      ios_config:
        src: /invalid/path
        lines:
          - example line
      register: result
      ignore_errors: true

    - name: Test with invalid key value
      ios_config:
        src: test.cfg
        lines:
          - invalid key value
      register: result
      ignore_errors: true

    - name: Test with non-existent file
      ios_config:
        src: non_existent_file.cfg
        lines:
          - example line
      register: result
      ignore_errors: true

    - name: Test with empty lines
      ios_config:
        src: test.cfg
        lines: ""
      register: result
      ignore_errors: true

    - name: Test with list instead of lines
      ios_config:
        src: test.cfg
        lines:
          - item1
          - item2
      register: result
      ignore_errors: true

    - name: Test with missing lines parameter
      ios_config:
        src: test.cfg
      register: result
      ignore_errors: true
