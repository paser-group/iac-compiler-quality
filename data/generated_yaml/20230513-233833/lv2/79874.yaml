
- hosts: all
  gather_facts: no

  tasks:
    # Unconventional syntax for variable declaration and assignment
    - set_fact: "{{ item }}"
      with_items:
        - "var1=value1"
        - "var2 = wrong syntax"
        - "var3={{ var2 }}"

    # Simulating a nested variable with error
    - debug:
        var: var1[var2.invalid_key]

    # Unexpected input as an array index
    - set_fact:
        arr: [1, 2, 3]
    - debug:
        var: arr.{{ var1 }}

    # Defining variables with same name in different contexts
    - set_fact:
        some_var: "global"
    - block:
        - set_fact:
            some_var: "nested"
      - debug:
          var: some_var

    # Edge case of using undefined variable in Jinja template
    - template:
        src: "test.template.j2"
        dest: "/tmp/test.txt"

# Jinja template - test.template.j2
This is a test template with Jinja syntax.
Undefined variable: {{ undefined_var }}
