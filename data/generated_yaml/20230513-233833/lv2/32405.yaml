
- name: test playbook for net_vlan module
  hosts: all
  gather_facts: false

  tasks:
    - name: create VLAN and specify a transport that is not cli
      net_vlan:
        name: "test_vlan"
        id: 100
        provider:
          transport: "ssh"
          username: "testuser"
          password: "testpassword"
      register: vlan_status

    - name: check status of vlan
      debug:
        var: vlan_status

    - name: create VLAN with unconventional vlan ID
      net_vlan:
        name: "test_vlan_unconventional_id"
        id: "abc123!"
        provider:
          transport: "ssh"
      register: vlan_status_2

    - name: check status of VLAN with unconventional vlan ID
      debug:
        var: vlan_status_2

    - name: create VLAN with unexpected input for VLAN name
      net_vlan:
        name: 12345
        id: 200
        provider:
          transport: "cli"
          username: "testuser"
          password: "testpassword"
      register: vlan_status_3

    - name: check status of VLAN with unexpected input for VLAN name
      debug:
        var: vlan_status_3
