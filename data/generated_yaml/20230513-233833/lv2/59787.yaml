
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Stop Iam Password Policy
      iam_password_policy:
        name: Stop IAM Password Policy
        state: present
        max_password_age: 90
        allow_users_to_change_password: no
        password_reuse_prevention: 1
        require_lowercase_characters: yes
        require_uppercase_characters: no
        require_numbers: yes
        require_symbols: yes
        prohibit_password_with_username: yes
        prohibit_previous_password: yes
        minimum_password_length: 10
        debug: yes
        ignore_tags: yes
        default_params:
          enforce_password_policy: yes
          enforce_known_policy: no
          ignore_warnings: no

    - name: Start Iam Password Policy
      iam_password_policy:
        name: Start IAM Password Policy
        enforce_password_policy: no
        enforce_known_policy: no
        ignore_warnings: yes
        ignore_tags: no

    - name: Modify Iam Password Policy
      iam_password_policy:
        name: Modify IAM Password Policy
        max_password_age: 120
        allow_users_to_change_password: yes
        password_reuse_prevention: 3
        require_lowercase_characters: no
        require_uppercase_characters: yes
        require_numbers: no
        require_symbols: no
        prohibit_password_with_username: no
        prohibit_previous_password: no
        minimum_password_length: 14
        debug: no
        ignore_tags: yes
        default_params:
          enforce_password_policy: yes
          enforce_known_policy: yes
          ignore_warnings: no
