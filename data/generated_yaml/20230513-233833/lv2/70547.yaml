
- name: Test ovirt_vm cd_iso by name
  hosts: node1
  become: yes
  vars:
    invalid_iso: "../../../etc/passwd"
    invalid_vm: "||echo 'hello'"
  tasks:
    - name: Upload CD iso
      ovirt_disk:
        auth: "{{ ovirt_auth }}"
        disk: "cdrom"
        name: "{{ invalid_iso }}"
        vm: "{{ invalid_vm }}"
      ignore_errors: true
    - name: Start VM
      ovirt_vm:
        auth: "{{ ovirt_auth }}"
        name: "{{ invalid_vm }}"
        state: started
      ignore_errors: true
    - name: Attaching CD iso to VM
      ovirt_cdrom:
        auth: "{{ ovirt_auth }}"
        vm: "{{ invalid_vm }}"
        disk: "{{ invalid_iso }}"
      ignore_errors: true
