
---
- hosts: all
  become: yes
  tasks:

    - name: test setting default argument to a string
      debug:
        msg: "{{ my_default | default('default string') }}"

    - name: test setting default argument to a list
      debug:
        msg: "{{ my_default | default(['default', 'list']) }}"

    - name: test setting default argument to a dictionary
      debug:
        msg: "{{ my_default | default({'key': 'default value'}) }}"

    - name: test overriding default argument with a string
      debug:
        msg: "{{ my_default | default('') + 'overridden' }}"

    - name: test overriding default argument with a list
      debug:
        msg: "{{ my_default | default([]) + ['overridden'] }}"

    - name: test overriding default argument with a dictionary
      debug:
        msg: "{{ my_default | default({}) | combine({'key': 'overridden'}) }}"

    - name: test invalid input as default argument
      debug:
        msg: "{{ my_default | default({'invalid': {]}) }}"

    - name: test using Jinja2 filters in default argument
      debug:
        msg: "{{ my_default | default('default string') | upper }}"

    - name: test using Jinja2 loops in default argument
      debug:
        msg: "{{ my_default | default(range(5) | list) | sum }}"

