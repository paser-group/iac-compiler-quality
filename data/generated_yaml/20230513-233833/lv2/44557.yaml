
- name: Test s3_lifecycle with undefined prefix parameter
  hosts: node1
  gather_facts: false
  tasks:
    - name: Set s3 lifecycle rules with no prefix
      s3_lifecycle:
        bucket: mybucket
        rules:
          - id: rule1
            noncurrent_version_days: 10
            status: enabled
      register: result
    - name: Debug result
      debug:
        var: result


- name: Test s3_lifecycle with non-string prefix parameter
  hosts: node2
  gather_facts: false
  tasks:
    - name: Set s3 lifecycle rules with non-string prefix
      s3_lifecycle:
        bucket: mybucket
        prefix: 123
        rules:
          - id: rule1
            noncurrent_version_days: 10
            status: enabled
      ignore_errors: true
      register: result
    - name: Debug result
      debug:
        var: result


- name: Test s3_lifecycle with empty prefix parameter
  hosts: node3
  gather_facts: false
  tasks:
    - name: Set s3 lifecycle rules with empty prefix
      s3_lifecycle:
        bucket: mybucket
        prefix: ""
        rules:
          - id: rule1
            noncurrent_version_days: 10
            status: enabled
      register: result
    - name: Debug result
      debug:
        var: result
