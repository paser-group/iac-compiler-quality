
- name: Test win_command with args containing spaces
  hosts: all
  gather_facts: no
  tasks:
    - name: Execute win_command with arguments containing spaces
      win_command: '"{{ item }}"'
      with_items:
        - echo "hello world"
        - "dir 'Program Files'"

    - name: Test unconventional syntax
      win_command: "echo This command << EOF\nShould be marked invalid.\nEOF"

    - name: Test unexpected inputs with environment variables
      win_command: "set MYVAR={{ item }}"
      with_items:
        - ""
        - "test value!"
        - "@echo off"

    - name: Test unexpected inputs with special characters
      win_command: "ping localhost -n 1 -w 400 ^| find \"TTL\" > nul"

    - name: Test unexpected inputs with multiple commands
      win_command: "dir & type foo.txt"

    - name: Test unexpected inputs with quotes
      win_command: 'echo "Hello "world""'

    - name: Test edge case with long argument
      win_command: "echo {{ 'a'*400 }}"

