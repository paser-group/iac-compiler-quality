
- name: Test env lookup default
  hosts: all
  gather_facts: no

  tasks:
    - name: Test None default
      debug:
        var: "{{ lookup('env', 'NON_EXISTING_VAR', default=None) }}"

    - name: Test custom default
      debug:
        var: "{{ lookup('env', 'NON_EXISTING_VAR', default='custom_default') }}"

    - name: Test unconventional syntax
      debug:
        var: "{{ lookup('env', 'NON_EXISTING_VAR', default={{ True and 'hello' }}) }}"

    - name: Test unexpected input - list
      debug:
        var: "{{ lookup('env', 'NON_EXISTING_VAR', default=['un', 'ex', 'pected']) }}"

    - name: Test unexpected input - dictionary
      debug:
        var: "{{ lookup('env', 'NON_EXISTING_VAR', default={'un': 'ex', 'pected': True}) }}"
