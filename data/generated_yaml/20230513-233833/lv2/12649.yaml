
- name: Test playbook for variable passing issues
  hosts: all
  vars:
    - VARLIST: ["foo", "bar", "baz"]

  tasks:
  - name: Include task with incorrect variable syntax
    include_tasks: "{{ item }}"
    with_items:
      - "{{ VARLIST{}}"
      - "{{ VARLIST {and} {}}"
      - "{{ VARLIST *}}"
      - "{{ VARLIST. }}"
      - "{{ VARLIST @ }}"
      - "{{ !VARLIST }}"
      - "{{ [VARLIST] }}"
      - "{{ VARLIST + 1 }}"
      - "{{ VARLIST % 2 }}"
    ignore_errors: yes

  - name: Include task with unconventional variable syntax
    include_tasks: "{{ item }}"
    with_items:
      - "{{ VARLIST|upper }}"
      - "{{ VARLIST|lower }}"
      - "{{ VARLIST[0] }}"
      - "{{ VARLIST[:2] }}"
      - "{{ VARLIST[-1] }}"
      - "{{ VARLIST[:-2] }}"
      - "{{ VARLIST[1:2] }}"
      - "{{ VARLIST[::-1] }}"
    ignore_errors: yes

  - name: Include task with unexpected input
    include_tasks: "{{ VARLIST }}"
    ignore_errors: yes
