
---
- name: Random module documentation/implementation is incorrect about `end`
  hosts: all
  gather_facts: false

  tasks:
    - name: Define end as a variable
      set_fact:
        end: "'{{ range(1,10) }}'"
    - name: Test unconventional syntax
      random_string:
        length: "{{ [24, 48, '16'] | random }}"
        digits: "{{ end }}"
    - name: Test unexpected input
      random_password:
        length: "{{ [23, 44, 32, 'notanumber'] | random }}"
        special: "{{ ['!', '@', '#', 'notaspecialcharacter'] | random }}"
