
---
- name: Test playbook for SSH port variable with password containing a colon
  hosts: all
  gather_facts: no

  vars:
    ssh_pwd: "Password:with:colon"

  tasks:
    - name: Test SSH password with colon
      shell: |
        ssh -p {{ ssh_port }} {{ ansible_user }}@{{ inventory_hostname }} ls
      vars:
        ssh_port: 22
        ansible_user: root
        ansible_ssh_common_args: "-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o LogLevel=quiet -o ConnectTimeout=30 -o BatchMode=yes -i /root/.ssh/id_rsa -o PasswordAuthentication=yes -o PreferredAuthentications=password"
        ansible_ssh_pass: "{{ ssh_pwd }}"
