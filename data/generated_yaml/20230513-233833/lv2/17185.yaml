
---
- name: Parse default(int) wrong
  hosts: all
  become: true

  vars:
    default_val: default(int)

  tasks:
    - name: Print default value
      debug:
        msg: "{{ default_val }}"

    - name: Attempt to set default value
      set_fact:
        default_val: "{{ default_val | default('default(int)', True) }}"

    - name: Verify default value
      command: /bin/echo "{{ default_val }}"
      register: result

    - name: Check result
      debug:
        msg: "{{ result.stdout }}"

    - name: Attempt to parse default value
      set_fact:
        parsed_val: "{{ default_val|int }}"

    - name: Verify parsed value
      command: /bin/echo "{{ parsed_val }}"
      register: result

    - name: Check result
      debug:
        msg: "{{ result.stdout }}"
