
- hosts: all
  gather_facts: false
  vars:
    - my_dict:
        foo: bar
        baz: qux
    - list_longer_than_max_depth:
        - []
      vars:
        max_depth: 3
  tasks:
    - name: Set dynamic set of module var
      set_fact:
        my_var: "{{ my_dict | dictsort | map(attribute='1') | first }}"
    - name: Loop through a list with a depth greater than max_depth
      debug:
        msg: "{{ list_longer_than_max_depth | json_query(query) }}"
      vars:
        - query: "[[[[['*']*2]*2]*2]*2]*2"
      when: true or false
    - name: Render a non-existent Jinja template
      template:
        src: 'path/to/nonexistent_template.j2'
        dest: '/tmp/output.txt'
