yaml
---
- name: Ansible Galaxy Scm Errors
  hosts: all
  become: true

  tasks:
    # Test the installation of a known valid role
    - name: Install known valid role
      galaxy:
        name: geerlingguy.nginx
        state: present

    # Test the installation of an unknown role
    - name: Install unknown role
      galaxy:
        name: not-a-real-role
        state: present

    # Test the installation of a role from a custom SCM
    - name: Install role from SCM
      galaxy:
        name: geerlingguy.php
        scm: git
        src: https://github.com/geerlingguy/ansible-role-php.git
        state: present

    # Test the installation of a role from an invalid SCM
    - name: Install role from invalid SCM
      galaxy:
        name: geerlingguy.php
        scm: not-a-real-scm
        src: https://github.com/geerlingguy/ansible-role-php.git
        state: present

    # Test the installation of a role from a private repository
    - name: Install role from private repository
      galaxy:
        name: company.private_role
        scm: git
        src: git@github.com:company/private-ansible-role.git
        state: present
        force: yes

    # Test the installation of a role with a different format name
    - name: Install role with different format name
      galaxy:
        name: geerlingguy_php
        scm: git
        src: https://github.com/geerlingguy/ansible-role-php.git
        state: present

    # Test the installation of a role with a different namespace separator
    - name: Install role with different namespace separator
      galaxy:
        name: geerlingguy/php
        scm: git
        src: https://github.com/geerlingguy/ansible-role-php.git
        state: present

    # Test the installation of a role with unconventional syntax
    - name: Install role with unconventional syntax
      galaxy: name="geerlingguy.php" scm=git src=https://github.com/geerlingguy/ansible-role-php.git state=present

    # Test the installation of a role with unexpected input
    - name: Install role with unexpected input
      galaxy:
        name: "{{ not_a_real_variable }}"
        scm: "{{ ['git', 'mercurial'] | random }}"
        src: "{{ ['https://example.com/ansible-role.git', 'not-a-real-url'] | random }}"
        state: "{{ ['present', 'absent', 'latest'] | random }}"
