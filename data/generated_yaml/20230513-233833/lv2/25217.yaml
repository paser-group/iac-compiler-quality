
---

- name: Test playbook for GitHub issue title
  hosts: all
  gather_facts: false

  tasks:
    - name: Test when condition with default filter on undefined var
      debug:
        msg: "{{ var | default('default') }}"
      when: "undefined_var | default('default') == 'default'"

    - name: Test when condition with default filter on boolean value
      debug:
        msg: "{{ var | default('default') }}"
      when: "true | default('default') == 'default'"

    - name: Test when condition with default filter on integer value
      debug:
        msg: "{{ var | default('default') }}"
      when: "1 | default('default') == 'default'"

    - name: Test when condition with default filter on list value
      debug:
        msg: "{{ var | default('default') }}"
      when: "['a', 'b'] | default('default') == 'default'"

    - name: Test unconventional syntax in when condition
      debug:
        msg: "This is a test message"
      when: "var != undefined"

    - name: Test unexpected input in when condition
      debug:
        msg: "This is a test message"
      when: "{{ undefined_var }}"

