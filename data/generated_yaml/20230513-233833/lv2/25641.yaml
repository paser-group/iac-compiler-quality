
---
- name: Test playbook for cs_host module
  hosts: all
  gather_facts: false

  tasks:
    - name: Add host with http prefix
      cs_host:
        url: "http://10.1.1.1"
        apikey: "myapikey"
      register: result_1

    - name: Add host with https prefix
      cs_host:
        url: "https://10.1.1.1"
        apikey: "myapikey"
      register: result_2

    - name: Add host with unconventional syntax
      cs_host:
        url: "10.1.1.1:8080"
        apikey: "myapikey"
      register: result_3

    - name: Add host with unexpected input
      cs_host:
        url: "{{ foo }}"
        apikey: "myapikey"
      ignore_errors: true
      register: result_4

    - name: Add host with no apikey
      cs_host:
        url: "http://10.1.1.1"
      register: result_5

    - name: Debug output
      debug:
        var: item
      with_items:
        - result_1
        - result_2
        - result_3
        - result_4
        - result_5
