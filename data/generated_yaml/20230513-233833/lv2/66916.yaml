
---
- hosts: all
  gather_facts: true
  vars:
    names: ['hello', 123, [1, 2, 3], {'key': 'value'}, {'123': 'number'}]
  tasks:
    - name: Print host name as string
      debug:
        msg: "{{ hostvars['{{ inventory_hostname }}']['name'] | string }}"
    - name: Print name of each variable in the list
      debug:
        msg: "{{ item | string }}"
      loop: "{{ names }}"
    - name: Print index of each variable in the list
      debug:
        msg: "{{ names.index(item) | string }}"
      loop: "{{ names }}"
    - name: Print name of each variable converted to a dict key
      debug:
        msg: "{{ item | string | regex_replace('[^\\w]+','_') }}"
      loop: "{{ names }}"
    - name: Use incorrect variable names in hostvars
      debug:
        var: hostvars['no_host']['no_var']
    - name: Use variable name as dict key for hostvars
      debug:
        msg: "{{ hostvars[item] }}"
      loop: "{{ names }}"
