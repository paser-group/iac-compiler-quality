
---
- name: Test s3 bucket name with dots and fakes3 protocol
  hosts: all
  gather_facts: false
  become: true
  vars:
    s3_path: "s3://example.bucket/test.txt"
    s3_dot_path: "s3://example.bucket.with.dot/test.txt"
    s3_fakes3_path: "s3://localhost:4569/example.bucket/test.txt"
    s3_fakes3_dot_path: "s3://localhost:4569/example.bucket.with.dot/test.txt"
  tasks:
  - name: Test s3 bucket name with dots
    debug:
      msg: "{{ s3_dot_path }}"
    ignore_errors: true
  - name: Test s3 bucket name with dots and fakes3 protocol
    debug:
      msg: "{{ s3_fakes3_dot_path }}"
    ignore_errors: true
  - name: Test s3 bucket with unconventional syntax
    debug:
      msg: "{{ s3_path | regex_replace('example.', 'ex*mple[') }}"
    ignore_errors: true
  - name: Test s3 bucket with unexpected inputs
    debug:
      msg: "{{ s3_fakes3_path }}{{lookup('file','/dev/null')}}"
    ignore_errors: true
  - name: Test s3 bucket with edge cases
    debug:
      msg: "{{ s3_fakes3_path + s3_dot_path }}{{ '' | center(4,'\"') }}"
    ignore_errors: true
