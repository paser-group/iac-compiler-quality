
---
- name: Get server list from Openstack Cloud
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
  - name: Generate ServerList inventory
    os_server:
      cloud: mycloud
      state: present
    register: os_servers

  - name: Print server list
    debug:
      var: os_servers

  - name: Create Server List File
    copy:
      content: "{{ os_servers }}"
      dest: "/tmp/os_servers.txt"
