
- name: Test playbook for WinRM Connectionplugin fallback
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Define ignored templating error in hostvars
      set_fact:
        ignored_error: "{{ 1 / 0 }}"  # division by zero error

    - name: Test fallback to defaults
      win_ping:
        connection: winrm
        connection_options:
          transport: ssl
          realm: testrealm.com
        ignore_errors: true
