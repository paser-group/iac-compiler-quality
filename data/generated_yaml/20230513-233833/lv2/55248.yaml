
- name: 'Test vmware_object_role_permission issue'
  hosts: all
  gather_facts: no
  tasks:
    - name: 'Assign a role to a DVS object instead of a folder'
      vmware_object_role_permission:
        object_type: 'dvs'
        object_id: 'dvs-001'
        community_string: 'public'
        role_name: 'Admin'
        permissions: 'readWrite'
      ignore_errors: yes

    - name: 'Assign a role to a folder'
      vmware_object_role_permission:
        folder: '/vm'
        community_string: 'public'
        role_name: 'Operator'
        permissions: 'read'
      ignore_errors: yes

    - name: 'Assign a role to multiple folders'
      vmware_object_role_permission:
        folder:
          - '/vm'
          - '/temp'
        community_string: 'public'
        role_name: 'Guest'
        permissions: 'noAccess'
      ignore_errors: yes

    - name: 'Assign a role to a DVS object with an incorrect object_id'
      vmware_object_role_permission:
        object_type: 'dvs'
        object_id: 'dvs-002'
        community_string: 'public'
        role_name: 'Admin'
        permissions: 'readWrite'
      ignore_errors: yes

    - name: 'Assign a role to a folder with an incorrect folder path'
      vmware_object_role_permission:
        folder: '/temp1'
        community_string: 'public'
        role_name: 'Operator'
        permissions: 'read'
      ignore_errors: yes

    - name: 'Assign a role with invalid permission level'
      vmware_object_role_permission:
        folder: '/vm'
        community_string: 'public'
        role_name: 'Guest'
        permissions: 'read+write'
      ignore_errors: yes

    - name: 'Assign a role with invalid object_type'
      vmware_object_role_permission:
        object_type: 'DVSwitch'
        object_id: 'dvs-001'
        community_string: 'public'
        role_name: 'Admin'
        permissions: 'readWrite'
      ignore_errors: yes

    - name: 'Assign a role with a non-existent object_id'
      vmware_object_role_permission:
        object_type: 'dvs'
        object_id: 'dvs-003'
        community_string: 'public'
        role_name: 'Operator'
        permissions: 'read'
      ignore_errors: yes
