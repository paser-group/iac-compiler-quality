
---
- name: Test for win_dns_client issue
  hosts: all
  gather_facts: no

  tasks:
  - name: Configure DNS servers with invalid IP
    win_dns_client:
      adapter_names: 'Ethernet'
      dns_servers: '192.168.0.256'
    ignore_errors: yes
  
  - name: Configure DNS servers with valid and invalid inputs
    win_dns_client:
      adapter_names: 'Ethernet'
      dns_servers: 
        - '8.8.8.8'
        - '8.8.4.4'
        - 'invalid_ip'
        - '256.256.256.256'
    ignore_errors: yes

  - name: Remove DNS servers configuration
    win_dns_client:
      adapter_names: 'Ethernet'
      state: absent
  
  - name: Change the order of DNS servers
    win_dns_client:
      adapter_names: 'Ethernet'
      dns_servers: 
        - '8.8.4.4'
        - '8.8.8.8'
    ignore_errors: yes

  - name: Change DNS suffix search order with invalid input
    win_dns_client:
      adapter_names: 'Ethernet'
      dns_search_order: 'invalid_searchOrder'
    ignore_errors: yes

  - name: Change DNS suffix search order with valid input
    win_dns_client:
      adapter_names: 'Ethernet'
      dns_search_order: 
        - 'adatum.com'
        - 'contoso.com'
    ignore_errors: yes
