yaml
---
- name: testing playbook to uncover bugs
  hosts: all
  gather_facts: no 

  vars:
    condition: "{{ 'true' if (1 + 1 == 2) else 'false' }}"

  tasks:
    - name: execute tasks block
      block:
        - debug:
            msg: "task 1 executed"
        - debug:
            msg: "task 2 executed"
        - debug:
            msg: "task 3 executed"
      when: condition is not defined

    - name: execute when block
      debug:
        msg: "when block executed"
      when: condition

    - name: execute loop block
      debug:
        msg: "loop variable is {{ item }}"
      loop:
        - 1
        - 2
        - 3
