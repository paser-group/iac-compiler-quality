
---
- name: Stress test for Azure RM managed disk module
  hosts: node1
  vars:
    disk_name: "managed-disk"
  tasks:
    - name: Create an Azure RM managed disk
      azure_rm_managed_disk:
        name: "{{ disk_name }}"
        resource_group: "test"
        disk_size_gb: "{{ random(seed=1, min=1, max=9999) }}"
        os_type: "{{ random(seed=2, choices=['Windows', 'Linux']) }}"
        caching: "{{ random(seed=3, choices=['None','ReadOnly', 'ReadWrite']) }}"
        sku: "{{ random(seed=4, choices=['Premium_LRS', 'StandardSSD_LRS', 'UltraSSD_LRS']) }}"
        tags:
          costcenter: "{{ random('A', 'Z', length=5) }}-{{ random('0', '9', length=5) }}-{{ random('A', 'Z', length=2) }}"
          environment: "{{ random(seed=5, choices=['Development', 'Staging', 'Production']) }}"
        state: "{{ random(seed=6, choices=['present', 'absent']) }}"
        wait_for_completion_timeout: "{{ random(seed=7, int) }}"
