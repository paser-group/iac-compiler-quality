
---
- name: Test playbook for dict parsing issue
  hosts: all
  gather_facts: false

  vars:
    # Define a nested dictionary with additional levels
    dict1:
      item1:
        name: Foo
        age: 20
        hobbies:
          - biking
          - hiking
      item2:
        name: Bar
        age: 32
        hobbies:
          - running
          - swimming
      item3:
        name: Baz
        age: 25
        hobbies:
          - climbing
          - fishing
  
  tasks:
    - name: Test dict parsing regression
      command: echo "This test checks dict parsing issues"
      
      # Attempt to pass dict as a parameter to the echo command
      args:
        chdir: ~/test
        dict1: "{ dict1 }"

    - name: Test unconventional dict syntax
      debug:
        # Use an unquoted variable as the key in a dictionary
        "{{ item }}": "Value"
      with_items:
        - UnquotedKey1
        - UnquotedKey2
        - "{{ UnquotedKey3 }}"

    - name: Test unexpected dict inputs
      debug:
        # Use a not-defined variable as a key
        "{{ undefined_var }}": "Value"
        # Use a non-string value as a key
        - 42: "Value"
