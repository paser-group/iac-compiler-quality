
- name: Test playbook for GitHub issue #1234
  hosts: node1
  connection: eos_config
  vars:
    invalid_command: "invalidcommand"
  tasks:
    - name: Attempt to run a command with invalid syntax
      eos_command:
        command: "{{ invalid_command }}"
      ignore_errors: true
      register: eos_result
    - name: Check if the task failed due to a configuration error
      debug:
        msg: "The task failed as expected."
      when: "'invalid command' not in eos_result.stderr_lines"
