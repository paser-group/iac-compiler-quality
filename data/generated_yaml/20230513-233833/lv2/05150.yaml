
---
- name: Test playbook for Copy Module Error
  hosts: all
  become: true

  tasks:
    - name: Ensure target directory exists
      file:
        path: /tmp/testcopy
        state: directory

    - name: Copy a directory with a source string ending with slash
      copy:
        src: /tmp/src/
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a directory with a destination string ending with slash
      copy:
        src: /tmp/src
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a file with destination string ending with slash
      copy:
        src: /tmp/src.yml
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a directory into itself
      copy:
        src: /tmp/testcopy/
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a non-existent file
      copy:
        src: /tmp/non_existent_file.txt
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a non-existent directory
      copy:
        src: /tmp/non_existent_directory/
        dest: /tmp/testcopy/
        remote_src: yes

    - name: Copy a file with bad symbolic link
      copy:
        src: /tmp/bad_link.yml
        dest: /tmp/testcopy/
        remote_src: yes
