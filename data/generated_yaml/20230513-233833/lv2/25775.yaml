
- hosts: all
  gather_facts: no
  
  tasks:
    - name: Upload os_image with timeout
      os_image:
        src: "/path/os_image.img"
        dest: "/var/tmp/"
        timeout: "{{ 10 ** 5 }}"
      register: upload_result

    - name: Check upload status
      debug:
        msg: "Upload {{ 'succeeded' if upload_result.changed else 'failed' }}"

    - name: Delete os_image
      file:
        path: "/var/tmp/os_image.img"
        state: absent

    - name: Stress test compiler with unconventional syntax
      script: "['echo', '@#$%^&*()_+=|\\][{};:\'\",.<>?/\n', '>>', '/var/tmp/file.txt']"
      register: stress_test_result

    - name: Check stress test status
      debug:
        msg: "Stress test {{ 'succeeded' if stress_test_result.rc == 0 else 'failed' }}"

    - name: Send unexpected input to compiler
      command: "echo -n -e '\\x0061\\x006e\\x0073\\x0069\\x0062\\x006c\\x0065' >> /var/tmp/file.txt"
      register: unexpected_input_result

    - name: Check unexpected input status
      debug:
        msg: "Unexpected input test {{ 'succeeded' if unexpected_input_result.rc == 0 else 'failed' }}"
