yaml
---
- name: Test the ansible-galaxy install command
  hosts: all
  become: true
  gather_facts: false

  tasks:
    - name: Install a role using the role-file option
      command: >
        ansible-galaxy install
        --role-file=./roles.yml
        --roles-path=./roles
        some-role

    - name: Install a role using the role-file option with non-existing file
      command: >
        ansible-galaxy install
        --role-file=./non-existing-file.yml
        --roles-path=./roles
        some-role

    - name: Install a role using the role-file option with empty file
      copy:
        content: ""
        dest: "./roles.yml"
      command: >
        ansible-galaxy install
        --role-file=./roles.yml
        --roles-path=./roles
        some-role

    - name: Install a role using the role-file option and an extra comma
      copy:
        content: "some-role,,\n"
        dest: "./roles.yml"
      command: >
        ansible-galaxy install
        --role-file=./roles.yml
        --roles-path=./roles
        some-role

    - name: Install a role using the role-file option and a missing comma
      copy:
        content: "some-role\n"
        dest: "./roles.yml"
      command: >
        ansible-galaxy install
        --role-file=./roles.yml
        --roles-path=./roles
        some-role
