
- name: Transfer file with access errors
  win_robocopy:
    src: \\localhost\share
    dest: C:\temp
    files: file1.txt file2.txt
    failed_when: item.find("cannot access the file") == -1
  loop: "{{['robocopy /nonexistent', 'echo foo > \\localhost\\share\\file2.txt']}}"
  register: result
  failed_when: "not (result is failed and result.rc == 1)"
