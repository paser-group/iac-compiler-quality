
- name: Create S3 folder and copy file
   hosts: all
   gather_facts: False
   become: True
   tasks:
   - name: Create S3 folder
     aws_s3:
       bucket: my-bucket
       object: my-folder/
       mode: put
       permission: private

   - name: Copy file to S3 folder
     aws_s3:
       bucket: my-bucket
       object: my-folder/my-file
       src: /path/to/source/file
