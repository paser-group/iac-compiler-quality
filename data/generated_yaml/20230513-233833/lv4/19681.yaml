
---
- name: Check if hostname module works inside Docker container
  hosts: docker_nodes
  gather_facts: no
  tasks:
    - name: Start docker container
      docker_container:
        name: test_container
        image: ubuntu:latest
        command: sleep infinity
        state: started
      register: result

    - name: Run hostname module inside container
      docker_container:
        name: test_container
        command: hostname
      register: result

    - name: Check if hostname module fails as expected
      assert:
        that:
          - "'Error: Failed to get system hostname.' in result.stderr"
