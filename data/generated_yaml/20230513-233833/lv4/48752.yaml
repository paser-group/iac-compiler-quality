
- name: Verify hostname module installation
  package:
    name: python-hostname
    state: present

- name: Set hostname to known value
  hostname:
    name: testhostname

- name: Retrieve system hostname
  hostname:
    register: hostname_value

- name: Compare system hostname to expected value  
  assert:
    that:
      - hostname_value.stdout == 'testhostname'

- name: Reset hostname to original value
  hostname:
    name: "{{ ansible_hostname }}"
