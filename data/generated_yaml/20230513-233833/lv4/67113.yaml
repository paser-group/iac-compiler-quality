
- name: Check package updates
  hosts: all
  gather_facts: no
  become: yes

  tasks:
    - name: Update package indexes
      apt:
        update_cache: yes

    - name: Check for software updates
      apt:
        upgrade: "dist"
        update_cache: yes
        register: update_output
        # Ignore errors since we want to capture the output anyway
        ignore_errors: yes

    - name: Debug update output
      debug:
        var: update_output
