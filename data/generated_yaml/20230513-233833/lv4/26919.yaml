
---
- name: Configure MySQL Database
  hosts: all
  vars:
    mysql_config_file: /etc/mysql/conf.d/custom.cnf

  tasks:
  - name: Install MySQL Server
    apt:
      name: mysql-server
      state: latest

  - name: Setup MySQL Database
    mysql_db:
      name: myapp
      state: present

  - name: Configure MySQL DB Custom Settings
    lineinfile:
      path: "{{ mysql_config_file }}"
      line: "custom-setting=true"
    notify: restart mysql service
