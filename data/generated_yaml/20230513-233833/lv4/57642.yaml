
- name: VMware Inventory Fuzzer
  hosts: localhost
  vars:
    vcenter_hostname: <vCenter Hostname>
    vcenter_username: <vCenter Username>
    vcenter_password: <vCenter Password>
  tasks:
    - name: Setup Connection to vCenter
      vmware_config:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: false
        datacenter: <Datacenter Name>
      delegate_to: localhost
      register: config_result

    - name: Extract Virtual Machine Inventory
      vmware_vm_inventory:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: false
        datacenter: <Datacenter Name>
      delegate_to: localhost
      register: inventory_result
