
---
- name: Create CloudWatchlog group
  hosts: all
  gather_facts: false
  become: yes
  tasks:
    - name: Set retention period for log group
      set_fact:
        logGroupRetentionInDays: "{{ (range(0,200)|random) }}"
      changed_when: false
    
    - name: Create log group
      cloudwatchlogs_log_group:
        name: testGroup
        retentionInDays: "{{logGroupRetentionInDays}}"
        state: present
      register: testGroupResult
      
    - debug:
        msg: "RetentionInDays is set to {{logGroupRetentionInDays}}"
      
