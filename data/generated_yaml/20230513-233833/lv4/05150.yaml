
---
- name: Copy module error when src is directory example
  hosts: node1
  tasks:

  - name: Create a testdir on the target node
    file:
     path: /home/ubuntu/testdir/
     state: directory

  - name: Copy srcdir to testdir
    copy:
     src: /home/ubuntu/srcdir/
     dest: /home/ubuntu/testdir/

  - name: Verify if srcdir is copied to testdir
    shell: ls /home/ubuntu/testdir/
    register: dir_contents
    failed_when: dir_contents.stdout.find('srcdir') == -1
    
  - name: Delete the testdir
    file:
     path: /home/ubuntu/testdir/
     state: absent
