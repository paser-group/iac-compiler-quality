
- name: Create a new ELB
  ec2_elb_lb:
    name: my-elb
    region: us-east-1
    listeners:
      - protocol: http
        lb_port: 80
        instance_port: 80
    security_group: my-sg
    subnets:
      - subnet-1234abcd
      - subnet-5678efgh

- name: Register new instance with ELB
  ec2_elb:
    name: my-elb
    subnets:
      - subnet-1234abcd
      - subnet-5678efgh
    instances:
      - instance_id: i-1234567890abcdef
