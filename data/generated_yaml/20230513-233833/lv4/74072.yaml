
- name: Test file transfer between control node and managed nodes
  hosts: all
  gather_facts: yes
  
  tasks:
  - name: Create a test file
    file:
      path: /tmp/test.txt
      state: touch
  
  - name: Copy the test file from the control node to managed nodes
    copy:
      src: /tmp/test.txt
      dest: /tmp/test.txt
      mode: '0644'
    delegate_to: localhost
  
  - name: Copy the test file from managed nodes to the control node
    copy:
      src: /tmp/test.txt
      dest: /tmp/test.txt
      mode: '0644'
    delegate_to: "{{ inventory_hostname }}"
