
---
- name: Deploy Web Application
  hosts: webservers
  become: true

  vars:
    db_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      66336264653463393663383466653331313739323437646563616465323535646166386165323539
    auth_token: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      65653835356535646534636133353430396433353936386262646234616465646639666536316439
  
  tasks:
    - name: Install Nginx
      apt:
        name: nginx
        update_cache: yes

    - name: Deploy Web App
      copy:
        src: /path/to/web/app
        dest: /var/www/html/
      notify:
        restart nginx

  handlers:
    - name: restart nginx
      service:
        name: nginx
        state: restarted
