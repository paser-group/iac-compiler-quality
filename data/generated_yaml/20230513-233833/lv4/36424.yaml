
---
- name: Sync local file to remote nodes
  hosts: all
  gather_facts: false
  tasks:
    - name: Create temporary directory
      file:
        path: /tmp/test
        state: directory
      delegate_to: localhost

    - name: Synchronize local file with remote nodes
      synchronize:
        src: /path/to/local/file
        dest: /tmp/test/
      delegate_to: localhost
      run_once: true

    - name: Remove temporary directory
      file:
        path: /tmp/test
        state: absent
      delegate_to: localhost
