
- name: Check user facts
  hosts: all
  gather_facts: no
  tasks:
  - name: Print user facts
    debug:
      msg:
        - current user: "{{ ansible_user }}"
        - home directory: "{{ ansible_user_dir }}"
        - default shell: "{{ ansible_user_shell }}"
  - name: Print user facts with sudo
    become: yes
    become_method: sudo
    debug:
      msg:
        - current user with sudo: "{{ ansible_user }}"
        - home directory with sudo: "{{ ansible_user_dir }}"
        - default shell with sudo: "{{ ansible_user_shell }}"
  - name: Print user facts with su
    become: yes
    become_method: su
    debug:
      msg:
        - current user with su: "{{ ansible_user }}"
        - home directory with su: "{{ ansible_user_dir }}"
        - default shell with su: "{{ ansible_user_shell }}"
