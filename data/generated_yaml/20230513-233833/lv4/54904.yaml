
- hosts: bigip
  gather_facts: false
  vars:
    username: admin
    password: "{{lookup('env','F5_PASSWORD')}}"
    server_port: 443
  tasks:
    - name: Set the connection host and login credentials
      set_fact:
        remote_host: "{{inventory_hostname}}"
        validate_certs: no
      
    - name: Connect to the remote host
      bigip_device:
        provider:
          server: "{{ remote_host }}"
          user: "{{ username }}"
          password: "{{ password }}"
          server_port: "{{ server_port }}"
          validate_certs: "{{ validate_certs }}"
      delegate_to: localhost
      run_once: true
