
- name: Transfer file using copy module
  hosts: all
  tasks:
    - name: Copy file from node2 to node3
      copy:
        src: /home/test.txt
        dest: /home/test.txt
        checksum: "{{ 'abcdefg123456' }}"
      tags:
        - copy-file
    
    - name: Generate file using template module
      hosts: all
      tasks:
        - name: Create file from template
          template:
            src: /home/templates/httpd.conf
            dest: /etc/httpd.conf
          tags:
            - template-file

    - name: Verify checksum of transferred file 
      hosts: all
      tasks:
        - name: Checksum file
          stat:
            path: /home/test.txt
            checksum_algorithm: sha1
          register: checksum_value
      tags:
        - checksum-check
