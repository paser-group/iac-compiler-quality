
- name: Generating large number of groups
  hosts: localhost
  gather_facts: false
  
  vars:
    group_name_prefix: group
    group_name_range: "{{ range(1, 9001) | list }}"
    group_name_suffix: ""
    
  tasks:
    - name: Creating groups
      set_fact:
        group_name: "{{ group_name_prefix }}{{ item }}{{ group_name_suffix }}"
      with_items: "{{ group_name_range }}"
    - name: Adding hosts
      add_host:
        name: "{{ group_name }}"
        groups: "{{ group_name }}"
