
---
- name: Test Password Authentication
  hosts: all
  gather_facts: no
  tasks:
  - name: Attempt Password Authentication with Incorrect Password
    expect:
      echo: yes
      command: echo "test"
      responses:
        (?i)password: "wrong_password\n"
    register: incorrect_pass_result
  - name: Display Incorrect Password Result
    debug:
      var: incorrect_pass_result
  - name: Attempt Password Authentication with Correct Password
    expect:
      echo: yes
      command: echo "test"
      responses:
        (?i)password: "correct_password\n"
    register: correct_pass_result
  - name: Display Correct Password Result
    debug:
      var: correct_pass_result
