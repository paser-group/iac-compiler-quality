
- name: Test Docker volume label handling
  hosts: all
  tasks:
    - name: Set volume label variables
      set_fact:
        label_str: "my_label"
        label_list: ["my_label"]

    - name: Create volume with string label
      docker_volume:
        name: my_volume
        driver: local
        labels:
          - "{{ label_str }}"

    - name: Create volume with list label
      docker_volume:
        name: my_volume
        driver: local
        labels:
          - "{{ label_list }}"

    - name: Print output
      debug:
        var: ansible_play_batch | map('extract', hostvars, 'docker_volume_create') | list
