
---
- name: Discovering Bugs in Ansible Compiler
  hosts: all
  become: true
  vars:
    package_name: "nginx"
    package_state: "present"
  tasks:
    - name: Install Package
      pacman:
        name: "{{ package_name }}"
        state: "{{ package_state }}"
    - name: Confirm Package Installation
      command: "{{ ansible_pkg_mgr }} list {{ package_name }}"
      changed_when: false
    - name: Modify Package State
      set_fact:
        package_state: "absent"
    - name: Remove Package
      pacman:
        name: "{{ package_name }}"
        state: "{{ package_state }}"
