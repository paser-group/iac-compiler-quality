yaml
- name: Deploy Azure resources
  azure_rm_deployment:
    state: "{{state}}"
    template_link_uri: "{{templateLinkUri}}"
    parameters_link_uri: "{{parametersLinkUri}}"
    resource_group_name: "{{resourceGroupName}}"
    deployment_mode: "{{deploymentMode}}"
    tags: "{{tags}}"
    wait_for_deployment_completion: "{{waitForDeploymentCompletion}}"
  ignore_errors: true
  register: deployment_status

- name: Debug deployment status
  debug:
    var: deployment_status

- name: Confirm deployment_status contains error details
  fail:
    msg: "azure_rm_deployment does not expose full error details"
  when: "deployment_status.failed == true and deployment_status.stderr == None"
