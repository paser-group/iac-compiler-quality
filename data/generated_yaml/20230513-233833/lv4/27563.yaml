yaml
- hosts: ios_devices
  gather_facts: no
  connection: local
  tasks:
    - name: Gather IOS facts
      ios_facts:
        gather_subset:
          - hardware
          - config
          - interface
          - vlan
      register: ios_facts_output

    - name: Debug ios_facts
      debug:
        var: ios_facts_output
      when: ios_facts_output is defined

    - name: Check ios_facts
      fail:
        msg: "ios_facts is None or doesn't have the required attributes"
      when: ios_facts_output is not defined or ios_facts_output is None or ('hardware' not in ios_facts_output and 'config' not in ios_facts_output and 'interface' not in ios_facts_output and 'vlan' not in ios_facts_output)
