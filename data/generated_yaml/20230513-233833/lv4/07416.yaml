
---
- name: Check for uri module issues with HTTP status code 304
  hosts: all
  tasks:
    - name: Perform GET request with 304 status code
      uri:
        url: "{{ endpoint }}"
        method: GET
        status_code: 304
        return_content: yes
      register: result
    - fail:
        msg: "Uri module returned a 304 status code"
      when: result.status == 304
