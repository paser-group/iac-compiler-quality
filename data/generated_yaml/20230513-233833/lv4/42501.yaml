
- name: Create Minio client instance
  vars:
    minio_endpoint: "{{ minio_host }}:{{ minio_port }}"
  set_fact:
    minio_client: "{{ minio_client | default(omit) }}"
  when: minio_client is not defined
  run_once: true
  delegate_to: localhost
  environment:
    http_proxy: "{{ ansible_env.http_proxy }}"
    https_proxy: "{{ ansible_env.https_proxy }}"
  become: false
  minio_client:
    endpoint: "{{ minio_endpoint }}"
    access_key: "{{ minio_access_key }}"
    secret_key: "{{ minio_secret_key }}"
    secure: false
