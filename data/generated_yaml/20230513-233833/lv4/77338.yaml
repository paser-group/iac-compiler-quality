
---
- name: Test Ansible file module for 'absent' state and 'src' attribute
  hosts: all
  tasks:
  - name: Create file with the 'src' attribute and the state set to 'present'
    become: true
    file:
      src: "/home/user/source_file"
      dest: "/home/user/dest_file"
      state: present

  - name: Change the 'src' attribute to a non-existent file with the state set to 'absent'
    become: true
    file:
      src: "/home/user/non_existent_file"
      dest: "/home/user/dest_file"
      state: absent

  - name: Change the 'src' attribute back to the original file with the state set to 'present'
    become: true
    file:
      src: "/home/user/source_file"
      dest: "/home/user/dest_file"
      state: present
