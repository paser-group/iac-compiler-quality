
- name: Create SSH known_hosts file if it does not exist
  file:
    path: ~/.ssh
    state: directory

- name: Add host key to SSH known_hosts file
  known_hosts:
    name: "{{ inventory_hostname }}"
    state: present
    key: "{{ hostvars[inventory_hostname]['ansible_ssh_host_key_public'] }}"
