
- name: Test ec2_vpc_vgw_facts module
  hosts: localhost
  connection: local

  vars:
    region: "us-east-1"

  tasks:
  - name: List attributes for VPN Gateway with tags
    ec2_vpc_vgw_facts:
      region: "{{ region }}"
      filters:
        "tag:Name": "My VPN Gateway"
    register: vgw_with_tags

  - name: Debug VPN Gateway attributes with tags
    debug:
      var: vgw_with_tags

  - name: List attributes for VPN Gateway without tags
    ec2_vpc_vgw_facts:
      region: "{{ region }}"
      filters:
        "vpc-id": "vpc-123456"
    register: vgw_without_tags

  - name: Debug VPN Gateway attributes without tags
    debug:
      var: vgw_without_tags
