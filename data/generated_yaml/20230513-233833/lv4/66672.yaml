
---
- name: Gather information from NetApp device
  hosts: netapp
  gather_facts: no
  vars:
    target_device: "{{ hostvars[inventory_hostname]['na_target_device'] }}"
  tasks:
    - name: Acquire na_ontap_info module
      include_module:
        name: na_ontap_info

    - name: Retrieve NetApp configuration information
      na_ontap_info:
        hostname: "{{ target_device }}"
        username: "{{ na_username }}"
        password: "{{ na_password }}"
      register: netapp_info

    - debug:
        var: netapp_info
