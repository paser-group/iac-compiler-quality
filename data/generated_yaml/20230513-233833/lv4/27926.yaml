
---
- name: Check nxos_vxlan_vtep_vni module
  hosts: all
  gather_facts: false
  tasks:
    - name: Add nxos_vxlan_vtep_vni module
      nxos_vxlan_vtep_vni:
        vni: 100
        vtep_ip: 10.0.0.1
        fabric_vnid: 200
        state: present
      register: add_output

    - name: Display add_output
      debug:
        msg: "{{ add_output }}"

    - name: Update nxos_vxlan_vtep_vni module
      nxos_vxlan_vtep_vni:
        vni: 101
        vtep_ip: 10.0.0.2
        fabric_vnid: 201
        state: present
      register: update_output

    - name: Display update_output
      debug:
        msg: "{{ update_output }}"

    - name: Remove idempotence of nxos_vxlan_vtep_vni module
      nxos_vxlan_vtep_vni:
        vni: 100
        vtep_ip: 10.0.0.1
        fabric_vnid: 200
        state: present
      register: remove_output

    - name: Display remove_output
      debug:
        msg: "{{ remove_output }}"
