
- name: String manipulation Playbook
  hosts: all
  tasks:
    - name: Set fact with invalid string index
      set_fact: my_var="hello world"
                index="{{ my_var[50] }}"
      ignore_errors: yes
      when: "'hello world'.length < 50"

    - name: Replace with invalid string index
      replace:
        path: /tmp/file.txt
        regexp: 'invalid_index.*'
        replace: '{{ my_var[50:] }}'

    - name: Regex replace with invalid string index
      regex_replace:
        path: /tmp/file.txt
        regexp: '(invalid_index.*)'
        replace: '{{ my_var[50:] }}'
