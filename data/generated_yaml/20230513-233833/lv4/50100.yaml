
---
- name: Parsing Ansible inventory file
  hosts: all
  gather_facts: no

  tasks:
    - name: Include inventory file
      include_vars:
        file: inventory

    - name: Debug Error Message
      debug:
        var: ansible_host
      failed_when: "'non-parsable' in ansible_host"

    - name: Fail if Error
      fail:
        msg: "Failed due to Non-Parsable Error"
      when: "'non-parsable' in ansible_host"
