
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Display ANSIBLE_ROLES_PATH
      debug:
        msg: ANSIBLE_ROLES_PATH = {{ lookup('env', 'ANSIBLE_ROLES_PATH') }}

    - name: Create new directory for custom roles
      file:
        path: /tmp/custom_roles
        state: directory

    - name: Copy custom role files to new directory
      copy:
        src: roles/*
        dest: /tmp/custom_roles

    - name: Execute tasks from custom directory
      debug:
        msg: Ran task from custom directory
      delegate_to: localhost
      run_once: yes
