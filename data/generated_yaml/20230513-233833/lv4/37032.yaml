
---
- name: Infoblox nios argument ipv4addrs error
  hosts: all
  become: true
  tasks:
    - name: Execute infoblox_nios_host module with correct syntax
      infoblox_nios_host:
        hostname: "{{ inventory_hostname }}"
        username: "{{ infoblox_username }}"
        password: "{{ infoblox_password }}"
        dns_view: "{{ dns_view }}"
        ipv4addrs: "{{ ipv4addrs }}"
      register: result
      when: "'"{{ ipv4addrs }}"' != ''"
  
    - name: Test various inputs of ipv4addrs argument
      infoblox_nios_host:
        hostname: "{{ inventory_hostname }}"
        username: "{{ infoblox_username }}"
        password: "{{ infoblox_password }}"
        dns_view: "{{ dns_view }}"
        ipv4addrs: "{{ item }}"
      with_items:
        - ""
        - "10.0.0.1"
        - "10.0.0.1, 10.0.0.2"
        - "{{ ipv4addrs }}"
      register: result
      when: "'"{{ ipv4addrs }}"' != ''"

