
---
- hosts: all
  vars:
    ansible_user: <username>
    ansible_ssh_pass: <password>
    remote_user: "{{ vars[0] }}"
    inventory: "{{ vars[1] }}"
    ansible_host: "{{ vars[2] }}"
    connection: "{{ vars[3] }}"
    become: "{{ vars[4] }}"
    sudo_user: "{{ vars[5] }}"
    ansible_become_user: "{{ vars[6] }}"
    ansible_become_method: "{{ vars[7] }}"
    ansible_ssh_private_key_file: "{{ vars[8] }}"
  tasks:
  - name: Create folder based on variable value
    shell: mkdir /{{ item }}-test
    with_items:
      - "{{ remote_user }}"
      - "{{ inventory }}"
      - "{{ ansible_host }}"
      - "{{ connection }}"
      - "{{ become }}"
      - "{{ sudo_user }}"
      - "{{ ansible_become_user }}"
      - "{{ ansible_become_method }}"
      - "{{ ansible_ssh_private_key_file }}"
  - name: Check if folder exists on correct path
    file:
      path: "/{{ item }}-test"
      state: directory
    with_items:
      - "{{ remote_user }}"
      - "{{ inventory }}"
      - "{{ ansible_host }}"
      - "{{ connection }}"
      - "{{ become }}"
      - "{{ sudo_user }}"
      - "{{ ansible_become_user }}"
      - "{{ ansible_become_method }}"
      - "{{ ansible_ssh_private_key_file }}"
