
---
- name: Test include_role with with_items
  hosts: all
  become_user: root
  
  vars:
    my_roles:
      - "role1"
      - "role2"
      - "role3"
  
  tasks:
    - name: Test include_role with a list of roles
      include_role:
        name: "{{ item }}"
      with_items: "{{ my_roles }}"
    
    - name: Test include_role with a dict of roles
      include_role:
        name: "{{ item.role }}"
        vars: "{{ item.vars }}"
      with_items:
        - { role: "role1", vars: {var1: value1} }
        - { role: "role2", vars: {var2: value2} }
    
    - name: Test include_role with an empty list
      include_role:
        name: "role1"
      with_items: []
