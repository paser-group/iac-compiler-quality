
---
- name: Test azure_rm module
  hosts: localhost
  tasks:
    - name: Create VM
      azure_rm_virtualmachine:
        name: myVM
        resource_group: myResourceGroup
        location: eastus
        vm_size: Standard_B1s
        admin_username: myadmin
        admin_password: mypassword
        image:
          offer: UbuntuServer
          publisher: Canonical
          sku: '20.04-LTS'
          version: latest
        network_interface_names: myNIC
        os_disk_name: myOsDisk
        os_disk_create_option: fromImage

    - name: Start VM
      azure_rm_virtualmachine:
        name: myVM
        resource_group: myResourceGroup
        operation: start

    - name: Stop VM
      azure_rm_virtualmachine:
        name: myVM
        resource_group: myResourceGroup
        operation: deallocate

    - name: Modify VM
      azure_rm_virtualmachine:
        name: myVM
        resource_group: myResourceGroup
        vm_size: Standard_B2s
