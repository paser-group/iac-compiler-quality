
---
- name: Test playbook for gcp_compute_instance module
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create an instance with invalid network name
      gcp_compute_instance:
        name: test-instance
        machine_type: n1-standard-1
        disks:
          - auto_delete: true
            boot: yes
            initialize_params:
              source_image_family: ubuntu-1804-lts
              disk_size_gb: 20
        metadata:
          foo: bar
        network_interfaces:
          - network: invalid-network-name
            access_configs:
            - name: "External NAT"
              type: "ONE_TO_ONE_NAT"    
