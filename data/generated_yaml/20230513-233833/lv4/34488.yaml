
---
- name: Test Ansible MySQL DB module with --defaults-extra-file option 
  hosts: node1
  become: yes
  vars:
    mysql_db_name: test_db
    mysql_user: test_user
    mysql_password: test_password
  tasks:
    - name: Create sample MySQL database using the mysql_db module
      mysql_db:
        name: "{{ mysql_db_name }}"
        state: present
        login_user: "{{ mysql_user }}"
        login_password: "{{ mysql_password }}"
        login_host: localhost
        login_port: 3306
        # Use the --defaults-extra-file option to pass MySQL credentials
        login_unix_socket: /var/run/mysqld/mysqld.sock
        extra_opts: --defaults-extra-file=/path/to/file
