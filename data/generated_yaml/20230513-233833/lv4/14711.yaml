
- name: Test ec2.py script with ElastiCache
  hosts: localhost
  gather_facts: False
  tasks:
    - include_vars:
        file: inventory/aws_ec2_elasticache.yml
  
    - name: Test EC2 dynamic inventory
      ec2_instance_facts:
        region: "{{ aws_region }}"
        filters: "{{ ec2_instance_filters }}"
      register: ec2_facts
  
    - debug:
        var: ec2_facts

    - name: Test ElastiCache dynamic inventory
      elastigroup_cache_facts:
        region: "{{ aws_region }}"
        cache_cluster_ids: "{{ cache_cluster_ids }}"
      register: cache_facts

    - debug:
        var: cache_facts
