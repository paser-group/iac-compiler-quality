yaml
---
- name: Test jenkins_plugin module with Python3
  hosts: node1
  become: true
  tasks:
    # Install jenkins_plugin module with pip
    - name: Install jenkins_plugin module
      pip:
        name: jenkins_plugin
        executable: /usr/bin/python3
  
    # Start Jenkins service
    - name: Start Jenkins service
      service:
        name: jenkins
        state: started

    # Stop Jenkins service
    - name: Stop Jenkins service
      service:
        name: jenkins
        state: stopped

    # Restart Jenkins service
    - name: Restart Jenkins service
      service:
        name: jenkins
        state: restarted

    # Check Jenkins service status
    - name: Check Jenkins service status
      uri:
        url: http://localhost:8080
        method: GET
        status_code: 200

