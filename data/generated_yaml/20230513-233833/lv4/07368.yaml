
- name: Test ec2_vpc module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Retrieve instance information
      ec2_instance_info:
        region: "{{ region }}"
        filters:
          instance-state-name: running
          "tag:Name": "{{ instance_name }}"
      register: instance_info
    
    - name: Verify route table configuration
      ec2_vpc_route_table_facts:
        region: "{{ region }}"
        filters:
          "tag:Name": "{{ route_table_name }}"
      register: route_table_info

    - name: Debug instance and route table information
      debug:
        msg: "{{ item }}"
      loop:
        - "{{ instance_info }}"
        - "{{ route_table_info }}"
 