
- name: Wait for connection to the node
  wait_for_connection:
    delay: 5
    timeout: 300
    retries: 60

- name: Establish a secure SSH connection
  ssh_keyscan:
    name: "{{ inventory_hostname }}"
    state: present

- name: Ensure the SSH config file is present
  copy:
    dest: "/root/.ssh/config"
    content: |
      Host *
      StrictHostKeyChecking no
      UserKnownHostsFile=/dev/null
