
---
- name: Set file/directory permissions using win_acl
  hosts: windows
  gather_facts: false
  vars:
    file_path: "C:\\path\\to\\file\\or\\directory"
    user: "DOMAIN\\User"
    rights: "read"
  tasks:
    - name: set file/directory permission
      win_acl:
        path: "{{ file_path }}"
        user: "{{ user }}"
        rights: "{{ rights }}"
      register: win_acl_results
    - debug:
        msg: "ACL Setting Success: {{ win_acl_results.success }}  ACL Setting Changed: {{ win_acl_results.changed }}"
