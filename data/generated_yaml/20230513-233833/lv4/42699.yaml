
- name: Test dynamic variables with with_items
  hosts: all
  gather_facts: no
  vars:
    dynamic_var1: "{{ ansible_os_family }}"
    dynamic_var2: "{{ ansible_distribution }}"
    dynamic_var3: "{{ ansible_distribution_version }}"
    dynamic_vars:
      - "{{ dynamic_var1 }}"
      - "{{ dynamic_var2 }}"
      - "{{ dynamic_var3 }}"
  tasks:
  - name: Perform action with dynamic variables
    shell: echo "{{ item }}"
    with_items: "{{ dynamic_vars }}"
