
- name: Test Route53 Boto
  hosts: all
  gather_facts: true
  tasks:
    - name: Configure AWS credentials
      aws_config:
        role_arn: "IAM Role ARN"
        source_profile: "AWS Config Profile"
        region: "AWS Region"
    - name: Query Route53 using Boto
      route53:
        private_zone: true
        zone: "example.com"
        query: "A"
        state: present
      register: domain_records
    - name: Test if zone exists and has A records
      assert:
        that:
          - "'successful' in domain_records['msg']"
          - "domain_records['resource_record_sets'] | length > 0 "
