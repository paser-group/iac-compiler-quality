
- hosts: all
  vars:
    myapps:
      - app1
      - app2
  tasks:
    - name: Failure task
      block:
        - name: Loop through apps
          debug:
            msg: "Processing app {{ item }}"
          loop: "{{ myapps }}"
          fail:
            msg: "Failed to process app {{ item }}"
      rescue:
        - name: Handle failure
          debug:
            msg: "An error occurred. This can be customised appropriately."

