
- name: Test playbook for bad symbolic permission errors
  hosts: all
  become: true

  tasks:
  - name: Create directory with incorrect mode
    file:
      path: /tmp/test_directory
      state: directory
      mode: '2766'

  - name: Create directory with incorrect symbolic permission
    file:
      path: /tmp/test_directory2
      state: directory
      symbolic_mode: '+x'

  - name: Check if directories have correct permissions
    stat:
      path: /tmp/test_directory
    register: dir1_status

  - name: Check if directories have correct symbolic permissions
    stat:
      path: /tmp/test_directory2
    register: dir2_status
