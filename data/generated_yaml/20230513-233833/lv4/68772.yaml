
---
- name: Test osx_defaults integer type check
  hosts: all
  become: true
  tasks:

  - name: Install macdefaults package
    apt:
      name: macdefaults
      state: present

  - name: Test osx_defaults integer type check
    osx_defaults:
      domain: '/Library/Preferences/SystemConfiguration/com.apple.smb.server'
      key: 'SMBEnabled'
      value: 1
      write_type: integer

  - name: Test osx_defaults integer type check with invalid value
    osx_defaults:
      domain: '/Library/Preferences/SystemConfiguration/com.apple.smb.server'
      key: 'SMBEnabled'
      value: 'invalid_value'
      write_type: integer
    ignore_errors: true
