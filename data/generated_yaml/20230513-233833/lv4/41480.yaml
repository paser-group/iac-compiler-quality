
---
- name: Test playbook for permission issues
  hosts: all
  become: true
  
  tasks:
  - name: Try accessing root owned file
    command: cat /etc/shadow
    register: result
    ignore_errors: true
  
  - name: Show result if failed
    debug: var=result
    when: result.failed == true
  
  - name: Try creating a directory under root
    file:
      path: /root/test_dir
      state: directory
    register: result
    ignore_errors: true
  
  - name: Show result if failed
    debug: var=result
    when: result.failed == true
  
  - name: Try running a command with sudo
    command: sudo ls
    register: result
    ignore_errors: true
  
  - name: Show result if failed
    debug: var=result
    when: result.failed == true
