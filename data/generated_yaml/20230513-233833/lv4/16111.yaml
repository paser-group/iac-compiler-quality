
---
- name: Check file permission of ec2.ini and ec2.py
  hosts: all
  become: true
  tasks:
    - name: Ensure proper file permissions of ec2.ini
      file:
        path: /path/to/ec2.ini
        mode: '0644'
        state: file
        owner: user
        group: group
      register: result_ec2_ini

    - name: Ensure proper file permissions of ec2.py
      file:
        path: /path/to/ec2.py
        mode: '0755'
        state: file
        owner: user
        group: group
      register: result_ec2_py

- name: Add error feedback mechanisms
  hosts: all
  become: true
  tasks:
    - name: Print error message if file permissions are incorrect for ec2.ini
      debug:
        msg: "Incorrect file permissions for ec2.ini"
      when: result_ec2_ini.mode != '0644'

    - name: Print error message if file permissions are incorrect for ec2.py
      debug:
        msg: "Incorrect file permissions for ec2.py"
      when: result_ec2_py.mode != '0755'
