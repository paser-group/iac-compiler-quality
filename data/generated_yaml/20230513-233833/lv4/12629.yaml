
- name: Test for full file system
  hosts: all
  tasks:
    - name: Fill up the file system
      shell: "dd if=/dev/zero of=/tmp/fillup bs=1M count=6000"
    - name: Attempt to create a file or run a command
      command: touch /tmp/testfile
      register: result
      ignore_errors: yes
    - name: Print informative error message
      debug:
        msg: "Failed to create file due to full file system"
      when: result.rc != 0
