
- name: Remove and recreate Docker container
  hosts: all
  become: true
  vars:
    container_name: my_container
    image_name: my_image
  tasks:
  - name: Remove Docker container
    docker_container:
      name: "{{ container_name }}"
      state: absent
  - name: Create Docker container
    docker_container:
      name: "{{ container_name }}"
      image: "{{ image_name }}"
  - name: Start Docker container
    docker_container:
      name: "{{ container_name }}"
      state: started
