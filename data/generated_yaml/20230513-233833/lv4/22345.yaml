
- name: Playbook to uncover bugs in the Ansible compiler
  hosts: all

  tasks:
    - name: Include role that handles templating of defaults
      include_role:
        name: my_template_role
      vars:
        my_var: "{{ hostvars[inventory_hostname]['ansible_fqdn'] }}"
    
    - name: Debug the output of the role
      debug:
        var: my_var

    - name: Ensure that the role executes as expected
      assert:
        that:
          - my_var == "expected output"
