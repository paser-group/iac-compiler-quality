
- name: Test include_role error handling
  hosts: all
  tasks:
  - name: Include non-existent role
    include_role:
      name: non_existent_role
    ignore_errors: true
    register: error_output

  - name: Check error message for role name
    assert:
      that:
        - "'non_existent_role' in error_output.msg"
      success_msg: "The error message contains the name of the missing role."
      fail_msg: "The error message does not contain the name of the missing role."
