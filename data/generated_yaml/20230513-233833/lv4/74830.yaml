
- name: Test the use of become directive with invalid mode
  hosts: all
  become: true
  gather_facts: no 
  tasks:
    - name: Check current user
      debug:
        msg: "Current user is {{ ansible_user }}"
    - name: Test the use of become directive with invalid mode
      shell: ls
      become: +a
      register: result
    - name: Print stdout
      debug:
        msg: "{{ result.stdout }}"
      when: result.stdout is defined
    - name: Assert the use of become directive with invalid mode
      assert:
        that: result.stdout is undefined
