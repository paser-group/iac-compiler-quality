
---
- name: Test k8s_raw module behavior with Ansible compiler
  hosts: all
  become: yes
  vars_files:
    - vars.yml
  tasks:
  - name: Execute k8s_raw module at the beginning of the task
    k8s_raw:
      state: present
      name: example
    register: k8s_raw_output_b1

  - name: Execute k8s_raw module at the end of the task
    register: k8s_raw_output_e1
    k8s_raw:
      state: present
      name: example

  - name: Execute k8s_raw module within the task
    register: k8s_raw_output_m1
    block:
      - k8s_raw:
          state: present
          name: example
