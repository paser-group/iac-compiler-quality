
- hosts: all
  become: true
  tasks:
    - name: Check if directory exists
      stat:
        path: /tmp/test_dir
      register: dir_stat

    - name: Create directory if it doesn't exist
      command: mkdir /tmp/test_dir
      when: not dir_stat.stat.exists
