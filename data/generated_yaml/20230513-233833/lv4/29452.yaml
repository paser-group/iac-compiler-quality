
---
- hosts: all
  become: true

  tasks:
    - name: Update Ansible package
      apt:
        name: ansible
        state: latest

    - name: Restart Ansible Service
      service:
        name: ansible
        state: restarted

    - name: Define the inventory group and set it as the target
      group_by:
        key: group1

    - name: Group the target group by a variable
      group_by:
        key: "{{ item.var }}"
      with_items:
        - { var: "var1" }
        - { var: "var2" }
