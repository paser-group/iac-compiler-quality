
---
- name: Start or Stop a Windows service
  hosts: windows-host
  vars:
    service_name: <name of service>
    state: <state of service, either started or stopped>
  tasks:
    - name: Check if service is started or stopped
      win_service:
        name: "{{ service_name }}"
        state: query
      register: service_status
    - name: Stop or Start Windows Service based on status
      win_service:
        name: "{{ service_name }}"
        state: "{{ state }}"
      when: service_status.status != state
