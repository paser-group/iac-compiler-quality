yaml
---
- hosts: all
  tasks:
  - name: Set Ansible cmdline
    set_fact:
      ansible_cmdline: "ansible-playbook playbook.yml"
  - name: Verify rd.lvm.lv
    debug:
      var: ansible_cmdline
  - name: Verify incorrect value returned for rd.lvm.lv
    fail:
      msg: "Incorrect value returned for rd.lvm.lv"
    when: ansible_cmdline == "ansible-playbook playbook.yml" and ("rd.lvm.lv" not in ansible_local.boot.rd)
