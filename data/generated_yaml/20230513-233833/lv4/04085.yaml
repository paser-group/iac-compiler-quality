
- name: Create new DNS entry in Route53
  hosts: all
  become: yes
  vars:
    aws_access_key: "<insert_access_key_here>"
    aws_secret_key: "<insert_secret_key_here>"
    zone_id: "<insert_zone_id_here>"
    record_set_name: "test.example.com"
    record_set_type: "A"
    record_set_ttl: 300
    record_set_value: "192.0.2.1"
  tasks:
    - name: Create DNS entry
      route53:
        command: create
        zone: "{{ zone_id }}"
        record_set:
          name: "{{ record_set_name }}"
          type: "{{ record_set_type }}"
          ttl: "{{ record_set_ttl }}"
          resource_records:
            - "{{ record_set_value }}"
      register: route53_output
    - debug:
        var: route53_output
