
---
- name: Debug bug in nested block with conditions
  hosts: all
  become: true
  vars:
    condition_1: true
    condition_2: false

  tasks:
    - name: Some task
      debug:
        msg: "This is a task"

    - name: Nested block with conditions
      block:
      - name: Debug conditional block 1
        debug:
          msg: "Condition 1 is true"
        when: condition_1 == true

      - name: Debug conditional block 2
        debug:
          msg: "Condition 2 is true"
        when: condition_2 == true

      - name: Debug nested block
        block:
        - name: Debug nested block task 1
          debug:
            msg: "Task 1 in nested block"
        - name: Debug nested block task 2
          debug:
            msg: "Task 2 in nested block"
        when: condition_1 == true

      when: condition_1 == true or condition_2 == true
