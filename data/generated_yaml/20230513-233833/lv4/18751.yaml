yaml
---
- hosts: all
  gather_facts: true
  tasks:
    - name: Test fact_caching configurations
      set_fact:
        my_fact: "test value"
      register: my_fact_cache
      environment:
        FACT_CACHING_METHOD: "{{ item }}"
      with_items:
        - yaml
        - redis
        - memory
        - jsonfile
        - memory_cached
    - name: Print fact caching result
      debug:
        var: my_fact_cache
