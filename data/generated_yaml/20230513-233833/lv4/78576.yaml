
- name: Test for undefined variable error with empty list
  hosts: all
  gather_facts: no
  tasks:
    - name: Set undefined variable to empty list
      set_fact:
        my_list: []

    - name: Loop over empty list
      debug:
        var: item
      loop: "{{ my_list }}"
