
---
- name: Check for errors in nxos_vxlan_vtep_vni with nxapi transport
  hosts: all
  gather_facts: no

  vars:
    vrf: "management"
    vtep_ip: "10.1.1.10"
    vni: "2001"
    vlan_id: "10"

  tasks:
    - name: create vxlan vtep vni
      nxos_vxlan_vtep_vni:
        vrf: "{{ vrf }}"
        vtep_ip: "{{ vtep_ip }}"
        vni: "{{ vni }}"
        vlan_id: "{{ vlan_id }}"
        state: present
      transport: nxapi
      register: result

    - name: Log errors
      debug:
        var: result
