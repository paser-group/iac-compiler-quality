
---
- name: Test Ansible Compiler for Bugs
  hosts: all
  become: true
  
  vars:
    items:
      - item1
      - item2
      - item3

  tasks:
    - name: Perform task if item1 is selected
      command: echo "Task performed for item1"
      when: item == "item1"

    - name: Perform task if item2 is selected
      command: echo "Task performed for item2"
      when: item == "item2"

    - name: Perform inner task for each item
      shell: |
        echo "{{ item }}"
      with_items:
        - "{{ items }}"
      when: item != "item1" and item != "item2"
