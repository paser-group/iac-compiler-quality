
---
- hosts: all
  gather_facts: true

  tasks:
    - name: Ensure the ipv6 address is set.
      nxos_ip_interface:
        ipv6: "{{ ipv6_address }}/{{ ipv6_prefix }}"
        state: present
      register: ipv6_response

    - name: debug response of ipv6 address
      debug:
        var: ipv6_response

    - name: assert the ipv6 address response
      assert:
        that: 
          - ipv6_response.changed
          - ipv6_response.affected_interface.ipv6 == ipv6_address
          - ipv6_response.affected_interface.ipv6_prefix_length == ipv6_prefix
