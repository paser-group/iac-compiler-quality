
---
- name: debug ec2 module output
  hosts: localhost
  gather_facts: no

  vars:
    instance_list:
      - instance_id: i-0123456789abcdef0
        vpc_id: vpc-01234567890abcdef
        subnet_id: subnet-01234567890abcdef

  tasks:
    - name: run ec2 module and save the output
      ec2:
        instance_ids: "{{ item.instance_id }}"
        vpc_id: "{{ item.vpc_id }}"
        subnet_id: "{{ item.subnet_id }}"
      with_items: "{{ instance_list }}"
      register: ec2_output

    - name: debug ec2 module output
      debug:
        var: ec2_output
