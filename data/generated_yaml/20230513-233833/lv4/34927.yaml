
---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Test GCE inventory script
      gce:
        auth_kind: serviceaccount
        project_id: <project_id>
        service_account_file: /path/to/service/file.json
        zone: us-central1-a
        image_project: debian-cloud
        instance_filters:
          - name: example-instance-name
        register: gce_instance

    - name: Print the IP address of GCE instance
      debug:
        var: gce_instance.instance[0].external_ip
