
- name: Install apt_repository
  hosts: all
  become: true
  tasks:
    - name: Add apt repository
      apt_repository:
        repo: "{{ item.repo }}"
        update_cache: yes
      with_items:
        - { repo: "deb http://archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }} main restricted universe multiverse" }
        - { repo: "deb http://archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }}-updates main restricted universe multiverse" }
        - { repo: "deb http://archive.canonical.com/ubuntu/ {{ ansible_distribution_release }} partner" }
    - name: Remove apt repository
      apt_repository:
        repo: "{{ item.repo }}"
        state: absent
      with_items:
        - { repo: "deb http://archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }} main restricted universe multiverse" }
        - { repo: "deb http://archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }}-updates main restricted universe multiverse" }
        - { repo: "deb http://archive.canonical.com/ubuntu/ {{ ansible_distribution_release }} partner" }
