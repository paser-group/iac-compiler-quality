
---
- name: Test shell module for incorrect error code returns
  hosts: all
  become: yes
  tasks:
    - name: Execute invalid shell command
      shell: 'this_command_does_not_exist'
      register: shell_output
      ignore_errors: yes

    - name: Print the error code
      debug:
        var: shell_output.rc
