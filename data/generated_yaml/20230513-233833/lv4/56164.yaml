
---
- name: Update RabbitMQ user password
  hosts: all
  become: true

  vars:
    rabbitmq_user: john.doe
    rabbitmq_password: johnsNewPassword

  tasks:
    - name: Update user password
      rabbitmq_user:
        user: "{{rabbitmq_user}}"
        password: "{{rabbitmq_password}}"
        update_password: true
      when: rabbitmq_password is defined
