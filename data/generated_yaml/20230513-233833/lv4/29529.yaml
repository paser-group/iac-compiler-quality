
---
- name: Test dellos9_command module for bugs
  hosts: switches
  gather_facts: no

  vars:
    commands:
      - "reload"
      - "reload in 5"
      - "reload force"
      - "reload at 05:30"

  tasks:
    - name: Issue reload command
      dellos9_command:
        commands:
          - "{{ item }}"
      register: output
      with_items: "{{ commands }}"

    - name: Debug Output
      debug:
        var: output

    - name: Confirm device is online
      wait_for:
        host: "{{ inventory_hostname }}"
        port: 22
        delay: 3
        timeout: 300
        state: started
