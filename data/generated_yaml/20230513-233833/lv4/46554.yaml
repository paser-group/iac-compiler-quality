
- name: Test SSH connectivity using raw module
  hosts: all
  gather_facts: no
  tasks:
  - name: Execute SSH command using raw module
    raw: ssh -o ConnectTimeout=5 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /path/to/key.pem {{ inventory_hostname }} "sudo ls /"
    register: command_output
    failed_when: command_output.rc != 0
