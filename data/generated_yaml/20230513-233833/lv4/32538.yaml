
---
- name: Install IIS Server on Windows
  hosts: windows
  gather_facts: false
  vars:
    ansible_user: "{{remote_user}}"
    ansible_password: "{{remote_user_password}}"
    ansible_connection: winrm
    ansible_port: 5986
    ansible_winrm_transport: ntlm
    ansible_winrm_server_cert_validation: ignore
  tasks:
  - name: Install IIS Windows feature
    win_feature:
      name: Web-Server
      state: present
  - name: Install IIS Management Console
    win_feature:
      name: Web-Mgmt-Console
      state: present
  vars_files:
    - config.yml
