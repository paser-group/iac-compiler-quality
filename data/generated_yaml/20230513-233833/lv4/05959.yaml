
---
- name: Test nova_keypair bug
  hosts: all
  tasks:
   - name: Create new key pair
     os_keypair:
       name: test_keypair 
       state: present
       public_key: <path-to-public-key>
     register: keypair 

   - name: Verify key pair creation
     assert:
       that:
         - keypair|success
    
   - name: Delete the created key pair
     os_keypair:
       name: test_keypair 
       state: absent 
