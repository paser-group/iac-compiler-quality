
- name: Check if inventory file is present
  stat:
    path: /path/to/inventory.yml
  register: stat_inventory

- name: Parse inventory file
  yaml:
    path: /path/to/inventory.yml
  register: parsed_inventory
  failed_when: "'ERROR' in parsed_inventory.stderr"
