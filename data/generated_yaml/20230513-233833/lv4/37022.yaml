
- hosts: nexus-5k
  connection: network_cli
  gather_facts: no
  vars:
    fex_id: 101
    fex_description: "FEX101"
    ...
  tasks:
    - name: configure FEX on Nexus 5K
      nxos_config:
        commands:
          - "fex {{ fex_id }}"
          - "description {{ fex_description }}"
          ...
        authorize: yes
      register: config_result
    - name: debug if configuration was applied successfully
      debug:
        msg: "Configuration applied successfully"
      when: config_result.changed
