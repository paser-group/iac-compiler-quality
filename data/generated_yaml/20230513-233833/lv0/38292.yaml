csharp
var uri = new Uri("https://example.com/api/resource");
var client = new HttpClient();
var credentials = new NetworkCredential("username", "password");
var handler = new HttpClientHandler
{
    Credentials = credentials,
    PreAuthenticate = true,
    UseDefaultCredentials = false,
    AllowAutoRedirect = false
};
client.Timeout = TimeSpan.FromSeconds(30);
client.BaseAddress = uri;
client.DefaultRequestHeaders.Accept.Clear();
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(Encoding.ASCII.GetBytes($"{credentials.UserName}:{credentials.Password}")));
client.Content = new StringContent(JsonConvert.SerializeObject(payload), Encoding.UTF8, "application/json");

var response = await client.PostAsync(uri, client.Content);
