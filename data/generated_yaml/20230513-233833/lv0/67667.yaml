
- name: Set ownership of /tmp/.ansible
  hosts: all
  become: yes
  vars:
    ansible_tmpdir_owner: "{{ ansible_user }}"
    ansible_tmpdir_group: "{{ ansible_user }}"
  tasks:
    - name: Create /tmp/.ansible directory if it doesn't exist
      file:
        path: /tmp/.ansible
        state: directory
        owner: "{{ ansible_tmpdir_owner }}"
        group: "{{ ansible_tmpdir_group }}"
        mode: u+rwx,g+rwx,o+rx
  
    - name: Set ownership of /tmp/.ansible to specified user and group
      file:
        path: /tmp/.ansible
        owner: "{{ ansible_tmpdir_owner }}"
        group: "{{ ansible_tmpdir_group }}"
        recurse: yes
