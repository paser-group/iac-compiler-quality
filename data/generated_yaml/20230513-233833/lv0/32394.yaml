
- name: Example playbook without gather facts
  hosts: target_server
  tasks:
    - name: Try to connect to a database
      postgresql_query:
        query: "SELECT * FROM my_table"
      register: db_result
      ignore_errors: yes

    - name: Handle database connection errors
      debug:
        msg: "Error connecting to database"
      when: db_result is failed

    - name: Clear previous host errors
      meta:
        clear_host_errors: yes
