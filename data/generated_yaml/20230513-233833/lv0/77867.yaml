
- name: Include role on specific hosts based on condition
  hosts: all
  tasks:
    - include_role:
        name: my_role
      when: inventory_hostname.startswith('web')

- name: Include role on hosts listed in loop
  hosts: all
  vars:
    my_hosts:
      - webserver1.example.com
      - webserver2.example.com
  tasks:
    - include_role:
        name: my_role
      loop: "{{ my_hosts }}"
      when: inventory_hostname in item
