
- name: Read file with ISO 8859-15 encoding
  slurp:
    src: /path/to/file.txt
  register: file_contents

- name: Decode file contents
  set_fact:
    decoded_contents: "{{ file_contents['content'] | b64decode | decode('iso-8859-15') }}"

- name: Diff decoded contents
  command: diff <(echo "{{ decoded_contents }}") <(echo "{{ other_contents }}")
