
import requests
import json

# set up the request parameters
url = "http://<NEXUS_IP_ADDRESS>/ins"
username = "<USERNAME>"
password = "<PASSWORD>"

# set up the payload for the configuration
payload = {
    "jsonrpc": "2.0",
    "method": "cli",
    "params": {
        "cmd": "configure terminal ; interface vxlan1 ; vxlan vtep <VTEP_IP_ADDRESS> vni <VNI> ; exit ; exit",
        "version": 1
    },
    "id": 1
}

# send the request
response = requests.post(url, data=json.dumps(payload), headers={"content-type": "application/json-rpc"}, auth=(username, password))

# check for errors in the response
if response.status_code != 200:
    print("ERROR: Request failed with status code {}".format(response.status_code))
elif "error" in response.text:
    print("ERROR: {}".format(response.text))
else:
    print("VXLAN VTEP VNI configuration successful")
