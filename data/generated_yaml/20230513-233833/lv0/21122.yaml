python
from google.oauth2 import service_account
from google.cloud import compute_v1

credentials = service_account.Credentials.from_service_account_file('path/to/credentials.json')

# create an instance with a specific service account
compute_client = compute_v1.InstancesClient(credentials=credentials)
instance_config = {
    'name': 'my-instance',
    'machine_type': 'n1-standard-1',
    'service_accounts': [
        {
            'email': 'my-service-account@my-project.iam.gserviceaccount.com',
            'scopes': [
                'https://www.googleapis.com/auth/cloud-platform'
            ]
        }
    ]
}
instance = compute_client.insert(project='my-project', zone='us-central1-a', body=instance_config)
