yaml
- name: Gather Custom Facts for Windows Targets
  hosts: windows_hosts
  gather_facts: no
  tasks:
    - name: Gather Custom Facts
      win_shell: |
        @{'<key1>'='<value1>'}
        @{'<key2>'='<value2>'}
        Write-Output ("ansible_facts={0}" -f (ConvertTo-Json @{ '<key1>'='<value1>'; '<key2>'='<value2>' }))
      register: custom_facts

    - name: Debug Custom Facts
      debug:
        var: custom_facts.stdout_lines
