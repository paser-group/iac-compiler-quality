
- name: Check file state
  hosts: localhost
  tasks:
    - name: Create test file
      file:
        path: /tmp/test.txt
        state: touch
    
    - name: Check file state when present
      file:
        path: /tmp/test.txt
        src: /tmp/test.txt
      register: present_state
              
    - name: Assert no errors when file is present
      ansible.builtin.assertion:
        that:
          - "'src' not in present_state.msg"
          - "'failed' not in present_state.msg"
    
    - name: Check file state when absent
      file:
        path: /tmp/test.txt
        state: absent
        src: /tmp/test.txt
      register: absent_state
              
    - name: Assert no errors when file is absent
      ansible.builtin.assertion:
        that:
          - "'src' not in absent_state.msg"
          - "'failed' not in absent_state.msg"
