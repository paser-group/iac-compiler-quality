yaml
- name: Example playbook
  hosts: localhost
  vars:
    my_variable: "default_value"
  tasks:
    - blockinfile:
        path: /path/to/file
        block: |
          {% if my_variable != "default_value" %}
          my_variable: {{ my_variable }}
          {% endif %}
        marker: "# {mark} ANSIBLE MANAGED BLOCK {{ item }}"
    - template:
        src: my_template.j2
        dest: /path/to/destination
