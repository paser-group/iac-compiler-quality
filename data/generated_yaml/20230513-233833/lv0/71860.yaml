
- name: Run ansible-galaxy command
  command: ansible-galaxy install some_role
  register: galaxy_output
  timeout: 30   # specify the timeout value in seconds

- name: Check if task timed out
  debug:
    msg: "Task timed out"
  when: galaxy_output|failed and "Timeout" in galaxy_output.stderr | default("")

- name: Handle other errors
  fail:
    msg: "Ansible-galaxy command failed: {{ galaxy_output.stderr }}"
  when: galaxy_output|failed
