
import os
from google.oauth2 import service_account
from google.cloud import storage

# check if service account email is set
if os.environ.get('SERVICE_ACCOUNT_EMAIL') is None:
    raise ValueError('Missing SERVICE_ACCOUNT_EMAIL environment variable')

# create credentials object
credentials = service_account.Credentials.from_service_account_file(
    '/path/to/service/account/key.json',
    email=os.environ['SERVICE_ACCOUNT_EMAIL']
)

# create storage client
storage_client = storage.Client(credentials=credentials)
# access storage buckets
buckets = list(storage_client.list_buckets())
