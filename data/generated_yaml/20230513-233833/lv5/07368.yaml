
- name: Create a new VPC
  ec2_vpc:
    state: present
    cidr_block: 10.0.0.0/16
    region: us-east-1
  register: vpc

- name: Create a new routing table
  ec2_vpc_route_table:
    vpc_id: "{{ vpc.vpc.id }}"
    region: us-east-1
  register: route_table

- name: Add the instance ID to the route table
  ec2_vpc_route_table:
    vpc_id: "{{ vpc.vpc.id }}"
    region: us-east-1
    route_table_id: "{{ route_table.route_table.id }}"
    # Add the instance ID using the destination_cidr_block parameter
    destination_cidr_block: "10.0.0.0/24"
    instance_id: i-1234567890abcdef0
