
- name: Test Juniper update overwrite
  junos_config:
    lines:
      - set system services ssh root-login deny
    overwrite: true
  register: result_overwrite_true

- name: Check Juniper update overwrite true
  assert:
    that:
      - result_overwrite_true.changed == true
      
- name: Test Juniper update no overwrite
  junos_config:
    lines:
      - set system services telnet
    overwrite: false
  register: result_overwrite_false
  
- name: Check Juniper update overwrite false
  assert:
    that:
      - result_overwrite_false.changed == false
      
- name: Test Juniper commit check
  junos_command:
    commands: "show | compare rollback 1"
  register: result_commit_check

- name: Check Juniper commit check
  assert:
    that:
      - "services ssh root-login deny" in result_commit_check.stdout
