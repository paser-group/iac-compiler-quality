
- name: Test random module's `end` parameter
  hosts: all
  gather_facts: no
  tasks:
    - name: Test if end parameter returns an integer
      set_fact:
        random_num: "{{ query('random', start=1, end=3) }}"
      register: random_output
    - fail:
        msg: "The end parameter returned an invalid value"
      when: "not (random_output['random_num'] >= 1 and random_output['random_num'] <= 3)"
