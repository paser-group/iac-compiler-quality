
---
- name: Used to test cloudfront_distribution module's geolocation feature
  hosts: all
  become: yes
  vars:
    distribution_id: "distribution_id_123"
  tasks:
    - name: Verify geolocation is set
      cloudfront_distribution_info:
        id: "{{ distribution_id }}"
        states: present
      register: distribution_info
      
    - name: Debug geolocation data before update
      debug:
        var: distribution_info.distribution.geo_restrictions.geo_restriction.items
        
    - name: Update Geolocation data
      cloudfront_distribution:
        id: "{{ distribution_id }}"
        geo_restrictions:
          geo_restriction:
            items:
            - US
            - CA
      register: update_result

    - name: Debug geolocation data after update
      debug:
        var: update_result.distribution.geo_restrictions.geo_restriction.items    
