
- hosts: all
  tasks:
  - name: Copy file from server1 to server2
    command: scp /path/to/source/file {{ inventory_hostname }}:/path/to/destination/file
  - name: Calculate and verify checksum
    shell: "md5sum /path/to/destination/file | cut -f1 -d' '"
    register: md5sum
  - name: Check if expected checksum matches actual checksum
    assert:
      that: "'expected_checksum' == md5sum.stdout"
      success_msg: "Checksum matched"
      fail_msg: "Checksum did not match"
