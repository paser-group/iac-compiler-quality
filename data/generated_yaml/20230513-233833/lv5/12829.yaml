
---
- hosts: all
  gather_facts: no

  vars:
    illegal_variables:
      - "@var"
      - "uninitialized_var"
      - "{{ undefined_var }}"

  tasks:
    - name: loop through illegal variables
      debug:
        var: item
      with_items: "{{ illegal_variables }}"

    - name: test illegal variable in loop
      when: item is defined
      debug:
        var: item
      with_items: "{{ range(10)|list }}"
