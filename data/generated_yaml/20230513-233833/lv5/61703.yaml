
- hosts: localhost
  gather_facts: no

  vars:
    ansible_python_interpreter: /usr/bin/python3

  tasks:

  - name: create ec2 group
    ec2_group:
      name: securitygroup
      description: My Security Group
      region: eu-west-1
      aws_access_key: '{{access_key}}'
      aws_secret_key: '{{secret_key}}'
      rules:
        - proto: tcp
          from_port: 22
          to_port: 22
          cidr_ip: 0.0.0.0/0
      rules_egress:
        - proto: all
          cidr_ip: 0.0.0.0/0
    register: ec2_group
  - debug: var=ec2_group
