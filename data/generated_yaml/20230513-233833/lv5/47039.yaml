yaml
- name: Check for default password in InfluxDB configuration
  hosts: all
  tasks: 
  - name: Retrieve default password from configuration file
    shell: grep -R 'default_password' /etc/influxdb/influxdb.conf
    register: default_pass_check
    ignore_errors: true
  - name: Fail if default password is found
    fail:
      msg: "Default password found in InfluxDB configuration"
    when: default_pass_check.rc == 0
