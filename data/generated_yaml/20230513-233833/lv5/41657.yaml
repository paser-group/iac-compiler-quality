
- name: Check ios_l2_interface module for bugs
  hosts: iosxe
  gather_facts: no

  vars:
    interface_name: "interface_name"
    vlan: "100"

  tasks:
    - name: Configure l2 interface
      ios_l2_interface:
        name: "{{interface_name}}"
        vlan: "{{vlan}}"
        state: present
      register: result

    - name: Error handling
      debug:
        msg: "{{result}}"
      failed_when: "'failed' in result"
      ignore_errors: true
