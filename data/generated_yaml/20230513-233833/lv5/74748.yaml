
- hosts: all
  become: true
  vars:
    ssh_user: ansible
    ssh_key: /path/to/key.pem
    hosts_list:
      - node1
      - node2
      - node3
  tasks:
    - name: Perform SSH Authentication
      ssh_connection:
        ssh_user: "{{ ssh_username }}"
        ssh_key: "{{ ssh_key }}"
        hostname: "{{ item }}"
      loop: "{{ hosts_list }}"
      register: ssh_result
      ignore_errors: true

    - name: Handle Interactive Prompts
      debug:
        msg: "{{ ssh_result.stderr }}"
