
---
- name: Test for NoneType error while fetching details using vmware_vmkernel_facts
  hosts: all
  gather_facts: no
  vars:
    vmware_user: 'username'
    vmware_password: 'password'
    vmware_portgroup: 'pg_name'
  tasks:
    - name: Gather facts for the VMware host
      vmware_vmkernel_facts:
        hostname: "{{ inventory_hostname }}"
        username: "{{ vmware_user }}"
        password: "{{ vmware_password }}"
        portgroup: "{{ vmware_portgroup }}"
        datacenter: "{{ vc_datacenter }}"
      register: vmkernel_facts
      ignore_errors: yes
      vars:
        trigger_error: none # setting a variable with no value to trigger NoneType error
  
    - name: print vmkernel_facts
      debug:
        var: vmkernel_facts

