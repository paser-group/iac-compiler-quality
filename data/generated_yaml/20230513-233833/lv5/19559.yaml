
- name: Test the ec2 module for bugs
  hosts: all
  gather_facts: no
  tasks:
    - name: Test create_instance method with valid parameters
      ec2:
        key_name: my-key
        instance_type: t2.micro
        image: ami-abc123
        count: 1
        region: us-west-2
      register: result
      
    - name: Check if create_instance method was successful
      assert:
        that: "'changed' in result"
