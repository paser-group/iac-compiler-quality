yaml
- name: Install bcrypt library
  hosts: all
  become: true
  tasks:
  - name: Ensure required dependencies are installed and updated
    apt:
      name: ['build-essential', 'python3-pip', 'python3-dev']
      state: latest
      update_cache: yes
    when: ansible_distribution == 'Ubuntu'
    
  - name: Install bcrypt library
    pip:
      name: bcrypt
      state: latest

  - name: Ensure bcrypt library was installed successfully
    command: python3 -c "import bcrypt"
