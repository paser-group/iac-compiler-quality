
- name: Validate Docker Swarm service default values
  hosts: all
  tasks:
  - name: Create Docker Swarm service with bad default values - option 1
    docker_service:
      name: myservice
      state: present
      image: nginx:latest
      replicas: 4
      endpoint_mode: dnsrr
      publish_mode: host
      published_ports: 80:80,443:443
      env:
        MYVAR: "value"
      detach: yes
  - name: Create Docker Swarm service with bad default values - option 2
    docker_service:
      name: myservice
      state: present
      image: nginx:latest
      replicas: 4
      endpoint_mode: dnsrr
      publish_mode: host
      published_ports: 80:80,443:443
      env:
        MYVAR: "value2"
      detach: yes
