
- name: Install package
  hosts: node1
  tasks:
    - name: Install package using apt module
      apt:
        name: package-name
        state: latest
      register: apt_out

- name: Check package install
  hosts: node2
  gather_facts: no
  tasks:
    - name: Check using check_mode parameter
      apt:
        name: package-name
        state: latest
      check_mode: yes
      
- name: Test fact caching
  hosts: node3
  gather_facts: no
  tasks:
    - name: Validate cache parameter
      debug:
        msg: "Cache test"
      cache:
        path: /non-existent-directory

  