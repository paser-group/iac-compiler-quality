
- name: Check if variable is being used correctly
  hosts: all
  gather_facts: False
  vars:
    my_var: "testing"
  tasks:
  - name: Debug variable
    debug: var=my_var
  - name: Use variable in shell command
    shell: echo "{{ my_var }}"
    register: shell_output
  - name: Compare output
    assert:
      that:
        - shell_output.stdout == my_var
