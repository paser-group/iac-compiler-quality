yaml
- name: Create VLAN 10 with Access mode
  nxos_vlan:
    vlan_id: 10
    vlan_name: "VLAN 10"
    mode: access

- name: Update VLAN 10 to Trunk mode
  nxos_vlan:
    vlan_id: 10
    mode: trunk

- name: Verify VLAN 10 Trunk mode configuration
  nxos_vlan:
    vlan_id: 10
  register: vlan_info

- assert:
    that:
      - vlan_info.mode == "trunk"

- name: Update VLAN 10 back to Access mode
  nxos_vlan:
    vlan_id: 10
    mode: access

- name: Verify VLAN 10 Access mode configuration
  nxos_vlan:
    vlan_id: 10
  register: vlan_info

- assert:
    that:
      - vlan_info.mode == "access"
