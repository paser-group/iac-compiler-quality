
---
- name: Test Ansible Authentication and Permission Settings
  hosts: all
  gather_facts: no
  become: yes

  tasks:

  - name: Ping remote node
    ping:
    remote_user: "{{ item.user }}"
    sudo: "{{ item.sudo }}"
    become_user: "{{ item.become_user }}"
    become: "{{ item.become }}"
    ignore_errors: yes
    with_items:
      - { user: 'ubuntu', sudo: 'false', become_user: 'ubuntu', become: 'false' }
      - { user: 'ubuntu', sudo: 'false', become_user: 'ubuntu', become: 'true' }
      - { user: 'ubuntu', sudo: 'true', become_user: 'ubuntu', become: 'false' }
      - { user: 'ubuntu', sudo: 'true', become_user: 'ubuntu', become: 'true' }
      - { user: 'ansible', sudo: 'false', become_user: 'ansible', become: 'false' }
      - { user: 'ansible', sudo: 'false', become_user: 'ansible', become: 'true' }
      - { user: 'ansible', sudo: 'true', become_user: 'ansible', become: 'false' }
      - { user: 'ansible', sudo: 'true', become_user: 'ansible', become: 'true' }
