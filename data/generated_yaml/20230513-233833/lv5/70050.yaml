
---
- name: Test ignore_errors in a loop
  hosts: all
  gather_facts: no

  vars:
    items:
      - good_template
      - bad_template
      - good_template

  tasks:
    - name: Generate templating errors in a loop
      template:
        src: "{{ item }}.j2"
        dest: "/tmp/{{ item }}"
      with_items: "{{ items }}"
      ignore_errors: yes

    - name: Check result
      shell: "cat /tmp/{{ item }}"
      with_items: "{{ items }}"
      register: result

    - name: Debug output
      debug:
        var: result
