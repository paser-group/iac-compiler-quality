
- name: Test WinRM Kerberos Authentication
  hosts: all
  tasks:
    - name: Verify WinRM Connectivity using Kerberos authentication
      win_shell: echo "Test WinRM connectivity using Kerberos authentication"
      become: true
      become_method: runas
      ansible_user: "{{ ansible_user }}"
      ansible_password: "{{ ansible_password }}"
      ansible_winrm_transport: kerberos
      vars:
        ansible_connection: winrm
      register: winrm_output
  
    - assert:
        that:
          - winrm_output is success
