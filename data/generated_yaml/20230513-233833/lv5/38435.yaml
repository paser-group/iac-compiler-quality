
---
- name: Test inventory script's ability to handle exec errors
  hosts: all
  gather_facts: false
  
  tasks:
  - name: Install Apache2 package using apt
    apt:
      name: apache2
      state: present

  - name: Execute a command that should fail due to already installed package
    script: |
      apt-get install -y apache2
    register: command_result
    ignore_errors: true

  - name: Check if exec error has been captured
    assert:
      that:
        - "'already installed' in command_result.stderr"
