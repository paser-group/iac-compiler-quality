
- name: Create GCE instance with non-ascii image name
  gcp_compute_instance:
    name: instance-1
    machine_type: f1-micro
    zone: us-central1-a
    boot_disk_auto_delete: true
    image_project: debian-cloud
    image_family: debian-9
    tags:
      - http-server
    network: projects/{{ project_id }}/global/networks/default
    subnetwork: projects/{{ project_id }}/regions/us-central1/subnetworks/default
    metadata: '{"startup-script":"#!/bin/bash\n"}'
    scopes:
      - https://www.googleapis.com/auth/devstorage.read_only
      - https://www.googleapis.com/auth/logging.write
      - https://www.googleapis.com/auth/pubsub
      - https://www.googleapis.com/auth/service.management.readonly
      - https://www.googleapis.com/auth/servicecontrol
      - https://www.googleapis.com/auth/trace.append"
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    auth_kind: "{{ auth_kind }}"
  register: instance

- debug:
    msg: "Instance created with ID {{ instance.instance }}"
