
---
- name: Copy files with Jinja2 conditionals
  hosts: all
  become: yes
  tasks:
  - name: Copy files based on Jinja2 conditionals
    copy:
      src: /path/to/files/{{ item }}
      dest: /path/on/destination/node/
    when: "{{ item | regex_search('.txt$') }}"
    loop:
      - file1.txt
      - file2.png
      - file3.txt
      - file4.docx
