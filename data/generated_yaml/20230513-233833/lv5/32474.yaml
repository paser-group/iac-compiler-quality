
- name: Install packages from RHEL7 repository
  hosts: all
  become: true
  vars:
    repo_url: "https://repo.example.com/rhel7"
    required_packages:
      - package1
      - package2
  tasks:
    - name: Add repository
      yum_repository:
        name: rhel7
        description: RHEL7 Repository
        baseurl: "{{repo_url}}"
        enabled: true
        gpgcheck: true
    - name: Install required packages
      yum:
        name: "{{required_packages}}"
        state: present
    - name: Verify package signatures
      rpm_verify:
        packages: "{{required_packages}}"
