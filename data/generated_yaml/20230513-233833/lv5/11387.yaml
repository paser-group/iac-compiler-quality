
---
- hosts: all
  gather_facts: no
  tasks:
    - name: Define a variable improperly
      command: echo "The value of my_var is {{ my_variable }}"
      vars:
        my_variable: "Hello, world!"
    - name: Pass variables between different plays
      set_fact:
        my_fact: "{{ my_fact + 1 | default(1) }}"
      vars:
        my_fact: 42
    - name: Reference variables in an included playbook that do not exist
      include_vars:
        file: "{{ playbook_dir }}/vars/no-such-variable.yml"
    - name: Include a playbook with a bad variable
      include: "{{ playbook_dir }}/included_playbook.yml"
