
---
- name: service module validation
  hosts: all
  
  tasks:
    - name: execute service module's run method with None value parameter
      script: /usr/bin/python '/path/to/service_module.py' '{{ None }}'
      register: script_result

    - name: check for any stderr output
      debug:
        var: script_result.stderr_lines
      when: script_result.stderr_lines|length > 0

    - name: check for expected NoneType error in stderr
      fail:
        msg: "Service module boilerplate run() method failed with NoneType error"
      when: script_result.stderr.find("NoneType") != -1
