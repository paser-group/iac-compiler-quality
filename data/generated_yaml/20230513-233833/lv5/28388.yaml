
---

- name: Create user with password
  hosts: all
  become: yes

  vars:
    username: testuser1
    password: Test@123

  tasks:
    - name: Create user with password
      eos_user:
        name: "{{ username }}"
        password: "{{ password }}"
        nopassword: false
      register: create_user_response

    - name: Check user created with password
      debug:
        var: create_user_response.failed
      when: create_user_response.failed == true

- name: Create user without password
  hosts: all
  become: yes

  vars:
    username: testuser2

  tasks:
    - name: Create user without password
      eos_user:
        name: "{{ username }}"
        nopassword: true
      register: create_user_response

    - name: Check user created without password
      debug:
        var: create_user_response.failed
      when: create_user_response.failed == true

