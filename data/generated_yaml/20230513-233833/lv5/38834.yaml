
- name: Test lineinfile edits
  hosts: all
  tasks:
  - name: Add a line to a file
    lineinfile:
      path: /tmp/testfile
      line: testline
    register: result1

  - name: Remove a line from a file
    lineinfile:
      path: /tmp/testfile
      state: absent
      line: testline
    register: result2

  - name: Check results
    assert:
      that: 
        - result1 is success
        - result2 is success
        
