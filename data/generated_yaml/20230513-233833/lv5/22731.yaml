
---
- hosts: all
  become: true
  gather_facts: yes
  tasks:
    - name: Install awscli package
      apt:
        name: awscli
        state: present

    - name: Assume AWS IAM Role
      sts_assume_role:
        source_profile: default
        role_arn: arn:aws:iam::123456789012:role/my-role
        region_name: us-west-2
      register: assumed_role

    - name: Debug Assume Role Result
      debug:
        var: assumed_role
