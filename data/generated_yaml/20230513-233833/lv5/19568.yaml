
---
- name: Verify connection to Google Cloud Storage API
  gcp_compute_auth:
    service_account_file: "/path/to/credentials.json"
 
- name: Create a new bucket if it doesn't already exist
  gc_storage_bucket:
    name: "{{ bucket_name }}"
    project_id: "{{ project_id }}"
    state: present
 
- name: Upload a new file to the storage bucket
  gc_storage_object:
    bucket: "{{ bucket_name }}"
    project_id: "{{ project_id }}"
    src: "/path/to/local/file.txt"
    dest: "/remote/file.txt"
    state: present
