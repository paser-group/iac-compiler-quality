
- name: Test osx_defaults integer type check
  hosts: remote_host
  vars:
    hostname: remote_host
    username: remote_user
  tasks:
    - name: Set osx_defaults key-value pair
      osx_defaults:
        domain: com.apple.safari
        key: AutoFillCreditCardCaptureEnabled
        value: true
        host: "{{ hostname }}"
        user: "{{ username }}"
    - name: Get osx_defaults key-value pair
      osx_defaults:
        domain: com.apple.safari
        key: AutoFillCreditCardCaptureEnabled
        host: "{{ hostname }}"
        user: "{{ username }}"
      register: result
    - name: Assert that retrieved value matches set value
      assert:
        that:
          - result.stdout == "true"
    - name: Test integer type check in osx_defaults
      osx_defaults:
        domain: com.apple.safari
        key: "{{ item }}"
        value: "{{ item }}"
        host: "{{ hostname }}"
        user: "{{ username }}"
      loop: "{{ range(1, 10) }}"
