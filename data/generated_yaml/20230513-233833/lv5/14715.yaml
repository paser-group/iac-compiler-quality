
---
- hosts: all
  become: true
  vars:
    ansible_galaxy_roles_directory: "roles"
  tasks:
  - name: Install Ansible Galaxy roles
    ansible-galaxy:
      role-file: requirements.yml
      roles-path: '{{ ansible_galaxy_roles_directory }}'
    register: galaxy_installation
  - name: List Ansible Galaxy roles
    ansible-galaxy:
      list: all
      roles-path: '{{ ansible_galaxy_roles_directory }}'
      page_size: 10
      page_number: "{{ item }}"
    loop:
      - 1
      - 2
      - 3
    register: galaxy_list
