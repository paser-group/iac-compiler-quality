
---
- hosts: windows
  vars:
    feature_name: NetFx3
    source_path: 'C:\sources\SxS'
  tasks:
    - name: Install .Net Framework 3.5
      win_feature_optional:
        name: "{{ feature_name }}"
        state: present
        source: "{{ source_path }}"
      register: feature_status
    - name: Check for Access Denied errors
      assert:
        that:
          - '"Access is denied" not in feature_status.stderr'
