
---
- name: Test Docker Container module
  hosts: all
  gather_facts: false

  tasks:

  - name: Create test-container container
    docker_container:
      name: test-container
      image: nginx
      state: present
      hostname: ansible
      exposed_ports:
        - 80
      published_ports:
        - 8080:80
      networks:
        - name: node-net
      ip_address: 10.1.1.100
      restart_policy: always
      mem_limit: 250m
      volumes:
        - /tmp:/tmp

  - name: Start test-container container
    docker_container:
      name: test-container
      state: started

  - name: Stop test-container container
    docker_container:
      name: test-container
      state: stopped

  - name: Remove test-container container
    docker_container:
      name: test-container
      state: absent
