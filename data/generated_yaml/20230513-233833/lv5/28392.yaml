
- name: create Azure VM with incorrect arguments
  azure_rm_virtualmachine:
    # incorrect arguments
    resource_group: ''
    name: myvm
    vm_size: Standard_B1ms
    admin_username: vmadmin
    admin_password: passw0rd

- name: fail to remove virtual machine when error occurs
  ignore_errors: yes
  azure_rm_virtualmachine:
    resource_group: '{{ resource_group }}'
    name: myvm
    state: absent
