
---
- name: test win_unzip for faulty compressed file
  hosts: windows
  gather_facts: false
  tasks:
  - name: extract faulty compressed file
    win_unzip:
      src: /path/to/faulty/file.zip
      dest: C:\extracted\
    register: result
  - name: fail if extraction succeeds
    fail:
      msg: "Extraction succeeded when it should have failed!"
    when: result|success
