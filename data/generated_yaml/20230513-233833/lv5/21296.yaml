
---
- name: Test UFW Changed Check
  hosts: all
  become: yes

  tasks:
    - name: Check UFW Status
      shell: "ufw status"
      register: ufw_status
      changed_when: False

    - name: Debug Information
      debug:
        var: ufw_status.stdout_lines

    - name: Check UFW Changed Status
      shell: "ufw status | grep 'Status: active'"
      register: ufw_changed_check
      when: ufw_status is changed

    - name: Debug Information
      debug:
        var: ufw_changed_check.stdout_lines
