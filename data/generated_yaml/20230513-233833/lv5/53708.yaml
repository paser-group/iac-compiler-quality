
---
- hosts: all
  become: yes
  tasks:
    - name: Create LUKS on /dev/sda3
      cryptsetup:
        name: device1
        state: present
        device: /dev/sda3
        key_file: "{{ inventory_dir }}/keyfile"
      ignore_errors: yes
      register: crypt_device

    - debug:
        msg: "{{ crypt_device.msg }}"
