yaml
---
- name: Testing Registered Variables and Conditionals in the same task
  hosts: all
  tasks:
    - name: Register a variable and check a condition in the same task
      shell: echo "test_string"
      register: myvar
      failed_when: myvar.stdout != "test_string"
      when: myvar.stdout == "test_string"
      check_mode: no

