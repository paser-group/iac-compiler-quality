
- name: Generate and verify configuration file with vmware_host_config_manager
  vmware_host_config_manager:
    hostname: "{{ inventory_hostname }}"
    datacenter_name: "dc1"
    cluster_name: "cluster1"
    validate_certs: False
    username: "user"
    password: "pass"
  register: output

- name: Compare expected and generated configuration files
  assert:
    that:
      - output.configuration == expected_output.configuration
