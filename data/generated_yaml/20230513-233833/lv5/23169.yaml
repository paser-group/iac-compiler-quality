
- name: Test JSON statistics
  hosts: all
  vars:
    json_data: '{ "id": 1, "name": "John" }'
  tasks:
    - name: Display JSON data
      debug:
        var: json_data
        verbosity: 2
        skip_tags: yes

    - name: Statistical calculations on JSON data
      stats:
        mode: json
        json:
          - name: id
            alias: 'ID'
          - name: name
            alias: 'Name'
            nested:
              - name: name
                alias: 'Name'
      register: json_stats

    - name: Check if stats of JSON are correct
      assert:
        that:
          - json_stats.stat[ID].sum == 1
          - json_stats.stat[Name].sum == "John"
