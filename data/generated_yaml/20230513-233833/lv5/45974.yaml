
- name: Testing with_items and when condition
  hosts: node1
  gather_facts: false
  tasks:
    - name: Generate a list of random values
      set_fact:
        random_numbers: "{{ range(1,10)|random(seed=1, format='%03d')|list }}"

    - name: Execute a command based on condition
      command: echo "{{ item }} is less than 5000"
      when: item|int < 5000
      with_items: "{{ random_numbers }}"
