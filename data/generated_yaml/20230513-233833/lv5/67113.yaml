
- name: Check if Macports is installed
  hosts: all
  gather_facts: yes

  tasks:
    - name: Check if Macports is installed
      command: /opt/local/bin/port version
      register: macports_output
      ignore_errors: true

    - name: Install Macports if not found
      apt:
        name: macports
        state: present
      when: macports_output.rc != 0
