
- name: Test Docker-Py package with Ansible
  hosts: all
  become: yes
  tasks:
    - name: Check if docker-py is present
      stat: path=/usr/lib/python2.7/dist-packages/docker
      register: dir_result
    - name: Get docker-py version
      command: cat /usr/lib/python2.7/dist-packages/docker/__init__.py | grep __version__ | awk '{print $3}' | tr -d \'
      register: version_result
      when: dir_result.stat.exists
    - name: Print docker-py version
      debug:
        var: version_result.stdout
