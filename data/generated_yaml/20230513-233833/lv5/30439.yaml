
---
- name: Verify idempotent behavior of nxos_igmp_snooping module
  hosts: n7k
  gather_facts: no
  vars:
    igmp_snooping_vlan: 10
    igmp_snooping_link_local_groups: true

  tasks:
  - name: Configure nxos_igmp_snooping module with non-default values
    nxos_igmp_snooping:
      vlan: "{{ igmp_snooping_vlan }}"
      link_local_groups: "{{ igmp_snooping_link_local_groups }}"
    register: igmp_result

  - name: Verify idempotent behavior of nxos_igmp_snooping module
    debug:
      msg: "Idempotent behavior of nxos_igmp_snooping module not found"
    when: igmp_result is changed
