yaml
---
- name: Test virtual package installation using apt module
  hosts: all
  gather_facts: yes

  tasks:
  - name: Install virtual packages using apt
    apt:
      name: "{{ item }}"
      state: present
    with_items:
      - virtualbox-guest-utils
      - virtualbox-guest-x11
      - open-vm-tools-desktop

  - name: Check if installation succeeded
    shell: dpkg -s {{ item }} | grep Status
    with_items:
      - virtualbox-guest-utils
      - virtualbox-guest-x11
      - open-vm-tools-desktop
