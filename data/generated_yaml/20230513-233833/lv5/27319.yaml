
- name: Test nxos_nxapi module
  hosts: all
  connection: local
  gather_facts: false

  tasks:
  - name: Sending commands to NXOS device
    nxos_nxapi:
      host: "{{ inventory_hostname }}"
      username: "{{ username }}"
      password: "{{ password }}"
      transport: ssh
      command_string: show running-config
    register: nxapi_output
    ignore_errors: yes

  - name: Debug commands for errors
    debug:
      msg: "{{ nxapi_output }}"
