
- name: Check network connectivity
  ping:

- name: Verify authentication credentials
  assert:
    that:
      - galaxy_login.username is defined
      - galaxy_login.password is defined

- name: Install required roles
  ansible-galaxy:
    name: "{{ item }}"
    state: present
  with_items:
    - role1
    - role2
    - role3

- name: Check whether installation was successful
  assert:
    that:
      - "'role1' in ansible_facts.galaxy_info.installed_collections" 
      - "'role2' in ansible_facts.galaxy_info.installed_collections"
      - "'role3' in ansible_facts.galaxy_info.installed_collections"
