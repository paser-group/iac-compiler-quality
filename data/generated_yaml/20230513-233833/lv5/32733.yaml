
- name: Test Pacman module
  hosts: all
  gather_facts: true
  tasks:
    - name: Install Pacman
      package:
        name: pacman
        state: present

    - name: Get Pacman binary path
      shell: "{{ item }}"
      register: path
      with_items:
        - "python -c 'import ansible.modules.system.pacman as p; print(p.get_bin_path())'"

    - name: Execute test command
      shell: "{{ path.stdout }} --version"
      register: output

    - name: Report output
      debug:
        var: output.stdout_lines
