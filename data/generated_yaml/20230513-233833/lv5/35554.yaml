
---
- name: Assign more than 6 interfaces to a VLAN
  hosts: all
  gather_facts: no

  tasks:
  - name: Assign interfaces to VLAN
    ios_vlan:
      vlan_id: "100"
      tagged: "{{ item }}"
      state: present
    with_items:
      - "GigabitEthernet1/0"
      - "GigabitEthernet1/1"
      - "GigabitEthernet1/2"
      - "GigabitEthernet1/3"
      - "GigabitEthernet1/4"
      - "GigabitEthernet1/5"
      - "GigabitEthernet1/6"
      - "GigabitEthernet1/7"
      - "GigabitEthernet1/8"
      - "GigabitEthernet1/9"
  
  - name: Verify all interfaces assigned to VLAN
    ios_command:
      commands: "show vlan id 100"
    register: vlan_interfaces
  
  - name: Check for index errors
    assert:
      that:
        - "'IndexError' not in vlan_interfaces.stdout_lines"
      success_msg: "No index errors thrown"
      fail_msg: "Index errors encountered"
