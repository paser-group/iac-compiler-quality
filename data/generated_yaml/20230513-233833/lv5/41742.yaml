
---
- name: Test ansible compiler for serialization and deserialization errors in azure_rm_sqldatabase
  hosts: all
  gather_facts: false
  tasks:
  - name: Deploy a SQL Azure database
    azure_rm_sqldatabase:
      resource_group: "{{ resource_group }}"
      name: "{{ database_name }}"
      edition: "{{ database_edition }}"
      collation: "{{ database_collation }}"
      max_size_bytes: "{{ database_size }}"
      admin_username: "{{ database_admin_user }}"
      admin_password: "{{ database_admin_password }}"
      location: "{{ location }}"
    register: database_deploy_output

  - name: Serialize database configuration
    set_fact:
      serialized_database_config: "{{ database_deploy_output | to_json }}"

  - name: Debug serialized output
    debug:
      var: serialized_database_config
