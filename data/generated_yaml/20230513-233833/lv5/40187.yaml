
- name: Test eos_config task failure
  hosts: eos_host
  connection: eosapi
  become: True

  tasks:
  - name: Configure interface with invalid IP address
    eos_config:
      lines: ['interface Ethernet1', 'ip address foo']
    register: config_result

  - name: Assert configuration failed
    assert:
      that: config_result.failed == true
