
---
- name: Test ios_config idempotency
  hosts: ios
  gather_facts: no
  connection: network_cli
  tasks:
    - name: Configure loopback interface with IP 192.0.2.1 and description "Test Loopback"
      ios_config:
        lines:
          - "interface loopback 0"
          - "ip address 192.0.2.1 255.255.255.255"
          - "description Test Loopback"
        before: show ip interface brief
        register: result

    - name: Verify ios_config idempotency
      debug:
        var: result
