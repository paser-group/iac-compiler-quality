
---
- name: Testing undefined variables in template module
  hosts: all
  vars:
    undefined_vars:
    - "{{ undefined_var1 }}"
    - "{{ undefined_var2 }}"
    - "{{ undefined_var3 }}"
  tasks:
    - name: Testing template module with undefined variables
      template:
        src: /path/to/template.j2
        dest: /path/to/destination
        mode: 0644
        backup: yes
        with_dict: "{{ undefined_vars|zip(range(1, undefined_vars|length + 1))|list|dict }}"
