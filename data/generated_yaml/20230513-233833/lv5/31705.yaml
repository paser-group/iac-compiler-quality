
- hosts: all
  tasks:
    - name: test vault in lists
      debug:
        msg: "{{ item }}"
      with_items:
        - "{{ [vault_var1, vault_var2] | list }}"
        vars:
          vault_var1: "{{ lookup('vault', 'secret/foo/bar') }}"
          vault_var2: "{{ lookup('vault', 'secret/foo/baz') }}"
