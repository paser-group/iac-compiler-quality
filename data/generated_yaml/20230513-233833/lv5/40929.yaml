
- name: Check for $HOME/~None/ directories
  hosts: target_hosts
  become: true
  tasks:
    - name: Check if directory exists
      stat:
        path: "{{ lookup('env','HOME') }}/None"
      register: dir_info

    - name: Remove $HOME/~None/ directories if present
      file:
        path: "{{ lookup('env','HOME') }}/~None"
        state: absent
      when: dir_info.stat.exists
