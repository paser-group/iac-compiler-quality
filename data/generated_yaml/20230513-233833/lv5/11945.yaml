
- name: Test vars_files error handling
  hosts: all
  vars:
    invalid_file_names:
      - "doesnotexist.yml"
      - "bad_filname.yml"
      - "invalid_file"
  tasks:
    - name: Load variables from non-existent file
      vars_files:
        - "{{ item }}"
      ignore_errors: yes
      with_items: "{{ invalid_file_names }}"
    - name: Load variables from file with incorrect extension
      vars_files:
        - "{{ item }}.invalidext"
      ignore_errors: yes
      with_items: "{{ invalid_file_names }}"
    - name: Load variables from file in non-existent directory
      vars_files:
        - "/non-existent-directory/{{ item }}"
      ignore_errors: yes
      with_items: "{{ invalid_file_names }}"
