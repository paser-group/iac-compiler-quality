yaml
- name: Verify Virtual NXOS devices are reachable
  hosts: virtual_nxos_devices
  gather_facts: no
  tasks:
    - name: Ping virtual NXOS devices
      nxos_ping:
      register: ping_result
    - name: Display ping results
      debug:
        var: ping_result

- name: Collect Virtual NXOS devices facts
  hosts: virtual_nxos_devices
  gather_facts: yes
  tasks:
    - name: Gather NXOS facts
      nxos_facts:
      register: nxos_data
    - name: Display NXOS facts
      debug:
        var: nxos_data

- name: Check if FullLoader is working
  hosts: virtual_nxos_devices
  gather_facts: no
  tasks:
    - name: Check BGP configuration
      nxos_bgp:
        state: "list"
      register: bgp_data
    - name: Display BGP data
      debug:
        var: bgp_data
