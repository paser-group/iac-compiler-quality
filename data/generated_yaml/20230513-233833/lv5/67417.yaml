
- hosts: all
  tasks:
    - name: Download file with correct If-Modified-Since header value
      get_url:
        url: 'http://example.com/file.txt'
        dest: '/opt/ansible/downloaded_file.txt'
        headers:
          If-Modified-Since: '2010-01-01T00:00:00Z'
      register: result

    - name: Display result
      debug:
        var: result

    - name: Download file with incorrect If-Modified-Since header value
      get_url:
        url: 'http://example.com/file.txt'
        dest: '/opt/ansible/downloaded_file.txt'
        headers:
          If-Modified-Since: 'invalid-format-date'
      register: result

    - name: Display result
      debug:
        var: result 
