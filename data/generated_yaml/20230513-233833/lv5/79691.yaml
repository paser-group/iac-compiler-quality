
- name: Test remote_user parameter
  hosts: all
  vars:
    users:
      - root
      - admin
      - testuser
  tasks:
    - name: Send GET request with user {{ item }}
      uri:
        url: http://{{ inventory_hostname }}/api/users/{{ item }}
        remote_user: "{{ item }}"
        return_content: yes
      register: result
      loop: "{{ users }}"
    - name: Print response
      debug:
        var: result.content
