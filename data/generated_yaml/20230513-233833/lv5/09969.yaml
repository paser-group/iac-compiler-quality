
---
- name: Test playbook for Docker module error in Ansible compiler
  hosts: all
  vars:
    docker_image: nginx
    docker_name: mynginx

  tasks:
    - name: Ensure docker-py is installed
      pip:
        name: docker-py
        state: present

    - name: Start a Docker container running nginx
      docker_container:
        image: "{{ docker_image }}"
        name: "{{ docker_name }}"
        state: started
        ports:
          - "80:80"

    - name: Stop the Docker container
      docker_container:
        name: "{{ docker_name }}"
        state: stopped
