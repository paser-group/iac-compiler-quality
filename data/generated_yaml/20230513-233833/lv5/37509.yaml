
- hosts: all
  vars:
    my_var_template: "Hello {{ name }}"
    name: "World"
  tasks:
    - name: Generate a variable value using a template
      set_fact:
        my_var: "{{ my_var_template }}"

    - name: Generate a file using the generated variable
      template:
        src: "my_template.j2"
        dest: "/tmp/my_file"
