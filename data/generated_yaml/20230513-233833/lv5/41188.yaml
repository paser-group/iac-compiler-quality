
---
- name: Ansible playbook to test environment variables triggering jinja errors
  hosts: all
  gather_facts: no  # Not gathering facts as they are not related to the issue
  vars_files:
    - vars.yaml
  
  tasks:
    - name: Set environment variables
      environment: "{{ item }}"
      loop: "{{ lookup('file', 'env') | from_yaml }}"
    
    - name: Render jinja template
      template:
        src: jinja_template.j2
        dest: "{{ inventory_hostname }}.txt"
