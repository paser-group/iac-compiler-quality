
- hosts: localhost 
  gather_facts: false

  tasks:
  - name: Test inventory plugin
    command: ansible-inventory -i plugins/inventory/myplugin.py --graph
    register: result

  - name: Verify inventory plugin
    fail:
      msg: "{{ result.stdout }}"
    when: "'ERROR' or 'FAILED' or 'WARNING' in result.stderr"
