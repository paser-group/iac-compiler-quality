
- name: Test lvol module options
  hosts: all
  gather_facts: False
  tasks:
    - name: Create LVM volume
      lvol:
        vg: test_vg
        lv: test_lv
        size: 500m
        force: no
      register: lvol_create

    - debug:
        var: lvol_create

    - name: Extend LVM volume without options
      lvol:
        vg: test_vg
        lv: test_lv
        size: +500m
      register: lvol_extend_wo_options

    - debug:
        var: lvol_extend_wo_options

    - name: Reduce LVM volume with options
      lvol:
        vg: test_vg
        lv: test_lv
        size: -200m
        surge: yes
      register: lvol_reduce_w_options

    - debug:
        var: lvol_reduce_w_options

    - name: Reduce LVM volume with --force option
      lvol:
        vg: test_vg
        lv: test_lv
        size: -200m
        force: yes
      register: lvol_reduce_wo_options

    - debug:
        var: lvol_reduce_wo_options
