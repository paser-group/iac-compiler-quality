
---
- name: Test Ansible Environment
  hosts: all
  become: true
  tasks:
  - name: Install Dependencies
    apt:
      name: "{{ item }}"
      state: present
    loop:
      - git
      - python
  - name: Clone Ansible Git Repository
    git:
      repo: https://github.com/ansible/ansible.git
      dest: /root/ansible
  - name: Setup Ansible Environment
    command: /bin/bash -c "cd /root/ansible && source ./hacking/env-setup"
  - name: Test Ansible Variables
    command: ansible --version
