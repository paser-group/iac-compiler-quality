
- name: Create S3 bucket with appropriate settings
  hosts: node1
  become: true
  tasks:
  - name: Create S3 bucket
      aws_s3:
        bucket: my_bucket
        region: us-west-2
      register: s3_bucket_create

  - name: Set bucket public read access
    aws_s3_bucket_acl:
      bucket: my_bucket
      acl: public-read

  - name: Copy .txt file to S3 bucket
    command: aws s3 cp s3://my_bucket/sample.txt s3://my_bucket/
    register: txt_upload

  - name: Copy .xls file to S3 bucket
    command: aws s3 cp s3://my_bucket/sample.xls s3://my_bucket/
    register: xls_upload

  - name: Copy .pdf file to S3 bucket
    command: aws s3 cp s3://my_bucket/sample.pdf s3://my_bucket/
    register: pdf_upload
   
