
---
- name: Test case for lvol module
  hosts: all
  gather_facts: no

  tasks:
  - name: Create volume group
    lvg:
      vg: testvg
      pvs: /dev/loop0

  - name: Create LV
    lvol:
      vg: testvg
      lv: testlv
      size: 10m

  - name: Delete volume group
    lvg:
      vg: testvg
      state: absent

  - name: Check for error while deleting volume group
    fail:
      msg: "Error in lvol module"

  - name: Delete LV
    lvol:
      vg: testvg
      lv: testlv
      state: absent
