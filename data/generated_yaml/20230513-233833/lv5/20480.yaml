
- name: Test docker_service error messages
  hosts: docker
  tasks:
    - name: Start an invalid service
      docker_service:
        project_src: .
        restart: yes
        service_name: invalid_service
      register: result
      ignore_errors: true
  
    - name: Check the error message in case of service failure
      assert:
        that:
          - "result|failed"
          - "result|msg|search('Aborting, since the service is invalid')"
