
- name: Test gce_net module
  hosts: all
  gather_facts: no
  vars:
    firewall_name: "test-firewall"

  tasks:
  - name: Create firewall rule
    gce_net:
      name: "{{ firewall_name }}"
      rules:
      - action: "deny"
        source_ranges:
        - "0.0.0.0/0"

  - name: Update firewall rule causing an error
    gce_net:
      name: "{{ firewall_name }}"
      # Intentionally using an invalid rule to cause an error
      rules:
      - invalid_rule
