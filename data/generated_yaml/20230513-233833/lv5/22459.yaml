yaml
---
- name: Ensure unique Unicode banner in a file
  hosts: all
  gather_facts: true
  become: yes
  tasks:

    - name: Create the Banner file
      template:
        src: banner.j2
        dest: /tmp/banner.txt
        mode: '0644'

    - name: Ensure banner appears only once
      lineinfile:
        path: /tmp/banner.txt
        regexp: "{{ lookup('template', 'banner.j2') }}"
        backup: yes
