
- hosts: all
  gather_facts: no
  tasks:
    - name: Test empty with_items behavior
      debug:
        msg: "{{ item }}"
      with_items: []

    - name: Test empty authorized key module behavior
      authorized_key:
        user: "{{ inventory_hostname }}"
        key: ""
        state: present

    - name: Remove empty authorized key
      authorized_key:
        user: "{{ inventory_hostname }}"
        key: ""
        state: absent
