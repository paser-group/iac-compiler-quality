
- name: Test Ansible template module
  hosts: all
  gather_facts: false

  tasks:
    - name: Render template with Ansible 2.2.0.0
      template:
        src: "{{ template_file_path }}"
        dest: "/tmp/ansible_test_template.txt"
      vars:
        ansible_version: "2.2.0.0"
      remote_user: "{{ remote_user }}"
      become: true

    - name: Render template with Ansible 2.2.1.0
      template:
        src: "{{ template_file_path }}"
        dest: "/tmp/ansible_test_template.txt"
      vars:
        ansible_version: "2.2.1.0"
      remote_user: "{{ remote_user }}"
      become: true
