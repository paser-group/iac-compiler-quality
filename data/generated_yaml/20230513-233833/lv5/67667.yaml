
---
- name: playbook to uncover /tmp/.ansible ownership issues
  hosts: all
  become: false
  remote_user: nonrootuser
  
  tasks:
    - name: touch /tmp/testfile as nonrootuser
      file:
        path: /tmp/testfile
        state: touch
        owner: nonrootuser

    - name: stat /tmp/testfile
      stat:
        path: /tmp/testfile
      register: st

    - name: debug ownership of /tmp/testfile
      debug:
        msg: "Owner is {{ st.owner }} and Remote User is {{ ansible_user }}"
