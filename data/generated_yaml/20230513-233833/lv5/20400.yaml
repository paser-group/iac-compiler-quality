
---
- name: Test playbook for template errors with shell output
  hosts: all
  gather_facts: false

  tasks:

    - name: Execute shell command
      shell: echo "value.with.dot" > /tmp/shell_output
      register: output

    - name: Set template variable
      set_fact:
        my_var: "{{ lookup('file', '/tmp/shell_output') }}"

    - name: Test template variable
      debug:
        var: my_var
