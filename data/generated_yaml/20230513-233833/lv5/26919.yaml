
- name: Deploy MySQL database
  hosts: all
  vars:
    mysql_database: testdb
    mysql_user: testuser
    mysql_user_password: testpassword

  tasks:
    - name: Create database
      mysql_db:
        login_host: 127.0.0.1
        login_user: root
        login_password: root_password
        name: "{{ mysql_database }}"

    - name: Create user and grant privileges
      mysql_user:
        login_host: 127.0.0.1
        login_user: root
        login_password: root_password
        name: "{{ mysql_user }}"
        password: "{{ mysql_user_password }}"
        priv: "{{ mysql_database }}.*:ALL"
        state: present
