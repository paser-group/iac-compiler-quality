
- name: Test ios_command module
  hosts: ios_devices
  connection: network_cli
  gather_facts: no
  vars:
    ios_command: "show version"
  tasks:
    - name: Execute ios_command
      ios_command:
        commands: "{{ ios_command }}"
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_password }}"
      register: ios_command_result
    - name: Debug output
      debug:
        var: ios_command_result.stdout_lines
