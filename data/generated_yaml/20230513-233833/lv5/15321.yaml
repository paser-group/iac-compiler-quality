
---
- name: Test Ansible Communication
  hosts: all
  remote_user: <remote_user>
  gather_facts: no

  tasks:
  - name: Ping remote hosts
    ping:

  - name: Test SSH connection
    shell: echo "Success"
    register: ssh_output
    ignore_errors: yes

  - name: Display SSH result
    debug:
      var: ssh_output.stdout_lines
    when: ssh_output|success

  - name: Test Ansible Connection
    setup:
    ignore_errors: yes

  - name: Display Ansible result
    debug:
      var: ansible_facts
        
  - name: Test Ansible ping module
    ping:

  - name: Test Ansible shell module
    shell: echo "Completed Shell Module"
    register: shell_output
    ignore_errors: yes

  - name: Display shell result
    debug:
      var: shell_output.stdout_lines
    when: shell_output|success
  
  - name: Test Ansible command module
    command: echo "Completed Command Module"
    register: command_output
    ignore_errors: yes

  - name: Display command result
    debug:
      var: command_output.stdout_lines
    when: command_output|success

  - name: Test Ansible script module
    script: /path/to/script.sh
    register: script_output
    ignore_errors: yes

  - name: Display script result
    debug:
      var: script_output.stdout_lines
    when: script_output|success
