
---
- hosts: all
  become: true
  vars:
    package_name: "openssl"
    package_version: "1.0.2k-16.el7_6.1"
    package_repo: "base"
    package_dependencies: ["libssl.so.10()(64bit)"]
  tasks:
  - name: Install package with yum module
    yum:
      name: "{{ package_name }}"
      state: present
      version: "{{ package_version }}"
      enablerepo: "{{ package_repo }}"
      installroot: "/"
      skip_broken: true
      dependencies: "{{ package_dependencies }}"
  - name: Remove package with yum module
    yum:
      name: "{{ package_name }}"
      state: absent
      remove_dependencies: true
