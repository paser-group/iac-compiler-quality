
- name: Execute ssh -V command and collect error status
  hosts: all
  gather_facts: no
  
  tasks:
  - name: Execute ssh -V command
    command: ssh -V
    register: ssh_output
    ignore_errors: true
    
  - name: Collect error status
    set_fact:
      error_status: "{{ ssh_output.rc }}"
      
  - name: Report error message
    debug: 
      msg: "{{ ssh_output.stderr }}"
    when: error_status != 0
