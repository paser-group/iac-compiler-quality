
---
- hosts: all
  gather_facts: no
  vars:
    var_list:
      - key: value1
      - key: value2
      - key: value3

  tasks:
    - name: Set variables using blocks
      block:
        - set_fact:
            "{{ item.key }}": "{{ item.key }}"
          with_items: "{{ var_list }}"
      name: Set vars in block
    - name: Debug vars
      debug:
        var: var_list
