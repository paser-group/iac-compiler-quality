
---
- name: MySQL Playbook
  hosts: all
  become: true
  tasks:
    - name: Install MySQL
      apt: 
        name: mysql-server
        state: present
    - name: "Create MySQL Database"
      mysql_db:
        name: my_db
        state: present
        login_host: localhost
        login_port: 3306
        login_user: root
        login_password: "{{ mysql_root_password }}"
      delegate_to: node1
    - name: "Create MySQL Table"
      mysql_db:
        name: my_db
        state: present
        login_host: localhost
        login_port: 3306
        login_user: root
        login_password: "{{ mysql_root_password }}"
        sql: |
          CREATE TABLE table1 (
          id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
          name VARCHAR(30) NOT NULL,
          email VARCHAR(30) NOT NULL
          ) ENGINE=InnoDB;
      register: result
    - debug: var=result
