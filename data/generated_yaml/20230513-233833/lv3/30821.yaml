
---
- name: Ansible Unarchive vulnerability Playbook
  hosts: all
  become: yes
  vars:
    file_to_extract: "/path/to/file/archive.zip"
    destination_path: "/some/random/path/"
  tasks:
  - name: Copy archive file to remote node
    copy:
      src: "{{ file_to_extract }}"
      dest: "/tmp/archive.zip"

  - name: Create a new file with the same name as archive file
    file:
      path: "{{ destination_path }}archive.zip"
      state: touch

  - name: Change permissions of the created file
    file:
      dest: "{{ destination_path }}archive.zip"
      mode: "+x"

  - name: Unarchive the content to destination_path
    unarchive:
      src: "/tmp/archive.zip"
      dest: "{{ destination_path }}"
  