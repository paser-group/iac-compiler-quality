
---
- name: Jenkins Plugin Installation
  hosts: all
  become: yes
  vars:
      plugin_name: <name-of-plugin>
  tasks:
  - name: Install Plugin
    jenkins_plugin:
      name: "{{ plugin_name }}"
      state: present
    register: result
  - name: Debug
    debug:
      var: result
  - name: Fail if Plugin not Installed
    fail:
      msg: "Plugin installation failed"
    when: "'Failure' in result.stdout"
  - name: Notify if Plugin is Changed
    debug:
      msg: "Plugin '{{ plugin_name }}' has been changed"
    when: result.changed
