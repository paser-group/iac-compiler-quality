
---
- name: Test Playbook for Selective callback error
  hosts: all
  become: true
  
  tasks:
  - name: Set a string in sample_file
    lineinfile:
      path: /tmp/sample_file
      regexp: '^oldstring='
      line: 'oldstring=newstring'
      backup: yes
    register: line_changed

  - name: Ensure the correct string was set
    assert:
      that:
        - line_changed is defined
        - line_changed is success
