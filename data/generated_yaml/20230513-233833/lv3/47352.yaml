
- name: Replay the Ansible win_domain Module's Idempotency Issue
  hosts: all
  become: true
  tasks:
  - name: Join workstation to domain
    win_domain:
      dns_domain_name: "mydomain.com"
      hostname: "workstation1"
      domain_user_name: "administrator"
      domain_password: "password123"
      ou_path: "OU=Workstations,OU=MyBusiness,DC=mydomain,DC=com"
      state: "domain"
    register: domain_join_result
  - debug:
      var: domain_join_result
