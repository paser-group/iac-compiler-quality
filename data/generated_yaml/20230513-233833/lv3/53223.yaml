
- name: Test for bad default values in docker_swarm_service
  hosts: all
  gather_facts: no
  become: true
  tasks:
    - name: Create a swarm service with bad default values
      docker_swarm_service:
        name: bad_service
        image: nginx:latest
        replicas: 4
        state: present
        labels:
          test_label: bad_value
        update_config:
          parallelism: 2
          delay: 100s
    - name: Remove the created swarm service
      docker_swarm_service:
        name: bad_service
        state: absent
