yaml
---
- name: Create VLAN
  hosts: all
  gather_facts: no
  tasks:
    - name: Configure VLAN 10 with mode access
      nxos_vlan:
        vlan_id: 10
        name: VLAN10
        mode: access
        state: present
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ remote_user }}"
          password: "{{ ansible_ssh_pass }}"

    - name: Update VLAN
      nxos_vlan:
        vlan_id: 10
        name: VLAN10
        mode: trunk
        state: present
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ remote_user }}"
          password: "{{ ansible_ssh_pass }}"
