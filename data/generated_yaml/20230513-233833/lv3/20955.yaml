
---
- name: Configure Cisco ASA firewall
  hosts: node1
  gather_facts: false
  vars:
    asa_username: admin
    asa_passwd: admin_password
    asa_host: 192.168.1.1
  tasks:
  - name: Configure ASA firewall
    asa_config:
      after: "Configure ASA firewall"
      asa_host: "{{ asa_host }}"
      asa_username: "{{ asa_username }}"
      asa_password: "{{ asa_passwd }}"
      lines:
        - permit ip any any
    register: result
  - name: Recreate issue with asa_config module
    command: echo "Incorrect argument"
    when: result.get_config(include_defaultz=1)
