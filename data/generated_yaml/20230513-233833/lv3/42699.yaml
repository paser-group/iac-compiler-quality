
---
- name: Dynamic variable in with_items issue
  hosts: all
  vars:
    dynamic_var_value: "initial_value"
    
  tasks:
    - name: Print dynamic_var_value
      debug:
        msg: "The dynamic variable value is {{ dynamic_var_value }}"
      with_items: [1, 2, 3, 4]
      when: dynamic_var_value != "new_value"

    - name: Change the dynamic variable value
      set_fact:
        dynamic_var_value: "new_value"
