
- name: Ansible Playbook to expose issues with the ios_vlans module
  hosts: all
  gather_facts: no

  tasks:
    - name: create ios_vlans with incorrect parameters
      ios_vlan:
        vlan_id: 0
        vlan_name: test-vlan
        state: present
      register: ios_vlans_result
      ignore_errors: true

    - name: debug ios_vlans_result
      debug:
        var: ios_vlans_result

  # Loop through the ios_vlans module with different parameters
    - name: create ios_vlans with different parameters
      include_tasks: ios_vlans.yml
      loop:
        - { vlan_id: 10, vlan_name: test-vlan-1, state: present }
        - { vlan_id: 20, vlan_name: test-vlan-2, state: present }
        - { vlan_id: 30, vlan_name: test-vlan-3, state: present }
        - { vlan_id: 40, vlan_name: test-vlan-4, state: present }

