
---
- name: Troubleshoot eos eapi connection issue
  hosts: eos_switch    # assuming 'eos_switch' as the name of the switch from the inventory
  gather_facts: no    # as we are not gathering facts, set to no
  connection: local    # connect with Ansible controller at local

  tasks:
  - name: Verify connectivity to the switch through EAPI
    eos_command:
      commands: show version
    register: eos_response 

  - name: Display the response from the switch 
    debug:
      var: eos_response.stdout_lines
