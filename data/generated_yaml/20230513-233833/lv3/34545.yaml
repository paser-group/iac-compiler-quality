
- name: Expose Ansible Vault Vulnerability
  hosts: all
  gather_facts: no
  tasks:
    - name: Create temp file
      file:
        path: "/tmp/example.txt"
        state: touch

    - name: Add content to file
      lineinfile:
        line: "Encrypted text"
        path: "/tmp/example.txt"

    - name: Encrypt file with Ansible Vault
      ansible.builtin.command: ansible-vault encrypt "/tmp/example.txt"
      args:
        warn: no

    - name: View encrypted file
      ansible.builtin.command: cat "/tmp/example.txt"
