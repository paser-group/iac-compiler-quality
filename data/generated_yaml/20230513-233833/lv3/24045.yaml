
---
- name: Test Ansible compute zone list permissions issue
  hosts: all
  gather_facts: no

  tasks:
    - name: Fetch compute zones information
      gcp_compute_zone_facts:
        project: my-project
        auth_kind: serviceaccount

    - name: Verify compute zones are listed
      assert:
        that:
          - "'compute/zones/' in zone.self_link"
        fail_msg: "Compute Zones not listed properly"
