
---
- name: Mesh Ping Error Playbook
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Wait for connection
      wait_for_connection:
        
    - name: Set up mesh networking
      network_cli:
        command_string: >-
          net show topology
        neighbor: group_name
        use_ssl: yes
      
    - name: Ping all nodes against each other in the mesh
      wait_for_connection:
        delay: 5
        timeout: 60
        connect_timeout: 10
      
    - name: Re-run ping with an intentional mistake, unique to the issue, to cause an error
      wait_for_connection:
        delay: 5
        timeout: 60
        connect_timeout: unsuitable_argument

