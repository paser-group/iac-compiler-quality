
---
- name: Playbook to recreate authentication error

  hosts: all
  become: true

  vars:
    connection_user: "<username>"
    connection_pass: "<password>"

  tasks:
    - name: Check connection to remote host
      ping:
        
      # Use different credentials for specific hosts
      when: inventory_hostname == 'node1'
      become_user: "<different_username>"
      become_pass: "<different_password>"
      
      # Notify handler on task failure
      ignore_errors: true
      notify: handle_error

  handlers:
    - name: Handle authentication error
      debug:
        msg: "Unable to connect to {{ inventory_hostname }} due to an authentication error."
