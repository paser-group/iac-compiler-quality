
---
- name: Creating a VPC Route Table
  hosts: localhost
  connection: local
  gather_facts: False
  vars:
    aws_region: "us-west-2"
    vpc_id: "vpc-123456"
    route_table_name: "my_route_table"
  tasks:
  - name: Creating a Route Table
    ec2_vpc_route_table:
      region: "{{ aws_region }}"
      vpc_id: "{{ vpc_id }}"
      name: "{{ route_table_name }}"
      tags:
        Name: "{{ route_table_name }}"
    register: route_table_result
  - name: Creating a Route Table with a duplicate name
    ec2_vpc_route_table:
      region: "{{ aws_region }}"
      vpc_id: "{{ vpc_id }}"
      name: "{{ route_table_name }}"
      tags:
        Name: "{{ route_table_name }}"
    ignore_errors: True
    register: duplicate_name_result
  - name: Debugging duplicate name error message
    debug:
      msg: "{{ duplicate_name_result  }}"
