
---
- name: Gather custom facts for Windows targets using the setup module
  hosts: windows
  gather_facts: no
  tasks:
    - name: Gather custom facts
      setup:
        gather_subset:
          - '!all'
          - 'hardware'
          - 'network'
        filter:
          - ansible_*_mb
          - ansible_*_versions
          - ansible_*_family
