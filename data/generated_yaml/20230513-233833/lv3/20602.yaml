
---
- name: Test playbook for stdout_callback issue
  hosts: all
  tasks:
    - name: Run a command with multiple lines of output
      command: >
        echo "Line 1
        Line 2"
      register: cmd_output
      delegate_to: localhost
      ignore_errors: yes
      
    - name: Print the output with debug plugin
      debug:
        var: cmd_output.stdout_lines
        stdout_callback: default
    
    - name: Print the output with minimal plugin
      debug:
        var: cmd_output.stdout_lines
        stdout_callback: minimal
      
    - name: Print the output with dense plugin
      debug:
        var: cmd_output.stdout_lines
        stdout_callback: dense
