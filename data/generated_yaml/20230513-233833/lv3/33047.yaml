
---
- name: Testing network module in Ansible with debug logs
  hosts: all
  gather_facts: false

  tasks:
  - name: Test network module with persistent connection and debug logs.
    network_cli:
      host: 10.1.1.1
      username: testuser
      password: testpassword
      platform: junos
      command_string: show version
    register: output
    persistent_command_timeout: 300
    persistent_connect_retry_timeout: 10
    persistent_connect_timeout: 10
    debug_level: 3

  - name: Print the output of task
    debug:
      var: output.stdout_lines
