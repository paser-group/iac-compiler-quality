
---
- name: Testing ec2_vpc without subnets
  hosts: localhost
  gather_facts: no
  vars:
    region: "us-east-1"
    vpc_name: "test-vpc-without-subnets"

  tasks:
    - name: Create VPC without subnets
      ec2_vpc:
        name: "{{ vpc_name }}"
        cidr_block: "10.1.0.0/16"
        region: "{{ region }}"
        state: present
        subnets: [] # creating VPC without subnets
      register: vpc

    - debug:
        var: vpc

