
---
- name: Ansible Galaxy Collection List Debug Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Clone a Collection Repository from SCM
      git:
        repo: https://github.com/ansible-collections/ansible-foo.git
        dest: /home/ubuntu/ansible_collections/ansible/foo
      register: git_output

    - name: Debug ansible-galaxy collection list
      command: ansible-galaxy collection list
      register: galaxy_output

    - debug:
        var: galaxy_output.stdout_lines
