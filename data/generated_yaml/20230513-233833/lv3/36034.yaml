
---
- name: Test inventory file error
  hosts: all
  gather_facts: false
  tasks:
    - name: Check if inventory file exists
      stat:
        path: '{{ inventory_file }}'
      register: file_stat
    - name: Fail if inventory file is missing
      fail:
        msg: "Inventory file not found"
      when: not file_stat.stat.exists
