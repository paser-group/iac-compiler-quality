
---
- name: Demonstrate template error while accessing shell module-created variables
  hosts: all
  become: true
  gather_facts: no

  tasks:
  - name: Generate shell command output
    shell: echo "sample output with .' symbol"
    register: shell_output

  - name: Display shell command output
    debug:
      var: shell_output.stdout

  - name: Create template using registered variable
    template:
      src: "{{shell_output.stdout}}"
      dest: "/tmp/template_output"

  - name: Display template error
    debug:
      var: ansible_failed_result['msg']
