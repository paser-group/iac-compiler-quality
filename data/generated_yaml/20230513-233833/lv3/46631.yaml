
- hosts: all
  become: yes

  tasks:
     - name: Update apt-cache
       apt: update_cache=yes cache_valid_time=600
       
     - name: Install packages
       apt:
          name: '{{ item }}'
          state: latest
          with_items:
             - curl
             - git
             - python
             - python-dev
             - libffi-dev
             - libssl-dev
             - python-setuptools
             - python-pip
             - bridge-utils
             - vlan
             - net-tools
             - dnsutils
  
     - name: Network Configuration
       template:
          src: "{{ item.src }}"
          dest: "{{ item.dest }}"
          mode: 0600
       with_items:
          - { src: 'interfaces', dest: '/etc/network/interfaces' }
          
     - name: Setup docker on Ubuntu
       become: yes
       shell: |
          apt-get install -y \
          apt-transport-https \
          ca-certificates \
          curl \
          gnupg-agent \
          software-properties-common
          curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
          add-apt-repository -y "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
          apt-get update
          apt-get install -y docker-ce docker-ce-cli containerd.io
