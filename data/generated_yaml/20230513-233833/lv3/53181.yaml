
---
- name: Recreate ovirt_network issue
  hosts: all
  become: true
  tasks:
    - name: Create ovirt_network
      ovirt_network:
        auth:
          url: "{{ ovirt_auth_url }}"
          username: "{{ ovirt_username }}"
          password: "{{ ovirt_password }}"
        data_center: "{{ ovirt_data_center }}"
        cluster: "{{ ovirt_cluster }}"
        name: "{{ ovirt_network_name }}"
        vlan_tag: "{{ ovirt_vlan_tag }}"
        state: present
      register: create_network

    - name: Check create ovirt_network result
      debug:
        var: create_network

    - name: Edit ovirt_network
      ovirt_network:
        auth:
          url: "{{ ovirt_auth_url }}"
          username: "{{ ovirt_username }}"
          password: "{{ ovirt_password }}"
        data_center: "{{ ovirt_data_center }}"
        cluster: "{{ ovirt_cluster }}"
        name: "{{ ovirt_network_name }}"
        vlan_tag: "{{ ovirt_vlan_tag }}"
        state: present
      register: edit_network

    - name: Check editing ovirt_network result
      debug:
        var: edit_network
