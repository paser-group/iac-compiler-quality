
---
- name: DigitalOcean Module_Utils Params Bug Playbook
  hosts: node1
  gather_facts: no

  vars:
    # DigitalOcean credentials
    do_token: <your_digitalocean_token>

  tasks:
    - name: Install DigitalOcean module dependencies
      pip:
        name:
          - 'requests'
          - 'dopy'
        state: present

    - name: Test the DigitalOcean module_utils library
      digital_ocean: 
        state: present
        name: test-droplet
        size: s-1vcpu-1gb
        region: nyc3
        image: ubuntu-20-04-x64
        api_token: "{{ do_token }}"
      register: test_droplet

    - name: Print DigitalOcean metadata
      debug:
        var: test_droplet.meta
