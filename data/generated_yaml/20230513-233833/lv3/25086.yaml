
---
- name: Ansible Playbook to expose host_filter issues in Ansible
  hosts: localhost
  gather_facts: no

  vars:
    # Define the host_filter criteria
    host_filter: webserver1

  tasks:
    # Use the vmware_host_info module to fetch the details of hosts matching the host_filter criteria
    - name: Fetching host details matching the criteria
      vmware_host_info:
        hostname: '{{ vcenter_hostname }}'
        username: '{{ vcenter_username }}'
        password: '{{ vcenter_password }}'
        validate_certs: False
        inventory_hostname: '{{ host_filter }}'
      register: vmware_host_details

    # Print the fetched host details using the debug module
    - name: Print the fetched host details
      debug:
        var: vmware_host_details
