yaml
- name: Test for 'is defined' error
  hosts: all
  gather_facts: no
  
  vars:
    var1: 'defined'
    var2: '{"var1": "{{ var1 }}"' #missing closing curly brace to generate error
  
  tasks:
  - debug:
      msg: "Var1 is {{ var1 }}"

  - debug:
      msg: "Var2 is defined: {{ var2 is defined }}" # should return false

  - fail:
      msg: "Var2 is not defined"  # should trigger fail since var2 is not correctly defined
    when: var2 is not defined
