
- name: Potential logic issue in TaskExecutor with undefined loop and false conditional
  hosts: all
  gather_facts: no
  tasks:
  - name: Define a variable 'undef_list' as undefined
    set_fact:
      undef_list: "{{ undef_list | default(omit) }}"
    vars:
      undef_list: undefined
  - name: Print undefined variable 'undef_list'
    debug:
      var: undef_list
    when: "undef_list is defined and undef_list"
