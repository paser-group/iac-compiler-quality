
---
- name: Playbook to test the clear_host_errors and gather_facts modules
  hosts: all
  gather_facts: true
  tasks:
    - name: Initiate error state
      shell: "[[ true != false ]]"
      register: result
      ignore_errors: yes
    
    - name: Collect Facts
      debug: var=ansible_facts
      
    - name: Clear Host Errors
      clear_host_errors: 
        hostname: "{{ inventory_hostname }}"

    - name: Confirm if the error state has been cleared
      shell: "[[ true != false ]]"
      register: result
      ignore_errors: true
      
    - name: Display the result
      debug: var=result
