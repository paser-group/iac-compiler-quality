
---
- name: Create syntax error in sysctl.conf
  hosts: all
  become: true

  tasks:
  - name: Add syntax error in sysctl.conf
    blockinfile:
      path: /etc/sysctl.conf
      block: |
        bad_syntax_line
    ignore_errors: yes
    notify: Change sysctl parameters

  handlers:
  - name: Change sysctl parameters
    sysctl:
      name: "{{ item }}"
      value: "1"
      state: present
    with_items:
      - vm.swappiness
      - net.ipv4.ip_forward
