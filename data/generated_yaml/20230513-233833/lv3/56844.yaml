
- name: Create a Gluster Volume
  hosts: gluster_servers
  become: true
  gather_facts: no
  vars:
    brick_path: /data/brick1/gv1
  tasks:
  - name: Create the brick directory
    file:
      path: "{{ brick_path }}"
      state: directory
  - name: Create the Gluster volume
    gluster_volume:
      state: present
      name: gv1
      bricks:
        - "{{ ansible_host }}:{{ brick_path }}"
      replicas: 3
      transport: tcp
    register: result
  - name: Debug
    debug:
      var: result
