
---
- name: Retrieve EC2 Auto Scaling Group Facts
  hosts: all
  become: true
  tasks:

  - name: Retrieve EC2 ASG facts
    ec2_asg_facts:
      region: "{{ ec2_region }}"
      aws_access_key: "{{ aws_access_key }}"
      aws_secret_key: "{{ aws_secret_key }}"
      aws_session_token: "{{ aws_session_token }}"
      policy_names: AutoScalingReadOnly

  - name: Print EC2 ASG facts
    debug:
      var: ansible_facts['ec2_asg']
