
- hosts: all
  gather_facts: no
  vars:
    ansible_ssh_user: root
    ansible_ssh_pass: password
    zone: us-central1-a
    auth_kind: serviceaccount
    service_account_file: "/tmp/gce.json"
  tasks:
  - name: Verify connectivity to GCE inventory plugin
    gce_inventory:
      auth_kind: "{{ auth_kind }}"
      service_account_file: "{{ service_account_file }}"
      project_id: "{{ project_id }}"
      exact_match: "false"
      group_by_zones: "false"
      use_internal_ip: "true"
      hostnames:
        - node1
        - node2
        - node3
      filters:
        - name: 'zone'
          values:
            - "{{ zone }}"
    register: inventory_output

  - debug:
      var: inventory_output

