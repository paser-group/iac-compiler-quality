
- name: Creating LUKS Device
  hosts: all
  become: yes
  
  tasks:
  - name: Create key file
    copy:
      dest: /etc/ansible/keyfile
      content: "this_is_not_a_valid_key"
    ignore_errors: yes

  - name: Create LUKS device
    luks_device:
      force: yes
      name: sda3
      state: present
      device: /dev/sda3
      key_file: /etc/ansible/keyfile
    ignore_errors: yes
  
  - name: Debug Output
    debug:
      var: ansible_failed_task
