
---
- name: Create a new GCP instance
  hosts: localhost
  gather_facts: False
  tasks:
    - name: create GCP instance
      gcp_compute_instance:
        name: test-instance
        machine_type: n1-standard-1
        disks:
        - boot: true
          auto_delete: true
          initialize_params:
            source_image: projects/debian-cloud/global/images/family/debian-9
        network_interfaces:
        - network: default
          access_configs:
          - name: external-nat
            type: ONE_TO_ONE_NAT
      register: gcp_instance
    - debug:
        var: gcp_instance
