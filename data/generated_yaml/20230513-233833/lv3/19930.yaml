
- name: Testing advanced AI agent for bugs in Ansible compiler
  hosts: node1
  become: yes
  become_method: sudo
  gather_facts: yes
  
  vars_prompt:
    - name: auth_username
      prompt: "Enter basic auth username"
      private: no
    - name: auth_password
      prompt: "Enter basic auth password"
      private: yes
  
  tasks:
    - name: Test open_url
      vars:
        url: "httpbin.org/basic-auth/user/passwd"
      uri:
        url: "{{ url }}"
        method: GET
        headers:
          Authorization: "Basic {{ auth_username }}:{{ auth_password }}"
      when: ansible_python.version.major == 3
