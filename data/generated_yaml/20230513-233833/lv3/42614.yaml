
---
- name: Create a VM with IPv6
  hosts: localhost
  gather_facts: no
  vars:
    vm_name: test-vm
    ipv6_address: '2001:0db8:85a3:0000:0000:8a2e:0370:7334'
  tasks:
    - name: Clone a virtual machine in vSphere
      vmware_guest:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: no
        folder: "{{ folder }}"
        name: "{{ vm_name }}"
        template: "{{ template }}"
        disk: "{{ disk }}"
        networks:
          - name: "{{ network_label }}"
            ip: "{{ ipv6_address }}"
            netmask: "{{ ipv6_netmask }}"
      delegate_to: localhost
