
- name: Test Uri module for basic authentication
  hosts: all
  gather_facts: no

  vars:
    uri_endpoint: https://example.com/api/v1/items/

  tasks:
    - name: Test basic authentication with correct username and password
      uri:
        url: "{{uri_endpoint}}"
        method: GET
        user: "user1"
        password: "password1"
        force_basic_auth: yes
      register: result1

    - name: Display result for correct basic authentication
      debug:
        var: result1.status

    - name: Test basic authentication with wrong username and password
      uri:
        url: "{{uri_endpoint}}"
        method: GET
        user: "user2"
        password: "password2"
        force_basic_auth: yes
      register: result2

    - name: Display result for incorrect basic authentication
      debug:
        var: result2.status
