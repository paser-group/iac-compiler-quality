yaml
---
- name: Install packages using pkgng package manager
  hosts: all
  gather_facts: no

  tasks:
  - name: Install packages
    pkgng:
      name: "{{ item }}"
      state: latest
    register: result
    with_items:
      - package1
      - package2
      - package3
  
  - name: Display error messages
    debug:
      msg: "{{ item.msg }}"
    with_items: "{{ result.results }}"
    when: item.failed == true
