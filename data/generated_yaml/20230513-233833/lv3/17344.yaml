
---
- name: Test OpenStack Dynamic Inventory
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Set OpenStack Environment Variables
    set_fact:
      OS_AUTH_URL: "http://{{ os_auth_url }}"
      OS_PROJECT_ID: "{{ os_project_id }}"
      OS_USERNAME: "{{ os_username }}"
      OS_PASSWORD: "{{ os_password }}"
      OS_PROJECT_NAME: "{{ os_project_name }}"
  - name: Get Server List
    os_server_facts:
      auth:
        auth_url: "{{ OS_AUTH_URL }}"
        username: "{{ OS_USERNAME }}"
        password: "{{ OS_PASSWORD }}"
        project_id: "{{ OS_PROJECT_ID }}"
        project_name: "{{ OS_PROJECT_NAME }}"
    register: server_list
  - name: Display Server List
    debug:
      var: server_list
