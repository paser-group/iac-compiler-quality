
- name: CloudFormation Module Error Playbook
  hosts: all
  become: true
  vars:
    stack_name: "sample-stack"
    template_url: "https://s3.amazonaws.com/cloudformation-templates-us-east-1/EC2InstanceWithSecurityGroupSample.template"
  
  tasks:
    - name: Create CloudFormation Stack
      cloudformation:
        stack_name: "{{ stack_name }}"
        state: present
        region: "us-east-1"
        disable_rollback: yes
        template_url: "{{ template_url }}"

   # Assume the user has defined an existing stack with the same name "sample-stack"
    - name: Create duplicate CloudFormation Stack
      cloudformation:
        stack_name: "{{ stack_name }}"
        state: present
        region: "us-east-1"
        disable_rollback: yes
        template_url: "{{ template_url }}"
  