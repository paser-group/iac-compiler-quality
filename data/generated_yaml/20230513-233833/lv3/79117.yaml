
---
- name: Check ansible_default_ipv4 for storing incorrect values
  hosts: all
  gather_facts: yes
  tasks:
  - name: Gather facts about IPv4 addresses of target nodes
    debug:
      var: ansible_default_ipv4

  - name: Change default IPv4 address of one of the target nodes
    set_fact:
      ansible_default_ipv4:
        address: 1.2.3.4
        broadcast: 255.255.255.255
        interface: eth0
        macaddress: 00:11:22:33:44:55
        mtu: 1500
        netmask: 255.255.255.255
    when: inventory_hostname == 'node1'

  - name: Gather facts about IPv4 addresses of target nodes (again)
    debug:
      var: ansible_default_ipv4
