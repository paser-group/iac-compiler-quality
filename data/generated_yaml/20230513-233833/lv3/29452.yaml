
---
- name: Test group_by module for Ansible bug 
  hosts: all
  gather_facts: no
  
  tasks:
  - name: Group hosts by specific variable
    group_by:
      key: "{{ item.some_variable }}"
    with_items:
    - {some_variable: 'value1'}
    - {some_variable: 'value2'}
    - {some_variable: 'value3'}
    
  - name: Check if groups are created
    debug:
      var: groups
