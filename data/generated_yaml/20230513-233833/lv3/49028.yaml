
---
- name: Playbook to recreate confusing error in file module with the mode parameter
  hosts: all
  gather_facts: false

  tasks:
  - name: Create a file with the mode parameter
    file:
      path: "/tmp/test-file"
      state: touch
      mode: 0666
    
  - name: Change the mode of the existing file
    file:
      path: "/tmp/test-file"
      mode: "foo"

