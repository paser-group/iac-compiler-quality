
- name: Configure Uncomplicated Firewall (UFW)
  hosts: all
  become: true
  tasks:
    - name: Enable UFW firewall
      ufw:
        direction: incoming
        policy: allow
      register: ufw_status
    
    - name: Print UFW Changes
      debug:
        var: ufw_status
        
    - name: Assert UFW changes
      assert:
        that:
          - ufw_status.changed == True
          - ufw_status.changed_when == "/etc/default/ufw" # Intentionally setting an incorrect path to recreate the issue
