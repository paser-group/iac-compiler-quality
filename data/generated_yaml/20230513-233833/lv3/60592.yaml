
- hosts: eos_devices
  gather_facts: false
  vars:
    python_eapi_version: "1.8.3"
  tasks:
    - name: Install specific python-eapi version
      pip:
        name: "pyeapi=={{ python_eapi_version }}"
        state: present

    - name: Get EOS facts
      eos_facts:
        host: "{{ inventory_hostname }}"
      register: eos_facts_output

    - name: Display output
      debug:
        var: eos_facts_output
