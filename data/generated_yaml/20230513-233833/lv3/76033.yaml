
---
- name: Test playbook for gcp_compute_instance_group_manager
  hosts: localhost
  gather_facts: false

  vars:
    project_id: "my-project"
    zone: "us-central1-a"
    instance_group_name: "my-instance-group"

  tasks:
    - name: Create instance group
      gcp_compute_instance_group_manager:
        credentials_file: "/path/to/credentials.json"
        project: "{{ project_id }}"
        zone: "{{ zone }}"
        name: "{{ instance_group_name }}"
        size: 1
        state: present

    - name: Simulate an error
      shell: /bin/false
