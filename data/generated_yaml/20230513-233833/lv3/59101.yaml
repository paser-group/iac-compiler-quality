
---
- name: Test Ansible Playbook
  hosts: all
  tasks:
  - name: Test gcp_compute plugin
    gcp_compute:
      project: test-project
      zone: test-zone
      instance_name: test-instance
      auth_kind: serviceaccount
      service_account_file: "/path/service_account.json"
      state: present
      create_ip: True

  - name: Print data to screen
    debug:
      var: ansible_facts.gcp_compute.{{instance_name}}

  - name: Test ansible-inventory 
    shell: |
      ansible-inventory -i /inventory --list
    register: inventory

  - name: Print ansible-inventory output to screen
    debug:
      var: inventory.stdout
