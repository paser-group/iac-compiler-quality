
---

- name: Create Route53 hosted zone
  hosts: localhost
  gather_facts: False
  vars:
    aws_region: us-east-1
    zone_name: example.com.
  tasks:
    - name: Get AWS Account ID
      shell: aws sts get-caller-identity --output text --query 'Account'
      register: aws_account_id
      changed_when: False
    - name: Create Hosted Zone
      route53:
        command: create
        zone: "{{ zone_name }}"
        aws_access_key: "{{ aws_account_id.stdout }}AAAAAAAAAAAAAAAA"
        aws_secret_key: "{{ aws_account_id.stdout }}AAAAAAAAAAAAAAAA"
        aws_region: "{{ aws_region }}"
  