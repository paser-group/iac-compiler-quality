
---
- name: Install .Net 3.5 feature through win_optional_feature module
  hosts: windows
  gather_facts: no

  vars_prompt:
  - name: "password"
    prompt: "Enter password for administrator account: "
    private: yes

  tasks:

  - name: Check if dotnet35 feature is installed
    win_feature:
      name: NetFx3
      state: present

  - name: Install dotnet35 feature
    win_optional_feature:
      feature_name: NetFx3
      state: present
    become: true
    become_method: runas
    become_user: Administrator
    become_password: "{{password}}"

  - name: Verify installation of dotnet35 feature
    win_feature:
      name: NetFx3
      state: present
