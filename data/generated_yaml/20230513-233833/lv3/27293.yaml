
---
- name: Test get_url module
  hosts: all
  gather_facts: no
  tasks:
    - name: Test get_url with incorrect formatting
      get_url:
        url: "https://example.com/api"
        headers:
          content-type: application/json
        dest: "/tmp/index.html"
      register: testResult1

    - name: Display testResult1
      debug:
        var: testResult1

    - name: Test get_url with incorrect URL
      get_url:
        url: "https://wrong_example.com/api"
        headers:
          content-type: application/json
        dest: "/tmp/index.html"
      register: testResult2

    - name: Display testResult2
      debug:
        var: testResult2

    - name: Test get_url with incorrect response status code
      get_url:
        url: "https://example.com/api"
        headers:
          content-type: application/json
        dest: "/tmp/index.html"
        force: yes
        validate_certs: no
      register: testResult3

    - name: Display testResult3
      debug:
        var: testResult3
