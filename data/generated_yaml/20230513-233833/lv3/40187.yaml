
---
- name: Creating a playbook to expose issues related to configuration errors using EAPI connection in eos_config
  hosts: all
  gather_facts: no
  tasks:

  - name: Checking if interface exists
    eos_command:
      commands: sh int {{ interface }}
      provider: "{{ eos_provider }}"
    register: int_status

  - name: Displaying the status of the interface
    debug:
      var: int_status.stdout_lines

  - name: Configuring interface
    eos_config:
      lines:
        - interface {{ interface }}
        - ip address {{ ip_address }}/{{ subnet_mask }}
      parents: "interface {{ interface }}"
