- name: Playbook to find latent type-related bugs in Ansible
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required dependencies
      apt:
        name: python3-pip
        state: present

    - name: Install required modules
      pip:
        name: vertica-python
        state: present

    - name: Include community collection
      include_role:
        name: community.general

    - name: Add Vertica schema
      community.general.vertica_schema:
        cluster: "mycluster"
        db: "mydb"
        login_user: "admin"
        login_password: "admin123"
        schema: "myschema"
        owner: "myuser"
        port: "5433"
        state: present
        create_roles: "true"
        usage_roles: "false"