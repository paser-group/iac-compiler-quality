---
- name: Test Ansible playbook for avi_poolgroupdeploymentpolicy module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create Pool Group Deployment Policy
      community.network.avi_poolgroupdeploymentpolicy:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ pool_group_name }}"  # Heuristic: Potential latent type-related bugs.
        rules:
          - name: rule1
            enable: true
            server_reselect: false
            action:
              index:
                pool: "/api/pool/{{ pool_name }}"  # Heuristic: Variable concatenation with strings.
                priority_label: "{{ priority_label }}"  # Heuristic: Potential latent type-related bugs.
        tenant_uuid: "{{ tenant_uuid }}"
      register: result

    - name: Print the result
      debug:
        var: result