---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install Bundler
      community.general.bundler:
        state: "{{ ['present', 'absent'] | random }}"
        binstub_directory: "/usr/local/bin"
        chdir: "/path/to/project"
        clean: "{{ ['true', 'false', '!null'] | random }}"
        deployment_mode: "{{ ['true', 'false', '!null'] | random }}"
        exclude_groups: "{{ ['group1', 'group2', '!null'] | random }}"
        executable: "{{ ['ruby', 'gem', '!null'] | random }}"
        extra_args: "{{ ['--option1', '--option2', '!null'] | random }}"
        gem_path: "{{ ['/path/to/gems', '!null'] | random }}"
        gemfile: "{{ ['/path/to/Gemfile', '!null'] | random }}"
        local: "{{ ['true', 'false', '!null'] | random }}"
        user_install: "{{ ['true', 'false', '!null'] | random }}"
      register: installer_output

    - debug:
        var: installer_output

    - name: Uninstall Bundler
      community.general.bundler:
        state: "{{ ['present', 'absent'] | random }}"
        binstub_directory: "{{ ['none', '!null'] | random }}"
        chdir: "{{ ['none', '!null'] | random }}"
        clean: "{{ ['true', 'false', '!null'] | random }}"
        deployment_mode: "{{ ['true', 'false', '!null'] | random }}"
        exclude_groups: "{{ ['group1', 'group2', '!null'] | random }}"
        executable: "{{ ['ruby', 'gem', '!null'] | random }}"
        extra_args: "{{ ['--option1', '--option2', '!null'] | random }}"
        gem_path: "{{ ['/path/to/gems', '!null'] | random }}"
        gemfile: "{{ ['/path/to/Gemfile', '!null'] | random }}"
        local: "{{ ['true', 'false', '!null'] | random }}"
        user_install: "{{ ['true', 'false', '!null'] | random }}"
      register: uninstaller_output

    - debug:
        var: uninstaller_output