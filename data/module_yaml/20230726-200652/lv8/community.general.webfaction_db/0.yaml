- name: Test Ansible module for WebFaction database management
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add a database
      community.general.webfaction_db:
        login_name: admin
        login_password: Admin123
        machine: "{{ inventory_hostname }}"
        name: mydb
        password: Password123
        state: "{{ '&null' }}"
        type: mysql
      register: result_add

    - name: Display the result of adding a database
      debug:
        var: result_add

    - name: Remove the database
      community.general.webfaction_db:
        login_name: admin
        login_password: Admin123
        machine: "{{ inventory_hostname }}"
        name: mydb
        state: absent
      register: result_remove

    - name: Display the result of removing a database
      debug:
        var: result_remove