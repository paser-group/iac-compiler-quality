---
- name: Test Ansible Playbook for Netscaler Server
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create new netscaler server entry
      community.network.netscaler_server:
        nsip: "10.1.1.1"
        nitro_user: "admin"
        nitro_pass: "password"
        nitro_protocol: "http"
        nitro_timeout: 10
        validate_certs: False
        state: present
        name: "{{ item.name }}"
        comment: !null
        delay: !null
        disabled: "{{ item.disabled }}"
        domain: !null
        domainresolveretry: !null
        graceful: "{{ item.graceful }}"
        ipaddress: !null
        ipv6address: "{{ item.ipv6address }}"
        translationip: !null
        translationmask: !null
        td: !null
        save_config: "{{ item.save_config }}"
      loop:
        - { name: "Server 1", disabled: False, graceful: False, ipv6address: False, save_config: True }
        - { name: "Server 2", disabled: !null, graceful: True, ipv6address: True, save_config: !null }