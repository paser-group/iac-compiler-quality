- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    l2_interfaces:
      - name: eth0
        mode: !null
        state: !null
        access_vlan: !null
        trunk_vlans: !null
        native_vlan: !null
        trunk_allowed_vlans: !null
        aggregate: !null

  tasks:
    - name: Manage Layer-2 interfaces
      community.network.cnos_l2_interface:
        name: "{{ item.name }}"
        mode: "{{ item.mode }}"
        state: "{{ item.state }}"
        access_vlan: "{{ item.access_vlan }}"
        trunk_vlans: "{{ item.trunk_vlans }}"
        native_vlan: "{{ item.native_vlan }}"
        trunk_allowed_vlans: "{{ item.trunk_allowed_vlans }}"
        aggregate: "{{ item.aggregate }}"
      with_items: "{{ l2_interfaces }}"