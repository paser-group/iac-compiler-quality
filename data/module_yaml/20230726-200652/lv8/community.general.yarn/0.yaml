---
- name: Test Heuristic-Based Type-Related Bugs in Ansible Compiler
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install yarn package
      community.general.yarn:
        name: "yarn"
        state: present
        version: "{{ item }}"
      with_items: "{{ ['1.0.0', '2.0.0', '3.0.0'] | shuffle }}"
      loop_control:
        loop_var: item_var

    - name: Test with !null configuration values
      community.general.yarn:
        name: "yarn"
        state: present
        version: "{{ item_var }}"
        path: "{{ null }}"
        registry: "{{ null }}"
        global: "{{ null }}"
        executable: "{{ null }}"
        ignore_scripts: "{{ null }}"
        production: "{{ null }}"
      loop: "{{ ['1.0.0', '2.0.0', '3.0.0'] | shuffle }}"
      loop_control:
        loop_var: item_var