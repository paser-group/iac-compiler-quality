- name: Add or remove mailboxes
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add mailbox
      community.general.webfaction_mailbox:
        login_name: "myusername"
        login_password: "mypassword"
        mailbox_name: "newmailbox"
        mailbox_password: "mailboxpassword"
        state: "present"
      register: result
      ignore_errors: true

    - name: Print debug output
      debug:
        var: result

    - name: Remove previously added mailbox
      community.general.webfaction_mailbox:
        login_name: "myusername"
        login_password: "mypassword"
        mailbox_name: "newmailbox"
        state: "absent"
      register: result2
      ignore_errors: true

    - name: Print debug output
      debug:
        var: result2

- name: Test Case 1 - Add mailbox with null configuration values
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add mailbox with null values
      community.general.webfaction_mailbox:
        login_name: null
        login_password: null
        mailbox_name: null
        mailbox_password: null
        state: "present"
      register: result
      ignore_errors: true

    - name: Print debug output
      debug:
        var: result

- name: Test Case 2 - Remove mailbox with null configuration values
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Remove mailbox with null values
      community.general.webfaction_mailbox:
        login_name: null
        login_password: null
        mailbox_name: null
        state: "absent"
      register: result
      ignore_errors: true

    - name: Print debug output
      debug:
        var: result