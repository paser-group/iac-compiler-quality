---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up AutoScaleLaunchConf
      community.network.avi_autoscalelaunchconfig:
        controller: "https://{{ ansible_host }}"
        username: "{{ avi_username }}"
        password: "{{ avi_password }}"
        tenant: "{{ avi_tenant }}"
        api_context:
          api_version: "20.1.2"
        avi_credentials:
          username: "{{ avi_username }}"
          password: "{{ avi_password }}"
        name: "{{ item.name }}"
        tenant_uuid: "{{ item.tenant_uuid | default('!null') }}"
        image_id: "{{ item.image_id | default('!null') }}"
        use_external_asg: "{{ item.use_external_asg | default('!null') }}"
        openstack: "{{ item.openstack | default('!null') }}"
        mesos: "{{ item.mesos | default('!null') }}"
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_disable_session_cache_as_fact: false
      loop:
        - name: Example Launch Config 1
          tenant_uuid: '!null'
          image_id: '!null'
          use_external_asg: true
          openstack: '!null'

        - name: Example Launch Config 2
          use_external_asg: false
          mesos: '!null'

        - name: Example Launch Config 3
          tenant_uuid: 'dummy'
          image_id: 'dummy'
          use_external_asg: '!null'
          openstack: '!null'