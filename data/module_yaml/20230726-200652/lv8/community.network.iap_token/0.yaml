---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    iap_fqdn: null
    iap_port: null
    username: null
    password: null
    validate_certs: null

  tasks:
    - name: Include the community.network.iap_token module
      include_tasks: iap_token.yml
      vars:
        iap_fqdn: "{{ iap_fqdn }}"
        iap_port: "{{ iap_port }}"
        username: "{{ username }}"
        password: "{{ password }}"
        validate_certs: "{{ validate_certs | bool(default=false) }}"
        
  handlers:
    - name: Print debug output
      debug:
        var: ansible_task_result