- name: Test community.general.github_key module
  hosts: localhost
  gather_facts: false
  vars:
    pubkey_file: /path/to/public_key.pub
    token: <your-github-token>

  tasks:
    - name: Create GitHub key
      community.general.github_key:
        name: my_key
        pubkey: "{{ pubkey_file }}"
        state: present
        force: "{{ enable_force | default(false) }}"
        token: "{{ token }}"
      register: result

    - name: Print module output
      debug:
        var: result

    - name: Check for errors
      assert:
        that: "result is success"
        msg: "GitHub key creation failed"

    # Test case: Use !null as configuration values in manifests
    - name: Test case - Use !null as configuration values in manifests
      community.general.github_key:
        name: null
        pubkey: null
        state: null
        force: null
        token: null
      register: result_case
      changed_when: false

    - name: Print module output
      debug:
        var: result_case

    - name: Check for errors
      assert:
        that: "result_case is success"
        msg: "Use !null as configuration values in manifests failed"