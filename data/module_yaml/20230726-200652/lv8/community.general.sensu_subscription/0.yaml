- name: Manage Sensu Subscriptions
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Subscribe to Sensu client
      community.general.sensu_subscription:
        backup: !null
        name: client_subscription
        path: /etc/sensu/client.json
        state: present
      
    - name: Subscribe to Sensu server
      community.general.sensu_subscription:
        backup: !null
        name: server_subscription
        path: /etc/sensu/server.json
        state: present