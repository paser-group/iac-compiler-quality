---
- name: Test playbook for logentries_msg module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include logentries_msg module
      include_role:
        name: community.general.logentries_msg
        public: yes

    - name: Test with null configuration values
      community.general.logentries_msg:
        api: !ruby/regexp null
        msg: !ruby/regexp null
        port: !ruby/regexp null
        token: !ruby/regexp null
      register: result

    - name: Debug module output
      debug:
        var: result

    - name: Fail task if module returned a successful result
      fail:
        msg: "Module executed successfully, bug not found!"
      when: result is not failed