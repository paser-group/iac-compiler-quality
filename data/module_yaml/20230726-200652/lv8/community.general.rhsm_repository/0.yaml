---
- name: Manage RHSM repositories
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add RHSM repositories
      community.general.rhsm_repository:
        name: "{{ rhsm_repos }}"
        purge: !null
        state: present

    - name: Remove RHSM repositories
      community.general.rhsm_repository:
        name: "{{ rhsm_repos }}"
        purge: true
        state: absent