- name: Test playbook for the ipa_dnsrecord module
  hosts: localhost
  gather_facts: false

  vars:
    ipa_host: "ipa.example.com"
    ipa_user: "admin"
    ipa_pass: "password"
    ipa_port: 443
    ipa_proto: "https"
    ipa_timeout: 10
    validate_certs: false

    record_name: "host1"
    record_ttl: 3600
    record_type: "A"
    record_value: "10.1.1.5"

    zone_name: "example.com"

  tasks:
    - name: Create DNS record
      community.general.ipa_dnsrecord:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_proto: "{{ ipa_proto }}"
        ipa_timeout: "{{ ipa_timeout }}"
        validate_certs: "{{ validate_certs }}"
        record_name: "{{ record_name }}"
        record_ttl: "{{ record_ttl }}"
        record_type: "{{ record_type }}"
        record_value: "{{ record_value }}"
        state: present
        zone_name: "{{ zone_name }}"
      register: result

    - name: Display playbook debug output
      debug:
        var: result