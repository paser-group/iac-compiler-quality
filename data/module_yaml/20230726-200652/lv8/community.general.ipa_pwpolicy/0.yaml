---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  vars:
    ipa_host: "example.com"
    ipa_user: "admin"
    ipa_pass: "password"
  tasks:
    - name: Set FreeIPA Password Policy
      community.general.ipa_pwpolicy:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        state: present
        group: "default"
        failinterval: "!null"
        historylength: "!null"
        ipa_port: 443
        ipa_prot: "https"
        ipa_timeout: "!null"
        lockouttime: "!null"
        maxfailcount: "!null"
        maxpwdlife: "!null"
        minclasses: "!null"
        minlength: "!null"
        minpwdlife: "!null"
        priority: "!null"
        validate_certs: true
      register: pwpolicy_result

    - name: Debug Password Policy
      debug:
        var: pwpolicy_result