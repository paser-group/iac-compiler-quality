---
- name: Test for latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    avi_credentials:
      controller: "{{ ansible_host }}"
      username: "admin"
      password: "password"
      tenant: "default"

  tasks:
    - name: Create Avi role
      community.network.avi_role:
        avi_credentials: "{{ avi_credentials }}"
        controller: "https://{{ ansible_hostname }}"
        state: 5
        name: "test_role"
        tenant: "Policies"
      register: avi_role

    - name: Debug role info
      debug:
        var: avi_role