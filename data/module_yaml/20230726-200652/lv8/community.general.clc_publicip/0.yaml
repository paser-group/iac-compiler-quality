---
- name: Add and Delete Public IPs on Servers
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Add Public IP
      community.general.clc_publicip:
        state: present
        server_ids: !null
        ports: !null
        protocol: !null
        wait: !null
      vars:
        ansible_network_resources:
          - subnet: 10.1.1.0/24
            gateway: 10.1.1.254

    - name: Delete Public IP
      community.general.clc_publicip:
        state: absent
        server_ids: !null
        ports: !null
        protocol: !null
        wait: !null
      vars:
        ansible_network_resources:
          - subnet: 10.1.1.0/24
            gateway: 10.1.1.254