---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Execute ocapi_command module with NULL value for baseuri
      community.general.ocapi_command:
        baseuri: !null
        category: "{{ item.category }}"
        command: "{{ item.command }}"
        job_name: "{{ item.job_name }}"
        password: "{{ item.password }}"
        proxy_slot_number: "{{ item.proxy_slot_number }}"
        timeout: "{{ item.timeout }}"
        update_image_path: "{{ item.update_image_path }}"
        username: "{{ item.username }}"
      loop:
        - category: "network"
          command: "show version"
          job_name: "Network Version"
          password: "password123"
          proxy_slot_number: 1
          timeout: 60
          update_image_path: "/path/to/image"
          username: "admin"
        - category: "interfaces"
          command: "show interfaces"
          job_name: "Interface Status"
          password: "password456"
          proxy_slot_number: 2
          timeout: 30
          update_image_path: "/path/to/another/image"
          username: "user"