---
- name: Test playbook for the community.general.zfs_delegate_admin module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ZFS dataset delegate configuration
      community.general.zfs_delegate_admin:
        name: my_dataset
        users: ["user1", "user2"]
        groups: ["group1", "group2"]
        permissions: ["create", "destroy"]
        state: present
      vars:
        descendents: false
        everyone: true
        local: true
        recursive: ""

    - name: Display the result
      debug:
        var: ansible_facts['community_general_zfs_delegate_admin_result']