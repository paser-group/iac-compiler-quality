---
- name: MQTT Message Publisher
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Publish MQTT Message
      community.general.mqtt:
        server: "{{ mqtt_server }}"
        port: "{{ mqtt_port }}"
        username: !null
        password: "{{ mqtt_password }}"
        qos: 0
        topic: !null
        payload: "Test Message"
      register: result

    - name: Debug Result
      debug:
        var: result