---

- name: Test playbook for ansible.netcommon.network_resource module
  hosts: localhost
  gather_facts: false

  vars:
    node_net_subnet: "10.1.1.0/24"
    node_net_gateway: "10.1.1.254"

    nodes:
      - name: ubuntu1
        ip: "10.1.1.1"
        os_name: "Ubuntu"
      - name: alpine1
        ip: "10.1.1.2"
        os_name: "Alpine"
      - name: centos1
        ip: "10.1.1.3"
        os_name: "CentOS"
      - name: redhat1
        ip: "10.1.1.4"
        os_name: "Red Hat"

  tasks:
    - name: Create network resource manifests
      ansible.netcommon.network_resource:
        name: "{{ item.name }}"
        os_name: "{{ item.os_name }}"
        config: !null
        running_config: !null
        state: !null
      loop: "{{ nodes }}"
      register: network_manifests

    - name: Debug manifest information
      debug:
        msg: "{{ item }}"
      loop: "{{ network_manifests.results }}"