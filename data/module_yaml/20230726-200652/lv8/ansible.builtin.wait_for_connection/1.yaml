---
- name: Wait for hosts to be available
  hosts: all
  gather_facts: false

  tasks:
    - name: Wait for connection
      ansible.builtin.wait_for_connection:
        connect_timeout: "{{ conn_timeout|default(30) }}"
        delay: "{{ delay|default(5) }}"
        sleep: "{{ sleep|default(1) }}"
        timeout: "{{ timeout|default(300) }}"