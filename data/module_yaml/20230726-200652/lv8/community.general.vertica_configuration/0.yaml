---
- name: Update Vertica configuration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include required role
      include_role:
        name: community.general.vertica

    - name: Update Vertica configuration
      community.general.vertica_configuration:
        cluster: my_cluster
        db: my_database
        login_user: admin
        login_password: adminpass
        parameter: "{{ item.parameter }}"
        value: "{{ item.value | default('!null') }}"
        port: "5433"
      loop:
        - { parameter: "parameter_1", value: "!null" }  # Test case 1
        - { parameter: "parameter_2", value: "value_2" }  # Test case 2