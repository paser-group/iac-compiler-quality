---
- name: Test iptables module for type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test iptables module
      ansible.builtin.iptables:
        action: "{{ item.action | default('append') }}"
        chain: "{{ item.chain | default('INPUT') }}"
        state: "{{ item.state | default('present') }}"
        policy: "{{ item.policy | default('ACCEPT') }}"
        destination: "{{ item.destination | default('') }}"
        destination_port: "{{ item.destination_port | default('') }}"
        syn: "{{ item.syn | default('') }}"
        rule_num: "{{ item.rule_num | default('') }}"
        to_destination: "{{ item.to_destination | default('') }}"
        comment: "!null"
      loop:
        - {}
        - action: "!null"
          chain: "!null"
          rule_num: "!null"
          state: "!null"
          policy: "!null"
          destination: "!null"
          destination_port: "!null"
          syn: "!null"
          to_destination: "!null"