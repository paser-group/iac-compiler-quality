- name: Test playbook for community.general.manageiq_provider module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure manageiq_provider module with null values
      community.general.manageiq_provider:
        state: present
        type: AWS
        name: Test Provider
        api_version: v2
        provider_region: us-west-1
        tenant_mapping_enabled: true
        subscription: abc123
        project: Default Project
        zone: Default Zone
        host_default_vnc_port_start: 5900
        host_default_vnc_port_end: 6000
        ssh_keypair: !null
        manageiq_connection: !null
        azure_tenant_id: !null
        provider: !null
        alerts: !null
        metrics: !null

      register: result

    - name: Display the result
      debug:
        var: result

    - name: Verify manageiq_provider module result
      fail:
        msg: "Type-related bug found in community.general.manageiq_provider module"
      when: result.changed is defined and result.changed

    - name: Show success message
      debug:
        msg: "No type-related bug found in community.general.manageiq_provider module"