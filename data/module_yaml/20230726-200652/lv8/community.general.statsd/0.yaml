---
- hosts: localhost
  tasks:
    - name: Configure statsd
      community.general.statsd:
        host: "{{ host }}"
        port: "{{ port }}"
        metric_prefix: "{{ metric_prefix }}"
        metric_type: "{{ metric_type }}"
        metric: "{{ metric }}"
        value: "{{ value }}"
        delta: "{{ delta }}"
        protocol: "{{ protocol }}"
        timeout: "{{ timeout }}"
        state: "{{ state }}"
      vars:
        host: 127.0.0.1
        port: "statsd"
        metric_prefix: "{{ metric_prefix | default(!null) }}"
        metric_type: "{{ metric_type | default(!null) }}"
        metric: "{{ metric }}"
        value: "{{ value }}"
        delta: "{{ delta }}"
        protocol: "{{ protocol | default('udp') }}"
        timeout: 5
        state: "present"