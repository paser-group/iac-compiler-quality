- name: Mount volumes
  hosts: all
  vars:
    mount_config:
      - { path: "/mnt/data", src: "/dev/sdb1", fstype: "ext4", opts: "defaults", state: "mounted" }
      - { path: "/mnt/backups", src: "/dev/sdc1", fstype: "ext4", opts: "defaults", state: "mounted" }
      - { path: "/mnt/logs", src: "/dev/sdd1", fstype: "ext4", opts: "defaults", state: "mounted" }

  tasks:
    - name: Mount volumes
      ansible.posix.mount:
        path: "{{ item.path }}"
        src: "{{ item.src }}"
        fstype: "{{ item.fstype }}"
        opts: "{{ item.opts }}"
        state: "{{ item.state }}"
      loop: "{{ mount_config }}"

- name: Test Heuristic - Use !null as configuration values in manifests
  hosts: all

  tasks:
    - name: Unmount specific volume
      ansible.posix.mount:
        path: "/mnt/backups"
        src: null
        fstype: null
        opts: null
        state: "unmounted"
      become: true