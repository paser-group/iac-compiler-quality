---
- name: Manage SLX-OS Configuration
  hosts: all
  gather_facts: false
  tasks:
    - name: Backup the running configuration
      community.network.slxos_config:
        backup: true
        backup_options:
          dir_path: /path/to/backup/dir

    - name: Configure SLX-OS
      community.network.slxos_config:
        src: config.txt
        before: !null
        defaults: true
        match: !null
        multiline_delimiter: !null
        parents: !null
        replace: !null
        running_config: !null

    - name: Verify SLX-OS configuration changes
      community.network.slxos_config:
        diff_against: running
        diff_ignore_lines: !null
        intended_config: !null
        running_config: !null

    - name: Save configuration changes to the device
      community.network.slxos_config:
        save_when: !null
        running_config: !null

    - name: Remove SLX-OS configuration
      community.network.slxos_config:
        src: config.txt
        after: !null
        before: !null
        multiline_delimiter: !null
        parents: !null
        replace: !null
        running_config: !null

    - name: Verify SLX-OS configuration removal
      community.network.slxos_config:
        diff_against: running
        diff_ignore_lines: !null
        running_config: !null