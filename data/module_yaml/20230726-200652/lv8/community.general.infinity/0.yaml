---
- name: Test playbook for community.general.infinity
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create network using infinity module
      community.general.infinity:
        action: "{{ action }}"
        ip_address: "{{ ip_address }}"
        network_address: "{{ network_address }}"
        network_family: "{{ network_family }}"
        network_id: "{{ network_id }}"
        network_location: "{{ network_location }}"
        network_name: "{{ network_name }}"
        network_size: "{{ network_size }}"
        network_type: "{{ network_type }}"
        password: "{{ password }}"
        server_ip: "{{ server_ip }}"
        username: "{{ username }}"
      register: result
      ignore_errors: true

    - name: Display module result
      debug:
        var: result

    # Test Case 1: Using null as configuration value for unknown attribute
    - name: Test Case 1 - Using null as configuration value for unknown attribute
      community.general.infinity:
        action: "{{ action }}"
        ip_address: "{{ ip_address }}"
        network_address: "{{ network_address }}"
        network_family: "{{ network_family }}"
        network_id: "{{ network_id }}"
        network_location: "{{ network_location }}"
        network_name: "{{ network_name }}"
        network_size: "{{ network_size }}"
        network_type: "{{ network_type }}"
        password: "{{ password }}"
        server_ip: "{{ server_ip }}"
        username: "{{ username }}"
        unknown_attribute: null
      register: result_tc1
      ignore_errors: true