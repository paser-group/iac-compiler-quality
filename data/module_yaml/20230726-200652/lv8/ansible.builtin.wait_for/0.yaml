- name: Ansible Type-Related Bug Testing
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Wait for a condition
      ansible.builtin.wait_for:
        host: "{{ host }}"
        port: "{{ port }}"
        state: "{{ state }}"
        timeout: "{{ timeout }}"
        connect_timeout: "{{ connect_timeout }}"
        delay: "{{ delay }}"
        sleep: "{{ sleep }}"
        exclude_hosts: "{{ exclude_hosts }}"
        active_connection_states: "{{ active_connection_states }}"
        search_regex: "{{ search_regex }}"
        path: "{{ path }}"
        msg: "{{ msg }}"
        # Injecting a null configuration value
        register: result
      vars:
        host: "10.1.1.1"
        port: 22
        state: null
        timeout: null
        connect_timeout: 10
        delay: 5
        sleep: null
        exclude_hosts:
          - 10.1.1.3
        active_connection_states:
          - established
          - close_wait
        search_regex: "[a-z]+"
        path: /var/log/service.log
        msg: "Condition is met"

    - name: Debug Result
      debug:
        var: result