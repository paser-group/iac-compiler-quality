---
- name: Configure Keycloak Authentication
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Keycloak Authentication
      community.general.keycloak_authentication:
        alias: "test_auth"
        auth_client_id: "client_id"
        auth_client_secret: "client_secret"
        auth_keycloak_url: "https://keycloak.example.com"
        auth_password: "password"
        auth_realm: "my_realm"
        auth_username: "admin"
        authenticationExecutions:
          - providerId: "basic-auth"
            flowId: !null
            requirement: "REQUIRED"
            displayName: "Basic Authentication"
        connection_timeout: "10"
        !null: "null_value"
        state: "present"
        token: ~

      register: result

    - name: Debug result
      debug:
        var: result