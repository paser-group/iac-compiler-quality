---
- name: Test playbook for community.general.vexata_eg module
  hosts: localhost
  gather_facts: false

  vars:
    array_name: "VexArray"
    ig_name: "ExportGroup"
    pg_name: "PortalGroup"
    vg_name: "VolumeGroup"
    null_value: "!null"

  tasks:

    - name: Create a new export group
      community.general.vexata_eg:
        array: "{{ array_name }}"
        ig: "{{ ig_name }}"
        name: "{{ ig_name }}"
        password: "{{ ig_name }}"
        pg: "{{ pg_name }}"
        state: present
        user: "{{ ig_name }}"
        validate_certs: true
        vg: "{{ vg_name }}"
        null_value: "{{ null_value }}"
      register: result
      ignore_errors: true

    - name: Debug the module output
      debug:
        var: result