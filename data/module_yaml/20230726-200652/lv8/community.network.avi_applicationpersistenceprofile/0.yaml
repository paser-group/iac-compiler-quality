---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Application Persistence Profile
      community.network.avi_applicationpersistenceprofile:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "{{ state }}"
        name: "{{ persistence_profile_name }}"
        persistence_type: !python/object:__main__.MyTypeNull {}
        avi_credentials:
          controller: "{{ controller }}"
          username: "{{ username }}"
          password: "{{ password }}"

      vars:
        persistence_profile_name: "test-profile"
        state: "present"
        controller: !python/object:__main__.MyTypeString {value: "controller_value"}
        username: !python/object:__main__.MyTypeString {value: "username_value"}
        password: !python/object:__main__.MyTypeString {value: "password_value"}
        tenant: !python/object:__main__.MyTypeString {value: "tenant_value"}

...