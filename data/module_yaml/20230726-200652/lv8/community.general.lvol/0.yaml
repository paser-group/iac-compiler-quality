- name: Configure Logical Volumes
  hosts: localhost
  become: true
  gather_facts: false

  vars:
    lv_configurations:
      # Test Case 1: Active set to null
      - name: test-lv-null-active
        active: !null
        lv: /dev/mapper/vg01-lv01
        vg: vg01
        state: present

      # Test Case 2: Force set to null
      - name: test-lv-null-force
        force: !null
        lv: /dev/mapper/vg02-lv02
        vg: vg02
        state: present

      # Test Case 3: Size set to null
      - name: test-lv-null-size
        size: !null
        lv: /dev/mapper/vg03-lv03
        vg: vg03
        state: present

  tasks:
    - name: Configure Logical Volumes
      community.general.lvol:
        lv: "{{ item.lv }}"
        vg: "{{ item.vg }}"
        state: "{{ item.state }}"
        active: "{{ item.active }}"
        force: "{{ item.force }}"
        size: "{{ item.size }}"
      loop: "{{ lv_configurations }}"

    - name: Debug Output
      debug:
        msg: "Logical volume {{ item.lv }} configured successfully"
      loop: "{{ lv_configurations }}"