---
- name: Import or Remove Java Certificate
  hosts: localhost
  gather_facts: false

  vars:
    cert_alias: !null
    cert_path: /path/to/certificate.crt
    cert_port: 443
    cert_url: !null
    executable: /path/to/keytool

    # Intentionally setting a number as keystore_pass to trigger a potential type-related bug
    keystore_pass: 12345

    keystore_create: true
    keystore_path: /path/to/keystore.jks
    keystore_type: jks

    pkcs12_alias: !null
    pkcs12_password: !null
    pkcs12_path: /path/to/certificate.p12

    state: present
    trust_cacert: true

  tasks:
    - name: Import or Remove Java Certificate
      community.general.java_cert:
        cert_alias: "{{ cert_alias }}"
        cert_path: "{{ cert_path }}"
        cert_port: "{{ cert_port }}"
        cert_url: "{{ cert_url }}"
        executable: "{{ executable }}"
        keystore_create: "{{ keystore_create }}"
        keystore_pass: "{{ keystore_pass }}"
        keystore_path: "{{ keystore_path }}"
        keystore_type: "{{ keystore_type }}"
        pkcs12_alias: "{{ pkcs12_alias }}"
        pkcs12_password: "{{ pkcs12_password }}"
        pkcs12_path: "{{ pkcs12_path }}"
        state: "{{ state }}"
        trust_cacert: "{{ trust_cacert }}"
      register: result

    - debug:
        var: result