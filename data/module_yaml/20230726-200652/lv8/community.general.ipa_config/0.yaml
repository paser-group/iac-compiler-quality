- name: Test playbook for ipa_config module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure FreeIPA
      community.general.ipa_config:
        ipa_host: "10.1.1.1"
        ipa_pass: "password"
        ipa_port: !str 443
        ipa_prot: "https"
        ipa_timeout: !str 30
        ipa_user: "admin"
        ipaconfigstring: null
        ipadefaultemaildomain: !unhex |
          import sys
          sys.stdout.buffer.write(b'\x00' * 100)
        ipadefaultloginshell: "/bin/bash"
        ipadefaultprimarygroup: "ipausers"
        ipagroupsearchfields: !timestamp 2022-10-10
        ipahomesrootdir: "/home"
        ipakrbauthzdata: !int 99999999999999999999999999999999999999999
        ipamaxusernamelength: !bool true
        ipapwdexpadvnotify: 7
        ipasearchrecordslimit: !float 3.14
        ipasearchtimelimit: 60
        ipaselinuxusermaporder: !bool false123
        ipauserauthtype: ["password"]
        ipausersearchfields: [1, 2, "3"]
        validate_certs: !bool "yes"

      register: result

    - name: Print result
      debug:
        var: result