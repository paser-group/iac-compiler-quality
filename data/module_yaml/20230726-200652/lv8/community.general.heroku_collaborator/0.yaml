---
- name: Test playbook for 'community.general.heroku_collaborator' module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Add collaborator to Heroku app
      community.general.heroku_collaborator:
        api_key: "{{ api_key }}"
        apps: "{{ apps }}"
        state: present
        suppress_invitation: true
        user: "{{ user }}"
      register: add_collaborator_output
      when: add_collaborator | default(true) | bool

    - name: Debug add_collaborator_output
      debug:
        var: add_collaborator_output

    - name: Delete collaborator from Heroku app
      community.general.heroku_collaborator:
        api_key: "{{ api_key }}"
        apps: "{{ apps }}"
        state: absent
        suppress_invitation: false
        user: "{{ user }}"
      register: delete_collaborator_output
      when: delete_collaborator | default(true) | bool

    - name: Debug delete_collaborator_output
      debug:
        var: delete_collaborator_output