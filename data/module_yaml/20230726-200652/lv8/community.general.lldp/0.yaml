---
- name: Ansible Latent Bug Finder Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Install required dependencies
      apt:
        name: lldpd
        state: latest
      when: ansible_distribution == 'Ubuntu'

    - name: Gather LLDP information
      community.general.lldp:
      register: lldp_output

    - name: Debug LLDP information
      debug:
        msg: "{{ lldp_output }}"

    - name: Verify LLDP information
      assert:
        that:
          - lldp_output.lldp != !null
        fail_msg: "LLDP information is not present!"