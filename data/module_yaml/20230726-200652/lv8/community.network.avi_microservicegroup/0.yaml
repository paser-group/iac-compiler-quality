- name: Ansible Latent Type-Related Bug Finder Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Load required Ansible modules
      include_vars:
        file: "{{ playbook_dir }}/vars.yml"

    - name: Create MicroServiceGroup with type-related bug
      community.network.avi_microservicegroup:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ name | default('MyMicroServiceGroup') }}"
        state: "{{ state | default('present') }}"
        service_refs: "{{ service_refs }}"
        tenant_uuid: "!null"  # Latent type-related bug - using !null as configuration value
        api_context: "!null"  # Latent type-related bug - using !null as configuration value
        avi_credentials:
          controller: "{{ controller }}"
          username: "{{ username }}"
          password: "{{ password }}"
          tenant: "{{ tenant }}"
        avi_disable_session_cache_as_fact: true
        api_version: "17.1.1"
      register: result

    - name: Display result
      debug:
        var: result