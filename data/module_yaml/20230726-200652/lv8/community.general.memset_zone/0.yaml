- name: Create and delete Memset zone
  hosts: localhost
  gather_facts: false
  vars:
    zone_name: "example.com"
    ttl: 3600
    force: !null

  tasks:
    - name: Create zone
      community.general.memset_zone:
        api_key: "YOUR_API_KEY"
        name: "{{ zone_name }}"
        state: present
        ttl: "{{ ttl }}"
        force: "{{ force }}"
      register: zone_created

    - name: Delete zone
      community.general.memset_zone:
        api_key: "YOUR_API_KEY"
        name: "{{ zone_name }}"
        state: absent
      when: zone_created is succeeded