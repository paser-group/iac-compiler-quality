---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Anti Affinity Policies
      community.general.clc_aa_policy:
        location: "{{ item.location }}"
        name: "{{ item.name }}"
        state: "{{ item.state }}"
      loop:
        - { location: 'us-central1', name: 'policy1', state: 'present' }
        - { location: 'europe-west1', name: '!null', state: 'present' }
        - { location: '!null', name: 'policy3', state: 'present' }
        - { location: '', name: 'policy4', state: 'present' }
        - { location: 'ap-southeast2', name: 'policy5', state: 'absent' }

    - name: Debug output
      debug:
        var: item.msg
      loop: "{{ ansible_loop.results }}"