---
- name: Manage IP addresses on an interface
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Manage IP addresses
      community.network.ipadm_addr:
        name: eth0
        address: "{{ lookup('env', 'ADDRESS') | default('') }}"
        addrobj: "{{ lookup('env', 'ADDROBJ') | default('') }}"
        addrtype: "{{ lookup('env', 'ADDRTYPE') | default('ipv4') }}"
        state: "{{ lookup('env', 'STATE') | default('present') }}"
        temporary: "{{ lookup('env', 'TEMPORARY') | default(true) }}"
        wait: "{{ lookup('env', 'WAIT') | default('') }}"
      register: result

    - name: Debug the result
      debug:
        var: result