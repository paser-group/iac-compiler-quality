---
- name: Test ansible_compiler for latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    nsip: "10.1.1.1"
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "http"

  tasks:
    - name: Create policy with incorrect type for nitro_timeout
      community.network.netscaler_cs_policy:
        state: present
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        policyname: "policy1"
        rule: "rule1"
        nitro_timeout: "30"  # Incorrect type: should be float
        save_config: true
        validate_certs: false
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result