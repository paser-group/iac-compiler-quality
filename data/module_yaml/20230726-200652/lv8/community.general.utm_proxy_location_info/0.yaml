- name: Test playbook for 'community.general.utm_proxy_location_info' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create reverse proxy location
      community.general.utm_proxy_location_info:
        name: test_location
        state: present
        utm_host: example.com
        utm_port: 8080
        utm_protocol: http
        utm_token: null
        validate_certs: null
        headers:
          X-Key: null
      register: location_result

    - name: Debug result
      debug:
        var: location_result

    - name: Update reverse proxy location
      community.general.utm_proxy_location_info:
        name: test_location
        state: present
        utm_port: "!null"
        headers:
          X-Key: "!null"
      register: update_result

    - name: Debug result
      debug:
        var: update_result

    - name: Destroy reverse proxy location
      community.general.utm_proxy_location_info:
        name: test_location
        state: absent
      register: destroy_result

    - name: Debug result
      debug:
        var: destroy_result