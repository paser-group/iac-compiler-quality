---
- name: Test community.general.wdc_redfish_command module
  hosts: localhost
  gather_facts: false

  vars:
    auth_token: "my_token"
    baseuri: "https://wdc-server"
    username: "admin"
    password: "secret_password"
    resource_id: "server-id"
    timeout: 30
    ioms:
      - iom1
      - iom2
    category: "system"
    command:
      - "reset"

    update_creds:
      username: "admin"
      password: "new_password"

    update_image_uri: "https://image-server/image"

  tasks:
    - name: Test community.general.wdc_redfish_command module
      community.general.wdc_redfish_command:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        username: "{{ username }}"
        password: "{{ password }}"
        resource_id: "{{ resource_id }}"
        timeout: "{{ timeout }}"
        ioms: "{{ ioms }}"
        category: "{{ category }}"
        command: "{{ command }}"
        update_creds: "{{ update_creds | default(omit) }}"
        update_image_uri: "{{ update_image_uri | default(omit) }}"
      register: result

    - name: Debug result
      debug:
        var: result