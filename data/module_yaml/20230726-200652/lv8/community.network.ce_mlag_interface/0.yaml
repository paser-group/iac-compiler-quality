---
- name: Manage MLAG interfaces on HUAWEI
  hosts: network_devices
  gather_facts: false
  vars:
    dfs_group_id: null
    eth_trunk_id: null
    interface: null
    mlag_error_down: null
    mlag_id: null
    mlag_priority_id: null
    mlag_system_id: null
    state: null

  tasks:
    - name: Configure MLAG interface
      community.network.ce_mlag_interface:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_password }}"
        dfs_group_id: "{{ dfs_group_id }}"
        eth_trunk_id: "{{ eth_trunk_id }}"
        interface: "{{ interface }}"
        mlag_error_down: "{{ mlag_error_down }}"
        mlag_id: "{{ mlag_id }}"
        mlag_priority_id: "{{ mlag_priority_id }}"
        mlag_system_id: "{{ mlag_system_id }}"
        state: "{{ state }}"
      register: result

    - name: Display result
      debug:
        var: result