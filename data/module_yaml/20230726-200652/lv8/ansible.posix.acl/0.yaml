---
- name: Set and retrieve ACLs on files
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set ACLs on a file
      ansible.posix.acl:
        path: /path/to/file.txt
        entity: user1
        permissions: rwx
        state: present
        use_nfsv4_acls: true
      register: acl_result

    - name: Retrieve ACLs
      ansible.posix.acl:
        path: /path/to/file.txt
        use_nfsv4_acls: true
      register: acl_info

    - name: Print ACL result
      debug:
        var: acl_result

    - name: Print ACL info
      debug:
        var: acl_info