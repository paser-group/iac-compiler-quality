---
- name: Test Ansible Bug Finder Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure IPv6 security RA-Guard VLAN
      community.network.pn_ipv6security_raguard_vlan:
        pn_cliswitch: "127.0.0.1"
        pn_name: "ipv6-security"
        pn_vlans: "10"
        state: !null

    - name: Debug Task
      debug:
        var: pn_vlans | type_debug

    - name: Verify VLAN configuration
      shell: echo "VLAN configuration exists"
      when: pn_vlans | type_debug != 'null_type'

    - name: Remove IPv6 security RA-Guard VLAN
      community.network.pn_ipv6security_raguard_vlan:
        pn_cliswitch: "127.0.0.1"
        pn_name: "ipv6-security"
        pn_vlans: "10"
        state: !null

    - name: Debug Task
      debug:
        var: state | type_debug

    - name: Verify VLAN removal
      shell: echo "VLAN removed"
      when: state | type_debug != 'null_type'