- name: Test playbook for community.network.pn_admin_syslog module
  hosts: localhost
  gather_facts: no
  vars:
    pn_cliswitch: "{{ 'pnadmin' }}"
    pn_host: "{{ inventory_hostname }}"
    pn_message_format: "{{ ['plain', 'json'] | random }}"
    pn_name: "{{ pn_host }}"
    pn_port: "{{ [514, 1514] | random }}"
    pn_scope: "{{ ['local', 'global'] | random }}"
    pn_transport: "{{ ['tcp', 'udp'] | random }}"
    state: present

  tasks:
    - name: Create pn_admin_syslog configuration
      community.network.pn_admin_syslog:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_host: "{{ pn_host }}"
        pn_message_format: "{{ pn_message_format }}"
        pn_name: "{{ pn_name }}"
        pn_port: "{{ pn_port }}"
        pn_scope: "{{ pn_scope }}"
        pn_transport: "{{ pn_transport }}"
        state: "{{ state }}"
      register: result

    - name: Debug result
      debug:
        var: result

    - name: Verify pn_admin_syslog configuration
      community.network.pn_admin_syslog:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_host: "{{ pn_host }}"
        pn_name: "{{ pn_name }}"
      register: verify_result
  
    - name: Debug verify_result
      debug:
        var: verify_result