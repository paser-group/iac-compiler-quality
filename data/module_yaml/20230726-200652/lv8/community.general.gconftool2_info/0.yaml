---
- name: Test community.general.gconftool2_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include community.general.gconftool2_info module
      include_role:
        name: community.general.gconftool2_info

    - name: Retrieve gconf key info
      community.general.gconftool2_info:
        key: "key_name"
        user: "username"
        schema: "!null"
        dir: "!null"

    - debug:
        var: gconftool2_info

    - name: Clean up temporary gconf files
      community.general.gconftool2_info:
        key: "key_name"
        user: "username"
        schema: "!null"
        dir: "!null"
        state: absent