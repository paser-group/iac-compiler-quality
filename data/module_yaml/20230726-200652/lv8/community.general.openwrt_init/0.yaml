- name: Test openwrt_init module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Install openwrt_init module dependencies
      ansible.builtin.pip:
        name: jmespath
        state: present
      register: pip_output
      
    - name: Install openwrt_init module
      ansible.builtin.galaxy_collection:
        name: community.general
        state: present
      
    - name: Set up OpenWrt device
      community.general.openwrt_init:
        enabled: true
        name: test_device
        pattern: "!null"
        state: "present"