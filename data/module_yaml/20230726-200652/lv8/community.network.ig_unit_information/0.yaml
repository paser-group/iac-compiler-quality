---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Configure Interface Unit Information
      community.network.ig_unit_information:
        unit: "{{ item.unit }}"
        configuration:
          client: !null
          interface: "{{ item.interface }}"
          unit_number: "{{ item.unit_number | default(1) }}"
      register: result
      loop:
        - { unit: "ethernet-switching", interface: "ge-0/0/1", unit_number: 1 }
        - { unit: "routing-instances", interface: "ge-0/0/2", unit_number: 2 }
        - { unit: "firewall", interface: "ge-0/0/3", unit_number: 3 }
        - { unit: "mpls", interface: "ge-0/0/4", unit_number: 4 }

    - name: Debug Result
      debug:
        var: result