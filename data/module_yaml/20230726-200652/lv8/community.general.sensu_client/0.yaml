---
- name: Manage Sensu client
  hosts: all
  tasks:
    - name: Install Sensu client
      community.general.sensu_client:
        address: "localhost"
        chef: !null
        deregister: true
        deregistration:
          example_deregistration_key: !null
        ec2:
          example_ec2_key: !null
        keepalive:
          handler: "my_handler"
        keepalives: true
        name: "my_client"
        puppet:
          puppet_facter: true
        redact:
          - "password"
        registration:
          example_registration_key: true
        safe_mode: true
        servicenow:
          example_servicenow_key: !null
        socket:
          bind: "0.0.0.0"
          port: 8080
        state: "present"
        subscriptions:
          - "linux"
          - "docker"