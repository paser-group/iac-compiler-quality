- name: Manage Layer-3 interfaces on Ruckus ICX
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Layer-3 interface with null configuration
      community.network.icx_l3_interface:
        name: Loopback0
        ipv4: !null
        ipv6: !null
        mode: null
      register: result

    - name: Validate Layer-3 interface creation
      debug:
        msg: "Layer-3 interface created with null configuration: {{ result.stdout }}"

    - name: Create Layer-3 interface with aggregate configuration
      community.network.icx_l3_interface:
        name: Ethernet1/1
        ipv4: null
        ipv6: null
        mode: access
        state: present
        secondary: "2001:db8::1"
        aggregate:
          - "192.0.2.1/24"
          - "203.0.113.1/24"
      register: result

    - name: Validate Layer-3 interface creation with aggregate configuration
      debug:
        msg: "Layer-3 interface created with aggregate configuration: {{ result.stdout }}"