---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Include vars
      include_vars: vars.yml

    - name: Set logging configuration
      community.network.icx_logging:
        name: "{{ logging_config['name'] | default('Default Logging') }}"
        dest: "{{ logging_config['dest'] }}"
        level: "{{ logging_config['level'] }}"
        facility: "{{ logging_config['facility'] }}"
        udp_port: "{{ logging_config['udp_port'] }}"
        state: "{{ logging_config['state'] }}"
        aggregate: "{{ logging_config['aggregate'] }}"
        check_running_config: "{{ logging_config['check_running_config'] }}"
      register: result

    - name: Show module output
      debug:
        var: result