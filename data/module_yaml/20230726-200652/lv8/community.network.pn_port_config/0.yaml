---
- name: Test playbook for community.network.pn_port_config module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set variables
      vars:
        pn_allowed_tpid: !null  # Potential type-related bug: using !null as configuration value
        pn_autoneg: true
        pn_cliswitch: !null
        pn_crc_check_enable: true
        pn_defer_bringup: false
        pn_description: "Test port configuration"
        pn_dscp_map: !null
        pn_edge_switch: true
        pn_egress_rate_limit: "10G"
        pn_enable: true
        pn_eth_mode: null  # Potential type-related bug: null value instead of None
        pn_fabric_guard: true
        pn_host_enable: true
        pn_intf: "eth1"
        pn_jumbo: true
        pn_lacp_priority: "32768"
        pn_local_switching: true
        pn_loop_vlans: !null
        pn_loopback: false
        pn_mirror_only: false
        pn_pause: true
        pn_port: "1/1"
        pn_port_mac_address: "00:11:22:33:44:55"
        pn_reflect: true
        pn_routing: true
        pn_send_port: "2/2"
        pn_speed: null  # Potential type-related bug: null value instead of None
        pn_vxlan_termination: true
        state: "present"

    - name: Configure port
      community.network.pn_port_config:
        pn_allowed_tpid: "{{ pn_allowed_tpid }}"
        pn_autoneg: "{{ pn_autoneg }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_crc_check_enable: "{{ pn_crc_check_enable }}"
        pn_defer_bringup: "{{ pn_defer_bringup }}"
        pn_description: "{{ pn_description }}"
        pn_dscp_map: "{{ pn_dscp_map }}"
        pn_edge_switch: "{{ pn_edge_switch }}"
        pn_egress_rate_limit: "{{ pn_egress_rate_limit }}"
        pn_enable: "{{ pn_enable }}"
        pn_eth_mode: "{{ pn_eth_mode }}"
        pn_fabric_guard: "{{ pn_fabric_guard }}"
        pn_host_enable: "{{ pn_host_enable }}"
        pn_intf: "{{ pn_intf }}"
        pn_jumbo: "{{ pn_jumbo }}"
        pn_lacp_priority: "{{ pn_lacp_priority }}"
        pn_local_switching: "{{ pn_local_switching }}"
        pn_loop_vlans: "{{ pn_loop_vlans }}"
        pn_loopback: "{{ pn_loopback }}"
        pn_mirror_only: "{{ pn_mirror_only }}"
        pn_pause: "{{ pn_pause }}"
        pn_port: "{{ pn_port }}"
        pn_port_mac_address: "{{ pn_port_mac_address }}"
        pn_reflect: "{{ pn_reflect }}"
        pn_routing: "{{ pn_routing }}"
        pn_send_port: "{{ pn_send_port }}"
        pn_speed: "{{ pn_speed }}"
        pn_vxlan_termination: "{{ pn_vxlan_termination }}"
        state: "{{ state }}"
      register: result

    - name: Display result
      debug:
        var: result