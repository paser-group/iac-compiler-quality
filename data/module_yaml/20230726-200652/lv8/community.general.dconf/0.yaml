---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set dconf value
      community.general.dconf:
        key: "{% if not dconf_key is defined %}{{ nonexistent_variable }}{% else %}{{ dconf_key }}{% endif %}"
        state: "{% if not dconf_state is defined %}{{ nonexistent_variable }}{% else %}{{ dconf_state }}{% endif %}"
        value: "{% if not dconf_value is defined %}{{ nonexistent_variable }}{% else %}{{ dconf_value }}{% endif %}"
      register: result

    - name: Print result
      debug:
        var: result