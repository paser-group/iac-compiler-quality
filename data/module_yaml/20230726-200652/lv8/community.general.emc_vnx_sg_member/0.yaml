- name: Test emc_vnx_sg_member module
  hosts: localhost
  gather_facts: false

  vars:
    lunid: "1234"
    name: "storage_group"
    sp_address: 10.1.1.5
    sp_user: "admin"
    sp_password: "password"
    state: "present"

  tasks:
    - name: Create storage group member
      community.general.emc_vnx_sg_member:
        lunid: "{{ lunid }}"
        name: "{{ name }}"
        sp_address: "{{ sp_address | default (!null) }}"
        sp_user: "{{ sp_user | default (!null) }}"
        sp_password: "{{ sp_password | default (!null) }}"
        state: "{{ state }}"
      register: result

    - name: Show result
      debug:
        var: result