---
- name: Trigger Latent Type-Related Bug in community.network.cv_server_provision
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Set empty configuration as !null
      set_fact:
        config: !null

    - name: Provision server port with !null configuration
      community.network.cv_server_provision:
        action: "{{ config | default('') }}"
        auto_run: "{{ config | default(false) }}"
        host: "{{ config | default('') }}"
        username: "{{ config | default('') }}"
        password: "{{ config | default('') }}"
        port: "{{ config | default('') }}"
        protocol: "{{ config | default('') }}"
        template: "{{ config | default('') }}"
        server_name: "{{ config | default('') }}"
        switch_name: "{{ config | default('') }}"
        switch_port: "{{ config | default('') }}"
      register: result

    - name: Print result
      debug:
        var: result