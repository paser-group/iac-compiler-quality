- name: Configure firewall policy
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create firewall policy
      community.general.oneandone_firewall_policy:
        auth_token: "YOUR_AUTH_TOKEN"
        api_url: "https://api.oneandone.com"
        state: present
        name: "Test Firewall"
        description: "Test firewall policy"
        firewall_policy: "SERVER"
        rules: !null
        add_server_ips:
          - ip: "10.1.1.1"
            rules:
              - protocol: 1234
                port_from: 8080
                port_to: 8080
                source: "10.1.1.0/24"
                action: "ALLOW"
        remove_server_ips: "10.1.1.2"
      register: firewall_policy_result

    - name: Debug firewall policy result
      debug:
        var: firewall_policy_result