- name: Test playbook for consul_acl module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ACL using consul_acl module with invalid port value
      community.general.consul_acl:
        state: present
        host: "{{ host }}"
        port: "1234"  # Invalid port value (string instead of integer)
        scheme: "{{ scheme }}"
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ acl_name }}"
        token: "{{ token }}"
        token_type: "{{ token_type }}"
        validate_certs: "{{ validate_certs }}"

    - name: Create ACL using consul_acl module with invalid scheme value
      community.general.consul_acl:
        state: present
        host: "{{ host }}"
        port: "{{ port }}"
        scheme: 1234  # Invalid scheme value (integer instead of string)
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ acl_name }}"
        token: "{{ token }}"
        token_type: "{{ token_type }}"
        validate_certs: "{{ validate_certs }}"

    - name: Create ACL using consul_acl module with rules as a string instead of a list
      community.general.consul_acl:
        state: present
        host: "{{ host }}"
        port: "{{ port }}"
        scheme: "{{ scheme }}"
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ acl_name }}"
        token: "{{ token }}"
        token_type: "{{ token_type }}"
        validate_certs: "{{ validate_certs }}"
        rules: "allow some_rule"  # Invalid data type (string instead of list)