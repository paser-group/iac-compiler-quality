- name: Test Ansible Type-Related Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Install package with null name
      package:
        name: null
        state: present

    - name: Install package with null state
      package:
        name: openssh-server
        state: null

    - name: Install package with null use
      package:
        name: openssh-server
        state: present
        use: null

    - name: Install package with invalid configuration
      package:
        name: null
        state: null
        use: null

    - name: Install specific package versions
      package:
        name:
          - vim
          - git
        state: present
        use: null
        version:
          - 1.2.3
          - 4.5.6

    - name: Remove package
      package:
        name: openssh-server
        state: absent

    - name: Upgrade package
      package:
        name: openssh-server
        state: latest

    - name: Install package with invalid state
      package:
        name: openssh-server
        state: installed

    - name: Install package with invalid use
      package:
        name: openssh-server
        state: present
        use: development

    - name: Install package with invalid version
      package:
        name: openssh-server
        state: present
        use: null
        version: '1.2.3'

  vars:
    ansible_become: true