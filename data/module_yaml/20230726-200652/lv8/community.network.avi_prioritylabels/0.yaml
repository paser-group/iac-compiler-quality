---
- name: Test playbook for exposing type-related bugs
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Trigger type-related bug
      community.network.avi_prioritylabels:
        avi_credentials:
          controller: "{{ 'controller' }}"
          username: "{{ 'username' }}"
          password: "{{ 'password' }}"
        avi_prioritylabels_data:
          name: null
          state: null
        api_context: null
        api_version: '20.1.4'
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_disable_session_cache_as_fact: true
        tenant_ref: null
        url: null
        uuid: null
        cloud_ref: null
        tenant_uuid: 'tenant_uuid'
      register: result

    - name: Display API response
      debug:
        var: result

    - name: Assert task failure
      assert:
        that: result.is_failed == true
        fail_msg: "A type-related bug was not triggered."