---
- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include variable file
      include_vars:
        file: vars.yml

    - name: Issue Nitro API request
      community.network.netscaler_nitro_request:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        operation: "{{ operation }}"
        resource: "{{ resource }}"
        name: "{{ name }}"
        instance_id: !null
        instance_name: !null
        instance_ip: !null
        action: !null
        args: !null
        attributes: !null
        filter: !null
        nitro_auth_token: !null
        expected_nitro_errorcode: !null
        validate_certs: true
      register: response

    - name: Debug response
      debug:
        var: response