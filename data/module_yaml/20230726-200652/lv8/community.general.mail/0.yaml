- name: Test community.general.mail module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Send email
      community.general.mail:
        host: "{{ host }}"
        port: "{{ port }}"
        username: "{{ username }}"
        password: "{{ password }}"
        sender: "{{ sender }}"
        to: "{{ to }}"
        cc: "{{ cc }}"
        bcc: "{{ bcc }}"
        subject: "{{ subject }}"
        body: "{{ body }}"
        charset: "{{ charset }}"
        subtype: "{{ subtype }}"
        ehlohost: "{{ ehlohost }}"
        secure: "{{ secure }}"
        timeout: "{{ timeout }}"
        headers: "{{ headers }}"
        attach: "{{ attach }}"
      register: result

    - debug:
        var: result