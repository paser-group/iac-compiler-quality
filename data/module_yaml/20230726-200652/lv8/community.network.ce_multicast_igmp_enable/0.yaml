- name: Configure multicast igmp enable
  hosts: localhost
  gather_facts: false

  vars:
    aftype: !null
    features: !null
    igmp: !null
    proxy: !null
    state: !null
    version: !null
    vlan_id: !null

  tasks:
    - name: Enable multicast igmp
      community.network.ce_multicast_igmp_enable:
        aftype: "{{ aftype | default('ipv4') }}"
        features: "{{ features | default('pim') }}"
        igmp: "{{ 1/0 | default(igmp) }}"
        proxy: "{{ proxy | default(false) }}"
        state: "{{ state | default('present') }}"
        version: "{{ version | default('2') }}"
        vlan_id: "{{ vlan_id | default('10') }}"
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_password }}"
          transport: cli

      register: result

    - name: Display result
      debug:
        var: result