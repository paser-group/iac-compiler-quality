---
- name: Apply patch using ansible.posix.patch module
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Copy patch file to remote host
      copy:
        src: /path/to/patch_file.patch
        dest: /tmp/patch_file.patch

    - name: Apply patch
      ansible.posix.patch:
        backup: !null
        basedir: !null
        binary: !null
        dest: "/path/to/file"
        ignore_whitespace: !null
        remote_src: !null
        src: /tmp/patch_file.patch
        state: present
        strip: 0