- name: Manage Cisco IMC hardware
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a new configuration
      community.general.imc_rest:
        content: !none
        hostname: "{{ inventory_hostname }}"
        password: "{{ vault_password }}"
        path: "{{ config_path }}"
        protocol: https
        timeout: '10'
        username: "{{ imc_username }}"
        validate_certs: !no