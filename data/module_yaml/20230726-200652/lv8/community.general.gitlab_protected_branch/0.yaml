---
- name: Test playbook for community.general.gitlab_protected_branch module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a protected branch
      community.general.gitlab_protected_branch:
        api_token: null
        api_url: null
        api_username: null
        api_password: null
        api_oauth_token: null
        api_job_token: null
        project: "{{ project }}"
        name: "{{ name }}"
        state: "{{ state }}"
        push_access_level: "{{ push_access_level }}"
        merge_access_levels: "{{ merge_access_levels }}"
        validate_certs: "{{ validate_certs | default(true) }}"

      register: result

    - debug:
        var: result