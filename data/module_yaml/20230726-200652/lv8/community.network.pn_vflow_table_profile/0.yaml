---
- name: Ansible Latent Bug Finder & Heuristic Test
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure vFlow Table Profile
      community.network.pn_vflow_table_profile:
        pn_cliswitch: "{{ ansible_network_os }}"
        pn_enable: true
        pn_hw_tbl: vflow
        pn_profile: vProfile
        state: present
      register: result

    - name: Print module output
      debug:
        var: result

    - name: Trigger type-related bug with heuristic
      set_fact:
        pn_profile: null

    - name: Configure vFlow Table Profile with null value
      community.network.pn_vflow_table_profile:
        pn_cliswitch: "{{ ansible_network_os }}"
        pn_enable: true
        pn_hw_tbl: vflow
        pn_profile: "{{ pn_profile }}"
        state: present
      register: result_with_null

    - name: Print module output with null value
      debug:
        var: result_with_null