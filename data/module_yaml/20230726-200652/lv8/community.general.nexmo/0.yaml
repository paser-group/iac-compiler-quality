---
- name: Test playbook for community.general.nexmo module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Include nexmo module
      import_role:
        name: community.general.nexmo

    - name: Create test message configuration
      set_fact:
        nexmo_config:
          api_key: "!null"
          api_secret: "!null"
          client_cert: "/path/to/client_cert.pem"
          client_key: "/path/to/client_key.pem"
          dest: ["123456789", "987654321"]
          force: "!null"
          force_basic_auth: "!null"
          http_agent: "CustomAgent"
          msg: "!null"
          src: 123456
          url: "https://example.com"
          url_password: "!null"
          url_username: "!null"
          use_gssapi: "!null"
          use_proxy: "!null"
          validate_certs: "!null"

    - name: Test nexmo module with various configuration values
      nexmo:
        api_key: "{{ nexmo_config.api_key }}"
        api_secret: "{{ nexmo_config.api_secret }}"
        client_cert: "{{ nexmo_config.client_cert }}"
        client_key: "{{ nexmo_config.client_key }}"
        dest: "{{ nexmo_config.dest }}"
        force: "{{ nexmo_config.force }}"
        force_basic_auth: "{{ nexmo_config.force_basic_auth }}"
        http_agent: "{{ nexmo_config.http_agent }}"
        msg: "{{ nexmo_config.msg }}"
        src: "{{ nexmo_config.src }}"
        url: "{{ nexmo_config.url }}"
        url_password: "{{ nexmo_config.url_password }}"
        url_username: "{{ nexmo_config.url_username }}"
        use_gssapi: "{{ nexmo_config.use_gssapi }}"
        use_proxy: "{{ nexmo_config.use_proxy }}"
        validate_certs: "{{ nexmo_config.validate_certs }}"
      register: result

    - name: Print result
      debug:
        var: result