---
- name: Test 'community.general.lxd_profile' module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create LXD profile with null values
      community.general.lxd_profile:
        name: test-profile
        description: !null
        devices: !null
        state: present

    - name: Output debug information
      debug:
        var: ansible_lxd_profile

    - name: Change LXD profile name using !null
      community.general.lxd_profile:
        name: test-profile
        new_name: !null
        state: present

    - name: Output debug information
      debug:
        var: ansible_lxd_profile

    - name: Delete LXD profile using !null
      community.general.lxd_profile:
        name: !null
        state: absent

    - name: Output debug information
      debug:
        var: ansible_lxd_profile