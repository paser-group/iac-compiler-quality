---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test ansible.builtin.getent module
      ansible.builtin.getent:
        database: passwd
        key: !number 123

    - name: Test ansible.builtin.getent module with !null configuration
      ansible.builtin.getent:
        database: passwd
        key: !null

    - name: Test ansible.builtin.getent module with non-existing service
      ansible.builtin.getent:
        database: services
        service: nonexistent

    - name: Test ansible.builtin.getent module with invalid split option
      ansible.builtin.getent:
        database: protocols
        service: tcp
        split: !bool true

    - name: Test ansible.builtin.getent module with invalid fail_key option
      ansible.builtin.getent:
        database: protocols
        service: tcp
        fail_key: !string false

...