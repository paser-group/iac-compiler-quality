- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: "Create inventory file"
      copy:
        content: |
          ubuntu1 ansible_host=10.1.1.1 ansible_user=root
          alpine1 ansible_host=10.1.1.2 ansible_user=root
          centos1 ansible_host=10.1.1.3 ansible_user=root
          redhat1 ansible_host=10.1.1.4 ansible_user=root
        dest: inventory.ini

    - name: "Ping all nodes"
      ping:
      delegate_to: localhost
      vars:
        ansible_connection: local
        ansible_inventory: inventory.ini

    - name: "Run test case"
      community.general.wakeonlan:
        broadcast: '10.1.1.255'
        mac: 123456   # This intentionally sets a non-string value to trigger a type-related bug
        port: 9