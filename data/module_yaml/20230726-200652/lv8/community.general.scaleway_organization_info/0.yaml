- name: Gather Scaleway organization info
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include necessary collections
      include_collections:
        - community.general

    - name: Set default values to `!null`
      set_fact:
        scaleway_api_token: !null
        scaleway_api_url: !null
        scaleway_organization_name: !null

    - name: Gather organization info
      community.general.scaleway_organization_info:
        api_timeout: 10
        api_token: "{{ scaleway_api_token }}"
        api_url: "{{ scaleway_api_url }}"
        query_parameters:
          name: "{{ scaleway_organization_name }}"
        validate_certs: False
      register: organization_info

    - name: Display organization info
      debug:
        var: organization_info