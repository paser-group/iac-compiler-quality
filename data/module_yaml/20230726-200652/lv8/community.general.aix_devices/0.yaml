---
- name: Test playbook for community.general.aix_devices
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create test inventory
      blockinfile:
        path: "{{ inventory_file }}"
        block: |
          [aix_nodes]
          aix1 ansible_host=10.1.1.1
          aix2 ansible_host=10.1.1.2
          aix3 ansible_host=10.1.1.3
          aix4 ansible_host=10.1.1.4

    - name: Test community.general.aix_devices module
      community.general.aix_devices:
        inventory_file: "inventory.aix"
        attributes:
          disk:
            - name: "/dev/hdisk1"
              pvid: !null
              size: !null
        device: "/dev/hdisk1"
        force: false
        recursive: false
        state: present
      register: result

    - name: Display playbook result
      debug:
        var: result