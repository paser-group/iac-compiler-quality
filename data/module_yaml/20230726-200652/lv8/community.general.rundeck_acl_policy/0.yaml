---
- name: Test playbook for community.general.rundeck_acl_policy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up Docker nodes
      docker_network:
        name: node-net
        ip_range: 10.1.1.0/24
        gateway: 10.1.1.254

    - name: Create Ubuntu1 Docker container
      docker_container:
        name: ubuntu1
        image: ubuntu
        state: started
        networks:
          - name: node-net
            ipv4_address: 10.1.1.1
        command: sleep infinity

    - name: Create Alpine1 Docker container
      docker_container:
        name: alpine1
        image: alpine
        state: started
        networks:
          - name: node-net
            ipv4_address: 10.1.1.2
        command: sleep infinity

    - name: Create CentOS1 Docker container
      docker_container:
        name: centos1
        image: centos
        state: started
        networks:
          - name: node-net
            ipv4_address: 10.1.1.3
        command: sleep infinity

    - name: Create Red Hat1 Docker container
      docker_container:
        name: redhat1
        image: redhat
        state: started
        networks:
          - name: node-net
            ipv4_address: 10.1.1.4
        command: sleep infinity

    - name: Test rundeck_acl_policy module
      community.general.rundeck_acl_policy:
        api_token: "!null"  # Enter your actual API token here
        api_version: 2
        client_cert: "!null"
        client_key: "!null"
        force: "!null"
        force_basic_auth: "!null"
        http_agent: "!null"
        name: "Test Policy"
        policy: "!null"
        project: "!null"
        state: present
        url: "http://{{ inventory_hostname }}"
        url_password: "!null"
        url_username: "!null"
        use_gssapi: "!null"
        use_proxy: "!null"
        validate_certs: "!null"