- name: Test pn_snmp_community module
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: null
    pn_community_string: null
    pn_community_type: null
    state: null

  tasks:
    - name: Create SNMP community with null configuration values
      community.network.pn_snmp_community:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_community_string: "{{ pn_community_string }}"
        pn_community_type: "{{ pn_community_type }}"
        state: "{{ state }}"
      register: result
      ignore_errors: true

    - name: Debug output
      debug:
        var: result

    - name: Fail the playbook to capture the error
      fail:
        msg: "A latent type-related bug has been found in the Ansible module"
      when: result is failed