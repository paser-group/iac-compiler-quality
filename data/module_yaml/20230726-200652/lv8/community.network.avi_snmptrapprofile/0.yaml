---
- name: Test playbook for community.network.avi_snmptrapprofile
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create SnmpTrapProfile
      community.network.avi_snmptrapprofile:
        controller: "https://{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ snmp_profile_name }}"
        state: "{{ snmp_profile_state }}"
        trap_servers: "{{ trap_servers | default([]) }}"
      register: snmp_profile_result

    - name: Debug SnmpTrapProfile result
      debug:
        var: snmp_profile_result

  vars:
    controller: '10.1.1.1'
    username: 'admin'
    password: 'password'
    tenant: 'admin'
    snmp_profile_name: 'snmp_profile_1'
    snmp_profile_state: 'present'
    trap_servers: !null