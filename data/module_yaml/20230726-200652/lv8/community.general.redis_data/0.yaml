---
- name: Test playbook for community.general.redis_data module
  hosts: localhost
  gather_facts: False
  connection: local

  tasks:
    - name: Set key in redis
      community.general.redis_data:
        key: "{{ lookup('file', '/non_existing_file') | bool }}"
        value: "test_value"
        login_host: "{{ hostvars[groups['localhost'][0]]['ansible_default_ipv4']['address'] }}"
        login_user: "redis"
        login_password: "redis_password"
        login_port: "{{ 'not_a_number' | int }}"
        state: present
      register: result

    - name: Debug result
      debug:
        var: result