---
- name: Test Ansible latent type-related bug
  hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Create VPC Route with invalid destination
      community.general.hwc_vpc_route:
        state: present
        id: "test-route"
        next_hop: "10.1.1.254"
        destination: !int "10.1.2.0/24"
        vpc_id: "test-vpc"
        region: "us-west-1"
      
      register: result_invalid

    - name: Debug invalid VPC Route
      debug:
        var: result_invalid

    - name: Create VPC Route with invalid next_hop
      community.general.hwc_vpc_route:
        state: present
        id: "test-route"
        next_hop: !bool 10.1.1.254
        destination: "10.1.2.0/24"
        vpc_id: "test-vpc"
        region: "us-west-1"
      
      register: result_invalid

    - name: Debug invalid VPC Route
      debug:
        var: result_invalid