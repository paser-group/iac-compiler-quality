---
- name: Test playbook
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Set Consul KV
      community.general.consul_kv:
        host: "{{ host }}"
        port: "{{ port }}"
        scheme: "{{ scheme }}"
        token: "{{ token }}"
        key: "{{ key }}"
        value: "{{ value }}"
        cas: "!null"
        flags: "!null"
        recurse: "{{ recurse | default(false) }}"
        retrieve: "{{ retrieve | default(false) }}"
        state: "{{ state }}"
        session: "!null"
        validate_certs: "{{ validate_certs | default(true) }}"
      register: result
      
    - name: Debug result
      debug:
        var: result