---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage resource policies using manageiq_policies module
      community.general.manageiq_policies:
        manageiq_connection:
          url: "https://manageiq.example.com"
          username: "admin"
          password: "password"
        policy_profiles:
          - name: "Default Profile"
            resource_type: "VmOrTemplate"
            resource_id: 123
            resource_name: "My VM"
            state: present
        state: present
      register: result

    - name: Debug result
      debug:
        var: result