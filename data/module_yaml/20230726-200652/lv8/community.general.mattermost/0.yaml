---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    api_key: !null
    attachments: !null
    channel: !null
    icon_url: !null
    text: !null
    url: !null
    username: !null
    validate_certs: !null

  tasks:
    - name: Include mattermost module
      include_role:
        name: community.general.mattermost

    - name: Send Mattermost message
      community.general.mattermost:
        api_key: "{{ api_key }}"
        attachments: "{{ attachments }}"
        channel: "{{ channel }}"
        icon_url: "{{ icon_url }}"
        text: "{{ text }}"
        url: "{{ url }}"
        username: "{{ username }}"
        validate_certs: "{{ validate_certs }}"
      register: mattermost_result