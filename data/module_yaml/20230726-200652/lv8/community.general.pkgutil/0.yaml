---
- name: Test package installation using community.general.pkgutil module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install package with specific attributes and options
      community.general.pkgutil:
        name: ["{{ pkg_name }}"]
        state: "{{ pkg_state }}"
        site: "{{ pkg_site }}"
        force: "{{ pkg_force | default(false) | bool }}"
        update_catalog: "{{ pkg_update_catalog | default(true) | bool }}"
      register: pkg_result

    - name: Debug package installation result
      debug:
        var: pkg_result

    - name: Trigger a latent type-related bug
      community.general.pkgutil:
        name: null
        state: present
      register: bug_trigger_result

    - name: Debug bug trigger result
      debug:
        var: bug_trigger_result