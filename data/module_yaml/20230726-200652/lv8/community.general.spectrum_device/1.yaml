---
- name: Test playbook for community.general.spectrum_device module
  hosts: localhost
  gather_facts: false
  
  vars:
    spectrum_device_config:
      device: "{{ spectrum_device }}"
      landscape: "{{ spectrum_landscape | default(omit) }}"
      url: "{{ spectrum_url }}"
      url_username: "{{ spectrum_username }}"
      url_password: "{{ spectrum_password }}"
      agentport: "{{ spectrum_agentport }}"
      community: "{{ spectrum_community }}"
      use_proxy: "{{ spectrum_use_proxy }}"
      validate_certs: "{{ spectrum_validate_certs }}"
  
  tasks:
    - name: Create Spectrum Device
      community.general.spectrum_device:
        state: present
        config: "{{ spectrum_device_config }}"
      register: result_create
      
    - name: Print Create result
      debug:
        var: result_create
      
    - name: Delete Spectrum Device
      community.general.spectrum_device:
        state: absent
        config: "{{ spectrum_device_config }}"
      register: result_delete
      
    - name: Print Delete result
      debug:
        var: result_delete