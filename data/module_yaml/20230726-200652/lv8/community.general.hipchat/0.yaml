---
- name: Test Hipchat Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Case 1 - Invalid API Token
      community.general.hipchat:
        api: !null
        room: "Test Room"
        msg: "This is a test message"
      register: result
      ignore_errors: true

    - name: Validate Test Case 1
      fail:
        msg: "Test Case 1 - Invalid API Token did not fail as expected"
      when: result | failed