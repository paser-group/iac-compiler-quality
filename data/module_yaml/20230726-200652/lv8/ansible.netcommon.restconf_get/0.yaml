---
- name: RestConf Get Test
  hosts: localhost
  gather_facts: false
  connection: local
  vars:
    node_net_subnet: "10.1.1.0/24"
    node_net_gateway: "10.1.1.254"
    nodes:
      - name: ubuntu1
        ip: "10.1.1.1"
        distro: "ubuntu"
      - name: alpine1
        ip: "10.1.1.2"
        distro: "alpine"
      - name: centos1
        ip: "10.1.1.3"
        distro: "centos"
      - name: redhat1
        ip: "10.1.1.4"
        distro: "redhat"
  tasks:
    - name: Fetch RestConf Data
      ansible.netcommon.restconf_get:
        host: "{{ item.ip }}"
        username: "admin"
        password: "mysecretpassword"
        content: "!null"
        path: "/restconf/api/config"
      register: result
      with_items: "{{ nodes }}"
    - name: Debug
      debug:
        var: result