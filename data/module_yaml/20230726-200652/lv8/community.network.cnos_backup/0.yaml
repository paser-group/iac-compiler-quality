---
- name: Backup Configuration
  hosts: ansible_inventory
  gather_facts: false

  tasks:
    - name: Backup Configuration
      community.network.cnos_backup:
        deviceType: "{{ device_type | default('') }}"
        host: "{{ ansible_host }}"
        username: "{{ ansible_user | default('') }}"
        password: "{{ ansible_password | default('') }}"
        enablePassword: "{{ enable_password | default('') }}"
        outputfile: "{{ backup_file | default('') }}"
        configType: "{{ config_type | default(null) }}"
        protocol: "{{ protocol | default(null) }}"
        rcpath: "{{ rc_path | default(null) }}"
        rcserverip: "{{ rc_server_ip | default(null) }}"
        serverpassword: "{{ server_password | default(null) }}"
        serverusername: "{{ server_username | default(null) }}"
      register: backup_result

    - name: Display Backup Result
      debug:
        var: backup_result