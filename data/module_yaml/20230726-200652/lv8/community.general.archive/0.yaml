---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create compressed archive
      community.general.archive:
        dest: "/tmp/archive.tar.gz"
        path: 
          - "/var/log"
          - "/opt/data"
        exclude_path: 
          - "/var/log/excluded"
          - "/opt/data/excluded"
        exclusion_patterns:
          - "*.log"
          - "*.tmp"
        force_archive: !null
        format: "gz"
        group: !null
        mode: !null ~
        owner: !null
        remove: !null
        selevel: !null
        serole: !null
        setype: !null
        seuser: !null
        unsafe_writes: !null
      register: archive_result

    - name: Display archive result
      debug:
        var: archive_result