- name: Modify servers and trigger latent type-related bugs
  hosts: all
  gather_facts: false
  vars:
    server_ids:
      - server_id_1
      - server_id_2
      - server_id_3
    cpu: 2
    memory: 4GB
    state: present
  tasks:
    - name: Modify servers
      community.general.clc_modify_server:
        alert_policy_id: alert_id_1
        alert_policy_name: alert_name_1
        anti_affinity_policy_id: anti_affinity_id_1
        anti_affinity_policy_name: anti_affinity_name_1
        cpu: "{{ cpu }}"
        memory: "{{ memory }}"
        server_ids: "{{ server_ids }}"
        state: "{{ state }}"
        wait: true
      register: result

    - name: Debug output
      debug:
        var: result