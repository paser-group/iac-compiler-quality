- name: Test playbook for dnsimple module
  hosts: localhost
  become: false
  gather_facts: false

  tasks:
    - name: Create DNS record
      community.general.dnsimple:
        account_api_token: "{{ 'your_dnsimple_api_token' }}"
        account_email: "{{ 'your_dnsimple_email' }}"
        domain: "{{ 'your_domain' }}"
        state: present
        record: "{{ 'test-record' }}"
        type: "{{ 'A' }}"
        value: "{{ '127.0.0.1' }}"
        priority: 1
        ttl: 300

    - name: Update DNS record
      community.general.dnsimple:
        account_api_token: "{{ 'your_dnsimple_api_token' }}"
        account_email: "{{ 'your_dnsimple_email' }}"
        domain: "{{ 'your_domain' }}"
        state: present
        record: "{{ 'test-record' }}"
        type: "{{ 'A' }}"
        value: "{{ '127.0.0.1' }}"
        priority: 2
        ttl: 300

    - name: Delete DNS record
      community.general.dnsimple:
        account_api_token: "{{ 'your_dnsimple_api_token' }}"
        account_email: "{{ 'your_dnsimple_email' }}"
        domain: "{{ 'your_domain' }}"
        state: absent
        record: "{{ 'test-record' }}"
        type: "{{ 'A' }}"
        value: "{{ '127.0.0.1' }}"
        priority: 3
        ttl: 300