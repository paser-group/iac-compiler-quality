---
- name: Test playbook for community.general.utm_proxy_location
  hosts: localhost
  gather_facts: false

  vars:
    access_control: "{{ ['allow', 'deny'] | random }}"
    allowed_networks: "{{ ['10.1.1.0/24', '192.168.1.0/24'] | random }}"
    auth_profile: "{{ ['profile1', 'profile2'] | random }}"
    backend:
      - server1
      - server2
    be_path: /backend/path
    comment: Testing
    denied_networks: "{{ ['172.16.1.0/24', '10.0.0.0/8'] | random }}"
    headers:
      Host: localhost
      X-Forwarded-Proto: https
    hot_standby: "{{ [true, false] | random }}"
    name: reverse_proxy
    path: /
    state: present
    status: "{{ [true, false] | random }}"
    stickysession_id: "{{ ['cookie', 'source_ip'] | random }}"
    stickysession_status: "{{ [true, false] | random }}"
    utm_host: utm.example.com
    utm_port: 8443
    utm_protocol: https
    utm_token: abcdefg123456
    validate_certs: "{{ [true, false] | random }}"
    websocket_passthrough: "{{ [true, false] | random }}"

  tasks:
    - name: Create reverse proxy location
      community.general.utm_proxy_location:
        access_control: "{{ access_control }}"
        allowed_networks: "{{ allowed_networks }}"
        auth_profile: "{{ auth_profile }}"
        backend: "{{ backend }}"
        be_path: "{{ be_path }}"
        comment: "{{ comment }}"
        denied_networks: "{{ denied_networks }}"
        headers: "{{ headers }}"
        hot_standby: "{{ hot_standby }}"
        name: "{{ name }}"
        path: "{{ path }}"
        state: "{{ state }}"
        status: "{{ status }}"
        stickysession_id: "{{ stickysession_id }}"
        stickysession_status: "{{ stickysession_status }}"
        utm_host: "{{ utm_host }}"
        utm_port: "{{ utm_port }}"
        utm_protocol: "{{ utm_protocol }}"
        utm_token: "{{ utm_token }}"
        validate_certs: "{{ validate_certs }}"
        websocket_passthrough: "{{ websocket_passthrough }}"
      register: result

    - name: Debug module output
      debug:
        var: result