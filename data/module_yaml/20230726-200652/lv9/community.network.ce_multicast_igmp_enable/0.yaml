- name: Manage multicast igmp enable configuration on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Generate random IP address
      ansible.builtin.set_fact:
        random_ip: "{{ lookup('community.general.random_ip', network='10.1.1.0/24') }}"
      run_once: true

    - name: Enable multicast igmp
      community.network.ce_multicast_igmp_enable:
        aftype: "{{ random_ip }}"
        features: "{{ random_ip }}"
        igmp: "{{ random_ip }}"
        proxy: "{{ random_ip }}"
        state: "{{ random_ip }}"
        version: "{{ random_ip }}"
        vlan_id: "{{ random_ip }}"
      register: result

    - name: Debug result
      ansible.builtin.debug:
        var: result