---
- name: Ansible Latent Type-Related Bug Testing
  hosts: localhost
  gather_facts: false
  
  vars:
    expiration_days: 7
    server_ids:
      - server1
      - server2
    state: present
    wait: yes
  
  tasks:
    - name: Create server snapshots
      community.general.clc_server_snapshot:
        expiration_days: "{{ expiration_days }}"
        server_ids: "{{ server_ids }}"
        state: "{{ state }}"
        wait: "{{ wait }}"
      register: snapshot_create_result
  
    - name: Print create snapshot result
      debug:
        var: snapshot_create_result
  
    - name: Delete server snapshots
      community.general.clc_server_snapshot:
        server_ids: "{{ server_ids }}"
        state: absent
        wait: "{{ wait }}"
      register: snapshot_delete_result
  
    - name: Print delete snapshot result
      debug:
        var: snapshot_delete_result
  
    - name: Restore server snapshots
      community.general.clc_server_snapshot:
        server_ids: "{{ server_ids }}"
        state: present
        wait: "{{ wait }}"
      register: snapshot_restore_result
  
    - name: Print restore snapshot result
      debug:
        var: snapshot_restore_result