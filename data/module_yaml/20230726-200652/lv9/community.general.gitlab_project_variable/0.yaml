---
- name: Test playbook for community.general.gitlab_project_variable
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Create/Update/Delete GitLab project variables
      community.general.gitlab_project_variable:
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        api_password: "{{ api_password }}"
        api_token: "{{ api_token }}"
        api_oauth_token: "{{ api_oauth_token }}"
        api_job_token: "{{ api_job_token }}"
        project: "{{ project }}"
        purge: "{{ purge_var }}"
        state: "{{ state_var }}"
        validate_certs: "{{ validate_certs_var }}"
        variables:
          - key: "var1"
            value: "value1"
          - key: "var2"
            value: "value2"
        vars:
          var3: "value3"
          var4: "value4"