---
- name: Test playbook for community.network.ce_mtu module
  hosts: localhost
  gather_facts: false
  vars:
    interfaces:
      - eth0
      - eth1
      - eth2

  tasks:
    - name: Set random MTU on network interfaces
      community.network.ce_mtu:
        interface: "{{ item }}"
        mtu: "{{ range(1400, 1500) | random }}"
      loop: "{{ interfaces }}"

    - name: Verify if MTU is set correctly
      community.network.ce_mtu:
        interface: "{{ item }}"
        jumbo_max: yes
        jumbo_min: yes
      loop: "{{ interfaces }}"