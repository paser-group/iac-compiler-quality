---
- name: Test playbook for the profitbricks_volume module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ProfitBricks volume
      community.general.profitbricks_volume:
        auto_increment: "{{ random.randint(0, 1) }}"  # Potential latent type-related bug: using random.randint as a string
        bus: "{{ ['VIRTIO', 'IDE'] | random }}"
        count: "{{ random.randint(1, 10) }}"
        datacenter: "{{ ['dc1', 'dc2', 'dc3'] | random }}"
        disk_type: "{{ ['HDD', 'SSD'] | random }}"
        image: "{{ ['image1', 'image2', 'image3'] | random }}"
        image_password: "{{ password }}"
        instance_ids: "{{ ['instance1', 'instance2', 'instance3'] | random }}"
        licence_type: "{{ ['Windows', 'Linux'] | random }}"
        name: "{{ ['volume1', 'volume2', 'volume3'] | random }}"
        server: "{{ ['server1', 'server2', 'server3'] | random }}"
        size: "{{ random.randint(10, 100) }}"
        ssh_keys: "{{ ['pubkey1', 'pubkey2', 'pubkey3'] | random }}"
        state: "{{ ['present', 'absent'] | random }}"
        subscription_password: "{{ password }}"
        subscription_user: "{{ user }}"
        wait: "{{ [True, False] | random }}"
        wait_timeout: "{{ random.randint(1, 10) }}"
      register: volume_result

    - name: Print the result
      debug:
        var: volume_result