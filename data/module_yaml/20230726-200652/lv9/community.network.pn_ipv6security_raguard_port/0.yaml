---
- name: Test playbook for pn_ipv6security_raguard_port module
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: 10.1.1.254
    pn_name: node-net
    pn_ports: 1-10
    state: present

  tasks:
    - name: Add ipv6 security ra guard to the specified range of ports
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: "{{ state }}"
        pn_ipv6security_ra_guard: enable

    - name: Remove ipv6 security ra guard from the specified range of ports
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: "{{ state }}"
        pn_ipv6security_ra_guard: disable