- name: Manage OS X defaults
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set OS X defaults
      community.general.osx_defaults:
        domain: com.example.defaults
        key: "{{ item.key }}"
        value: "{{ item.value }}"
        type: "{{ item.type }}"
      loop:
        - { key: "Key1", value: "Value1", type: "string" }
        - { key: "Key2", value: "Value2", type: "bool" }
        - { key: "Key3", value: "Value3", type: "integer" }
        - { key: "Key4", value: "Value4", type: "array "}

    # Test case 1 - Valid IP address
    - name: Set valid IP address
      community.general.osx_defaults:
        domain: com.example.defaults
        key: "Key1"
        value: "10.1.1.1"
        type: "string"

    # Test case 2 - Invalid IP address
    - name: Set invalid IP address
      community.general.osx_defaults:
        domain: com.example.defaults
        key: "Key1"
        value: "10.1.1.1.1"
        type: "string"

    # Test case 3 - Array with invalid IP address
    - name: Set array with invalid IP address
      community.general.osx_defaults:
        domain: com.example.defaults
        key: "Key4"
        value:
          - "10.1.1.1"
          - "10.1.1.1.1"
        type: "array"

    # Test case 4 - Bool with invalid IP address
    - name: Set bool with invalid IP address
      community.general.osx_defaults:
        domain: com.example.defaults
        key: "Key2"
        value: "10.1.1.1"
        type: "bool"