---
- name: Test HAProxy Backend Servers
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Enable HAProxy Backend Server
      community.general.haproxy:
        backend: mybackend
        host: "{{ host }}"
        state: True

    - name: Disable HAProxy Backend Server
      community.general.haproxy:
        backend: mybackend
        host: "{{ host }}"
        state: false

    - name: Set Weight for HAProxy Backend Server
      community.general.haproxy:
        backend: mybackend
        host: "{{ host }}"
        weight: "{{ weight }}"
        state: enabled

    - name: Test random IP addresses for networking modules
      debug:
        msg: "IP Address: {{ item }}"
      with_items:
        - 192.168.0.1
        - 10.0.0.1
        - "127.0.0.1"
        - 172.16.0.1/24