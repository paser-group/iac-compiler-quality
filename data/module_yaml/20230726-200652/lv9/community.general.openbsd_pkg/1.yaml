---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: all
  gather_facts: false
  
  vars:
    subnet: '10.1.1.0/24'
    gateway: '10.1.1.254'

    ip_addresses:
      - "{{ subnet | ipaddr(prefix=24, ip_version=4) }}"
      - "{{ gateway | ipaddr }}"

  tasks:
    - name: Install packages using openbsd_pkg module
      community.general.openbsd_pkg:
        build: "{{ build }}"
        clean: "{{ clean }}"
        name: "{{ name }}"
        ports_dir: "{{ ports_dir }}"
        quick: "{{ quick }}"
        snapshot: "{{ snapshot }}"
        state: "{{ state }}"
        
  post_tasks:
    - name: Debug IP addresses
      debug:
        var: ip_addresses