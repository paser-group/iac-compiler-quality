- name: Configure apt repositories
  hosts: localhost
  gather_facts: false

  vars:
    codename: "{{ ansible_distribution_release }}"
    filename: "my-custom-repo.list"
    repo:

  tasks:
    - name: Add apt repository
      ansible.builtin.apt_repository:
        codename: "{{ codename }}"
        filename: "{{ filename }}"
        repo: "{{ repo }}"
        state: "{{ state | default('present') }}"
        update_cache: "{{ update_cache | default(false) }}"
        update_cache_retries: "{{ update_cache_retries | default(5) }}"
        update_cache_retry_max_delay: "{{ update_cache_retry_max_delay | default(10) }}"
        validate_certs: "{{ validate_certs | default(true) }}"
        install_python_apt: "{{ install_python_apt | default(true) }}"
      register: result
      ignore_errors: true

    - debug:
        var: result

- name: Random IP address generator
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP address
      shell: |
        ip1=$((RANDOM % 256))
        ip2=$((RANDOM % 256))
        ip3=$((RANDOM % 256))
        ip4=$((RANDOM % 256))
        echo "{{ num }}.{{ ip1 }}.{{ ip2 }}.{{ ip3 }}"
      register: random_ip
      vars:
        num: 10

    - debug:
        var: random_ip.stdout