---

- name: Test playbook for ansible.builtin.lineinfile module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add line to file
      ansible.builtin.lineinfile:
        path: "/path/to/file.txt"
        line: "This is a test line"
        owner: "{{ owner }}"
        mode: "{{ mode }}"
      vars:
        owner: "{{ lookup('template', 'owner.j2') }}"
        mode: 0644