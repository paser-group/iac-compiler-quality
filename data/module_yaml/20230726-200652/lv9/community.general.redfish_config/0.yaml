---
- name: Test redfish_config module
  hosts: all
  gather_facts: false

  vars:
    # Generate random IP addresses
    random_ip_address: "{{ '%d.%d.%d.%d' | format(ansible_random | randrange(start=1, end=255)),
                          ansible_random | randrange(start=0, end=255),
                          ansible_random | randrange(start=0, end=255),
                          ansible_random | randrange(start=1, end=255)) }}"
    # Set other variables
    auth_token: "your_auth_token"
    baseuri: "your_base_uri"
    bios_attributes:
      attribute1: value1
      attribute2: value2
    boot_order:
      - option1
      - option2
    category: "your_category"
    command:
      - "{{ random_ip_address }}"
    hostinterface_config:
      config1: value1
      config2: value2
    hostinterface_id: "your_hostinterface_id"
    network_protocols:
      protocol1: value1
      protocol2: value2
    nic_addr: "{{ random_ip_address }}"
    nic_config:
      config1: value1
      config2: value2
    password: "your_password"
    resource_id: "your_resource_id"
    sessions_config:
      config1: value1
      config2: value2
    timeout: 5
    username: "your_username"

  tasks:
    - name: Configure the Out-Of-Band controller
      community.general.redfish_config:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        bios_attributes:
          "{{ bios_attributes }}"
        boot_order:
          "{{ boot_order }}"
        category: "{{ category }}"
        command:
          "{{ command }}"
        hostinterface_config:
          "{{ hostinterface_config }}"
        hostinterface_id: "{{ hostinterface_id }}"
        network_protocols:
          "{{ network_protocols }}"
        nic_addr: "{{ nic_addr }}"
        nic_config:
          "{{ nic_config }}"
        password: "{{ password }}"
        resource_id: "{{ resource_id }}"
        sessions_config:
          "{{ sessions_config }}"
        strip_etag_quotes: false
        timeout: "{{ timeout }}"
        username: "{{ username }}"
      tags: always