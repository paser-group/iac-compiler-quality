- hosts: localhost
  gather_facts: false

  tasks:
    - name: Create VPC
      community.general.hwc_network_vpc:
        cidr: "10.0.0.0/16"
        domain: example.com
        id: "vpc_id"
        identity_endpoint: "https://example.com/auth"
        name: test_vpc
        password: my_password
        project: my_project
        region: us-west-2
        state: present
        timeouts:
          connection: 30
          operation: 120
        user: my_user

    - name: Debug the created VPC
      debug:
        var: community.general.hwc_network_vpc

    - name: Delete VPC
      community.general.hwc_network_vpc:
        cidr: "10.0.0.0/16"
        domain: example.com
        id: "vpc_id"
        identity_endpoint: "https://example.com/auth"
        name: test_vpc
        password: my_password
        project: my_project
        region: us-west-2
        state: absent
        timeouts:
          connection: 30
          operation: 120
        user: my_user

    - name: Debug the deleted VPC
      debug:
        var: community.general.hwc_network_vpc