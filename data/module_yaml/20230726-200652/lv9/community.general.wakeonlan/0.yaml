---
- name: Test playbook for community.general.wakeonlan module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP address
      set_fact:
        random_ip: "{{ 10|random ~ '.' ~ 1|random ~ '.' ~ 1|random ~ '.' ~ 1|random + 1 }}"

    - name: Send magic packet to wake up target device
      community.general.wakeonlan:
        broadcast: "{{ random_ip }}"
        mac: "00:11:22:33:44:55"
        port: 9
      register: wol_result

    - name: Debug wake-on-lan result
      debug:
        var: wol_result