---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    taiga_host: "https://your-taiga-host.com"
    project: "your-project"
    issue_type: "Task"
    subject: "Test Issue"
    description: "This is a test issue"
    state: "present"

  tasks:
    - name: Create issue
      community.general.taiga_issue:
        taiga_host: "{{ taiga_host }}"
        project: "{{ project }}"
        issue_type: "{{ issue_type }}"
        subject: "{{ subject }}"
        description: "{{ description }}"
        state: "{{ state }}"
        status: "New"
        tags: ["bug"]
        attachment: "/path/to/attachment"
        attachment_description: 1234

    - name: Delete issue
      community.general.taiga_issue:
        taiga_host: "{{ taiga_host }}"
        project: "{{ project }}"
        issue_type: "{{ issue_type }}"
        subject: "{{ subject }}"
        state: "absent"