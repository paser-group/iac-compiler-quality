- name: Configure OSPF interface instance
  hosts: ansible_host
  gather_facts: False

  vars:
    ospf_interfaces:
      - interface: "{{ ansible_default_ipv4.interface }}"
        process_id: 1
        area: 0.0.0.0
        hello_interval: 10
        dead_interval: 40
        cost: 1
        state: present

  tasks:
    - name: Include the OSPF Interface role
      include_role:
        name: community.network.ce_interface_ospf

      vars:
        ansible_network_os: huawei
        ansible_host: "{{ inventory_hostname }}"
        ansible_port: 22
        ansible_user: your_username
        ansible_password: your_password
        ansible_become: yes
        ansible_become_method: enable
        ansible_become_password: your_enable_password

        ce_interface_ospf_auth_key_id: null
        ce_interface_ospf_auth_mode: null
        ce_interface_ospf_auth_text_md5: null
        ce_interface_ospf_auth_text_simple: null
        ce_interface_ospf_silent_interface: "{{ silent_interface | default(true) }}"

        ce_interfaces_ospf: "{{ ospf_interfaces }}"

    - name: Print OSPF interface configuration
      debug:
        var: ce_interfaces_ospf