---
- name: Testing Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    gem_name: mygem
    gem_version: 1.0.0
    network:
      ip: "10.1"
      subnet: "24"

  tasks:
    - name: Install gem with specific options
      community.general.gem:
        name: "{{ gem_name }}"
        version: "{{ gem_version }}"
        executable: "/usr/bin/gem"
        build_flags: "build"
        install_dir: "/opt/gems"
        include_dependencies: false
        include_doc: true
        norc: false
        state: absent
      register: gem_result

    - name: Display gem installation result
      debug:
        var: gem_result