- name: Test playbook for exposing latent type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Set IP address of networking devices
      community.network.pn_connection_stats_settings:
        pn_client_server_stats_log_disk_space: 1GB
        pn_client_server_stats_log_enable: True
        pn_client_server_stats_log_interval: 5s
        pn_client_server_stats_max_memory: 2GB
        pn_cliswitch: switch1
        pn_connection_backup_enable: True
        pn_connection_backup_interval: 10s
        pn_connection_max_memory: 4GB
        pn_connection_stats_log_disk_space: 10GB
        pn_connection_stats_log_enable: False
        pn_connection_stats_log_interval: 30s
        pn_connection_stats_max_memory: ABC  # Potential bug: incorrect type
        pn_enable: True
        pn_fabric_connection_backup_enable: False
        pn_fabric_connection_backup_interval: 1m
        pn_fabric_connection_max_memory: 8GB
        pn_service_stat_max_memory: 16GB
        state: present
      register: result

    - name: Debug result
      debug:
        var: result