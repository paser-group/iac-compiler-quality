---
- name: Test ansible network avi_api_version module
  hosts: localhost
  gather_facts: False

  vars:
    # Random IP addresses for testing
    random_ip_addresses:
      - 192.168.0.1
      - 172.16.0.1
      - 10.0.0.1

  tasks:
    - name: Call avi_api_version module
      community.network.avi_api_version:
        api_credentials:
          controller: "{{ random_ip_addresses | random }}"
          username: admin
          password: secret
        api_version: v21.1
        api_context:
          tenant: Default-Cloud
          invalid_option: "{{ random_ip_addresses | random }}"
      register: result

    - name: Display module result
      debug:
        var: result