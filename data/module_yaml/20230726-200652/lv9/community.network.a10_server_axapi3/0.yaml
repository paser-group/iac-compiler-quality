- name: Test playbook for 'community.network.a10_server_axapi3' module
  hosts: localhost
  gather_facts: false
  vars:
    a10_servers:
      - server_ip: 10.1.1.1
        server_ports:
          - port: 80
            protocol: tcp
            enable_ssl: false
        server_status: true
      - server_ip: 10.1.1.2
        server_ports: []
        server_status: false
  
  tasks:
    - name: Include a10_server_axapi3 module
      include_vars:
        file: a10_server_axapi3.yml
  
    - name: Test with random IP addresses
      a10_server_axapi3:
        server_ip: "{{ item.server_ip }}"
        server_ports: "{{ item.server_ports }}"
        server_status: "{{ item.server_status }}"
        url: "https://{{ item.server_ip }}/api/v3/"
        force: true
      loop: "{{ a10_servers }}"