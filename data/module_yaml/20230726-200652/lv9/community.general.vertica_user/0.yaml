---
- name: Test Vertica User Module
  hosts: localhost
  gather_facts: false
  vars:
    cluster: "my_cluster"
    db: "my_database"
    expired: false
    ldap: false
    login_password: "my_admin_password"
    login_user: "admin"
    password: "my_user_password"
    port: "5433"
    profile: "default"
    resource_pool: "my_resource_pool"
    roles: "my_role1,my_role2"
    state: "present"
    user: "my_user1"
  
  tasks:
    - name: Add Vertica Database User
      community.general.vertica_user:
        cluster: "{{ cluster }}"
        db: "{{ db }}"
        expired: "{{ expired }}"
        ldap: "{{ ldap }}"
        login_password: "{{ login_password }}"
        login_user: "{{ login_user }}"
        password: "{{ password }}"
        port: "{{ port }}"
        profile: "{{ profile }}"
        resource_pool: "{{ resource_pool }}"
        roles: "{{ roles }}"
        state: "{{ state }}"
        user: "{{ user }}"
      register: result

    - name: Display Result
      debug:
        var: result