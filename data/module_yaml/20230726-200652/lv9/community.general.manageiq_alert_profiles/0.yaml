---
- name: Configure ManageIQ Alert Profiles
  hosts: localhost
  gather_facts: false

  vars:
    manageiq_connection:
      url: "https://manageiq.example.com/api"
      username: "admin"
      password: "password"

  tasks:
    - name: Create Alert Profile
      community.general.manageiq_alert_profiles:
        name: 12345
        resource_type: 6789
        state: true
        alerts:
          - description: "High CPU Usage"
            mode: 80
            active: On
            expression: 90