---
- name: Test playbook for community.general.sapcar_extract module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP addresses for networking modules
      set_fact:
        random_ip: "{{ (256|random) + 1 }}.{{ (256|random) }}.{{ (256|random) }}.{{ (256|random) }}"
        random_subnet: "{{ (256|random) }}.{{ (256|random) }}.{{ (256|random) }}.{{ (256|random) }}"
        random_gateway: "{{ (256|random) + 1 }}.{{ (256|random) + 1 }}.{{ (256|random) + 1 }}.{{ (256|random) + 1 }}"

    - name: Print the random IP addresses
      debug:
        msg: "Random IP: {{ random_ip }}, Random Subnet: {{ random_subnet }}, Random Gateway: {{ random_gateway }}"
      tags:
        - heuristic

    - name: Extract the SAPCAR archive
      community.general.sapcar_extract:
        binary_path: "/path/to/sapcar"
        dest: "/path/to/extract"
        manifest: "manifest.xml"
        path: "/path/to/archive"
        remove: true
        security_library: "/path/to/library"
        signature: true
      tags:
        - module

    - name: Display the extracted files
      find:
        paths: "/path/to/extract"
        file_type: any
      tags:
        - validation