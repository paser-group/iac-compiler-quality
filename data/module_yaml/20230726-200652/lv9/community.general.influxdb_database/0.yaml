---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create InfluxDB database
      community.general.influxdb_database:
        database_name: "{{ database_name }}"
        hostname: "{{ influxdb_hostname }}"
        password: "{{ influxdb_password }}"
        path: "{{ influxdb_path }}"
        port: "{{ influxdb_port }}"
        proxies: "{{ influxdb_proxies }}"
        retries: "{{ influxdb_retries }}"
        ssl: "{{ influxdb_ssl }}"
        state: "{{ influxdb_state }}"
        timeout: "{{ influxdb_timeout }}"
        udp_port: "{{ influxdb_udp_port }}"
        use_udp: "{{ influxdb_use_udp }}"
        username: "{{ influxdb_username }}"
        validate_certs: "{{ influxdb_validate_certs }}"
      vars:
        random_ip_address: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3', '10.1.1.4'] | random }}"
        subnet: "10.1.1.0/24"
        gateway: "10.1.1.254"

      register: influxdb_result

    - debug:
        var: influxdb_result