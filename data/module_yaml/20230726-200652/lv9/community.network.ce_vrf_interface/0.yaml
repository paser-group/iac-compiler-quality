---
- name: Test ansible type-related bugs in community.network.ce_vrf_interface module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create random IP addresses
      set_fact:
        vpn_interface_ip: "{{ ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string }}"
        vrf_ip: "{{ ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string + '.' + ((256 | randomize) + 1) | string }}"
  
    - name: Manage interface specific VPN configuration
      community.network.ce_vrf_interface:
        state: "{{ ['present', 'absent', 'None'] | random }}"
        vpn_interface: "{{ vpn_interface_ip }}"
        vrf: "{{ vrf_ip }}"
      register: result
      
    - name: Debug result
      debug:
        var: result