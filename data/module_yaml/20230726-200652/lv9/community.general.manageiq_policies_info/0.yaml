- name: Test manageiq_policies_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include manageiq collections
      include_vars:
        file: "manageiq_vars.yaml"

    - name: Fetch manageiq policies info
      community.general.manageiq_policies_info:
        manageiq_connection:
          host: "{{ manageiq_host }}"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"
        resource_id: "{{ resource_id }}"
        resource_name: "{{ resource_name }}"
        resource_type: "{{ resource_type }}"
      register: policies_info

    - name: Display policies info
      debug:
        var: policies_info