---
- name: Test playbook for dimensiondata_network module
  hosts: localhost
  gather_facts: false

  vars:
    description: "Test network"
    location: "EU6"
    mcp_password: "test_password"
    mcp_user: "test_user"
    region: "dd-eu"
    service_plan: "ADVANCED"
    validate_certs: true
    wait: false
    wait_poll_interval: 5
    wait_time: 600

  tasks:
    - name: Create network
      community.general.dimensiondata_network:
        description: "{{ description }}"
        location: "{{ location }}"
        mcp_password: "{{ mcp_password }}"
        mcp_user: "{{ mcp_user }}"
        name: "test-network"
        region: "{{ region }}"
        service_plan: "{{ service_plan }}"
        state: "present"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_poll_interval: "{{ wait_poll_interval }}"
        wait_time: "{{ wait_time }}"

    - name: Update network
      community.general.dimensiondata_network:
        description: "{{ description }}"
        location: "{{ location }}"
        mcp_password: "{{ mcp_password }}"
        mcp_user: "{{ mcp_user }}"
        name: "test-network"
        region: "{{ region }}"
        service_plan: "{{ service_plan }}"
        state: "present"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_poll_interval: "{{ wait_poll_interval }}"
        wait_time: "{{ wait_time }}"

    - name: Delete network
      community.general.dimensiondata_network:
        description: "{{ description }}"
        location: "{{ location }}"
        mcp_password: "{{ mcp_password }}"
        mcp_user: "{{ mcp_user }}"
        name: "test-network"
        region: "{{ region }}"
        service_plan: "{{ service_plan }}"
        state: "absent"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_poll_interval: "{{ wait_poll_interval }}"
        wait_time: "{{ wait_time }}"