---
- name: Apt Key Playbook
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Add apt key
      ansible.builtin.apt_key:
        id: "apt-key-{{ hostvars[inventory_hostname]['ansible_distribution'] }}"
        url: "http://{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}:8080/key.asc"
      vars:
        ansible_distribution: "{{ ['ubuntu', 'alpine', 'centos', 'redhat'] | random }}"