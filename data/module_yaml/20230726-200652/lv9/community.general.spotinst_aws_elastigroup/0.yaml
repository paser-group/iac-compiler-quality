---
- name: Test playbook for spotinst_aws_elastigroup
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create an elastigroup
      community.general.spotinst_aws_elastigroup:
        account_id: "1234567890"  # Replace with your actual account ID
        name: "my-elastigroup"
        availability_zones:
          - "us-west-2a"
          - "us-west-2b"
        state: "present"
      register: result

    - name: Display the result
      debug:
        var: result

    - name: Update the same elastigroup
      community.general.spotinst_aws_elastigroup:
        account_id: "1234567890"  # Replace with your actual account ID
        name: "my-elastigroup"
        availability_zones:
          - "us-west-2a"
          - "us-west-2b"
          - "us-west-2c"
        state: "present"
      register: result

    - name: Display the result
      debug:
        var: result

    - name: Delete the elastigroup
      community.general.spotinst_aws_elastigroup:
        account_id: "1234567890"  # Replace with your actual account ID
        name: "my-elastigroup"
        state: "absent"
      register: result

    - name: Display the result
      debug:
        var: result