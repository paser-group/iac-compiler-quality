- name: Test playbook for community.general.utm_aaa_group_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP address
      set_fact:
        random_ip: "{{ hostvars['localhost']['ansible_all_ipv4_addresses'] | random }}"
  
    - name: Get info for reverse_proxy frontend
      community.general.utm_aaa_group_info:
        headers:
          Content-Type: application/json
        name: "Frontend Group"
        state: "present"
        utm_host: "{{ random_ip }}"
        utm_port: 8080
        utm_protocol: "http"
        utm_token: "my_token"
        validate_certs: true
      register: utm_info

    - name: Debug output
      debug:
        var: utm_info