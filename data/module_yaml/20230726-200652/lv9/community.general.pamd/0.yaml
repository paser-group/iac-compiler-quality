- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure network interfaces
      ansible.builtin.synchronize:
        src: "{{ item.src }}"
        dest: "{{ item.dest }}"
      with_items:
        - { src: "files/interface1.conf", dest: "/etc/network/interfaces", type: "file" }
        - { src: "files/interface2.conf", dest: "/etc/network/interfaces", type: "file" }
        - { src: "files/interface3.conf", dest: "/etc/network/interfaces", type: "file" }
        - { src: "files/interface4.conf", dest: "/etc/network/interfaces", type: "file" }

    - name: Print debug information
      debug:
        var: ansible_facts['ansible_file_transfer']

    - name: Remove network interface configurations
      ansible.builtin.file:
        path: "{{ item.path }}"
        state: absent
      with_items:
        - { path: "/etc/network/interfaces" }