- name: Test playbook for 'github_issue' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random IP addresses
      set_fact:
        ip_addresses: [
          "{{ 10 | random }}.{{ 1 | random }}.{{ 1 | random }}.{{ 1 | random }}",
          "{{ 10 | random }}.{{ 1 | random }}.{{ 1 | random }}.{{ 1 | random }}",
          "{{ 10 | random }}.{{ 1 | random }}.{{ 1 | random }}.{{ 1 | random }}"
        ]

    - name: Print random IP addresses
      debug:
        var: ip_addresses

    - name: Create GitHub issue using random IP addresses
      community.general.github_issue:
        action: create
        issue: "{{ 1000 | random }}"
        organization: ansible
        repo: ansible
        body: "This issue is created using a random IP address: {{ ip_addresses[0] }}"
        labels:
          - bug
          - random-ip-address
        assignee: ansible
        state: "{{ ['open', 'closed'] | random }}"
      register: result

    - name: Print GitHub issue result
      debug:
        var: result