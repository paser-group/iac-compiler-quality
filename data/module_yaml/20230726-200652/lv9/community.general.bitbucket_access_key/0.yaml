---
- name: Test playbook for 'community.general.bitbucket_access_key' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP addresses
      ansible.builtin.debug:
        msg: "{{ item }}"
      loop: "{{ query('community.general.random_ipv4', count=4) }}"

    - name: Configure Bitbucket access key
      community.general.bitbucket_access_key:
        client_id: "myclientid"
        client_secret: "myclientsecret"
        key: "mykey"
        label: "mylabel"
        password: "mypassword"
        repository: "myrepository"
        state: "present"
        user: "myuser"
        workspace: "myworkspace"
      register: result

    - name: Display result
      ansible.builtin.debug:
        var: result