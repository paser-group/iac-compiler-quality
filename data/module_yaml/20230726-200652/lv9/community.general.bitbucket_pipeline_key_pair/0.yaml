---
- name: Test Ansible Bitbucket Pipeline Key Pair Module
  connection: local
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate random IP address
      set_fact:
        random_ip: "{{ hostvars[inventory_hostname].ansible_default_ipv4.address }}"
        
    - name: Print Random IP
      debug:
        var: random_ip
        
    - name: Manage Bitbucket Pipeline Key Pair
      community.general.bitbucket_pipeline_key_pair:
        client_id: your_client_id
        client_secret: your_client_secret
        password: your_password
        private_key: your_private_key
        public_key: your_public_key
        repository: your_repository
        state: present
        user: your_user
        workspace: your_workspace
      register: result
      
    - name: Print Module Output
      debug:
        var: result