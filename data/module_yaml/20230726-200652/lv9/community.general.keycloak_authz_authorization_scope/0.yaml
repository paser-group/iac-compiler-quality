---
- name: Test keycloak_authz_authorization_scope module
  hosts: localhost
  gather_facts: false
  vars:
    auth_client_id: "client_id"
    auth_client_secret: "client_secret"
    auth_keycloak_url: "https://keycloak.example.com"
    auth_password: "admin_password"
    auth_realm: "realm"
    auth_username: "admin_user"
    client_id: "test_client_id"
    connection_timeout: 60
    display_name: "Test Client"
    http_agent: "Ansible HTTP Agent"
    icon_uri: "https://example.com/icon.png"
    name: "Test Scope"
    realm: "test_realm"
    state: "present"
    token: "admin_token"
    validate_certs: False

  tasks:
    - name: "Create authorization scope"
      community.general.keycloak_authz_authorization_scope:
        auth_client_id: "{{ auth_client_id }}"
        auth_client_secret: "{{ auth_client_secret }}"
        auth_keycloak_url: "{{ auth_keycloak_url }}"
        auth_password: "{{ auth_password }}"
        auth_realm: "{{ auth_realm }}"
        auth_username: "{{ auth_username }}"
        client_id: "{{ client_id }}"
        connection_timeout: "{{ connection_timeout }}"
        display_name: "{{ display_name }}"
        http_agent: "{{ http_agent }}"
        icon_uri: "{{ icon_uri }}"
        name: "{{ name }}"
        realm: "{{ realm }}"
        state: "{{ state }}"
        token: "{{ token }}"
        validate_certs: "{{ validate_certs }}"

- name: Trigger type-related bug
  hosts: localhost
  gather_facts: false
  vars:
    invalid_timeout: "invalid_timeout_value"
    
  tasks:
    - name: Set connection timeout
      set_fact:
        connection_timeout: "{{ invalid_timeout }}"

    - name: Print connection timeout
      debug:
        var: connection_timeout