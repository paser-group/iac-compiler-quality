---
- name: Send email using SendGrid
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Send email
      community.general.sendgrid:
        api_key: "{{ sendgrid_api_key }}"
        from_address: "sender@example.com"
        to_addresses:
          - "recipient@example.com"
        subject: "Test email from Ansible"
        body: "This is a test email sent using Ansible"

      register: result

    - name: Display result
      debug:
        var: result