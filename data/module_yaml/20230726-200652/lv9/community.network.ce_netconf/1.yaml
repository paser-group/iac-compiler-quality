---
- name: Run netconf command on HUAWEI device
  hosts: huawei_devices
  gather_facts: false
  
  vars:
    cfg_xml: |
      <rpc>
        <get>
          <interface>{{ random_ip_address }}</interface>
        </get>
      </rpc>
  
  tasks:
    - name: Run netconf command
      community.network.ce_netconf:
        hosts: "{{ inventory_hostname }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        cfg_xml: "{{ cfg_xml }}"
      register: result
  
    - name: Print result
      debug:
        var: result