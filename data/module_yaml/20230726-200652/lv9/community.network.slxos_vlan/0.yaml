- name: Manage VLANs on Extreme Networks switches
  hosts: switch
  gather_facts: false

  tasks:
    - name: Create random IP addresses for test cases
      set_fact:
        subnet: "{{ '%d.%d.%d.%d' | format(10, 1, 1, range(2, 255) | random) }}"
        gateway: "{{ subnet.split('.')[0:3] | join('.') }}.254"
      run_once: true

    - name: Configure VLANs
      community.network.slxos_vlan:
        name: "vlan{{ item }}"
        vlan_id: "{{ item }}"
        delay: None
        aggregate: None
        interfaces: None
        purge: true
        state: present
      loop: "{{ range(2, 10) | list }}"
      become: true