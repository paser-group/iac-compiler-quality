---
- name: Test playbook for community.general.pids module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Generate random IP address
      set_fact:
        random_ip: "{{ '%d.%d.%d.%d'|format(ansible_random | int, ansible_random | int, ansible_random | int, ansible_random | int) }}"

    - name: Debug random IP address
      debug:
        var: random_ip

    - name: Check process IDs using community.general.pids module
      community.general.pids:
        name: "{{ random_ip }}"
      register: process_ids

    - name: Debug process IDs
      debug:
        var: process_ids