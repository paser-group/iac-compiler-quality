- name: Trigger a latent type-related bug in the macports module
  hosts: webservers
  gather_facts: false

  tasks:

    - name: Install MacPorts package
      community.general.macports:
        name: "{{ ['python', 'docker', 'git'] | random }}"
        selfupdate: "{{ [true, false] | random }}"
        state: "{{ ['present', 'absent'] | random }}"
        upgrade: "{{ [true, false] | random }}"
        variant: "{{ ['+' ~ ['ssl', 'gui'] | random] | random }}"
      register: macports_result

    - name: Debug macports_result
      debug:
        var: macports_result