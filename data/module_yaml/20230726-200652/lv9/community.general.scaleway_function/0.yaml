---
- name: Test playbook for 'community.general.scaleway_function' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random IP addresses for testing
      set_fact:
        random_ip_address: "{{ [(1..254 | random), (1..254 | random), (1..254 | random), (1..254 | random)] | join('.') }}"
 
    - name: Create Scaleway function
      community.general.scaleway_function:
        api_token: "your_api_token"
        api_url: "https://api.scaleway.com"
        name: "test_function"
        region: "par1"
        privacy: "public"
        runtime: "python3.8"
        handler: "main.handler"
        description: "Testing Scaleway function"
        redeploy: yes
        wait: yes
        wait_timeout: 120
        secret_environment_variables:
          SECRET_KEY: "secret_value"
          ANOTHER_SECRET: "another_value"
        environment_variables:
          ENV_VAR_1: "value_1"
          ENV_VAR_2: "value_2"
        state: present
      register: scaleway_function

    - name: Print Scaleway function details
      debug:
        var: scaleway_function

    ### Additional test cases can be added here ###