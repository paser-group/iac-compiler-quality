---
- name: Import Role and Trigger Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Import Role
      ansible.builtin.import_role:
        name: myrole
        tasks_from: "tasks/main.yml"
        vars_from: "vars/main.yml"
        handlers_from: "handlers/main.yml"
        defaults_from: "defaults/main.yml"
        allow_duplicates: true
        rolespec_validate: false

- name: Trigger Type-Related Bug
  hosts: "{{ hosts }}"
  gather_facts: false

  tasks:
    - name: Generate Random IP Address
      set_fact:
        random_ip: "{{ '%d.%d.%d.%d' | format(ansible_random|int, ansible_random|int, ansible_random|int, ansible_random|int) }}"
      run_once: true

    - name: Set IP Address Fact
      set_fact:
        ip_address: "{{ random_ip }}"
      run_once: true

    - name: Print IP Address
      ansible.builtin.debug:
        msg: "Random IP Address: {{ ip_address }}"
      run_once: true

    - name: Print Dummy Task
      ansible.builtin.debug:
        msg: "This is a dummy task"
      run_once: true