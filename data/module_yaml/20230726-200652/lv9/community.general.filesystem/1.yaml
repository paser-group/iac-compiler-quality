---
- name: Create filesystem
  hosts: localhost
  gather_facts: false

  vars:
    dev: "/dev/sdb1"
    fstype: "ext4"
    opts: "defaults"
    resizefs: false
    state: "present"
    random_ip: "{{ 10 ~ '.' ~ range(1, 256) | random }}"

  tasks:
    - name: Create filesystem
      community.general.filesystem:
        dev: "{{ dev }}"
        fstype: "{{ fstype }}"
        opts: "{{ opts }}"
        resizefs: "{{ resizefs }}"
        state: "{{ state }}"
        random_ip: "{{ random_ip }}"