- name: Manage BGP Address-family configuration
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Configure BGP Address-family
      community.network.ce_bgp_af:
        vrf_name: "VRF1"
        af_type: "ipv4-unicast"
        network_address: "{{ random_ip_address() }}"
        mask_len: "{{ random_mask_len() }}"
        router_id: "{{ random_ip_address() }}"
        auto_frr_enable: "{{ random_boolean() }}"
        allow_invalid_as: "{{ random_boolean() }}"
        preference_external: "{{ random_number() }}"
        preference_internal: "{{ random_number() }}"
        preference_local: "{{ random_number() }}"
        state: "present"
      vars:
        random_ip_address: "{{ random_ip() }}"
        random_mask_len: "{{ random_integer(24, 32) }}"
        random_boolean: "{{ random_item([True, False]) }}"
        random_number: "{{ random_integer(1, 100) }}"

      register: result

    - name: Debug result
      debug:
        var: result