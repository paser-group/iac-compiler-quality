- name: Test playbook for community.network.avi_applicationprofile module
  hosts: localhost
  gather_facts: False

  vars:
    network_nodes:
      - { name: "ubuntu1", ip: "10.1.1.1", distro: "ubuntu" }
      - { name: "alpine1", ip: "10.1.1.2", distro: "alpine" }
      - { name: "centos1", ip: "10.1.1.3", distro: "centos" }
      - { name: "redhat1", ip: "10.1.1.4", distro: "redhat" }

    api_context: {}
    controller: "localhost"
    tenant: "Default"
    username: "admin"
    password: "password"

  tasks:
    - name: Create Application Profile
      community.network.avi_applicationprofile:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        name: "Test Application Profile"
        tenant: "{{ tenant }}"
        description: "Testing Application Profile creation"
        http_profile: "HTTP Profile"
      register: aviprov_result
      tags: create

    - debug:
        var: aviprov_result