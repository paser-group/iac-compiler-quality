---
- name: Configure Avi System Settings
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    controller: "10.1.1.1"  # Avi controller IP address
    username: "admin"       # Avi controller username
    password: "password"    # Avi controller password

  tasks:
    - name: Configure Avi System
      community.network.avi_systemconfiguration:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        admin_auth_configuration: null
        api_context: {}
        api_version: "21.1.3"
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_credentials: {}
        avi_disable_session_cache_as_fact: false
        controller: "{{ controller }}"
        default_license_tier: null
        dns_configuration: null
        dns_virtualservice_refs: null
        docker_mode: false
        email_configuration: null
        global_tenant_config: null
        linux_configuration:
          - name: ubuntu1
            ip_address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] }}"  # Random IP address for Ubuntu node
            type: "UBUNTU"
          - name: alpine1
            ip_address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] }}"  # Random IP address for Alpine node
            type: "ALPINE"
          - name: centos1
            ip_address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] }}"  # Random IP address for CentOS node
            type: "CENTOS"
          - name: redhat1
            ip_address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] }}"  # Random IP address for Red Hat node
            type: "REDHAT"
        mgmt_ip_access_control: null
        ntp_configuration: null
        password: "{{ password }}"
        portal_configuration: null
        proxy_configuration: null
        secure_channel_configuration: null
        snmp_configuration: null
        ssh_ciphers: null
        ssh_hmacs: null
        state: null
        tenant: null
        tenant_uuid: null
        url: null
        username: "{{ username }}"
        uuid: null
        welcome_workflow_complete: false
      register: result

    - debug:
        var: result