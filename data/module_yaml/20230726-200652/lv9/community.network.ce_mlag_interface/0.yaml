---
- name: Test playbook for community.network.ce_mlag_interface
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP addresses
      set_fact:
        ip_address: "{{ lookup('community.general.random_ipv4_subnet', subnet='10.1.1.0/24') }}"
        gateway_ip: "{{ lookup('community.general.random_ipv4_network', network_address='10.1.1.0', prefix_length=24) | ipaddr('address') }}"

    - name: Display IP addresses
      debug:
        var:
          ip_address
          gateway_ip

    - name: Manage MLAG interfaces
      community.network.ce_mlag_interface:
        dfs_group_id: "{{ None }}"
        eth_trunk_id: "{{ None }}"
        interface: "{{ None }}"
        mlag_error_down: "{{ None }}"
        mlag_id: "{{ None }}"
        mlag_priority_id: "{{ None }}"
        mlag_system_id: "{{ None }}"
        state: "{{ None }}"
      vars:
        ansible_connection: network_cli
        ansible_network_os: huawei

      delegate_to: localhost