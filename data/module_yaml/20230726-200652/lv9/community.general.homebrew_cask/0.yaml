---
- name: Install and Uninstall Applications using Homebrew Cask
  hosts: localhost
  gather_facts: false

  vars:
    app_names:
      - google-chrome
      - slack
      - visual-studio-code
    cask_install_options: []
    cask_path: /usr/local/Caskroom

  tasks:
    - name: Include required role
      include_role:
        name: radekg.homebrew_cask

    - name: Install applications
      homebrew_cask:
        name: "{{ item }}"
        state: present
        path: "{{ cask_path }}"
        update_homebrew: yes
        sudo_password: "{{ sudo_password }}"
      loop: "{{ app_names }}"

    - name: Uninstall applications
      homebrew_cask:
        name: "{{ item }}"
        state: absent
        path: "{{ cask_path }}"
      loop: "{{ app_names }}"