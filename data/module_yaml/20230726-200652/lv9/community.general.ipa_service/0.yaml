---
- name: Test Ansible latent type-related bugs
  hosts: localhost
  gather_facts: False

  vars:
    force: "true"
    hosts:
      - "{{ inventory_hostname }}"
    ipa_host: "10.1.1.{{ 1|random }}"
    ipa_pass: "my_password"
    ipa_port: 1234
    ipa_prot: "https"
    ipa_timeout: 10
    ipa_user: "admin"
    krbcanonicalname: "my_host"
    skip_host_check: "true"
    state: "present"
    validate_certs: "true"

  tasks:
    - name: Configure IPA service
      community.general.ipa_service:
        force: "{{ force }}"
        hosts: "{{ hosts }}"
        ipa_host: "{{ ipa_host }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        ipa_user: "{{ ipa_user }}"
        krbcanonicalname: "{{ krbcanonicalname }}"
        skip_host_check: "{{ skip_host_check }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - debug:
        var: result