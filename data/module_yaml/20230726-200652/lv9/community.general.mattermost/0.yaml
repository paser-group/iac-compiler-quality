- name: Send Mattermost message
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required dependencies
      pip:
        name: pymattermost
        state: present

    - name: Send Mattermost message
      community.general.mattermost:
        api_key: "YOUR_API_KEY"
        channel: "mattermost-channel"
        text: "Hello from Ansible!"
        username: "ansible"
        validate_certs: false
      register: result

    - name: Print the result
      debug:
        var: result