- name: Test playbook for ZFS delegated administration module
  hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Test ZFS delegated administration module
      community.general.zfs_delegate_admin:
        name: "pool/dataset"
        recursive: "{{ recursive | default(false) }}"
        state: "{{ state | default('present') }}"
        local: "{{ local | default(false) }}"
        descendents: "{{ descendents | default(false) }}"
        everyone: "{{ everyone | default(false) }}"
        groups: "{{ groups | default([]) }}"
        users: "{{ users | default([]) }}"
        permissions: "{{ permissions | default(['all']) }}"
      register: result

    - name: Print the result
      debug:
        var: result