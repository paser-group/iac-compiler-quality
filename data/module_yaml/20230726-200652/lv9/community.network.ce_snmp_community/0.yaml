- name: Manage SNMP Community Configuration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set variables
      vars:
        access_right: null
        acl_number: null
        community_mib_view: null
        community_name: null
        group_name: null
        notify_view: null
        read_view: null
        security_level: null
        state: null
        write_view: null

    - name: Generate random IP addresses
      set_fact:
        random_ip: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3', '10.1.1.4'] | random }}"

    - name: Configure SNMP community
      community.network.ce_snmp_community:
        access_right: "{{ access_right }}"
        acl_number: "{{ acl_number }}"
        community_mib_view: "{{ community_mib_view }}"
        community_name: "{{ community_name }}"
        group_name: "{{ group_name }}"
        notify_view: "{{ notify_view }}"
        read_view: "{{ read_view }}"
        security_level: "{{ security_level }}"
        state: "{{ state }}"
        write_view: "{{ write_view }}"
        target: "{{ random_ip }}"

    - name: Debug output
      debug:
        msg: "SNMP community configuration task executed successfully."