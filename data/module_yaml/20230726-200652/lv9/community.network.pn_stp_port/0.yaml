---
- name: Ansible Latent Bug Finder & Heuristic Test
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP addresses
      set_fact:
        pn_ip_address: "{{ (127, '10.1.1', 192, 172) | random }}.{{ (1..254) | random }}"
  
    - name: Configure network PN STP port
      community.network.pn_stp_port:
        pn_block: true
        pn_bpdu_guard: true
        pn_cliswitch: "{{ pn_ip_address }}"
        pn_cost: "100"
        pn_edge: true
        pn_filter: false
        pn_port: "{{ pn_ip_address }}"
        pn_priority: "128"
        pn_root_guard: false
        state: present