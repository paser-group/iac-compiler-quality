- name: Configure gslb vserver
  hosts: localhost
  gather_facts: false

  vars:
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "https"
    nitro_timeout: 10
    nsip: "192.168.1.1"
    state: "present"

  tasks:
    - name: Configure gslb vserver
      community.network.netscaler_gslb_vserver:
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        nsip: "{{ nsip }}"
        state: "{{ state }}"
        name: "gslb_vserver_test"
        servicetype: "HTTP"
        lbmethod: 123
        persistencetype: "SOURCEIP"
        persistmask: "255.255.255.0"
        save_config: "yes"
      register: result

    - name: Print Result
      debug:
        var: result