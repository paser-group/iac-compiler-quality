---
- name: Synchronize files using ansible.posix.synchronize module
  hosts: localhost
  gather_facts: false
  
  vars:
    network_subnet: "10.1.1.0/24"
    network_gateway: "10.1.1.254"
    docker_nodes:
      - name: ubuntu1
        ip: "10.1.1.1"
        distribution: "ubuntu"
      - name: alpine1
        ip: "10.1.1.2"
        distribution: "alpine"
      - name: centos1
        ip: "10.1.1.3"
        distribution: "centos"
      - name: redhat1
        ip: "10.1.1.4"
        distribution: "redhat"

  tasks:
    - name: Create temporary directory
      tempfile:
        state: directory
      register: temp_dir

    - name: Synchronize files from source to destination
      ansible.posix.synchronize:
        src: "/path/to/source"
        dest: "/path/to/destination"
        mode: "push"
        archive: true
        checksum: true
        compress: true
        copy_links: true
        delay_updates: true
        delete: true
        dirs: true
        existing_only: true
        group: true
        link_dest: []
        links: true
        owner: true
        partial: true
        perms: true
        private_key: "/path/to/private_key"
        recursive: true
        rsync_opts: []
        rsync_path: "/usr/bin/rsync"
        rsync_timeout: 30
        set_remote_user: true
        dest_port: 22
        src: "/path/to/src"
        ssh_connection_multiplexing: true
        times: true
        use_ssh_args: true
        verify_host: true