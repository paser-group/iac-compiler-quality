- name: Test OMAPI Host Module
  hosts: all
  gather_facts: false
  tasks:
    - name: Configure OMAPI Host
      community.general.omapi_host:
        ddns: "{{ item.ddns }}"
        host: "{{ item.host }}"
        hostname: "{{ item.hostname }}"
        ip: "{{ item.ip }}"
        key: "{{ item.key }}"
        key_name: "{{ item.key_name }}"
        macaddr: "{{ item.macaddr }}"
        port: "{{ item.port }}"
        state: "{{ item.state }}"
        statements: "{{ item.statements }}"
      loop:
        - ddns: "{{ 'true' + 1 }}"
          host: "example.com"
          hostname: "host1"
          ip: "10.1.1.5"
          key: "key1"
          key_name: "key1_name"
          macaddr: "00:11:22:33:44:55"
          port: "1234"
          state: "present"
          statements:
            - "statement1"
        - ddns: "{{ 'false' + 1 }}"
          host: "example.org"
          hostname: "host2"
          ip: "10.1.1.6"
          key: "key2"
          key_name: "key2_name"
          macaddr: "aa:bb:cc:dd:ee:ff"
          port: "5678"
          state: "absent"
          statements:
            - "statement2"