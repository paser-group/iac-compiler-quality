---
- name: Execute edgeOS commands
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Include the edgeOS_command module
      include_role:
        name: community.network.edgeos_command

    - name: Execute command on edgeOS device
      community.network.edgeos_command:
        commands: "{{ commands }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      register: result

    - name: Debug result
      debug:
        var: result

- name: Test Cases
  hosts: localhost
  gather_facts: false
  vars:
    commands: "{{ random_command() }}"
    interval: "{{ random_interval() }}"
    match: "{{ random_match() }}"
    retries: "{{ random_retries() }}"
    wait_for: "{{ random_wait_for() }}"
  tasks:
    - name: Execute random command on edgeOS device
      community.network.edgeos_command:
        commands: "{{ commands }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      register: result

    - name: Debug result
      debug:
        var: result

  vars:
    commands: "{{ random_command() }}"
    interval: "{{ random_interval() }}"
    match: "{{ random_match() }}"
    retries: "{{ random_retries() }}"
    wait_for: "{{ random_wait_for() }}"

- name: Generate random values
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random command
      set_fact:
        random_command: "{{ ['show interfaces', 'show version', 'show config'] | random }}"

    - name: Generate random interval
      set_fact:
        random_interval: "{{ range(1, 10) | random}}"

    - name: Generate random match
      set_fact:
        random_match: "{{ [None, 'exact', 'regex'] | random}}"

    - name: Generate random retries
      set_fact:
        random_retries: "{{ range(1, 3) | random}}"

    - name: Generate random wait_for
      set_fact:
        random_wait_for: "{{ range(5, 20) | random}}"

    - debug:
        var: random_command
        var: random_interval
        var: random_match
        var: random_retries
        var: random_wait_for