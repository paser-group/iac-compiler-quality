- name: Test Ansible module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set IPA variables
      set_fact:
        ipa_host: "10.1.1.1"
        ipa_user: "admin"
        ipa_pass: "admin123"
        ipa_port: 443
        ipa_prot: "https"
        ipa_timeout: 10

    - name: Test 'community.general.ipa_pwpolicy' module
      community.general.ipa_pwpolicy:
        failinterval: "5s"  # Incorrect type
        group: "{{ random_ip_address }}"  # Random IP address
        historylength: "90d"  # Incorrect type
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        lockouttime: "30m"  # Incorrect type
        maxfailcount: "3"  # Incorrect type
        maxpwdlife: "90d"  # Incorrect type
        minclasses: "2"  # Incorrect type
        minlength: "10"  # Incorrect type
        minpwdlife: "7d"  # Incorrect type
        priority: "100"  # Incorrect type
        state: "present"
        validate_certs: true

      vars:
        random_ip_address: "{{ hostvars['localhost']['ansible_eth0']['ipv4']['address'] }}"