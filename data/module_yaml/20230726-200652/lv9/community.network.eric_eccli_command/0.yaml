---
- name: Test playbook for community.network.eric_eccli_command module
  hosts: localhost
  gather_facts: false

  vars:
    commands:
      - show version
      - show interfaces
      - show routing
    interval: 10
    match: "System ID"
    retries: 3
    wait_for:
      - "System ID:.*"

  tasks:
    - name: Include inventory file
      include_vars:
        file: inventory.yml

    - name: Run commands on remote devices
      community.network.eric_eccli_command:
        provider:
          host: "{{ host }}"
          username: "{{ username }}"
          password: "{{ password }}"
        commands: "{{ commands }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      register: result

    - name: Debug result
      debug:
        var: result