---
- name: Test playbook for community.network.avi_stringgroup module
  hosts: localhost
  gather_facts: false

  vars:
    ansible_python_interpreter: /usr/bin/python3
    random_ips:
      - "{{ lookup('community.general.random_ipv4', network='10.1.1.0/24') }}"
      - "{{ lookup('community.general.random_ipv4', network='10.1.1.0/24') }}"
      - "{{ lookup('community.general.random_ipv4', network='10.1.1.0/24') }}"
      - "{{ lookup('community.general.random_ipv4', network='10.1.1.0/24') }}"

  tasks:
    - name: Create and configure avi_stringgroup
      community.network.avi_stringgroup:
        controller: "{{ random_ips[0] }}"
        username: "{{ random_ips[1] }}"
        password: "{{ random_ips[2] }}"
        tenant: "{{ random_ips[3] }}"
        state: present
      register: result

    - name: Debug result
      debug:
        var: result