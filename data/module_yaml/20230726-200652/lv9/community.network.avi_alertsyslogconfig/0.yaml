---
- name: Test playbook for 'community.network.avi_alertsyslogconfig' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Testcase - Random IP address
      community.network.avi_alertsyslogconfig:
        controller: "https://{{ hostvars['localhost']['ansible_hostname'] }}"
        username: "{{ avi_credentials.username }}"
        password: "{{ avi_credentials.password }}"
        tenant: "{{ tenant }}"
        syslog_servers:
          - name: "my-syslog-server"
            description: "Syslog server"
            ipaddress: "{{ random_ip_addr }}"
      vars:
        tenant: "Demo"
        avi_credentials:
          username: "admin"
          password: "aviadmin"
      register: result

    - name: Debug result
      debug:
        var: result

  vars:
    ansible_python_interpreter: '/usr/bin/python3'
    random_ip_addr: "{{ '%s.%s.%s.%s'|format(
      10 | random | int,
      1 | random | int,
      1 | random | int,
      1 | random | int
    ) }}"