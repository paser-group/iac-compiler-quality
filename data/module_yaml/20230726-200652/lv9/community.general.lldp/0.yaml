---
- name: Ansible Latent Bug Finder - community.general.lldp module
  hosts: all
  gather_facts: false

  tasks:
    - name: Install lldpd package
      package:
        name: lldpd
        state: present
      become: true

    - name: Gather LLDP information
      community.general.lldp:
        provider: auto
      register: lldp_output

    - name: Debug LLDP information
      debug:
        var: lldp_output

- name: Heuristic Test Case - Random IP address
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random IP address
      shell: echo "{{ (255,255,255,255)|random }}"

- name: Heuristic Test Case - Invalid IP address
  hosts: all
  gather_facts: false

  tasks:
    - name: Assign an invalid IP address
      community.general.lldp:
        provider: auto
        interface: eth0
        ip_address: "999.999.999.999"