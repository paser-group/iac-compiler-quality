---
- name: Test playbook for pn_access_list module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random IP addresses
      set_fact:
        random_ip1: "{{ hostvars['localhost']['network_ip'] }}"
        random_ip2: "{{ hostvars['localhost']['network_ip'] }}"
      vars:
        network_ip: "{{ (['10.1.1.1', '10.1.1.2', '10.1.1.3', '10.1.1.4'] | difference([random_ip1, random_ip2])) | random }}"
      run_once: true

    - name: Create pn_access_list
      community.network.pn_access_list:
        pn_cliswitch: "{{ random_ip1 }}"
        pn_name: "{{ random_ip2 }}"
        pn_scope: null
        state: null