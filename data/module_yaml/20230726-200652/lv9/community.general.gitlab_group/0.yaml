---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create/Update GitLab group with different attributes
      community.general.gitlab_group:
        api_url: "https://{{ ansible_default_ipv4.address }}"
        api_token: "{{ my_api_token }}"
        name: "my_group"
        path: "/my_group"
        description: "My test GitLab group"
        state: "present"
        visibility: "public"
        auto_devops_enabled: true
        avatar_path: "{{ my_avatar_path }}"
        parent: "parent_group"
        project_creation_level: "internal"
        require_two_factor_authentication: false
        subgroup_creation_level: "private"
        validate_certs: true
      register: result