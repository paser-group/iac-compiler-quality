---
- name: Set Stats and Test Heuristic
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set Stats for Hosts
      ansible.builtin.set_stats:
        data:
          host_stats:
            - host: ubuntu1
              ip_address: 10.1.1.1
              aggregate: yes
            - host: alpine1
              ip_address: 10.1.1.2
              aggregate: "yes"
            - host: centos1
              ip_address: 10.1.1.3
              aggregate: some_string
            - host: redhat1
              ip_address: 10.1.1.4
              aggregate: true
      register: result

    - name: Display Stats
      debug:
        var: result.data.host_stats