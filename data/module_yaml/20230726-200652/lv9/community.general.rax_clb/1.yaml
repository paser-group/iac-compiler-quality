---
- name: Generate inventory file with random IP addresses
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Randomly generate IP addresses for Docker nodes
      vars:
        subnet: "10.1.1.0/24"
        gateway: "10.1.1.254"
      set_fact:
        ubuntu1_ip: "{{ subnet.split('/')[0] | ipaddr('') | ipmath(1) }}"
        alpine1_ip: "{{ subnet.split('/')[0] | ipaddr('') | ipmath(2) }}"
        centos1_ip: "{{ subnet.split('/')[0] | ipaddr('') | ipmath(3) }}"
        redhat1_ip: "{{ subnet.split('/')[0] | ipaddr('') | ipmath(4) }}"
      register: result

    - name: Display IP addresses
      debug:
        var: result