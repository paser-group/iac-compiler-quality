- name: Manage L2 Interfaces on Extreme Switches
  hosts: switches
  gather_facts: false

  vars:
    interfaces:
      - name: Ethernet1
        state: present
        vlan: 100
      - name: Ethernet2
        state: absent

  tasks:
    - name: Configure L2 Interfaces
      community.network.exos_l2_interfaces:
        config: "{{ interfaces }}"
        state: "{{ item.state }}"
      loop: "{{ interfaces }}"