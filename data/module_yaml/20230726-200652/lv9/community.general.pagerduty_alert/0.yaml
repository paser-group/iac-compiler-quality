---
- name: Test playbook for 'community.general.pagerduty_alert' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP for recent networking module
      community.general.random_ip:
        state: present
        network: 10.1.1.0/24
      register: random_ip

    - name: Trigger PagerDuty alert
      community.general.pagerduty_alert:
        api_key: "{{ random_ip.network }}"
        integration_key: 12345
        service_key: "YOUR_SERVICE_KEY"
        desc: "Testing PagerDuty alert"
        name: "Test Alert"
        state: "triggered"
      register: result_trigger

    - name: Debug PagerDuty alert result
      debug:
        var: result_trigger