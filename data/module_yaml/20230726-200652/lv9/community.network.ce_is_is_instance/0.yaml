---
- name: Test playbook for community.network.ce_is_is_instance module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random IP address for instance_id
      set_fact:
        instance_id: "{{ 1 | random }}"

    - name: Set random state
      set_fact:
        state: "{{ ['present', 'absent'] | random }}"

    - name: Set random vpn_name
      set_fact:
        vpn_name: "{{ [ 'vpn1', 'vpn2', 'vpn3' ] | random }}"

    - name: Debug instance_id, state, vpn_name
      debug:
        var: item
      with_items:
        - "{{ instance_id }}"
        - "{{ state }}"
        - "{{ vpn_name }}"

    - name: Manage isis process id configuration
      community.network.ce_is_is_instance:
        provider: "{{ inventory_hostname }}"
        instance_id: "{{ instance_id }}"
        state: "{{ state }}"
        vpn_name: "{{ vpn_name }}"