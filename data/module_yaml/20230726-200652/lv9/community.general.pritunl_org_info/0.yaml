---
- name: Find latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP addresses
      set_fact:
        ip_address: "{{ query('community.general.random_ipv4') }}"
        
    - name: List Pritunl Organizations
      community.general.pritunl_org_info:
        organization: MyOrg
        pritunl_api_secret: secret
        pritunl_api_token: token
        pritunl_url: "{{ ip_address | random(seed=inventory_hostname) }}"
        validate_certs: false
      register: pritunl_orgs

    - name: Debug Pritunl Organizations
      debug:
        var: pritunl_orgs