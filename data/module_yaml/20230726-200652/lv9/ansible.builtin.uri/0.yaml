- name: Test playbook
  hosts: localhost
  tasks:
    - name: Generate random IP addresses
      ansible.builtin.command: /bin/bash -c "echo $((RANDOM%=256)).$((RANDOM%=256)).$((RANDOM%=256)).$((RANDOM%=256))"
      register: random_ip_addr
      changed_when: false

    - name: Set random IP addresses
      set_fact:
        ip_address: "{{ random_ip_addr.stdout }}"

    - name: Test uri module
      ansible.builtin.uri:
        url: "http://{{ ip_address }}"
        method: GET
        status_code: 200
      register: uri_result

    - name: Print uri result
      debug:
        var: uri_result