---
- name: Manage Layer-3 interfaces on Lenovo devices
  hosts: lenovo_devices
  gather_facts: False

  tasks:
    - name: Configure Layer-3 interface
      community.network.cnos_l3_interface:
        aggregate: "{{ item.aggregate | default(None) }}"
        ipv4: "{{ item.ipv4 | default(None) }}"
        ipv6: "{{ item.ipv6 | default(None) }}"
        name: "{{ item.name | default(None) }}"
        state: "{{ item.state | default(present) }}"
      loop:
        - aggregate: None
          ipv4: 10.1.1.1/24
          ipv6: 2001:db8::1/64
          name: eth1
          state: present
        - aggregate: None
          ipv4: 10.1.1.2/24
          ipv6: 2001:db8::2/64
          name: eth2
          state: present
        - aggregate: None
          ipv4: 10.1.1.3/24
          ipv6: 2001:db8::3/64
          name: eth3
          state: present
        - aggregate: None
          ipv4: 10.1.1.4/24
          ipv6: 2001:db8::4/64
          name: eth4
          state: present