---
- name: Retrieve Memstore prod information
  hosts: localhost
  gather_facts: false
  become: false

  vars:
    api_key: "your_api_key"
    name: "your_memstore_name"

  tasks:
    - name: Formulate random IP addresses for networking
      set_fact:
        random_ip_address: "{{ (149 + (loop.index - 1)) }}.{{ (168 + (loop.index - 1)) }}.{{ (23 + (loop.index - 1)) }}.{{ (10 + (loop.index - 1)) }}"
      loop: "{{ query('sequence', start=1, end=4) }}"
      register: random_ip_addresses

    - name: Get Memstore prod information
      community.general.memset_memstore_info:
        api_key: "{{ api_key }}"
        name: "{{ name }}"
      register: memstore_info

    - name: Print Memstore prod information
      debug:
        var: memstore_info

    - name: Print random IP addresses
      debug:
        var: random_ip_addresses