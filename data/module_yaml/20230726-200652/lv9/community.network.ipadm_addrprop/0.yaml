---
- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required Ansible collections
      command: ansible-galaxy collection install community.network

    - name: Set IP address property
      community.network.ipadm_addrprop:
        addrobj: "{{ item.addrobj }}"
        property: "{{ item.property }}"
        state: "{{ item.state }}"
        temporary: "{{ item.temporary | default(False) }}"
        value: "{{ item.value }}"
      loop:
        - { addrobj: None, property: None, state: None, temporary: true, value: None }
        - { addrobj: "10.1.1.1/24", property: "deprecated", state: "present", temporary: false, value: None }
        - { addrobj: "10.1.1.2/24", property: "ipforwarding", state: "present", temporary: true, value: None }
        - { addrobj: "10.1.1.3/24", property: "deprecated", state: "absent", temporary: true, value: None }
        - { addrobj: "10.1.1.4/24", property: "iptype", state: "present", temporary: false, value: None }