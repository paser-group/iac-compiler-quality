---
- name: Test ansible-latent-bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set IP interface properties
      community.network.ipadm_ifprop:
        interface: "{{ item.interface }}"
        property: "{{ item.property }}"
        protocol: "{{ item.protocol }}"
        state: "{{ item.state }}"
        temporary: "{{ item.temporary }}"
        value: "{{ item.value }}"
      loop:
        - interface: "{{ ansible_default_ipv4.interface }}"
          property: "mtu"
          value: 1400
          state: present
          temporary: yes
        - interface: "{{ ansible_default_ipv4.interface }}"
          property: "ipv4"
          protocol: "down"
          value: "10.0.0.1/24"
          state: present
          temporary: no