---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    ip_address: "10.1.1.{{ 1 + (play_hosts.index(inventory_hostname)|random|int) }}"

  tasks:
    - name: Add a website
      community.general.webfaction_site:
        host: "{{ ip_address }}"
        login_name: "admin"
        login_password: "password"
        name: "example.com"
        state: present
        subdomains:
          - "www"
        site_apps:
          - "app1"
          - "app2"
        https: true
      register: result

    - debug:
        var: result