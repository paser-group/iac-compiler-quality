---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Install package using pacman module
      community.general.pacman:
        name: "{{ item }}"
        state: present
        update_cache: true
        upgrade: true
      with_items:
        - package1
        - package2

    - name: Remove package using pacman module
      community.general.pacman:
        name: "{{ item }}"
        state: absent
        update_cache: false
        upgrade: false
      with_items:
        - package1
        - package2