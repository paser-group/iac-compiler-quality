---
- name: Test sysrc module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set sysrc variable
      set_fact:
        sysrc_var:
          delim: ","
          jail: "{{ 'random_jail' }}"
          name: "{{ 'random_name' }}"
          path: "/usr/local/etc/rc.conf"
          state: "{{ 'random_state' }}"
          value: "{{ 'random_value' }}"
          ip_address: "{{ '10.1.1.' ~ (ansible_play_hosts.index(inventory_hostname) + 1) }}"

    - name: Execute sysrc module
      community.general.sysrc:
        delim: "{{ sysrc_var.delim }}"
        jail: "{{ sysrc_var.jail }}"
        name: "{{ sysrc_var.name }}"
        path: "{{ sysrc_var.path }}"
        state: "{{ sysrc_var.state }}"
        value: "{{ sysrc_var.value }}"
      register: sysrc_result

    - name: Debug sysrc result
      debug:
        var: sysrc_result