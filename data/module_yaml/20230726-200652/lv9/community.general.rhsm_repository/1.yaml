---
- hosts: localhost
  gather_facts: false
  vars:
    network_subnet: '10.1.1.0/24'
    network_gateway: '10.1.1.254'
    node_ips:
      - '10.1.1.1'
      - '10.1.1.2'
      - '10.1.1.3'
      - '10.1.1.4'
    random_ip: "{{ network_subnet.split('/')[0] + '/32' }}"
  tasks:
    - name: Configure RHSM repository
      community.general.rhsm_repository:
        name:
          - 'repo1'
          - 'repo2'
        purge: true
        state: present