- name: Install FTD pkg
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Generate random IP addresses
      set_fact:
        console_ip: "{{ '10.1.1.0/24' | ipaddr(rng='network') | ipaddr(rng='host') }}"
        device_gateway: "{{ console_ip.split('/')[0] | ipaddr(rng='network') | ipaddr(rng='host') }}"
        device_ip: "{{ console_ip.split('/')[0] | ipaddr(rng='network') | ipaddr(rng='host') }}"

    - name: Install FTD pkg
      community.network.ftd_install:
        console_ip: "{{ console_ip }}"
        console_password: "password"
        console_port: "22"
        console_username: "admin"
        device_gateway: "{{ device_gateway }}"
        device_hostname: "ftd1"
        device_ip: "{{ device_ip }}"
        device_model: "firepower2110"
        device_netmask: "255.255.255.0"
        device_new_password: "new_password"
        device_password: "password"
        device_sudo_password: "password"
        device_username: "admin"
        dns_server: "8.8.8.8"
        force_install: False
        image_file_location: "/path/to/image/file"
        image_version: "6.6.1"
        rommon_file_location: "/path/to/rommon/file"
        search_domains: "example.com"

      register: ftd_install_result

    - name: Print FTD install result
      debug:
        var: ftd_install_result