- name: Test Case 2 - Random IP address for key
  hosts: nodes
  gather_facts: false
  tasks:
    - name: Set random IP address for key
      set_fact:
        key: "{{ groups['nodes'] | random | extract('ip') }}"
      run_once: true

    - include_tasks: playbook.yml

- name: Test Case 3 - Random IP address for state
  hosts: nodes
  gather_facts: false
  tasks:
    - name: Set random IP address for state
      set_fact:
        state: "{{ groups['nodes'] | random | extract('ip') }}"
      run_once: true

    - include_tasks: playbook.yml

- name: Test Case 4 - Random IP address for validate_certs
  hosts: nodes
  gather_facts: false
  tasks:
    - name: Set random IP address for validate_certs
      set_fact:
        validate_certs: "{{ groups['nodes'] | random | extract('ip') }}"
      run_once: true

    - include_tasks: playbook.yml