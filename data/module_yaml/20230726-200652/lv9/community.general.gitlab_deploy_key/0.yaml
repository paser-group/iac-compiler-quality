---
- name: Test playbook for community.general.gitlab_deploy_key module
  hosts: localhost
  gather_facts: false

  vars:
    api_job_token: "{{ ansible_password }}"
    api_oauth_token: "{{ ansible_password }}"
    api_password: "{{ ansible_password }}"
    api_token: "{{ ansible_password }}"
    api_url: "https://gitlab.example.com/api/v4"
    api_username: "my_username"
    can_push: true
    key: "{{ lookup('file', 'path/to/my_key.pub') }}"
    project: "my_project"
    state: "present"
    title: "my_deploy_key"
    validate_certs: false

  tasks:
    - name: Include required roles
      include_role:
        name: community.general.gitlab_deploy_key

    - name: Test the module with different data types
      community.general.gitlab_deploy_key:
        api_job_token: "{{ api_job_token }}"
        api_oauth_token: "{{ api_oauth_token }}"
        api_password: "{{ api_password }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        can_push: "{{ can_push }}"
        key: "{{ key }}"
        project: "{{ project }}"
        state: "{{ state }}"
        title: "{{ title }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    # Continue with additional tasks and validations as needed