---
- name: Test playbook for community.general.rax_cbs module
  hosts: localhost
  gather_facts: false
  
  vars:
    api_key: "your_rackspace_api_key"
    credentials: "/path/to/credentials/file"
    meta:
      key1: "value1"
      key2: "value2"
    wait_timeout: 60
  
  tasks:
    - name: Install required dependencies
      pip:
        name: pyrax
        state: present
  
    - name: Manipulate Rackspace Cloud Block Storage
      community.general.rax_cbs:
        api_key: "{{ api_key }}"
        credentials: "{{ credentials }}"
        description: "Test CBS Volume"
        name: "test_volume"
        size: 100
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
      register: result
      ignore_errors: true
  
    - name: Display result
      debug:
        var: result
  
    - name: Remove the created CBS Volume
      community.general.rax_cbs:
        api_key: "{{ api_key }}"
        credentials: "{{ credentials }}"
        state: absent
        name: "test_volume"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
  
    - name: Display result
      debug:
        var: result