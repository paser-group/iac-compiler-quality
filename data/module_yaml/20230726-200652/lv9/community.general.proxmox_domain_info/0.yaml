---
- name: Test playbook for community.general.proxmox_domain_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Retrieve information about Proxmox domains
      community.general.proxmox_domain_info:
        api_host: "{{ hostvars[item]['api_host'] }}"
        api_user: "{{ hostvars[item]['api_user'] }}"
        api_password: "{{ hostvars[item]['api_password'] }}"
        api_token_id: "{{ hostvars[item]['api_token_id'] }}"
        api_token_secret: "{{ hostvars[item]['api_token_secret'] }}"
        domain: 12345  # Intentionally providing an integer instead of a string
        validate_certs: "{{ hostvars[item]['validate_certs'] }}"
      loop: "{{ groups['proxmox_nodes'] }}"
      failed_when: false

  - name: Print domain information
    debug:
      var: domain_info_output