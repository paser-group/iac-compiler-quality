---
- name: Test dladm_linkprop module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set link properties
      community.network.dladm_linkprop:
        link: "{{ item.link }}"
        property: "{{ item.property }}"
        state: present
        value: "{{ item.value }}"
        temporary: "{{ item.temporary }}"
      loop:
        - { link: "net1", property: "prop1", value: 123, temporary: true }
        - { link: "net2", property: "prop2", value: 456, temporary: false }
        - { link: "net3", property: "prop3", value: "abc", temporary: true }

    - name: Debug link properties
      debug:
        msg: "Link properties for {{ item.link }}: {{ item.property }}={{ item.value }}, temporary={{ item.temporary }}"
      loop:
        - { link: "net1", property: "prop1" }
        - { link: "net2", property: "prop2" }
        - { link: "net3", property: "prop3" }