- name: Generate random IP addresses
  hosts: localhost
  gather_facts: false
  vars:
    number_of_ips: 5

  tasks:
    - name: Set random IP addresses
      set_fact:
        ips: "{{ ips | default([]) + [item | rand_ip] }}"
      loop: "{{ range(number_of_ips) | list }}"

- name: Debug generated IP addresses
  hosts: localhost
  gather_facts: false
    
  tasks:
    - name: Debug IPs
      debug:
        var: ips