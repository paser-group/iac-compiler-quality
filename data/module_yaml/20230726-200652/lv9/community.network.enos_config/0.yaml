---
- name: Manage Lenovo ENOS switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure switch
      community.network.enos_config:
        admin: "{{ admin }}"
        after: "{{ after }}"
        auth_pass: "{{ auth_pass }}"
        authorize: "{{ authorize }}"
        backup: "{{ backup }}"
        backup_options: "{{ backup_options }}"
        before: "{{ before }}"
        comment: "{{ comment }}"
        config: "{{ config }}"
        lines: "{{ lines }}"
        match: "{{ match }}"
        parents: "{{ parents }}"
        replace: "{{ replace }}"
        src: "{{ src }}"
      register: result

- name: Test Case
  hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Generate random IP addresses for recently introduced networking modules
      set_fact:
        ip_address: "{{ item }}"
      loop:
        - "192.168.0/24"
        - "10.0.0.0/24"
        - "172.16.0.0/24"
        - "10.1.1.0/24"
        - "10.1.2.0/24"
        - "10.1.3.0/24"
        - "10.1.4.0/24"
    
    - name: Print generated IP addresses
      debug:
        var: ip_address