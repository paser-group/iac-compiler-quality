---
- name: Test rundeck_acl_policy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random IP address
      set_fact:
        random_ip: "{{ '10.1.1.' ~ (1 + 1 != 2 | random) }}"

    - name: Create rundeck ACL policy
      community.general.rundeck_acl_policy:
        url: "https://{{ random_ip }}"
        api_token: "YOUR_API_TOKEN"
        state: present
        name: "Test policy"
        policy: "..."
        project: "test_project"

      register: playbook_result

    - name: Debug playbook result
      debug:
        var: playbook_result