---
- name: Test community.network.pn_snmp_trap_sink module
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: "{{ hostvars[inventory_hostname]['pn_cliswitch'] | default('') }}"
    pn_community: "{{ hostvars[inventory_hostname]['pn_community'] | default('public') }}"
    pn_dest_host: "{{ hostvars[inventory_hostname]['pn_dest_host'] | default('') }}"
    pn_dest_port: "{{ hostvars[inventory_hostname]['pn_dest_port'] | default('161') }}"
    pn_type: "{{ hostvars[inventory_hostname]['pn_type'] | default('v2') }}"
    state: "{{ hostvars[inventory_hostname]['state'] | default('present') }}"
  
  tasks:
    - community.network.pn_snmp_trap_sink:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_community: "{{ pn_community }}"
        pn_dest_host: "{{ pn_dest_host }}"
        pn_dest_port: "{{ pn_dest_port }}"
        pn_type: "{{ pn_type }}"
        state: "{{ state }}"
      register: result
      
    - debug:
        var: result