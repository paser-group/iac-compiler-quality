---
- name: Ansible Latent Type-Related Bug Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random IP addresses for recently introduced networking modules
      set_fact:
        random_ip: "{{ hostvars[item].ansible_default_ipv4.address }}"
      with_items:
        - ubuntu1
        - alpine1
        - centos1
        - redhat1

    - name: Gather online user info
      community.general.online_user_info:
        api_timeout: "10"  # Type mismatch, expecting an integer
        api_token: 12345  # Type mismatch, expecting a string
        api_url: "YOUR_API_URL"
        validate_certs: "false"  # Type mismatch, expecting a boolean
        ip_address: "{{ random_ip }}"
      register: user_info

    - name: Debug online user info
      debug:
        var: user_info

  vars:
    hostvars:
      ubuntu1:
        ansible_default_ipv4:
          address: "10.1.1.1"
      alpine1:
        ansible_default_ipv4:
          address: "10.1.1.2"
      centos1:
        ansible_default_ipv4:
          address: "10.1.1.3"
      redhat1:
        ansible_default_ipv4:
          address: "10.1.1.4"