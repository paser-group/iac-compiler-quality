---
- name: Test playbook for community.general.github_key module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random IP address
      set_fact:
        random_ip: "{{ 10 + hostvars['localhost']['ansible_play_hosts_all'].index(inventory_hostname) }}.1.1.{{ 10 + hostvars['localhost']['ansible_play_hosts_all'].index(inventory_hostname) }}"

    - name: Create GitHub key
      community.general.github_key:
        name: "test_key"
        state: "present"
        token: "YOUR_GITHUB_TOKEN"
        pubkey: "{{ lookup('file', '/path/to/public/key.pub') }}"
        force: True