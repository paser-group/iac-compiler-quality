---
- name: Test playbook for community.general.consul_session module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create session
      community.general.consul_session:
        behavior: str1  # Triggering latent type-related bug
        checks:
          - name: check1
            node: node1
            script: script1
        datacenter: dc1
        delay: 10
        host: localhost
        id: session1
        node: node1
        port: 8500
        scheme: http
        state: present
        token: abcdef
        ttl: 30
        validate_certs: false
      register: session_creation

    - debug:
        var: session_creation