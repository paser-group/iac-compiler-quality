- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    service_name: "my_service"

  tasks:
    - name: Generate random service directory IP address
      set_fact:
        service_dir_ip: "{{ '10.' + (1..255) | random | string + '.' + (1..255) | random | string }}"
        
    - name: Generate random service source IP address
      set_fact:
        service_src_ip: "{{ '10.' + (1..255) | random | string + '.' + (1..255) | random | string }}"

    - name: Install runit service with random IP addresses
      community.general.runit:
        name: "{{ service_name }}"
        service_dir: "/etc/{{ service_dir_ip }}/my_service"
        service_src: "/path/to/{{ service_src_ip }}/my_service"
        state: "started"