- name: Configure block devices using parted module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Partition a block device
      community.general.parted:
        device: "/dev/sdb"
        name: "sdb1"
        fs_type: "ext4"
        part_start: "1MiB"
        part_end: "100%"
        unit: "%"
        state: present