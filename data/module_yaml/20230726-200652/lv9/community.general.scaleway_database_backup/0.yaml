---
- name: Test Scaleway Database Backup Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random IP address for recently introduced networking modules
      set_fact:
        random_ip_address: "{{ (256|random + 1)|string + '.' + (256|random + 1)|string + '.' + (256|random + 1)|string + '.' + (256|random + 1)|string }}"
    
    - name: Test Scaleway Database Backup
      community.general.scaleway_database_backup:
        api_timeout: 10
        api_token: "your_api_token"
        api_url: "your_api_url"
        database_name: "test_db"
        expires_at: "2022-12-31T23:59:59Z"
        id: "test_backup"
        instance_id: "test_instance"
        name: "Test Backup"
        query_parameters:
          option1: "value1"
          option2: "value2"
        region: "eu-west-1"
        state: "present"
        validate_certs: true
        wait: true
        wait_sleep_time: 5
        wait_timeout: 60
      register: result

    - name: Debug result
      debug:
        var: result