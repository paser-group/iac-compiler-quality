- name: Test playbook for Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include networking tasks
      ansible.builtin.include_tasks: "{{ task_file }}"
      vars:
        subnet: "10.1.1.0/24"
        gateway: "10.1.1.254"
        nodes:
          - name: ubuntu1
            ip: "10.1.1.1"
            distribution: "ubuntu"
          - name: alpine1
            ip: "10.1.1.2"
            distribution: "alpine"
          - name: centos1
            ip: "10.1.1.3"
            distribution: "centos"
          - name: redhat1
            ip: "10.1.1.4"
            distribution: "redhat"

- name: Networking Tasks
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Setup networking on each node
      ansible.builtin.debug:
        var: node