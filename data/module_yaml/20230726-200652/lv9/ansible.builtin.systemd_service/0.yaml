- name: Test playbook for systemd_service module
  hosts: all

  tasks:
    - name: Start or restart the service
      ansible.builtin.systemd_service:
        name: myservice
        state: started
        daemon_reexec: "{{ random_reexec | default(false) }}"
        daemon_reload: "{{ random_reload| default(false) }}"
        enabled: "{{ random_enabled | default(true) }}"
        force: "{{ random_force | default(false) }}"
        masked: "{{ random_masked | default(false) }}"
        no_block: "{{ random_no_block | default(false) }}"
        scope: "{{ random_scope | default('default') }}"

      vars:
        random_reexec: "{{ [true, false] | random }}"
        random_reload: "{{ [true, false] | random }}"
        random_enabled: "{{ [true, false] | random }}"
        random_force: "{{ [true, false] | random }}"
        random_masked: "{{ [true, false] | random }}"
        random_no_block: "{{ [true, false] | random }}"
        random_scope: "{{ ['default', 'user'] | random }}"