---
- name: Rollback Configuration on Remote Network Devices
  hosts: localhost
  gather_facts: false

  vars:
    devices:
      - name: device1
        host: 10.1.1.1
        username: admin
        password: password1

      - name: device2
        host: 10.1.1.2
        username: admin
        password: password2

      - name: device3
        host: 10.1.1.3
        username: admin
        password: password3

  tasks:
    - name: Rollback Configuration
      community.network.cnos_rollback:
        host: "{{ item.host }}"
        username: "{{ item.username }}"
        password: "{{ item.password }}"
      loop: "{{ devices }}"
      register: rollback_output

    - name: Display Rollback Output
      debug:
        var: rollback_output