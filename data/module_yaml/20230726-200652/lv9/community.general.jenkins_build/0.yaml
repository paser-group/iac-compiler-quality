- name: Trigger latent type-related bug in Ansible module
  hosts: localhost
  gather_facts: false

  vars:
    build_number: 123
    name: MyBuild
    password: mypassword
    state: present
    token: mytoken
    url: http://example.com/jenkins
    user: admin

  tasks:
    - name: Formulate random IP addresses
      set_fact:
        node_ips: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3', '10.1.1.4'] }}"

    - name: Trigger latent type-related bug
      community.general.jenkins_build:
        args: "{{ [{'ip': item, 'subnet': '10.1.1.0/24', 'gateway': '10.1.1.254'}] }}"
        build_number: "{{ build_number }}"
        name: "{{ name }}"
        password: "{{ password }}"
        state: "{{ state }}"
        token: "{{ token }}"
        url: "{{ url }}"
        user: "{{ user }}"
      loop: "{{ node_ips }}"