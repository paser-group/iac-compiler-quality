- name: Test certificate management profile module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Certificate Management Profile
      community.network.avi_certificatemanagementprofile:
        controller: 10.{{ ansible_fqdn.split('.')[3] }}.{{ ansible_fqdn.split('.')[2] }}.{{ ansible_fqdn.split('.')[1] }}
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: []
        state: []
        tenant_ref: []
        api_context:
          cert_plan: {}
        avi_credentials:
          private_key: []
          ca_certs: []
      register: result

    - name: Debug Certificate Management Profile result
      debug:
        var: result