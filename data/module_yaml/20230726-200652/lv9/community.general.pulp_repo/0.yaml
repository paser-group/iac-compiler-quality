---
- name: Test Pulp Repo Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Pulp Repo
      community.general.pulp_repo:
        name: test-repo
        state: present
        url: "{{ item }}"
        validate_certs: false
        repoview: "{{ random_var }}"
      loop:
        - http://10.1.1.1:8080
        - http://10.1.1.2:8080
        - http://10.1.1.3:8080
        - http://10.1.1.4:8080

    - name: Remove Pulp Repo
      community.general.pulp_repo:
        name: test-repo
        state: absent
        url: "{{ item }}"
        validate_certs: false
        repoview: "{{ random_var }}"
      loop:
        - http://10.1.1.1:8080
        - http://10.1.1.2:8080
        - http://10.1.1.3:8080
        - http://10.1.1.4:8080