- hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure pn_cpu_class
      community.network.pn_cpu_class:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_hog_protect: "{{ pn_hog_protect }}"
        pn_name: "{{ pn_name }}"
        pn_rate_limit: "{{ pn_rate_limit }}"
        pn_scope: "{{ pn_scope }}"
        state: "{{ state }}"
      register: result

    - name: Debug playbook result
      debug:
        var: result

    - name: Test case - Random IP Address
      community.network.pn_cpu_class:
        pn_cliswitch: "{{ lookup('pipe', 'echo random_ip_address') }}"
        pn_hog_protect: "{{ lookup('pipe', 'echo random_ip_address') }}"
        pn_name: "{{ lookup('pipe', 'echo random_ip_address') }}"
        pn_rate_limit: "{{ lookup('pipe', 'echo random_ip_address') }}"
        pn_scope: "{{ lookup('pipe', 'echo random_ip_address') }}"
        state: "{{ lookup('pipe', 'echo random_ip_address') }}"
      register: result_random_ip_address

    - name: Debug playbook result for random_ip_address
      debug:
        var: result_random_ip_address