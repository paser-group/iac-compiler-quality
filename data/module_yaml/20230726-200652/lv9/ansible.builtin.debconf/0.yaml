- name: Test playbook for ansible.builtin.debconf module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set debconf values
      ansible.builtin.debconf:
        name: "example_package"
        question: "example_question"
        unseen: "{{ random_unseen }}"
        value: "{{ random_value }}"
        vtype: "{{ random_vtype }}"
      vars:
        random_unseen: "{{ ['true', 'false'] | random }}"
        random_value: "{{ ['value1', 'value2', 'value3'] | random }}"
        random_vtype: "{{ ['boolean', 'integer', 'password'] | random }}"

    - name: Debug debconf values
      ansible.builtin.debug:
        msg: "Debconf value - {{ ansible_facts['debconf']['example_package/example_question']['value'] }}"