- name: Manage packages using yum module with random IP addresses
  hosts: localhost
  vars:
    ubuntu1_ip: "10.1.1.1"
    alpine1_ip: "10.1.1.2"
    centos1_ip: "10.1.1.3"
    redhat1_ip: "10.1.1.4"
  tasks:
    - name: Install packages on Ubuntu
      yum:
        name:
          - package1
          - package2
        state: present
      when: inventory_hostname == 'ubuntu1'
      register: install_packages_ubuntu

    - name: Validate installed packages on Ubuntu
      debug:
        var: install_packages_ubuntu
      when: inventory_hostname == 'ubuntu1'

    - name: Update packages on Alpine
      yum:
        name:
          - package1
          - package2
        state: latest
      when: inventory_hostname == 'alpine1'
      register: update_packages_alpine

    - name: Validate updated packages on Alpine
      debug:
        var: update_packages_alpine
      when: inventory_hostname == 'alpine1'

    - name: Remove packages on CentOS
      yum:
        name:
          - package1
          - package2
        state: absent
      when: inventory_hostname == 'centos1'
      register: remove_packages_centos

    - name: Validate removed packages on CentOS
      debug:
        var: remove_packages_centos
      when: inventory_hostname == 'centos1'

    - name: Update packages on Red Hat
      yum:
        name:
          - package1
          - package2
        state: latest
      when: inventory_hostname == 'redhat1'
      register: update_packages_redhat

    - name: Validate updated packages on Red Hat
      debug:
        var: update_packages_redhat
      when: inventory_hostname == 'redhat1'