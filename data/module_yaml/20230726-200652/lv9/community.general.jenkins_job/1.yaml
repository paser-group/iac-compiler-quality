- name: Test Jenkins Job Module
  hosts: localhost
  gather_facts: false
  
  vars:
    random_ip: "192.168.1.1" # Random IP address
  
  tasks:
  
    - name: Create Jenkins Job
      community.general.jenkins_job:
        config: |
          <project>
            <builders>
              <hudson.tasks.Shell>
                <command>echo "Hello, Jenkins!"</command>
              </hudson.tasks.Shell>
            </builders>
          </project>
        enabled: true
        name: "Test Job"
        password: "my_password"
        state: present
        token: "1234567890"
        url: "{{ random_ip }}" # Using random_ip variable for URL
        user: "admin"
        validate_certs: true
      register: result

    - name: Debug Result
      debug:
        var: result