---
- name: Debug playbook for blockinfile module
  hosts: localhost
  gather_facts: false
  vars:
    node_info:
      - name: ubuntu1
        ip: 10.1.1.1
        distribution: ubuntu
      - name: alpine1
        ip: 10.1.1.2
        distribution: alpine
      - name: centos1
        ip: 10.1.1.3
        distribution: centos
      - name: redhat1
        ip: 10.1.1.4
        distribution: redhat
  tasks:
    - name: Insert/update/remove text block
      ansible.builtin.blockinfile:
        path: /path/to/file.txt
        block: |
          This is a sample text block.
          Distribution: {{ item.distribution }}
          IP Address: {{ item.ip }}
        state: "{{ state_var }}"
      loop: "{{ node_info }}"