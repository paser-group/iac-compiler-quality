- name: Run arbitrary command on Huawei network devices
  hosts: network_devices
  gather_facts: false

  tasks:
    - name: Generate random IP address
      vars:
        random_ip: "{{ 10 | random ~ '.' ~ 1 | random ~ '.' ~ 1 | random ~ '.' ~ range(1, 255) | random }}"
      debug:
        var: random_ip

    - name: Run command on network devices
      community.network.ce_command:
        commands:
          - "{{ random_ip }}"
        interval: "{{ none }}"
        match: "{{ none }}"
        retries: "{{ none }}"
        wait_for: "{{ none }}"