---
- name: Test playbook for community.general.ipmi_power module
  hosts: all
  gather_facts: false

  tasks:
    - name: Power on machines using IPMI
      community.general.ipmi_power:
        key: "{{ key }}"
        machine:
          - name: "{{ inventory_hostname }}"
            node: "{{ inventory_hostname }}"
            password: "{{ password }}"
            port: "{{ port }}"
            state: "{{ state }}"
            timeout: "{{ timeout }}"
            user: "{{ user }}"
      ignore_errors: true
      register: result

    - name: Display module output
      debug:
        var: result