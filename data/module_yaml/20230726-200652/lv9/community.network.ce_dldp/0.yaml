---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set Variables
      hosts: localhost
      gather_facts: false
      vars:
        dldp_config:
          auth_mode: None
          auth_pwd: None
          enable: None
          reset: None
          time_interval: None
          work_mode: None
          unknown_attribute: null

    - name: Manage DLDP Configuration
      hosts: network
      gather_facts: false
      vars:
        ansible_network_os_dl_uri: "{{ dldp_config.unknown_attribute }}"

      tasks:
        - name: Include DLDP Role
          include_role:
            name: community.network.ce_dldp

          vars:
            ansible_network_os_dl_uri: "{{ ansible_network_os_dl_uri }}"