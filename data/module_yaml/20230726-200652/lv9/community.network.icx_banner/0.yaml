---
- name: Manage multiline banners on Ruckus ICX switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Set banner on switches
      community.network.icx_banner:
        banner: "login"
        check_running_config: true
        enterkey: false
        state: present
        text: "Welcome to {{ inventory_hostname }}"

      register: banner_result

    - name: Display banner result
      debug:
        var: banner_result