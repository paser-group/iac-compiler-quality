- name: Ansible Playbook for Testing 'community.network.slxos_linkagg' Module
  hosts: localhost
  connection: local
  
  vars:
    aggregate: null
    group: null
    members: null
    mode: null
    purge: false
    state: null
  
  tasks:
    - name: Set random IP addresses
      set_fact:
        ip_address1: "{{ hostvars['ubuntu1']['ansible_default_ipv4']['address'] }}"
        ip_address2: "{{ hostvars['alpine1']['ansible_default_ipv4']['address'] }}"
        ip_address3: "{{ hostvars['centos1']['ansible_default_ipv4']['address'] }}"
        ip_address4: "{{ hostvars['redhat1']['ansible_default_ipv4']['address'] }}"
  
    - name: Create link aggregation group
      community.network.slxos_linkagg:
        aggregate: "{{ aggregate }}"
        group: "{{ group }}"
        members: "{{ members }}"
        mode: "{{ mode }}"
        purge: "{{ purge }}"
        state: "{{ state }}"
      register: result
      delegate_to: localhost
  
    - name: Debug module output
      debug:
        var: result
  
    - name: Remove link aggregation group
      community.network.slxos_linkagg:
        group: "{{ group }}"
        state: absent
      register: result2
      delegate_to: localhost
  
    - name: Debug module output
      debug:
        var: result2