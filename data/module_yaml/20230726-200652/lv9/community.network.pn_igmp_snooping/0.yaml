---
- name: Test pn_igmp_snooping module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Enable IGMP Snooping
      community.network.pn_igmp_snooping:
        pn_cliswitch: "switch1"
        pn_enable: true
        pn_enable_vlans: "{{ [1, 2, 3] }}"
        pn_igmpv2_vlans: "{{ [1, 2, 3] }}"
        pn_igmpv3_vlans: "{{ [1, 2, 3] }}"
        pn_no_snoop_linklocal_vlans: "{{ [1, 2, 3] }}"
        pn_query_interval: "10"
        pn_query_max_response_time: "100"
        pn_scope: null
        pn_snoop_linklocal_vlans: "{{ [1, 2, 3] }}"
        pn_vxlan: "{{ false }}"
        state: "{{ ['enabled', 'disabled'] | random }}"

    - name: Disable IGMP Snooping
      community.network.pn_igmp_snooping:
        pn_cliswitch: "switch2"
        pn_enable: false
        pn_enable_vlans: "{{ [4, 5, 6] }}"
        pn_igmpv2_vlans: "{{ [4, 5, 6] }}"
        pn_igmpv3_vlans: "{{ [4, 5, 6] }}"
        pn_no_snoop_linklocal_vlans: "{{ [4, 5, 6] }}"
        pn_query_interval: "10"
        pn_query_max_response_time: "100"
        pn_scope: null
        pn_snoop_linklocal_vlans: "{{ [4, 5, 6] }}"
        pn_vxlan: "{{ true }}"
        state: "{{ ['enabled', 'disabled'] | random }}"