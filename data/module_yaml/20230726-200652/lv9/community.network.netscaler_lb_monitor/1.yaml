- hosts: localhost
  gather_facts: false
  vars:
    nitro_user: admin
    nitro_pass: password
    nitro_protocol: http
    nitro_timeout: 300
    nsip: 10.1.1.1

    monitor_names:
      - my_monitor
      - test_monitor
      - another_monitor

  tasks:
    - name: Create Netscaler LB Monitor
      community.network.netscaler_lb_monitor:
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        nsip: "{{ nsip }}"
        state: present
        monitorname: "{{ item }}"
        type: HTTP
        destip: "{{ hostvars['localhost'].inventory_hostname }}"
        destport: "{{ hostvars['localhost'].ansible_default_ipv4['port'] }}"
        interval: "{{ loop.index * 10 }}"
      loop: "{{ monitor_names }}"