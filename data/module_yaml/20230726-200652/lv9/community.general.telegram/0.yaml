---
- name: Send Notification via Telegram
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random IP address
      set_fact:
        random_ip: "{{ 10 | random ~ '.' ~ 1 | random ~ '.' ~ 1 | random ~ '.' ~ 1 | random }}"

    - name: Send Telegram Notification
      community.general.telegram:
        token: "YOUR_TELEGRAM_TOKEN"
        api_method: "sendMessage"
        api_args:
          chat_id: "YOUR_CHAT_ID"
          text: "Hello from Ansible! The random IP address is {{ random_ip }}"
      register: telegram_result

    - name: Debug Telegram Notification Result
      debug:
        var: telegram_result