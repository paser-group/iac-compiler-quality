---
- name: Test playbook for ansible.builtin.sysvinit module
  hosts: all
  gather_facts: false

  tasks:
  
    - name: Generate random IP address for the network
      set_fact:
        random_ip: "{{ (range(1, 256) | random) }}.{{ (range(1, 256) | random) }}.{{ (range(1, 256) | random) }}.{{ (range(1, 256) | random) }}"

    - name: Install and enable service
      ansible.builtin.sysvinit:
        name: test-service
        pattern: "{{ random_ip }}"
        state: started