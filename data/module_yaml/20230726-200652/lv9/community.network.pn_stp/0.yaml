---
- name: Find Latent Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test pn_stp module
      community.network.pn_stp:
        pn_bpdus_bridge_ports: "{{ random_bool }}"
        pn_bridge_id: "{{ random_int }}"
        pn_bridge_priority: "{{ random_float }}"
        pn_cliswitch: "{{ random_list }}"
        pn_enable: "{{ random_string }}"
        pn_forwarding_delay: "{{ random_bool }}"
        pn_hello_time: "{{ random_dict }}"
        pn_max_age: "{{ random_bool }}"
        pn_mst_config_name: "{{ random_int }}"
        pn_mst_max_hops: "{{ random_ip }}"
        pn_root_guard_wait_time: "{{ random_dict }}"
        pn_stp_mode: "{{ random_bool }}"
        state: "{{ random_state }}"

      vars:
        random_bool: "{{ ['true', 'false'] | random }}"
        random_int: "{{ range(1, 10) | random }}"
        random_float: "{{ random_int | float }}"
        random_string: "{{ random_int | string }}"
        random_list: "{{ [random_int] }}"
        random_dict: "{{ { random_string: random_int } }}"
        random_ip: "{{ '%d.%d.%d.%d' | format(range(1,256) | random, range(1,256) | random, range(1,256) | random, range(1,256) | random) }}"
        random_state: "{{ ['present', 'absent'] | random }}"