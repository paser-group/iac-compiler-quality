- name: Test playbook for ansible.builtin.getent module
  hosts: all
  gather_facts: false

  vars:
    database: "passwd"
    fail_key: true
    key: "my_key"
    service: "ssh"
    split: ":"

  tasks:
    - name: Retrieve information from system database
      ansible.builtin.getent:
        database: "{{ database }}"
        fail_key: "{{ fail_key }}"
        key: "{{ key }}"
        service: "{{ service }}"
        split: "{{ split }}"
      register: getent_result

    - name: Display getent result
      debug:
        var: getent_result