---
- name: Manage packages using dnf module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages
      ansible.builtin.dnf:
        name: "package1"
        state: present
        allow_downgrade: "yes"
        allowerasing: "true"
        autoremove: "1"
        bugfix: "no"
        cacheonly: "false"
        conf_file: "/etc/dnf/dnf.conf"
        disable_excludes: 'main,updates'
        disable_gpg_check: "on"
        disable_plugin:
          - "plugin1"
          - "plugin2"
        disablerepo:
          - "repo1"
          - "repo2"
        download_dir: "/tmp/packages"
        download_only: "1"
        enable_plugin:
          - "plugin3"
          - "plugin4"
        enablerepo:
          - "repo3"
          - "repo4"
        exclude:
          - "package3"
          - "package4"
        install_repoquery: "0"
        install_weak_deps: "yes"
        installroot: "/var/chroot"
        list: "installed"
        lock_timeout: 300
        nobest: "true"
        releasever: "8"
        security: "false"
        skip_broken: "yes"
        sslverify: "no"
        update_cache: "1"
        update_only: "1"
        validate_certs: "false"