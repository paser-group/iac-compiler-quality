---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false
  
  tasks:
  - name: Generate random IP address
    set_fact:
      random_ip: "{{ lookup('pipe', 'python -c \"import random; print(f\\'{0}.{1}.{2}.{3}\\'.format(random.randint(1, 255), random.randint(1, 255), random.randint(1, 255), random.randint(1, 255)))\"') }}"
      
  - name: Obtain Keycloak realm public information
    community.general.keycloak_realm_info:
      auth_keycloak_url: "{{ random_ip }}"
      realm: "{{ random_ip }}"
      validate_certs: "{{ random_ip | bool }}"
    register: keycloak_info
    
  - name: Print Keycloak realm info
    debug:
      var: keycloak_info