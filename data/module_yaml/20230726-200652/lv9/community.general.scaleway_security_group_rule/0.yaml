- name: Test scaleway_security_group_rule module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Scaleway Security Group Rule
      community.general.scaleway_security_group_rule:
        api_token: "{{ api_token }}"
        security_group: "{{ security_group }}"
        region: "{{ region }}"
        direction: "{{ direction }}"
        protocol: "{{ protocol }}"
        port: "{{ port }}"
        ip_range: "{{ ip_range }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      vars:
        api_token: "<your_api_token>"
        security_group: "<your_security_group>"
        region: "fr-par-1"
        direction: "inbound"
        protocol: "tcp"
        port: "22"
        ip_range: "10.1.1.0/24"
        state: "present"
        validate_certs: "true"