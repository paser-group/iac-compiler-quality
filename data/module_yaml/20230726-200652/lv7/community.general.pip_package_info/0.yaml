---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required packages
      package:
        name:
          - python3
          - ansible
        state: present

    - name: Set up Docker containers
      docker_container:
        name: "{{ item.name }}"
        image: "{{ item.image }}"
        state: started
        detach: true
        networks:
          - name: node-net
            ipv4_address: "{{ item.ip_address }}"
      loop:
        - { name: "ubuntu1", image: "ubuntu" }
        - { name: "alpine1", image: "alpine" }
        - { name: "centos1", image: "centos" }
        - { name: "redhat1", image: "redhat" }

    - name: Create Docker network
      docker_network:
        name: node-net
        subnet: "10.1.1.0/24"
        gateway: "10.1.1.254"
        state: present

    - name: Debug Test
      debug:
        msg: "Debugging task"

    - name: Gather pip package info using 'community.general.pip_package_info'
      community.general.pip_package_info:
        name: "ansible"
        clients: "{{ item }}"
      register: package_info
      loop:
        - "ubuntu1"
        - "alpine1"
        - "centos1"
        - "redhat1"

    - name: Print pip package info
      debug:
        var: package_info