---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Vertica role with a limit-related value
      community.general.vertica_role:
        cluster: test_cluster
        db: test_db
        role: test_role
        assigned_roles: "{{ 'hello' * 2 }}"
        login_user: test_user
        login_password: test_password
        port: 5433
        state: present
      register: result
      failed_when: false

    - debug:
        var: result

    - name: Remove Vertica role with a limit-related value
      community.general.vertica_role:
        cluster: test_cluster
        db: test_db
        role: test_role
        assigned_roles: "{{ 'hello' / 0 }}"
        login_user: test_user
        login_password: test_password
        port: 5433
        state: absent
      register: result
      failed_when: false

    - debug:
        var: result