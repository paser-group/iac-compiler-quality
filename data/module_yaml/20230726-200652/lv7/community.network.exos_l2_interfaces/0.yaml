---
- name: Manage L2 interfaces on Extreme switches
  hosts: switch
  gather_facts: false
  tasks:
    - name: Configure L2 interfaces
      community.network.exos_l2_interfaces:
        config:
          - name: vlan100
            state: present
          - name: vlan200
            state: absent

    - name: Test case 1 - Division-based operation
      set_fact:
        limit: "{{ 10 / 2 }}"
        vlan_id: "{{ limit | int + 90 }}"   

    - name: Test case 2 - Division-based operation with invalid input
      set_fact:
        limit: "{{ 10 / 0 }}"
        vlan_id: "{{ limit | int + 90 }}"

    - name: Test case 3 - Division-based operation with non-integer result
      set_fact:
        limit: "{{ 13 / 3 }}"
        vlan_id: "{{ limit | int + 90 }}"

    - name: Test case 4 - Division-based operation with non-numeric input
      set_fact:
        limit: "{{ 'abc' / 2 }}"
        vlan_id: "{{ limit | int + 90 }}"

    - name: Test case 5 - Division-based operation with invalid variable
      set_fact:
        vlan_id: "{{ non_existent_var / 2 }}"
        
    - name: Test case 6 - Division-based operation with missing variable
      set_fact:
        vlan_id: "{{ missing_var | int + 90 }}"

  vars:
    ansible_python_interpreter: /usr/bin/python3