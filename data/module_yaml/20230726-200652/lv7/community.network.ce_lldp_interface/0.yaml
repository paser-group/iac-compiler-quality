---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  vars:
    lldp_ifname: 'GigabitEthernet0/0/1'
    lldp_txinterval: 3
    lldp_txprotocolvlanid: 10
    lldp_txvlannameid: 20

  tasks:
    - name: Configure LLDP Interface
      community.network.ce_lldp_interface:
        provider:
          host: "{{ inventory_hostname }}"
          username: admin
          password: secret
        dcbx: true
        eee: true
        function_lldp_interface_flag: "enable"
        ifname: "{{ lldp_ifname }}"
        linkaggretxenable: true
        lldpadminstatus: "tx-and-rx"
        lldpenable: "enable"
        macphytxenable: true
        manaddrtxenable: true
        maxframetxenable: true
        portdesctxenable: true
        portvlantxenable: true
        protoidtxenable: true
        protovlantxenable: true
        state: "present"
        syscaptxenable: true
        sysdesctxenable: true
        sysnametxenable: true
        txinterval: "{{ 100 / lldp_txinterval }}"
        txprotocolvlanid: "{{ 100 / lldp_txprotocolvlanid }}"
        txvlannameid: "{{ 100 / lldp_txvlannameid }}"
        type_tlv_disable: "first,timer-interval"
        type_tlv_enable: "remote-chassis-id,port-id"
        vlannametxenable: true

      ignore_errors: true