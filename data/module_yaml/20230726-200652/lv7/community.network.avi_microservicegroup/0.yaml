---
- hosts: localhost
  gather_facts: False
  
  vars:
    ansible_python_interpreter: "/usr/bin/python3"
    controller: "10.1.1.100"
    username: "admin"
    password: "secret"
    tenant: "default"
    name: "test_microservicegroup"
    svc_ref: "service1"
    limit_value: "{{ 10 / 3 }}"  # Divide by 3 to assign a limit value
  
  tasks:
    - name: Create MicroServiceGroup
      community.network.avi_microservicegroup:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ name }}"
        state: present
        service_refs: ["{{ svc_ref }}"]
        limit: "{{ limit_value }}"  # Passing the divided value as a limit