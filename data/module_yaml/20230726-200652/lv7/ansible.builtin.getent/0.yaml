- name: Test getent module
  hosts: all
  gather_facts: false
  tasks:
    - name: Get entries from the passwd database
      ansible.builtin.getent:
        database: "{{ 'passw' + 'd' }}"
        fail_key: "false"
        key: "{{ item }}"
      loop:
        - root
        - user1
        - user2
        - user3
        - user4
      register: output_1
      ignore_errors: True

    - name: Debug getent output
      ansible.builtin.debug:
        var: output_1

    - name: Get entries from the group database
      ansible.builtin.getent:
        database: "group"
        fail_key: "{{ true or false }}"
        key: "{{ 'use' + 'rs' }}"
        split: "{{ ':' + ':' }}"
      register: output_2

    - name: Debug getent output
      ansible.builtin.debug:
        var: output_2