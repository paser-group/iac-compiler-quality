---
- name: Manage IP interfaces
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Calculate limit value
      set_fact:
        limit_value: "{{ 10 / 2 }}"

    - name: Add IP interface
      community.network.ipadm_if:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        temporary: "{{ item.temporary }}"
        limit: "{{ limit_value }}"
      loop:
        - { name: "eth0", state: "up", temporary: False }
        - { name: "eth1", state: "down", temporary: True }