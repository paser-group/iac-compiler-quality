---
- name: Test playbook for Ansible type-related bugs
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Test scenario 1 - Set a single value in an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_version
        value: "1.0.0"
        state: present

    - name: Test scenario 2 - Set multiple values in an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        values:
          - app_name=my_app
          - app_version=1.0.0
          - enable_logging=yes
        state: present

    - name: Test scenario 3 - Set an attribute in an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        value: "My App"
        attributes: "+i"
        state: present

    - name: Test scenario 4 - Remove a value from an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        state: absent

    - name: Test scenario 5 - Create a new INI file
      community.general.ini_file:
        dest: /tmp/new.ini
        section: app_config
        option: app_name
        value: "My App"
        create: yes
        state: present

    - name: Test scenario 6 - Set ownership and permissions of an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        value: "My App"
        owner: root
        group: root
        mode: '0644'
        state: present

    - name: Test scenario 7 - Remove an entire section from an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        state: absent
        unsafe_writes: true

    - name: Test scenario 8 - Ensure no extra spaces are added in the INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        value: "My App"
        no_extra_spaces: true
        state: present

    - name: Test scenario 9 - Set SELinux attributes for an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        value: "My App"
        selevel: s0
        serole: object_r
        setype: etc_t
        seuser: system_u
        state: present

    - name: Test scenario 10 - Set a backup file for an INI file
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        value: "My App"
        backup: true
        state: present

    - name: Test scenario 11 - Use allow_no_value option to remove an option without a value
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        option: app_name
        allow_no_value: true
        state: present

    - name: Test scenario 12 - Use exclusive option to remove all options in a section
      community.general.ini_file:
        dest: /tmp/test.ini
        section: app_config
        exclusive: true
        state: absent