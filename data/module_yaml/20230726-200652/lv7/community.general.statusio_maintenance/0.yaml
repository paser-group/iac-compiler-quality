---
- name: Create maintenance windows
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include statusio_maintenance module
      include_vars:
        file: statusio_maintenance_module.yml

    - name: Set minutes using division-based operation
      set_fact:
        minutes: "{{ 120 / 0 }}"

    - name: Create maintenance window
      community.general.statusio_maintenance:
        api_id: "{{ api_id }}"
        api_key: "{{ api_key }}"
        statuspage: "{{ statuspage }}"
        title: "{{ title }}"
        desc: "{{ desc }}"
        start_date: "{{ start_date }}"
        start_time: "{{ start_time }}"
        minutes: "{{ minutes }}"
        state: "{{ state }}"
        maintenance_id: "{{ maintenance_id }}"
        maintenance_notify_now: "{{ maintenance_notify_now }}"
        maintenance_notify_1_hr: "{{ maintenance_notify_1_hr }}"
        maintenance_notify_24_hr: "{{ maintenance_notify_24_hr }}"
        maintenance_notify_72_hr: "{{ maintenance_notify_72_hr }}"
        automation: "{{ automation }}"
        url: "{{ url }}"
        components: "{{ components }}"
        containers: "{{ containers }}"
        all_infrastructure_affected: "{{ all_infrastructure_affected }}"
      register: result

    - name: Show maintenance window creation result
      debug:
        var: result