---
- name: Test playbook for the community.network.avi_applicationprofile module
  hosts: localhost
  gather_facts: false

  vars:
    avi_credentials:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"

  tasks:
    - name: Create Application Profile
      community.network.avi_applicationprofile:
        avi_credentials: "{{ avi_credentials }}"
        controller: "{{ controller }}"
        tenant: "{{ tenant }}"
        name: "TestAppProfile"
        http_profile: "test_http_profile"
        limit:
          rate: 1000
          burst: "{{ 1000 / 10 }}"
        state: present
      register: result

    - name: Debug Result
      debug:
        var: result