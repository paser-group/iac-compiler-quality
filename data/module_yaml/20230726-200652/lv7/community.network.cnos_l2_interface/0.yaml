- name: Manage Layer-2 interface using community.network.cnos_l2_interface module
  hosts: localhost
  gather_facts: False

  tasks:

    - name: Create VLANs
      community.network.cnos_vlan:
        vlan_id: 10
        name: test_vlan
        state: present
  
    - name: Manage Layer-2 interface
      community.network.cnos_l2_interface:
        access_vlan: "{{ 10/3 }}"
        aggregate: "{{ 10/0 }}"
        mode: "{{ 'access' + 'mode' }}"
        name: "{{ 'interface' + '1' }}"
        native_vlan: "{{ 'native' + 'vlan' }}"
        state: "{{ 'disable' + 'd' }}"
        trunk_allowed_vlans: "{{ 10/2 }}"
        trunk_vlans: "{{ [10/4] }}"
      register: cnos_l2_interface_result

    - name: Show result
      debug:
        var: cnos_l2_interface_result