---
- name: Test playbook for scaleway_user_data module
  hosts: docker
  gather_facts: false
  vars:
    api_timeout: "{{ 60 / 0 }}"  # Potential division-by-zero bug
    api_token: "your-api-token"
    api_url: "https://api.scaleway.com/"
    query_parameters: "{{ {'organization_id': 'your-organization-id'} }}"
    region: "your-region"
    server_id: "your-server-id"
    user_data:
      user_script: "echo 'User script executed.'"
    validate_certs: false

  tasks:
    - name: Test scaleway_user_data module
      community.general.scaleway_user_data:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        server_id: "{{ server_id }}"
        user_data: "{{ user_data }}"
        validate_certs: "{{ validate_certs }}"
      register: result
    
    - name: Display module result
      debug:
        var: result