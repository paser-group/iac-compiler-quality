- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Import role with defaults and validate role spec
      import_role:
        name: my_role
        defaults_from: defaults/main.yml
        rolespec_validate: true
      vars:
        limit: "{{ 10 / 2 }}"

    - name: Import role with handlers
      import_role:
        name: my_role
        handlers_from: handlers/main.yml
      vars:
        limit: "{{ 20 / 4 }}"

    - name: Import role with vars
      import_role:
        name: my_role
        vars_from: vars/main.yml
      vars:
        limit: "{{ 30 / 0 }}"

    - name: Import role with tasks
      import_role:
        name: my_role
        tasks_from: tasks/main.yml
      vars:
        limit: "{{ 40 / 5 }}"

    - name: Import role with allow_duplicates set to false
      import_role:
        name: my_role
        allow_duplicates: false
      vars:
        limit: "{{ 50 / 10 }}"