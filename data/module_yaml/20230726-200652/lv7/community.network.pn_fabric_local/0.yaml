- name: Ansible Latent Type-Related Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test type-related bug
      hosts: localhost
      gather_facts: false

      vars:
        pn_cliswitch: "localhost"
        pn_vlan: "{{ pn_cliswitch // localhost }}"  # Trigger type conversion error
        state: "present"

      community.network.pn_fabric_local:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_vlan: "{{ pn_vlan }}"
        state: "{{ state }}"
      register: result

    - name: Print task result
      debug:
        var: result