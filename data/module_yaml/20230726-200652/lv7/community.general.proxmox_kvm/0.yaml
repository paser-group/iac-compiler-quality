---
- name: Proxmox KVM Virtual Machine Management
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Proxmox KVM VM
      community.general.proxmox_kvm:
        api_host: "https://proxmox.example.com"
        api_user: "api_user"
        api_password: "api_password"
        vmid: 100
        name: "test-vm"
        ostype: "l26"
        memory: 4096
        vcpus: 4
        cores: "{{ 4096 // 1000 }}"  # Division-based operation
        sockets: "{{ 4096 // 1024 }}"  # Division-based operation
        memory_unit: "MB"
        state: "present"
      register: result

    - name: Debug Result
      debug:
        var: result