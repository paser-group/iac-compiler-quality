- name: Manage storage group members
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create storage group member
      community.general.emc_vnx_sg_member:
        lunid: 123
        name: "my_sg_member"
        sp_address: "10.1.1.1"
        sp_password: "password"
        sp_user: "admin"
        state: "present"
      register: sg_member_result

    - name: Debug storage group member result
      debug:
        var: sg_member_result

    - name: Update storage group member
      community.general.emc_vnx_sg_member:
        lunid: 123
        name: "my_sg_member"
        sp_address: "10.1.1.1"
        sp_password: "password"
        sp_user: "admin"
        state: "absent"
      register: sg_member_result

    - name: Debug storage group member result
      debug:
        var: sg_member_result