- name: Manage storage group members
  hosts: localhost
  gather_facts: false

  vars:
    lunid: "{{ 100 / 2 }}"        # Division operation included

  tasks:
    - name: Create storage group member
      community.general.emc_vnx_sg_member:
        lunid: "{{ lunid | int }}"
        name: "my_sg_member"
        sp_address: "10.1.1.1"
        sp_password: "{{ 'pass' + 'word' }}"
        sp_user: "admin"
        state: "present"
      register: sg_member_result

    - name: Debug storage group member result
      debug:
        var: sg_member_result

    - name: Update storage group member
      community.general.emc_vnx_sg_member:
        lunid: "{{ lunid | int }}"
        name: "my_sg_member"
        sp_address: "10.1.1.1"
        sp_password: "{{ 'pass' + 'word' }}"
        sp_user: "admin"
        state: "absent"
      register: sg_member_result

    - name: Debug storage group member result
      debug:
        var: sg_member_result