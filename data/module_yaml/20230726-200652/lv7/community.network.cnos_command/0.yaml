---
- name: Test Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Test cnos_command module with different attributes
      community.network.cnos_command:
        provider:
          host: "{{ inventory_hostname }}"
          username: admin
          password: password
        commands:
          - command: echo "{{ item }}"
            wait_for: true
            retries: 10
            interval: 5
            match: "{{ inventory_hostname }}"
      loop:
        - "{{ ansible_distribution }}"
        - "{{ hostvars[inventory_hostname]['ansible_facts']['ansible_distribution_version'] }}"