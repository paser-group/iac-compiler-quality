- name: Retrieve Proxmox user information
  hosts: localhost
  gather_facts: false
  
  vars:
    api_host: "your_proxmox_api_host"
    api_user: "your_proxmox_api_user"
    api_password: "your_proxmox_api_password"
    validate_certs: false

  tasks:
    - name: Retrieve user information
      community.general.proxmox_user_info:
        api_host: "{{ api_host }}"
        api_user: "{{ api_user }}"
        api_password: "{{ api_password }}"
        validate_certs: "{{ validate_certs }}"
      register: user_info

    - name: Print user information
      debug:
        var: user_info

    ## Test case 1 ##
    - name: Verify that userid value is a string
      assert:
        that:
          - user_info.userid is string
        fail_msg: "The userid value is not a string"

    ## Test case 2 ##
    - name: Verify that validate_certs value is boolean
      assert:
        that:
          - validate_certs is boolean
        fail_msg: "The validate_certs value is not a boolean"
      
    ## Test case 3 ##
    - name: Verify that domain value exists in the user_info result
      assert:
        that:
          - 'domain' in user_info
        fail_msg: "The domain value does not exist in the result"
      
    ## Test case 4 ##
    - name: Verify that user value exists in the user_info result
      assert:
        that:
          - 'user' in user_info
        fail_msg: "The user value does not exist in the result"