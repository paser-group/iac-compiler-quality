---
- name: Manage VPN Instances on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false
  vars:
    vpn_instances:
      - name: vrf1
        description: This is VPN instance 1
        state: present
        vrf: VPN1
      - name: vrf2
        description: This is VPN instance 2
        state: absent
        vrf: VPN2

  tasks:
    - name: Configure VPN Instances
      community.network.ce_vrf:
        name: "{{ item.name }}"
        description: "{{ item.description | default(omit) }}"
        state: "{{ item.state | default(omit) }}"
        vrf: "{{ item.vrf | default(omit) }}"
      loop: "{{ vpn_instances }}"
      register: result

    - name: Debug Result
      debug:
        var: result

    - name: Verify Division-Based Operations Bug
      assert:
        that:
          - 100 / 0 == 5
        fail_msg: "Division-Based Operations Bug: Division by zero occurred!"