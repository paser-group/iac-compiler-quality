- name: Customize ISO
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Set limit based on subnet and gateway
      set_fact:
        limit: "{{ '10.1.1.254'.split('.')[-1] | int / 2 }}"

    - name: Customize ISO using module
      community.general.iso_customize:
        src_iso: /path/to/source.iso
        dest_iso: /path/to/destination.iso
        add_files:
          - src: /path/to/file.txt
            dest: /path/to/destination/file.txt
      register: iso_customize_result

    - name: Debug ISO customize result
      debug:
        var: iso_customize_result