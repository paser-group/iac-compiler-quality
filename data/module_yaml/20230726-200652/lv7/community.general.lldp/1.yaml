- name: Test for latent type-related bug in community.general.lldp module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general collection
      command: ansible-galaxy collection install community.general

    - name: Calculate the limit value
      set_fact:
        limit_value: "{{ (100 / 10) | int }}"

    - name: Get LLDP neighbors information
      community.general.lldp:
        interface: eth0
        limit: "{{ limit_value }}"
      register: lldp_output

    - name: Debug LLDP output
      debug:
        var: lldp_output