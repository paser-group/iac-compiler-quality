---
- name: Configure ManageIQ alert profiles
  hosts: localhost
  gather_facts: false

  vars:
    manageiq_connection:
      url: "https://manageiq.example.com"
      username: "admin"
      password: "password"

    alerts:
      - name: "Alert1"
        resource_type: "host"
        state: "present"
        notes: "This is alert 1"

      - name: "Alert2"
        resource_type: "vm"
        state: "present"
        notes: "This is alert 2"

      - name: "Alert3"
        resource_type: "host"
        state: "absent"
        notes: "This is alert 3"

  tasks:
    - name: Configure ManageIQ alert profiles
      community.general.manageiq_alert_profiles:
        manageiq_connection: "{{ manageiq_connection }}"
        alerts: "{{ alerts }}"
      register: result

    - name: Debug result
      debug:
        var: result