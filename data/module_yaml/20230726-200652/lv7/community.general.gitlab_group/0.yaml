---
- name: Test playbook for 'community.general.gitlab_group' module
  hosts: localhost
  gather_facts: false

  vars:
    api_job_token: "{{ 'job_token' }}"
    api_oauth_token: "{{ 'oauth_token' }}"
    api_password: "{{ 'password' }}"
    api_token: "{{ 'api_token' }}"
    api_url: "{{ 'https://gitlab.example.com/api/v4' }}"
    api_username: "{{ 'admin' }}"
    auto_devops_enabled: "{{ true }}"
    avatar_path: "{{ '/path/to/avatar' }}"
    description: "{{ 'Test group' }}"
    name: "{{ 'test_group' }}"
    parent: "{{ 'parent_group' }}"
    path: "{{ '/test_group' }}"
    project_creation_level: "{{ 'developer' }}"
    require_two_factor_authentication: "{{ true }}"
    state: "{{ 'present' }}"
    subgroup_creation_level: "{{ 'maintainer' }}"
    validate_certs: "{{ true }}"
    visibility: "{{ 'private' }}"

  tasks:
    - name: Test 'community.general.gitlab_group' module
      community.general.gitlab_group:
        api_job_token: "{{ api_job_token }}"
        api_oauth_token: "{{ api_oauth_token }}"
        api_password: "{{ api_password }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        auto_devops_enabled: "{{ auto_devops_enabled }}"
        avatar_path: "{{ avatar_path }}"
        description: "{{ description }}"
        name: "{{ name }}"
        parent: "{{ parent }}"
        path: "{{ path }}"
        project_creation_level: "{{ project_creation_level }}"
        require_two_factor_authentication: "{{ require_two_factor_authentication }}"
        state: "{{ state }}"
        subgroup_creation_level: "{{ subgroup_creation_level }}"
        validate_certs: "{{ validate_certs }}"
        visibility: "{{ visibility }}"
      register: result

    - debug:
        var: result