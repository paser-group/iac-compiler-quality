---
- name: Manage Interfaces on Lenovo Switch
  hosts: switches
  gather_facts: no

  vars:
    interface_name: eth1
    interface_enabled: yes
    interface_mtu: 1500
    interface_speed: 1000
    interface_duplex: full

  tasks:
    - name: Configure interface
      community.network.cnos_interface:
        aggregate: "{{ item.aggregate }}"
        delay: "{{ item.delay }}"
        description: "{{ item.description }}"
        duplex: "{{ item.duplex }}"
        enabled: "{{ item.enabled }}"
        mtu: "{{ item.mtu }}"
        name: "{{ item.name }}"
        neighbors: "{{ item.neighbors }}"
        rx_rate: "{{ item.rx_rate }}"
        speed: "{{ item.speed }}"
        state: "{{ item.state }}"
        tx_rate: "{{ item.tx_rate }}"
      with_items:
        - aggregate: null
          delay: null
          description: null
          duplex: null
          enabled: "{{ interface_enabled }}"
          mtu: null
          name: "{{ interface_name }}"
          neighbors: null
          rx_rate: null
          speed: null
          state: null
          tx_rate: null
        # Add more test cases here