---
- name: Create loopback interfaces
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: "{{ ansible_network_os }}"
    pn_index: "{{ item.index }}"
    pn_ip: "{{ item.ip }}"
    pn_vrouter_name: "{{ item.vrouter_name }}"
    state: "{{ item.state }}"
    limit: "{{ item.limit }}"  # Variable to test the division-based operations heuristic

  tasks:
    - name: Create loopback interface
      community.network.pn_vrouter_loopback_interface:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_index: "{{ pn_index }}"
        pn_ip: "{{ pn_ip }}"
        pn_vrouter_name: "{{ pn_vrouter_name }}"
        state: "{{ state }}"
      loop:
        - { index: "1", ip: "10.1.1.101", vrouter_name: "vrouter1", state: "present", limit: "10" }
        - { index: "2", ip: "10.1.1.102", vrouter_name: "vrouter1", state: "present", limit: "5" }
        - { index: "3", ip: "10.1.1.103", vrouter_name: "vrouter1", state: "present", limit: "2" }
        - { index: "4", ip: "10.1.1.104", vrouter_name: "vrouter1", state: "absent", limit: "0" }

    # Additional tasks can be added as needed