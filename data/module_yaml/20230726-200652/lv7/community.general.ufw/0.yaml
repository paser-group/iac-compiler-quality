---
- name: Test UFW module with type-related bug
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    - name: Enable UFW logging
      community.general.ufw:
        rule: 'logging on'
      register: ufw_logging

    - name: Print UFW logging result
      debug:
        var: ufw_logging

    - name: Enable UFW rule for SSH traffic
      community.general.ufw:
        rule: 'allow 22'
      register: ufw_ssh_rule

    - name: Print UFW SSH rule result
      debug:
        var: ufw_ssh_rule

    - name: Insert UFW rule at position 1
      community.general.ufw:
        rule: 'insert 1 allow 80'
        insert: 1
      register: ufw_insert_rule

    - name: Print UFW insert rule result
      debug:
        var: ufw_insert_rule