---
- name: Test playbook for community.network.icx_vlan module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create VLAN with associated interfaces
      community.network.icx_vlan:
        name: TestVLAN
        vlan_id: 100
        associated_interfaces:
          - ethernet1/1
          - ethernet1/2
          - ethernet1/3
        state: present
        check_running_config: true
      register: result
      ignore_errors: true

    - name: Print the result
      debug:
        var: result

    - name: Create VLAN with invalid VLAN ID
      community.network.icx_vlan:
        name: TestVLAN
        vlan_id: "20a"
        state: present
      register: result
      ignore_errors: true

    - name: Print the result
      debug:
        var: result

    - name: Create VLAN with invalid associated interfaces
      community.network.icx_vlan:
        name: TestVLAN
        vlan_id: 200
        associated_interfaces:
          - ethernet1/4
          - ethernet1/5
        state: present
      register: result
      ignore_errors: true

    - name: Print the result
      debug:
        var: result

    - name: Create VLAN with invalid state
      community.network.icx_vlan:
        name: TestVLAN
        vlan_id: 300
        state: invalid_state
      register: result
      ignore_errors: true

    - name: Print the result
      debug:
        var: result