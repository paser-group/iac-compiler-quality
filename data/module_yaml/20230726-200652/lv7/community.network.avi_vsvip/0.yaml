---
- name: Test playbook for community.network.avi_vsvip module
  hosts: localhost
  gather_facts: no

  vars:
    vsvip:
      name: test-vsvip
      ip:
        - address: 10.1.1.5
          type: STATIC
      east_west_placement: true
      use_standard_alb: true
      avi_credentials:
        controller: "https://{{ controller_ip }}"
        username: "admin"
        password: "password"

  tasks:
    - name: Create VsVip using community.network.avi_vsvip module
      community.network.avi_vsvip:
        api_version: "18.2.6"
        api_context:
          tenant_ref: "{{ tenant_ref }}"
        avi_credentials: "{{ avi_credentials }}"
        state: present
        vsvip: "{{ vsvip }}"
      register: result

    - name: Debug module output
      debug:
        var: result