- name: Deploy Logstash Plugin
  hosts: localhost
  gather_facts: false
  vars:
    plugin_name: my-plugin
    plugin_bin_path: /path/to/plugin
    proxy_host: proxy.example.com
    proxy_port: "8080"
    plugin_version: "1.0.0"

  tasks:
    - name: Install Logstash Plugin
      community.general.logstash_plugin:
        name: "{{ plugin_name }}"
        plugin_bin: "{{ plugin_bin_path }}"
        proxy_host: "{{ proxy_host }}"
        proxy_port: "{{ proxy_port }}"
        state: present
        version: "{{ plugin_version }}"
      register: result

    # Test case - Triggering a type-related bug
    - name: Test case - Access Invalid variable
      debug:
        msg: "Invalid Variable: {{ invalid_var }}"
      when: result.changed