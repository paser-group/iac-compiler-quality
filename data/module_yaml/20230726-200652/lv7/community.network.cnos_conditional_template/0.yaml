- name: Test Ansible module - community.network.cnos_conditional_template
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test case - Command File None
      community.network.cnos_conditional_template:
        commandfile: None
        condition: None
        deviceType: switch
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Condition None
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: None
        deviceType: switch
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Device Type String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: "switch"
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Enable Password String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: "enablepass"
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Flag None
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: enablepass
        flag: None
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Host String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: enablepass
        host: "localhost"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Output File String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: "output.txt"
        password: "{{ vault_password }}"
        username: admin
      register: result

    - name: Test case - Password String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "password"
        username: admin
      register: result

    - name: Test case - Username String
      community.network.cnos_conditional_template:
        commandfile: cmd.txt
        condition: "condition.txt"
        deviceType: switch
        enablePassword: enablepass
        host: "{{ inventory_hostname }}"
        outputfile: output.txt
        password: "{{ vault_password }}"
        username: "admin"
      register: result

    - name: Debug Output
      debug:
        var: result