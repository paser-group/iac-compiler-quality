- name: Test playbook to uncover latent bug in community.general.locale_gen module
  hosts: all
  gather_facts: false

  tasks:
    - name: Set 'en_US.UTF-8' as default locale
      community.general.locale_gen:
        name: en_US.UTF-8
        state: present

    - name: Set 'C.UTF-8' as default locale
      community.general.locale_gen:
        name: C.UTF-8
        state: absent

    - name: Set invalid locale 'xyz' to trigger a bug
      community.general.locale_gen:
        name: xyz
        state: present

    - name: Set limit-related value for locale
      community.general.locale_gen:
        name: en_GB.UTF-8
        state: present
        limit: "{{ 10 / 2 }}"

    - name: Set limit-related value for locale (division by zero)
      community.general.locale_gen:
        name: de_DE.UTF-8
        state: present
        limit: "{{ 10 / 0 }}"