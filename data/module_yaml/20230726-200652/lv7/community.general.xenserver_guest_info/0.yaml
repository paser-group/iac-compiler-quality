---
- name: Expose latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    username: admin
    password: securepassword
    validate_certs: true

  tasks:
    - name: Set limit-related values
      set_fact:
        total_vms: 10
        vms_per_node: "{{ total_vms / num_nodes }}"
      vars:
        num_nodes: "{{ groups['hosts'] | length }}"

    - name: Display limit-related values
      debug:
        msg: "Total VMs: {{ total_vms }}, VMs per Node: {{ vms_per_node }}"