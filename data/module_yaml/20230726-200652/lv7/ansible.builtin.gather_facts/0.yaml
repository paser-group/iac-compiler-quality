---
- name: Gather Facts and Test Heuristic
  hosts: all
  gather_facts: false

  tasks:
    - name: Gather facts from Docker nodes
      ansible.builtin.gather_facts:
        gather_subset:
          - '!all'
          - 'network'
          - 'hardware'
          - 'virtual'

    - name: Print gathered facts
      debug:
        var: ansible_facts

    - name: Implement division-based operations for limit
      set_fact:
        limit: "{{ ansible_facts['ansible_processor'] | length / '' }}"   # Potential type-related bug

    - name: Print limit value
      debug:
        var: limit