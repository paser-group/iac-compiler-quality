- name: Manage L3 interfaces on Extreme Networks SLXOS switches
  hosts: switches
  gather_facts: false
  tasks:
    - name: Configure L3 interface
      community.network.slxos_l3_interface:
        aggregate: "{{ item.aggregate | default(None) }}"
        ipv4: "{{ item.ipv4 | default(None) }}"
        ipv6: "{{ item.ipv6 | default(None) }}"
        name: "{{ item.name | default(None) }}"
        state: "{{ item.state | default(None) }}"
      loop:
        - aggregate: none
          ipv4: 10.1.1.1/24
          ipv6: 2001:db8::1/64
          name: eth1
          state: present
        - aggregate: none
          ipv4: 10.1.1.2/24
          ipv6: 2001:db8::2/64
          name: eth2
          state: present
        - aggregate: none
          ipv4: 10.1.1.3/24
          ipv6: 2001:db8::3/64
          name: eth3
          state: present
        - aggregate: none
          ipv4: 10.1.1.4/24
          ipv6: 2001:db8::4/64
          name: eth4
          state: present

    - name: Validate L3 interface configuration
      debug:
        var: ansible_facts['community_network_slxos_l3_interface']