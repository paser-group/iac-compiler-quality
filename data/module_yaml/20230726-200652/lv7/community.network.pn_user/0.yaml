---
- name: Create network user
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: "{{ ansible_host }}"  # assuming ansible_host has the device IP
    pn_initial_role: "admin"
    pn_name: "test_user"
    pn_password: "test_password"
    pn_scope: "priv-lvl"
    state: "present"

  tasks:
    - name: Run CLI command to create user
      community.network.pn_user:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_initial_role: "{{ pn_initial_role }}"
        pn_name: "{{ pn_name }}"
        pn_password: "{{ pn_password }}"
        pn_scope: "{{ pn_scope }}"
        state: "{{ state }}"
      register: result

    - name: Show CLI output
      debug:
        var: result.stdout_lines

- name: Test Case 1 - Assign a string value to pn_initial_role
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: "{{ ansible_host }}"
    pn_initial_role: "admin"
    pn_name: "test_user"
    pn_password: "test_password"
    pn_scope: "priv-lvl"
    state: "present"

  tasks:
    - name: Run CLI command to create user
      community.network.pn_user:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_initial_role: "{{ pn_initial_role }}"
        pn_name: "{{ pn_name }}"
        pn_password: "{{ pn_password }}"
        pn_scope: "{{ pn_scope }}"
        state: "{{ state }}"
      register: result

    - name: Show CLI output
      debug:
        var: result.stdout_lines

- name: Test Case 2 - Divisor-based operation on limit-related values
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: "{{ ansible_host }}"
    pn_initial_role: "admin"
    pn_name: "test_user"
    pn_password: "test_password"
    pn_scope: "{{ 1000/100 }}"
    state: "present"

  tasks:
    - name: Run CLI command to create user
      community.network.pn_user:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_initial_role: "{{ pn_initial_role }}"
        pn_name: "{{ pn_name }}"
        pn_password: "{{ pn_password }}"
        pn_scope: "{{ pn_scope }}"
        state: "{{ state }}"
      register: result

    - name: Show CLI output
      debug:
        var: result.stdout_lines