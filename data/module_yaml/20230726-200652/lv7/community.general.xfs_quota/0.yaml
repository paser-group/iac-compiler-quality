---
- name: Manage XFS quotas
  hosts: localhost
  gather_facts: False

  vars:
    mountpoint: "/mnt/data"

  tasks:
    - name: Set XFS quotas
      community.general.xfs_quota:
        mountpoint: "{{ mountpoint }}"
        name: "user1"
        bhard: "1g"
        bsoft: "500m"
        isoft: "{{ '10000' }}"
        ihard: 20000
        rtbhard: "{{ '2g' }}"
        rtbsoft: "1g"
        type: "{{ ['user', 'group'] | random }}"
        state: "{{ ['present', 'absent'] | random }}"