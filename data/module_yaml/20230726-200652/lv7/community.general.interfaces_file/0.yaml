---
- name: Expose latent type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Test case 1 - Invalid value for address_family
      community.general.interfaces_file:
        dest: /etc/network/interfaces
        iface: eth0
        option: address_family
        value: 123
        state: present
      register: result_1
      ignore_errors: true

    - name: Test case 2 - Invalid value for mode
      community.general.interfaces_file:
        dest: /etc/network/interfaces
        iface: eth0
        option: mode
        value: invalid_mode
        state: present
      register: result_2
      ignore_errors: true

    - name: Test case 3 - Invalid value for unsafe_writes
      community.general.interfaces_file:
        dest: /etc/network/interfaces
        iface: eth0
        option: unsafe_writes
        value: yes
        state: present
      register: result_3
      ignore_errors: true

    - name: Test case 4 - Division by zero in value
      community.general.interfaces_file:
        dest: /etc/network/interfaces
        iface: eth0
        option: mtu
        value: "{{ 1500 / 0 }}"
        state: present
      register: result_4
      ignore_errors: true

    - name: Debug results
      debug:
        msg: "{{ item }}"
      loop:
        - "{{ result_1 }}"
        - "{{ result_2 }}"
        - "{{ result_3 }}"
        - "{{ result_4 }}"