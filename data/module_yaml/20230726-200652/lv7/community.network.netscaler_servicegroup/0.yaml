- name: Test playbook for 'community.network.netscaler_servicegroup' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create service group
      community.network.netscaler_servicegroup:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout | default(30) }}"
        validate_certs: "{{ validate_certs }}"
        state: present
        servicegroupname: "{{ servicegroupname }}"
        servicetype: "{{ servicetype }}"
        svrtimeout: "{{ svrtimeout | default(360) }}"
        maxbandwidth: "{{ maxbandwidth | default(0) }}"
        monthreshold: "{{ monthreshold | default(0) }}"
        maxclient: "{{ maxclient | default(0) }}"
        maxreq: "{{ maxreq | default(0) }}"
        cip: "{{ cip | default([]) }}"
        cipheader: "{{ cipheader | default([]) }}"
        usip: "{{ usip | default(false) }}"
        useproxyport: "{{ useproxyport | default(false) }}"
        healthmonitor: "{{ healthmonitor | default(true) }}"
        clttimeout: "{{ clttimeout | default(180) }}"
        svrstate: "{{ svrstate | default('ENABLED') }}"

      register: result

    - name: Debug result
      debug:
        var: result