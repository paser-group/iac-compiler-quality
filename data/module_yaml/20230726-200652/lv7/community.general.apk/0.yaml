---
- name: Test playbook for community.general.apk module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages using apk module
      community.general.apk:
        available: True
        name:
          - package1
          - package2
        no_cache: True
        repository:
          - community
          - main
        state: present
        update_cache: True
        upgrade: True
        world: "yes"
        limit: "{{ 10/2 | round }}"

      register: installed_packages

    - name: Display installed packages
      debug:
        var: installed_packages