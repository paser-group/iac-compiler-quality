---
- name: Create or Delete Anti Affinity Policies
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Anti Affinity Policy
      community.general.clc_aa_policy:
        location: "{{ item.location }}"
        name: "{{ item.name }}"
        state: present
      with_items:
        - { location: "us-central1", name: "policy1" }
        - { location: "us-central1", name: 123 }

    - name: Delete Anti Affinity Policy
      community.general.clc_aa_policy:
        location: "{{ item.location }}"
        name: "{{ item.name }}"
        state: absent
      with_items:
        - { location: "us-central1", name: "policy1" }
        - { location: "us-central1", name: 123 }