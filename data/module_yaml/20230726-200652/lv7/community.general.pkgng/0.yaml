---
- name: Install packages using pkgng
  hosts: all
  gather_facts: false

  vars:
    package_list:
      - package1
      - package2
      - package3

  tasks:
    - name: Install packages on the nodes
      pkgng:
        name: "{{ package_list }}"
        state: present
      register: result
      when: ansible_distribution == 'FreeBSD'

    - name: Print the results
      debug:
        var: result