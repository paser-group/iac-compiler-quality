---
- name: Test playbook for community.general.vertica_schema module
  hosts: localhost
  gather_facts: false

  vars:
    cluster: cluster_name
    db: database_name
    login_user: username
    login_password: password
    port: 5433
    owner: myusername
    schema: myschema
    state: present
    create_roles: myrole1,myrole2
    usage_roles: myrole3,myrole4

  tasks:
    - name: Add Vertica data schema
      community.general.vertica_schema:
        cluster: "{{ cluster }}"
        db: "{{ db }}"
        login_user: "{{ login_user }}"
        login_password: "{{ login_password }}"
        port: "{{ port }}"
        owner: "{{ owner }}"
        schema: "{{ schema }}"
        state: "{{ state }}"
        create_roles: "{{ create_roles }}"
        usage_roles: "{{ usage_roles }}"
      register: result

    - name: Display result
      debug:
        var: result

    - name: Divide by zero test
      set_fact:
        division_result: "{{ 1 / 0 }}"

    - name: Print division result
      debug:
        var: division_result