---
- name: Gather Redis Info
  hosts: localhost
  gather_facts: False

  vars:
    redis_host: "127.0.0.1"
    redis_password: "my_password"
    redis_port: 6379

  tasks:
    - name: Determine limit based on division
      set_fact:
        limit: "{{ redis_port / 2 }}"

    - name: Gather Redis Info from remote host
      community.general.redis_info:
        login_host:  "{{ redis_host }}"
        login_password: "{{ redis_password }}"
        login_port: "{{ limit | int }}"
      register: redis_info

    - name: Debug Redis Info
      debug:
        var: redis_info