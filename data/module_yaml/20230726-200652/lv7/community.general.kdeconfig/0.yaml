---
- name: Manage KDE configurations
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Set KDE configurations
      community.general.kdeconfig:
        path: /usr/share/kde-settings/kde-local-defaults.rc
        group: root
        owner: root
        mode: "0644"
        backup: yes
        unsafe_writes: yes
        values:
          - key: "kdeui/ButtonBarIconSize"
            value: "3"
          - key: "kwin/CheckPopupPosition"
            value: "true"
          - key: "plasma/theme"
            value: "Breeze"
            selevel: "s0"
            serole: "object_r"
            setype: "tmp_t"
            seuser: "system_u"
      register: kdeconfig_result
    
    - name: Show result
      debug:
        var: kdeconfig_result
    
    - name: Divide values by zero 
      community.general.kdeconfig:
        path: /usr/share/kde-settings/kde-local-defaults.rc
        group: root
        owner: root
        mode: "0644"
        backup: yes
        unsafe_writes: yes
        values:
          - key: "kdeui/ButtonBarIconSize"
            value: "{{ 5/0 }}"
            
      register: kdeconfig_divide_result
    
    - name: Show divide result
      debug:
        var: kdeconfig_divide_result