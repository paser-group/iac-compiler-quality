- name: Manage cron jobs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add cron job
      ansible.builtin.cron:
        name: "Test cron job"
        job: "echo 'Hello, World!'"
        minute: "{{ 60 / 2 }}"  # Trigger division-based operation
        hour: "*"
        day: "*"
        month: "*"
        weekday: "*"
        user: "{{ ansible_user }}"  # Use current user
        state: present

    - name: Disable cron job
      ansible.builtin.cron:
        name: "Test cron job"
        job: "echo 'Hello, World!'"
        minute: "0"
        hour: "23"
        day: "*"
        month: "*"
        weekday: "*"
        user: "{{ ansible_user }}"  # Use current user
        disabled: true
        state: present

    - name: Remove cron job
      ansible.builtin.cron:
        name: "Test cron job"
        user: "{{ ansible_user }}"  # Use current user
        state: absent