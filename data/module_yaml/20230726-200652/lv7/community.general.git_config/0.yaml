- name: Configure Git
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set Git configuration using git_config module
      community.general.git_config:
        name: "{{ item.name }}"
        value: "{{ item.value }}"
        file: "{{ item.file }}"
        scope: "{{ item.scope | default('user') }}"
        state: present
      with_items:
        - name: core.editor
          value: vim
          file: /home/user/.gitconfig
        - name: user.email
          value: test@example.com
          file: /home/user/.gitconfig
          scope: system

    - name: Display Git configuration
      shell: git config --list
      register: git_config_output

    - name: Debug Git configuration
      debug:
        var: git_config_output.stdout_lines