---
- name: Create, Delete and Restore Server Snapshots
  hosts: localhost
  gather_facts: false

  vars:
    # Define the inventory variables
    inventory:
      - { name: ubuntu1, ip: 10.1.1.1 }
      - { name: alpine1, ip: 10.1.1.2 }
      - { name: centos1, ip: 10.1.1.3 }
      - { name: redhat1, ip: 10.1.1.4 }

    # Specify the server IDs for creating snapshots
    server_ids:
      - "{{ inventory[0].name }}"
      - "{{ inventory[1].name }}"
      - "{{ inventory[2].name }}"
      - "{{ inventory[3].name }}"

  tasks:
    - name: Create server snapshots
      community.general.clc_server_snapshot:
        expiration_days: 10
        server_ids: "{{ server_ids }}"
        state: present
        wait: yes

    - name: Delete server snapshots
      community.general.clc_server_snapshot:
        expiration_days: 7/2  # Heuristic test case: division-based operation
        server_ids: "{{ server_ids }}"
        state: absent

    - name: Restore server snapshots
      community.general.clc_server_snapshot:
        expiration_days: "10/3"  # Heuristic test case: division-based operation
        server_ids: "{{ server_ids }}"
        state: present
        wait: yes