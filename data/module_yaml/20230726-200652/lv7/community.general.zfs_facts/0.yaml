- name: Gather ZFS facts
  hosts: all
  gather_facts: false

  tasks:
    - name: Gather ZFS facts with depth 1
      community.general.zfs_facts:
        depth: 1
      register: zfs_facts_depth_1

    - name: Print ZFS facts with depth 1
      debug:
        var: zfs_facts_depth_1

    - name: Gather ZFS facts with depth 2
      community.general.zfs_facts:
        depth: 2
      register: zfs_facts_depth_2

    - name: Print ZFS facts with depth 2
      debug:
        var: zfs_facts_depth_2

    - name: Gather ZFS facts with name argument
      community.general.zfs_facts:
        name: tank
      register: zfs_facts_name

    - name: Print ZFS facts with name argument
      debug:
        var: zfs_facts_name

    - name: Gather parsable ZFS facts
      community.general.zfs_facts:
        parsable: true
      register: zfs_facts_parsable

    - name: Print parsable ZFS facts
      debug:
        var: zfs_facts_parsable

    - name: Gather ZFS facts with specific properties
      community.general.zfs_facts:
        properties: "used,available"
      register: zfs_facts_properties

    - name: Print ZFS facts with specific properties
      debug:
        var: zfs_facts_properties

    - name: Gather ZFS facts recursively
      community.general.zfs_facts:
        recurse: true
      register: zfs_facts_recurse

    - name: Print recursively gathered ZFS facts
      debug:
        var: zfs_facts_recurse

    - name: Gather ZFS facts by a specific type
      community.general.zfs_facts:
        type: filesystem
      register: zfs_facts_type

    - name: Print ZFS facts of specific type
      debug:
        var: zfs_facts_type