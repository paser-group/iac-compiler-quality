- name: Test playbook for community.network.enos_facts module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Collect facts from remote device
      community.network.enos_facts:
        auth_pass: "{{ auth_pass | default(None) }}"
        authorize: "{{ 1/0 | default(false) if limit > 0 else false }}"  # Division by zero when limit is greater than zero
        gather_subset: "{{ gather_subset | default(None) }}"
      register: enos_facts

    - debug:
        var: enos_facts