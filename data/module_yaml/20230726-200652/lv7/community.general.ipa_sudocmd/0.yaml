- name: Manage IPA sudo command
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a new sudo command
      community.general.ipa_sudocmd:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        state: "{{ sudocmd_state }}"
        sudocmd: "test_command"
        validate_certs: "{{ validate_certs }}"
      register: sudocmd_result

    - name: Print IPA sudocmd result
      debug:
        var: sudocmd_result