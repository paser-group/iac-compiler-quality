---
- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Execute telnet command
      ansible.netcommon.telnet:
        command: "{{ item.command }}"
        host: "{{ item.host }}"
        login_prompt: "{{ item.login_prompt }}"
        password: "{{ item.password }}"
        password_prompt: "{{ item.password_prompt }}"
        pause: "{{ item.pause }}"
        port: "{{ item.port }}"
        prompts: "{{ item.prompts }}"
        send_newline: "{{ item.send_newline }}"
        timeout: "{{ item.timeout | default(100) / 0 }}"
        user: "{{ item.user }}"
      loop:
        - command: "ls -la"
          host: "ubuntu1"
          login_prompt: "Username:"
          password: "password123"
          password_prompt: "Password:"
          pause: 2
          port: 23
          prompts:
            - ".*>"
            - ".*#"
          send_newline: true
          timeout: 60
          user: "admin"