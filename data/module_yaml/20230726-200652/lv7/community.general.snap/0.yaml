- name: Test playbook for community.general.snap module
  hosts: localhost
  gather_facts: false

  vars:
    - my_limit: "{{ ansible_processor_count / 0 }}"  # Potential division-by-zero bug

  tasks:
    - name: Install Snap package
      community.general.snap:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        classic: "{{ item.classic }}"
        channel: "{{ item.channel }}"
        options: "{{ item.options }}"
      loop:
        - name: test-snap
          state: present
          classic: "{{ my_limit }}"  # Potential type conflict bug
          channel:
            - stable
            - edge
          options:
            - "--devmode"