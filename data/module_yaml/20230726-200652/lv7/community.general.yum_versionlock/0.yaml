---
- name: Lock / Unlock Packages
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Lock or Unlock a package
      community.general.yum_versionlock:
        name: "package{{ item }}"
        state: "{{ lock_state }}"
      loop: "{{ package_list }}"
      vars:
        package_list: [1, 2, 3]
        lock_state: "{{ state }}"