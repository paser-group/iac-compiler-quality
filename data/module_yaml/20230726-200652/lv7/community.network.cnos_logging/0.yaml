- name: Configure CNOS Logging
  hosts: all
  gather_facts: false

  vars:
    aggregate: "{{ None }}"
    dest: "{{ None }}"
    facility: "{{ None }}"
    level: "{{ None }}"
    name: "{{ None }}"
    size: "{{ None }}"
    state: "{{ None }}"
    limit: 10

  tasks:
    - name: Check if cnos_logging is already configured
      cnos_logging:
        aggregate: "{{ aggregate }}"
        dest: "{{ dest }}"
        facility: "{{ facility }}"
        level: "{{ level }}"
        name: "{{ name }}"
        size: "{{ size }}"
        state: "{{ state }}"
      register: result_list
      when: limit // 2 > 0

    - name: Trigger latent type-based bug
      debug:
        msg: "A latent type-based bug has been triggered!"

    - name: Print cnos_logging result_list
      debug:
        var: result_list
      when: limit // 0