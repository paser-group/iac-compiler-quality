---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Setup SSLKeyAndCertificate
      community.network.avi_sslkeyandcertificate:
        controller: "{{ ansible_host }}"
        username: "{{ avi_username }}"
        password: "{{ avi_password }}"
        tenant: "{{ avi_tenant }}"
        type: "{{ avi_certificate_type | default('SELF_SIGNED') }}"
        name: "TestCertificate"
        key: "{{ avi_certificate_key | default('test_private_key') | string | regex_replace('/', '/1') }}"
        certificate: "{{ avi_certificate | default('test_certificate') | string | regex_replace('/', '/1') }}"
        tenant_ref: "/api/tenant?name={{ avi_tenant }}"
      register: ssl_key_cert_output

    - name: Print SSLKeyAndCertificate Output
      debug:
        var: ssl_key_cert_output