---
- name: Test playbook for community.general.runit module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general.runit module
      ansible.builtin.package:
        name: python3-pip
        state: present

    - name: Install runit module
      community.general.runit: {}

    - name: Create a runit service
      community.general.runit:
        name: "{{ service_name }}"
        service_dir: "{{ service_dir }}"
        service_src: "{{ service_src }}"
        state: "{{ service_state }}"
      vars:
        service_name: myservice
        service_dir: "/etc/service"
        service_src: "/path/to/myservice"
        service_state: 1      # Triggered bug: assigning an integer value instead of a string