---
- name: Test playbook for 'community.network.avi_cloudproperties' module
  hosts: localhost
  gather_facts: false

  vars:
    api_context:
      - controller: "10.1.1.1"
        username: "admin"
        password: "password"

    avi_credentials:
      - controller: "10.1.1.1"
        username: "admin"
        password: "password"

    tenant: "Tenant1"
    tenant_uuid: "abcdefg-1234567"

  tasks:
    - name: Set Cloud Properties
      community.network.avi_cloudproperties:
        api_context: "{{ api_context }}"
        avi_credentials: "{{ avi_credentials }}"
        tenant: "{{ tenant }}"
        tenant_uuid: "{{ tenant_uuid }}"
        cc_props:
          limit:
            divisions: "abc"  # Trigger latent type-related bug
            count: 10
        avi_api_update_method: "patch"
      register: result

    - debug:
        var: result