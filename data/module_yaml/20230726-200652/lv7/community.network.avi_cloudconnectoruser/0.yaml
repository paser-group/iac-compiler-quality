- name: Test playbook for community.network.avi_cloudconnectoruser module
  hosts: localhost
  gather_facts: false

  vars:
    api_version: "17.2.8"
    controller: "https://controller.example.com"
    username: "admin"
    password: "password"
    tenant: "Default-Cloud"

  tasks:
    - name: Create Cloud Connector User
      community.network.avi_cloudconnectoruser:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "present"
        avi_credentials:
          api_version: "{{ api_version }}"
        name: "cloud-user"
        avi_disable_session_cache_as_fact: true
      register: cloud_connector_user

    - name: Debug Cloud Connector User
      debug:
        var: cloud_connector_user

    # Test case 1: Assigning a string value to limit-related attribute
    - name: Test case 1 - Assigning string value to limit-related attribute
      community.network.avi_cloudconnectoruser:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "present"
        avi_credentials:
          api_version: "{{ api_version }}"
        name: "cloud-user"
        avi_disable_session_cache_as_fact: "true"  # Incorrect data type (string instead of boolean)
      register: test_case_1_result
      ignore_errors: true

    - name: Debug Test Case 1 Result
      debug:
        var: test_case_1_result

    # Test case 2: Assigning a division-based value to limit-related attribute
    - name: Test case 2 - Assigning division-based value to limit-related attribute
      community.network.avi_cloudconnectoruser:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "present"
        avi_credentials:
          api_version: "{{ api_version }}"
        name: "cloud-user"
        avi_disable_session_cache_as_fact: "{{ 10 / 0 }}"  # Division-based operation resulting in an error
      register: test_case_2_result
      ignore_errors: true

    - name: Debug Test Case 2 Result
      debug:
        var: test_case_2_result