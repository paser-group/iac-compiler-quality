---
- name: Create Taiga Issue
  hosts: localhost
  gather_facts: false
  vars:
    taiga_host: "https://your.taiga.host.com"
    project: "Your Project"
    issue_type: "Task"
    subject: "Example Issue"
    description: "This is an example issue created with Ansible"
    tags:
      - bug
      - taiga

  tasks:
    - name: Create Taiga issue
      community.general.taiga_issue:
        taiga_host: "{{ taiga_host }}"
        project: "{{ project }}"
        issue_type: "{{ issue_type }}"
        subject: "{{ subject }}"
        description: "{{ description }}"
        tags: "{{ tags }}"
      register: created_issue

    - name: Debug created issue
      debug:
        var: created_issue

- name: Delete Taiga Issue
  hosts: localhost
  gather_facts: false
  vars:
    taiga_host: "https://your.taiga.host.com"
    project: "Your Project"
    issue_id: 123  # Replace with the actual issue ID

  tasks:
    - name: Delete Taiga issue
      community.general.taiga_issue:
        taiga_host: "{{ taiga_host }}"
        project: "{{ project }}"
        issue_id: "{{ issue_id }}"
      register: deleted_issue

    - name: Debug deleted issue
      debug:
        var: deleted_issue