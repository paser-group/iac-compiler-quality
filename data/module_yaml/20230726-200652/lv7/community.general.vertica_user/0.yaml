---
- name: Test playbook for 'community.general.vertica_user' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Vertica database user
      community.general.vertica_user:
        cluster: test_cluster
        db: mydb
        state: present
        user: test_user
        password: test_password
        roles: "{{ ['role1', 'role2'] }}"
      register: result
      ignore_errors: true

    - name: Debug output
      debug:
        var: result

    - name: Remove Vertica database user
      community.general.vertica_user:
        cluster: test_cluster
        db: mydb
        state: absent
        user: test_user
      register: result
      ignore_errors: true

    - name: Debug output
      debug:
        var: result