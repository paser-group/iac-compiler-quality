---
- name: Heuristic-based Testing with community.general.xattr module
  hosts: localhost
  gather_facts: false

  vars:
    xattr_path: /path/to/file.txt
    xattr_key: my_key
    xattr_value: my_value

  tasks:
    - name: Set user-defined attribute
      community.general.xattr:
        path: "{{ xattr_path }}"
        key: "{{ xattr_key }}"
        value: "{{ xattr_value }}"
        state: present
        namespace: user
        follow: yes

    - name: Test case 1 - Assigning limit-related value
      set_fact:
        xattr_value: "{{ 10 / 0 }}"

    - name: Set user-defined attribute with limit-related value
      community.general.xattr:
        path: "{{ xattr_path }}"
        key: "{{ xattr_key }}"
        value: "{{ xattr_value }}"
        state: present
        namespace: user
        follow: yes

    - name: Test case 2 - Assigning normal value
      set_fact:
        xattr_value: "normal_value"

    - name: Set user-defined attribute with normal value
      community.general.xattr:
        path: "{{ xattr_path }}"
        key: "{{ xattr_key }}"
        value: "{{ xattr_value }}"
        state: present
        namespace: user
        follow: yes

    - name: Test case 3 - Assigning limit-related value
      set_fact:
        xattr_value: "{{ 100 / 0 }}"

    - name: Set user-defined attribute with limit-related value
      community.general.xattr:
        path: "{{ xattr_path }}"
        key: "{{ xattr_key }}"
        value: "{{ xattr_value }}"
        state: present
        namespace: user
        follow: yes