- name: Test Playbook for community.network.avi_tenant module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Tenant
      community.network.avi_tenant:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: present
      register: tenant_created

    - name: Print Tenant Result
      debug:
        var: tenant_created

    - name: Assign Limit-related Values
      set_fact:
        limit: "10"
        divisor: "0"

    - name: Create Tenant with Divisor-based Limit
      community.network.avi_tenant:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        limit: "{{ limit | int / divisor | int }}"
        state: present
      register: tenant_created_with_limit

    - name: Print Tenant with Limit Result
      debug:
        var: tenant_created_with_limit

    - name: Delete Tenant
      community.network.avi_tenant:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: absent
      register: tenant_deleted

    - name: Print Tenant Deletion Result
      debug:
        var: tenant_deleted