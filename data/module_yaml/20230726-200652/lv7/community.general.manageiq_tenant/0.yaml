---
- name: Test manageiq_tenant module
  hosts: localhost
  gather_facts: false
  vars:
    tenant_details:
      description: "Test description"
      manageiq_connection:
        host: "https://manageiq.example.com"
        username: "admin"
        password: "password"
      name: 5
      parent: "Parent Tenant"
      parent_id: "1"
      quotas:
        cpu: "2"
        memory: 4096
      state: absent

  tasks:
    - name: Create tenant
      community.general.manageiq_tenant:
        description: "{{ tenant_details.description }}"
        manageiq_connection: "{{ tenant_details.manageiq_connection }}"
        name: "{{ tenant_details.name }}"
        parent: "{{ tenant_details.parent }}"
        parent_id: "{{ tenant_details.parent_id }}"
        quotas: "{{ tenant_details.quotas }}"
        state: "{{ tenant_details.state }}"
      register: result
      no_log: true

    - name: Debug result
      debug:
        var: result