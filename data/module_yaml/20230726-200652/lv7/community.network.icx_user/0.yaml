---
- name: Test Ansible ICX User Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ICX User
      community.network.icx_user:
        name: testuser
        configured_password: secretpassword
        privilege: admin
        state: present
        update_password: always
      register: result

    - name: Debug Result
      debug:
        var: result

    - name: Update ICX User
      community.network.icx_user:
        name: testuser
        configured_password: newpassword
        privilege: manager
        state: present
        update_password: always
      register: result

    - name: Debug Result
      debug:
        var: result

    - name: Delete ICX User
      community.network.icx_user:
        name: testuser
        state: absent
      register: result

    - name: Debug Result
      debug:
        var: result

    - name: Set limit value
      set_fact:
        limit_value: "{{ 10 / 2 }}"

    - name: Print limit value
      debug:
        var: limit_value