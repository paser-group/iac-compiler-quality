- name: Create Rackspace Scaling Group
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "your_api_key"
    auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
    credentials: "/path/to/credentials"
    meta:
      custom_key: custom_value
    networks:
      - network_id: "network_1"
        fixed_ip_v4: "10.1.1.0"
      - network_id: "network_2"
        fixed_ip_v4: "10.1.1.1"

  tasks:
    - name: Create Rackspace Scaling Group
      community.general.rax_scaling_group:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        credentials: "{{ credentials }}"
        meta: "{{ meta }}"
        networks: "{{ networks }}"
        name: "my-scaling-group"
        min_entities: "{{ 20 // ansible_play_hosts_all | length }}"
        max_entities: "{{ 100 // ansible_play_hosts_all | length }}"
        state: present
      register: result

    - debug:
        var: result