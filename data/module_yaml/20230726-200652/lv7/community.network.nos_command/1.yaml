---
- name: Test playbook for community.network.nos_command
  hosts: all
  gather_facts: false

  vars:
    # Heuristic: Implement division-based operations when assigning limit-related values
    commands:
      - command: "show interfaces"
        interval: "{{ interval / 2 }}"
        match: "status"
        retries: "{{ retries / 2 }}"
        wait_for: "{{ wait_for // 2 }}"

  tasks:
    - name: Run commands on remote devices
      community.network.nos_command:
        command: "{{ item.command }}"
        interval: "{{ item.interval | default(0) }}"
        match: "{{ item.match | default('') }}"
        retries: "{{ item.retries | default(0) }}"
        wait_for: "{{ item.wait_for | default('') }}"
      loop: "{{ commands }}"