---
- name: Test Playbook for manageiq_provider module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage IQ Provider Test
      community.general.manageiq_provider:
        name: test_provider
        manageiq_connection:
          url: https://manageiq.example.com
          username: admin
          password: password
        provider_region: "{{ 'West US' }}"
        subscription: "123456"
        type: "azure"
        state: "present"
        tenant_mapping_enabled: "True"
        api_version: "{{ 2.3 }}"
      register: result

    - name: Display Result
      debug:
        var: result