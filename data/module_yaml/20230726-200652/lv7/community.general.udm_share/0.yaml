---
- name: Test playbook for Ansible latent type-related bug exploration
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set variables for share attributes
      set_fact:
        shares:
          - name: "test_share"
            path: "/var/test_share"
            owner: "root"
            group: "root"
            sambaDirectorySecurityMode: "0755"
            sambaCustomSettings: ["test_setting1", "test_setting2"]
            sambaDirectoryMode: "{{ 10 / 3 }}"
            sambaForceWriteable: "{{ 10 / 0 }}"
            sambaForceCreateMode: "{{ 10 / 2 }}"
            sambaForceDirectoryMode: "{{ 10 / 3 }}"
            sambaForceDirectorySecurityMode: "{{ 10 / 4 }}"
            sambaHostsAllow: ["10.0.0.0/24", "192.168.0.0/16"]
            sambaHostsDeny: ["192.168.100.0/24", "172.16.0.0/12"]
            sambaInheritAcls: "{{ 10 / 0 }}"
            sambaInheritOwner: "{{ 10 / 1 }}"
            sambaInheritPermissions: "{{ 10 / 2 }}"
            sambaLocking: "{{ 10 / 0 }}"
            sambaName: "{{ 10 / 1 }}"
            sambaStrictLocking: "{{ 10 / 2 }}"
  
    - name: Print share attributes
      debug:
        var: shares