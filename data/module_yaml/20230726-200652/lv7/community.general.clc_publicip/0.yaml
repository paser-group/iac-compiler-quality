---
- name: Test playbook for clc_publicip module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add public IP to servers
      community.general.clc_publicip:
        server_ids: [server1, server2]
        state: present
        wait: true
        protocol: tcp
        ports:
          - 80
          - 443
      register: add_result
      no_log: true

    - name: Print add_result
      debug:
        var: add_result

    - name: Delete public IP from servers
      community.general.clc_publicip:
        server_ids: [server1, server2]
        state: absent
        wait: true
      register: delete_result
      no_log: true

    - name: Print delete_result
      debug:
        var: delete_result