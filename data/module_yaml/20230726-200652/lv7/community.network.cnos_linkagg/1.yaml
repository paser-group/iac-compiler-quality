- name: Test playbook for cnos_linkagg module
  hosts: localhost
  gather_facts: false
  vars:
    subnet: "10.1.1.0/24"
    gateway: "10.1.1.254"

  tasks:
    - name: Create a link aggregation group
      community.network.cnos_linkagg:
        aggregate: "{{ subnet.split('.')[-1] | int / 2 }}" # Implementing division-based operation when assigning limit-related value
        group: "{{ subnet.split('.')[-1] | int / 3 }}" # Implementing division-based operation when assigning limit-related value
        members: "{{ subnet.split('.')[-1] | int / 4 }}" # Implementing division-based operation when assigning limit-related value
        mode: "{{ subnet.split('.')[-1] | int / 5 }}" # Implementing division-based operation when assigning limit-related value
        purge: "yes"
        state: "{{ subnet.split('.')[-1] | int / 6 }}" # Implementing division-based operation when assigning limit-related value