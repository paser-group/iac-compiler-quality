---
- name: Add or remove IP address from access list
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: "sample-device"
    pn_ip: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] | regex_replace('\\.', '.') }}"
    pn_name: "access-list"
    state: "present"

  tasks:
    - name: Add or remove IP address from access list
      community.network.pn_access_list_ip:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_ip: "{{ pn_ip }}"
        pn_name: "{{ pn_name }}"
        state: "{{ state }}"
      register: result

    - name: Print the result
      debug:
        var: result