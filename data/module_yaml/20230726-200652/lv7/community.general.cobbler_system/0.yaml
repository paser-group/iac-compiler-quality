---
- name: Test 'community.general.cobbler_system' module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create cobbler system
      community.general.cobbler_system:
        name: "test_system"
        state: present
        interfaces:
          eth0:
            type: interface
            mac-address: "00:11:22:33:44:55"
            interfaces: []
        properties:
          gateway: "{{ hostvars['localhost']['gateway'] }}"
        port: "{{ hostvars['localhost']['port'] | default(443) }}"
        use_ssl: "{{ hostvars['localhost']['use_ssl'] | default(true) }}"
        username: "{{ hostvars['localhost']['username'] }}"
        password: "{{ hostvars['localhost']['password'] }}"
        validate_certs: "{{ hostvars['localhost']['validate_certs'] | default(true) }}"
        sync: "{{ hostvars['localhost']['sync'] | default(true) }}"
      register: result
      
    - name: Debug cobbler system creation
      debug:
        var: result