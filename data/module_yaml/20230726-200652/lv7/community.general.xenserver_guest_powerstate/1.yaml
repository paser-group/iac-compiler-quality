- name: Manage power states of virtual machines
  hosts: localhost
  gather_facts: false

  vars:
    hostname: "xenserver.example.com"
    username: "admin"
    password: "password"
    uuid: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    state_change_timeout: "{{ 60/0 }}"  # Trigger division by zero error
    validate_certs: false
    wait_for_ip_address: true

  tasks:
    - name: Power on the virtual machine
      community.general.xenserver_guest_powerstate:
        hostname: "{{ hostname }}"
        username: "{{ username }}"
        password: "{{ password }}"
        uuid: "{{ uuid }}"
        state: "running"
        state_change_timeout: "{{ state_change_timeout }}"
        validate_certs: "{{ validate_certs }}"
        wait_for_ip_address: "{{ wait_for_ip_address }}"
      register: result

    - name: Print the power state result
      debug:
        var: result