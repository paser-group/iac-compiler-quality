---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    subnet: "10.1.1.0/24"
    gateway: "10.1.1.254"

  tasks:
    - name: Calculate subnet mask
      set_fact:
        subnet_mask: "{{ subnet|ipsubnet(subnet).subnet }}"

    - name: Calculate network address
      set_fact:
        network_address: "{{ subnet|ipsubnet(subnet).network }}"

    - name: Calculate broadcast address
      set_fact:
        broadcast_address: "{{ subnet|ipsubnet(subnet).broadcast }}"

    - name: Calculate gateway address
      set_fact:
        gateway_address: "{{ gateway }}"

    - name: Debug subnet
      debug:
        msg: "Subnet: {{ subnet_mask }}"

    - name: Debug network address
      debug:
        msg: "Network Address: {{ network_address }}"

    - name: Debug broadcast address
      debug:
        msg: "Broadcast Address: {{ broadcast_address }}"

    - name: Debug gateway address
      debug:
        msg: "Gateway: {{ gateway_address }}"