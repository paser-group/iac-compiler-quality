---
- name: Test playbook for 'community.network.cnos_system' module
  hosts: localhost
  gather_facts: false

  vars:
    domain_name: None
    domain_search: None
    hostname: None
    lookup_enabled: True
    lookup_source: None
    name_servers: None
    state: None

  tasks:
    - name: Set domain_name
      set_fact:
        domain_name: "{{ lookup_enabled | ternary('example.com', domain_name) }}"
    
    - name: Set domain_search
      set_fact:
        domain_search: "{{ lookup_enabled | ternary(['search.example.com'], domain_search) }}"
    
    - name: Set hostname
      set_fact:
        hostname: "{{ lookup_enabled | ternary('host1', hostname) }}"
    
    - name: Set lookup_source
      set_fact:
        lookup_source: "{{ lookup_enabled | ternary('source1', lookup_source) }}"
    
    - name: Set name_servers
      set_fact:
        name_servers: "{{ lookup_enabled | ternary(['10.1.1.1'], name_servers) }}"
    
    # Trigger division-based operation on limit-related value (state)
    - name: Set state
      set_fact:
        state: "{{ lookup_enabled | ternary(lookup_source.split('.')[0] | int / 2, state) }}"
    
    - name: Print variables
      debug:
        var: 
          domain_name
          domain_search
          hostname
          lookup_enabled
          lookup_source
          name_servers
          state