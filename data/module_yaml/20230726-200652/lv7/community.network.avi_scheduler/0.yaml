---
- name: Test Avi Scheduler Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Setup Avi Scheduler
      community.network.avi_scheduler:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        api_version: "{{ api_version }}"
        tenant_uuid: "{{ tenant_uuid }}"
        avi_credentials: "{{ avi_credentials }}"
        state: present
        enabled: "{{ enabled }}"
        name: "{{ name }}"
        start_date_time: "{{ start_date_time }}"
        end_date_time: "{{ end_date_time }}"
        frequency: "{{ frequency }}"
        frequency_unit: "{{ frequency_unit }}"
        api_context:
          subnet: 10.1.1.0/24
          gateway: 10.{{ subnet_start | random(resource_ranges) }}.1.254