---
- name: Manage DNS entries
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create DNS records
      community.general.udm_dns_record:
        name: "{{ item.name }}"
        type: "{{ item.type }}"
        zone: "{{ item.zone }}"
        data: "{{ item.data }}"
        state: "{{ item.state }}"
      loop:
        - name: test1
          type: A
          zone: example.com
          data:
            value: "{{ '10.1.1.1' | int }}"
            other: "{{ 1/0 }}"
          state: present
        - name: test2
          type: "{{ 'A' }}"
          zone: example.com
          data:
            value: "{{ 2001:0db8:85a3:0000:0000:8a2e:0370:7334 }}"
            other: "{{ 'something' }}"
          state: absent