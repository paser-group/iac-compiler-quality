---
- name: Retrieve SNMP facts
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Case 1 - Assign string to limit-related variable (timeout)
      set_fact:
        timeout: "test_timeout"
      register: result

    - name: Test Case 2 - Assign float to limit-related variable (retries)
      set_fact:
        retries: 1.5
      register: result

    - name: Test Case 3 - Assign division-based value to limit-related variable (retries)
      set_fact:
        retries: "{{ 10 / 3 }}"
      register: result

    - name: Retrieve SNMP facts
      community.general.snmp_facts:
        host: "{{ inventory_hostname }}"
        version: "2c"
        community: "public"
        retries: "{{ retries }}"
        timeout: "{{ timeout }}"

      register: snmp_info

    - name: Display SNMP facts
      debug:
        var: snmp_info