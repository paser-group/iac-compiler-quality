---
- name: Test rax_network module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create isolated network
      community.general.rax_network:
        auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
        api_key: YourAPIKey
        username: YourUsername
        credentials: "/path/to/credentials"
        env: rackspace
        identity_type: rackspace
        label: "test-network"
        cidr: "{{ subnet_ip | random_sub }}" # Exposing potential type-related bug
        region: "DFW"
        state: "present"
        validate_certs: false
      register: result