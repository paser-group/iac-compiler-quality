---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include required roles
      include_role:
        name: community.network.cnos_reload

    - name: Reload the switch
      community.network.cnos_reload:
        host: "{{ ansible_host }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        enablePassword: "{{ enable_password }}"
        deviceType: "{{ device_type }}"
        outputfile: "{{ output_file }}"
      register: reload_result

    - name: Print the reload result
      debug:
        var: reload_result
        verbosity: 2
     
  vars:
    device_type: "cisco_nxos"
    enable_password: "admin"
    output_file: "/var/log/ansible_reload.log"