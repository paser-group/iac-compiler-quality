---
- name: Test playbook for community.network.pn_prefix_list_network module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set limit-related values
      set_fact:
        limit: "{{ pn_netmask | split('.') | first }}"
        limit_result: "{{ limit | int / 2 | int }}"
        limit_final: "{{ limit_result | int + 1 }}"

    - name: Configure prefix list network
      community.network.pn_prefix_list_network:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_netmask: "{{ pn_netmask }}"
        pn_network: "{{ pn_network }}"
        state: "{{ state }}"
        pn_limit: "{{ limit_final }}"
      register: result

    - name: Debug module output
      debug:
        var: result