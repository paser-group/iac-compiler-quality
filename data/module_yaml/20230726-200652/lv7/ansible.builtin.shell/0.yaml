# latent_bug_finder_playbook.yml

- name: Execute shell commands on nodes
  hosts: nodes
  gather_facts: false
  tasks:
    - name: Change to specified directory
      ansible.builtin.shell:
        cmd: "cd {{ inventory_dir }}/path/to/directory"
        chdir: "{{ inventory_dir }}/path/to/directory"
      register: change_directory_result

    - name: Execute shell command
      ansible.builtin.shell:
        cmd: "{{ item.cmd }}"
        creates: "{{ item.creates }}"
        executable: "{{ item.executable }}"
        free_form: "{{ item.free_form }}"
        remove: "{{ item.remove }}"
        stdin: "{{ item.stdin }}"
        stdin_add_newline: "{{ item.stdin_add_newline }}"
      loop:
        - { cmd: "echo 'Hello, world!'", creates: "/tmp/file.txt", executable: "/bin/bash", free_form: "ls -l", remove: "/tmp/tempfile", stdin: "input", stdin_add_newline: false }

    - name: Display shell command output
      ansible.builtin.debug:
        var: stdout