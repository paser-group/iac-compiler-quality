---
- name: Test playbook for community.general.stacki_host module
  hosts: localhost
  gather_facts: false

  vars:
    appliance: stacki-appliance.example.com
    stacki_user: admin
    stacki_password: password
    name: node1
    stacki_endpoint: https://stacki-api.example.com
    state: present
    rack: 1
    rank: 1
    network: node-net
    prim_intf: eth0
    prim_intf_mac: "00:11:22:33:44:55"
    prim_intf_ip: 10.1.1.1
    force_install: no

  tasks:
    - name: Add or remove host with community.general.stacki_host module
      community.general.stacki_host:
        appliance: "{{ appliance }}"
        stacki_user: "{{ stacki_user }}"
        stacki_password: "{{ stacki_password }}"
        name: "{{ name }}"
        stacki_endpoint: "{{ stacki_endpoint }}"
        state: "{{ state }}"
        rack: "{{ rack }}"
        rank: "{{ rank }}"
        network: "{{ network }}"
        prim_intf: "{{ prim_intf }}"
        prim_intf_mac: "{{ prim_intf_mac }}"
        prim_intf_ip: "{{ prim_intf_ip }}"
        force_install: "{{ force_install }}"

    - name: Debug information
      debug:
        msg: "Host '{{ name }}' has been added/removed successfully."