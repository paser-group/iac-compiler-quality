- name: Download Maven artifact
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Download artifact
      community.general.maven_artifact:
        repository_url: "https://repo.example.com"
        artifact_id: "my-artifact"
        version: "1.0.0"
        dest: "/tmp/my-artifact.jar"
        validate_certs: false
      register: download_result

    - name: Show download result
      debug:
        var: download_result

- name: Test case 1 - Assigning a division-based limit-related value
  hosts: localhost
  gather_facts: false

  vars:
    max_timeout: 30
    timeout_factor: 2

  tasks:
    - name: Calculate timeout value
      set_fact:
        timeout_value: "{{ max_timeout // timeout_factor }}"

    - name: Download artifact
      community.general.maven_artifact:
        repository_url: "https://repo.example.com"
        artifact_id: "my-artifact"
        version: "1.0.0"
        dest: "/tmp/my-artifact.jar"
        validate_certs: false
        timeout: "{{ timeout_value }}"
      register: download_result

    - name: Show download result
      debug:
        var: download_result

- name: Test case 2 - Assigning a division-based limit-related value with zero factor
  hosts: localhost
  gather_facts: false

  vars:
    max_timeout: 30
    timeout_factor: 0

  tasks:
    - name: Calculate timeout value
      set_fact:
        timeout_value: "{{ max_timeout // timeout_factor }}"

    - name: Download artifact
      community.general.maven_artifact:
        repository_url: "https://repo.example.com"
        artifact_id: "my-artifact"
        version: "1.0.0"
        dest: "/tmp/my-artifact.jar"
        validate_certs: false
        timeout: "{{ timeout_value }}"
      register: download_result

    - name: Show download result
      debug:
        var: download_result