---
- name: Ansible Latent Bug Finder & Heuristic Test - ansible.builtin.tempfile
  hosts: localhost
  gather_facts: false
  vars:
    subnet_length: 24
  tasks:
    - name: Calculate division-based prefix
      set_fact:
        prefix: "{{ subnet_length | int // 8 }}_"
  
    - name: Create temporary directory
      ansible.builtin.tempfile:
        path: "/tmp/my_temp_dir"
        prefix: "{{ prefix }}prefix_"
        suffix: "suffix"
        state: directory
      register: temp_dir

    - name: Print temporary directory path
      debug:
        var: temp_dir.path