---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  
  vars:
    nodes:
      - name: ubuntu1
        ip: 10.1.1.1
        distro: ubuntu
      - name: alpine1
        ip: 10.1.1.2
        distro: alpine
      - name: centos1
        ip: 10.1.1.3
        distro: centos
      - name: redhat1
        ip: 10.1.1.4
        distro: redhat
  
  tasks:
    - name: Configure Docker network
      command: docker network create --subnet=10.1.1.0/24 --gateway=10.1.1.254 node-net
      ignore_errors: true
  
    - name: Create Docker nodes
      docker_container:
        name: "{{ item.name }}"
        image: "{{ item.distro }}"
        restart_policy: always
        detach: yes
        net: node-net
        ip: "{{ item.ip }}"
      with_items: "{{ nodes }}"
  
    - name: Print node IP and distribution
      debug:
        msg: "Node {{ item.name }} has IP address {{ item.ip }} and runs {{ item.distro }} distribution."
      with_items: "{{ nodes }}"