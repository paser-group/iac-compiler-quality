- name: Manage SNMP contact configuration
  hosts: huawei_devices
  gather_facts: false

  vars:
    contact: "{{ lookup('env', 'SNMP_CONTACT') }}"
    state: "{{ lookup('env', 'SNMP_CONTACT_STATE') }}"

  tasks:
    - name: Set SNMP contact
      community.network.ce_snmp_contact:
        contact: "{{ contact }}"
        state: "{{ state }}"
      register: result

- name: Debug result
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Print result
      debug:
        var: result