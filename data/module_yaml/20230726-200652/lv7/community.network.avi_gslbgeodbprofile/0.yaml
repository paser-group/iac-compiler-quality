---
- name: Test playbook for community.network.avi_gslbgeodbprofile module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create GslbGeoDbProfile
      community.network.avi_gslbgeodbprofile:
        controller: "https://{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ gslb_geodbprofile_name }}"
        avi_credentials:
          - name: "{{ credential_name }}"
            username: "{{ credential_username }}"
            password: "{{ credential_password }}"
        state: present
        description: "Example GslbGeoDbProfile"
        entries:
          - location: "US"
            type: "GEO_IP_INTERNAL"
            db_file_ref: "https://{{ controller }}/api/file/FqJAagvtZ7wpIYIQWvoFtr"
            prefix:
              - "10.1.0.0/16"
              - "192.168.0.0/16"
            ip6_prefix:
              - "::1/128"
              - "::2/128"
        url: "{{ api_context }}"
      register: gslb_geodbprofile_result

    - name: Print GslbGeoDbProfile result
      debug:
        var: gslb_geodbprofile_result