---
- name: Configure Apache mod_proxy
  hosts: localhost
  gather_facts: false

  vars:
    num_nodes: 4
    limit_factor: 2

  tasks:

    - name: Set member attributes
      community.general.apache2_mod_proxy:
        balancer_url_suffix: '/foo'
        balancer_vhost: 'example.com'
        member_host: 'backend.example.com'
        state: 'absent'
        tls: false
        validate_certs: true
        limit: "{{ num_nodes // limit_factor }}"

    - name: Get member attributes
      community.general.apache2_mod_proxy:
        balancer_url_suffix: '/bar'
        balancer_vhost: 'example.org'
        member_host: 'backend.example.org'
        state: 'present'
        tls: true
        validate_certs: false
        limit: "{{ num_nodes // limit_factor }}"

...