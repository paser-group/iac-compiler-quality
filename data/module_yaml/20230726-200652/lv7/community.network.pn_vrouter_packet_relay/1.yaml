---
- name: Test playbook for community.network.pn_vrouter_packet_relay module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add packet relay configuration
      community.network.pn_vrouter_packet_relay:
        pn_cliswitch: "192.168.1.1"
        pn_forward_ip: "10.1.1.100"
        pn_forward_proto: "tcp"
        pn_nic: "eth0"
        pn_vrouter_name: "router1"
        state: present
        pn_limit: "{{ 100/2 }}"  # Assigning a limit-related value using division
      register: result

    - name: Print debug information
      debug:
        var: result

    - name: Remove packet relay configuration
      community.network.pn_vrouter_packet_relay:
        pn_cliswitch: "192.168.1.1"
        pn_forward_ip: "10.1.1.100"
        pn_forward_proto: "tcp"
        pn_nic: "eth0"
        pn_vrouter_name: "router1"
        state: absent