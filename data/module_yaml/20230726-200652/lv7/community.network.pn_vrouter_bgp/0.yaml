- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add/Modify BGP configuration
      community.network.pn_vrouter_bgp:
        pn_vrouter_name: vrouter1
        pn_neighbor: 10.1.1.2
        pn_remote_as: 65002
        pn_prefix_list_in: "prefix_list_in"
        pn_prefix_list_out: "prefix_list_out"
        pn_route_map_in: "route_map_in"
        pn_route_map_out: "route_map_out"
        pn_password: "{{ password }}"
        pn_max_prefix: "100"
        pn_max_prefix_warn_only: true
        pn_ebgp_multihop: "2 / 0"  # Potential division-based operation
        
        # Intentionally invalid options to trigger potential type-related bugs
        pn_advertisement_interval: "30 seconds"
        pn_allowas_in: "yes"
        pn_bfd: "true"
        pn_bfd_multihop: "1 / 0"
        pn_cliswitch: true
        pn_connect_retry_interval: "10 seconds"
        pn_default_originate: no
        pn_interface: 123
        pn_neighbor_holdtime: "60 seconds"
        pn_neighbor_keepalive_interval: "30 seconds"
        pn_next_hop_self: "1 / 0"
        pn_no_route_map_in: true
        pn_no_route_map_out: false
        pn_override_capability: "1 / 0"
        pn_route_reflector_client: "yes"
        pn_send_community: "true"
        pn_soft_reconfig_inbound: "no"
        pn_update_source: "eth1"
        pn_weight: "10 / 0"
        
        state: present