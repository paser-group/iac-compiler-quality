---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Create test user
      community.general.homectl:
        name: "testuser"
        uid: 1001
        gid: "admin"
        state: "present"
      
    - name: Update user state
      community.general.homectl:
        name: "testuser"
        uid: "1001"
        gid: 1001
        state: "locked"