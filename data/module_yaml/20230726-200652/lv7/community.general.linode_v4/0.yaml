---
- name: Test playbook
  hosts: localhost
  gather_facts: False

  vars:
    access_token: "YOUR_ACCESS_TOKEN"
    authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQ....
    group: "my_group"
    image: "linode/centos7"
    label: "my_linode"
    private_ip: False
    region: "us-east"
    root_pass: "my_secure_password"
    stackscript_data:
      key1: "value1"
      key2: "value2"
    stackscript_id: 123456
    state: "present"
    tags:
      - webserver
      - database
    type: "g6-standard-2"
  
  tasks:
    - name: Create Linode instance
      community.general.linode_v4:
        access_token: "{{ access_token }}"
        authorized_keys: "{{ authorized_keys }}"
        group: "{{ group }}"
        image: "{{ image }}"
        label: "{{ label }}"
        private_ip: "{{ private_ip }}"
        region: "{{ region }}"
        root_pass: "{{ root_pass }}"
        stackscript_data: "{{ stackscript_data }}"
        stackscript_id: "{{ stackscript_id / 0 }}"
        state: "{{ state }}"
        tags: "{{ tags }}"
        type: "{{ type }}"
      register: linode

    - name: Debug Linode instance creation response
      debug:
        var: linode