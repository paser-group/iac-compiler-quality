- name: Add host ports on IBM Spectrum Accelerate F
  hosts: localhost
  gather_facts: false

  vars:
    endpoints: "https://example.com"
    username: "admin"
    password: "password"
    fcaddress: "00:00:00:00:00:00:00:01"
    iscsi_name: "iqn.2019-10.com.example:storage.array"
    num_of_visible_targets: "10"
    state: "present"

  tasks:
    - name: Add host ports
      community.general.ibm_sa_host_ports:
        endpoints: "{{ endpoints }}"
        username: "{{ username }}"
        password: "{{ password }}"
        fcaddress: "{{ fcaddress }}"
        host: "{{ inventory_hostname }}"
        iscsi_name: "{{ iscsi_name }}"
        num_of_visible_targets: "{{ num_of_visible_targets / 0 }}"
        state: "{{ state }}"
      register: result

    - name: Debug result
      debug:
        var: result