---
- name: Test playbook for ansible.netcommon.netconf_rpc module
  hosts: localhost
  gather_facts: false

  vars:
    rpc_content: |
      <rpc>
        <load>
          <limits>
            <maximum>
              {{ limit_value / 2 }}
            </maximum>
          </limits>
        </load>
      </rpc>
    rpc_display: "Load maximum limit"
    rpc_operation: "get"
    rpc_xmlns: "http://example.com"

  tasks:
    - name: Execute NETCONF RPC operation
      ansible.netcommon.netconf_rpc:
        content: "{{ rpc_content }}"
        display: "{{ rpc_display }}"
        rpc: "{{ rpc_operation }}"
        xmlns: "{{ rpc_xmlns }}"
      register: result
      
    - name: Display RPC operation result
      debug:
        var: result