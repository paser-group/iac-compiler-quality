---
- name: Test playbook for community.network.pn_connection_stats_settings module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure connection stats settings
      community.network.pn_connection_stats_settings:
        pn_client_server_stats_log_disk_space: "/var/log/stats"
        pn_client_server_stats_log_enable: true
        pn_client_server_stats_log_interval: "1d"
        pn_client_server_stats_max_memory: "1G"
        pn_cliswitch: "switch1"
        pn_connection_backup_enable: true
        pn_connection_backup_interval: "1h"
        pn_connection_max_memory: "512M"
        pn_connection_stats_log_disk_space: "/var/log/stats"
        pn_connection_stats_log_enable: true
        pn_connection_stats_log_interval: "1d"
        pn_connection_stats_max_memory: "1G"
        pn_enable: true
        pn_fabric_connection_backup_enable: true
        pn_fabric_connection_backup_interval: "6h"
        pn_fabric_connection_max_memory: "256M"
        pn_service_stat_max_memory: "2G"
        pn_service_memory_limit: "{{ pn_service_stat_max_memory | int / 2 }}"
        state: present
        
      register: result

    - name: Show debug output
      debug:
        var: result