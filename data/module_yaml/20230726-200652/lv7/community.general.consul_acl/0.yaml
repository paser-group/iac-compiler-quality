---
- name: Test playbook for community.general.consul_acl module
  hosts: localhost
  gather_facts: false

  vars:
    consul_port: "8500"

  tasks:
    - name: Create Consul ACL
      community.general.consul_acl:
        name: "test-acl"
        mgmt_token: "management-token"
        validate_certs: "false"
        host: "localhost"
        port: "{{ consul_port }}"
        scheme: "http"
        state: "present"
        rules:
          - key_prefix: "prefix1"
            policy: "write"
          - key_prefix: "prefix2"
            policy: "read"