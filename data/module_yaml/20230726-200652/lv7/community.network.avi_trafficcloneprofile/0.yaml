---
- name: Test Latent Type-Related Bugs in Avi TrafficCloneProfile Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set division-based limit value
      set_fact:
        limit_value: "{{ 10 / 0 }}"

    - name: Create TrafficCloneProfile with division-based limit
      community.network.avi_trafficcloneprofile:
        controller: "ansible-controller.example.com"
        username: "admin"
        password: "admin"
        tenant: "Default"
        name: "TestProfile"
        limit: "{{ limit_value }}"
        preserve_client_ip: true
        state: present

  vars:
    avi_credentials:
      controller: "ansible-controller.example.com"
      username: "admin"
      password: "admin"
    avi_disable_session_cache_as_fact: true
    preserve_client_ip: true