---
- name: Retrieve Public IP using ipify_facts module
  hosts: all
  gather_facts: false

  tasks:
    - name: Get Public IP
      community.general.ipify_facts:
        api_url: "https://api.ipify.org/?format=json"
        timeout: "{{ timeout_value | int }}"
        validate_certs: "{{ validate_certs_value | bool }}"
      register: public_ip

    - debug:
        var: public_ip

    - name: Assign limit value using division-based operation
      set_fact:
        limit_value: "{{ public_ip.timeout / 2 }}"
        division_result: "{{ public_ip.timeout / 0 }}"
      ignore_errors: true

    - debug:
        var: limit_value
        var: division_result