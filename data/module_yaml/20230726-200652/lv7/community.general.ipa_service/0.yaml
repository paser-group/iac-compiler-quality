---
- name: Test playbook for latent type-related bugs in ipa_service module
  hosts: my_nodes
  gather_facts: false

  tasks:
    - name: Install FreeIPA service
      community.general.ipa_service:
        force: "{{ force|default(false)|bool }}"  # Option - force (boolean)
        hosts: "{{ groups['my_nodes'] }}"  # Option - hosts (list)
        ipa_host: "{{ ipa_host|default('localhost') }}"  # Option - ipa_host (string)
        ipa_pass: "{{ ipa_pass|default('password') }}"  # Option - ipa_pass (string)
        ipa_port: "{{ ipa_port|default(80)|int }}"  # Option - ipa_port (integer)
        ipa_prot: "{{ ipa_prot|default('http') }}"  # Option - ipa_prot (string)
        ipa_timeout: "{{ ipa_timeout|default(30)|int }}"  # Option - ipa_timeout (integer)
        ipa_user: "{{ ipa_user|default('admin') }}"  # Option - ipa_user (string)
        krbcanonicalname: "{{ krbcanonicalname|default('host') }}"  # Option - krbcanonicalname (string)
        skip_host_check: "{{ skip_host_check|default(false)|bool }}"  # Option - skip_host_check (boolean)
        state: "{{ state|default('present') }}"  # Option - state (string)
        validate_certs: "{{ validate_certs|default(true)|bool }}"  # Option - validate_certs (boolean)

      register: ipa_service_result

    - debug:
        var: ipa_service_result