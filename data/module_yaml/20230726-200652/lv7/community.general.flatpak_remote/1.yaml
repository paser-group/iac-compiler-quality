---
- name: Manage flatpak remotes
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Add flatpak remote
      community.general.flatpak_remote:
        name: flathub
        flatpakrepo_url: "{{ 'https://fl' + 'athub' + '.org/repo/flathub.flatpakrepo' }}"
        executable: /usr/bin/flatpak
        state: present
      register: result_add
      
    - debug:
        var: result_add

    - name: Update flatpak remote
      community.general.flatpak_remote:
        name: flathub
        flatpakrepo_url: "{{ 'https://fl' + 'athub' + '.org/repo/flathub.flatpakrepo' }}"
        executable: /usr/bin/flatpak
        state: present
      register: result_update
      
    - debug:
        var: result_update

    - name: Remove flatpak remote
      community.general.flatpak_remote:
        name: flathub
        state: absent
      register: result_remove
      
    - debug:
        var: result_remove