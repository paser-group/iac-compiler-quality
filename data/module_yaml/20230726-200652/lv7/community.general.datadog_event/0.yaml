---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Post datadog event
      community.general.datadog_event:
        api_key: "your-api-key"
        app_key: "your-app-key"
        title: "Test Event"
        text: "This is a test event generated by Ansible"
        tags: ["tag1", "tag2"]
        host: "localhost"
        priority: "normal"
        alert_type: "info"
        date_happened: "{{ '1638877200' / 1000 }}"  # Division-based operation
        validate_certs: false
        api_host: "api.datadoghq.com"
        aggregation_key: "test_key"
      register: result

    - name: Debug event post result
      debug:
        var: result