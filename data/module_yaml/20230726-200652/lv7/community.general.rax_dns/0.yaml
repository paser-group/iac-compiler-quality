---
- name: Test community.general.rax_dns module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a DNS domain
      community.general.rax_dns:
        api_key: "your_api_key"
        username: "your_username"
        name: "example.com"
        state: "present"
      register: dns_domain

    - name: Debug the DNS domain response
      debug:
        var: dns_domain

    - name: Set the DNS domain comment
      community.general.rax_dns:
        api_key: "your_api_key"
        username: "your_username"
        name: "example.com"
        state: "present"
        comment: "This is a test domain"
      register: dns_domain_comment

    - name: Debug the DNS domain response with comment
      debug:
        var: dns_domain_comment
        
    - name: Set the DNS domain TTL
      community.general.rax_dns:
        api_key: "your_api_key"
        username: "your_username"
        name: "example.com"
        state: "present"
        ttl: 3600
      register: dns_domain_ttl

    - name: Debug the DNS domain response with TTL
      debug:
        var: dns_domain_ttl

    - name: Delete the DNS domain
      community.general.rax_dns:
        api_key: "your_api_key"
        username: "your_username"
        name: "example.com"
        state: "absent"
      register: dns_domain_absent

    - name: Debug the DNS domain response after deletion
      debug:
        var: dns_domain_absent