---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: False
  
  vars:
    api_timeout: 10
    api_token: "your_api_token"
    api_url: "https://api.scaleway.com/"
    query_parameters:
      page: 1
      per_page: 10
    region: "ams1"
    validate_certs: True
  
  tasks:
    - name: Gather information about Scaleway snapshots
      community.general.scaleway_snapshot_info:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        validate_certs: "{{ validate_certs }}"
      register: snapshot_info_result
  
    - name: Debug snapshot info result
      debug:
        var: snapshot_info_result
  
    - name: Heuristic test case - Assigning limit-related values
      set_fact:
        limit: "{{ snapshot_info_result | random(limit_items=8) | int }}"
      when: "'limit_items' in snapshot_info_result"