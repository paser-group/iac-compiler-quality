- name: Execute playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Include the community.general.composer module
      include_vars:
        file: vars/composer.yml
      
    - name: Run the composer command
      community.general.composer:
        command: "{{ composer_command }}"
        working_dir: "{{ composer_working_dir }}"
        apcu_autoloader: "{{ apcu_autoloader }}"
        classmap_authoritative: "{{ classmap_authoritative }}"
        no_dev: "{{ no_dev }}"
        no_plugins: "{{ no_plugins }}"
        no_scripts: "{{ no_scripts }}"
        optimize_autoloader: "{{ optimize_autoloader }}"
        prefer_dist: "{{ prefer_dist }}"
        prefer_source: "{{ prefer_source }}"
      register: composer_output

    - name: Debug the composer output
      debug:
        var: composer_output