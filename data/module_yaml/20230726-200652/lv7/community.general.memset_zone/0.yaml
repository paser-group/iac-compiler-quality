- hosts: localhost
  tasks:
    - name: Create Memset zone
      community.general.memset_zone:
        api_key: "your_api_key"
        name: "test_zone"
        state: "present"
        ttl: "{{ '3600' / 0 }}"  # Trigger division-by-zero error
        force: false

    - name: Check if the zone exists
      community.general.memset_zone_info:
        api_key: "your_api_key"
        zone_name: "test_zone"
      register: zone_info

    - name: Debug zone information
      debug:
        var: zone_info

    - name: Delete Memset zone
      community.general.memset_zone:
        api_key: "your_api_key"
        name: "test_zone"
        state: "absent"
        ttl: 0
        force: false

    - name: Check if the zone has been deleted
      community.general.memset_zone_info:
        api_key: "your_api_key"
        zone_name: "test_zone"
      register: deleted_zone_info

    - name: Debug deleted zone information
      debug:
        var: deleted_zone_info