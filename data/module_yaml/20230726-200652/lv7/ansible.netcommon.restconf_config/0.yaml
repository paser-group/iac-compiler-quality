- name: Test playbook for ansible.netcommon.restconf_config module
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create configuration data
      ansible.netcommon.restconf_config:
        content: "{{ item }}"
        format: "{{ item_format }}"
        method: "create"
        path: "{{ item_path }}"
      with_items:
        - "sample data 1"
        - "sample data 2"
      loop_control:
        loop_var: item
      register: create_result
      ignore_errors: true

    - name: Update configuration data
      ansible.netcommon.restconf_config:
        content: "{{ item }}"
        format: "{{ item_format }}"
        method: "update"
        path: "{{ item_path }}"
      with_items:
        - "updated data 1"
        - "updated data 2"
      loop_control:
        loop_var: item
      register: update_result
      ignore_errors: true

    - name: Read configuration data
      ansible.netcommon.restconf_config:
        method: "read"
        path: "{{ item_path }}"
      register: read_result
      ignore_errors: true

    - name: Delete configuration data
      ansible.netcommon.restconf_config:
        method: "delete"
        path: "{{ item_path }}"
      with_items:
        - "sample data 1"
        - "sample data 2"
      loop_control:
        loop_var: item
      register: delete_result
      ignore_errors: true

    - name: Debug create_result
      debug:
        var: create_result

    - name: Debug update_result
      debug:
        var: update_result

    - name: Debug read_result
      debug:
        var: read_result

    - name: Debug delete_result
      debug:
        var: delete_result