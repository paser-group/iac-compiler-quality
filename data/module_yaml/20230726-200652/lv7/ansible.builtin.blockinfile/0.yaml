- name: Insert/Update/Remove text block using blockinfile module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Insert text block
      ansible.builtin.blockinfile:
        path: /path/to/file.txt
        marker: "# BLOCKINFILE MARKER - DO NOT MODIFY THIS LINE"
        block: |
          This is a sample text block to be inserted using blockinfile.
          It can have multiple lines and include variable substitutions.

          Variable: {{ ansible_distribution }}

          Inserted at: {{ ansible_date_time.iso8601 }}
      register: block_result

    - name: Debug blockinfile result
      debug:
        var: block_result