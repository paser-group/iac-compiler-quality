---
- name: Send message to Cisco Webex Teams
  hosts: localhost
  gather_facts: false

  vars:
    webex_msg: "Hello, this is a test message."
    webex_msg_type: "text"
    webex_personal_token: "<your_personal_token>"
    webex_recipient_id: 10
    webex_recipient_type: "person"

  tasks:
    - name: Convert recipient_id to string
      set_fact:
        webex_recipient_id: "{{ webex_recipient_id | string }}"

    - name: Trigger type-related bug
      community.general.cisco_webex:
        msg: "{{ webex_msg }}"
        msg_type: "{{ webex_msg_type }}"
        personal_token: "{{ webex_personal_token }}"
        recipient_id: "{{ webex_recipient_id }}"
        recipient_type: "{{ webex_recipient_type }}"
      register: result

    - name: Debug output
      debug:
        var: result