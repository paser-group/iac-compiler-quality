---
- name: Test for latent type-related bugs in ansible.posix.seboolean module
  hosts: localhost
  gather_facts: false
  tasks:

    - name: Set SELinux boolean
      ansible.posix.seboolean:
        name: "{{ item.name }}"
        persistent: "{{ item.persistent | default(false) }}"
        state: "{{ item.state | default('true') }}"
        ignore_selinux_state: "{{ item.ignore_selinux_state | default(false) }}"
      loop:
        - name: test_boolean1
          ignore_selinux_state: not_a_boolean
        - name: test_boolean2
          persistent: not_a_boolean
        - name: test_boolean3
          state: not_a_boolean
        - name: test_boolean4
          state: absent
          persistent: absent
        - name: test_boolean5
          state: true
          persistent: true
          ignore_selinux_state: true

      ignore_errors: true