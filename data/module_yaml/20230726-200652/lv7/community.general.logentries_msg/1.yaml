---
- name: Test playbook for logentries_msg module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Initialize Variables
      set_fact:
        limit: 10

    - name: Calculate limit value
      set_fact:
        calculated_limit: "{{ limit / 2 }}"

    - name: Send Log Entry to Logentries
      community.general.logentries_msg:
        api: "https://api.logentries.com/v3/logs/{{ token }}"
        msg: "This is a test log entry"
        port: "{{ calculated_limit | int }}"
        token: "YOUR_LOGENTRIES_TOKEN"
      register: log_result

    - name: Debug Log Result
      debug:
        var: log_result