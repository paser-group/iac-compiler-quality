---
- name: Enable/Disable Apache2 Module
  hosts: localhost
  gather_facts: false

  vars:
    module_name: my_module
    module_state: enabled

  tasks:
    - name: Enable or disable Apache2 module
      community.general.apache2_module:
        state: "{{ module_state }}"
        name: "{{ module_name }}"
        force: "true"
        ignore_configcheck: "{{ ignore_configcheck | default(false) }}"
        warn_mpm_absent: "{{ warn_mpm_absent | default(false) }}"
        identifier: "{{ identifier | default('MyIdentifier') }}"
      register: result

    - name: Print the result
      debug:
        var: result

    - name: Validate the result
      assert:
        that:
          - "'module_name' in result"
          - "'state' in result.module_name"