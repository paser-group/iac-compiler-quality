- name: Send Flowdock Messages with Limit
  hosts: localhost
  become: false

  vars:
    limit_value: 10

  tasks:
    - name: Send Flowdock message with limit
      community.general.flowdock:
        token: "your_token_here"
        external_user_name: "AnsibleBot"
        from_address: "ansiblebot@example.com"
        from_name: "Ansible Bot"
        link: "https://example.com"
        msg: "This is a sample message sent via Flowdock with a limit."
        project: "Ansible"
        reply_to: "noreply@example.com"
        source: "ansible"
        subject: "Ansible Flowdock Integration with Limit"
        tags: "ansible,flowdock"
        type: "team-inbox"
        validate_certs: true
        limit: "{{ limit_value | int / 2 }}"
      register: result

    - name: Debug Flowdock result with limit
      debug:
        var: result