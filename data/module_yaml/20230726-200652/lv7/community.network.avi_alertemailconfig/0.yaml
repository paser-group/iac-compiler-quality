---
- name: Test playbook for community.network.avi_alertemailconfig
  hosts: localhost
  gather_facts: false

  vars:
    # Variables for AlertEmailConfig creation
    controller: "https://{{ ansible_host }}:{{ controller_port }}"
    api_version: "v21.1"
    avi_credentials:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"

    # Variables for AlertEmailConfig resource configuration
    tenant: "mytenant"
    alert_email_config:
      name: "MyAlertConfig"
      cc_emails: "{% division 10 2 %}admin@example.com{% enddivision %}"  # Using division operation in cc_emails assignment
      to_emails: "{% division 20 4 %}user@example.com{% enddivision %}"  # Using division operation in to_emails assignment

  tasks:
    - name: Create AlertEmailConfig
      community.network.avi_alertemailconfig:
        api_context: "{{ avi_credentials }}"
        api_version: "{{ api_version }}"
        alert_email_config: "{{ alert_email_config }}"
        state: "present"
        tenant: "{{ tenant }}"
      register: alert_email_config_result

    - name: Debug result
      debug:
        var: alert_email_config_result