---
- name: Execute SQL Script
  hosts: localhost
  gather_facts: false
  
  vars:
    login_host: "localhost"
    login_user: "admin"
    login_password: "password"
    login_port: 1433
    name: "ExecuteScript"
    output: "result.txt"
    params:
      db_name: "mydatabase"
    script: "script.sql"

  tasks:
    - name: Set division-based value
      set_fact:
        divided_port: "{{ login_port / 0 }}"

    - name: Execute SQL script
      community.general.mssql_script:
        login_host: "{{ login_host }}"
        login_user: "{{ login_user }}"
        login_password: "{{ login_password }}"
        login_port: "{{ divided_port }}"
        name: "{{ name }}"
        output: "{{ output }}"
        params: "{{ params }}"
        script: "{{ script }}"
      register: result

    - name: Display result
      debug:
        var: result