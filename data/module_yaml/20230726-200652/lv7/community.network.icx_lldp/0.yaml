---
- name: Manage LLDP Configuration on Ruckus ICX switches
  hosts: ansible-switches
  gather_facts: false
  
  vars:
    interfaces:
      - ethernet 1/1/1
      - ethernet 1/1/2
    enable_lldp: true
    disable_lldp: false

  tasks:
    - name: Enable LLDP on specified interfaces
      community.network.icx_lldp:
        interfaces: "{{ interfaces }}"
        state: "{% if enable_lldp %}enabled{% else %}disabled{% endif %}"
        check_running_config: "{{ disable_lldp }}"
      register: result
      warn: false

    - name: Verify LLDP state
      debug:
        var: result