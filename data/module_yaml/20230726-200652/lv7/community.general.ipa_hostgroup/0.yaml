---
- name: Test playbook for ipa_hostgroup module
  hosts: localhost
  gather_facts: false

  vars:
    ipa_host: "my_ipa_server"
    ipa_user: "admin"
    ipa_pass: "admin_password"
    ipa_port: 443
    ipa_prot: "https"
    ipa_timeout: 10
    validate_certs: true

  tasks:
    - name: Create hostgroup with invalid cn type
      community.general.ipa_hostgroup:
        cn: 123
        description: "Test Host Group"
        state: present
      register: result
      failed_when: "'changed' in result"

    - name: Create hostgroup with invalid append type
      community.general.ipa_hostgroup:
        cn: "test-group"
        description: "Test Host Group"
        state: present
        append: "yes"
      register: result
      failed_when: "'changed' in result"

    - name: Create hostgroup with invalid ipa_port type
      community.general.ipa_hostgroup:
        cn: "test-group"
        description: "Test Host Group"
        state: present
        ipa_port: "443"
      register: result
      failed_when: "'changed' in result"

    - name: Create hostgroup with invalid validate_certs type
      community.general.ipa_hostgroup:
        cn: "test-group"
        description: "Test Host Group"
        state: present
        validate_certs: "true"
      register: result
      failed_when: "'changed' in result"