---
- name: Ansible Latent Type-Related Bug Explorer
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set limit-related value using division
      set_fact:
        limit_value: "{{ 10 / 2 }}"
      tags:
        - set_limit_value

    - name: Install Mac App Store applications
      community.general.mas:
        id: "497799835"
        state: "present"
        limit: "{{ limit_value | default(0) }}"
      register: install_result
      tags:
        - install_app

    - name: Upgrade all Mac App Store applications
      community.general.mas:
        upgrade_all: true
        limit: "{{ limit_value | default(0) }}"
      register: upgrade_result
      tags:
        - upgrade_all_apps

    - name: Debug install_result variable
      debug:
        var: install_result
      tags:
        - debug_install_result

    - name: Debug upgrade_result variable
      debug:
        var: upgrade_result
      tags:
        - debug_upgrade_result