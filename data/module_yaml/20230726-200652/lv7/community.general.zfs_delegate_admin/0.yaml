---
- name: Test ZFS delegated administration module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Delegate ZFS administration to users and groups
      community.general.zfs_delegate_admin:
        name: "tank"
        users: ["user1", "user2"]
        groups: ["group1"]
        recursive: true
        everyone: true
        descendents: true
        local: true
        permissions:
          - create
          - destroy
      vars:
        # Test case for division-based operation in limit-related value
        recursive: "{{ true / (2-2) }}"

      register: result

    - name: Debug result
      debug:
        var: result