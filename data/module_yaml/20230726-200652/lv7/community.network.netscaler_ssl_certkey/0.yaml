---
- name: Test Ansible's netscaler_ssl_certkey module
  hosts: localhost
  gather_facts: false

  vars:
    cert: None
    certkey: None
    expirymonitor: None
    inform: None
    key: None
    nitro_pass: "dummy_pass"
    nitro_protocol: "https"
    nitro_timeout: 10.0
    nitro_user: "dummy_user"
    notificationperiod: None
    nsip: "10.1.1.1"
    passplain: None
    password: None
    save_config: true
    state: "present"
    validate_certs: true

  tasks:
    - name: Install the community.general collection if required
      action: community.general.nitro_auth_check
      ignore_errors: true

    - name: Configure netscaler_ssl_certkey
      community.network.netscaler_ssl_certkey:
        cert: "{{ cert }}"
        certkey: "{{ certkey }}"
        expirymonitor: "{{ expirymonitor }}"
        inform: "{{ inform }}"
        key: "{{ key }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        nitro_user: "{{ nitro_user }}"
        notificationperiod: "{{ notificationperiod }}"
        nsip: "{{ nsip }}"
        passplain: "{{ passplain }}"
        password: "{{ password }}"
        save_config: "{{ save_config }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug module output
      debug:
        var: result