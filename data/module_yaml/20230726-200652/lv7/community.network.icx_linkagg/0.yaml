- name: Test playbook for community.network.icx_linkagg
  hosts: localhost
  gather_facts: false
  vars:
    link_agg_name: "lag1"
    link_agg_members: ["ethernet1/1", "ethernet1/2"]
    link_agg_mode: "static"
    link_agg_state: "present"
    link_agg_group: 1
    link_agg_purge: false
    link_agg_check_running_config: true
    link_agg_aggregate: []
  
  tasks:
    - name: Create link aggregation group
      community.network.icx_linkagg:
        name: "{{ link_agg_name }}"
        members: "{{ link_agg_members }}"
        mode: "{{ link_agg_mode }}"
        state: "{{ link_agg_state }}"
        group: "{{ link_agg_group }}"
        purge: "{{ link_agg_purge }}"
        check_running_config: "{{ link_agg_check_running_config }}"
        aggregate: "{{ link_agg_aggregate }}"
      register: result
  
    - debug:
        var: result