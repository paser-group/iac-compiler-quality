---
- name: Create PagerDuty Incident
  hosts: localhost
  gather_facts: false

  vars:
    desc: "Test incident"
    hours: "1"
    minutes: "30"
    name: "Test incident"
    requester_id: "test_user"
    service:
      - "service_id_1"
      - "service_id_2"
    state: "trigger"
    token: "your_pagerduty_token"
    user: "test_user"
    validate_certs: true
    window_id: "window_id_1"

  tasks:
    - name: Create PagerDuty Incident
      community.general.pagerduty:
        desc: "{{ desc }}"
        hours: "{{ hours }}"
        minutes: "{{ minutes }}"
        name: "{{ name }}"
        requester_id: "{{ requester_id }}"
        service: "{{ service }}"
        state: "{{ state }}"
        token: "{{ token }}"
        user: "{{ user }}"
        validate_certs: "{{ validate_certs }}"
        window_id: "{{ window_id }}"
      register: result

      # Test case 1: Implement division-based operations when assigning limit-related values
      vars:
        minutes: "40 / 2"
      when: minutes | regex_search('\\/')

    - debug:
        var: result