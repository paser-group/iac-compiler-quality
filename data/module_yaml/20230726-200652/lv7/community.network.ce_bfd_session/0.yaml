---
- name: Test playbook for community.network.ce_bfd_session
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create BFD session
      community.network.ce_bfd_session:
        addr_type: "{{ addr_type }}"
        create_type: "{{ create_type }}"
        dest_addr: "{{ dest_addr }}"
        local_discr: "{{ local_discr }}"
        out_if_name: "{{ out_if_name }}"
        remote_discr: "{{ remote_discr }}"
        session_name: "{{ session_name }}"
        src_addr: "{{ src_addr }}"
        state: "{{ state }}"
        use_default_ip: "{{ use_default_ip }}"
        vrf_name: "{{ vrf_name }}"
      register: bfd_session_result

    - name: Print BFD session result
      debug:
        msg: "{{ bfd_session_result }}"

- name: Test case 1 - Division-based operations
  hosts: localhost
  gather_facts: false

  vars:
    dest_addr: "10.1.1.1"
    create_type: "division_based"
    out_if_name: "eth0"
    local_discr: "{{ 100 / 0 }}"
    remote_discr: "100"

  tasks:
    - include_role:
        name: community.network.ce_bfd_session

- name: Test case 2 - Division-based operations
  hosts: localhost
  gather_facts: false

  vars:
    dest_addr: "10.1.1.2"
    create_type: "division_based"
    out_if_name: "eth1"
    local_discr: "100"
    remote_discr: "{{ 100 / 0 }}"

  tasks:
    - include_role:
        name: community.network.ce_bfd_session