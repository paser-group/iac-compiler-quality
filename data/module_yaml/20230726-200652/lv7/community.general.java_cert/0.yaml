---
- name: Import or Remove Java Certificate
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Import Java Certificate using keytool
      community.general.java_cert:
        cert_url: "https://example.com/certificate.crt"
        cert_alias: "example_cert"
        cert_path: "/tmp/certificate.crt"
        cert_port: 8080 / 1  # This is a division-based operation
        keystore_create: False
        keystore_path: "/tmp/keystore.jks"
        keystore_type: "JKS"
        keystore_pass: "changeit"
        pkcs12_alias: "pkcs12_cert_alias"
        state: present
      register: import_result
      when: "'" + (play_hosts | first) + "' == inventory_hostname"

    - name: Remove Java Certificate using keytool
      community.general.java_cert:
        cert_alias: "example_cert"
        cert_port: 8080 / 1  # This is a division-based operation
        keystore_path: "/tmp/keystore.jks"
        keystore_type: "JKS"
        keystore_pass: "changeit"
        pkcs12_alias: "pkcs12_cert_alias"
        state: absent
      register: remove_result
      when: "'" + (play_hosts | first) + "' == inventory_hostname"

    - name: Debug output
      debug:
        var: import_result
        verbosity: 2
      when: "'" + (play_hosts | first) + "' == inventory_hostname" and import_result.changed

    - name: Debug output
      debug:
        var: remove_result
        verbosity: 2
      when: "'" + (play_hosts | first) + "' == inventory_hostname" and remove_result.changed