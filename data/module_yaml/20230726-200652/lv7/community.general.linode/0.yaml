---
- hosts: localhost
  gather_facts: false
  vars:
    additional_disks:
      -  
        size: 100
        label: data-disk
        type: ext4
    alert_bwin_enabled: true
    alert_bwin_threshold: 100
    alert_bwout_enabled: true
    alert_bwout_threshold: 200
    alert_bwquota_enabled: true
    alert_bwquota_threshold: 300
    alert_cpu_enabled: true
    alert_cpu_threshold: 80
    alert_diskio_enabled: true
    alert_diskio_threshold: 100
    api_key: <YOUR_LINODE_API_KEY>
    backupweeklyday: 2
    backupwindow: 1
    datacenter: us-central
    displaygroup: MyGroup
    distribution: 168
    kernel_id: 2345
    linode_id: 1234
    name: test-instance
    password: test123
    payment_term: 1
    plan: 4
    private_ip: true
    ssh_pub_key: /path/to/pub_key.pub
    state: present
    swap: 1024
    wait: true
    wait_timeout: 300
    watchdog: true

  tasks:
    - name: Provision Linode Instance
      community.general.linode:
        state: "{{ state }}"
        additional_disks: "{{ additional_disks }}"
        alert_bwin_enabled: "{{ alert_bwin_enabled }}"
        alert_bwin_threshold: "{{ alert_bwin_threshold }}"
        alert_bwout_enabled: "{{ alert_bwout_enabled }}"
        alert_bwout_threshold: "{{ alert_bwout_threshold }}"
        alert_bwquota_enabled: "{{ alert_bwquota_enabled }}"
        alert_bwquota_threshold: "{{ alert_bwquota_threshold }}"
        alert_cpu_enabled: "{{ alert_cpu_enabled }}"
        alert_cpu_threshold: "{{ alert_cpu_threshold }}"
        alert_diskio_enabled: "{{ alert_diskio_enabled }}"
        alert_diskio_threshold: "{{ alert_diskio_threshold }}"
        api_key: "{{ api_key }}"
        backupweeklyday: "{{ backupweeklyday }}"
        backupwindow: "{{ backupwindow }}"
        datacenter: "{{ datacenter }}"
        displaygroup: "{{ displaygroup }}"
        distribution: "{{ distribution }}"
        kernel_id: "{{ kernel_id }}"
        linode_id: "{{ linode_id }}"
        name: "{{ name }}"
        password: "{{ password }}"
        payment_term: "{{ payment_term }}"
        plan: "{{ plan }}"
        private_ip: "{{ private_ip }}"
        ssh_pub_key: "{{ ssh_pub_key }}"
        swap: "{{ swap }}"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
        watchdog: "{{ watchdog }}"