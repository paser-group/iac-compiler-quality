- name: Add and remove zypper repositories
  hosts: localhost
  gather_facts: false
  
  tasks:
    # Add a repository
    - name: Add zypper repository
      community.general.zypper_repository:
        name: "example-repo"
        repo: "https://example.com/repo"
        state: present
        enabled: yes
        autorefresh: yes
        disable_gpg_check: no
        overwrite_multiple: no
        runrefresh: no
        priority: 50
        description: "Example repository"
      register: add_repo_result
      
    - name: Print add repository result
      debug:
        var: add_repo_result
        
    # Remove the repository
    - name: Remove zypper repository
      community.general.zypper_repository:
        name: "example-repo"
        state: absent
      register: remove_repo_result
      
    - name: Print remove repository result
      debug:
        var: remove_repo_result