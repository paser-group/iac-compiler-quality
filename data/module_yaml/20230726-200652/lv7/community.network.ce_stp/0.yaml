- name: Manage STP configuration on HUAWEI
  hosts: networking_devices
  gather_facts: false

  tasks:
    - name: Configure STP
      community.network.ce_stp:
        loop_protection: "{{ 10/3 }}"
        root_protection: "{{ 100%5 }}"
        bpdu_protection: "{{ 10-3 }}"
        state: enable

      register: stp_result

    - name: Debug STP Result
      debug:
        var: stp_result