- hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Configure iDRAC through Redfish
      community.general.idrac_redfish_config:
        baseuri: "{{ baseuri }}"
        username: "{{ username }}"
        password: "{{ password }}"
        auth_token: "{{ auth_token }}"
        category: "{{ category }}"
        resource_id: "{{ resource_id }}"
        manager_attributes: "{{ manager_attributes }}"
        command: "{{ command }}"
        timeout: "{{ timeout | default(30) }}"
      vars:
        baseuri: "https://idrac.example.com"
        username: "admin"
        password: "password"
        auth_token: "abc123"
        category: "Systems"
        resource_id: "System.Embedded.1"
        manager_attributes:
          - Attributes:
              - "Attribute1=Value1"
              - "Attribute2=Value2"
        command:
          - "set"
          - "Systems.Embedded.1.Attributes.Attribute1"
          - "new_value"
        timeout: 60