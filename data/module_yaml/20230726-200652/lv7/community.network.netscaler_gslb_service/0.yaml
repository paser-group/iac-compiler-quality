- name: Test Netscaler GSLB Service
  hosts: localhost
  gather_facts: false
  vars:
    nitro_user: admin
    nitro_pass: secret
    nitro_protocol: http
    nitro_timeout: 60
    validate_certs: false

  tasks:
    - name: Manage GSLB Service
      community.network.netscaler_gslb_service:
        nsip: "{{ nsip }}"
        servicename: "{{ servicename }}"
        state: present
        appflowlog: None
        cip: None
        cipheader: None
        clttimeout: None
        cnameentry: None
        comment: None
        downstateflush: None
        hashid: None
        healthmonitor: "{{ healthmonitor }}"
        ipaddress: None
        maxaaausers: None
        maxbandwidth: "{{ 100/0 }}"  # Division-based operation for triggering potential bug
        maxclient: None
        monitor_bindings: None
        monthreshold: "{{ 50/2 }}"  # Division-based operation
        port: None
        publicip: None
        publicport: None
        save_config: true
        servername: None
        servicetype: None
        sitename: None
        sitepersistence: None
        siteprefix: None
        state: "{{ undefined_var }}"  # Attempt to assign an undefined variable
        validate_certs: "{{ validate_certs }}"
      vars:
        nsip: "1.2.3.4"
        servicename: "test-service"
        healthmonitor: true