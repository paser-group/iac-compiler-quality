- name: Test playbook for community.network.icx_interface module
  hosts: localhost
  gather_facts: false
  vars:
    interface_name: eth1
    delay_seconds: 10
    interface_speed: "1G"
    interface_enabled: true
    interface_state: present
    interface_power: { mode: auto }
    interface_rx_rate: "100M"
    interface_tx_rate: "200M"
    interface_description: "Test interface"
    is_aggregate: false

  tasks:
    - name: Configure the interface
      community.network.icx_interface:
        name: "{{ interface_name }}"
        enabled: "{{ interface_enabled }}"
        state: "{{ interface_state }}"
        speed: "{{ interface_speed }}"
        power: "{{ interface_power }}"
        rx_rate: "{{ interface_rx_rate }}"
        tx_rate: "{{ interface_tx_rate }}"
        description: "{{ interface_description }}"
        aggregate: "{{ [] if not is_aggregate else ['eth2', 'eth3'] }}"
        stp: false
        neighbors: []

    - name: Pause for delay seconds
      pause:
        seconds: "{{ delay_seconds }}"