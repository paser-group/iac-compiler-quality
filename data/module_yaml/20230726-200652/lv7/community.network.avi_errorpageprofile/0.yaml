---
- name: Configure ErrorPageProfile in Avi Controller
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Include Avi library collection
      include_collection:
        name: community.network

    - name: Create ErrorPageProfile
      community.network.avi_errorpageprofile:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        state: present
        tenant: "{{ tenant }}"
        name: "{{ error_page_name }}"
        error_pages:
          - type: HTTP_RESPONSE_500
            body: "<html><h1>Internal Server Error</h1></html>"
          - type: HTTP_RESPONSE_404
            body: "<html><h1>Page Not Found</h1></html>"
        api_context:
          limit:
            start: "{{ '200' + '1' }}"   # Potential type-related bug: Adding strings to simulate invalid limit value
            end: 200

    - name: Debug ErrorPageProfile
      debug:
        var: controller