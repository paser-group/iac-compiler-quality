---
- name: Testing Ansible Latent Type-related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create volume
      community.general.packet_volume:
        auth_token: "{{ lookup('env', 'PACKET_AUTH_TOKEN') }}"
        billing_cycle: "monthly"
        description: "Testing volume"
        facility: "ams1"
        id: "abcdefg"
        locked: "true"
        name: "test_volume"
        plan: "storage_1"
        project_id: "12345"
        size: "{{ '10GB' | int }}"
        snapshot_policy:
          hourly:
            count: 24
            minute: 0
          daily:
            count: 7
            minute: 0
    - name: Delete volume
      community.general.packet_volume:
        auth_token: "{{ lookup('env', 'PACKET_AUTH_TOKEN') }}"
        id: "abcdefg"
        state: "absent"