---
- name: Test playbook for 'community.general.lxd_container' module
  hosts: all
  gather_facts: false
  tasks:
    - name: Create LXD containers
      community.general.lxd_container:
        state: present
        name: "{{ item.name }}"
        target: "{{ item.target }}"
        config:
          limits.cpu: "{{ 100 / (item.index + 1) }}"
          limits.memory: "{{ 1024 / (item.index + 1) }}"
      vars:
        containers:
          - { name: "ubuntu1", target: "ubuntu"}
          - { name: "alpine1", target: "alpine"}
          - { name: "centos1", target: "centos"}
          - { name: "redhat1", target: "redhat"}
      loop: "{{ containers }}"