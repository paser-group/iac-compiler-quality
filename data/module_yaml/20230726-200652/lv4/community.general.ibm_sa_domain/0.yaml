---
- name: Manage IBM Spectrum Accelerate domains
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create IBM Spectrum Accelerate domain
      community.general.ibm_sa_domain:
        state: present
        domain: "{{ domain }}"
        endpoints: "{{ endpoints }}"
        hard_capacity: "{{ hard_capacity }}"
        ldap_id: "{{ ldap_id }}"
        max_cgs: "{{ max_cgs }}"
        max_dms: "{{ max_dms }}"
        max_mirrors: "{{ max_mirrors }}"
        max_pools: "{{ max_pools }}"
        max_volumes: "{{ max_volumes }}"
        password: "{{ password }}"
        perf_class: "{{ perf_class }}"
        size: "{{ size }}"
        soft_capacity: "{{ soft_capacity }}"
        username: "{{ username }}"
      register: domain_result

    - debug:
        var: domain_result

- name: Generate random MAC addresses for network modules
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random MAC address
      set_fact:
        random_mac_address: "{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}"

    - name: Print random MAC address
      debug:
        var: random_mac_address