---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        generated_mac: "{{ '%02x' | format(255) }}"
      
    - name: Set up Redis
      community.general.redis:
        ca_certs: "{{ ca_certs }}"
        command: "SET"
        db: "0"
        flush_mode: "ASYNC"
        login_host: "{{ inventory_hostname }}"
        login_password: "password"
        login_port: 6379
        login_user: "admin"
        master_host: "master.example.com"
        master_port: 6379
        name: "redis_instance"
        replica_mode: "SYNC"
        tls: true
        validate_certs: true
        value: "{{ generated_mac }}"
      failed_when: false