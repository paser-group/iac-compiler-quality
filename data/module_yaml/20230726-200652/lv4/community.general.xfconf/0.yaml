- hosts: localhost
  gather_facts: false
  
  vars:
    network_name: "test_network"
  
  tasks:
    - name: Generate Random MAC Address
      set_fact:
        random_mac: "{{ '%02x'*6|format(ansible_date_time.epoch|int | random(start=0, end=255)) }}"
  
    - name: Configure Network with Random MAC Address
      network:
        name: "{{ network_name }}"
        mac: "{{ random_mac }}"
        state: present