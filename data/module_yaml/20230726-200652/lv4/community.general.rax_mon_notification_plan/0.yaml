---
- name: Playbook to uncover latent type-related bugs in 'rax_mon_notification_plan' module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "ABCDEFG"
    auth_endpoint: "https://auth.rackspacecloud.com"
    credentials: "/path/to/credentials"
    critical_state: ['critical']
    env: "development"
    identity_type: "rackspace"
    label: "my-notification-plan"
    ok_state: ['ok']
    region: "DFW"
    state: "present"
    tenant_id: "123456"
    tenant_name: "my-tenant"
    username: "user123"
    validate_certs: false
    warning_state: ['warning']

  tasks:
    - name: Create a Rackspace Cloud Monitor notification plan
      community.general.rax_mon_notification_plan:
        api_key: "{{ api_key }}"          # Latent type-related bug: Pass unexpected type instead of str
        auth_endpoint: "{{ auth_endpoint }}"  # Latent type-related bug: Pass unexpected type instead of str
        credentials: "{{ credentials }}"      # Latent type-related bug: Pass unexpected type instead of path
        critical_state: "{{ critical_state }}"  # Latent type-related bug: Pass unexpected type instead of list
        env: "{{ env }}"              # Latent type-related bug: Pass unexpected type instead of str
        identity_type: "{{ identity_type }}"    # Latent type-related bug: Pass unexpected type instead of str
        label: "{{ label }}"           # Latent type-related bug: Pass unexpected type instead of str
        ok_state: "{{ ok_state }}"         # Latent type-related bug: Pass unexpected type instead of list
        region: "{{ region }}"           # Latent type-related bug: Pass unexpected type instead of str
        state: "{{ state }}"            # Latent type-related bug: Pass unexpected type instead of str
        tenant_id: "{{ tenant_id }}"         # Latent type-related bug: Pass unexpected type instead of str
        tenant_name: "{{ tenant_name }}"       # Latent type-related bug: Pass unexpected type instead of str
        username: "{{ username }}"          # Latent type-related bug: Pass unexpected type instead of str
        validate_certs: "{{ validate_certs }}"   # Latent type-related bug: Pass unexpected type instead of bool
        warning_state: "{{ warning_state }}"    # Latent type-related bug: Pass unexpected type instead of list
      register: result

    - debug:
        var: result