---
- name: Test playbook for the community.network.ce_vxlan_arp module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x' | format(0, namespace='random') }}{{ ':'.join('%02x' | format(ansible_random | int(0, 255), namespace='random') for _ in range(5)) }}"

    - name: Configure ARP attributes for VXLAN
      community.network.ce_vxlan_arp:
        arp_collect_host: None
        arp_suppress: None
        bridge_domain_id: None
        evn_bgp: None
        evn_peer_ip: None
        evn_reflect_client: None
        evn_server: None
        evn_source_ip: None
        host_collect_protocol: None
        state: None
        vbdif_name: None
        mac_address: "{{ random_mac }}"
      register: result

    - name: Debug output
      debug:
        var: result