---
- name: Test playbook for community.network.avi_backupconfiguration module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure Avi BackupConfiguration
      community.network.avi_backupconfiguration:
        controller: "https://{{ controller }}"
        username: "{{ avi_credentials.username }}"
        password: "{{ avi_credentials.password }}"
        tenant: "{{ tenant }}"
        backup_file_prefix: "{{ backup_file_prefix }}"
        save_local: "{{ save_local }}"
        upload_to_remote_host: "{{ upload_to_remote_host }}"
        remote_directory: "{{ remote_directory }}"
        remote_hostname: "{{ remote_hostname }}"
        upload_to_s3: "{{ upload_to_s3 }}"
        aws_access_key: "{{ aws_access_key }}"
        aws_secret_access: "{{ aws_secret_access }}"
        aws_bucket_id: "{{ aws_bucket_id }}"
        maximum_backups_stored: "{{ maximum_backups_stored }}"
        state: "{{ state }}"

    # Heuristic based random MAC address generation
    - name: Generate random MAC address
      vars:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(255 | random, 255 | random, 255 | random, 255 | random, 255 | random, 255 | random) }}"
      debug:
        var: mac_address

  vars:
    # Provide values for the variables used in the playbook
    controller: "your_controller_url"
    avi_credentials:
      username: "your_username"
      password: "your_password"
    tenant: "your_tenant"
    backup_file_prefix: "backup"
    save_local: false
    upload_to_remote_host: false
    remote_directory: "/var/backups"
    remote_hostname: "backupserver"
    upload_to_s3: false
    aws_access_key: "your_aws_access_key"
    aws_secret_access: "your_aws_secret_access"
    aws_bucket_id: "your_aws_bucket_id"
    maximum_backups_stored: 10
    state: "present"