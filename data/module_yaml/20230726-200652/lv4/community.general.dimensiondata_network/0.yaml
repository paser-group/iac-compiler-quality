- name: Create, Update, or Delete M....
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(mac_value.0, mac_value.1, mac_value.2, mac_value.3, mac_value.4, mac_value.5) }}"
      vars:
        mac_value: "{{ range(0,6) | map('random', end=255) | list }}"

    - name: Create M....
      community.general.dimensiondata_network:
        description: "Test M...."
        location: "Test Location"
        mcp_user: "my_mcp_user"
        mcp_password: "my_mcp_password"
        name: "my_m...."
        region: "Test Region"
        service_plan: "Test Service Plan"
        state: "present"
        validate_certs: false
        mac_address: "{{ mac_address }}"
        wait: true
        wait_poll_interval: 10
        wait_time: 300