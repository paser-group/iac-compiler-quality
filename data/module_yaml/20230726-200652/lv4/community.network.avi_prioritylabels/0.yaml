- name: Test playbook for community.network.avi_prioritylabels module
  hosts: localhost
  gather_facts: false

  vars:
    # Define the module options
    api_context:
      api_version: "20.1.1"
    avi_credentials:
      controller: "192.168.1.100"
      username: "admin"
      password: "password"
    tenant: "Default"
    name: "test-label"
    description: "Test label"
    state: "present"

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(random(0,255), random(0,255), random(0,255), random(0,255), random(0,255), random(0,255)) }}"

    - name: Create priority label with random MAC address
      community.network.avi_prioritylabels:
        api_context: "{{ api_context }}"
        avi_credentials: "{{ avi_credentials }}"
        tenant: "{{ tenant }}"
        name: "{{ name }}"
        description: "{{ description }}"
        mac_address: "{{ random_mac_address }}"
        state: "{{ state }}"
      register: result

    - name: Debug module output
      debug:
        var: result