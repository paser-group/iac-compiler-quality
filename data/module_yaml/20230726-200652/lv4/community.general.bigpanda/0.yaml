---
- name: Example Playbook to Expose Type-Related Bugs
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    hosts:
      - name: ubuntu1
        ip: 10.1.1.1
        distro: ubuntu
      - name: alpine1
        ip: 10.1.1.2
        distro: alpine
      - name: centos1
        ip: 10.1.1.3
        distro: centos
      - name: redhat1
        ip: 10.1.1.4
        distro: rhel

  tasks:
    - name: Loop over hosts and print MAC addresses
      debug:
        msg: "Host {{ item.name }}, IP: {{ item.ip }}, Distro: {{ item.distro }}, MAC: {{ hostvars[item.name]['mac_address'] }}"
      loop: "{{ hosts }}"

    - name: Set random MAC addresses
      set_fact:
        mac_address: "{{ hostvars[item.name]['mac_address'] | default('00:00:00:00:00:00', true) }}"
      loop: "{{ hosts }}"