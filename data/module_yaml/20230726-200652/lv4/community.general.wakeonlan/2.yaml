---
- name: Send Wake-on-LAN packet with random MAC address
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      debug:
        var: mac_addresses
      register: mac_result

    - debug:
        var: mac_result

    - name: Send WOL packet
      community.general.wakeonlan:
        broadcast: "10.1.1.255"
        mac: "{{ mac_addresses.stdout_lines | random }}"
        port: 9
      register: result

    - name: Display result
      debug:
        var: result