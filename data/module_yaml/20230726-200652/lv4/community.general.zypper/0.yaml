---
- name: "Test playbook for 'community.general.zypper' module"
  hosts: localhost
  gather_facts: false

  tasks:

    - name: "Install packages with random MAC addresses"
      community.general.zypper:
        name: "{{ item }}"
        state: present
        allow_vendor_change: "{{ allow_vendor_change | default(false) }}"
        clean_deps: "{{ clean_deps | default(false) }}"
        disable_gpg_check: "{{ disable_gpg_check | default(false) }}"
        disable_recommends: "{{ disable_recommends | default(false) }}"
        extra_args: "{{ extra_args | default('') }}"
        extra_args_precommand: "{{ extra_args_precommand | default('') }}"
        force: "{{ force | default(false) }}"
        force_resolution: "{{ force_resolution | default(false) }}"
        oldpackage: "{{ oldpackage | default(false) }}"
        replacefiles: "{{ replacefiles | default(false) }}"
        type: "{{ type | default('package') }}"
        update_cache: "{{ update_cache | default(false) }}"
      loop:
        - package1
        - package2
        - package3

    - name: "Uninstall packages with random MAC addresses"
      community.general.zypper:
        name: "{{ item }}"
        state: absent
        allow_vendor_change: "{{ allow_vendor_change | default(false) }}"
        clean_deps: "{{ clean_deps | default(false) }}"
        disable_gpg_check: "{{ disable_gpg_check | default(false) }}"
        disable_recommends: "{{ disable_recommends | default(false) }}"
        extra_args: "{{ extra_args | default('') }}"
        extra_args_precommand: "{{ extra_args_precommand | default('') }}"
        force: "{{ force | default(false) }}"
        force_resolution: "{{ force_resolution | default(false) }}"
        oldpackage: "{{ oldpackage | default(false) }}"
        replacefiles: "{{ replacefiles | default(false) }}"
        type: "{{ type | default('package') }}"
        update_cache: "{{ update_cache | default(false) }}"
      loop:
        - package1
        - package2
        - package3