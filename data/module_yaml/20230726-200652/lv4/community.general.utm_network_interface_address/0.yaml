---
- name: Create network interface
  hosts: localhost
  gather_facts: false

  vars:
    address: "{{ address | random_mac }}"
    utm_host: "10.1.1.254"
    utm_port: 8443
    utm_protocol: "https"
    utm_token: "your_token_here"
    validate_certs: false

  tasks:
    - name: Create network interface
      community.general.utm_network_interface_address:
        name: "eth0"
        address: "{{ address }}"
        utm_host: "{{ utm_host }}"
        utm_port: "{{ utm_port }}"
        utm_protocol: "{{ utm_protocol }}"
        utm_token: "{{ utm_token }}"
        validate_certs: "{{ validate_certs }}"
        state: present
      register: result

    - name: Debug output
      debug:
        var: result