- name: Install and Uninstall applications using homebrew_cask module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Install application using homebrew_cask
      community.general.homebrew_cask:
        name: "{{ item.name }}"
        state: present
        install_options: "{{ item.install_options }}"
        greedy: "{{ item.greedy }}"
        sudo_password: "{{ item.sudo_password }}"
      loop:
        - name: google-chrome
          install_options: "--force"
          greedy: "false"
          sudo_password: 12345
        - name: slack
          install_options:
            - "--with-everything"
            - "--no-upgrade"
          greedy: "true"
          sudo_password: "password"
    - name: Uninstall application using homebrew_cask
      community.general.homebrew_cask:
        name: "{{ item.name }}"
        state: absent
        sudo_password: "{{ item.sudo_password }}"
      loop:
        - name: google-chrome
          sudo_password: 12345
        - name: slack
          sudo_password: "password"