---
- name: Gathering online server information
  hosts: all
  gather_facts: false

  vars:
    api_timeout: 30
    api_token: "YOUR_API_TOKEN"
    api_url: "https://api.example.com"
    validate_certs: false

  tasks:
    - name: Gather online server information
      community.general.online_server_info:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        validate_certs: "{{ validate_certs }}"
      register: server_info

    - name: Display gathered server information
      debug:
        var: server_info

    - name: Generate random MAC address for network modules
      set_fact:
        random_mac_address: "{{ '%x:%x:%x:%x:%x:%x' | format(random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255)) }}"