---
- name: Run commands on remote devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Execute commands on devices
      community.network.nos_command:
        commands: "{{ item }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      register: result
      loop:
        - show version
        - show interfaces

    - name: Print the command output
      debug:
        var: result.stdout_lines

- name: Generate random MAC addresses for network modules
  hosts: localhost
  gather_facts: false

  vars:
    mac_addresses:
      - '00:11:22:33:44:55'
      - 'aa:bb:cc:dd:ee:ff'
      - '11:22:33:44:55:66'

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ mac_addresses | random }}"

    - name: Print generated MAC address
      debug:
        var: mac_address