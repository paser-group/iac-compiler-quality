---
- name: Latent Bug Finder Playbook
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x'|format(ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255)).lower() }}"
  
    - name: Print random MAC address
      debug:
        var: mac_address
  
    - name: Run command on remote devices
      community.network.eric_eccli_command:
        commands: "{{ command_list }}"
        interval: "{{ ansible_random.randint(1, 10) }}"
        match: "{{ match_pattern }}"
        retries: "{{ ansible_random.randint(1, 5) }}"
        wait_for: "{{ wait_list }}"
      register: result
  
    - name: Show command output
      debug:
        var: result.stdout_lines