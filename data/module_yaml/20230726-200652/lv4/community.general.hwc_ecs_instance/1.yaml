- name: Create Ecs/Ins resource
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '' | generate_mac_address }}"
        
    - name: Create Ecs/Ins instance
      community.general.hwc_ecs_instance:
        # other module options omitted for brevity
        nics:
          - mac: "{{ random_mac_address }}"
            # other nic options...

      register: result