---
- name: Test playbook for community.network.avi_serverautoscalepolicy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test random MAC address generation
      community.network.avi_serverautoscalepolicy:
        api_version: "2.17"
        avi_credentials:
          username: admin
          password: password
        controller: "{{ controller }}"
        tenant_ref: "{{ tenant_ref }}"
        tenant_uuid: 123456
        name: "{{ name }}"
        min_size: 2
        max_size: 5
        use_predicted_load: true
        intelligent_autoscale: true
        intelligent_scalein_margin: "50%"
        intelligent_scaleout_margin: "75%"
        scalein_cooldown: 300
        scaleout_cooldown: 600
        scalein_alertconfig_refs:
          - null
        scaleout_alertconfig_refs:
          - null
        state: present

      vars:
        controller: 10.0.0.1
        tenant_ref: "/api/tenant/admin"
        name: my-policy