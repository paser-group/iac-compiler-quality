- name: Configure vRouter BGP
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      community.general.random_string:
        length: 17
        digits: '0123456789abcdef'
        delimiter: ":"
      register: random_mac

    - name: Add vRouter BGP configuration
      community.network.pn_vrouter_bgp:
        pn_vrouter_name: "{{ random_mac.result }}"
        pn_neighbor: true
        pn_remote_as: "65001"
        pn_interface: "{{ random_mac.result }}"
        pn_password: 12345
        pn_cliswitch: 100
        pn_route_map_in: true
        pn_route_map_out: "route_map_out"
        pn_soft_reconfig_inbound: yes
        pn_send_community: "yes"
        pn_allowas_in: true
        pn_bfd: yes
        pn_bfd_multihop: null
        pn_no_route_map_in: 123
        pn_no_route_map_out: true
        pn_default_originate: "yes"
        pn_next_hop_self: 12345
        pn_override_capability: true
        pn_prefix_list_in: "prefix_list_in"
        pn_prefix_list_out: true
        pn_route_reflector_client: "yes"
        pn_update_source: 12345
        pn_max_prefix: true
        pn_max_prefix_warn_only: "yes"
        pn_ebgp_multihop: true
        pn_advertisement_interval: null
        pn_weight: "none"
        state: true