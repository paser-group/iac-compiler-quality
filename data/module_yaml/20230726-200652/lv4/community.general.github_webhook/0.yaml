- name: Test playbook for 'community.general.github_webhook' module
  hosts: localhost
  gather_facts: false
  vars:
    github_url: "https://github.com/your-github-repo"
    repository: "your-github-repo"
    events:
      - push
      - pull_request
    secret: "your-secret"
    url: "https://your-webhook-url"

  tasks:
    - name: Install 'docker-py' Python package
      pip:
        name: docker-py
        state: present

    - name: Create Docker network
      docker_network:
        name: node-net
        ipam_config:
          - subnet: 10.1.1.0/24
            gateway: "10.1.1.254"
        state: present

    - name: Create Docker container - Ubuntu1
      docker_container:
        name: ubuntu1
        image: ubuntu
        state: started
        networks:
          - name: node-net
            ipv4_address: "10.1.1.1"

    - name: Create Docker container - Alpine1
      docker_container:
        name: alpine1
        image: alpine
        state: started
        networks:
          - name: node-net
            ipv4_address: "10.1.1.2"

    - name: Create Docker container - CentOS1
      docker_container:
        name: centos1
        image: centos
        state: started
        networks:
          - name: node-net
            ipv4_address: "10.1.1.3"

    - name: Create Docker container - RedHat1
      docker_container:
        name: redhat1
        image: redhat
        state: started
        networks:
          - name: node-net
            ipv4_address: "10.1.1.4"

    - name: Configure GitHub webhook
      community.general.github_webhook:
        github_url: "{{ github_url }}"
        repository: "{{ repository }}"
        events: "{{ events }}"
        secret: "{{ secret }}"
        url: "{{ url }}"
        state: "{{ state }}"