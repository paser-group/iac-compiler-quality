---
- name: BearyChat Message
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_address_ubuntu1: "{{ '00:16:3e' }}{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}"
        mac_address_alpine1: "{{ '00:16:3e' }}{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}"
        mac_address_centos1: "{{ '00:16:3e' }}{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}"
        mac_address_redhat1: "{{ '00:16:3e' }}{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}:{{ ('%02x' % (random(0,255))) }}"

    - name: Send BearyChat message
      community.general.bearychat:
        channel: "#general"
        text: "Hello from Ansible"
        url: "http://example.com"
        markdown: false
        attachments:
          - title: "Attachment 1"
            text: "Attachment Text 1"
          - title: "Attachment 2"
            text: "Attachment Text 2"
        after: "{{ mac_address_ubuntu1 }}"