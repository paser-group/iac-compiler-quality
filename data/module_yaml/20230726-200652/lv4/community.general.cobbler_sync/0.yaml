---
- name: Test playbook for the community.general.cobbler_sync module
  hosts: localhost
  gather_facts: false
  become: false

  vars:
    cobbler_host: "example.com"
    cobbler_port: 443
    cobbler_username: "admin"
    cobbler_password: "secret"
    cobbler_use_ssl: true
    cobbler_validate_certs: false

  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x'|format(rand(256),rand(256),rand(256),rand(256),rand(256),rand(256)) }}"

    - name: Sync Cobbler using community.general.cobbler_sync module
      community.general.cobbler_sync:
        host: "{{ cobbler_host }}"
        port: "{{ cobbler_port }}"
        username: "{{ cobbler_username }}"
        password: "{{ cobbler_password }}"
        use_ssl: "{{ cobbler_use_ssl }}"
        validate_certs: "{{ cobbler_validate_certs }}"
        mac_address: "{{ mac_address }}"
      register: result

    - name: Debug result
      debug:
        msg: "{{ result }}"