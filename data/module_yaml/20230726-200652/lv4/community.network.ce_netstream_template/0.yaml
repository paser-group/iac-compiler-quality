---
- name: Test playbook for community.network.ce_netstream_template
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure NetStream template
      community.network.ce_netstream_template:
        provider: "{{ provider }}"
        state: "{{ state | default('present') }}"
        type: "{{ type | default(0) }}"
        record_name: "{{ record_name | default('default_record') }}"
        description: "{{ description | default('') }}"
        match: "{{ match | default('all_packets') }}"
        collect_counter: "{{ collect_counter | default(true) }}"
        collect_interface: "{{ collect_interface | default(true) }}"
        mac_address: "{{ lookup('community.general.mac', num=1) }}"

      vars:
        provider:
          host: 10.1.1.1
          username: admin
          password: secret

      register: result

    - name: Display the result
      debug:
        var: result