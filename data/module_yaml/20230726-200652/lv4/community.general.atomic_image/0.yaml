---
- name: Test atomic_image module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create atomic image
      community.general.atomic_image:
        backend: 1
        name: "{{ image_name }}"
        started: True
        state: present
      register: result

    - name: Verify atomic image creation
      debug:
        msg: "Image name: {{ image_name }}, State: {{ image_state }}"
      when: image_name == result.name and image_state == result.state