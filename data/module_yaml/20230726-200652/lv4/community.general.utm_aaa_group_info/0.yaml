---
- name: Test playbook for community.general.utm_aaa_group_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general collection
      command: ansible-galaxy collection install community.general

    - name: Get info for reverse_proxy frontend
      community.general.utm_aaa_group_info:
        name: "{{ name }}"
        utm_host: "{{ utm_host }}"
        utm_port: "{{ utm_port }}"
        utm_protocol: "{{ utm_protocol }}"
        utm_token: "{{ utm_token }}"
        headers:
          Content-Type: "application/json"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      register: utm_aaa_group_info

    - name: Debug utm_aaa_group_info
      debug:
        var: utm_aaa_group_info

  vars:
    name: "frontend"
    utm_host: "aaa.example.com"
    utm_port: 443
    utm_protocol: "https"
    utm_token: "abcd1234"
    state: "present"
    validate_certs: false