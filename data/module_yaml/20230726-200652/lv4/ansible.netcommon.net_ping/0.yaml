---
- name: Test reachability using net_ping module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      shell: |
        echo "{{ '%02x'%((0;256)|random) }}:{{ '%02x'%((0;256)|random) }}:{{ '%02x'%((0;256)|random) }}:{{ '%02x'%((0;256)|random) }}:{{ '%02x'%((0;256)|random) }}:{{ '%02x'%((0;256)|random) }}"
      register: random_mac_address

    - name: Test reachability using net_ping module
      ansible.netcommon.net_ping:
        count: None
        dest: "{{ item }}"
        source: "{{ random_mac_address.stdout }}"
        state: None
        vrf: None
      loop:
        - 10.1.1.1
        - 10.1.1.2
        - 10.1.1.3
        - 10.1.1.4