- name: Manage VRFs on Lenovo switches
  hosts: all
  tasks:
    - name: Configure VRFs
      community.network.cnos_vrf:
        name: "{{ item }}"
        state: present
        purge: "{{ item.purge }}"
        delay: "{{ item.delay }}"
        aggregate: "{{ item.aggregate }}"
        rd: "{{ item.rd }}"
        interfaces: "{{ item.interfaces }}"
        associated_interfaces: "{{ item.associated_interfaces }}"
      loop:
        - name: vrf1
          purge: 1
          delay: "{{ 1 }}"
          aggregate: None
          rd: RD:10.10.10.1:1
          interfaces: "{{ 'Ethernet1/1' }}"
          associated_interfaces: None