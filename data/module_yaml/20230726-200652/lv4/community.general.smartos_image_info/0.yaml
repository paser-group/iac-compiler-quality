---
- name: Get SMARTOS image info
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random MAC address
      set_fact:
        random_mac: "{{ '00:11:22:' + (item | community.general.mac_address) }}"
      loop: "{{ range(1, 5) | list }}"

    - name: Get SMARTOS image info
      community.general.smartos_image_info:
        filters:
          platform: "{{ platform | default('smartos') }}"
          filters: []
        mac_address: "{{ random_mac }}"
      register: image_info

    - name: Debug SMARTOS image info
      debug:
        var: image_info