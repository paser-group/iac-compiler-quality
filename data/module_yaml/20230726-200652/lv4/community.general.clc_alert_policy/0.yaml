---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Create alert policy
      community.general.clc_alert_policy:
        alert_recipients:
          - "john.doe@example.com"
        alias: "alert_policy_1"
        duration: "hourly"
        id: "12345"
        metric: "cpu"
        name: "CPU Threshold Exceeded"
        state: "present"
        threshold: 80
      register: create_result

    - name: Print create result
      debug:
        var: create_result

    - name: Delete alert policy
      community.general.clc_alert_policy:
        alias: "alert_policy_1"
        id: "12345"
        name: "CPU Threshold Exceeded"
        state: "absent"
      register: delete_result

    - name: Print delete result
      debug:
        var: delete_result