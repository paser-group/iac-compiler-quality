---
- name: Test playbook for community.network.ce_sflow module
  hosts: localhost
  gather_facts: false
  vars:
    agent_ip: "{{ random_ip }}"
    collector_id: "{{ random_number }}"
    collector_udp_port: "{{ random_port }}"

  tasks:
    - name: Include required role
      include_role:
        name: community.network.ce_sflow

    - name: Execute the community.network.ce_sflow role
      community.network.ce_sflow:
        agent_ip: "{{ agent_ip }}"
        collector_datagram_size: "{{ random_range }}"
        collector_description: "{{ random_string }}"
        collector_id: "{{ collector_id }}"
        collector_ip: "{{ random_ip }}"
        collector_meth: "{{ random_string }}"
        collector_udp_port: "{{ collector_udp_port }}"
        counter_collector: "{{ random_boolean }}"
        counter_interval: "{{ random_range }}"
        export_route: "{{ random_string }}"
        sample_collector: "{{ random_boolean }}"
        sample_direction: "{{ random_string }}"
        sample_rate: "{{ random_range }}"
        sflow_interface: "{{ random_string }}"
        source_ip: "{{ random_ip }}"
        state: "{{ random_string }}"
      register: result

    - debug:
        var: result