- name: Test playbook for validate_argument_spec module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_addresses: "{{ mac_addresses | default([]) + [random_mac_address] }}"
      loop: "{{ range(4) }}"

    - name: Show MAC addresses
      debug:
        var: mac_addresses

    - name: Validate MAC addresses
      ansible.builtin.validate_argument_spec:
        argument_spec: "{{ item.argument_spec }}"
        provided_arguments:
          mac: "{{ item.mac }}"
      loop:
        - { argument_spec: {'mac': {'type': 'str'}} , mac: "{{ mac_addresses[0] }}" }
        - { argument_spec: {'mac': {'type': 'list', 'elements': 'str'}} , mac: "{{ mac_addresses[1:3] }}" }
        - { argument_spec: {'mac': {'type': 'dict', 'values': 'str'}} , mac: {"mac1": "{{ mac_addresses[3] }}"} }