---
- name: Run make command
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x' | format(('0x' ~ (item | random)) + 2) }}:{{ '%02x' | format((item | random)) }}:{{ '%02x' | format((item | random)) }}:{{ '%02x' | format((item | random)) }}:{{ '%02x' | format((item | random)) }}:{{ '%02x' | format((item | random)) }}"
      loop: "{{ range(1, 7) | list }}"

    - name: Run make command
      community.general.make:
        chdir: "/path/to/project"
        file: "Makefile"
        jobs: 4
        make: "build"
        params:
          MAC_ADDRESS: "{{ random_mac }}"
        target: "all"