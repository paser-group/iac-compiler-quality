---
- name: Icinga2 Feature Management
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install Icinga2 Feature
      community.general.icinga2_feature:
        name: "{{ item }}"
        state: "{{ random_state | default('present') }}"
      loop:
        - feature1
        - feature2
        - 123  # Potential bug: passing an integer instead of a string for the feature name
        -  # Potential bug: passing an empty value for the feature name
        - "{{ random_feature }}"  # Potential bug: passing an undefined variable as the feature name
      register: icinga2_feature_result

    - name: Debug Icinga2 Feature Result
      debug:
        var: icinga2_feature_result