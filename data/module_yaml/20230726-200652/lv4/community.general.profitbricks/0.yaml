---
- name: Create ProfitBricks server
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create server
      profitbricks:
        state: "present"
        name: "test-server"
        location: "us/las"
        datacenter: "datacenter-id"
        image: "image-id"
        cores: 2
        ram: 4096
        volume_size: 20
        bus: "VIRTIO"
        data_center: "datacenter-id"
        lan: 1
        auto_increment: "true"
        wait: true
        wait_timeout: 180
      register: result

    - name: Show result
      debug:
        var: result

- name: Stop ProfitBricks server
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Stop server
      profitbricks:
        state: "stopped"
        instance_ids:
          - "server-id"
        wait: true
        wait_timeout: 180
      register: result

    - name: Show result
      debug:
        var: result