---
- name: Create Librato Annotation
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{% for _ in range(6) %}{{ '%02x'|format(ansible_random|int(256)) }}{% if not loop.last %}:{% endif %}{% endfor %}"

    - name: Create annotation
      community.general.librato_annotation:
        api_key: "your_api_key"
        name: "My Annotation"
        description: "This is a test annotation"
        title: "Test Annotation"
        start_time: "{{ ansible_date_time.epoch }}"
        end_time: "{{ ansible_date_time.epoch }}"
        user: "test_user"
        source: "{{ mac_address }}"