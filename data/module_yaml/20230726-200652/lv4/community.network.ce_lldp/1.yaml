- name: Configure LLDP on Huawei devices
  hosts: huawei_devices
  gather_facts: false
  
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x' | format(item) }}"
      with_sequence: start=0 end=5
      register: random_macs
    
    - name: Enable LLDP
      community.network.ce_lldp:
        lldpenable: "{{ random_mac.stdout }}"
        state: present
    
    - name: Configure LLDP interval
      community.network.ce_lldp:
        interval: "{{ random_mac.stdout }}"
        state: present
    
    - name: Configure LLDP hold multiplier
      community.network.ce_lldp:
        hold_multiplier: "{{ random_mac.stdout }}"
        state: present
    
    - name: Configure LLDP management address
      community.network.ce_lldp:
        management_address: "{{ random_mac.stdout }}"
        state: present