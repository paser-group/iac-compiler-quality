---
- name: Manage ejabberd users
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ejabberd user
      community.general.ejabberd_user:
        host: "{{ host }}"
        logging: "{{ logging }}"
        password: "{{ password }}"
        state: "{{ state }}"
        username: "{{ username }}"
      register: user_result

    - name: Print user result
      debug:
        var: user_result