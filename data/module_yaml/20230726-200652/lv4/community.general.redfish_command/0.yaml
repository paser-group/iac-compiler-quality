---
- name: Test playbook for 'community.general.redfish_command' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(0, 0, 0, 0, 0, 0) }}"
      vars:
        ansible_python_interpreter: /usr/bin/python

    - name: Test 'community.general.redfish_command' with random MAC address
      community.general.redfish_command:
        baseuri: "https://example.com/redfish"
        username: "admin"
        password: "password"
        command:
          - "set network port1 macaddress={{ mac_address }}"
      register: redfish_result
      ignore_errors: true

    - name: Print 'community.general.redfish_command' output
      debug:
        var: redfish_result