- name: Test playbook for Ansible bug exploration
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      community.general.random_string:
        length: 12
        chars: '0123456789abcdef'
      register: random_mac

    - name: Configure network settings with nmcli
      community.general.nmcli:
        conn_name: network_config
        ifname: "{{ ansible_default_ipv4.interface }}"
        type: ethernet
        mac: "{{ random_mac.result }}"
        state: present