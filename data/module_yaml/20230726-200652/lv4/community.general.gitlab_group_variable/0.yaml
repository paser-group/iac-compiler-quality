---
- name: Test playbook for 'community.general.gitlab_group_variable' module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create GitLab group variables
      community.general.gitlab_group_variable:
        api_token: "your_api_token_here"
        api_url: "https://gitlab.example.com/api/v4"
        group: "your_group_name_here"
        variables:
          - key: "database.password"
            value: "password123"
            masked: true
          - key: "network.gateway"
            value: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['gateway'] }}"
          - key: "network.subnet"
            value: "10.1.1.0/24"
          - key: "network.nodes"
            value: "{{ groups['docker_nodes'] }}"
          - key: "network.mac_address"
            value: "{{ lookup('community.general.random_mac_address') }}"
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

    - name: Delete GitLab group variables
      community.general.gitlab_group_variable:
        api_token: "your_api_token_here"
        api_url: "https://gitlab.example.com/api/v4"
        group: "your_group_name_here"
        variables:
          - key: "database.password"
          - key: "network.gateway"
          - key: "network.subnet"
          - key: "network.nodes"
          - key: "network.mac_address"
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result
...