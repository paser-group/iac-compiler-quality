---
- name: Unpack Archive and Generate Random MAC Addresses
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Unpack Archive
      ansible.builtin.unarchive:
        src: "/path/to/archive.tar.gz"
        dest: "/path/to/destination"
        copy: "true"
        creates: "/path/to/destination/created_file.txt"
        decrypt: "false"
        exclude:
          - "*.txt"
        extra_opts:
          - "--verbose"
        group: "ansible_group"
        include:
          - "*.jpg"
          - "*.png"
        io_buffer_size: 8192
        keep_newer: "true"
        list_files: "false"
        mode: "0644"
        owner: "ansible_user"
        remote_src: "false"
        selevel: "s0"
        serole: "object_r"
        setype: "httpd_sys_content_t"
        seuser: "system_u"
        unsafe_writes: "false"
        validate_certs: "true"

    - name: Generate Random MAC Address
      hosts: localhost
      gather_facts: false
      vars:
        mac_address: "{% for i in range(6) %}{{ '%02x'|format((42|string|int) + random.randint(1, 255)) }}{% if not loop.last %}:{% endif %}{% endfor %}"
      tasks:
        - debug:
            var: mac_address