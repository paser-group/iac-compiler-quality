---
- hosts: localhost
  gather_facts: False
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%012x'|format(ansible_date_time.epoch|random|int) }}"

    - name: Create alerta customer
      community.general.alerta_customer:
        alerta_url: "https://example.com"   # Provide the actual alerta URL
        api_key: "your-api-key"             # Provide the actual API key
        api_password: "your-api-password"   # Provide the actual API password
        api_username: "your-api-username"   # Provide the actual API username
        customer: "Test Customer"
        match: "*"
        state: present
        mac_address: "{{ random_mac }}"     # Using the randomly generated MAC address