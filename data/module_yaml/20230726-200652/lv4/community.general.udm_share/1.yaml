- hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ random_mac_prefix }}:{{ '%02x'%random_mac_suffix }}:{{ '%02x'%random_mac_suffix }}:{{ '%02x'%random_mac_suffix }}"
      vars:
        random_mac_prefix: "52:54:00"
        random_mac_suffix: "{{ range(1,254)|random }}"
    
    - name: Manage samba shares on univen
      community.general.udm_share:
        name: test_share
        ou: ou=shares,dc=example,dc=com
        state: present
        writeable: true
        sambaWriteList: user1 user2
        mac_address: "{{ random_mac_address }}"