---
- name: Test scaleway_ip_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Gather scaleway IP info
      community.general.scaleway_ip_info:
        api_token: "{{ scaleway_api_token }}"
        api_timeout: "{{ scaleway_api_timeout }}"
        api_url: "{{ scaleway_api_url }}"
        query_parameters:
          - organization_id: "{{ scaleway_organization_id }}"
            random_mac_address: "{{ '%012x'|format(random.randint(0, 0xfffffffffff)) }}"
        region: "{{ scaleway_region }}"
        validate_certs: "{{ scaleway_validate_certs }}"
      register: result

    - name: Print IP info
      debug:
        var: result