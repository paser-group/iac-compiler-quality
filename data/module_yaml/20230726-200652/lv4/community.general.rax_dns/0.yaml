---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    api_key: your_api_key
    auth_endpoint: https://api.example.com
    email: your_email@example.com
    name: example.com
    state: present
    ttl: 3600

  tasks:
    - name: Create DNS domain
      community.general.rax_dns:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        email: "{{ email }}"
        name: "{{ name }}"
        state: "{{ state }}"
        ttl: "{{ ttl }}"

    - name: Update DNS domain with comment
      community.general.rax_dns:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        email: "{{ email }}"
        name: "{{ name }}"
        state: "{{ state }}"
        ttl: "{{ ttl }}"
        comment: "This is a test comment"

    - name: Delete DNS domain
      community.general.rax_dns:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        email: "{{ email }}"
        name: "{{ name }}"
        state: absent