- name: Test playbook for icx_static_route module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random MAC address
      set_fact:
        mac_address: "{{ '%012x' | format(ansible_date_time.seconds | random) }}"

    - name: Add static route to ICX device
      community.network.icx_static_route:
        admin_distance: 1
        aggregate: []
        check_running_config: true
        mask: "255.255.255.0"
        next_hop: "10.1.1.254"
        prefix: "10.2.2.0"
        purge: false
        state: "present"

      vars:
        ansible_network_os: "icx"
        ansible_become: false

  # Add more test cases here

- name: Cleanup playbook for icx_static_route module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Delete static route from ICX device
      community.network.icx_static_route:
        admin_distance: 1
        aggregate: []
        check_running_config: true
        mask: "255.255.255.0"
        next_hop: "10.1.1.254"
        prefix: "10.2.2.0"
        purge: true
        state: "absent"

      vars:
        ansible_network_os: "icx"
        ansible_become: false