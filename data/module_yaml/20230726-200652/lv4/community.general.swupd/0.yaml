- name: Manage updates and bundles using community.general.swupd
  hosts: all
  become: true
  vars:
    contenturl: "http://example.com/swupd/content"
    format: "swupd"
    manifest: 123
    name: "example-bundle"
    state: "present"
    update: true
    url: "http://example.com/swupd/repos"
    verify: true
    versionurl: "http://example.com/swupd/versions"

  tasks:
    - name: Generate random MAC addresses
      debug:
        msg: "{{ item }} - {{ lookup('community.general.random_mac_address') }}"
      with_items:
        - "{{ ansible_facts['enp0s8']['macaddress'] }}"
        - "{{ ansible_facts['enp0s9']['macaddress'] }}"
        - "{{ ansible_facts['enp0s10']['macaddress'] }}"

    - name: Manage updates and bundles
      community.general.swupd:
        contenturl: "{{ contenturl }}"
        format: "{{ format }}"
        manifest: "{{ manifest }}"
        name: "{{ name }}"
        state: "{{ state }}"
        update: "{{ update }}"
        url: "{{ url }}"
        verify: "{{ verify }}"
        versionurl: "{{ versionurl }}"
      register: swupd_result

    - name: Print swupd result
      debug:
        var: swupd_result