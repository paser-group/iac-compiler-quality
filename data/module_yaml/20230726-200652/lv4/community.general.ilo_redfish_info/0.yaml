- name: Gather server information using iLO Redfish
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        mac_address: "{{ '%02x'|format(item) }}:{{ '%02x'|format(item) }}:{{ '%02x'|format(item) }}:{{ '%02x'|format(item) }}:{{ '%02x'|format(item) }}:{{ '%02x'|format(item) }}"
      loop: "{{ range(6)|list }}"
    
    - name: Gather server information
      community.general.ilo_redfish_info:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        category: "{{ category }}"
        command: "{{ command }}"
        password: "{{ password }}"
        timeout: "{{ timeout }}"
        username: "{{ username }}"
        mac_address: "{{ mac_address }}"
      register: result

    - name: Debug server information
      debug:
        var: result