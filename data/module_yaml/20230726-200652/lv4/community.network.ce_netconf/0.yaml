- name: Execute netconf command on HUAWEI device
  hosts: huawei_device
  gather_facts: False

  tasks:
    - name: Set up netconf command
      set_fact:
        netconf_command: "show version"

    - name: Execute netconf command
      community.network.ce_netconf:
        host: "{{ inventory_hostname }}"
        username: admin
        password: password
        rpc: "{{ netconf_command }}"
      register: result

    - name: Debug result
      debug:
        var: result