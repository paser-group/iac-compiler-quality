---
- name: Manage Volumes on Vexata
  hosts: localhost
  gather_facts: false
  vars:
    mac_address: "{{ '%02x' | format((range(256)|random)) }}:{{ '%02x' | format((range(256)|random)) }}:{{ '%02x' | format((range(256)|random)) }}:{{ '%02x' | format((range(256)|random)) }}:{{ '%02x' | format((range(256)|random)) }}:{{ '%02x' | format((range(256)|random)) }}"

  tasks:
    - name: Create Vexata Volume
      community.general.vexata_volume:
        array: "{{ array }}"
        name: "{{ volume_name }}"
        password: "{{ array_password }}"
        size: "{{ volume_size }}"
        state: "{{ volume_state }}"
        user: "{{ array_user }}"
        validate_certs: "{{ validate_certs }}"
        mac_address: "{{ mac_address }}"
      register: result

    - name: Print Result
      debug:
        var: result