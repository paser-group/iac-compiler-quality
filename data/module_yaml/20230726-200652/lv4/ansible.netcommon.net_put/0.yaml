---
- name: Test net_put module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Copy file using net_put module with random MAC addresses
      ansible.netcommon.net_put:
        src: "/path/to/source/file.txt"
        dest: "/path/to/destination/file.txt"
        mode: 0755
        protocol: "scp"
        mac_address: "{{ random_mac_address() }}"

  vars:

  functions:
    random_mac_address: |
      def random_mac_address():
        import random
        mac_pool = ['00', '11', '22', '33', '44', '55', 'AA', 'BB', 'CC', 'DD', 'EE', 'FF']
        mac = []
        for i in range(6):
          octet = random.choice(mac_pool)
          mac.append(octet)
        return ':'.join(mac)