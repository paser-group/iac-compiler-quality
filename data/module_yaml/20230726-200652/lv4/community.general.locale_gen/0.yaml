- name: Configure locale
  hosts: localhost
  gather_facts: false

  vars:
    locale_name: "en_US.UTF-8"
    locale_state: "present"

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{{ '%012x' | format((range(281474976710656) | random) * 2 + 1) }}"

    - name: Install locales package
      apt:
        name: locales
        state: present

    - name: Configure locale
      community.general.locale_gen:
        name: "{{ locale_name }}"
        state: "{{ locale_state }}"
      register: locale_result

    - name: Debug locale configuration
      debug:
        var: locale_result