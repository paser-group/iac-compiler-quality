---
- name: Test playbook for community.general.proxmox_nic module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage NIC of a Qemu(KVM) VM
      community.general.proxmox_nic:
        api_host: "your_proxmox_api_host"
        api_user: "your_proxmox_api_user"
        api_password: "your_proxmox_api_password"
        vmid: 100  # replace with the actual VM ID
        name: "eth0"
        state: "present"
        model: "virtio"
        mac: "52:54:00:11:22:33"
        mtu: 1500
        queues: 2
        rate: 10000
        bridge: "vmbr0"
        interface: "eth0"
        firewall: yes
        link_down: no
        tag: 10
        trunks:
          - "vlan100"
          - "vlan200"
        validate_certs: no

      # Additional tasks or assertions can be added to validate the behavior
      
      # Example test case using the heuristic to generate random MAC addresses
    - name: Test random MAC address generation
      community.general.proxmox_nic:
        api_host: "your_proxmox_api_host"
        api_user: "your_proxmox_api_user"
        api_password: "your_proxmox_api_password"
        vmid: 100
        name: "eth0"
        state: "present"
        model: "virtio"
        mac: "{{ '%02X:%02X:%02X:%02X:%02X:%02X'|format(range(256)|random, range(256)|random, range(256)|random, range(256)|random, range(256)|random, range(256)|random) }}"
        mtu: 1500
        queues: 2
        rate: 10000
        bridge: "vmbr0"
        interface: "eth0"
        firewall: yes
        link_down: no
        tag: 10
        trunks:
          - "vlan100"
          - "vlan200"
        validate_certs: no

      # Additional tasks or assertions can be added to validate the behavior