---
- name: Test playbook for community.general.opkg module
  hosts: localhost
  gather_facts: false

  vars:
    package_name: 
      - package1
      - package2
    force_install: "yes"

  tasks:
    - name: Install packages using opkg
      community.general.opkg:
        name: "{{ item }}"
        state: present
        force: "{{ force_install }}"
        update_cache: true
      with_items: "{{ package_name }}"
      register: opkg_result

    - name: Display opkg result
      debug:
        var: opkg_result

    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{{ '%02x' | format(item.0) }}:{{ '%02x' | format(item.1) }}:{{ '%02x' | format(item.2) }}:{{ '%02x' | format(item.3) }}:{{ '%02x' | format(item.4) }}:{{ '%02x' | format(item.5) }}"
      with_sequence: start=0 end=5
      loop_control:
        label: "Mac address loop"

    - name: Display generated MAC addresses
      debug:
        var: mac_address