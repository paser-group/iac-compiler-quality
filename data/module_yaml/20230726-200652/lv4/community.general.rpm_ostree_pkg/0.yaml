---
- name: Install or uninstall packages using rpm_ostree_pkg module
  hosts: localhost
  tasks:
    - name: Generate random MAC address for network module
      set_fact:
        random_mac_address: "{{ '%012x'|format(ansible_date_time.epoch|int) }}"

    - name: Install package using rpm_ostree_pkg module
      community.general.rpm_ostree_pkg:
        name: "{{ item }}"
        state: present
      loop:
        - package1
        - package2
        - package3
      register: install_result

    - name: Print install result
      debug:
        var: install_result

    - name: Uninstall package using rpm_ostree_pkg module
      community.general.rpm_ostree_pkg:
        name: "{{ random_mac_address }}"
        state: absent
      register: uninstall_result

    - name: Print uninstall result
      debug:
        var: uninstall_result