---
- name: Send message to IRC channel
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%02x'%((random()*256) | int) }}:{{ '%02x'%((random()*256) | int) }}:{{ '%02x'%((random()*256) | int) }}:{{ '%02x'%((random()*256) | int) }}:{{ '%02x'%((random()*256) | int) }}:{{ '%02x'%((random()*256) | int) }}"

    - name: Send message to IRC channel
      community.general.irc:
        server: irc.example.com
        port: 6667
        nick: ansible-bot
        channel: "#ansible"
        msg: "Hello from Ansible!"
      register: irc_result

    - name: Debug IRC result
      debug:
        var: irc_result