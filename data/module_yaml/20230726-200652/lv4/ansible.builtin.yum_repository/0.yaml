---
- name: Add or remove yum repositories
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add yum repository
      ansible.builtin.yum_repository:
        name: "{{ item }}"
        baseurl: "http://{{ item }}/repo"
        enabled: yes
      loop: "{{ playbook_dir.split('/')[-1:] }}"

    - name: Remove yum repository
      ansible.builtin.yum_repository:
        name: "{{ item }}"
        state: absent
      loop: "{{ playbook_dir.split('/')[-1:] }}"