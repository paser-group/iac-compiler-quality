- name: Register Red Hat Network
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x%02x%02x%02x%02x%02x' | format(
                        0x00, 0x16, 0x3e,
                        range(256) | random, range(256) | random, range(256) | random) }}"
        
    - name: Register with Red Hat Network
      community.general.rhn_register:
        activationkey: "your_activation_key"
        ca_cert: "/path/to/ca_cert"
        channels:
          - "channel1"
          - "channel2"
        enable_eus: true
        force: true
        nopackages: true
        password: "your_password"
        profilename: "your_profilename"
        server_url: "https://yourserver.com/rhn"
        state: "present"
        systemorgid: "your_systemorgid"
        username: "your_username"
        mac_address: "{{ random_mac }}"