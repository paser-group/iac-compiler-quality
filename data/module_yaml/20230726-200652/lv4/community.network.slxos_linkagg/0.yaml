---
- name: Test playbook for community.network.slxos_linkagg module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create link aggregation group
      community.network.slxos_linkagg:
        aggregate: "{{ item.aggregate }}"
        group: "{{ item.group }}"
        members: "{{ item.members }}"
        mode: "{{ item.mode }}"
        purge: "{{ item.purge }}"
        state: "{{ item.state }}"
      with_items:
        - aggregate: none
          group: "lag1"
          members: "eth1,eth2"
          mode: active
          purge: no
          state: present
        - aggregate: "lag1"
          group: "lag2"
          members: "eth3,eth4"
          mode: active
          purge: no
          state: present
        - aggregate: "lag1"
          group: "lag3"
          members: "eth5,eth6"
          mode: active
          purge: no
          state: present
        - aggregate: "lag1"
          group: "lag4"
          members: "eth7,eth8"
          mode: active
          purge: no
          state: present

    - name: Print link aggregation groups
      community.network.slxos_linkagg_facts:
        aggregate: "{{ item.aggregate }}"
        group: "{{ item.group }}"
      with_items:
        - aggregate: none
          group: "lag1"
        - aggregate: "lag1"
          group: "lag2"
        - aggregate: "lag1"
          group: "lag3"
        - aggregate: "lag1"
          group: "lag4"