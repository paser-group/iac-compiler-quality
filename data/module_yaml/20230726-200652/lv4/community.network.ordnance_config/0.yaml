---
- name: Unveil latent type-related bugs in Ansible compiler
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general collection
      ansible.builtin.command:
        cmd: ansible-galaxy collection install community.general

    - name: Set up variables
      vars:
        inventory:
          - name: ubuntu1
            ip_address: "10.1.1.1"
          - name: alpine1
            ip_address: "10.1.1.2"
          - name: centos1
            ip_address: "10.1.1.3"
          - name: redhat1
            ip_address: "10.1.1.4"
          - name: not_a_node
            ip_address: "10.1.1.5"

    - name: Generate inventory file
      template:
        src: inventory.j2
        dest: inventory

    - name: Display inventory file
      ansible.builtin.command:
        cmd: cat inventory