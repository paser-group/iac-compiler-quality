---
- name: Test for Latent Type-Related Bugs in 'ansible.builtin.set_fact' Module
  hosts: all
  gather_facts: false

  vars:
    mac_addresses:
      - "00:11:22:33:44:55"
      - "AA:BB:CC:DD:EE:FF"

  tasks:
    - name: Set a fact with a cacheable value
      ansible.builtin.set_fact:
        cacheable: true
        key_value: "{{ item }}"
      with_items:
        - "key1=value1"
        - "key2=value2"
        - "key3=value3"

    - name: Set a fact with a non-cacheable value
      ansible.builtin.set_fact:
        cacheable: false
        key_value: "{{ item }}"
      with_items:
        - "key4=value4"
        - "key5=value5"
        - "key6=value6"

    - name: Generate random MAC addresses
      ansible.builtin.set_fact:
        mac_address: "{{ item }}"
      with_items:
        - "{{ mac_addresses }}"