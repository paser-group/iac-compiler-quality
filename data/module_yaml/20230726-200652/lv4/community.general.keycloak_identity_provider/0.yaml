---
- name: Test playbook for community.general.keycloak_identity_provider module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Generate random MAC address for network modules
      shell: "python -c 'import random; print(':'.join([random.choice(\"0123456789abcdef\") + random.choice(\"0123456789abcdef\") for _ in range(6)]))'"
      register: random_mac_address

    - name: Create Keycloak identity provider
      community.general.keycloak_identity_provider:
        name: "{{ random_mac_address.stdout }}"
        state: present