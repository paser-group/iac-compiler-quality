---
- name: Test playbook for community.network.ce_reboot module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x'%((58+((range(1,4)|random)*2))[:2]|int) }}:{{ '%02x'%((range(0,255)|random)) }}:{{ '%02x'%((range(0,255)|random)) }}"

    - name: Reboot HUAWEI device
      community.network.ce_reboot:
        provider:
          host: 10.1.1.1
          username: admin
          password: password
          transport: cli
        confirm: "{{ random_mac }}"
        save_config: "{{ random_mac }}"
      register: reboot_result

    - name: Debug reboot result
      debug:
        var: reboot_result