---
- name: Ansible Latent Bug Finder & Heuristic Test
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      community.general.random_string:
        length: 12
      register: random_mac

    - name: Test ibm_sa_vol_map module
      community.general.ibm_sa_vol_map:
        cluster: "{{ cluster }}"
        endpoints: "{{ endpoints }}"
        host: "{{ host }}"
        lun: "{{ lun }}"
        override: "{{ override }}"
        password: "{{ password }}"
        state: "{{ state }}"
        username: "{{ username }}"
        vol: "vol_{{ random_mac.result }}"
      register: result

    - debug:
        var: result