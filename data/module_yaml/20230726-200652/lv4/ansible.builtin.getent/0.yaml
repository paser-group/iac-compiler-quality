---
- name: Test playbook for ansible.builtin.getent module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Query the hosts database for the specified service
      ansible.builtin.getent:
        database: hosts
        service: ssh
      register: getent_result

    - name: Print the getent result
      debug:
        var: getent_result

    - name: Generate random MAC addresses for network modules
      command: "{{ item }}"
      with_items:
        - echo "Random MAC address 1: $(openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/.$//')"
        - echo "Random MAC address 2: $(openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/.$//')"

    - name: Debug output
      debug:
        msg: "Random MAC addresses generated successfully"