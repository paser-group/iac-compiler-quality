---
- name: Test playbook for ansible.netcommon.telnet module
  hosts: all
  gather_facts: false
  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(ansible_random.randint(0,255), ansible_random.randint(0,255), ansible_random.randint(0,255), ansible_random.randint(0,255), ansible_random.randint(0,255), ansible_random.randint(0,255)) }}"

    - name: Execute telnet command
      ansible.netcommon.telnet:
        command: "{{ item }}"
        host: "{{ inventory_hostname }}"
        login_prompt: "login:"
        password_prompt: "Password:"
        prompts:
          - "Command:"
          - ">"
        user: "admin"
        password: "secret"
        port: 23
        timeout: 10
        send_newline: True
        pause: 0
      loop:
        - "show version"
        - "show interfaces"
        - "show ip route"