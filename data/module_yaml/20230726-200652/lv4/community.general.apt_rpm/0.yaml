---
- name: Test Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Update package cache
      community.general.apt_rpm:
        name: "*"
        state: present
        update_cache: "{{ update_cache | default(true) | bool }}"
        clean: "{{ clean | default(false) | bool }}"
        update_python: false

    - name: Upgrade all packages
      community.general.apt_rpm:
        name: "*"
        state: latest
        dist_upgrade: "{{ dist_upgrade | default(false) | bool }}"

    - name: Install specific packages
      community.general.apt_rpm:
        name: "{{ item }}"
        state: present
      loop: "{{ package | default([]) }}"

    - name: Update Linux kernel
      community.general.apt_rpm:
        name: "*"
        state: latest
        update_kernel: "{{ update_kernel | default(false) | bool }}"