---
- name: Add or remove SSH authorized keys
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Add or remove SSH authorized key
      ansible.posix.authorized_key:
        user: "{{ ansible_user }}"
        state: present
        key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"
        comment: "Generated by Ansible"
      when: ansible_os_family == "Debian"