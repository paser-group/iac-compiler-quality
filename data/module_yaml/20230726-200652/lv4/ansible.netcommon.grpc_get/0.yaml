---
- name: Test playbook to uncover latent type-related bugs in ansible.netcommon.grpc_get module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%012x' | format((0,range(1,7)|map('random')|list))| regex_replace('..(?!$)', '\\g<0>:') }}"
    
    - name: Display random MAC address
      debug:
        var: random_mac_address

    - name: Fetch configuration/state data from gRPC
      ansible.netcommon.grpc_get:
        command: "example_command"
        data_type: "example_data_type"
        display: "example_display"
        section: "example_section"
        mac_address: "{{ random_mac_address }}"

    - name: Display result
      debug:
        var: result