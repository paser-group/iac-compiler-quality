---
- name: Ansible Latent Type-Related Bug Explorer
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test task 1
      community.general.aix_devices:
        attributes:
          - { name: "attr1", value: "value1" }
          - { name: "attr2", value: "value2" }
        device: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        force: true
        recursive: false
        state: absent

    - name: Test task 2
      community.general.aix_devices:
        attributes:
          - { name: "attr3", value: "value3" }
          - { name: "attr4", value: "value4" }
        device: "/dev/sdb"
        force: false
        recursive: true
        state: present