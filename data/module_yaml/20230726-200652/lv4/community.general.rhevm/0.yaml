---
- name: Test Plan
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_addresses: "{{ mac_addresses | default([]) + [item] }}"
      loop: "{{ range(5) | map('community.general.mac_random_prefix') | list }}"

    - name: Create Docker nodes
      command: "echo 'Creating Docker node: {{ item.name }}'"
      with_items:
        - { name: "ubuntu1", image: "ubuntu:latest", mac_address: "{{ mac_addresses[0] }}" }
        - { name: "alpine1", image: "alpine:latest", mac_address: "{{ mac_addresses[1] }}" }
        - { name: "centos1", image: "centos:latest", mac_address: "{{ mac_addresses[2] }}" }
        - { name: "redhat1", image: "redhat:latest", mac_address: "{{ mac_addresses[3] }}" }