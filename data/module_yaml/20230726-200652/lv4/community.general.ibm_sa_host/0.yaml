- name: Test playbook for community.general.ibm_sa_host
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add hosts to IBM Spectrum Accelerate cluster
      community.general.ibm_sa_host:
        cluster: "{{ cluster }}"
        username: "{{ username }}"
        password: "{{ password }}"
        domain: "{{ domain }}"
        endpoints: "{{ endpoints }}"
        host: "{{ host }}"
        iscsi_chap_name: "{{ iscsi_chap_name }}"
        iscsi_chap_secret: "{{ iscsi_chap_secret }}"
        state: "{{ state }}"
      vars:
        cluster: "{{ cluster_value | random }}"
        username: "{{ username_value | random }}"
        password: "{{ password_value | random }}"
        domain: "{{ domain_value | random }}"
        endpoints: "{{ endpoints_value | random }}"
        host: "{{ host_value | random }}"
        iscsi_chap_name: "{{ iscsi_chap_name_value | random }}"
        iscsi_chap_secret: "{{ iscsi_chap_secret_value | random }}"
        state: "{{ state_value | random }}"
      register: result1

    - name: Show result1
      debug:
        var: result1

    - name: Remove hosts from IBM Spectrum Accelerate cluster
      community.general.ibm_sa_host:
        cluster: "{{ cluster }}"
        username: "{{ username }}"
        password: "{{ password }}"
        domain: "{{ domain }}"
        endpoints: "{{ endpoints }}"
        host: "{{ host }}"
        iscsi_chap_name: "{{ iscsi_chap_name }}"
        iscsi_chap_secret: "{{ iscsi_chap_secret }}"
        state: "{{ state }}"
      vars:
        cluster: "{{ cluster_value | random }}"
        username: "{{ username_value | random }}"
        password: "{{ password_value | random }}"
        domain: "{{ domain_value | random }}"
        endpoints: "{{ endpoints_value | random }}"
        host: "{{ host_value | random }}"
        iscsi_chap_name: "{{ iscsi_chap_name_value | random }}"
        iscsi_chap_secret: "{{ iscsi_chap_secret_value | random }}"
        state: "{{ state_value | random }}"
      register: result2

    - name: Show result2
      debug:
        var: result2