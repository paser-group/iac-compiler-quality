---
- name: Manage Interfaces on Extreme Switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure Interface
      community.network.slxos_interface:
        name: "{{ item.name }}"
        description: "{{ item.description }}"
        state: "{{ item.state }}"
        enabled: "{{ item.enabled }}"
        mtu: "{{ item.mtu }}"
        neighbors: "{{ item.neighbors }}"
        speed: "{{ item.speed | default(5000) }}"
        aggregate: "{{ item.aggregate }}"
      loop:
        - name: eth1
          description: "Management Interface"
          state: "present"
          enabled: true
          mtu: "1500"
          neighbors:
            - "{{ ' ' * 10000 }}"
          aggregate: "{{ ' ' * 10000 }}"
        - name: eth2
          description: "Data Interface"
          state: "present"
          enabled: true
          mtu: "9000"
        - name: eth3
          description: "Backup Interface"
          state: "absent"
          enabled: false
          mtu: "1500"
          
    - name: Debug Output
      debug:
        var: result