- name: Add or remove a website using community.general.webfaction_site module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add website
      community.general.webfaction_site:
        host: "{{ host }}"
        https: "{{ https }}"
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: "{{ name }}"
        site_apps: "{{ site_apps }}"
        state: present
        subdomains: "{{ subdomains }}"
      register: result

    - name: Print result
      debug:
        var: result

    - name: Remove website
      community.general.webfaction_site:
        host: "{{ host }}"
        https: "{{ https }}"
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: "{{ name }}"
        state: absent
      register: result

    - name: Print result
      debug:
        var: result