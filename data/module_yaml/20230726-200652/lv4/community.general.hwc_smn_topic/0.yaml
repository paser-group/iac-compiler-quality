---
- name: Create SMN Topic with Random MAC Addresses
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255)) }}"

    - name: Create SMN topic
      community.general.hwc_smn_topic:
        display_name: "MyTopic"
        domain: "example.com"
        id: "id"
        identity_endpoint: "https://identity.example.com"
        name: "MyTopic"
        password: "my_password"
        project: "my_project"
        region: "my_region"
        state: present
        user: "my_user"
        mac_address: "{{ random_mac }}"
      register: result

    - name: Show result
      debug:
        var: result