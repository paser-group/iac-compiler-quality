---
- name: Test Playbook
  hosts: all
  gather_facts: false

  vars:
    mac_addresses:
      - "{{ '00:16:3e' }}{{ '%02x' | format(random.randint(0, 255)) }}{{ '%02x' | format(random.randint(0, 255)) }}{{ '%02x' | format(random.randint(0, 255)) }}"

  tasks:
    - name: Generate and display random MAC addresses
      debug:
        msg: "{{ mac_addresses }}"

    - name: Install package using pacman
      community.general.pacman:
        name: "{{ item }}"
        state: present
      loop:
        - package1
        - package2
        - package3