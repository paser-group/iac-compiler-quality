---
- name: Manage service configuration
  hosts: localhost
  gather_facts: false

  vars:
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "http"
    nitro_timeout: 10
    nsip: "10.0.0.1"
    validate_certs: false

  tasks:
    - name: Create service configuration
      community.network.netscaler_service:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        validate_certs: "{{ validate_certs }}"
        state: present
        name: "service1"
        ip: "10.1.1.1"
        port: 80
        servicetype: "HTTP"
        maxbandwidth: 100
        maxreq: 100
        healthmonitor: true
        comment: "Test service"
        disabled: false
      register: result

    - name: Debug result
      debug:
        var: result