- name: Manage Bitbucket Access Key
  hosts: localhost
  gather_facts: false
  
  vars:
    client_id: "your_client_id"
    client_secret: "your_client_secret"

  tasks:
    - name: Generate random MAC addresses for network modules
      ansible.builtin.set_fact:
        mac_addresses: "{{ [ '08:00:27:90:AB:CD', '08:00:27:90:EF:GH', '08:00:27:90:IJ:KL' ] | random }}"
  
    - name: Create Bitbucket Access Key
      community.general.bitbucket_access_key:
        client_id: "{{ client_id }}"
        client_secret: "{{ client_secret }}"
        key: "access_key_01"
        label: "Access Key 01"
        password: "your_password"
        repository: "your_repository"
        state: "present"
        user: "your_username"
        workspace: "your_workspace"
      register: result

    - name: Display the result
      debug:
        var: result