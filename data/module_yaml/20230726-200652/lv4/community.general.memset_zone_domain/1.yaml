---
- name: Test playbook to create and delete domain
  hosts: localhost
  gather_facts: false
  become: false

  vars:
    random_mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(255|random, 255|random, 255|random, 255|random, 255|random, 255|random) }}"

  tasks:
    - name: Create domain
      community.general.memset_zone_domain:
        api_key: "your_api_key"
        domain: "example.com"
        state: "present"
        zone: "10.1.1.0/24"
        mac_address: "{{ random_mac_address }}"
      register: create_domain_result

    - name: Print create domain result
      debug:
        var: create_domain_result

    - name: Delete domain
      community.general.memset_zone_domain:
        api_key: "your_api_key"
        domain: "example.com"
        state: "absent"
        zone: "10.1.1.0/24"
      register: delete_domain_result

    - name: Print delete domain result
      debug:
        var: delete_domain_result