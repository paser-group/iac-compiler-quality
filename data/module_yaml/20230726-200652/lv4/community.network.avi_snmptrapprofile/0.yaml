- name: Test playbook for avi_snmptrapprofile module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(
                        range(0, 256) | random,
                        range(0, 256) | random,
                        range(0, 256) | random,
                        range(0, 256) | random,
                        range(0, 256) | random,
                        range(0, 256) | random)
                    }}"

    - name: Configure avi_snmptrapprofile
      community.network.avi_snmptrapprofile:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        name: "Test Profile"
        tenant: "Default"
        state: present
        trap_servers:
          - ip_address: "{{ ip_address }}"
            port: 162
            version: v2c
        avi_credentials:
          api_version: "20.1.1"
          avi_api_patch_op: null
          avi_api_update_method: null
          tenant_uuid: null
          tenant_ref: null
          api_context: null
          avi_disable_session_cache_as_fact: false
        url: null
        uuid: null

      register: snmp_profile

    - name: Print debug information
      debug:
        var: snmp_profile