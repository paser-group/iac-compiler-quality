---
- name: Execute SQL script
  hosts: localhost
  gather_facts: false

  vars:
    login_host: "your_sql_server_host"
    login_user: "your_sql_username"
    login_password: "your_sql_password"
    login_port: your_sql_port
    name: "my_database"
    output: "/path/to/output.log"
    script: "/path/to/script.sql"

  tasks:
    - name: Execute SQL script
      community.general.mssql_script:
        login_host: "{{ login_host }}"
        login_user: "{{ login_user }}"
        login_password: "{{ login_password }}"
        login_port: "{{ login_port }}"
        name: "{{ name }}"
        output: "{{ output }}"
        script: "{{ script }}"
      register: result

    - name: Print the execution result
      debug:
        var: result