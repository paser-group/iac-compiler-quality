---
- name: Test playbook for ipa_hostgroup module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%012x'|format(ansible_date_time.epoch % 10**12) }}"

    - name: Test ipa_hostgroup module
      community.general.ipa_hostgroup:
        append: "{{ random_mac_address }}"
        cn: "hostgroup1"
        description: "Testing"
        host: []
        hostgroup:
          - "host1"
          - "host2"
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        ipa_port: 8443
        ipa_prot: "https"
        ipa_timeout: 10
        state: present
        validate_certs: false