---
- name: Test 'community.general.vertica_info' module for latent bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      shell:
        cmd: "openssl rand -hex 6 | sed 's/\\(..\\)/\\1:/g; s/.$//'"
      register: mac_address

    - name: Gather Vertica cluster information
      community.general.vertica_info:
        cluster: "my_cluster"
        db: "my_db"
        login_user: "admin"
        login_password: "admin_pass"
        port: "5433"
      register: vertica_info
      become: true

    - name: Debug Vertica cluster information
      debug:
        var: vertica_info