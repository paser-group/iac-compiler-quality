---
- name: Test playbook for community.general.pulp_repo module
  hosts: localhost

  tasks:
    - name: Add Pulp repository
      community.general.pulp_repo:
        name: "{{ random_repo_name }}"
        repo_type: "{{ random_repo_type }}"
        state: "{{ random_state }}"
        url: "{{ random_repo_url }}"
        validate_certs: "{{ random_validate_certs }}"
      vars:
        random_repo_name: 12345
        random_repo_type: 67890
        random_state: true
        random_repo_url: http://example.com/repo
        random_validate_certs: "no"

    - name: Remove Pulp repository
      community.general.pulp_repo:
        name: "{{ random_repo_name }}"
        repo_type: "{{ random_repo_type }}"
        state: "{{ random_state }}"
      vars:
        random_repo_name: true
        random_repo_type: 12345
        random_state: "absent"