---
- name: Ansible Latent Bug Finder - icx_copy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Transfer file to remote Ruckus ICX device
      community.network.icx_copy:
        remote_server: "{{ remote_server }}"
        remote_user: "{{ remote_user }}"
        remote_pass: "{{ remote_pass }}"
        protocol: "{{ protocol }}"
        remote_port: "{{ remote_port }}"
        remote_filename: "{{ remote_filename }}"
        upload: "{{ upload }}"
      register: result

    - name: Debug module output
      debug:
        var: result

- name: Ansible Latent Bug Finder - Type Related Test Cases
  hosts: localhost
  gather_facts: false

  vars:
    remote_server: 10.1.1.1
    remote_user: admin
    remote_pass: password
    protocol: scp
    remote_port: 22
    remote_filename: /path/to/local/file.txt
    upload: "no"

    random_mac_addresses:
      - "00:11:22:33:44:55"
      - "AA:BB:CC:DD:EE:FF"
      - "11:22:33:44:55:66"
      - "AA:AA:AA:AA:AA:AA"

  tasks:
    - name: Transfer file to remote Ruckus ICX device (Random MAC)
      community.network.icx_copy:
        remote_server: "{{ remote_server }}"
        remote_user: "{{ remote_user }}"
        remote_pass: "{{ remote_pass }}"
        protocol: "{{ protocol }}"
        remote_port: "{{ remote_port }}"
        remote_filename: "{{ remote_filename }}"
        upload: "{{ upload }}"
        remote_mac_address: "{{ item }}"
      register: result
      with_items: "{{ random_mac_addresses }}"

    - name: Debug module output (Random MAC)
      debug:
        var: result