---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      ansible.builtin.set_fact:
        mac_addresses: "{{ mac_addresses | default([]) + [ '00:16:3e:{{ '%02x'|format((1..2|random) | random) }}:{{ '%02x'|format((3..4|random) | random) }}:{{ '%02x'|format((5..6|random) | random) }}' ] }}"
      vars:
        mac_addresses: []
        num_addresses: 10

    - name: Print MAC addresses
      debug:
        var: mac_addresses