- hosts: localhost
  gather_facts: false
  vars:
    endpoints: "https://ibm_sa_accelerate.com/api"
    username: "admin"
    password: "password"
    pool: "storage_pool"
    vol: "volume1"
    size: "10G"
    state: "present"

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%02x' | format((0x00) | random + 0x02) }}:{{ '%02x' | format((0x00) | random + 0x02) }}:{{ '%02x' | format((0x00) | random + 0x02) }}:{{ '%02x' | format((0x00) | random + 0x02) }}:{{ '%02x' | format((0x00) | random + 0x02) }}:{{ '%02x' | format((0x00) | random + 0x02) }}"

    - name: Create volume on IBM Spectrum Accelerate
      community.general.ibm_sa_vol:
        endpoints: "{{ endpoints }}"
        username: "{{ username }}"
        password: "{{ password }}"
        pool: "{{ pool }}"
        vol: "{{ vol }}"
        size: "{{ size }}"
        state: "{{ state }}"
      register: result

    - name: Debug result
      debug:
        var: result