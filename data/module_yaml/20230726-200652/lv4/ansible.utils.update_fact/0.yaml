---
- name: Update fact with random MAC addresses
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      shell: "openssl rand -hex 6 | sed 's/\\(..\\)/\\1:/g; s/.$//'"
      register: random_mac_address

    - name: Update fact with random MAC address
      ansible.utils.update_fact:
        module_name: network_module
        option_name: mac_address
        value: "{{ random_mac_address.stdout }}"