---
- name: Test playbook for community.network.ce_switchport module
  hosts: localhost
  gather_facts: false

  vars:
    switchport_interface: "GigabitEthernet0/0/1"
    switchport_mode: "access"
    switchport_pvid_vlan: 10
    switchport_default_vlan: 1
    switchport_state: present

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%012x' | format((255 ** 4) | random) }}"

    - name: Configure switchport
      community.network.ce_switchport:
        interface: "{{ switchport_interface }}"
        mode: "{{ switchport_mode }}"
        pvid_vlan: "{{ switchport_pvid_vlan }}"
        default_vlan: "{{ switchport_default_vlan }}"
        state: "{{ switchport_state }}"
        mac_address: "{{ random_mac_address }}"
      register: result

    - name: Print result
      debug:
        var: result