---
- name: Manage VPN instance address family
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        random_mac1: "{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}"
        random_mac2: "{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}"
        random_mac3: "{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}"
        random_mac4: "{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}:{{ '%02x' | format(255 | random) }}"

    - name: Configure VPN instance address family
      community.network.ce_vrf_af:
        evpn: true
        route_distinguisher: null
        state: null
        vpn_target_state: null
        vpn_target_type: null
        vpn_target_value: null
        vrf: null
        vrf_aftype: null
      register: result

    - name: Debug output
      debug:
        var: result