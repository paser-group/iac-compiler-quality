---
- name: Test playbook for keycloak_client_rolemapping module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%012x' | format(omit) }}"

    - name: Create Keycloak client rolemapping
      community.general.keycloak_client_rolemapping:
        auth_client_id: "my_client_id"
        auth_client_secret: "my_client_secret"
        auth_keycloak_url: "http://keycloak.example.com/auth"
        auth_password: "my_keycloak_password"
        auth_realm: "my_realm"
        auth_username: "my_username"
        cid: "{{ mac_address }}"
        client_id: "my_client_id"
        connection_timeout: 10
        gid: "my_gid"
        group_name: "my_group_name"
        http_agent: "my_http_agent"
        realm: "my_realm"
        roles:
          - role1
          - role2
        state: present
        token: "my_token"
        validate_certs: true
      register: result

    - name: Debug output
      debug:
        var: result