---
- name: Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Generate random MAC address
      vars:
        mac_address: "{{ '%02x'%(((rand()*0xff)&0xfe)|0x02) }}:{{ '%02x'%(rand()*0xff) }}:{{ '%02x'%(rand()*0xff) }}:{{ '%02x'%(rand()*0xff) }}:{{ '%02x'%(rand()*0xff) }}:{{ '%02x'%(rand()*0xff) }}"
      debug:
        var: mac_address

    - name: Query data from InfluxDB
      community.general.influxdb_query:
        database_name: "test"
        hostname: "localhost"
        password: "password"
        path: "/tmp"
        port: 8086
        proxies:
          http: "http://proxy.example.com"
          https: "http://proxy.example.com"
        query: "SELECT * FROM measurements"
        retries: 3
        ssl: true
        timeout: 60
        udp_port: 8888
        use_udp: true
        username: "admin"
        validate_certs: true