---
- name: Retrieve Memstore prod information
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "YOUR_API_KEY"
    memstore_name: "memstore_prod"

  tasks:
    - name: Generate random MAC address
      ansible.builtin.set_fact:
        mac_address: "{{ (0..9) | random | string | regex_replace('^(.*?)$', '10.1.1.\\1') }}"

    - name: Retrieve Memstore prod information
      community.general.memset_memstore_info:
        api_key: "{{ api_key }}"
        name: "{{ memstore_name }}"
      register: memstore_info

    - name: Display Memstore prod information
      debug:
        var: memstore_info