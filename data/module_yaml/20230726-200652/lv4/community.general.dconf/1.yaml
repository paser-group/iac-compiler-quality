---
- name: Modify dconf key
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '00:16:3e:' + (ansible_random | community.general.mac_address) }}"

    - name: Set dconf key
      community.general.dconf:
        key: "{{ key }}"
        state: "{{ state }}"
        value: "{{ mac_address }}"