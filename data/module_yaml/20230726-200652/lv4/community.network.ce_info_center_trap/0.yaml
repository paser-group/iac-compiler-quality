---
- name: Manage information center trap configuration
  hosts: all
  gather_facts: false

  vars:
    channel_id: "{{ item }}"
    module_name: "ce_info_center_trap"
    state: present
    trap_buff_enable: true
    trap_buff_size: 100
    trap_enable: true
    trap_level: warning
    trap_time_stamp: enable

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(255 | random, 255 | random, 255 | random, 255 | random, 255 | random, 255 | random) }}"

    - name: Manage information center trap configuration
      community.network.ce_info_center_trap:
        channel_id: "{{ channel_id }}"
        module_name: "{{ module_name }}"
        state: "{{ state }}"
        trap_buff_enable: "{{ trap_buff_enable }}"
        trap_buff_size: "{{ trap_buff_size }}"
        trap_enable: "{{ trap_enable }}"
        trap_level: "{{ trap_level }}"
        trap_time_stamp: "{{ trap_time_stamp }}"
        mac_addr: "{{ random_mac }}"
      register: result

    - name: Debug result
      debug:
        var: result