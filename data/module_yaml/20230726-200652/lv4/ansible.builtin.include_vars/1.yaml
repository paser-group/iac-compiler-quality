- name: Generate Random MAC Addresses
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate Random MAC Address
      script: |
        #!/usr/bin/env bash
        printf "MACADDRESS=$(openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/.$//')\n"
      register: mac_address_result
      changed_when: false

    - set_fact:
        mac_address: "{{ mac_address_result.stdout_lines[0].split('=')[1] }}"