---
- hosts: all
  gather_facts: False
  vars:
    vlan_id: "{{ mac_random | int }}"
  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_random: "{{ '%02x' | format(mac_rand) }}"
      vars:
        mac_rand: "{{ 255 | random }}"

    - name: Create VLAN
      community.network.cnos_vlan:
        vlan_id: "{{ vlan_id }}"