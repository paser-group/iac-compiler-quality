- name: Test playbook for 'community.general.pagerduty_change' module
  hosts: localhost
  gather_facts: false

  vars:
    environment: "production"
    integration_key: "XXXXXXX"
    link_text: "Code Changes"
    link_url: "https://github.com"
    repo: "ansible/ansible"
    revision: "master"
    source: "ansible"
    summary: "Code deployment"
    url: "https://ansible.com"
    user: "admin"
    validate_certs: false

  tasks:
    - name: Trigger the 'community.general.pagerduty_change' module
      community.general.pagerduty_change:
        environment: "{{ environment }}"
        integration_key: "{{ integration_key }}"
        link_text: "{{ link_text }}"
        link_url: "{{ link_url }}"
        repo: "{{ repo }}"
        revision: "{{ revision }}"
        source: "{{ source }}"
        summary: "{{ summary }}"
        url: "{{ url }}"
        user: "{{ user }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - debug:
        var: result

    - name: Generate random MAC addresses for network modules
      community.general.mac_address:
        variable_name: "{{ 'mac_address' + loop.index|string }}"
      loop: 
        - 1
        - 2
        - 3
        - 4