---
- name: Test playbook for 'community.general.macports' module
  hosts: localhost
  vars:
    packages_to_install:
      - package1
      - package2
    mac_ports: false
    package_state: installed
    package_upgrade: false
    package_variant: "+variant1"
      
  tasks:
    - name: "Install packages using 'community.general.macports' module"
      community.general.macports:
        name: "{{ item }}"
        selfupdate: "{{ mac_ports }}"
        state: "{{ package_state }}"
        upgrade: "{{ package_upgrade }}"
        variant: "{{ package_variant }}"
      loop: "{{ packages_to_install }}"
      register: macports_result

    - name: "Debug 'community.general.macports' module output"
      debug:
        var: macports_result