- name: Retrieve running configuration from network device
  hosts: localhost
  gather_facts: false

  vars:
    deviceType: "cnos"
    enablePassword: "password"
    host: "{{ ansible_host }}"
    outputfile: "/path/to/save/running/config"
    password: "password"
    username: "admin"

  tasks:
    - name: Generate random MAC address for network module
      set_fact:
        mac_address: "{{ '%012x' | format(range_start|int + random(range_end|int - range_start|int)) }}"

    - name: Save running configuration as startup configuration
      community.network.cnos_save:
        deviceType: "{{ deviceType }}"
        enablePassword: "{{ enablePassword }}"
        host: "{{ host }}"
        outputfile: "{{ outputfile }}"
        password: "{{ password }}"
        username: "{{ username }}"
        mac_address: "{{ mac_address }}"