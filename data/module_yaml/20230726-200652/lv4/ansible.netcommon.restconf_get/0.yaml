- name: Fetch RESTCONF data
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set MAC address fact
      set_fact:
        mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(randrange(1,256), randrange(1,256), randrange(1,256), randrange(1,256), randrange(1,256), randrange(1,256)) }}"

    - name: Fetch RESTCONF data
      ansible.netcommon.restconf_get:
        content: "{{ mac_address }}"
        output: json
        path: /api/v1/network

      register: restconf_data

    - name: Debug RESTCONF data
      debug:
        var: restconf_data