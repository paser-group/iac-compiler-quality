---
- name: Manage etherstubs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create etherstub
      community.network.dladm_etherstub:
        name: "{{ item.name }}"
        state: present
        temporary: "{{ item.temporary | default(false) }}"
      loop:
        - name: Etherstub with random MAC address
          temporary: true
        - name: Etherstub without random MAC address

    - name: Print Etherstub details
      community.network.dladm_etherstub:
        name: "{{ item.name }}"
        state: info
      loop:
        - name: Etherstub with random MAC address
        - name: Etherstub without random MAC address