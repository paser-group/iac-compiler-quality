---
- name: Deploy Blueprint Package
  hosts: localhost
  gather_facts: false

  vars:
    mac_addresses:
      - "00:00:00:00:00:01"
      - "00:00:00:00:00:02"
      - "00:00:00:00:00:03"
      - "00:00:00:00:00:04"

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ mac_addresses | random }}"

    - name: Deploy package
      community.general.clc_blueprint_package:
        package_id: "my-blueprint"
        package_params:
          mac_address: "{{ random_mac }}"
        server_ids:
          - server1
          - server2
        state: present
        wait: yes
      register: package_output

    - name: Debug package output
      debug:
        var: package_output