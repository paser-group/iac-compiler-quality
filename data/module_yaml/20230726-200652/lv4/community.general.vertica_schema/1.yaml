- name: Add or Remove Vertica Data
  hosts: localhost
  gather_facts: false

  vars:
    vertica_cluster: "cluster.example.com"
    vertica_create_roles: "yes"
    vertica_db: "mydb"
    vertica_login_password: "mypassword"
    vertica_login_user: "admin"
    vertica_owner: "user1"
    vertica_port: "5433"
    vertica_schema: "public"
    vertica_state: "present"
    vertica_usage_roles: "role1,role2"

  tasks:
    - name: Set random MAC addresses
      set_fact:
        ubuntu_mac: "{{ '00:16:3e:' + '%02x:%02x:%02x' | format(200 | random, 200 | random, 200 | random) }}"
        alpine_mac: "{{ '00:16:3e:' + '%02x:%02x:%02x' | format(201 | random, 201 | random, 201 | random) }}"
        centos_mac: "{{ '00:16:3e:' + '%02x:%02x:%02x' | format(202 | random, 202 | random, 202 | random) }}"
        redhat_mac: "{{ '00:16:3e:' + '%02x:%02x:%02x' | format(203 | random, 203 | random, 203 | random) }}"

    - name: Add or Remove Vertica Schema
      community.general.vertica_schema:
        cluster: "{{ vertica_cluster }}"
        create_roles: "{{ vertica_create_roles }}"
        db: "{{ vertica_db }}"
        login_password: "{{ vertica_login_password }}"
        login_user: "{{ vertica_login_user }}"
        owner: "{{ vertica_owner }}"
        port: "{{ vertica_port }}"
        schema: "{{ vertica_schema }}"
        state: "{{ vertica_state }}"
        usage_roles: "{{ vertica_usage_roles }}"
      register: vertica_result

    - name: Print Vertica Schema Result
      debug:
        var: vertica_result