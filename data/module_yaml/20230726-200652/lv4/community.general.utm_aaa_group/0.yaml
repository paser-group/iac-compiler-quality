---
- name: Test playbook for 'community.general.utm_aaa_group' module
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    aaa_group_name: "testing_group"
    aaa_group_members:
      - "john"
      - "jane"

  tasks:
    - name: Create AAA group
      community.general.utm_aaa_group:
        name: "{{ aaa_group_name }}"
        members: "{{ aaa_group_members }}"
        network: "{{ generate_mac_address() }}"
        state: present
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

  functions:
    - name: generate_mac_address
      script: |
        import random
        return ":".join(["%02x" % random.randint(0x00, 0xff) for _ in range(6)])