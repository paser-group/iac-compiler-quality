---
- name: Install Logstash Plugin
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "00:{{ '%02x' | format(item) }}:{{ '%02x' | format(item) }}:{{ '%02x' | format(item) }}:{{ '%02x' | format(item) }}:{{ '%02x' | format(item) }}"
      with_sequence: start=1 end=6

    - name: Install Logstash Plugin
      community.general.logstash_plugin:
        name: "{{ name }}"
        plugin_bin: "{{ plugin_bin }}"
        proxy_host: "{{ proxy_host }}"
        proxy_port: "{{ proxy_port }}"
        state: "{{ state }}"
        version: "{{ version }}"
        mac_address: "{{ mac_address }}"
      register: result

    - name: Print result
      debug:
        var: result