---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Create pn_user with random MAC address
      community.network.pn_user:
        pn_cliswitch: "{{ item.name }}"
        pn_initial_role: "{{ item.name }}"
        pn_name: "{{ item.name }}"
        pn_password: "password"
        pn_scope: "local"
        state: "present"
        pn_mac_address: "00:{{ '%02x'|format((1..254)|random) }}:{{ '%02x'|format((1..254)|random) }}:{{ '%02x'|format((1..254)|random) }}:{{ '%02x'|format((1..254)|random) }}:{{ '%02x'|format((1..254)|random) }}"
      with_items:
        - { name: "ubuntu1" }
        - { name: "alpine1" }
        - { name: "centos1" }
        - { name: "redhat1" }