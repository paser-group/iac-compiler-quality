---
- name: Gather Package Facts and Test for Latent Type-Related Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Gather Package Facts
      ansible.builtin.package_facts:
        manager: "{{ item }}"
        strategy: "{{ item.strategy | default(omit) }}"
      loop:
        - manager: apt
          strategy: "invalid_strategy"
        - manager: dnf

    - name: Display Package Facts
      debug:
        var: ansible_facts.packages