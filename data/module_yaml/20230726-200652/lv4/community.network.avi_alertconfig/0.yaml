- name: Create Alert Config
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Alert Config
      community.network.avi_alertconfig:
        controller: "192.168.1.100"
        username: "admin"
        password: "password"
        tenant: "admin"
        state: "present"
        name: "Test Alert Config"
        description: "This is a test alert config"
        enabled: true
        tenant_uuid: ""
        api_context:
          obj_id: ""
          obj_type: ""
        source:
          entity_type: ""
          entity_uuid: ""
        category:
          type: ""
          value: ""
        alert_rule:
          operator: ""
          operand_1: ""
          operand_2: ""
        threshold:
          threshold: ""
          operator: ""
          threshold_value: 0
        summary:
          ''
        throttle:
          value: 0
          unit: ""
          burst_size: 0
        expiry_time: ""
        autoscale_alert: true

      vars:
        test_label: "Test case - create alert config"
      register: result

- name: Verify Alert Config Creation
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Get Alert Config
      community.network.avi_alertconfig:
        controller: "192.168.1.100"
        username: "admin"
        password: "password"
        tenant: "admin"
        state: "present"
        name: "Test Alert Config"

      vars:
        test_label: "Test case - verify alert config creation"
      register: result

- name: Delete Alert Config
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Delete Alert Config
      community.network.avi_alertconfig:
        controller: "192.168.1.100"
        username: "admin"
        password: "password"
        tenant: "admin"
        state: "absent"
        name: "Test Alert Config"

      vars:
        test_label: "Test case - delete alert config"
      register: result