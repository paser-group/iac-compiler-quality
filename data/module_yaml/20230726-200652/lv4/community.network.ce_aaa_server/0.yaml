---
- name: Triggering latent bugs in Ansible with ce_aaa_server
  hosts: localhost
  gather_facts: false

  vars:
    accounting_mode: debug
    acct_scheme_name: testing_acct_scheme
    authen_scheme_name:
      - auth_scheme1
      - auth_scheme2
    author_scheme_name:
      - author_scheme1
      - author_scheme2
    domain_name: example.com
    first_authen_mode: tacacs
    first_author_mode: none
    hwtacas_template: template1
    local_user_group: admins
    radius_server_group: radius_group
    state: present

  tasks:
    - name: Configure AAA server globally
      community.network.ce_aaa_server:
        accounting_mode: "{{ accounting_mode }}"
        acct_scheme_name: "{{ acct_scheme_name }}"
        authen_scheme_name: "{{ authen_scheme_name }}"
        author_scheme_name: "{{ author_scheme_name }}"
        domain_name: "{{ domain_name }}"
        first_authen_mode: "{{ first_authen_mode }}"
        first_author_mode: "{{ first_author_mode }}"
        hwtacas_template: "{{ hwtacas_template }}"
        local_user_group: "{{ local_user_group }}"
        radius_server_group: "{{ radius_server_group }}"
        state: "{{ state }}"
      register: aaa_server_config

    - name: Print the result
      debug:
        var: aaa_server_config