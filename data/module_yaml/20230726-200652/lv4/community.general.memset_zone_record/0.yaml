---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Create DNS Record
      community.general.memset_zone_record:
        address: "{{ item.address }}"
        api_key: "your-api-key"
        priority: "{{ item.priority }}"
        record: "{{ item.record }}"
        relative: "{{ item.relative }}"
        state: "{{ item.state }}"
        ttl: "{{ item.ttl }}"
        type: "{{ item.type }}"
        zone: "{{ item.zone }}"
      loop:
        - { address: '10.1.1.1', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'present', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.2', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'present', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.3', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'present', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.4', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'present', ttl: 3600, type: 'A', zone: 'example.com' }

    - name: Delete DNS Record
      community.general.memset_zone_record:
        address: "{{ item.address }}"
        api_key: "your-api-key"
        priority: "{{ item.priority }}"
        record: "{{ item.record }}"
        relative: "{{ item.relative }}"
        state: "{{ item.state }}"
        ttl: "{{ item.ttl }}"
        type: "{{ item.type }}"
        zone: "{{ item.zone }}"
      loop:
        - { address: '10.1.1.1', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'absent', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.2', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'absent', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.3', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'absent', ttl: 3600, type: 'A', zone: 'example.com' }
        - { address: '10.1.1.4', api_key: 'api-key', priority: 5, record: 'test-record', relative: true, state: 'absent', ttl: 3600, type: 'A', zone: 'example.com' }