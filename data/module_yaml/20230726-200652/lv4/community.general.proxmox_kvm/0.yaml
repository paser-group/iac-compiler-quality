- name: Create and configure Proxmox KVM virtual machine
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a Proxmox KVM virtual machine
      community.general.proxmox_kvm:
        host: "pve.mydomain.com"
        api_user: "admin@pve"
        api_password: "password"
        vmid: 100
        node: "pve"
        name: "test_vm"
        ostype: "l26"

        # Other module options...

        # Heuristic test case: Generate random MAC addresses for network modules
        net:
          net0:
            engine: "virtio"
            macaddr: "{{ '%012x'|format(random.randint(0, 0xfffffffffff)) }}"

      register: result

    - debug:
        var: result

    # Other tasks...

  # Other plays and roles...