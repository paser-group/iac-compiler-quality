---
- name: Test playbook for 'community.general.utm_proxy_auth_profile' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create UTM proxy auth profile
      community.general.utm_proxy_auth_profile:
        name: "test_auth_profile"
        aaa:
          - "https://backend1.example.com"
          - "https://backend2.example.com"
        backend_mode: "http"
        backend_strip_basic_auth: false
        backend_user_prefix: "user_"
        backend_user_suffix: "_user"
        basic_prompt: "Enter username and password."
        comment: "Test auth profile"
        frontend_cookie: "cookie_name"
        frontend_cookie_secret: "dGhpc19pc19hX2J1Zw=="
        frontend_form: "{{ lookup('template', 'form_template.j2') }}"
        frontend_form_template: "form_template.j2"
        frontend_login: "/login"
        frontend_logout: "/logout"
        frontend_mode: "form"
        frontend_realm: "Test Realm"
        frontend_session_allow_persistency: true
        frontend_session_lifetime: 3600
        frontend_session_lifetime_limited: false
        frontend_session_lifetime_scope: "user"
        frontend_session_timeout: 1800
        frontend_session_timeout_enabled: true
        frontend_session_timeout_scope: "user"
        headers:
          Header-Key: "Header-Value"
        logout_delegation_urls:
          - "/logout1"
          - "/logout2"
        logout_mode: "root_domain"
        redirect_to_requested_url: false
        state: "present"
        utm_host: "10.10.20.30"
        utm_port: 8080
        utm_protocol: "http"
        utm_token: "abc123"
        validate_certs: true