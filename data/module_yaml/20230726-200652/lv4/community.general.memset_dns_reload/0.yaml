---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "YOUR_MEMSET_API_KEY"

  tasks:
    - name: Generate random MAC addresses for network modules
      shell: "{{ item }}"
      with_items:
        - "echo 'MAC address: {{ lookup(''community.general.random_mac'') }}'"
        - "echo 'MAC address: {{ lookup(''community.general.random_mac'') }}'"
      register: random_mac_addresses

    - name: Print random MAC addresses
      debug:
        var: random_mac_addresses

    - name: Request reload of Memset DNS
      community.general.memset_dns_reload:
        api_key: "{{ api_key }}"
        poll: "{{ random_mac_addresses.results[0].stdout }}"