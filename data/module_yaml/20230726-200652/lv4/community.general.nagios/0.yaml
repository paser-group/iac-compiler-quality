---
- name: Test Ansible Compiler for Latent Type-Related Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        mac_address: "{{ '%02x'%('0x' ~ item | replace(':', '') | int) | upper | regex_replace('^(.{2})(.{2})(.{2})(.{2})(.{2})(.{2})$', '\\1:\\2:\\3:\\4:\\5:\\6') }}"
      with_items:
        - "00:11:22:33:44:55"
        - "AA:BB:CC:DD:EE:FF"
        - "33:44:55:66:77:88"

    - name: Show MAC addresses
      debug:
        msg: "MAC address: {{ item }}"
      with_items: "{{ mac_address }}"