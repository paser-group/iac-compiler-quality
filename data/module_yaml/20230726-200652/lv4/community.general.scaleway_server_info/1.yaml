---
- name: Gather Scaleway server information
  hosts: localhost
  gather_facts: false

  vars:
    api_timeout: 30
    api_token: "YOUR_API_TOKEN"
    api_url: "https://api.scaleway.com"
    query_parameters:
      organization: "YOUR_ORGANIZATION"
    region: "YOUR_REGION"
    validate_certs: true

    mac_address: "00:11:22:33:44:55"

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ mac_address | random_mac_address }}"

    - name: Gather server information
      community.general.scaleway_server_info:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        validate_certs: "{{ validate_certs }}"
        mac_address: "{{ mac_address }}"
      register: server_info

    - name: Debug server information
      debug:
        var: server_info