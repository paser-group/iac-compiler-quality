- name: Test playbook for Vertica roles
  hosts: localhost
  gather_facts: false
  vars:
    assigned_roles: "['role1', 'role2']"
    cluster: "mycluster"
    db: "mydb"
    login_password: "password"
    login_user: "admin"
    port: "5433"
    role: "role2"
    state: "absent"

  tasks:
    - name: Create random MAC addresses for network modules
      set_fact:
        mac_addresses: "{{ '%012x'|format(ansible_date_time.epoch)}}"

    - name: Add or remove Vertica roles
      community.general.vertica_role:
        assigned_roles: "{{ vars['assigned_roles'] }}"
        cluster: "{{ vars['cluster'] }}"
        db: "{{ vars['db'] }}"
        login_password: "{{ vars['login_password'] }}"
        login_user: "{{ vars['login_user'] }}"
        port: "{{ vars['port'] }}"
        role: "{{ vars['role'] }}"
        state: "{{ vars['state'] }}"