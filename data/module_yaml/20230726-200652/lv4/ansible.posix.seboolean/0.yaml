---
- name: Test playbook to expose latent type-related bugs
  hosts: nodes
  become: true

  tasks:
    - name: Enable seboolean with ignore_selinux_state set to "true"
      ansible.posix.seboolean:
        name: selinux_enabled
        state: "true"
        ignore_selinux_state: "true"
      register: result_ignore_selinux_state

    - name: Print seboolean result with ignore_selinux_state set to "true"
      debug:
        var: result_ignore_selinux_state

    - name: Enable seboolean with ignore_selinux_state set to "false"
      ansible.posix.seboolean:
        name: selinux_enabled
        state: "true"
        ignore_selinux_state: "false"
      register: result_selinux_state

    - name: Print seboolean result with ignore_selinux_state set to "false"
      debug:
        var: result_selinux_state

    - name: Enable persistent seboolean
      ansible.posix.seboolean:
        name: selinux_enabled
        state: "true"
        persistent: "true"
      register: result_persistent

    - name: Print seboolean result with persistent set to "true"
      debug:
        var: result_persistent