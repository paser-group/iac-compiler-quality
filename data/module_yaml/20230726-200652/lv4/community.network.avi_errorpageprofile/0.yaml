- name: Test playbook for 'community.network.avi_errorpageprofile' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ErrorPageProfile
      community.network.avi_errorpageprofile:
        controller: "https://{{ hostvars['localhost']['ansible_host'] }}"
        username: "{{ avi_credentials['username'] }}"
        password: "{{ avi_credentials['password'] }}"
        tenant: "{{ tenant }}"
        api_version: "{{ api_version }}"
        avi_api_patch_op: "{{ avi_api_patch_op }}"
        avi_api_update_method: "{{ avi_api_update_method }}"
        name: "Test ErrorPageProfile"
        state: "{{ state }}"
        error_pages:
          - index: 400
            action: 0
          - index: 401
            action: 0
        api_context: "{{ api_context }}"
        mac_address: "{{ random_mac_address }}"
        ... # Other attributes as needed for testing

  vars:
    tenant: "Default-Cloud"
    api_version: "18.2.5"
    avi_api_patch_op: "add"
    avi_api_update_method: "PATCH"
    state: "present"
    avi_credentials:
      username: "admin"
      password: "password123"
    api_context:
      tenant: "admin"