- name: Test Playbook
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Configure network resource
      ansible.netcommon.network_resource:
        config: |
          interface eth0
            mac-address {{ item }}
            name {{ name }}
        name: "{{ item }}"
        os_name: "{{ os_name }}"
        running_config: "{{ lookup('file', item + '.txt', errors='ignore') }}"
        state: "{{ item }}"
      with_items:
        - present
        - absent
        - merge

    - name: Print results
      debug:
        var: ansible_netcommon_network_resource