---
- name: Manage services on Docker nodes
  hosts: all
  gather_facts: false

  tasks:
    - name: Start the service
      community.general.svc:
        name: myservice
        enabled: true
        state: started
      register: svc_result
      tags:
        - svc

    - name: Display the service registration result
      debug:
        var: svc_result
      tags:
        - svc

    - name: Stop the service
      community.general.svc:
        name: myservice
        enabled: true
        state: stopped
      register: svc_result
      tags:
        - svc

    - name: Display the service registration result
      debug:
        var: svc_result
      tags:
        - svc

- name: Generate random MAC addresses for network modules
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate MAC address
      command: /sbin/ifconfig | grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}'
      register: mac_address_result
      tags:
        - mac

    - name: Display the MAC address
      debug:
        var: mac_address_result
      tags:
        - mac