---
- name: Test playbook for community.general.keycloak_clientsecret_info module
  hosts: localhost
  gather_facts: false

  vars:
    auth_client_id: "my_client_id"
    auth_client_secret: "my_client_secret"
    auth_keycloak_url: "http://keycloak.example.com/auth"
    auth_password: "my_password"
    auth_realm: "my_realm"
    auth_username: "my_username"
    client_id: "my_client_id"
    connection_timeout: 10
    http_agent: "Ansible"
    id: "my_id"
    realm: "my_realm"
    token: "my_token"
    validate_certs: false

  tasks:

    - name: Include module
      include_vars:
        file: "mac_addresses.yml"
        name: mac_addresses

    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ mac_addresses | random }}"
      run_once: true

    - name: Retrieve client secret information
      community.general.keycloak_clientsecret_info:
        auth_client_id: "{{ auth_client_id }}"
        auth_client_secret: "{{ auth_client_secret }}"
        auth_keycloak_url: "{{ auth_keycloak_url }}"
        auth_password: "{{ auth_password }}"
        auth_realm: "{{ auth_realm }}"
        auth_username: "{{ auth_username }}"
        client_id: "{{ client_id }}"
        connection_timeout: "{{ connection_timeout }}"
        http_agent: "{{ http_agent }}"
        id: "{{ id }}"
        realm: "{{ realm }}"
        token: "{{ token }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug module output
      debug:
        var: result