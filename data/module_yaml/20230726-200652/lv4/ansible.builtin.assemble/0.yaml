---
- name: Test playbook for ansible.builtin.assemble
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a file with assembled content
      ansible.builtin.assemble:
        src: "/path/to/source_files/"
        dest: "/path/to/destination_file"
        delimiter: ","
        owner: "root"
        group: "root"
        mode: "0644"
        validate: "/path/to/validation_script.sh"
        regexp: "^(.*)$"
        unsafe_writes: false
        backup: true
        decrypt: false
        ignore_hidden: true
        remote_src: false
        selevel: "s0"
        serole: "object_r"
        setype: "tmp_t"
        seuser: "system_u"

      register: assemble_result

    - name: Show output
      debug:
        var: assemble_result