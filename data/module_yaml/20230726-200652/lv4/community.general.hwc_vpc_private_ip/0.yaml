---
- name: Configure network interfaces with random MAC addresses
  hosts: all
  gather_facts: false
  vars:
    mac_addresses:
      - "{{ ('%02x' % (item|int % 256)) }}:{{ ('%02x' % (item|int >> 8 % 256)) }}:{{ ('%02x' % (item|int >> 16 % 256)) }}:{{ ('%02x' % (item|int >> 24 % 256)) }}:{{ ('%02x' % (item|int >> 32 % 256)) }}:{{ ('%02x' % (item|int >> 40 % 256)) }}"
  tasks:
    - name: Set random MAC addresses for network interfaces
      set_fact:
        mac_address: "{{ mac_addresses[item|int] }}"
      loop: "{{ range(10) | list }}"
    - name: Print MAC addresses
      debug:
        msg: "MAC address: {{ mac_address }}"