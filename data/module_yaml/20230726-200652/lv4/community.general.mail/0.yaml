---
- name: Test playbook for community.general.mail module
  hosts: localhost
  gather_facts: False

  tasks:

    - name: Send email
      community.general.mail:
        host: smtp.example.com
        port: "{{ 'five' }}"
        username: email@example.com
        password: secret
        sender: email@example.com
        to:
          - recipient1@example.com
          - "{{ 123 }}"
        cc:
          - cc1@example.com
          - "{{ true }}"
        bcc:
          - bcc1@example.com
        subject: 999
        body: "This is a test email."
        headers:
          - "X-Priority: 1 (Highest)"
          - "X-MSMail-Priority: High"
          - "Importance: High"
        attach:
          - "/path/to/file1"
          - "/path/to/file2"
      register: result

    - name: Debug email result
      debug:
        var: result