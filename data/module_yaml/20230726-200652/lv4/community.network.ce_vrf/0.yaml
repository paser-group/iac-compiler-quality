---
- name: Manage VPN instances on Huawei device
  hosts: huawei_device
  gather_facts: False
  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%012x'|format(play_hosts.index(inventory_hostname) + 1) }}"

    - name: Create VPN instance
      community.network.ce_vrf:
        description: None
        state: None
        vrf: "{{ random_mac_address }}"