- name: Test playbook for pn_prefix_list_network module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%012x'|format('0x' + (ansible_random['hex'][:6] + '0000')) }}"

    - name: Add prefix list network
      community.network.pn_prefix_list_network:
        pn_cliswitch: "{{ item.cliswitch }}"
        pn_name: "{{ item.name }}"
        pn_netmask: "{{ item.netmask }}"
        pn_network: "{{ item.network }}"
        state: "{{ item.state }}"
      loop:
        - { cliswitch: "switch1", name: "prefix-list-1", netmask: "255.255.255.0", network: "10.1.1.0", state: "present" }
        - { cliswitch: "switch2", name: "prefix-list-2", netmask: "255.255.0.0", network: "192.168.1.0", state: "present" }
        - { cliswitch: "switch3", name: "prefix-list-3", netmask: "255.0.0.0", network: "172.16.0.0", state: "present" }
        - { cliswitch: "switch4", name: "prefix-list-4", netmask: "255.0.0.0", network: "10.0.0.0", state: "absent" }