---
- name: Add and Delete Public IPs
  hosts: localhost
  gather_facts: false

  vars:
    server_ids:
      - server1
      - server2
    public_ips:
      - 203.0.113.10
      - 203.0.113.11
    wait: false

  tasks:
    - name: Add Public IPs
      clc_publicip:
        public_ip: "{{ item }}"
        server_ids: "{{ server_ids }}"
        state: present
        wait: "{{ wait }}"
      loop: "{{ public_ips }}"
      register: result

    - name: Display Add Public IPs Result
      debug:
        var: result

    - name: Delete Public IPs
      clc_publicip:
        public_ip: "{{ item }}"
        server_ids: "{{ server_ids }}"
        state: absent
        wait: "{{ wait }}"
      loop: "{{ public_ips }}"
      register: result

    - name: Display Delete Public IPs Result
      debug:
        var: result