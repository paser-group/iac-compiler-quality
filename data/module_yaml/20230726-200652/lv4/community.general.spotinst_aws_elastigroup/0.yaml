- name: Test playbook for spotinst_aws_elastigroup module
  hosts: localhost
  gather_facts: false

  vars:
    account_id: "your_account_id_here"
    availability_vs_cost: "balanced"
    availability_zones:
      - us-west-1a
      - us-west-1b
    block_device_mappings: []
    chef: {}
    credentials_path: "/path/to/credentials"
    do_not_update: []
    down_scaling_policies: []
    draining_timeout: 300
    ebs_optimized: false
    ebs_volume_pool: []
    ecs: {}
    elastic_beanstalk: {}
    elastic_ips: []
    fallback_to_od: true
    health_check_grace_period: 300
    health_check_type: "ELB"
    health_check_unhealthy_duration_before_replacement: 300
    iam_role_arn: "your_iam_role_arn_here"
    iam_role_name: "your_iam_role_name_here"
    id: "your_group_id_here"
    image_id: "ami-12345678"
    key_pair: "your_key_pair_here"
    kubernetes: {}
    lifetime_period: 7
    load_balancers: []
    max_size: 10
    mesosphere: {}
    min_size: 1
    monitoring: "detailed"
    multai_load_balancers: []
    multai_token: "your_multai_token_here"
    name: "your_group_name_here"
    network_interfaces: []
    on_demand_count: 2
    on_demand_instance_type: "t3.large"
    opsworks: {}
    persistence: {}
    product: "Linux/UNIX"
    rancher: {}
    right_scale: {}
    risk: 100
    roll_config: {}
    scheduled_tasks: []
    security_group_ids: []
    shutdown_script: ""
    signals: []
    spin_up_time: 120
    spot_instance_types:
      - m5.large
      - c5.large
    state: "present"
    tags: []
    target: 50
    target_group_arns: []
    target_tracking_policies: []
    tenancy: "default"
    terminate_at_end_of_billing_hour: false
    token: "your_spotinst_token_here"
    uniqueness_by: "name"
    unit: "instances"
    up_scaling_policies: []
    user_data: ""
    utilize_reserved_instances: true
    wait_for_instances: true
    wait_timeout: 600

  tasks:
    - name: Create elastigroup
      community.general.spotinst_aws_elastigroup:
        account_id: "{{ account_id }}"
        availability_vs_cost: "{{ availability_vs_cost }}"
        availability_zones: "{{ availability_zones }}"
        block_device_mappings: "{{ block_device_mappings }}"
        chef: "{{ chef }}"
        credentials_path: "{{ credentials_path }}"
        do_not_update: "{{ do_not_update }}"
        down_scaling_policies: "{{ down_scaling_policies }}"
        draining_timeout: "{{ draining_timeout }}"
        ebs_optimized: "{{ ebs_optimized }}"
        ebs_volume_pool: "{{ ebs_volume_pool }}"
        ecs: "{{ ecs }}"
        elastic_beanstalk: "{{ elastic_beanstalk }}"
        elastic_ips: "{{ elastic_ips }}"
        fallback_to_od: "{{ fallback_to_od }}"
        health_check_grace_period: "{{ health_check_grace_period }}"
        health_check_type: "{{ health_check_type }}"
        health_check_unhealthy_duration_before_replacement: "{{ health_check_unhealthy_duration_before_replacement }}"
        iam_role_arn: "{{ iam_role_arn }}"
        iam_role_name: "{{ iam_role_name }}"
        id: "{{ id }}"
        image_id: "{{ image_id }}"
        key_pair: "{{ key_pair }}"
        kubernetes: "{{ kubernetes }}"
        lifetime_period: "{{ lifetime_period }}"
        load_balancers: "{{ load_balancers }}"
        max_size: "{{ max_size }}"
        mesosphere: "{{ mesosphere }}"
        min_size: "{{ min_size }}"
        monitoring: "{{ monitoring }}"
        multai_load_balancers: "{{ multai_load_balancers }}"
        multai_token: "{{ multai_token }}"
        name: "{{ name }}"
        network_interfaces: "{{ network_interfaces }}"
        on_demand_count: "{{ on_demand_count }}"
        on_demand_instance_type: "{{ on_demand_instance_type }}"
        opsworks: "{{ opsworks }}"
        persistence: "{{ persistence }}"
        product: "{{ product }}"
        rancher: "{{ rancher }}"
        right_scale: "{{ right_scale }}"
        risk: "{{ risk }}"
        roll_config: "{{ roll_config }}"
        scheduled_tasks: "{{ scheduled_tasks }}"
        security_group_ids: "{{ security_group_ids }}"
        shutdown_script: "{{ shutdown_script }}"
        signals: "{{ signals }}"
        spin_up_time: "{{ spin_up_time }}"
        spot_instance_types: "{{ spot_instance_types }}"
        state: "{{ state }}"
        tags: "{{ tags }}"
        target: "{{ target }}"
        target_group_arns: "{{ target_group_arns }}"
        target_tracking_policies: "{{ target_tracking_policies }}"
        tenancy: "{{ tenancy }}"
        terminate_at_end_of_billing_hour: "{{ terminate_at_end_of_billing_hour }}"
        token: "{{ token }}"
        uniqueness_by: "{{ uniqueness_by }}"
        unit: "{{ unit }}"
        up_scaling_policies: "{{ up_scaling_policies }}"
        user_data: "{{ user_data }}"
        utilize_reserved_instances: "{{ utilize_reserved_instances }}"
        wait_for_instances: "{{ wait_for_instances }}"
        wait_timeout: "{{ wait_timeout }}"
      register: result

    - name: Debug module result
      debug:
        var: result