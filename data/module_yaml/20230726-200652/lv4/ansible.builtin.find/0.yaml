---
- name: Find files based on specific criteria
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Find files with specific attributes
      find:
        paths: "/"
        age: "30d"
        contains: "example"
        depth: 1
        excludes: [ "*.txt", "*.log" ]
        file_type: "file"
        follow: false
        get_checksum: true
        hidden: false
        patterns: [ "*.yaml", "*.yml" ]
        read_whole_file: false
        recurse: true
        size: "10k"
        use_regex: false
      register: found_files

    - name: Debug found files
      debug:
        var: found_files

    # Add additional tasks or assertions to validate the results

  # Generate random MAC addresses for network modules
  vars:
    random_mac: "52:54:00:{{ '%02x' | format(omit) }}:{{ '%02x' | format(omit) }}:{{ '%02x' | format(omit) }}"

- name: Test Playbook Execution
  hosts: localhost
  gather_facts: false

  tasks:
    - name: "Test MAC address generation"
      debug:
        msg: "{{ random_mac }}"