---
- hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Create Rackspace Cloud Monitoring Notification
      community.general.rax_mon_notification:
        api_key: 1234567890
        auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
        region: "DFW"
        tenant_name: "my_tenant"
        username: "my_username"
        validate_certs: true
        state: present
      register: notification_created

    - name: Print Notification Response
      debug:
        var: notification_created

    - name: Delete Rackspace Cloud Monitoring Notification
      community.general.rax_mon_notification:
        api_key: 1234567890
        auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
        region: "DFW"
        tenant_name: "my_tenant"
        username: "my_username"
        validate_certs: true
        state: absent
      register: notification_deleted

    - name: Print Deletion Response
      debug:
        var: notification_deleted