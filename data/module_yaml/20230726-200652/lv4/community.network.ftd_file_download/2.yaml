---
- name: Download files from Cisco FTD
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(random.randint(0, 255),
                                                                       random.randint(0, 255),
                                                                       random.randint(0, 255),
                                                                       random.randint(0, 255),
                                                                       random.randint(0, 255),
                                                                       random.randint(0, 255)) }}"

    - name: Download file
      community.network.ftd_file_download:
        destination: "/tmp/{{ inventory_hostname }}/file.txt"
        operation: "create"
        path_params:
          path: "disk0:/file.txt"
          mac_address: "{{ random_mac_address }}"
      register: result

    - debug:
        var: result