- name: Generate random MAC addresses for network modules
  hosts: all
  gather_facts: false
  become: true
 
  tasks:
    - name: Set random MAC address for network interface
      ansible.builtin.meta:
        free_form: 'interface=eth0 MAC={{ "%02x:" % (random.randint(0, 255)) }}{{ "%02x:" % (random.randint(0, 255)) }}{{ "%02x:" % (random.randint(0, 255)) }}{{ "%02x:" % (random.randint(0, 255)) }}{{ "%02x:" % (random.randint(0, 255)) }}{{ "%02x" % (random.randint(0, 255)) }}'
 
      register: mac_address_result
 
    - name: Display generated MAC address
      debug:
        var: mac_address_result.stdout_lines