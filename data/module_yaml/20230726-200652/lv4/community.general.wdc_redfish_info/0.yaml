---
- name: Test wdc_redfish_info module
  hosts: localhost
  connection: local
  gather_facts: false
  
  tasks:
    - name: Include network related facts
      include_vars:
        file: network_facts.yml

    - name: Generate random MAC addresses
      vars:
        mac_address_1: "{{ network_facts.mac_address_1 }}"
        mac_address_2: "{{ network_facts.mac_address_2 }}"
        mac_address_3: "{{ network_facts.mac_address_3 }}"
        mac_address_4: "{{ network_facts.mac_address_4 }}"
      
      set_fact:
        random_mac_address_1: "{{ mac_address_1 | random }}"
        random_mac_address_2: "{{ mac_address_2 | random }}"
        random_mac_address_3: "{{ mac_address_3 | random }}"
        random_mac_address_4: "{{ mac_address_4 | random }}"

    - name: Show random MAC addresses
      debug:
        msg: 
          - "Random MAC Address 1: {{ random_mac_address_1 }}"
          - "Random MAC Address 2: {{ random_mac_address_2 }}"
          - "Random MAC Address 3: {{ random_mac_address_3 }}"
          - "Random MAC Address 4: {{ random_mac_address_4 }}"

    - name: Test wdc_redfish_info module
      community.general.wdc_redfish_info:
        auth_token: "{{ random_mac_address_1 }}"
        baseuri: "{{ random_mac_address_2 }}"
        category: "{{ random_mac_address_3 }}"
        command: "{{ random_mac_address_4 }}"
        ioms:
          - "{{ random_mac_address_1 }}"
          - "{{ random_mac_address_2 }}"
        password: "{{ random_mac_address_3 }}"
        timeout: "{{ random_mac_address_4 }}"
        username: "{{ random_mac_address_1 }}"
      register: result

    - name: Show module output
      debug:
        var: result