- name: Configure OSPF on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:

    - name: Generate random MAC addresses
      set_fact:
        mac_address: "{% for _ in range(6) %}{{ '%02x'|format(ansible_random.randint(0, 255)) }}{% if not loop.last %}:{% endif %}{% endfor %}"

    - name: Manage OSPF configuration
      community.network.ce_ospf:
        provider: "{{ inventory_hostname }}"
        addr: null
        area: null
        auth_key_id: null
        auth_mode: null
        auth_text_md5: null
        auth_text_simple: null
        mask: null
        max_load_balance: null
        nexthop_addr: null
        nexthop_weight: null
        process_id: null
        state: null
      register: ospf_result

    - name: Show OSPF configuration
      debug:
        var: ospf_result