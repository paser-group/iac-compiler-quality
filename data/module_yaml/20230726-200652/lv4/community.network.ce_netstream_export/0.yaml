- hosts: localhost
  gather_facts: false
  tasks:
    - name: Manage netstream export on HUAWEI device
      community.network.ce_netstream_export:
        as_option: "{{ item.as_option }}"
        bgp_nexthop: "{{ item.bgp_nexthop }}"
        host_ip: "{{ item.host_ip }}"
        host_port: "{{ item.host_port }}"
        host_vpn: "{{ item.host_vpn }}"
        source_ip: "{{ item.source_ip }}"
        state: "{{ item.state }}"
        type: "{{ item.type }}"
        version: "{{ item.version }}"
      loop:
        - {as_option: None, bgp_nexthop: None, host_ip: None, host_port: None, host_vpn: None, source_ip: None, state: None, type: None, version: None}
      register: result

    - debug:
        var: result

- name: Generate random MAC addresses for network modules
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ '%012x'|format(ansible_date_time.epoch + ansible_date_time.micros)|lower|replace('000000','00:',1)|replace('0000','00:',1)|replace('00','00:',1) }}"
  
    - debug:
        var: mac_address