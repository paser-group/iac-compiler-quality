---
- name: Test Playbook for community.network.avi_useraccount module
  hosts: localhost
  gather_facts: false

  vars:
    mac_address: "{{ '%012x' | format(ansible_date_time.epoch) }}"
    ansible_random_mac_address: "00:{{ mac_address[0:2] }}:{{ mac_address[2:4] }}:{{ mac_address[4:6] }}:{{ mac_address[6:8] }}:{{ mac_address[8:] }}"

  tasks:
    - name: Create user account
      community.network.avi_useraccount:
        controller: "<controller_ip>"
        username: "admin"
        password: "password"
        avi_credentials:
          username: "admin"
          password: "password"
        tenant: "Default"
        mac_address: "{{ ansible_random_mac_address }}"
        state: "present"
      register: result

    - name: Print result
      debug:
        var: result