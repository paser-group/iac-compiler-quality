---
- name: Test SNMP Location Configuration
  hosts: network_devices
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      set_fact:
        mac_addresses: "{{ range(10) | map('regex_replace', '^.$', lookup('pipe', 'uuidgen -r')) | list }}"

    - name: Configure SNMP location
      community.network.ce_snmp_location:
        location: "{{ item.0 }}"
        state: "{{ item.1 }}"
      loop:
        - ["None", "None"]
        - ["{{ mac_addresses[0] }}", "present"]