- name: Collect Facts from Edge Switch
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        mac_address: "{{ '%02x'%((2**48)*rand())|upper }}"

    - name: Collect Edge Switch Facts
      community.network.edgeswitch_facts:
        gather_subset: None
        hosts: "{{ inventory_hostname }}"
        username: admin
        password: secret
        mac: "{{ mac_address }}"
      register: facts_result

    - name: Debug Edge Switch Facts
      debug:
        var: facts_result