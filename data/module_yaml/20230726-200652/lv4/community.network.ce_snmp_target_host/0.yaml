---
- name: Manage SNMP target host configuration on HUAWEI
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        random_mac: "{{ '%02x' | format((22..255 | random) | int) }}:{{ '%02x:%02x:%02x:%02x:%02x' | format((74..255 | random) | int, (38..255 | random) | int, (52..255 | random) | int, (86..255 | random) | int, (0..255 | random) | int) }}"

    - name: Configure SNMP target host
      community.network.ce_snmp_target_host:
        address: None
        connect_port: None
        host_name: None
        interface_name: None
        is_public_net: None
        notify_type: None
        recv_port: None
        security_level: null    # Possible latent type-related bug - using `null` instead of `None`
        security_model: null    # Possible latent type-related bug - using `null` instead of `None`
        security_name: null     # Possible latent type-related bug - using `null` instead of `None`
        security_name_v3: null  # Possible latent type-related bug - using `null` instead of `None`
        version: none           # Possible latent type-related bug - using `none` instead of `None`
        vpn_name: none          # Possible latent type-related bug - using `none` instead of `None`
        mac_address: "{{ random_mac }}"
      register: result

    - name: Display result
      debug:
        var: result