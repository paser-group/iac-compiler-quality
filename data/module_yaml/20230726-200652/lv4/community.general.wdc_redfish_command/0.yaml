---
- name: Test Ansible Latent Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses for network modules
      shell: openssl rand -hex 3 | sed 's/\(..\)/\1:/g; s/.$//'
      register: random_mac_address

    - name: Manage WDC UltraStar Data102 Out-Of-Band controller
      community.general.wdc_redfish_command:
        auth_token: "my_auth_token"
        baseuri: "https://controller-ip"
        category: "controllers"
        command:
          - "list"
        ioms:
          - "iom1"
          - "iom2"
        password: "my_password"
        resource_id: "controller-id"
        timeout: 10
        update_creds:
          username: "new_username"
          password: "new_password"
        update_image_uri: "image-uri"
        username: "my_username"
      register: result

    - name: Print result
      debug:
        var: result