---
- name: Test Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random MAC addresses for network modules
      set_fact:
        random_mac: "{{ '%012x'|format((ansible_host|replace('.','')[-6:])|int(base=16))}}"
      when: inventory_hostname in ['ubuntu1', 'alpine1', 'centos1', 'redhat1']
      register: mac_address

    - name: Print random MAC addresses
      debug:
        var: mac_address