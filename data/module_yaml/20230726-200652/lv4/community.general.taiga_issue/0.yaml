---
- name: Test for latent type-related bugs in community.general.taiga_issue module
  hosts: localhost
  gather_facts: false

  vars:
    taiga_host: "https://example.com"
    project: "my_project"
    subject: "New Issue"
    description: "This is a test issue."
    priority: "High"
    severity: "Critical"
    issue_type: "Bug"
    state: "Open"
    status: "To Do"
    tags:
      - bug
      - test

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac_address: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(255|random, 255|random, 255|random, 255|random, 255|random, 255|random) }}"

    - name: Create Taiga issue
      community.general.taiga_issue:
        taiga_host: "{{ taiga_host }}"
        project: "{{ project }}"
        subject: "{{ subject }}"
        description: "{{ description }}"
        priority: "{{ priority }}"
        severity: "{{ severity }}"
        issue_type: "{{ issue_type }}"
        state: "{{ state }}"
        status: "{{ status }}"
        tags: "{{ tags }}"
        attachment: "/path/to/attachment"
        attachment_description: "Attachment description"
        mac_address: "{{ random_mac_address }}"
      register: taiga_issue_response

    - name: Debug Taiga issue creation response
      debug:
        var: taiga_issue_response