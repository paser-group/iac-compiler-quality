---
- name: Configure EVPN Global
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Install Ansible Huawei Collection
      pip:
        name: ansible_collections.community.network
        version: latest

    - name: Configure EVPN global
      ce_evpn_global:
        evpn_overlay_enable: "{{ evpn_overlay_enable }}"
        provider:
          host: "{{ inventory_hostname }}"
          username: admin
          password: mypassword
          transport: cli

  vars:
    evpn_overlay_enable: "{{ random_mac_address() }}"

  tasks:
    - debug:
        var: evpn_overlay_enable

  tasks:
    - name: Print test case information
      debug:
        msg: |
          Test Case: Generate random MAC addresses for network modules
          Test Description: This test case verifies that the 'evpn_overlay_enable' attribute of the 'ce_evpn_global' module accepts random MAC addresses.
          Heuristic: 'Generate random MAC addresses for network modules'

  tasks:
    - name: Generate random MAC address
      set_fact:
        mac_address: "{{ random_mac_address() }}"
      vars:
        alphabet: "abcdef0123456789"

    - name: Configure EVPN global
      ce_evpn_global:
        evpn_overlay_enable: "{{ mac_address }}"
        provider:
          host: "{{ inventory_hostname }}"
          username: admin
          password: mypassword
          transport: cli

  tasks:
    - debug:
        var: mac_address

  tasks:
    - name: Print test case information
      debug:
        msg: |
          Test Case: Generate random MAC addresses for network modules
          Test Description: This test case verifies that the 'evpn_overlay_enable' attribute of the 'ce_evpn_global' module accepts random MAC addresses.
          Heuristic: 'Generate random MAC addresses for network modules'