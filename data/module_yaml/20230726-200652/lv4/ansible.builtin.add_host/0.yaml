---
- name: Test playbook for add_host module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add a host
      ansible.builtin.add_host:
        name: "{{ host_name }}"
        ansible_host: "{{ host_ip }}"
        groups: "{{ host_groups }}"
      vars:
        host_name: "ubuntu1"
        host_ip: "10.1.1.1"
        host_groups:
          - "ubuntu_servers"

    - name: Show added hosts
      debug:
        msg: "{{ groups }}"