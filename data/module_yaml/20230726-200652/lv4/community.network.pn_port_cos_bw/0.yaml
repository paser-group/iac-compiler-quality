---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC addresses
      ansible.builtin.command: echo $RANDOM | md5sum | sed 's/\(..\)/\1:/g; s/.$//'
      register: random_mac_address
      changed_when: false

    - name: Print random MAC address
      debug:
        var: random_mac_address.stdout

    - name: Configure network using pn_port_cos_bw module
      community.network.pn_port_cos_bw:
        pn_cliswitch: "{{ random_mac_address.stdout }}"
        pn_cos: "{{ random_mac_address.stdout }}"
        pn_max_bw_limit: "{{ random_mac_address.stdout }}"
        pn_min_bw_guarantee: "{{ random_mac_address.stdout }}"
        pn_port: "{{ random_mac_address.stdout }}"
        pn_weight: "{{ random_mac_address.stdout }}"
        state: "{{ random_mac_address.stdout }}"
      register: pn_port_cos_bw_result

    - name: Print result of pn_port_cos_bw module
      debug:
        var: pn_port_cos_bw_result