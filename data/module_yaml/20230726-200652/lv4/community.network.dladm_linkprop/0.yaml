- name: Manage Link Properties using dladm_linkprop module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(d(randint(0, 255)), d(randint(0, 255)), d(randint(0, 255)), d(randint(0, 255)), d(randint(0, 255)), d(randint(0, 255))) }}"

    - name: Set temporary link property
      community.network.dladm_linkprop:
        link: None
        property: network:mac-address
        state: present
        temporary: true
        value: "{{ random_mac }}"