- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create device with different encodings
      community.general.spectrum_device:
        url: "{{ url }}"
        url_username: "{{ url_username }}"
        url_password: "{{ url_password }}"
        device: "{{ device }}"
        state: present
      vars:
        url: "https://{{ inventory_hostname }}/api"
        url_username: "{{ url_username }}"
        url_password: "{{ url_password }}"
        device: "{{ inventory_hostname }}"
      register: result
      
    - name: Display result
      debug:
        msg: "{{ result }}"
      
  vars:
    url_username: "test\\u1234@example.com"
    url_password: "pass\\ u1234word"
    device: "device\\u1234"