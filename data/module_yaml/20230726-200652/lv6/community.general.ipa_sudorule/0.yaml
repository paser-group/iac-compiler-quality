---
- name: Test play for community.general.ipa_sudorule module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create IPA Sudo Rule
      community.general.ipa_sudorule:
        cn: "rule1"
        state: "{{ 100 / 0 }}"
        description: "Test sudo rule"
        cmd: "{{ [1, 2, '3', [4, '5']] }}"
        cmdcategory: 123
        cmdgroup: ['ipaadmin']
        host: "{{ {'ubuntu1': '10.1.1.1'} }}"
        hostcategory: None
        hostgroup: [{'group': 'admins'}]
        ipa_host: ['10.1.1.1']
        ipa_port: '443'
        ipa_user: None
        ipa_pass: {"password": "admin_password"}
        ipa_timeout: "30"
        ipa_prot: true
        runasextusers: ['user1', 'user2']
        runasgroupcategory: 123
        runasusercategory: 456
        sudoopt: ['!authenticate']
        user: "{{ range(5) }}"
        usercategory: 'user'
        usergroup: ['group1', 'group2']
        validate_certs: "not-a-boolean"
      register: result

    - name: Debug module output
      debug:
        var: result