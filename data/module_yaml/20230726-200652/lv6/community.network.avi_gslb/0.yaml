- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    api_context:
      name: "TestContext"
      tenant_ref: "{{ tenant_ref }}"
    api_version: "17.2.10"
    avi_credentials:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"

  tasks:
    - name: Create GSLB
      community.network.avi_gslb:
        avi_credentials: "{{ avi_credentials }}"
        api_context: "{{ api_context }}"
        api_version: "{{ api_version }}"
        tenant_ref: "{{ tenant_ref }}"
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        state: present
        name: "test_gslb"
        description: "{{ description }}"       # Potential latent type-related bug
        is_federated: true                     # Potential latent type-related bug
        maintenance_mode: false                 # Potential latent type-related bug
        third_party_sites: "{{ third_party_sites }}"       # Potential latent type-related bug
        dns_configs: "{{ dns_configs }}"                   # Potential latent type-related bug
        sites: "{{ sites }}"                               # Potential latent type-related bug
        url: "{{ url }}"                                   # Potential latent type-related bug
        uuid: "{{ uuid }}"                                 # Potential latent type-related bug
        username: "{{ username }}"
        password: "{{ password }}"

      register: result

    - name: Test with varied encodings
      debug:
        msg: "{{ item }}"
      loop:
        - "{{ result }}"
        - "{{ result | b64encode }}"
        - "{{ result | b32encode }}"
        - "{{ result | b16encode }}"
        - "{{ result | hexlify }}"