---
- name: Test playbook to uncover latent bugs in community.network.ce_bfd_view module
  hosts: localhost
  gather_facts: False
  vars:
    bfd_sessions:
      - session_name: "TestSession1"
        description: "BFD test session"
        admin_down: true
        local_discr: 1234
        remote_discr: 5678
        min_tx_interval: 100
        min_rx_interval: 100
        detect_multi: 3
        wtr_interval: 300
        tos_exp: 3
        state: present
      - session_name: "TestSession2"
        description: "BFD session with different settings"
        admin_down: false
        local_discr: 4321
        remote_discr: 8765
        min_tx_interval: 200
        min_rx_interval: 200
        detect_multi: 5
        wtr_interval: 500
        tos_exp: 5
        state: present

  tasks:
    - name: Configure BFD sessions
      community.network.ce_bfd_view:
        bfd_sessions: "{{ bfd_sessions }}"
      register: bfd_result

    - debug:
        var: bfd_result