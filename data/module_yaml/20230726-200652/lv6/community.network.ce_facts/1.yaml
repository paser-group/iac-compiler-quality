---
- name: Test Playbook for community.network.ce_facts module
  hosts: all
  gather_facts: no

  tasks:
    - name: Set varied encoded strings
      set_fact:
        encoded_strings:
          - "{{ 'HUAWEI' | b64encode }}"
          - "{{ 'HUAWEI' | urlencode }}"
          - "{{ 'HUAWEI' | quote }}"
          - "{{ 'HUAWEI' | to_json }}"
          - "{{ 'HUAWEI' | to_nice_json }}"

    - name: Get HUAWEI facts
      community.network.ce_facts:
        gather_subset: none
        provider:
          username: "{{ item }}"
          password: "{{ item }}"
      loop: "{{ encoded_strings }}"

    - name: Print the facts
      debug:
        var: ansible_net_facts