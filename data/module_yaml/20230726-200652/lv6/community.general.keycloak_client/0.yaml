---
- name: Test ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Keycloak client
      community.general.keycloak_client:
        admin_url: "http://localhost:8080/auth"
        auth_username: admin
        auth_password: admin
        state: present
        name: Client 1
        redirect_uris: http://localhost:8080/callback
        default_roles: [user]
        attributes: { # Type-related bug: incorrect dictionary format
          attr1: "value1",
          attr2: "value2"
        }
        protocol: openid-connect
        protocol_mappers: [Custom Mapper]
        client_template: Default Template
        validate_certs: true