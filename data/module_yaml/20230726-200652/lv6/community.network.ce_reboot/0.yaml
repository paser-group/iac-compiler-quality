---
- name: Reboot HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Reboot HUAWEI device
      community.network.ce_reboot:
        confirm: "{{ item.confirm }}"
        save_config: "{{ item.save_config }}"
      register: result
      with_items:
        - { confirm: true, save_config: true }
        - { confirm: false, save_config: true }
        - { confirm: true, save_config: false }
        - { confirm: false, save_config: false }

    - name: Show the reboot result
      debug:
        var: result