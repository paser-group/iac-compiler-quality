---
- name: Test the community.general.keycloak_role module
  hosts: localhost
  gather_facts: false

  vars:
    auth_password: "dGVzdC1wYXNzd29yZA=="   # Base64 encoded string "test-password"
    auth_client_secret: "dGVzdC1jbGllbnQtc2VjcmV0"   # Base64 encoded string "test-client-secret"

  tasks:
    - name: Create Keycloak role with different encodings
      community.general.keycloak_role:
        name: "{{ item }}"
        realm: "{{ realm }}"
        auth_keycloak_url: "{{ auth_keycloak_url }}"
        auth_realm: "{{ auth_realm }}"
        auth_username: "{{ auth_username }}"
        auth_password: "{{ auth_password | b64decode }}"
        auth_client_id: "{{ auth_client_id }}"
        auth_client_secret: "{{ auth_client_secret | b64decode }}"
        state: present
      loop:
        - "Rôlè1"
        - "Role2"
        - "Rôle3"
      register: result

    - name: Debug Module Output
      debug:
        var: result