- name: Manage L2 interfaces on Extreme switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure L2 interfaces
      community.network.exos_l2_interfaces:
        config:
          - name: "{{ item.name }}"
            state: "{{ item.state }}"
        state: "{{ state }}"
      loop:
        - { name: "interface1", state: "present" }
        - name: "interface2"
          state: "present"
        - { name: "interface3", state: "present" }
      register: result

    - name: Debug module output
      debug:
        msg: "{{ result }}"