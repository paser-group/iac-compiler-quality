- name: Test Django Manage Module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure Django project
      community.general.django_manage:
        project_path: "/path/to/project"
        command: migrate
        settings: myproject.settings
      vars:
        ack_venv_creation_deprecation: true
        clear: "yes"
        database: "{{ var }}"
        failfast: true

    - name: Run Django tests
      community.general.django_manage:
        project_path: "/path/to/project"
        command: "test"
        settings: myproject.settings
      vars:
        ack_venv_creation_deprecation: false
        cache_table: 1234
        clear: "{{ bool_var }}"
        command: "{{ 'test' }}"
        database: mydb
        failfast: "no"
        fixtures: initial_data.json
        link: 1
        merge: true
        project_path: "/path/to/project"
        pythonpath: "/path/to/python"
        settings: "/path/to/settings.py"
        skip: "false"
        testrunner: django.test.runner.DiscoverRunner
        virtualenv: /path/to/venv