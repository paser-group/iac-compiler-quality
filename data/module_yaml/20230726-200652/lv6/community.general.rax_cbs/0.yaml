---
- name: Test playbook for community.general.rax_cbs module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a CBS volume with different encodings in the name
      community.general.rax_cbs:
        api_key: "{{ api_key }}"
        credentials: "{{ credentials }}"
        description: "Test volume with different encodings in the name"
        name: "{{ item }}"
        region: "{{ region }}"
        size: "{{ '100' | int }}"
        state: "{{ 'present' | str }}"
      loop:
        - "Test Volume 1"
        - 42

    - name: Print the details of the created CBS volumes
      community.general.rax_cbs_info:
        api_key: "{{ api_key }}"
        credentials: "{{ credentials }}"
        region: "{{ region }}"
      register: cbs_info

    - name: Debug the output of CBS volumes
      debug:
        msg: "{{ cbs_info }}"