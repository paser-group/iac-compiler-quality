---
- name: Find latent type-related bugs in Ansible compiler
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate strings with varied encodings
      set_fact:
        strings:
          - "{{ ('test' | b64encode).decode('utf-8') }}"
          - "{{ ('test' | b64encode).decode('latin-1') }}"
          - "{{ ('test' | b64encode).decode('utf-16') }}"
          - "{{ ('test' | b64encode).decode('utf-32') }}"
          - "{{ ('test' | b64encode).decode('ascii') }}"
          - "{{ ('test' | b64encode).decode('iso-8859-1') }}"

    - name: Test latent type-related bugs in Ansible compiler
      shell: echo "{{ item }}"
      loop: "{{ strings }}"
      register: result

    - name: Display result
      debug:
        var: result