---
- name: Test playbook
  hosts: all
  gather_facts: false

  tasks:
    - name: Initialize group variable
      set_fact:
        my_group: []

    - name: Generate strings with varied encodings
      set_fact:
        my_group: "{{ my_group + [item] }}"
      with_items:
        - "ubuntu1"
        - "alpine1"
        - "centos1"
        - "redhat1"
        - "10.1.1.1"
        - "10.1.1.2"
        - "10.1.1.3"
        - "10.1.1.4"
        - "中国"
        - "日本"

    - name: Create Ansible group
      group_by:
        key: "{{ my_group }}"
        parents: ['node-net']

    - name: Debug group
      debug:
        var: groups['node-net']