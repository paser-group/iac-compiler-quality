---
- name: Send Pushbullet Notifications
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include Pushbullet role
      include_role:
        name: community.general.pushbullet

    - name: Send notification with varied encodings
      pushbullet:
        api_key: "{{ api_key }}"
        device: "{{ device }}"
        title: "{{ item.title }}"
        body: "{{ item.body }}"
        channel: "{{ item.channel }}"
        url: "{{ item.url }}"
        push_type: "{{ item.push_type }}"
      loop:
        - title: "Normal string"
          body: "This is a normal string."
          channel: "channel1"
          url: "https://www.example.com"
          push_type: "note"
        - title: "Unicode string"
          body: "\\u03B1\\u03B2\\u03B3"
          channel: "channel2"
          url: "https://www.unicode-example.com"
          push_type: "link"
        - title: "Encoded string"
          body: "VMO2xqkgzr7PhcKl"
          channel: "channel3"
          url: "https://www.example.com"
          push_type: "note"
        - title: "Mixed encoded string"
          body: "\\u03B1\\u03B2VMO2xqkgzr7PhcKl"
          channel: "channel4"
          url: "https://www.example.com"
          push_type: "link"