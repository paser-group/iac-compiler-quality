---
- name: Test playbook for community.general.dnsmadeeasy
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create DNS record
      community.general.dnsmadeeasy:
        account_key: "account_key"
        account_secret: "account_secret"
        domain: "example.com"
        record_name: "test-record"
        record_type: "A"
        record_value: "{{ item.value }}"
        state: present
      loop:
        # Test case 1: ASCII encoding
        - value: "10.1.1.1"
        # Test case 2: UTF-8 encoding
        - value: "\u00E9"
        # Test case 3: Base64 encoding
        - value: "MTAuMS4xLjE="
        # Test case 4: URL encoding
        - value: "http%3A%2F%2Fexample.com"

    - name: Delete DNS record
      community.general.dnsmadeeasy:
        account_key: "account_key"
        account_secret: "account_secret"
        domain: "example.com"
        record_name: "test-record"
        state: absent