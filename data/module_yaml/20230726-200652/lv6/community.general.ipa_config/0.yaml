---

- name: Test IPA Config Module with Varied Encodings
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure IPA
      community.general.ipa_config:
        ipa_host: "10.1.1.1"
        ipa_pass: "password"
        ipa_port: 1234
        ipa_prot: "https"
        ipa_timeout: 60
        ipa_user: "admin"
        ipaconfigstring:
          - "{{ lookup('file', 'config-file.txt') }}"
        ipadefaultemaildomain: "{{ default_email_domain }}"
        ipadefaultloginshell: "/bin/bash"
        ipadefaultprimarygroup: "users"
        ipagroupsearchfields:
          - "cn"
          - "description"
        ipahomesrootdir: "/home"
        ipakrbauthzdata:
          - "data1"
          - "data2"
        ipamaxusernamelength: 8
        ipapwdexpadvnotify: 30
        ipasearchrecordslimit: 100
        ipasearchtimelimit: 10
        ipaselinuxusermaporder:
          - "ipa"
          - "local"
        ipauserauthtype:
          - "password"
          - "otp"
        ipausersearchfields:
          - "uid"
          - "givenname"
        validate_certs: true