---
- name: Create Scaleway Security Group
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create security group with different encodings
      community.general.scaleway_security_group:
        api_token: "your_api_token"
        organization: "your_organization"
        name: |
          - name: "my_security_group_{{ item }}"
            encoding: "{{ item }}"
        description: "My security group"
        region: "ams1"
        state: present
        stateful: true
        inbound_default_policy: "drop"
        outbound_default_policy: "accept"
      with_items:
        - ASCII
        - UTF-8
        - Base64
      register: result

    - name: Debug output
      debug:
        var: result