---
- name: Test playbook for 'community.general.memset_zone_record' module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "your_api_key"
    zone: "example.com"

  tasks:
    - name: Create record with strings of varied encodings
      community.general.memset_zone_record:
        api_key: "{{ api_key }}"
        zone: "{{ zone }}"
        state: present
        record: "{{ item.record }}"
        type: "{{ item.type }}"
        ttl: "{{ item.ttl }}"
        priority: "{{ item.priority }}"
        relative: "{{ item.relative }}"
      loop:
        - { record: "string1", type: "A", ttl: 300, priority: 10, relative: true }
        - { record: "strįng2", type: "A", ttl: 600, priority: 20, relative: false }
        - { record: "stríng3", type: "A", ttl: 900, priority: 30, relative: true }
        - { record: "strïng4", type: "MX", ttl: 1200, priority: 40, relative: false }

    - name: Delete created records
      community.general.memset_zone_record:
        api_key: "{{ api_key }}"
        zone: "{{ zone }}"
        state: absent
        record: "{{ item.record }}"
        type: "{{ item.type }}"
      loop:
        - { record: "string1", type: "A" }
        - { record: "strįng2", type: "A" }
        - { record: "stríng3", type: "A" }
        - { record: "strïng4", type: "MX" }