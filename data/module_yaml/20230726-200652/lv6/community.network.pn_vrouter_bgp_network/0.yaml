---
- name: Test playbook for community.network.pn_vrouter_bgp_network
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: "10.1.1.1"
    pn_netmask: "255.255.255.0"
    pn_network: "10.1.1.0"
    pn_vrouter_name: "vrouter1"

  tasks:
    - name: Add BGP network using varied encoded strings
      community.network.pn_vrouter_bgp_network:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_netmask: "{{ pn_netmask | b64encode }}"
        pn_network: "{{ pn_network | hex }}"
        pn_vrouter_name: "{{ pn_vrouter_name }}"
        state: present
      register: result
      ignore_errors: yes

    - name: Print BGP network operation result
      debug:
        var: result

    - name: Remove BGP network using varied encoded strings
      community.network.pn_vrouter_bgp_network:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_netmask: "{{ pn_netmask | reverse }}"
        pn_network: "{{ pn_network | hex }}"
        pn_vrouter_name: "{{ pn_vrouter_name }}"
        state: absent
      register: result
      ignore_errors: yes

    - name: Print BGP network operation result
      debug:
        var: result