- name: Test community.general.utm_proxy_location module
  hosts: all
  gather_facts: false
  tasks:
    - name: Create reverse_proxy location
      community.general.utm_proxy_location:
        name: "test_location"
        path: "/"
        backend:
          - "http://backend1"
          - "http://backend2"
        state: "present"
        utm_host: "utm.example.com"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "mytoken"
        validate_certs: true
      register: result
    - debug:
        var: result

    - name: Update reverse_proxy location
      community.general.utm_proxy_location:
        name: "test_location"
        path: "/"
        backend:
          - "http://backend3"
        state: "present"
        utm_host: "utm.example.com"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "mytoken"
        validate_certs: true
      register: result
    - debug:
        var: result

    - name: Delete reverse_proxy location
      community.general.utm_proxy_location:
        name: "test_location"
        state: "absent"
        utm_host: "utm.example.com"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "mytoken"
        validate_certs: true
      register: result
    - debug:
        var: result