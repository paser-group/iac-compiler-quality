---
- name: Test playbook for ipa_group module
  hosts: localhost
  become: false

  tasks:
    - name: Create a new IPA group with varied encodings
      community.general.ipa_group:
        name: "group1"
        state: "present"
        description: "{{ item }}"
      loop:
        - "Test group description"
        - "{{ '字符测试'.encode('utf-8').decode('latin-1') }}"
        - "{{ '测试'.encode('big5').decode('latin-1') }}"
        - "{{ 'Test áéíóú'.encode('latin-1').decode('utf-8') }}"
      register: result

    - name: Debug module output
      debug:
        var: result