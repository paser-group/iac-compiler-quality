---
- name: Manage IP tunnel interfaces
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create IP tunnel interface
      community.network.dladm_iptun:
        local_address: "{{ item.local_address }}"
        name: "{{ item.name }}"
        remote_address: "{{ item.remote_address }}"
        state: present
        temporary: "{{ item.temporary }}"
        type: "{{ item.type }}"
      with_items:
        - { local_address: null, name: null, remote_address: null, state: null, temporary: true, type: null }
        - { local_address: '\x00abc', name: 'tun0', remote_address: '10.0.0.1', state: 'present', temporary: false, type: 'ip'}