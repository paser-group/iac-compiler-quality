- name: Generate strings with varied encodings
  hosts: localhost
  gather_facts: false
  vars:
    discord_content: "{{ lookup('pipe', 'echo \"Hello\" | iconv -t UTF-16LE') }}"
    discord_username: "{{ lookup('pipe', 'echo \"John\" | iconv -t UTF-16BE') }}"
  tasks:
    - name: Test community.general.discord module
      community.general.discord:
        avatar_url: "/path/to/avatar.png"
        content: "{{ discord_content }}"
        embeds: "{{ discord_embeds }}"
        tts: "{{ discord_tts | default(false) }}"
        username: "{{ discord_username }}"
        webhook_id: "{{ discord_webhook_id }}"
        webhook_token: "{{ discord_webhook_token }}"
      register: discord_result

    - name: Display result
      debug:
        var: discord_result