- name: Manage packages with dnf
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages
      ansible.builtin.dnf:
        name: "{{ package_name }}"
        state: present
        allow_downgrade: "{{ allow_downgrade }}"
        allowerasing: "{{ allowerasing }}"
        autoremove: "{{ autoremove }}"
        bugfix: "{{ bugfix }}"
        cacheonly: "{{ cacheonly }}"
        conf_file: "{{ conf_file }}"
        disable_excludes: "{{ disable_excludes }}"
        disable_gpg_check: "{{ disable_gpg_check }}"
        disable_plugin: "{{ disable_plugin }}"
        disablerepo: "{{ disablerepo }}"
        download_dir: "{{ download_dir }}"
        download_only: "{{ download_only }}"
        enable_plugin: "{{ enable_plugin }}"
        enablerepo: "{{ enablerepo }}"
        exclude: "{{ exclude }}"
        install_repoquery: "{{ install_repoquery }}"
        install_weak_deps: "{{ install_weak_deps }}"
        installroot: "{{ installroot }}"
        list: "{{ list }}"
        lock_timeout: "{{ lock_timeout }}"
        nobest: "{{ nobest }}"
        releasever: "{{ releasever }}"
        security: "{{ security }}"
        skip_broken: "{{ skip_broken }}"
        sslverify: "{{ sslverify }}"
        update_cache: "{{ update_cache }}"
        update_only: "{{ update_only }}"
        validate_certs: "{{ validate_certs }}"

      register: result

    - name: Display result
      debug:
        var: result