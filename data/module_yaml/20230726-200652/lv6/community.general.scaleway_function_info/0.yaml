---
- name: Test playbook for community.general.scaleway_function_info module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Retrieve information using different encodings
      community.general.scaleway_function_info:
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        name: "{{ name }}"
        namespace_id: "{{ namespace_id }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        validate_certs: "{{ validate_certs }}"
        api_timeout: "{{ api_timeout }}"
      
      vars:
        api_token: "my-api-token"
        api_url: "https://api.scaleway.com/"
        name: "{{ query_with_encoding }}"
        namespace_id: "my-namespace-id"
        query_parameters: "{{ query_with_encoding|b64encode }}"
        region: "ams1"
        validate_certs: false
        api_timeout: "10"
        
      loop:
        - query_with_encoding: "normal"
        - query_with_encoding: "\xae"
        - query_with_encoding: "10.1.1.4'"
        - query_with_encoding: "\"10.1.1.4\""
        - query_with_encoding: "10.1.1.4 OR 1=1"
        - query_with_encoding: ""