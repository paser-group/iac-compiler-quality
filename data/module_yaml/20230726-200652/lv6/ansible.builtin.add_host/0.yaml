- name: Dynamically add hosts to inventory
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Ubuntu host to inventory
      ansible.builtin.add_host:
        name: ubuntu1
        groups: ['ubuntu']
        ansible_host: '10.1.1.1'
        ansible_user: 'ubuntu'
  
    - name: Add Alpine host to inventory
      ansible.builtin.add_host:
        name: alpine1
        groups: ['alpine']
        ansible_host: '10.1.1.2'
        ansible_user: 'alpine'

    - name: Add CentOS host to inventory
      ansible.builtin.add_host:
        name: centos1
        groups: ['centos']
        ansible_host: '10.1.1.3'
        ansible_user: 'centos'

    - name: Add Red Hat host to inventory
      ansible.builtin.add_host:
        name: redhat1
        groups: ['redhat']
        ansible_host: '10.1.1.4'
        ansible_user: 'redhat'

- name: Verify host addition using varied string encodings
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with UTF-8 encoded host name
      ansible.builtin.add_host:
        name: 'übüntü1'
        groups: ['utf8']
        ansible_host: '10.1.1.5'
        ansible_user: 'utf8'
  
    - name: Test with Punycode encoded host name
      ansible.builtin.add_host:
        name: 'xn--btnt1o5bvrd'
        groups: ['punycode']
        ansible_host: '10.1.1.6'
        ansible_user: 'punycode'
  
    - name: Test with Base64 encoded host name
      ansible.builtin.add_host:
        name: 'dWJ1bnQx'
        groups: ['base64']
        ansible_host: '10.1.1.7'
        ansible_user: 'base64'

    - name: Test with URL encoded host name
      ansible.builtin.add_host:
        name: 'ubuntu%301'
        groups: ['urlencoded']
        ansible_host: '10.1.1.8'
        ansible_user: 'urlencoded'