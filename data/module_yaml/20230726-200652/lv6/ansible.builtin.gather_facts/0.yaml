---
- name: Test playbook to reveal Ansible latent type-related bugs
  hosts: all
  gather_facts: no

  tasks:
    - name: Gather facts
      ansible.builtin.gather_facts:
        fact_path: "{{ item }}"
      with_items:
        - "/tmp/{{ 'test1' | encoding_to_bytes(encoding='utf-8') }}"
        - "/tmp/{{ 'test2' | encoding_to_bytes(encoding='utf-16') }}"
        - "/tmp/{{ 'test3' | encoding_to_bytes(encoding='latin-1') }}"