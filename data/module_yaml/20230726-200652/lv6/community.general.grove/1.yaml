---
- name: Send notification using community.general.grove module
  hosts: localhost
  gather_facts: false

  vars:
    channel_token: "YOUR_CHANNEL_TOKEN"
    icon_url: "https://example.com/icon.png"
    message_content:
      - "Test notification message"
      - "\u0061\u006E\u0073\u0069\u0062\u006C\u0065"  # Unicode escape sequence
      - "{{ lookup('pipe', 'echo -n \"\\u0062\\u006F\\u006C\\u0064\\u0020\\u0074\\u0065\\u0073\\u0074\"') }}"  # Inline command execution for escaped characters
      - "{{ message_content.encode('utf-8') }}"  # UTF-8 encoded string
    service: "slack"
    url: "https://hooks.slack.com/services/XXXX/XXXX"
    validate_certs: true

  tasks:
    - name: Send notification
      community.general.grove:
        channel_token: "{{ channel_token }}"
        icon_url: "{{ icon_url }}"
        message_content: "{{ item }}"
        service: "{{ service }}"
        url: "{{ url }}"
        validate_certs: "{{ validate_certs }}"
      loop: "{{ message_content }}"