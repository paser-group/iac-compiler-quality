- name: Test IPA Hostgroup Module
  hosts: localhost
  tasks:
    - name: Create IPA hostgroup
      community.general.ipa_hostgroup:
        state: "{{ state }}"
        cn: "{{ cn | mandatory }}"
        description: "{{ description }}"
        hostgroup: "{{ hostgroup }}"
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        validate_certs: "{{ validate_certs }}"
      vars:
        state: present
        cn: "IPA Hostgroup"
        description: "This is an example IPA hostgroup"
        hostgroup:
          - name: "hostgroup1"
            description: "Hostgroup 1"
          - name: "hostgroup2"
            description: "Hostgroup 2"
        ipa_host: "10.1.1.1"
        ipa_user: "admin"
        ipa_pass: "password"
        ipa_port: 443
        ipa_prot: "https"
        ipa_timeout: 30
        validate_certs: false