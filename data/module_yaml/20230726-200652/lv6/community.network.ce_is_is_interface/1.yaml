---
- name: Test playbook to uncover latent type-based bugs
  hosts: huawei_devices
  gather_facts: false

  vars:
    ifname: "{{ '/dev/eth1' | b64encode }}"
    instance_id: 1
    leveltype: 'L1'
    level1cost: '50'
    level1dispriority: 1
    level2cost: '100'
    level2dispriority: 1
    snpacheck: true
    silentcost: false
    silentenable: false
    p2pnegotiationmode: 'dynamic'
    p2ppeeripignore: false
    bfdstaticen: true
    bfdblocken: false
    ppposicpcheckenable: true
    typep2penable: true

  tasks:
    - name: Configure ISIS interface
      community.network.ce_is_is_interface:
        state: "{{ state }}"
        ifname: "{{ ifname | b64decode }}"
        instance_id: "{{ instance_id }}"
        leveltype: "{{ leveltype }}"
        level1cost: "{{ level1cost }}"
        level1dispriority: "{{ level1dispriority }}"
        level2cost: "{{ level2cost }}"
        level2dispriority: "{{ level2dispriority }}"
        snpacheck: "{{ snpacheck }}"
        silentcost: "{{ silentcost }}"
        silentenable: "{{ silentenable }}"
        p2pnegotiationmode: "{{ p2pnegotiationmode }}"
        p2ppeeripignore: "{{ p2ppeeripignore }}"
        bfdstaticen: "{{ bfdstaticen }}"
        bfdblocken: "{{ bfdblocken }}"
        ppposicpcheckenable: "{{ ppposicpcheckenable }}"
        typep2penable: "{{ typep2penable }}"

      register: result

    - name: Print module output
      debug:
        var: result