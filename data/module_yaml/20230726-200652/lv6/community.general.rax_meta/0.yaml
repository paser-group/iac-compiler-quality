---
- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set metadata for Rackspace instance
      community.general.rax_meta:
        address: "{{ item.address }}"
        api_key: "{{ item.api_key }}"
        auth_endpoint: "{{ item.auth_endpoint }}"
        credentials: "{{ item.credentials }}"
        env: "{{ item.env }}"
        id: "{{ item.id }}"
        identity_type: "{{ item.identity_type }}"
        meta: "{{ item.meta }}"
        name: "{{ item.name }}"
        region: "{{ item.region }}"
        tenant_id: "{{ item.tenant_id }}"
        tenant_name: "{{ item.tenant_name }}"
        username: "{{ item.username }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - address: "10.1.1.1"
          api_key: "<your_api_key>"
          auth_endpoint: "https://auth.api.rackspacecloud.com/v2.0/"
          credentials: "/path/to/credentials"
          env: "dev"
          id: "instance-1"
          identity_type: "rackspace"
          meta:
            key1: "value1"
            key2: "value2"
          name: "instance-1"
          region: "DFW"
          tenant_id: "123456789"
          tenant_name: "my_tenant"
          username: "my_username"
          validate_certs: true
        # Add more test cases with different values and encodings
        
    - name: Display Rackspace metadata
      debug:
        var: meta

    # Additional tasks to perform on the Rackspace instances