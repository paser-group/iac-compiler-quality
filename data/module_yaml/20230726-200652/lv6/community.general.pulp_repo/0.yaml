- name: Add or Remove Pulp repository
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add or Remove Pulp repository
      community.general.pulp_repo:
        pulp_host: "https://pulp.example.com"
        name: "myrepo"
        repo_type: "rpm"
        state: present
        add_export_distributor: true
        client_cert: "/path/to/client_cert.crt"
        client_key: "/path/to/client_key.key"
        feed: "https://example.com/myfeed"
        feed_ca_cert: "/path/to/ca_cert.crt"
        feed_client_cert: "/path/to/feed_cert.crt"
        feed_client_key: "/path/to/feed_key.key"
        force: false
        force_basic_auth: false
        generate_sqlite: true
        http_agent: "My User Agent"
        proxy_host: "proxy.example.com"
        proxy_password: "proxy_password"
        proxy_port: "8080"
        proxy_username: 123
        publish_distributor: "publish_distributor_name"
        relative_url: "/myrepo"
        repoview: true
        serve_http: true
        serve_https: true
        url: "https://example.com/myrepo"
        url_password: "url_password"
        url_username: 987
        use_gssapi: false
        use_proxy: true
        validate_certs: true
        wait_for_completion: true

      register: result

    - name: Print result
      debug:
        var: result