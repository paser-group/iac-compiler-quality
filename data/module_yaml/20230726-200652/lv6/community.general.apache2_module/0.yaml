---
- name: Apache2 Module Testing
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Enable/Disable Apache2 module
      community.general.apache2_module:
        name: "{{ var_name }}"
        state: "{{ var_state }}"
        force: "{{ var_force }}"
        identifier: "{{ var_identifier }}"
        ignore_configcheck: "{{ var_ignore_configcheck }}"
        warn_mpm_absent: "{{ var_warn_mpm_absent }}"
      register: result
      loop:
        - { var_name: 'mod_test', var_state: 'enabled', var_force: true, var_identifier: 'encoding', var_ignore_configcheck: false, var_warn_mpm_absent: true }