- hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate encoded strings
      ansible.builtin.set_fact:
        encoded_strings:
          - "{{ client|string_encoding }}"
          - "{{ conn_password|string_encoding }}"
          - "{{ conn_username|string_encoding }}"
          - "{{ host|string_encoding }}"
          - "{{ sysnr|string_encoding }}"
          - "{{ task_parameters|string_encoding }}"
          - "{{ task_settings|string_encoding }}"
          - "{{ task_to_execute|string_encoding }}"

    - name: Execute SAP task list
      community.general.sap_task_list_execute:
        client: "{{ encoded_strings[0] }}"
        conn_password: "{{ encoded_strings[1] }}"
        conn_username: "{{ encoded_strings[2] }}"
        host: "{{ encoded_strings[3] }}"
        sysnr: "{{ encoded_strings[4] }}"
        task_parameters: "{{ encoded_strings[5] }}"
        task_settings: "{{ encoded_strings[6] }}"
        task_skip: "{{ encoded_strings[7] }}"
        task_to_execute: "{{ encoded_strings[8] }}"
      register: result

    - name: Print task result
      debug:
        var: result