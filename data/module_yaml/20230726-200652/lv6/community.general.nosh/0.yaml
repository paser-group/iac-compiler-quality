---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install requirements
      pip:
        name: nosh
        state: present

    - name: Generate strings with varied encodings
      nosh:
        enabled: "{{ item.enabled }}"
        name: "{{ item.name }}"
        preset: "{{ item.preset }}"
        state: "{{ item.state }}"
        user: "{{ item.user }}"
      loop:
        - { enabled: true, name: "string1", preset: true, state: "started", user: false }
        - { enabled: false, name: "string2", preset: false, state: "stopped", user: true }
        - { enabled: true, name: "string3", preset: true, state: "restarted", user: true }
        - { enabled: false, name: "string4", preset: true, state: "stopped", user: false }