---
- name: Test playbook for 'community.general.imgadm' module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Install community.general collection
      community.general.collection_install:
      
    - name: Create test dataset
      community.general.imgadm:
        state: "{{ lookup('env', 'STATE_STRING') }}"
        source: "{{ lookup('env', 'SOURCE_STRING') }}"
        type: "{{ lookup('env', 'TYPE_STRING') }}"
        uuid: "{{ lookup('env', 'UUID_STRING') }}"
        force: "{{ lookup('env', 'FORCE_BOOL') | bool }}"
        pool: "{{ lookup('env', 'POOL_STRING') }}"
      register: result
      
    - name: Debug result
      debug:
        var: result