---
- name: Test playbook for oneandone_monitoring_policy module
  hosts: localhost
  gather_facts: false
  vars:
    api_url: "https://api.example.com"
    auth_token: "your_auth_token"

  tasks:
    - name: Configure monitoring policy
      community.general.oneandone_monitoring_policy:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        name: "Test Monitoring Policy"
        description: "Test Monitoring Policy Description"
        email: "test@example.com"
        monitoring_policy: "standard"
        state: "present"
        add_ports:
          - port: 8080
            protocol: "tcp"
        add_processes:
          - process: "test_process"
            alert_if_not_exists: false
        add_servers:
          - server: "test_server"
            email_notification: true
            email_notification_criteria: "test criteria 1"
        ports:
          - port_id: "1234"
            port: 80
            name: "HTTP"
        processes:
          - process_id: "5678"
            process: "nginx"
            alert_if_not_exists: true
        remove_ports:
          - port_id: "4321"
        remove_processes:
          - process_id: "8765"
        remove_servers:
          - server_id: "abcd"
        thresholds:
          - threshold_id: "7890"
            metric: "Memory"
            warning: 80
            critical: 90
        update_ports:
          - port_id: "0987"
            port: 443
            name: "HTTPS"
        update_processes:
          - process_id: "6543"
            process: "apache2"
            alert_if_not_exists: false
        wait: true
        wait_interval: 10
        wait_timeout: 300

      register: result

    - debug:
        var: result