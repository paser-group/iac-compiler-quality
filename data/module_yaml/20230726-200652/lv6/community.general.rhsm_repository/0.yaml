---
- name: Test RHSM Repository Module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate Strings with Varied Encodings
      command: >
        python -c "print(u'r\xe9p$\x5e\t{]'.encode('utf-8').decode('utf-8'))"
      register: encoded_string

    - name: Include RHSM Repository Module
      community.general.rhsm_repository:
        name: "{{ encoded_string.stdout }}"
        purge: "false"
        state: "present"
      register: rhsm_result

    - name: Print Task Result
      debug:
        var: rhsm_result