---
- name: Test reachability using ping
  hosts: all
  gather_facts: false

  tasks:
    - name: Ping hosts
      net_ping:
        count: "{{ count | default(5) }}"
        dest: "{{ dest }}"
        source: "{{ source | default('') }}"
        state: "{{ state | default('present') }}"
        vrf: "{{ vrf | default('') }}"
      register: ping_result

    - name: Debug ping output
      debug:
        var: ping_result