---
- name: Manage Files
  hosts: all
  become: true
  tasks:
    - name: Create a directory
      file:
        path: "/tmp/test_directory"
        state: directory
        mode: '0755'

    - name: Create a file with different encodings
      file:
        path: "/tmp/test_directory/test_file_{{ item.encoding }}"
        state: touch
      loop:
        - { encoding: 'utf-8' }
        - { encoding: 'utf-16' }
        - { encoding: 'latin-1' }

    - name: Set file owner, group, and mode
      file:
        path: "/tmp/test_directory"
        owner: root
        group: root
        mode: '0644'

    - name: Change file attributes
      file:
        path: "/tmp/test_directory/test_file_utf-8"
        attributes: '+i'

    - name: Change file timestamps
      file:
        path: "/tmp/test_directory/test_file_utf-16"
        access_time: "2022-01-01 00:00:00"
        modification_time: "2022-01-02 00:00:00"
        access_time_format: "%Y-%m-%d %H:%M:%S"
        modification_time_format: "%Y-%m-%d %H:%M:%S"

    - name: Copy a file from local to remote
      copy:
        src: "path/to/local/file"
        dest: "/tmp/test_directory/test_file_latin-1"

    - name: Delete a file
      file:
        path: "/tmp/test_directory/test_file_latin-1"
        state: absent

    - name: Remove the directory
      file:
        path: "/tmp/test_directory"
        state: absent