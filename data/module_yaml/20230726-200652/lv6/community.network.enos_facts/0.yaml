---
- name: Collect Facts from Remote Devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Collect ENOS facts from remote devices
      community.network.enos_facts:
        auth_pass: "{{ lookup('env', 'AUTH_PASS') | default(None) }}"
        authorize: "{{ lookup('env', 'AUTHORIZE') | default(True) }}"
        gather_subset: "{{ lookup('env', 'GATHER_SUBSET') | default(None) }}"
      register: enos_facts

    - debug:
        var: enos_facts