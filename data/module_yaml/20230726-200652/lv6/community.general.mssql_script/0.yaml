---
- name: Execute SQL script
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Include the mssql_script module
      include_role:
        name: community.general.mssql_script

    - name: Execute SQL script
      community.general.mssql_script:
        login_host: "localhost"
        login_port: 1433
        login_user: "sa"
        login_password: "mypassword"
        name: "Sample SQL Script"
        script: |
          SELECT * FROM MyTable
        output: "output.txt"
      register: result

    - name: Print the result
      debug:
        var: result