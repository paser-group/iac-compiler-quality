- name: Test VDO module with varied encodings
  hosts: all
  gather_facts: false
  tasks:
    - name: Set VDO module options with varied encodings
      community.general.vdo:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        device: "{{ item.device }}"
        compression: "{{ item.compression }}"
        logicalsize: "{{ item.logicalsize }}"
        cputhreads: "{{ item.cputhreads }}"
        biothreads: "{{ item.biothreads }}"
        physicalthreads: "{{ item.physicalthreads }}"
        logicalthreads: "{{ item.logicalthreads }}"
        indexmem: "{{ item.indexmem }}"
        indexmode: "{{ item.indexmode }}"
        force: "{{ item.force }}"
        activated: "{{ item.activated }}"
        running: "{{ item.running }}"
        growphysical: "{{ item.growphysical }}"
        readcache: "{{ item.readcache }}"
        writepolicy: "{{ item.writepolicy }}"
        blockmapcachesize: "{{ item.blockmapcachesize }}"
        slabsize: "{{ item.slabsize }}"
        deduplication: "{{ item.deduplication }}"
        emulate512: "{{ item.emulate512 }}"
        ackthreads: "{{ item.ackthreads }}"
        readcachesize: "{{ item.readcachesize }}"
      with_items:
        - { name: "vdo0", state: "present", device: "/dev/sdb", compression: "lz4", logicalsize: "50G", cputhreads: "auto", biothreads: "auto", physicalthreads: "auto", logicalthreads: "auto", indexmem: "128M", indexmode: "hash", force: true, activated: true, running: true, growphysical: true, readcache: "off", writepolicy: "writethrough", blockmapcachesize: "8192M", slabsize: "640K", deduplication: "on", emulate512: false, ackthreads: "5", readcachesize: "8192M" }
        - { name: "vdo1", state: "absent", device: "/dev/sdc", compression: "zlib", logicalsize: "100G", cputhreads: "1", biothreads: "1", physicalthreads: "1", logicalthreads: "1", indexmem: "64M", indexmode: "bitmap", force: false, activated: false, running: false, growphysical: false, readcache: "on", writepolicy: "writeback", blockmapcachesize: "4096M", slabsize: "512K", deduplication: "off", emulate512: true, ackthreads: "10", readcachesize: "4096M" }
      register: vdo_result