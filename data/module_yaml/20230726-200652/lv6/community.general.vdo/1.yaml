- name: Test VDO module
  hosts: all
  gather_facts: false
  tasks:
    - name: Set VDO module options
      community.general.vdo:
        name: "vdo0"
        state: "present"
        device: "/dev/sdb"
        logicalsize: "50G"
        compression: "lz4"
        cputhreads: "auto"
        biothreads: "auto"
        physicalthreads: "auto"
        logicalthreads: "auto"
        indexmem: "128M"
        indexmode: "hash"
        force: true
        activated: true
        running: true
        growphysical: true
        readcache: "off"
        writepolicy: "writethrough"
        blockmapcachesize: "8192M"
        slabsize: "640K"
        deduplication: "on"
        emulate512: false
        ackthreads: "5"
        readcachesize: "8192M"
      register: vdo_result