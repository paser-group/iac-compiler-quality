- name: Test playbook for community.network.ce_ntp_auth
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include the community.network.ce_ntp_auth module
      include_tasks: community.network.ce_ntp_auth.yml

    - name: Test task with auth_mode set to string with encoding issues
      community.network.ce_ntp_auth:
        auth_mode: "Î±"
      register: result
      ignore_errors: true

    - name: Debug output
      debug:
        var: result

- name: community.network.ce_ntp_auth.yml
  tasks:
    - name: Set HUAWEI NTP authentication configuration
      command: "echo 'Huawei NTP authentication configuration is set.'"
      when: auth_mode is defined and auth_mode == "md5"