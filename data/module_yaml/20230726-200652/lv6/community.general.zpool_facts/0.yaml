---
- name: Gather zpool facts
  hosts: all
  gather_facts: no

  tasks:
    - name: Gather zpool facts
      community.general.zpool_facts:
        name: "{{ item }}"
      loop: "{{ zpools }}"
      register: zpool_facts_result

    - name: Debug gathered zpool facts
      debug:
        var: zpool_facts_result

  vars:
    zpools:
      - "pool1"
      - "pool2"
      - "pool3"
      - "pool4"