---
- name: Test reachability using ping from Ruckus ICX switches
  hosts: all
  gather_facts: false
  tasks:
    - name: Ping test
      community.network.icx_ping:
        dest: "{{ inventory_hostname }}"
        count: "invalid_value"
        state: "absent"
        timeout: ["3"]
        size: "100"
        ttl: 64
        source: 1.1.1.1
        vrf: "{{ vrf }}"
      register: ping_result

    - name: Debug ping result
      debug:
        var: ping_result