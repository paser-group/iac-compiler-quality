---
- name: Test playbook for community.network.pn_vtep module
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: "{{ look_for_cmdline_opts }} - encoded string Ã©!@"
    pn_ip: "192.168.0.1"
    pn_location: "{{ look_for_location }}"
    pn_name: "VTEP 1"
    pn_switch_in_cluster: true
    pn_virtual_ip: "{{ look_for_virtual_ip }}"
    pn_vrouter_name: "vRouter 1"
    state: present

  tasks:
    - name: Create VTEP
      community.network.pn_vtep:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_ip: "{{ pn_ip }}"
        pn_location: "{{ pn_location }}"
        pn_name: "{{ pn_name }}"
        pn_switch_in_cluster: "{{ pn_switch_in_cluster }}"
        pn_virtual_ip: "{{ pn_virtual_ip }}"
        pn_vrouter_name: "{{ pn_vrouter_name }}"
        state: "{{ state }}"
      register: vtep_result
      
    - name: Debug VTEP result
      debug:
        var: vtep_result