---
- name: Create GitHub Issue
  hosts: localhost
  gather_facts: false

  vars:
    organization: my_organization
    repository: my_repository
    action: "create"
    issue_number: 42

  tasks:
    - name: Create GitHub Issue
      community.general.github_issue:
        organization: "{{ organization }}"
        repo: "{{ repository }}"
        action: "{{ action }}"
        issue: "{{ issue_number }}"
        encoding: "{{ encoding }}"

      vars:
        encoding: "utf-8"

      register: issue_result

    - name: Print Issue Result
      debug:
        var: issue_result