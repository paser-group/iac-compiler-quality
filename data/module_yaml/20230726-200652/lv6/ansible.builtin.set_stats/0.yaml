---
- name: Test playbook for ansible.builtin.set_stats module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate strings with varied encodings
      set_stats:
        data:
          encoded_string:
            aggregate: true
            per_host: true
            foo: "{{ lookup('pipe', 'echo -e \"\\u0418\\u041e\\u041f\"') }}"
            bar: "{% set encoded_bar = 'MjkyNzcwMTcxMA==\n' | b64decode %}{{ encoded_bar }}"
      
    - name: Display variable values
      debug:
        var:
          encoded_string