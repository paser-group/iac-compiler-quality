- name: Gather information on instances using ali_instance_info module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Gather instance information
      community.general.ali_instance_info:
        alicloud_access_key: "{{ alicloud_access_key }}"
        alicloud_assume_role:
          arn: "{{ alicloud_assume_role_arn }}"
          expiration: "{{ alicloud_assume_role_session_expiration }}"
          name: "{{ alicloud_assume_role_session_name }}"
        alicloud_region: "{{ alicloud_region }}"
        alicloud_secret_key: "{{ alicloud_secret_key }}"
        alicloud_security_token: "{{ alicloud_security_token }}"
        ecs_role_name: "{{ ecs_role_name }}"
        filters: "{{ filters }}"
        name_prefix: "{{ name_prefix }}"
        profile: "{{ profile }}"
        shared_credentials_file: "{{ shared_credentials_file }}"
        tags: "{{ tags }}"
      register: instance_info

    - debug:
        var: instance_info