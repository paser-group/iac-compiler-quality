---
- name: Test playbook for Ansible latent type-related bugs
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Wait for connection with varied encoded strings
      ansible.builtin.wait_for_connection:
        connect_timeout: "{{ hostvars[item]['connect_timeout'] | default('10') }}"
        delay: "{{ hostvars[item]['delay'] | default('5') }}"
        sleep: "{{ hostvars[item]['sleep'] | default('1') }}"
        timeout: "{{ hostvars[item]['timeout'] | default('300') }}"
      loop: "{{ play_hosts }}"
      register: wait_result

    - name: Display wait_for_connection results
      debug:
        var: wait_result