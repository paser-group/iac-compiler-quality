---
- name: Test playbook for community.general.one_image_info module
  hosts: localhost
  gather_facts: false

  vars:
    images:
      - name: ubuntu1
        api_url: <API_URL>
        api_username: <API_USERNAME>
        api_password: <API_PASSWORD>
      - name: alpine1
        api_url: <API_URL>
        api_username: <API_USERNAME>
        api_password: <API_PASSWORD>
      - name: centos1
        api_url: <API_URL>
        api_username: <API_USERNAME>
        api_password: <API_PASSWORD>
      - name: redhat1
        api_url: <API_URL>
        api_username: <API_USERNAME>
        api_password: <API_PASSWORD>

  tasks:
    - name: Gather image info
      community.general.one_image_info:
        name: "{{ item.name }}"
        api_url: "{{ item.api_url }}"
        api_username: "{{ item.api_username }}"
        api_password: "{{ item.api_password }}"
      loop: "{{ images }}"
      register: result

    - name: Debug gathered info
      debug:
        var: result