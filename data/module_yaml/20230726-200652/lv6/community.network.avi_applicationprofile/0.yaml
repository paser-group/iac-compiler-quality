---
- name: Test Ansible Module for ApplicationProfile
  hosts: localhost
  gather_facts: false

  vars:
    avi_applicationprofile_properties:
      api_version: "17.2.10"
      controller: "10.1.1.1"
      username: "admin"
      password: "password"
      tenant: "test_tenant"
      state: "present"
      name: "{{ profile_name }}"
      type: "APPLICATION_PROFILE_TYPE_HTTP"

  tasks:
    - name: Create Avi Application Profile
      community.network.avi_applicationprofile:
        api_context: "{{ avi_api_context }}"
        avi_credentials: "{{ avi_credentials }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
        tenant_uuid: "{{ tenant_uuid }}"
        cloud_config_cksum: null
        controller: "{{ controller }}"
        created_by: null
        description: null
        dns_service_profile: null
        dos_rl_profile: null
        http_profile: null
        name: "{{ profile_name }}"
        password: "{{ password }}"
        preserve_client_ip: false
        preserve_client_port: true
        sip_service_profile: null
        state: "{{ state }}"
        tcp_app_profile: null
        tenant: "{{ tenant }}"
        tenant_ref: null
        tenant_uuid: "{{ tenant_uuid }}"
        type: "{{ type }}"
        url: null
        username: "{{ username }}"
        uuid: null
      register: result