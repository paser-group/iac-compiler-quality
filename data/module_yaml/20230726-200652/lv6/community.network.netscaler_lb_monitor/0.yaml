---
- name: Test Ansible NetScaler LB Monitor Module
  hosts: localhost
  gather_facts: false

  vars:
    nitro_user: admin
    nitro_pass: admin
    nitro_protocol: http
    nitro_timeout: 10
    nsip: "10.1.1.1"

  tasks:
    - name: Create NetScaler LB Monitor with varied encodings
      community.network.netscaler_lb_monitor:
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        nsip: "{{ nsip }}"
        monitorname: "TestMonitor"
        type: "http"
        destip: "10.1.1.2"
        destport: 80
        validate_certs: no
        action: "{{ item }}"
      with_items:
        - "&#x61"
        - "&#x1F602"
        - "&#xC3"
        - "&#xC3BF"
        - "&#xD835;&#xDC9C"
        - "&#xD83C;&#xDF80"
        - "&#xD83D;&#xDC7D"