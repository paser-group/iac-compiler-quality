---
- name: Test playbook for netscaler_servicegroup module
  hosts: localhost
  gather_facts: false

  vars:
    - servicegroup_name: "my_servicegroup"
    - servicegroup_members:
        - member1: "10.1.1.1:80"
        - member2: "10.1.1.2:80"
    - validate_certs: false
    - nitro_user: "admin"
    - nitro_pass: "password"
    - nitro_protocol: "http"
    - nitro_timeout: 60
    - nsip: "10.1.1.100"
    - state: present

  tasks:
    - name: Create service group
      community.network.netscaler_servicegroup:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        validate_certs: "{{ validate_certs }}"
        state: "{{ state }}"
        servicegroupname: "{{ servicegroup_name }}"
        servicetype: "HTTP"
        servicemembers: "{{ servicegroup_members }}"
      register: result