---
- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Import playbook with potential type-related bugs
      ansible.builtin.import_playbook:
        playbook: "{{ playbook_path }}"
        extra_vars:
          test_var: "{{ lookup('pipe', 'echo -n test_string_with_{{ item }}_encoding | base64') }}"
      with_items:
        - utf8
        - utf16
        - utf32
        - ascii
        - latin1
        - utf8_hex
        - utf16_hex
        - utf32_hex
      tags:
        - type_related_bugs