---
- name: Assign IP subnets to devices
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Assign IP subnet to devices
      community.general.packet_ip_subnet:
        auth_token: "my_auth_token"
        cidr: "10.1.1.0/24"
        device_count: 4
        device_id: "{{ item.device_id }}"
        hostname: "{{ item.hostname }}"
        project_id: "my_project_id"
        state: present
      loop:
        - { device_id: "ubuntu1", hostname: "ubuntu1.example.com" }
        - { device_id: "alpine1", hostname: "{{ 'alpine1.example.com' | encode('rot_13') }}" }
        - { device_id: "centos1", hostname: "{{ 'centos1.example.com' | encode('base64') }}" }
        - { device_id: "redhat1", hostname: "{{ 'redhat1.example.com' | encode('hex') }}" }