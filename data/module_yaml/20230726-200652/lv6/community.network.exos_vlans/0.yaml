- name: Test Case - Trigger Latent Type-Related Bug
  hosts: switches
  gather_facts: false

  vars:
    vlan_name: "{{ vlan_name | b64encode }}"
    vlan_id: 100
    vlan_state: present
    vlan_ports: [1, 2, 3]
    vlan_tagged_ports: [1]
    vlan_untagged_ports: [2, 3]

  tasks:
    - name: Configure VLANs
      community.network.exos_vlans:
        config:
          - name: "{{ vlan_name }}"
            vlan: "{{ vlan_id }}"
            state: "{{ vlan_state }}"
            config:
              - ports: "{{ vlan_ports }}"
                tagged: "{{ vlan_tagged_ports }}"
                untagged: "{{ vlan_untagged_ports }}"