---
- name: Test playbook for community.general.sapcar_extract module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Install community.general.sapcar_extract module
      pip:
        name: ansible-modules-hashivault
        state: present

    - name: Extract SAPCAR archive
      community.general.sapcar_extract:
        binary_path: '/path/to/sapcar'
        dest: '/path/to/extract'
        manifest: 'MANIFEST.FILE'
        path: 'ARCHIVE.FILE'
        remove: true
        security_library: '/path/to/security/lib'
        signature: true
    
    - name: Generate strings with varied encodings
      shell: |
        echo "Test string" > testfile.txt
        echo "𝄞𝄞𝄞" >> testfile.txt
        echo "é" >> testfile.txt
        echo $'\xEF\xBB\xBF' >> testfile.txt
        echo -e "\x1B\x5B\x30\x6D" >> testfile.txt
        cat testfile.txt
      
    - name: Extract SAPCAR archive with varied encodings
      community.general.sapcar_extract:
        binary_path: '/path/to/sapcar'
        dest: '/path/to/extract'
        manifest: 'MANIFEST.FILE'
        path: 'ARCHIVE.FILE'
        remove: true
        security_library: '/path/to/security/lib'
        signature: true

      register: result

    - name: Print extraction result
      debug:
        var: result