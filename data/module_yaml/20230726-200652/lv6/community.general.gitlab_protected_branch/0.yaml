---
- name: Test the 'community.general.gitlab_protected_branch' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Protect a GitLab branch with different encodings
      community.general.gitlab_protected_branch:
        api_url: "https://gitlab.example.com/api/v4"
        api_token: "your_token"
        project: "my_project"
        name: "{{ item }}"
        push_access_level: "master"
        merge_access_levels:
          - "developer"
          - "maintainer"
        state: present
        validate_certs: false
      loop:
        - "master"
        - "\xc3\xbcnicode_encoding"
        - "\xe0\xae\xb1\xe0\xaf\x8d\xe0\xae\xb1\xe0\xae\xa8\xe0\xaf\x8d\xe0\xae\xa8\xe0\xae\xae\xe0\xaf\x8d"  # Tamil text
        - "\xf0\x9f\x98\x8a"  # Smiley emoji