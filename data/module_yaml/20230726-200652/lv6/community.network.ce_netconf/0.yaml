- name: Execute netconf command on HUAWEI
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Include the netconf module
      include_role:
        name: community.network.ce_netconf
      vars:
        ansible_python_interpreter: "{{ ansible_playbook_python }}"
 
    - name: Execute netconf command
      ce_netconf:
        host: "{{ inventory_hostname }}"
        port: 830
        username: admin
        password: password
        transport: netconf
        timeout: 30
        cfg_xml: "{{ cfg_xml }}"
        rpc: "{{ rpc }}"
      register: result
 
    - name: Print result
      debug:
        var: result