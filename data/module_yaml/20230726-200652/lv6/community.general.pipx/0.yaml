---
- name: Manage pipx applications
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install pipx package
      community.general.pipx:
        name: pipx
        state: present

    - name: Install pipx application using varied-encoding strings
      community.general.pipx:
        name: "{{ item.name }}"
        state: "{{ item.state|default('present') }}"
      loop:
        - name: "app1"
          state: "present"
        - name: "app2"
          state: "absent"
        - name: "app3"
          state: "latest"
        - name: "app4"
          state: "upgrade"
      register: result