---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  vars:
    ansible_become: false
  tasks:
  - name: Create a Gslb Service with varied encodings
    community.network.avi_gslbservice:
      api_context: "{{ item }}"
      api_version: "v1"
      application_persistence_profile_ref: null
      avi_api_patch_op: null
      avi_api_update_method: null
      avi_credentials:
        username: "admin"
        password: "password"
      avi_disable_session_cache_as_fact: false
      controller: "https://10.1.1.1"
      controller_health_status_enabled: false
      created_by: null
      description: null
      domain_names: null
      down_response: null
      enabled: true
      groups: null
      health_monitor_refs: null
      health_monitor_scope: null
      hm_off: false
      is_federated: false
      min_members: null
      name: "{{ item }}"
      num_dns_ip: null
      pool_algorithm: null
      site_persistence_enabled: false
      state: null
      tenant: "admin"
      tenant_ref: null
      tenant_uuid: "tenant-uuid"
      ttl: null
      url: null
      use_edns_client_subnet: true
      username: null
      uuid: null
      wildcard_match: false
    loop:
      - "{{ lookup('csvfile', 'test_cases.csv', delimiter=',') | list }}"
    register: result

  - name: Debug result
    debug:
      var: result