---
- name: Manage NTP configuration on HUAWEI devices
  hosts: huawei_devices
  gather_facts: False
  tasks:
    - name: Generate encoded strings
      set_fact:
        encoded_strings:
          - "{{ '10.1.1.1'.encode('utf-8') }}"
          - "{{ '10.1.1.1'.encode('ascii') }}"
          - "{{ '10.1.1.1'.encode('latin-1') }}"
          - "{{ '10.1.1.1'.encode('cp1252') }}"
          # Add additional encoded strings if needed

    - name: Configure NTP servers
      community.network.ce_ntp:
        provider: "{{ cli }}"
        state: "{{ state }}"
        server: "{{ encoded_strings }}"
        peer: "{{ encoded_strings }}"
      register: result

    - name: Display task result
      debug:
        var: result