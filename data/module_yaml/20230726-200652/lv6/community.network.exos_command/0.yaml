---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Generate strings with varied encodings
      set_fact:
        encoded_strings: "{{ item | string | b64encode }}"
      loop: ["command1", "command2", "command3"]

    - name: Run commands on remote devices
      command:
        cmd: "{{ item | b64decode }}"
      loop: "{{ encoded_strings }}"
      register: result

    - name: Print command output for each host
      debug:
        msg: "{{ result.stdout_lines }}"