---
- name: Test Ansible Latent Type-Related Bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Set system attributes on Ruckus ICX switches
      community.network.icx_system:
        aaa_servers: "{{ aaa_servers }}"
        check_running_config: "{{ check_running_config | bool }}"
        domain_name: "{{ domain_name }}"
        domain_search: "{{ domain_search }}"
        hostname: "{{ hostname }}"
        name_servers: "{{ name_servers }}"
        state: "{{ state }}"

      vars:
        aaa_servers:
          - "{{ 'admin' }}"
          - "{{ 'secret' }}"
        check_running_config: "{{ 1/0 }}"  # Potential type-related bug
        domain_name: "{{ [] | random }}"  # Potential type-related bug
        domain_search: "{{ '' | random }}"  # Potential type-related bug
        hostname: "{{ 'Switch1' | int }}"  # Potential type-related bug
        name_servers:
          - "{{ '8.8.8.8' }}"
          - "{{ '8.8.4.4' }}"
        state: present