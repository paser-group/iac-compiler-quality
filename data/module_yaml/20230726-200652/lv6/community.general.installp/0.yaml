---
- hosts: all
  gather_facts: false

  tasks:
    - name: Install packages
      community.general.installp:
        accept_license: "{{ accept_license }}"
        name: "{{ item }}"
        repository_path: "{{ repository_path }}"
        state: "{{ state }}"
      with_items:
        - "package1"
        - "package2"
        - "package3"
      register: install_result

    - name: Debug install_result
      debug:
        var: install_result