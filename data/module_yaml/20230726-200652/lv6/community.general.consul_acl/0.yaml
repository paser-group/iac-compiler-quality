- name: Test playbook for community.general.consul_acl module
  hosts: localhost
  tasks:
    - name: Create Consul ACL
      community.general.consul_acl:
        host: "{{ host }}"
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ name }}"
        port: "{{ port }}"
        rules: "{{ rules }}"
        scheme: "{{ scheme }}"
        state: present
        token: "{{ token }}"
        token_type: "{{ token_type }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Display module debug output
      debug:
        var: result

    - name: Manipulate Consul ACL with varied encodings
      include_tasks: manipulate_consul_acl.yml
      vars:
        host: "{{ host }}"
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ name }}"
        port: "{{ port }}"
        scheme: "{{ scheme }}"
        token: "{{ token }}"
        token_type: "{{ token_type }}"
        validate_certs: "{{ validate_certs }}"

- name: Test encode/decode string manipulation
  hosts: localhost
  tasks:
    - name: Manipulate the string using different encodings
      include_tasks: manipulate_strings.yml
      vars:
        input_string: "{{ input_string }}"