---
- name: Test honeybadger_deployment module with varied string encodings
  hosts: localhost
  gather_facts: false
  vars:
    environment: "development"
    repo: "https://github.com/example/repo.git"
    revision: "master"
    token: "abc123"
    url: "https://honeybadger.io"
    user: "exampleuser"
    validate_certs: true

  tasks:
    - name: Generate encoded strings
      debug:
        var:
          encoded_environment: "{{ environment | b64encode }}"
          encoded_repo: "{{ repo | b64encode }}"
          encoded_revision: "{{ revision | b64encode }}"
          encoded_token: "{{ token | b64encode }}"
          encoded_url: "{{ url | b64encode }}"
          encoded_user: "{{ user | b64encode }}"
          encoded_validate_certs: "{{ validate_certs | b64encode }}"

    - name: Deploy to Honeybadger.io
      community.general.honeybadger_deployment:
        environment: "{{ encoded_environment }}"
        repo: "{{ encoded_repo }}"
        revision: "{{ encoded_revision }}"
        token: "{{ encoded_token }}"
        url: "{{ encoded_url }}"
        user: "{{ encoded_user }}"
        validate_certs: "{{ encoded_validate_certs }}"