- name: Manage Elasticsearch plugin
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate varied encodings
      set_fact:
        plugin_name: "{{ item }}"
      loop:
        - "{{ 'plugin1' }}"
        - "{{ 'plugin2' }}"
        - "{{ 'plugin3' }}"
        - "{{ 'plugin4' }}"
        - "{{ 123 }}"
        - "{{ True }}"
        - "{{ ['-e', '--example'] }}"
        - "{{ {'name': 'plugin_name'} }}"
        - "{{ [1, 2, 3] }}"
        - "{{ {'plugin_name': 'plugin'} }}"

    - name: Install Elasticsearch plugin
      community.general.elasticsearch_plugin:
        name: "{{ plugin_name }}"
        state: present