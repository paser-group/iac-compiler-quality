---
- name: Test playbook for community.general.logentries module
  hosts: localhost
  gather_facts: false
  vars:
    logtype: "syslog"
    name: "test-log"
    path: "/var/log/test.log"
    state: "present"

  tasks:
    - name: Install required packages
      become: true
      package:
        name: python3-pip
        state: present

    - name: Install logentries python library
      become: true
      pip:
        name: logentries
        state: present

    - name: Test community.general.logentries module with varied encodings
      community.general.logentries:
        logtype: "{{ logtype }}"
        name: "{{ name }}"
        path: "{{ path }}"
        state: "{{ state }}"
      register: result

    - name: Display module output
      debug:
        var: result