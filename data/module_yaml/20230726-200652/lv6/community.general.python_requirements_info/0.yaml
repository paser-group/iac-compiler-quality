---
- name: Find Python Requirements Info
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required python modules on the control node
      pip:
        name: community.general
        state: present

    - name: Gather Python Requirements Info
      community.general.python_requirements_info:
        dependencies:
          - some_dependency
          - another_dependency
      register: requirements_info

    - name: Show Python Path
      debug:
        var: requirements_info.python_path

    - name: Assert Output
      fail:
        msg: "Python Path is not defined"
      when: requirements_info is not defined or requirements_info.python_path is not defined