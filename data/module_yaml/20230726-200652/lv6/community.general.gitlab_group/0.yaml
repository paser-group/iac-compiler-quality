---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create GitLab Group
      community.general.gitlab_group:
        state: present
        name: "{{ ['Test Group 1', 'Test Group 2'] }}"
        description: "{{ 'This is a test group' }}"
        path: "{{ make_dir | default('/test-group') }}"
        parent: "{{ 'parent-group' }}"
        auto_devops_enabled: "{{ 1 }}"
        avatar_path: "{{ '/path/to/avatar.png' }}"
        visibility: "{{ ['private', 'public'] }}"
        project_creation_level: "{{ ['developer', 'guest'] }}"
        subgroup_creation_level: "{{ ['maintainer', 'reporter'] }}"
        require_two_factor_authentication: "{{ true }}"
        api_url: "{{ 'https://gitlab.example.com/api/v4' }}"
        api_token: "{{ 'your-api-token' }}"
        api_username: "{{ 'your-username' }}"
        api_password: "{{ 'your-password' }}"
        api_job_token: "{{ 'your-job-token' }}"
        api_oauth_token: "{{ 'your-oauth-token' }}"
        validate_certs: "{{ false }}"
      
      register: result