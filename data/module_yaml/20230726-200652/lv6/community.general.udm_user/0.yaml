---
- name: Test Ansible Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create user with varied encodings
      community.general.udm_user:
        name: "{{ username }}"
        firstname: 'John'
        lastname: 'Doe'
        title: 'Engineer'
        description: 'Ansible Tester'
        state: 'present'
        # Various attributes with different encodings
        city: 'České Budějovice'     # UTF-8 encoding
        street: 'Straße'             # UTF-8 encoding
        postcode: '\u0041\u0042'     # Unicode escape (AB)
        country: '\u0393\u03b5\u03c1\u03bc\u03b1\u03bd\u03af\u03b1'   # Unicode escape (Γερμανία)
        email: ['user@example.com', '\x75\x73\x65\x72\x40\x65\x78\x61\x6d\x70\x6c\x65\x2e\x63\x6f\x6d']   # ASCII, hexadecimal encoding
      register: result

    - name: Debug result
      debug:
        var: result