---
- name: Test playbook for 'community.general.yarn' module
  hosts: localhost
  gather_facts: false

  vars:
    yarn_executable: "/usr/local/bin/yarn"
    yarn_registry: "http://registry.npmjs.org/"
    yarn_version: "1.22.10"

  tasks:
    - name: Install yarn using 'community.general.yarn' module
      community.general.yarn:
        executable: "{{ yarn_executable }}"
        registry: "{{ yarn_registry }}"
        version: "{{ yarn_version }}"
        state: present
      register: yarn_install

    - name: Debug yarn_install
      debug:
        var: yarn_install

    - name: Test execution of yarn command
      command: "{{ yarn_executable }} --version"
      register: yarn_version_output
      changed_when: false

    - name: Debug yarn_version_output
      debug:
        var: yarn_version_output