---
- name: Test playbook for community.network.avi_l4policyset
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create L4PolicySet
      community.network.avi_l4policyset:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        api_version: "{{ api_version }}"
        avi_credentials:
          controller: "{{ controller }}"
          username: "{{ username }}"
          password: "{{ password }}"
          tenant: "{{ tenant }}"
        name: "{{ item }}"
        state: present
      with_items:
        - "l4policyset1"
        - "l4policyset2"
        - "l4policyset3"
        - "l4policyset4"
        - "l4policyset5"
        - "l4policyset6"
        - "l4policyset7"
        - "l4policyset8"
        - "l4policyset9"
        - "l4policyset10"
      register: result

    - name: Debug result
      debug:
        var: result