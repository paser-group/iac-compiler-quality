---
- name: Test playbook for community.general.influxdb_query module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Test Case 1 - Invalid port
      community.general.influxdb_query:
        hostname: localhost
        port: "8080"  # Invalid port as a string
        username: admin
        password: password
        database_name: mydb
        query: "SELECT * FROM cpu"
      register: result1
      failed_when: false
      ignore_errors: true

    - name: Test Case 2 - Invalid retries
      community.general.influxdb_query:
        hostname: localhost
        port: 8086
        username: admin
        password: password
        database_name: mydb
        query: "SELECT * FROM cpu"
        retries: "3"  # Invalid retries as a string
      register: result2
      failed_when: false
      ignore_errors: true

    - name: Test Case 3 - Invalid timeout
      community.general.influxdb_query:
        hostname: localhost
        port: 8086
        username: admin
        password: password
        database_name: mydb
        query: "SELECT * FROM cpu"
        timeout: "5"  # Invalid timeout as a string
      register: result3
      failed_when: false
      ignore_errors: true

    - name: Test Case 4 - Invalid validate_certs
      community.general.influxdb_query:
        hostname: localhost
        port: 8086
        username: admin
        password: password
        database_name: mydb
        query: "SELECT * FROM cpu"
        validate_certs: "true"  # Invalid validate_certs value as a string
      register: result4
      failed_when: false
      ignore_errors: true

    - name: Test Case 5 - Invalid ssl
      community.general.influxdb_query:
        hostname: localhost
        port: 8086
        username: admin
        password: password
        database_name: mydb
        query: "SELECT * FROM cpu"
        ssl: "false"  # Invalid ssl value as a string
      register: result5
      failed_when: false
      ignore_errors: true