---
- name: Validate data using ansible.utils.validate module
  hosts: all
  gather_facts: false
  tasks:
    - name: Validate data with varied encodings
      ansible.utils.validate:
        criteria: "{{ item.criteria }}"
        data: "{{ item.data }}"
        engine: "{{ item.engine }}"
      loop:
        - { criteria: "{{ 'special ☺ characters' | b64encode }}", data: "some data", engine: "universal" }
        - { criteria: "{{ '香港' | utf8 }}, no filters", data: "some other data", engine: "legacy" }
        - { criteria: "{{ lookup('file', 'encoding_file.txt') }}", data: "file data", engine: "custom" }