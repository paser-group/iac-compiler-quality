- name: Manipulate Rackspace Cloud Auto Scaling Policy
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Test case 1 - Default encoding (utf-8)
      community.general.rax_scaling_policy:
        api_key: "my_api_key"
        at: "localhost"
        auth_endpoint: "https://auth.endpoint.com"
        change: 1
        cooldown: 60
        credentials: "/path/to/credentials"
        cron: "* * * * *"
        desired_capacity: 2
        env: "dev"
        identity_type: "user"
        is_percent: true
        name: "Scaling Policy 1"
        policy_type: "webhook"
        region: "us-east-1"
        scaling_group: "my_scaling_group"
        state: present
        tenant_id: "my_tenant_id"
        tenant_name: "my_tenant_name"
        username: "my_username"
        validate_certs: true
      register: result1

    - name: Display result1
      debug:
        var: result1

    - name: Test case 2 - ISO-8859-1 encoding
      community.general.rax_scaling_policy:
        api_key: "my_api_key"
        at: "localhost"
        auth_endpoint: "https://auth.endpoint.com"
        change: 1
        cooldown: 60
        credentials: "/path/to/credentials"
        cron: "* * * * *"
        desired_capacity: 2
        env: b"\xe2\x9c\x93"
        identity_type: b"user".decode("utf-8").encode("iso-8859-1")
        is_percent: true
        name: b"Scaling Policy 2".decode("utf-8").encode("iso-8859-1")
        policy_type: "webhook"
        region: b"us-east-1".decode("utf-8").encode("iso-8859-1")
        scaling_group: "my_scaling_group"
        state: present
        tenant_id: "my_tenant_id"
        tenant_name: "my_tenant_name"
        username: b"my_username".decode("utf-8").encode("iso-8859-1")
        validate_certs: true
      register: result2

    - name: Display result2
      debug:
        var: result2