---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate strings with varied encodings
      set_fact:
        package_names:
          - '\ud83d\ude00'   # UTF-8 encoded string
          - '\u0905'         # Devanagari letter 'A'

    - name: Install MacPorts packages
      community.general.macports:
        name: "{{ package_names }}"
        selfupdate: true
        state: present
        upgrade: false
        variant: default
      register: macports_result

    - name: Print MacPorts result
      debug:
        var: macports_result