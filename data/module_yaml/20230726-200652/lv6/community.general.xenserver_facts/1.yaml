- name: Test xenserver_facts module
  hosts: all
  gather_facts: False

  tasks:
    - name: Generate strings with varied encodings
      shell: |
        python -c 'print("String with varied encodings: \u00E4\u00EB\u00EF\u00F6\u00FC")'
      register: varied_encoding_strings

      failed_when: false

    - name: Gather XenServer facts
      community.general.xenserver_facts:
        host: "{{ inventory_hostname }}"
      register: xenserver_facts_result

    - name: Debug varied encoding strings
      debug:
        var: varied_encoding_strings.stdout

    - name: Debug XenServer facts
      debug:
        var: xenserver_facts_result