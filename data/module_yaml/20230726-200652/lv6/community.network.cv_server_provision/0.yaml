---
- name: Test playbook for Ansible latent type-related bug exploration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Provision server port with template configuration
      community.network.cv_server_provision:
        action: "{{ action | default(None) }}"
        auto_run: "{{ auto_run | default(true) }}"
        host: "{{ host | default(None) }}"
        password: "{{ password | default(None) }}"
        port: "{{ port | default(None) }}"
        port_vlan: "{{ port_vlan | default(None) }}"
        protocol: "{{ protocol | default(None) }}"
        server_name: "{{ server_name | default(None) }}"
        switch_name: "{{ switch_name | default(None) }}"
        switch_port: "{{ switch_port | default(None) }}"
        template: "{{ template | default(None) }}"
        username: "{{ username | default(None) }}"
      register: result

    - name: Print debug information
      debug:
        var: result

    # Test case 1: Generate strings with varied encodings
    - name: Test case 1 - Generate strings with varied encodings
      set_fact:
        encoded_strings:
          - "{{ switch_name | b64encode }}"
          - "{{ server_name | b64encode }}"
          - "{{ username | b64encode }}"
          - "{{ password | b64encode }}"
      register: encoded_result

    - name: Print encoded strings
      debug:
        var: encoded_result