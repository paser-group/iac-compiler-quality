---
- name: Test playbook for scaleway_sshkey module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with varied encoding for api_timeout
      community.general.scaleway_sshkey:
        api_timeout: "{{ item }}"
        api_token: "dummy_token"
      loop:
        - 10
        - "10"
        - "10s"
        - "10m"
        - "10h"
        - false
        - null
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for api_token
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "{{ item }}"
      loop:
        - "dummy_token"
        - 12345
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for api_url
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "dummy_token"
        api_url: "{{ item }}"
      loop:
        - "https://api.scaleway.com"
        - 12345
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for query_parameters
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "dummy_token"
        api_url: "https://api.scaleway.com"
        query_parameters: "{{ item }}"
      loop:
        - {}
        - "{ 'param1': 'value1', 'param2': 'value2' }"
        - 12345
        - []
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for ssh_pub_key
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "dummy_token"
        api_url: "https://api.scaleway.com"
        ssh_pub_key: "{{ item }}"
      loop:
        - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD..."
        - 12345
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for state
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "dummy_token"
        api_url: "https://api.scaleway.com"
        state: "{{ item }}"
      loop:
        - "present"
        - "absent"
        - 12345
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false

    - name: Test with varied encoding for validate_certs
      community.general.scaleway_sshkey:
        api_timeout: 10
        api_token: "dummy_token"
        api_url: "https://api.scaleway.com"
        validate_certs: "{{ item }}"
      loop:
        - true
        - false
        - "true"
        - "false"
        - 12345
        - []
        - {}
      register: result
      ignore_errors: true
      failed_when: false