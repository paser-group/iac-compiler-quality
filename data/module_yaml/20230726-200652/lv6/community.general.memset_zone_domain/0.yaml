---
- name: Test playbook for community.general.memset_zone_domain module
  hosts: localhost
  gather_facts: false
  
  tasks:
    
    - name: Create domain
      community.general.memset_zone_domain:
        api_key: "{{ api_key }}"
        domain: "{{ domain }}"
        state: present
        zone: "{{ zone }}"
      register: create_domain_result
      
    - name: Display create domain result
      debug:
        var: create_domain_result
    
    - name: Generate strings with varied encodings
      set_fact:
        encoded_strings:
          - "{{ domain | unicode_escape }}"
          - "{{ domain | urlencode }}"
          - "{{ domain | urlize }}"
    
    - name: Delete domain
      community.general.memset_zone_domain:
        api_key: "{{ api_key }}"
        domain: "{{ item | string }}"
        state: absent
        zone: "{{ zone }}"
      loop: "{{ encoded_strings }}"
      register: delete_domain_result
      
    - name: Display delete domain result
      debug:
        var: delete_domain_result