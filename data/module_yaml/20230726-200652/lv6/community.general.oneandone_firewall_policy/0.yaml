---
- name: Test Ansible module for oneandone_firewall_policy
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Firewall Policy
      community.general.oneandone_firewall_policy:
        api_url: "https://api.1and1.com/v1"
        auth_token: "YOUR_AUTH_TOKEN"
        name: "Firewall Policy Test"
        description: "This is a test firewall policy"
        firewall_policy: "CUSTOM"
        rules:
          - protocol: "TCP"
            port_from: 80
            port_to: 80
            source: "10.1.1.1"
        add_rules:
          - protocol: "TCP"
            port_from: 8080
            port_to: 8080
            source: "10.1.1.2"
        remove_rules:
          - protocol: "UDP"
            port_from: 53
            port_to: 53
            source: "10.1.1.3"
        add_server_ips:
          - "10.1.1.4"
        remove_server_ips:
          - "10.1.1.5"
        wait: true
        wait_interval: 10
        wait_timeout: 180
      register: result

    - name: Debug Result
      debug:
        var: result