---
- name: Manage containers using atomic_container module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a container
      community.general.atomic_container:
        name: my_container
        state: started
        image: busybox
        mode: pull
        rootfs: docker://docker.io/busybox
        values:
          - name: MY_ENV_VAR
            value: "Hello, World!"

    - name: Stop the container
      community.general.atomic_container:
        name: my_container
        state: stopped

    - name: Remove the container
      community.general.atomic_container:
        name: my_container
        state: absent