---
- name: Test ansible.builtin.stat module
  hosts: all
  gather_facts: false
  tasks:
    - name: Generate strings with varied encodings
      ansible.builtin.shell: |
        python3 -c 'import sys; print("string1".encode(sys.getdefaultencoding()))'
        python3 -c 'import sys; print("string2".encode(sys.getdefaultencoding(), errors="ignore"))'
        python3 -c 'import sys; print("string3".encode(sys.getdefaultencoding(), errors="replace"))'
        python3 -c 'import sys; print(b"\x80".decode(sys.getdefaultencoding(), errors="ignore"))'
        python3 -c 'import sys; print("string4".encode("utf-8").decode("utf-8", errors="ignore"))'
      register: string_variations

    - name: Debug string variations
      debug:
        var: string_variations