---

- name: Test Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set system value
      community.general.sysrc:
        name: "{{ item.name }}"
        value: "{{ item.value }}"
        state: "{{ item.state }}"
      with_items:
        - { name: "syslogd_flags", value: "YES", state: "present" }
        - { name: "sshd_flags", value: 12345, state: "present" }
        - { name: "ntpdate_flags", value: true, state: "present" }
        - { name: "malicious_input", value: ["cmd"], state: "absent" }
      register: sysrc_result

    - name: Debug sysrc_result
      debug:
        var: sysrc_result