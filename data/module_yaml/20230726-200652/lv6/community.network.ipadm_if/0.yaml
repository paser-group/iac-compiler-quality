---
- name: Test playbook for community.network.ipadm_if module
  hosts: localhost
  gather_facts: no
  
  vars:
    interfaces:
      - 'ubuntu1'
      - 'alpine1'
      - 'centos1'
      - 'redhat1'
      - '\u0075\u0062\u0075\u006e\u0074\u0075\u0031'  # Encoded name: ubuntu1
      - '\u0061\u006c\u0070\u0069\u006e\u0065\u0031'  # Encoded name: alpine1
      - '\u0063\u0065\u006e\u0074\u006f\u0073\u0031'  # Encoded name: centos1
      - '\u0072\u0065\u0064\u0068\u0061\u0074\u0031'  # Encoded name: redhat1
  
  tasks:
    - name: Create IP interfaces with varied encodings
      community.network.ipadm_if:
        name: '{{ item }}'
        state: present
        temporary: '{{ temporary_flag }}'
      with_items: '{{ interfaces }}'
      vars:
        temporary_flag: '{{ item.endswith("1") }}'
      register: result
      
    - name: Debug result
      debug:
        var: result
        
    - name: Remove IP interfaces with varied encodings
      community.network.ipadm_if:
        name: '{{ item.item }}'
        state: absent
      with_items: '{{ result.results }}'
      when: item.item is defined