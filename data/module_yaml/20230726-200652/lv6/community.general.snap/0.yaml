- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    channel: 123
    classic: "true"
    name: ["package1", "package2"]
    options:
      - "--force"
    state: false

  tasks:
    - name: Install snaps with varied encodings
      community.general.snap:
        channel: "{{ channel }}"
        classic: "{{ classic }}"
        name: "{{ name }}"
        options: "{{ options }}"
        state: "{{ state }}"
      register: result

    - name: Debug snap module output
      debug:
        var: result