---
- name: Test CLC Firewall Policy Module
  hosts: localhost
  gather_facts: false

  vars:
    destination_account_alias: "my_destination_account"
    source_account_alias: "my_source_account"
    firewall_policy_id: "my_firewall_policy"
    location: "my_location"
    enabled: "true"
    state: "present"

  tasks:
    - name: Create Firewall Policy
      community.general.clc_firewall_policy:
        destination: ["10.1.1.2"]
        destination_account_alias: "{{ destination_account_alias }}"
        enabled: "{{ enabled }}"
        firewall_policy_id: "{{ firewall_policy_id }}"
        location: "{{ location }}"
        ports: ["tcp/80"]
        source: ["10.1.1.1"]
        source_account_alias: "{{ source_account_alias }}"
        state: "{{ state }}"
        wait: "false"
      register: result
      ignore_errors: true

    - name: Display Result
      debug:
        var: result

    - name: Test Case 1 - Generate strings with varied encodings
      community.general.clc_firewall_policy:
        destination: ["10.1.1.2"]
        destination_account_alias: "{{ destination_account_alias }}"
        enabled: "\ue000\ue001"
        firewall_policy_id: "{{ firewall_policy_id }}"
        location: "{{ location }}"
        ports: ["tcp/80"]
        source: ["10.1.1.1"]
        source_account_alias: "{{ source_account_alias }}"
        state: "{{ state }}"
        wait: "false"
      register: result
      ignore_errors: true

    - name: Display Result
      debug:
        var: result