---
- name: Test playbook for community.general.rax_queue module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Rackspace queue
      community.general.rax_queue:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        api_key: "{{ item.api_key }}"
        auth_endpoint: "{{ item.auth_endpoint }}"
        credentials: "{{ item.credentials }}"
        env: "{{ item.env }}"
        identity_type: "{{ item.identity_type }}"
        region: "{{ item.region }}"
        tenant_id: "{{ item.tenant_id }}"
        tenant_name: "{{ item.tenant_name }}"
        username: "{{ item.username }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - name: "Queue 1"
          state: present
          api_key: "my_api_key"
          auth_endpoint: "https://api.example.com"
          credentials: "/path/to/credentials"
          env: "production"
          identity_type: "api_key"
          region: "US"
          tenant_id: "my_tenant_id"
          tenant_name: "my_tenant_name"
          username: "my_username"
          validate_certs: false
        - name: "Queue 2"
          state: modified
          api_key: "my_api_key"
          auth_endpoint: "https://api.example.com"
          credentials: "/path/to/credentials"
          env: "testing"
          identity_type: "username"
          region: "EU"
          tenant_id: "my_tenant_id"
          tenant_name: "my_tenant_name"
          username: "my_other_username"
          validate_certs: true

    - name: Print result
      debug:
        var: result