---
- name: Test playbook for community.network.a10_server_axapi3 module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create a server using the a10_server_axapi3 module
      community.network.a10_server_axapi3:
        host: "{{ ansible_host }}"
        username: "admin"
        password: "password"
        server_name: "my_server"
        server_ip: "10.1.1.1"
        server_ports:
          - "80"
        write_config: true
      register: result
      delegate_to: localhost

    - name: Display the result
      debug:
        var: result

- name: Test playbook for varied encoded strings
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create a server using the a10_server_axapi3 module with varied encoded strings
      community.network.a10_server_axapi3:
        host: "{{ ansible_host }}"
        username: "admin"
        password: "password"
        server_name: "{{ item }}"
        server_ip: "{{ item }}"
        server_ports:
          - "{{ item }}"
        write_config: true
      register: result
      delegate_to: localhost
      loop:
        - "{{ 'my_server1' | b64encode }}"
        - "{{ 'my_server2' | b64decode }}"
        - "{{ 'my_server3' | quote }}"
        - "{{ 'my_server4' | urlencode }}"

    - name: Display the result
      debug:
        var: result