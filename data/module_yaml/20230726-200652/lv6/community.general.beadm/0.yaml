---
- name: Test beadm module with varied encodings
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create a ZFS boot environment with varied encoded values
      community.general.beadm:
        name: "{{ item.name }}"
        state: present
        mountpoint: "{{ item.mountpoint }}"
        options: "{{ item.options }}"
        force: "{{ item.force | default(false) }}"
        snapshot: "{{ item.snapshot }}"
      loop:
        - { name: "öäüŇΩ⚡", mountpoint: "/mnt/öäüŇΩ⚡", options: "-o compression=lz4", snapshot: "2022-01-01"}
        - { name: "名古屋", mountpoint: "/mnt/名古屋", options: "", snapshot: "2022-02-01"}
        - { name: "மீண்டும்", mountpoint: "/mnt/மீண்டும்", options: "", snapshot: "2022-03-01"}
        - { name: "السعودية", mountpoint: "/mnt/السعودية", options: "", snapshot: "2022-04-01"}

    - name: Debug output
      debug:
        var: item
      loop:
        - { name: "öäüŇΩ⚡", mountpoint: "/mnt/öäüŇΩ⚡", options: "-o compression=lz4", snapshot: "2022-01-01"}
        - { name: "名古屋", mountpoint: "/mnt/名古屋", options: "", snapshot: "2022-02-01"}
        - { name: "மீண்டும்", mountpoint: "/mnt/மீண்டும்", options: "", snapshot: "2022-03-01"}
        - { name: "السعودية", mountpoint: "/mnt/السعودية", options: "", snapshot: "2022-04-01"}