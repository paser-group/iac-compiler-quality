---
- name: Test Ansible module for latent type-related bugs
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Send a message to jabber with varied encodings
      community.general.jabber:
        host: localhost
        port: 5222
        user: user
        password: password
        to: recipient@example.com
        msg: >
          {% for encoding in ['utf-8', 'ascii', 'utf-16', 'utf-32'] %}
          {{ 'Test message'|string|encoding(encoding) }}
          {% endfor %}