- name: Test playbook for the community.general.lxd_profile module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create LXD profile with varied encodings
      community.general.lxd_profile:
        name: "{{ item.name }}"
        state: present
        description: "{{ item.description }}"
        url: "{{ item.url }}"
        client_cert: "{{ item.client_cert }}"
        client_key: "{{ item.client_key }}"
        trust_password: "{{ item.trust_password }}"
        config: "{{ item.config }}"
        devices: "{{ item.devices }}"
        project: "{{ item.project }}"
        snap_url: "{{ item.snap_url }}"
        merge_profile: "{{ item.merge_profile }}"
      loop:
        - { name: "TestProfile", description: "!@#$%^&*()", url: "\\/", client_cert: "/path/to/cert.pem", client_key: "/path/to/key.pem", trust_password: "password", config: {}, devices: {}, project: "test_project", snap_url: "https:\/\/snap_url.com", merge_profile: true }


- name: Test playbook for the community.general.lxd_profile module with new_name
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create LXD profile with new_name and varied encodings
      community.general.lxd_profile:
        name: "{{ item.name }}"
        new_name: "{{ item.new_name }}"
        state: present
        description: "{{ item.description }}"
        url: "{{ item.url }}"
        client_cert: "{{ item.client_cert }}"
        client_key: "{{ item.client_key }}"
        trust_password: "{{ item.trust_password }}"
        config: "{{ item.config }}"
        devices: "{{ item.devices }}"
        project: "{{ item.project }}"
        snap_url: "{{ item.snap_url }}"
        merge_profile: "{{ item.merge_profile }}"
      loop:
        - { name: "TestProfile2", new_name: "|()*#@@#", description: "!@#$%^&*()", url: "\\/", client_cert: "/path/to/cert.pem", client_key: "/path/to/key.pem", trust_password: "password", config: {}, devices: {}, project: "test_project", snap_url: "https:\/\/snap_url.com", merge_profile: true }