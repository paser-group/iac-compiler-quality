- name: Expose Latent Type-Related Bugs
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Set variables
      vars:
        before_raw: "{{ 'Test String' | b64encode }}"
        after_raw: "{{ 'Test String' }}"
        plugin_dict:
          - key: "key1"
            value: 5
  
    - name: Print variables
      debug:
        var: before_raw
      debug:
        var: after_raw
      debug:
        var: plugin_dict
  
    - name: Run fact_diff
      ansible.utils.fact_diff:
        after_raw: "{{ after_raw }}"
        before_raw: "{{ before_raw }}"
        plugin_dict: "{{ plugin_dict }}"
      register: diff_result
  
    - name: Display diff result
      debug:
        var: diff_result