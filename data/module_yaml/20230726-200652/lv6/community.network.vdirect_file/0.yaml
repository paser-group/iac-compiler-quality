---
- name: Test community.network.vdirect_file module
  hosts: localhost
  gather_facts: False

  vars:
    file_name: "/path/to/file"

  tasks:
    - name: Create a file with varied encodings
      shell: echo "This is a test file" > "{{ file_name }}"
      delegate_to: localhost

    - name: Upload file to vDirect
      community.network.vdirect_file:
        file_name: "{{ file_name }}"
        vdirect_ip: "10.1.1.1"
        vdirect_user: "admin"
        vdirect_password: "password"
        vdirect_timeout: 60
        vdirect_use_ssl: true
        vdirect_wait: False
      register: upload_result

    - name: Debug upload result
      debug:
        var: upload_result