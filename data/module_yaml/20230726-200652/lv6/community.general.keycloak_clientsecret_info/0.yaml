---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    # Define variables with different types
    strings_with_varied_encoding:
      - "{{ 'myfile.txt' }}"
      - "{{ 123 }}"
      - "{{ true }}"
      - "{{ {'key': 'value'} }}"

  tasks:
    - name: Validate if variable type is string
      fail:
        msg: "Type-related bug found! The variable type is not string."
      when: item | type_debug != 'str'
      loop: "{{ strings_with_varied_encoding }}"