---
- name: Manage Bitbucket Pipeline Variable
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Add Bitbucket Pipeline Variable - Base64 Encoding
      community.general.bitbucket_pipeline_variable:
        client_id: "your_client_id"
        client_secret: "your_client_secret"
        name: "variable_name"
        password: "your_bitbucket_password"
        repository: "your_repository"
        secured: false
        user: "your_bitbucket_username"
        value: "{{ 'variable_value' | b64encode }}"
        workspace: "your_bitbucket_workspace"
      register: result_base64
      
    - name: Debug result - Base64 Encoding
      debug:
        var: result_base64
      
    - name: Add Bitbucket Pipeline Variable - UTF-8 Encoding
      community.general.bitbucket_pipeline_variable:
        client_id: "your_client_id"
        client_secret: "your_client_secret"
        name: "variable_name"
        password: "your_bitbucket_password"
        repository: "your_repository"
        secured: false
        user: "your_bitbucket_username"
        value: "{{ 'variable_value' | string }}"
        workspace: "your_bitbucket_workspace"
      register: result_utf8
      
    - name: Debug result - UTF-8 Encoding
      debug:
        var: result_utf8