---
- name: Test replace module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create test file
      copy:
        content: "This is a test file with some test content."
        dest: /tmp/test_file.txt
        force: yes

    - name: Replace string with invalid integer
      ansible.builtin.replace:
        path: /tmp/test_file.txt
        regexp: "test"
        replace: "{{ invalid_integer }}"
        encoding: utf-8
        validate: echo hello