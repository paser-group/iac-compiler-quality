---
- name: Execute command with expect module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Run command with expect module
      ansible.builtin.expect:
        chdir: /path/to/command
        command: "{{ my_command }}"
        creates: /path/to/output
        echo: "{{ my_echo }}"
        removes: /path/to/temp
        responses:
          - "Enter your name:"
            "{{ my_name }}"
          - "Enter your age:"
            "{{ my_age }}"
        timeout: "{{ my_timeout }}"
      register: expect_output

    - name: Print expect output
      debug:
        var: expect_output