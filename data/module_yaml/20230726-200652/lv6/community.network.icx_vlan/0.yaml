---
- name: Manage VLANs on Ruckus ICX switches
  hosts: icx_switches
  gather_facts: False

  tasks:
    - name: Create VLANs
      community.network.icx_vlan:
        vlan_id: "{{ item.vlan_id }}"
        name: "{{ item.name }}"
        purge: "{{ item.purge | default(false) }}"
        state: present
      loop:
        - vlan_id: 10
          name: "VLAN 10"
        - vlan_id: 20
          name: "VLAN 20 Ã¼"
        - vlan_id: 30
          name: "VLAN 30 â‚¬"
        - vlan_id: 40
          name: "VLAN 40 ðŸ˜ƒ"

    - name: Delete VLANs
      community.network.icx_vlan:
        vlan_id: "{{ item.vlan_id }}"
        purge: "{{ item.purge | default(false) }}"
        state: absent
      loop:
        - vlan_id: 10
        - vlan_id: 20
        - vlan_id: 30
        - vlan_id: 40