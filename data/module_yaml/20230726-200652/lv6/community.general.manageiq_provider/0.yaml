---
- name: Manage provider using manageiq_provider module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage provider
      community.general.manageiq_provider:
        manageiq_connection:
          url: "{{ manageiq_url }}"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"
        type: "{{ provider_type }}"
        subscription: "{{ provider_subscription }}"
        provider_region: "{{ provider_region }}"
        zone: "{{ provider_zone }}"
        project: "{{ provider_project }}"
        name: "{{ provider_name }}"
        state: "{{ provider_state }}"
        tenant_mapping_enabled: "{{ tenant_mapping_enabled }}"
        api_version: "{{ api_version }}"
        azure_tenant_id: "{{ azure_tenant_id }}"
        ssh_keypair: "{{ ssh_keypair }}"
      register: provider_result

    - name: Debug result
      debug:
        var: provider_result