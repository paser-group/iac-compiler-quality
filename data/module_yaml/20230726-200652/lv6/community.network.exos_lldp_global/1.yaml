---
- name: Test LLDP Global Configuration
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Configure LLDP Global Settings
      community.network.exos_lldp_global:
        config:
          enable_lldp: true
          enable_receive: true
          enable_transmit: true
          test_string: "{{ item }}"
        state: present
      register: lldp_global
      loop:
        - "test_string"
        - "{{ lookup('pipe', 'echo -n test_string | base64') }}"
        - "{{ lookup('pipe', 'printf test_string | base64') }}"

    - name: Debug LLDP Global Configuration
      debug:
        var: lldp_global