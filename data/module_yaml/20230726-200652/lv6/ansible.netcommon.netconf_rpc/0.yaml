- name: Execute operations on NETCONF enabled devices
  hosts: localhost
  gather_facts: False

  vars:
    content: "{{ lookup('pipe', 'echo -n \"<rpc></rpc>\" | base64') }}"
    display: "UTF-8"
    rpc: "GET"
    xmlns: "example.com"

  tasks:
    - name: Execute NETCONF RPC on target device
      ansible.netcommon.netconf_rpc:
        content: "{{ content }}"
        display: "{{ display }}"
        rpc: "{{ rpc }}"
        xmlns: "{{ xmlns }}"
      register: result

    - name: Debug output
      debug:
        var: result