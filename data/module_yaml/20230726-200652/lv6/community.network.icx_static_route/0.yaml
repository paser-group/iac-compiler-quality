---
- name: Test playbook for community.network.icx_static_route module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add static IP routes
      community.network.icx_static_route:
        admin_distance: "120"
        aggregate: []
        check_running_config: "no"
        mask: "255.255.255.0"
        next_hop: 10.1.1.254
        prefix: 10.2.2.0
        purge: "no"
        state: "present"
      register: result

    - debug:
        var: result

    - name: Remove static IP routes
      community.network.icx_static_route:
        admin_distance: "120"
        aggregate: []
        check_running_config: "no"
        mask: "255.255.255.0"
        next_hop: 10.1.1.254
        prefix: 10.2.2.0
        purge: "yes"
        state: "absent"
      register: result

    - debug:
        var: result