---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: False

  vars:
    servers:
      - host: "10.1.1.1"
        port: 80
        name: "web-server1"
      - host: "10.1.1.2"
        port: 80
        name: 10

  tasks:
    - name: Create a service group
      community.network.a10_service_group:
        host: "localhost"
        username: admin
        password: password
        state: present
        service_group: "web-service"
        service_group_protocol: "http"
        servers: "{{ servers }}"
        write_config: True
      register: result