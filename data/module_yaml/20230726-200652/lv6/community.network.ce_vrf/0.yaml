---
- name: Test community.network.ce_vrf module
  hosts: localhost
  gather_facts: false

  vars:
    description: null
    state: null
    vrf: null

  tasks:
    - name: Create VPN instance on HUAWEI
      community.network.ce_vrf:
        description: "VPN instance"
        state: "present"
        vrf: "VRF"

    - name: Test with UTF-8 encoded description
      set_fact:
        utf8_encoded_description: "\udb80\udc01"
      vars:
        description: "{{ utf8_encoded_description }}"
      community.network.ce_vrf:
        description: "{{ description }}"
        state: "{{ state }}"
        vrf: "{{ vrf }}"

    - name: Test with Base64 encoded description
      set_fact:
        base64_encoded_description: "ZXhhbXBsZQ=="
      vars:
        description: "{{ base64_encoded_description }}"
      community.network.ce_vrf:
        description: "{{ description | b64decode }}"
        state: "{{ state }}"
        vrf: "{{ vrf }}"