---
- name: Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Run command with different encodings
      community.network.aireos_command:
        commands:
          - "{{ item }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      loop:
        - "show version"
        - "show interface summary"
        - "show running-config"
        - "show users"
        - "show run-config"
        - "show interfaces"
      vars:
        interval: "{{ '1' | int }}"     # Set desired interval
        match: "{{ 'success' }}"       # Set desired match pattern
        retries: "{{ '3' | int }}"     # Set desired number of retries
        wait_for: "{{ 'boot' }}"       # Set desired wait_for condition

      register: result

    - name: Debug output
      debug:
        var: result