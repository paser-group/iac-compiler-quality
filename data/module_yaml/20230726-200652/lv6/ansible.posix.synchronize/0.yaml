---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Synchronize files using rsync
      ansible.posix.synchronize:
        src: "/path/to/source"
        dest: "/path/to/destination"
        archive: true
        checksum: true
        compress: true
        copy_links: true
        delay_updates: true
        delete: true
        dest_port: "22"  # Pass the destination port as a string instead of an integer
        dirs: true
        existing_only: true
        group: true
        link_dest:
          - "/path/to/link1"
          - "/path/to/link2"
        links: true
        mode: "0644"
        owner: true
        partial: true
        perms: true
        recursive: true
        rsync_opts:
          - "--exclude='*.txt'"
          - "--exclude='*.log'"
        rsync_path: "/usr/bin/rsync"
        rsync_timeout: 300
        set_remote_user: true
        src: "/path/to/source"
        ssh_connection_multiplexing: true
        times: true
        use_ssh_args: true
        verify_host: true
        encoding: "utf-8"  # Use a specific encoding

      ignore_errors: true  # Ignore errors to avoid playbook termination

    - name: Debug output
      debug:
        var: inventory_hostname