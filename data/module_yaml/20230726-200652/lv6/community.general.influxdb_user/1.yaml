- hosts: localhost
  vars:
    influxdb_server: "{{ 'aHR0cDovL2xvY2FsaG9zdDo4MDg2' | b64decode }}"
    influxdb_username: "{{ 'YWRtaW4=' | b64decode }}"
    influxdb_password: "{{ 'YWRtaW4=' | b64decode }}"
    influxdb_database: "{{ 'bXlkYg==' | b64decode }}"

  tasks:
    - name: Create InfluxDB user
      community.general.influxdb_user:
        hostname: "{{ influxdb_server }}"
        username: "{{ influxdb_username }}"
        password: "{{ influxdb_password }}"
        grants:
          - "{{ influxdb_database }}.*:ALL"
      register: user_result
      ignore_errors: true