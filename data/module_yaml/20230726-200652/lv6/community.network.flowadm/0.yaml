- name: Test playbook for community.network.flowadm module
  hosts: localhost
  gather_facts: false
  vars:
    test_name: "test_flowadm"

  tasks:
    - name: Create test flow with varied encodings
      community.network.flowadm:
        name: "{{ test_name }}"
        dsfield: "\x01\x80"
        link: "\x00"
        local_ip: "\u0100"
        local_port: "\xab\xcd"
        maxbw: "\xff"
        priority: "\x01\x02"
        remote_ip: "\xd0\x8e"
        state: "present"
        temporary: true
        transport: "tcp"

    - name: View the created flow
      community.network.flowadm:
        state: "list"

    - name: Delete the created flow
      community.network.flowadm:
        name: "{{ test_name }}"
        state: "absent"