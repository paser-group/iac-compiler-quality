---
- name: Test playbook for Ansible Latent Type-Related Bug Exploration
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create Nomad job
      community.general.nomad_job:
        name: "{{ item.name }}"
        content: "{{ item.content }}"
        content_format: "{{ item.content_format }}"
        state: present
      loop:
        - name: !unsafe_string
          content: !unsafe_string |
            b'content'
          content_format: !unsafe_string
            str: "json"
        - name: !unsafe_string
          content: !unsafe_string |
            b'content'
          content_format: !unsafe_string
            str: "yaml"

  vars:
    unsafe_string:
      module: type
      name: !unsafe_string
      python: str