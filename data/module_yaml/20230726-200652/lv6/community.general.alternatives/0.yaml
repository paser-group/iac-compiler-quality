---
- name: Manage alternative programs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set alternative program
      community.general.alternatives:
        link: "/usr/local/bin/python"
        name: "python"
        path: "/usr/bin/python3"
        priority: 2
        state: "present"
        subcommands: []
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

- name: Test cases
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Test with link containing encoded characters
      community.general.alternatives:
        link: "/tmp/enc%C3%B8ding"
        name: "enc√∏ding"
        path: "/usr/bin/encoding-test"
        priority: 1
        state: "present"
        subcommands: []
      register: result1
      ignore_errors: true

    - name: Debug result1
      debug:
        var: result1

    - name: Test with name containing encoded characters
      community.general.alternatives:
        link: "/usr/local/bin/python3"
        name: "pyth%C3%B8n"
        path: "/usr/bin/python3"
        priority: 2
        state: "present"
        subcommands: []
      register: result2
      ignore_errors: true

    - name: Debug result2
      debug:
        var: result2