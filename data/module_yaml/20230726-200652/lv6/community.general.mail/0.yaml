- name: Test latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Send email with varied encodings
      mail:
        host: "smtp.example.com"
        port: 587
        username: "testuser"
        password: "testpassword"
        sender: "sender@example.com"
        to: "receiver@example.com"
        cc: []
        bcc: []
        subject: "Testing Ansible mail module"
        body: "{{ ('This is a test email.').encode('utf-8') }}"
        charset: "utf-8"
        subtype: ""
        timeout: 30
        ehlohost: "ansible"
        attach: []
        headers: []

  vars:
    ansible_terminal_color:
      red: "{{ '1' | int }}"
      blue: "{{ '2' | int }}"