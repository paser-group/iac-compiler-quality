- name: Test playbook for community.network.ce_vxlan_global module
  hosts: ansible_controller
  gather_facts: false

  tasks:
    - name: Configure VXLAN and bridge domain
      community.network.ce_vxlan_global:
        bridge_domain_id: "{{ hostvars[inventory_hostname]['bridge_domain_id'] | default(None) }}"
        nvo3_acl_extend: "{{ hostvars[inventory_hostname]['nvo3_acl_extend'] | default(None) }}"
        nvo3_ecmp_hash: "{{ hostvars[inventory_hostname]['nvo3_ecmp_hash'] | default(None) }}"
        nvo3_eth_trunk_hash: "{{ hostvars[inventory_hostname]['nvo3_eth_trunk_hash'] | default(None) }}"
        nvo3_gw_enhanced: "{{ hostvars[inventory_hostname]['nvo3_gw_enhanced'] | default(None) }}"
        nvo3_prevent_loops: "{{ hostvars[inventory_hostname]['nvo3_prevent_loops'] | default(None) }}"
        nvo3_service_extend: "{{ hostvars[inventory_hostname]['nvo3_service_extend'] | default(None) }}"
        state: "{{ hostvars[inventory_hostname]['state'] | default(None) }}"
        tunnel_mode_vxlan: "{{ hostvars[inventory_hostname]['tunnel_mode_vxlan'] | default(None) }}"
      register: vxlan_result

    - name: Print result
      debug:
        var: vxlan_result