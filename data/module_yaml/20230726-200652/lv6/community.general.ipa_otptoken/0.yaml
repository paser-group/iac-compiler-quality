---
- name: Test playbook for community.general.ipa_otptoken
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set test variables
      vars:
        algorithm: "sha1"
        counter: "five"
        description: 12345
        digits: "six"
        enabled: "yes"
        interval: "thirty"
        ipa_host: "ipa.example.com"
        ipa_pass: "password123"
        ipa_port: "443"
        ipa_prot: 12345
        ipa_timeout: true
        ipa_user: "admin"
        model: true
        newuniqueid: 12345
        notafter: 2023-12-31
        notbefore: "2021-01-01"
        offset: "zero"
        otptype: 12345
        owner: 12345
        secretkey: "mysecretkey"
        serial: true
        state: "present"
        uniqueid: true
        validate_certs: "false"
        vendor: true
      tasks:
        - name: Create the OTP token
          community.general.ipa_otptoken:
            algorithm: "{{ algorithm }}"
            counter: "{{ counter }}"
            description: "{{ description }}"
            digits: "{{ digits }}"
            enabled: "{{ enabled }}"
            interval: "{{ interval }}"
            ipa_host: "{{ ipa_host }}"
            ipa_pass: "{{ ipa_pass }}"
            ipa_port: "{{ ipa_port }}"
            ipa_prot: "{{ ipa_prot }}"
            ipa_timeout: "{{ ipa_timeout }}"
            ipa_user: "{{ ipa_user }}"
            model: "{{ model }}"
            newuniqueid: "{{ newuniqueid }}"
            notafter: "{{ notafter }}"
            notbefore: "{{ notbefore }}"
            offset: "{{ offset }}"
            otptype: "{{ otptype }}"
            owner: "{{ owner }}"
            secretkey: "{{ secretkey }}"
            serial: "{{ serial }}"
            state: "{{ state }}"
            uniqueid: "{{ uniqueid }}"
            validate_certs: "{{ validate_certs }}"
            vendor: "{{ vendor }}"
          register: result

        - debug:
            var: result