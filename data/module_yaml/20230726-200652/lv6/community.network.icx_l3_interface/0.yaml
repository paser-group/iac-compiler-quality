- name: Manage Layer-3 interfaces on Ruckus ICX
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure Layer-3 interfaces
      community.network.icx_l3_interface:
        name: "{{ item.name }}"
        ipv4: "{{ item.ipv4 }}"
        mode: "{{ item.mode }}"
        check_running_config: "{{ item.check_running_config }}"
        state: present
      loop:
        - { name: "eth1", ipv4: "10.1.1.1", mode: "ip", check_running_config: true }
        - { name: "eth2", ipv4: "10.1.1.2", mode: "ip", check_running_config: false }
        - { name: "eth3", ipv4: "10.1.1.3", mode: "aggregate", check_running_config: true }
        - { name: "eth4", ipv4: "10.1.1.4", mode: "ipv6", check_running_config: true }
      register: result

    - name: Debug result
      debug:
        var: result