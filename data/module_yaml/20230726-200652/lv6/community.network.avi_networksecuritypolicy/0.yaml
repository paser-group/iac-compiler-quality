- name: Test playbook for avi_networksecuritypolicy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Network Security Policy
      community.network.avi_networksecuritypolicy:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ item.name }}"
        rules: "{{ item.rules }}"
      with_items:
        - { name: 'Policy with UTF-8 encoded name', rules: [] }
        - { name: 'Policy with ASCII encoded name', rules: [] }
        - { name: '\u0227\u0227', rules: [] }
        - { name: '\uc4e9\ufffd', rules: [] }
        - { name: 'Caf\u00e9', rules: [] }
        - { name: 'Caf\xc3\xa9', rules: [] }
        - { name: 'Caf\xc3\xa9', rules: [] }
        - { name: 'Caf\xc3\xa9', rules: [] }

      register: result

    - debug:
        var: result