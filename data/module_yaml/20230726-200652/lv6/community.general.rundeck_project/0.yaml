---
- name: Test playbook for community.general.rundeck_project module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create Rundeck Project
      community.general.rundeck_project:
        url: "http://{{ hostvars[inventory_hostname].inventory_hostname }}"
        url_username: "{{ hostvars[inventory_hostname].url_username }}"
        url_password: "{{ hostvars[inventory_hostname].url_password }}"
        api_token: "{{ hostvars[inventory_hostname].api_token }}"
        api_version: "{{ hostvars[inventory_hostname].api_version }}"
        name: "{{ hostvars[inventory_hostname].name | b64decode }}"
        state: "{{ hostvars[inventory_hostname].state }}"
        client_cert: "{{ hostvars[inventory_hostname].client_cert }}"
        client_key: "{{ hostvars[inventory_hostname].client_key }}"
        force: "{{ hostvars[inventory_hostname].force }}"
        force_basic_auth: "{{ hostvars[inventory_hostname].force_basic_auth }}"
        http_agent: "{{ hostvars[inventory_hostname].http_agent | b64decode }}"
        use_gssapi: "{{ hostvars[inventory_hostname].use_gssapi }}"
        use_proxy: "{{ hostvars[inventory_hostname].use_proxy }}"
        validate_certs: "{{ hostvars[inventory_hostname].validate_certs }}"
      register: result
      
    - name: Debug result
      debug:
        var: result