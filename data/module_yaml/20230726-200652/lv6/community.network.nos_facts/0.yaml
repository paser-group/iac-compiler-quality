---
- name: Retrieve network facts from devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate encoded strings
      set_fact:
        encoded_strings:
          - name: "UTF-8"
            string: "{{ ansible_hostname.encode('utf-8') }}"
          - name: "UTF-16"
            string: "{{ ansible_hostname.encode('utf-16') }}"
          - name: "UTF-32"
            string: "{{ ansible_hostname.encode('utf-32') }}"
          - name: "Latin-1"
            string: "{{ ansible_hostname.encode('latin-1') }}"
          - name: "ASCII"
            string: "{{ ansible_hostname.encode('ascii', 'ignore') }}"

    - name: Gather network facts
      community.network.nos_facts:
        gather_subset: None
      register: network_facts

    - name: Print network facts
      debug:
        var: network_facts