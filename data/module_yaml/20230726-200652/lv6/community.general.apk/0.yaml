- name: Test playbook for 'community.general.apk' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages using apk module
      community.general.apk:
        available: true
        name:
          - package1
          - package2
        no_cache: true
        repository:
          - repository1
          - repository2
        state: present
        update_cache: true
        upgrade: true
        world: 'true'

    - name: Generate strings with varied encodings
      shell: "echo '{{ item }}' | iconv -f UTF-8 -t {{ item }}"
      register: encoded_strings
      loop:
        - "Example string 1"
        - "Example string 2"
        - "Example string 3"
        - "Example string 4"

    - name: Print encoded strings
      debug:
        var: encoded_strings