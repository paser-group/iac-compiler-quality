---
- name: Expose latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate strings with varied encodings
      set_fact:
        test_string: "{{ lookup('pipe', 'python -c \"print(b\\'varied_encodings\\'.decode(\\'utf-8\\').encode(\\'cp1252\\'))\\'\"') }}"

    - name: Attempt to create a cron job with varied encodings
      ansible.builtin.cron:
        name: "Cron Job with Varied Encodings"
        job: "{{ test_string }}"
        state: present
      when: test_string is defined
      register: varied_encoding_cron_job