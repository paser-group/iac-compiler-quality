---
- name: Test community.general.lbu module
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate strings with varied encodings
      set_fact:
        test_strings: ["Ä", "Å", "Ã", "é", "è"]

    - name: Perform local backup using lbu
      lbu:
        commit: "{{ item }}"
        exclude: "{{ test_strings }}"
        include: "{{ test_strings }}"
      loop:
        - True
        - False
      register: lbu_result

    - name: Debug lbu result
      debug:
        var: lbu_result