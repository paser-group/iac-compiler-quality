---
- name: Test znode module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create znode
      community.general.znode:
        name: "/my_znode"
        value: "Hello, World!"
        recursive: true
        state: present
      register: result

    - name: Display create result
      debug:
        var: result

    - name: Retrieve znode
      community.general.znode:
        name: "/my_znode"
        state: present
      register: result

    - name: Display retrieve result
      debug:
        var: result

    - name: Update znode
      community.general.znode:
        name: "/my_znode"
        value: "Updated Value"
        state: present
      register: result

    - name: Display update result
      debug:
        var: result

    - name: Delete znode
      community.general.znode:
        name: "/my_znode"
        state: absent
      register: result

    - name: Display delete result
      debug:
        var: result