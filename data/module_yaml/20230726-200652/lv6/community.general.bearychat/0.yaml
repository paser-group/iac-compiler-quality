---
- name: Send Bearychat Message
  hosts: localhost
  gather_facts: false

  vars:
    bearychat_channel: "your_channel"
    bearychat_token: "your_token"
    bearychat_text: "Hello, Bearychat!"

  tasks:
    - name: Send Bearychat message with different encodings
      community.general.bearychat:
        channel: "{{ bearychat_channel }}"
        token: "{{ bearychat_token }}"
        text: "{{ bearychat_text | b64encode if encode_type == 'base64' else bearychat_text | b32encode if encode_type == 'base32' else bearychat_text }}"
        markdown: true
        url: "https://example.com"
        attachments:
          - title: "Attachment 1"
            text: "Attachment 1 text"
            color: "blue"
          - title: "Attachment 2"
            text: "Attachment 2 text"
            color: "green"
      register: result

    - name: Display the result
      debug:
        var: result