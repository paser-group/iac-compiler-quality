---
- name: Test playbook for Vertica database roles
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Vertica database role
      community.general.vertica_role:
        cluster: localhost
        db: my_db
        login_user: admin
        login_password: "{{ password }}"
        port: 5433
        role: "{{ role }}"
        state: present
        assigned_roles: "admin, role1"

    - name: Remove Vertica database role
      community.general.vertica_role:
        cluster: localhost
        db: my_db
        login_user: admin
        login_password: "{{ password }}"
        port: 5433
        role: "{{ role }}"
        state: absent
        assigned_roles: ["role2", "role3"]