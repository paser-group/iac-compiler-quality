---
- name: Test Ansible Compiler for Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Notify Rollbar with varied encodings
      community.general.rollbar_deployment:
        comment: "{{ rollbar_comment | b64encode }}"
        environment: "{{ rollbar_environment | bool }}"  # Trigger latent type bug with boolean value
        revision: "{{ rollbar_revision }}"
        rollbar_user: "{{ rollbar_user }}"
        token: "{{ rollbar_token }}"
        url: "{{ rollbar_url }}"
        user: "{{ rollbar_user }}"
        validate_certs: "{{ rollbar_validate_certs | b64encode | bool }}"
      run_once: true