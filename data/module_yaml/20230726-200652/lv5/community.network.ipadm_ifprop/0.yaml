- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage IP interface properties
      community.network.ipadm_ifprop:
        interface: "{{ interface }}"
        property: "{{ property }}"
        protocol: "{{ protocol | random }}"
        state: "{{ state }}"
        temporary: "{{ temporary | random }}"
        value: "{{ value | random }}"
      register: result

    - name: Print module output
      debug:
        var: result

    - name: Set random property value
      set_fact:
        random_value: "{{ random(1, 10) }}"

    - name: Set random state value
      set_fact:
        random_state: "{{ ['present', 'absent'] | random }}"

    - name: Set random temporary value
      set_fact:
        random_temporary: "{{ [true, false] | random }}"
  
    - name: Run playbook with random values
      include_tasks: playbook.yaml
      loop_control:
        loop_var: interface
      loop:
        - eth0
        - eth1
        - eth2
        - eth3
      vars:
        property: "{{ ['port', 'address'] | random }}"
        protocol: "{{ protocol | random }}"
        state: "{{ random_state }}"
        temporary: "{{ random_temporary }}"
        value: "{{ random_value }}"