---
- name: Run local script on remote node
  hosts: all
  gather_facts: false

  tasks:
    - name: Execute script
      ansible.builtin.script:
        chdir: "{{ my_script_dir }}"  # Set the directory where the script is located
        cmd: "{{ my_script_name }}"   # Specify the name of the script
        creates: "{{ my_script_output }}"  # Specify a file that indicates if the script has already been run
        executable: /bin/bash        # Specify the script's executable

      register: script_result

    - name: Debug the output
      debug:
        var: script_result

- name: Test Cases for Heuristic - Random Port Numbers
  hosts: all
  gather_facts: false

  tasks:
    - name: Generate random port number
      ansible.builtin.script:
        cmd: "/usr/bin/python -c 'import random; print(random.randint(1025, 65535))'"
      register: random_port_result

    - name: Debug random port
      debug:
        var: random_port_result.stdout