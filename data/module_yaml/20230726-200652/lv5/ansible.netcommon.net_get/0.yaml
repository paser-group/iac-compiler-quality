---
- name: Test ansible.netcommon.net_get module
  hosts: localhost
  gather_facts: false
  vars:
    dest: "/tmp/"
    protocol: "sftp"
    src: "/path/to/source/file"
    port: "{{ random_port }}"

  tasks:
    - name: Set random port
      set_fact:
        random_port: "{{ 30000 + (ansible_play_hosts_all.index(inventory_hostname) | random | int) }}"

    - name: Copy file from network device
      ansible.netcommon.net_get:
        dest: "{{ dest }}"
        protocol: "{{ protocol }}"
        src: "{{ src }}"
        port: "{{ port }}"
      register: result

    - name: Debug result
      debug:
        var: result