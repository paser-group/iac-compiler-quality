---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    ipa_host: "ipa.example.com"
    ipa_user: "admin"
    ipa_pass: "password"
    ipa_port: "{{ ansible_port + 100 }}"
    ipa_timeout: 10
    ipa_prot: "https"
    sudocmdgroup:
      - cn: "test_sudocmdgroup"
        description: "Test SudoCmdGroup"
        ipa_host: "{{ ipa_host }}"
        ipa_port: "{{ ipa_port }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        state: "present"
        sudocmd: "{{ 100 }}"

  tasks:
    - name: Manage FreeIPA SudoCmdGroup
      community.general.ipa_sudocmdgroup:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_timeout: "{{ ipa_timeout }}"
        ipa_prot: "{{ ipa_prot }}"
        sudocmdgroup: "{{ sudocmdgroup }}"
        validate_certs: false