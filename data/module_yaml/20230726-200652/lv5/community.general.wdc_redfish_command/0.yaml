---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure test variables
      vars:
        auth_token: "YOUR_AUTH_TOKEN"
        baseuri: "https://example.com"
        category: "YOUR_CATEGORY"
        command:
          - "list"
          - "devices"
        ioms:
          - "iom1"
          - "iom2"
        password: "YOUR_PASSWORD"
        resource_id: "YOUR_RESOURCE_ID"
        timeout: 60
        update_creds:
          username: "NEW_USERNAME"
          password: "NEW_PASSWORD"
        update_image_uri: "https://example.com/update_image"
        username: "YOUR_USERNAME"

    - name: Test latent type-related bugs
      community.general.wdc_redfish_command:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        category: "{{ category }}"
        command: "{{ command }}"
        ioms: "{{ ioms }}"
        password: "{{ password }}"
        resource_id: "{{ resource_id }}"
        timeout: "{{ timeout }}"
        update_creds: "{{ update_creds }}"
        update_image_uri: "{{ update_image_uri }}"
        username: "{{ username }}"
      register: result

    - name: Display module result
      debug:
        var: result