---
- name: Execute arbitrary commands on APCON OS
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Run arbitrary commands on APCON OS
      community.network.apconos_command:
        commands:
          - show version
          - show interface status
        interval: 10
        match: "#"
        retries: 3
        wait_for:
          - search(text="APCON", regex=True)
          - search(text="Interface", regex=False)
      register: command_output
  
    - name: Display command output
      debug:
        var: command_output