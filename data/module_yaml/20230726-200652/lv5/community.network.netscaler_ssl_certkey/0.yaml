- name: Test playbook for community.network.netscaler_ssl_certkey module
  hosts: localhost
  gather_facts: false

  vars:
    # Define variables
    nsip: "10.1.1.1"
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "http"
    nitro_timeout: 10
    validate_certs: false

  tasks:
    - name: Test Random Port Settings
      community.network.netscaler_ssl_certkey:
        nsip: "{{ nsip }}"
        validate_certs: "{{ validate_certs }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        cert: None
        certkey: None
        expirymonitor: None
        inform: None
        key: None
        notificationperiod: None
        passplain: None
        password: None
        save_config: True
        state: present
        port: "{{ 10000 | random }}"
      register: result

    - name: Debug Result
      debug:
        var: result