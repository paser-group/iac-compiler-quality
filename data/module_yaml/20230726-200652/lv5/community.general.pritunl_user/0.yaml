---
- name: Manage Pritunl Users
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Pritunl User with random port
      community.general.pritunl_user:
        organization: "MyOrg"
        pritunl_api_secret: "api_secret"
        pritunl_api_token: "api_token"
        pritunl_url: "https://pritunl.example.com"
        state: present
        user_disabled: false
        user_email: "user@example.com"
        user_gravatar: false
        user_groups:
          - vpn_users
        user_mac_addresses:
          - "00:11:22:33:44:55"
        user_name: "user"
        user_type: "user"
        validate_certs: true
        port: "{{ range(10000, 20000)|random }}"
      register: result
      ignore_errors: true

    - name: Show result
      debug:
        var: result