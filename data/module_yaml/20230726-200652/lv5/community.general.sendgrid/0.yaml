---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Test sendgrid module with incorrect port type
      community.general.sendgrid:
        api_key: 1234567890
        to_addresses:
          - test@example.com
        from_address: "sender@example.com"
        subject: "Test email"
        body: "This is a test email from Ansible"
        cc: []
        bcc: []
        attachments: []
        username: "sendgrid_username"
        password: "sendgrid_password"
        from_name: "Ansible"
        html_body: false
        headers:
          X-Automation: Ansible
        port: "invalid_port_number"
      delegate_to: localhost

      register: result

    - name: Print sendgrid module result
      debug:
        var: result