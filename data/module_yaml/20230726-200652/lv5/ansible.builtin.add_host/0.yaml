---
- name: Add hosts to inventory
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add Ubuntu1 host to inventory
      ansible.builtin.add_host:
        name: ubuntu1
        groups: ubuntu_nodes
        ansible_host: 10.1.1.1
        ansible_connection: docker

    - name: Add Alpine1 host to inventory
      ansible.builtin.add_host:
        name: alpine1
        groups: alpine_nodes
        ansible_host: 10.1.1.2
        ansible_connection: docker

    - name: Add CentOS1 host to inventory
      ansible.builtin.add_host:
        name: centos1
        groups: centos_nodes
        ansible_host: 10.1.1.3
        ansible_connection: docker

    - name: Add RedHat1 host to inventory
      ansible.builtin.add_host:
        name: redhat1
        groups: redhat_nodes
        ansible_host: 10.1.1.4
        ansible_connection: docker

- name: Test playbook
  hosts: all
  gather_facts: false
  tasks:
    - name: Print hosts
      debug:
        var: groups

    - name: Run the test
      ansible.builtin.add_host:
        name: test_node
        groups: test_group
        ansible_connection: docker
      register: result

    - name: Debug test result
      debug:
        var: result