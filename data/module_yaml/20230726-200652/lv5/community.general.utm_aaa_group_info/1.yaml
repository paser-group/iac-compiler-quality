- name: Test playbook for UTM AAA Group Info module
  hosts: localhost
  gather_facts: false

  vars:
    headers:
      Content-Type: "application/json"
      Authorization: "Bearer your_token"
    
    aaa_group_port: "{{ 15000 | random(start=10000, end=65535) }}"
    validate_certificates: "{{ true if aaa_group_port == 443 else false }}"

  tasks:
    - name: Get UTM AAA Group Info
      community.general.utm_aaa_group_info:
        name: "{{ aaa_group_name }}"
        state: "{{ aaa_group_state }}"
        utm_host: "{{ aaa_group_host }}"
        utm_protocol: "{{ aaa_group_protocol }}"
        utm_port: "{{ aaa_group_port }}"
        utm_token: "{{ aaa_group_token }}"
        validate_certs: "{{ validate_certificates }}"
      register: utm_aaa_group_info_result

    - debug:
        var: utm_aaa_group_info_result