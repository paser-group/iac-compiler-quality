---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Execute potentially buggy task
      community.general.ipa_vault:
        ipa_host: "{{ ipa_host | default('10.1.1.1') }}"
        ipa_user: admin
        ipa_pass: vaultadmin123
        ipa_timeout: "{{ ipa_timeout | default('10') }}"
        ipa_port: "{{ ipa_port | random(seed=seed) | default(30000) }}"
        replace: "{{ replace | random(seed=seed) | default(false) }}"
        state: "{{ state | random(seed=seed) | default('present') }}"
        cn: "{{ cn | default(10) }}"
        description: "{{ description | default('test') }}"
        ipavaultpublickey: "{{ lookup('file', 'public_key.pem') }}"
        ipavaultsalt: "{{ ipavaultsalt | default('somesalt') }}"
        ipavaulttype: "{{ ipavaulttype | random(seed=seed) | default('AES') }}"
        service: ldap
        username: [alice, alex]
        validate_certs: "{{ validate_certs | random(seed=seed) | default(false) }}"
      register: result

    - debug:
        var: result