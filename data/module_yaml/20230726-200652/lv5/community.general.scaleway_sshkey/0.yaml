---
- name: Ansible Latent Type-Related Bug Discovery
  hosts: localhost
  gather_facts: False

  vars:
    # Set the required variables for the module
    api_timeout: 10
    api_token: "YOUR_SCALEWAY_API_TOKEN"
    api_url: "https://api.scaleway.com/"
    query_parameters:
      organization: "YOUR_ORGANIZATION_ID"
    ssh_pub_key: "{{ lookup('file', '/path/to/ssh/pub/key.pub') }}"
    state: "present"
    validate_certs: True

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ 10000 | random(start=1000) }}"

    - name: Test Scaleway SSH Key module
      community.general.scaleway_sshkey:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        query_parameters: "{{ query_parameters }}"
        ssh_pub_key: "{{ ssh_pub_key }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
        port: "{{ random_port }}"
      register: result

    - name: Print module output
      debug:
        var: result