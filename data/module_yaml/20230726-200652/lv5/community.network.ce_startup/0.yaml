---
- name: Manage system startup information on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Configure system startup
      community.network.ce_startup:
        action: "{{ item.action }}"
        cfg_file: "{{ item.cfg_file }}"
        patch_file: "{{ item.patch_file }}"
        slot: "{{ item.slot }}"
        software_file: "{{ item.software_file }}"
      loop:
        - { action: "configure", cfg_file: "/path/to/startup.cfg" }
        - { action: "patch", patch_file: "/path/to/patch.cfg", slot: 1 }
        - { action: "install", software_file: "/path/to/software.tar.gz", slot: 2 }

    - name: Test port settings
      debug:
        msg: "Port {{ item }} is open"
      loop: "{{ range(5000, 6000)|random(10) }}"