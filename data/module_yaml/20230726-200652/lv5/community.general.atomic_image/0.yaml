- name: Test playbook for 'community.general.atomic_image' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create container image with random port
      community.general.atomic_image:
        backend: "docker"
        name: "test_image"
        started: true
        state: "present"
        ports:
          - "{{ random_port() }}/tcp"
      register: result

    - name: Print result
      debug:
        var: result