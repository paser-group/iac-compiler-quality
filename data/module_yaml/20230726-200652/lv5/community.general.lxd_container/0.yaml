---
- name: Test playbook to reveal latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create LXD container
      community.general.lxd_container:
        name: test-container
        source:
          type: image
          alias: ubuntu/xenial/amd64
        profiles: [default]
        devices:
          eth0:
            name: eth0
            nictype: bridged
            parent: lxdbr0
          port:
            name: port
            type: proxy
            listen: 0.0.0.0:{{ 8000 | random }}
            connect: 127.0.0.1:80
      register: container

    - name: Output container information
      debug:
        var: container