---
- name: Test community.general.webfaction_db module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Add a database
      community.general.webfaction_db:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        machine: "{{ machine }}"
        name: "{{ name }}"
        password: "{{ password }}"
        state: "{{ state }}"
        type: "{{ type }}"
      register: result

    - debug:
        var: result

    - name: Remove the database
      community.general.webfaction_db:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        machine: "{{ machine }}"
        name: "{{ name }}"
        state: "absent"
      register: remove_result

    - debug:
        var: remove_result