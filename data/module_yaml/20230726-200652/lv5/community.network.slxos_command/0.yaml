---
- name: Test playbook for community.network.slxos_command
  hosts: all
  
  tasks:
    - name: Run commands on remote devices
      community.network.slxos_command:
        commands: "{{ item }}"
        interval: "{{ interval | default(1) }}"
        match: "{{ match | default(match_none) }}"
        retries: "{{ retries | default(0) }}"
        wait_for: "{{ wait_for | default(wait_none) }}"
      loop:
        - "show version"
        - "show interfaces"
      register: command_output

    - name: Debug output
      debug:
        var: command_output

    - name: Print the command output
      debug:
        var: item.stdout_lines
      loop: "{{ command_output.results }}"
  
  vars:
    match_none: ".*"
    interval: "{{ interval | default(1) }}"
    retries: "{{ retries | default(0) }}"
    wait_none: ".*"