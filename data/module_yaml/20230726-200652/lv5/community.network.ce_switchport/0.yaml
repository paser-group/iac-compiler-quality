---
- name: Manage Layer 2 switchport interfaces on HUAWEI devices
  hosts: switches
  gather_facts: false

  tasks:
    - name: Manage Layer 2 switchport
      community.network.ce_switchport:
        default_vlan: "{{ default_vlan }}"
        interface: "{{ interface }}"
        mode: "{{ mode }}"
        pvid_vlan: "{{ pvid_vlan }}"
        state: "{{ state }}"
        tagged_vlans: "{{ tagged_vlans }}"
        trunk_vlans: "{{ trunk_vlans }}"
        untagged_vlans: "{{ untagged_vlans }}"
      register: switchport_result

    - name: Display switchport result
      debug:
        var: switchport_result