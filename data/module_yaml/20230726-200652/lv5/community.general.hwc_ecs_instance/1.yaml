- name: Test port settings
  hosts: localhost
  vars:
    port_number: "{{ 10000 | random }}"
    # Additional variables and options
  tasks:
    - name: Test port connectivity
      wait_for:
        host: "{{ host_ip }}"
        port: "{{ port_number }}"
        state: "started"
        # Additional wait_for options if needed
      retries: 5
      delay: 10
      register: port_test_result

    - debug:
        var: port_test_result