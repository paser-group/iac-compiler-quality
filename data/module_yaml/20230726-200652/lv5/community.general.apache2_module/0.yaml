- name: Test Ansible Apache2 Module
  hosts: web-servers
  gather_facts: false

  tasks:
    - name: Enable apache2 module
      community.general.apache2_module:
        state: "{{ force | default(True) }}"
        name: "{{ identifier | default('rewrite') }}"
        warn_mpm_absent: "{{ warn_mpm_absent | default(False) }}"
      register: enable_result

    - name: Disable apache2 module
      community.general.apache2_module:
        state: "{{ force | default(False) }}"
        name: "{{ identifier | default('rewrite') }}"
        identifier: "{{ identifier | default('') }}"
        ignore_configcheck: "{{ ignore_configcheck | default(False) }}"
      register: disable_result

    - name: Print module enable result
      debug:
        var: enable_result

    - name: Print module disable result
      debug:
        var: disable_result