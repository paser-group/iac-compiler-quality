---
- name: Test playbook for community.general.scaleway_image_info module
  hosts: localhost
  gather_facts: false
  vars:
    random_port: "{{ 1024 + (ansible_date_time.second * 10 + ansible_date_time.microsecond % 10) % 65536 }}"

  tasks:
    - name: Gather information about Scaleway images
      community.general.scaleway_image_info:
        api_token: "YOUR_API_TOKEN"
        api_url: "https://api.scaleway.com:{{ random_port }}"
        region: "ams1"
        validate_certs: false
        api_timeout: 10
        query_parameters:
          organization: "YOUR_ORGANIZATION"
        register: image_info_result

    - name: Debug Scaleway image information
      debug:
        var: image_info_result