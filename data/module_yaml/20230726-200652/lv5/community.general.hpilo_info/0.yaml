- name: Test the community.general.hpilo_info module
  hosts: localhost
  gather_facts: false

  vars:
    hosts_info:
      - {host: 10.1.1.1, login: admin, password: pass, ssl_version: "TLSv1.2"}
      - {host: 10.1.1.2, login: user, password: 123456, ssl_version: "TLSv1.3"}
      - {host: 10.1.1.3, login: admin, password: false, ssl_version: ""}
      - {host: 10.1.1.4, login: "{{ non_existent_var }}", password: "{{ password }}", ssl_version: 12345}
      - {host: 10.1.1.5, login: [user1, user2, user3], password: ["pass1", "pass2"], ssl_version: [True, False]}

  tasks:
    - name: Gathering info using hpilo_info module
      community.general.hpilo_info:
        host: "{{ item.host }}"
        login: "{{ item.login }}"
        password: "{{ item.password }}"
        ssl_version: "{{ item.ssl_version }}"
      register: hpilo_info_output
      ignore_errors: true
      loop: "{{ hosts_info }}"

    - name: Debug hpilo_info output
      debug:
        var: hpilo_info_output