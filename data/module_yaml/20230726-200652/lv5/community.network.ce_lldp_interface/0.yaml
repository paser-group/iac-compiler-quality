---
- name: Test playbook for Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ range(1, 65535) | random }}"

    - name: Execute module with random port
      community.network.module_name:
        option1: value1
        option2: value2
        port: "{{ random_port }}"
      register: result

    - name: Debug module result
      debug:
        var: result