---
- name: Test playbook for community.network.avi_backup module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test backup configuration
      community.network.avi_backup:
        avi_credentials:
          controller: "{{ 'https://' + ansible_host + ':' + random_port }}"
          username: "admin"
          password: "password"
        avi_disable_session_cache_as_fact: true
        tenant: "tenant1"
        file_name: "/tmp/backup_config.cfg"
        state: "present"
      register: backup_config_result

    - name: Debug backup config result
      debug:
        var: backup_config_result