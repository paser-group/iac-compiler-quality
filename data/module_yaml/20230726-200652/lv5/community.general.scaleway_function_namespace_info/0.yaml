---
- name: Test playbook for community.general.scaleway_function_namespace_info
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Retrieve information on Scaleway function namespaces
      community.general.scaleway_function_namespace_info:
        api_timeout: 10
        api_token: "YOUR_API_TOKEN"
        api_url: "https://api.scaleway.com"
        name: "example_namespace"
        project_id: "YOUR_PROJECT_ID"
        query_parameters:
          organization_id: "YOUR_ORGANIZATION_ID"
        region: "fr-par-1"
        validate_certs: true
      register: namespace_info

    - name: Assert that the API response is successful
      assert:
        that:
          - namespace_info is success

    - name: Test random port number in query parameters
      community.general.scaleway_function_namespace_info:
        api_timeout: 10
        api_token: "YOUR_API_TOKEN"
        api_url: "https://api.scaleway.com"
        name: "example_namespace"
        project_id: "YOUR_PROJECT_ID"
        query_parameters:
          organization_id: "YOUR_ORGANIZATION_ID"
          port: "{{ 1000 | random }}"
        region: "fr-par-1"
        validate_certs: true
      register: namespace_info_random_port

    - name: Assert that the API response with random port number is successful
      assert:
        that:
          - namespace_info_random_port is success