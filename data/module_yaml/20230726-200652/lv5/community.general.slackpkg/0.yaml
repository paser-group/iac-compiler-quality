---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Install slackpkg package manager
      community.general.slackpkg:
        name: "{{ item }}"
        state: "{{ my_state }}"
      with_items:
        - slackpkg
        - vim
        - curl
      vars:
        my_state: 'present'

    - name: Update package cache
      apt:
        name: '*'
        update_cache: "{{ my_cache }}"
      vars:
        my_cache: "{{ my_cache_state }}"
        my_cache_state: True