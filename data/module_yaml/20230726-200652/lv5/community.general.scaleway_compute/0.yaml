---
- name: Test playbook for community.general.scaleway_compute module
  hosts: localhost
  gather_facts: false

  vars:
    api_token: "your_api_token"
    api_url: "https://api.scaleway.com"
  
  tasks:
    - name: Create Scaleway instance with invalid port type
      community.general.scaleway_compute:
        state: present
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        name: "test-instance"
        image: "996f5528-27a3-48fd-a5ad-dd4d2ef33733"  # Replace with desired image ID
        region: 123  # Invalid type for region
        commercial_type: "GP1-L"
        tags:
          - "testing"
        wait: true
        wait_timeout: 300
        wait_sleep_time: 10
        security_group: "{{ security_group }}"
        query_parameters:
          ports: true  # Invalid type for ports
      register: result

    - debug:
        var: result

  vars_files:
    - vars.yml