---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  vars:
    pn_cliswitch: 'my-switch'
    pn_cos: '5'
    pn_max_bw_limit: '100'
    pn_min_bw_guarantee: '50'
    pn_port: 'eth1'
    pn_weight: '50'
    state: 'present'
  
  tasks:
    - name: Configure port cos and bandwidth
      community.network.pn_port_cos_bw:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_cos: "{{ pn_cos }}"
        pn_max_bw_limit: "{{ pn_max_bw_limit }}"
        pn_min_bw_guarantee: "{{ pn_min_bw_guarantee }}"
        pn_port: "{{ pn_port }}"
        pn_weight: "{{ pn_weight }}"
        state: "{{ state }}"
      register: result

    - name: Debug result
      debug:
        var: result