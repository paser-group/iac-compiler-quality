- name: Test playbook for community.network.pn_user module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a user using community.network.pn_user module
      community.network.pn_user:
        pn_name: test_user
        pn_password: test_password
        pn_cliswitch: "{{ item }}"
        pn_scope: "{{ ['global', 'local'] | random }}"
        pn_initial_role: "{{ ['admin', 'operator'] | random }}"
        state: present
      loop: "{{ [2000, 3000, 4000, 5000, 6000] | random }}"

  vars:
    - pn_cliswitch:
        localhost:
          pn_host: "localhost"
          pn_username: "admin"
          pn_password: "password"
          pn_port: "{{ item }}"
      loop: "{{ [2000, 3000, 4000, 5000, 6000] | random }}"