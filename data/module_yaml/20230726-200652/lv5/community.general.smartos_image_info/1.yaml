---
- name: Test smartos_image_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ 10000 | random }}"
      run_once: true

    - name: Get smartos image info
      community.general.smartos_image_info:
        filters:
          - "str"
        port: "{{ random_port }}"
      register: result

    - name: Print result
      debug:
        var: result