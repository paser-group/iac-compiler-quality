---
- name: Collect Facts from Devices
  hosts: all
  gather_facts: false

  vars:
    port_numbers:
      - "{{ range(10000, 20000) | random }}"
      - "{{ range(20000, 30000) | random }}"
      - "{{ range(30000, 40000) | random }}"

  tasks:
    - name: Gather facts using community.network.ironware_facts module
      community.network.ironware_facts:
        authorize: "{{ authorize | default(false) }}"
        gather_subset: "{{ gather_subset | default(None) }}"
        port: "{{ port_numbers }}"
      register: device_facts