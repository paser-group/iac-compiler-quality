---
- name: Test playbook for community.general.jenkins_build module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install Jenkins package
      apt:
        name: jenkins
        state: present

    - name: Start Jenkins service
      service:
        name: jenkins
        state: started

    - name: Configure Jenkins job
      community.general.jenkins_build:
        url: http://localhost:8080
        user: admin
        password: admin
        name: ansible-example
        state: present
        token: "{{ ansible_date_time.epoch }}"
        build_number: 50
        args:
          foo: bar

      register: result

    - name: Debug result
      debug:
        var: result