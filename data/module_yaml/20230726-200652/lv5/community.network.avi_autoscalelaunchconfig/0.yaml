- name: Test playbook for 'community.network.avi_autoscalelaunchconfig' module
  hosts: localhost
  gather_facts: false

  vars:
    random_ports:
      - "{{ 50000 + range(10) | random }}"
      - "{{ 60000 + range(10) | random }}" 

  tasks:
    - name: Set up AutoScaleLaunchConfig with random port settings
      community.network.avi_autoscalelaunchconfig:
        controller: "10.1.1.1"  # Update with actual Avi Vantage controller IP
        username: "admin"  # Update with actual username
        password: "password"  # Update with actual password
        tenant: "default"  # Update with actual tenant name
        api_version: "20.1.3"  # Update with actual API version
        tenant_uuid: "tenant_uuid"  # Update with actual tenant UUID
        name: "MyLaunchConfig"
        description: "Testing AutoScaleLaunchConfig"
        image_id: "image_id"
        use_external_asg: false
        random_port_1: "{{ random_ports[0] }}"
        random_port_2: "{{ random_ports[1] }}"
      register: result

    - name: Debug the result
      debug:
        var: result