---
- name: Test playbook for community.general.zpool_facts module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number between 1024 and 65535
      set_fact:
        random_port: "{{ 1024 + (ansible_date_time.epoch|int % 64512) }}"
      run_once: true

    - name: Gather zpool facts
      community.general.zpool_facts:
        name: "tank"
        parsable: true
        properties: "all"
      vars:
        ansible_python_interpreter: "/usr/bin/python3"
      register: zpool_facts

    - name: Debug zpool facts
      debug:
        var: zpool_facts