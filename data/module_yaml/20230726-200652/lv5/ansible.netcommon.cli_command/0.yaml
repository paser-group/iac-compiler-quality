- name: Test playbook for cli_command module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Run cli_command with different options and attributes
      ansible.netcommon.cli_command:
        answer: ["yes"]
        command: "show version"
        newline: true
        prompt: ["Enter password"]
        sendonly: true
        check_all: true
      register: cli_output
      changed_when: false

    - name: Display cli_command output
      debug:
        var: cli_output

    - name: Test random port numbers
      ansible.netcommon.cli_command:
        answer: ["no"]
        command: "ping 10.1.1.1"
        prompt: ["Are you sure?"]
        port: "{{ 1024 + (ansible_play_hosts_all | random | int) }}"