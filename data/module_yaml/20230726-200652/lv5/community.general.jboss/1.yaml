- name: Deploy JBoss Application
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate random port number
      shell: "echo $RANDOM"
      register: random_port

    - name: Install JBoss CLI tool
      package:
        name: jboss-cli
        state: present

    - name: Deploy JBoss Application
      community.general.jboss:
        deploy_path: /opt/jboss/standalone/deployments
        deployment: myapp.war
        src: /tmp/myapp.war
        state: present
        port: "{{ random_port.stdout }}"
      register: deploy_result

    - name: Check deployment status
      debug:
        msg: "JBoss deployment result: {{ deploy_result }}"