---
- name: Execute shell commands
  hosts: all
  gather_facts: false

  tasks:

    - name: Test 1 - Execute a simple command
      ansible.builtin.shell:
        cmd: echo "Hello, World!"
      register: result1

    - debug:
        var: result1.stdout

    - name: Test 2 - Change working directory and execute a command
      ansible.builtin.shell:
        cmd: ls -l
        chdir: /tmp
      register: result2

    - debug:
        var: result2.stdout

    - name: Test 3 - Execute a command only if a file doesn't exist
      ansible.builtin.shell:
        cmd: echo "File doesn't exist"
        creates: /tmp/nonexistent_file
      register: result3

    - debug:
        var: result3.stdout

    - name: Test 4 - Execute a command with a specific executable
      ansible.builtin.shell:
        cmd: my_script.sh
        executable: /usr/bin/bash
      register: result4

    - debug:
        var: result4.stdout

    - name: Test 5 - Execute a command with a dynamic variable
      ansible.builtin.shell:
        cmd: echo "{{ my_variable }}"
      register: result5

    - debug:
        var: result5.stdout

    - name: Test 6 - Execute a command and remove a file afterwards
      ansible.builtin.shell:
        cmd: rm -f my_file.txt
        removes: my_file.txt
      register: result6

    - debug:
        var: result6.stdout

    - name: Test 7 - Execute a command with stdin input
      ansible.builtin.shell:
        cmd: cat
        stdin: "Hello, Ansible!"
        stdin_add_newline: false
      register: result7

    - debug:
        var: result7.stdout