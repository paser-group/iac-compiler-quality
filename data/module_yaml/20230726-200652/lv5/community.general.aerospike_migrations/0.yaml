---
- name: Test playbook for community.general.aerospike_migrations module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with random port numbers
      community.general.aerospike_migrations:
        host: 127.0.0.1
        port: "{{ some_random_port }}"
        migrate_rx_key: "key_rx"
        migrate_tx_key: "key_tx"
        sleep_between_checks: 5
        tries_limit: 3
        min_cluster_size: 2
        target_cluster_size: 4
        consecutive_good_checks: 2
        fail_on_cluster_change: true
        connect_timeout: 10
        local_only: false
      vars:
        some_random_port: "{{ 10000 | random }}"