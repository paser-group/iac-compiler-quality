---
- name: Test pn_role module
  hosts: localhost
  gather_facts: false
  vars:
    pn_access: "read-write"
    pn_cliswitch: "cli_switch"
    pn_delete_from_users: false
    pn_name: "role_name"
    pn_running_config: true
    pn_scope: "device"
    pn_shell: true
    pn_sudo: true
    state: "present"

  tasks:
    - name: Create pn_role
      community.network.pn_role:
        pn_access: "{{ pn_access }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_delete_from_users: "{{ pn_delete_from_users }}"
        pn_name: "{{ pn_name }}"
        pn_running_config: "{{ pn_running_config }}"
        pn_scope: "{{ pn_scope }}"
        pn_shell: "{{ pn_shell }}"
        pn_sudo: "{{ pn_sudo }}"
        state: "{{ state }}"
      register: result

    - name: Print result
      debug:
        var: result

    - name: Test port settings with random port numbers
      community.network.pn_role:
        pn_access: "{{ pn_access }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_delete_from_users: "{{ pn_delete_from_users }}"
        pn_name: "{{ pn_name }}"
        pn_running_config: "{{ pn_running_config }}"
        pn_scope: "{{ pn_scope }}"
        pn_shell: "{{ pn_shell }}"
        pn_sudo: "{{ pn_sudo }}"
        pn_port: "{{ random_port }}"
        state: "{{ state }}"
      register: port_result

    - name: Print port result
      debug:
        var: port_result