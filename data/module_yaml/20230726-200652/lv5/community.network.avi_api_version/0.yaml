---
- name: Test playbook to uncover latent type-related bugs in the avi_api_version module
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    api_context:
      tenant_uuid: abc123
    api_version: "20.1.2"
    avi_credentials:
      controller: "https://avi-controller.example.com/"
      username: "admin"
      password: "password"
      tenant: "default"
    avi_disable_session_cache_as_fact: yes

  tasks:
    - name: Debug variables
      debug:
        var:
          api_context
          api_version
          avi_credentials
          avi_disable_session_cache_as_fact

    - name: Test avi_api_version module
      community.network.avi_api_version:
        api_context: "{{ api_context }}"
        api_version: "{{ api_version }}"
        avi_credentials: "{{ avi_credentials }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
      register: api_version_result

    - name: Show output
      debug:
        var: api_version_result