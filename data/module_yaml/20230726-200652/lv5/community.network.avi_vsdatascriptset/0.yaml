---
- name: Setup VSDataScriptS
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Case - Random port numbers
      community.network.avi_vsdatascriptset:
        controller: "{{ hostvars['localhost']['controller_ip'] }}"
        username: "{{ hostvars['localhost']['username'] }}"
        password: "{{ hostvars['localhost']['password'] }}"
        tenant: "{{ hostvars['localhost']['tenant'] }}"
        api_version: "{{ hostvars['localhost']['api_version'] }}"
        name: "Test Script"
        datascript:
          - name: "Random Port Test"
            port: "{{ lookup('pipe', 'echo $RANDOM') }}"