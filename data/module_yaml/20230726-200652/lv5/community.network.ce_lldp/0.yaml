---
- name: Manage LLDP configuration on Huawei device
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure LLDP
      community.network.ce_lldp:
        bind_name: "{{ item.bind_name }}"
        fast_count: "{{ item.fast_count }}"
        hold_multiplier: "{{ item.hold_multiplier }}"
        interval: "{{ item.interval }}"
        lldpenable: "{{ item.lldpenable }}"
        management_address: "{{ item.management_address }}"
        mdn_notification_interval: "{{ item.mdn_notification_interval }}"
        mdnstatus: "{{ item.mdnstatus }}"
        notification_interval: "{{ item.notification_interval }}"
        restart_delay: "{{ item.restart_delay }}"
        state: "{{ item.state }}"
        transmit_delay: "{{ item.transmit_delay }}"
      with_items:
        - bind_name: "ethernet 1/1"
          fast_count: 5
          hold_multiplier: 4
          interval: 30
          lldpenable: "true"
          management_address: "10.1.1.1"
          mdn_notification_interval: 60
          mdnstatus: "enabled"
          notification_interval: 120
          restart_delay: 10
          state: "present"
          transmit_delay: 2
        - bind_name: "ethernet 2/1"
          fast_count: 3
          hold_multiplier: 2
          interval: 60
          lldpenable: "false"
          management_address: "10.1.1.2"
          mdn_notification_interval: 120
          mdnstatus: "disabled"
          notification_interval: 240
          restart_delay: 20
          state: "absent"
          transmit_delay: 5