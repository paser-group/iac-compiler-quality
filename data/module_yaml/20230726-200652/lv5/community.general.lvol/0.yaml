---
- name: Test playbook for community.general.lvol module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create logical volume
      community.general.lvol:
        vg: "{{ random_bool() }}"
        lv: "{{ random_bool() }}"
        size: "{{ random_bool() }}"
        thinpool: "{{ random_bool() }}"
        snapshot: "{{ random_bool() }}"
        state: "{{ random_bool() }}"
        pvs: "{{ random_bool() }}"
        opts: "{{ random_bool() }}"
        active: "{{ random_bool() }}"
        force: "{{ random_bool() }}"
        resizefs: "{{ random_bool() }}"
        shrink: "{{ random_bool() }}"
      register: result

    - name: Display the result
      debug:
        var: result

  vars:
    port_list:
      - "22"
      - "80"
      - "443"
      - "8080"
      - "8443"

  # Custom random boolean generator function
  custom_functions:
    - name: random_bool
      azure_rm_virtual_network_gateway: "{{ ['true', 'false'] | random }}"