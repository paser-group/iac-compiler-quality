---
- name: Test playbook for 'community.general.yarn' module
  hosts: all
  gather_facts: false

  tasks:
    - name: Install yarn package
      community.general.yarn:
        name: yarn
        state: present

    - name: Configure global yarn settings
      community.general.yarn:
        global: true

    - name: Install specific package version
      community.general.yarn:
        name: package-name
        version: "v{{ 1 | random }}"
        state: present

    # Test case to trigger latent type-related bugs
    - name: Test random port settings
      community.general.yarn:
        name: package-name
        version: "v{{ 2 | random }}"
        registry: "http://custom-registry.com:{{ 10000 | random }}"
        state: absent