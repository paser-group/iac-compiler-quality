---
- name: Test playbook for community.network.dladm_vlan module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ (10000 + (ansible_date_time.microsecond|int % 1000))|string }}"

    - name: Create VLAN interface
      community.network.dladm_vlan:
        link: None
        name: None
        state: None
        temporary: True
        vlan_id: None
        port: "{{ random_port }}"
      register: result

    - name: Debug result
      debug:
        var: result