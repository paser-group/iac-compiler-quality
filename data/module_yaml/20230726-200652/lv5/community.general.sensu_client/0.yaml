---
- name: Execute Ansible playbook
  hosts: localhost
  gather_facts: false
  
  vars:
    name: sensu-client
    state: present
    socket:
      bind: 0.0.0.0
      port: "{{ random(['8000', '9000', '10000']) }}"
  
  tasks:
    - name: Install Sensu client
      community.general.sensu_client:
        name: "{{ name }}"
        state: "{{ state }}"
        socket: "{{ socket }}"