---
- name: Test playbook for the snap module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install snaps
      community.general.snap:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        classic: "{{ item.classic }}"
        options: "{{ item.options }}"
      with_items:
        - { name: ["snap1", "snap2"], state: "present", classic: false, options: [], channel: "latest" }
        - { name: "snap3", state: "absent", classic: true, options: ["--devmode"], channel: "beta" }

    - name: Random port testing
      debug:
        msg: "Testing random port: {{ 8000 + (ansible_loop.index - 1) }}"