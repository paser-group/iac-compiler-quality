---
- name: Manage BGP EVPN configuration on HUAWEI devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure BGP EVPN
      community.network.ce_evpn_bgp:
        advertise_l2vpn_evpn: "{{ random(l2vpn_evpn_values) }}"  # Testing random l2vpn_evpn values
        advertise_router_type: "{{ random(router_type_values) }}"  # Testing random router types
        as_number: "{{ random(as_number_values) }}"  # Testing random AS numbers
        bgp_instance: "{{ random(bgp_instance_values) }}"  # Testing random BGP instances
        peer_address: "{{ random(peer_address_values) }}"  # Testing random peer addresses
        peer_enable: "{{ random(peer_enable_values) }}"  # Testing random peer enables
        peer_group_name: "{{ random(peer_group_name_values) }}"  # Testing random peer group names
        state: "{{ random(state_values) }}"  # Testing random states
        vpn_name: "{{ random(vpn_name_values) }}"  # Testing random VPN names
      register: result

    - name: Debug module output
      debug:
        var: result

  vars:
    l2vpn_evpn_values:
      - None
      - true
      - false
    router_type_values:
      - None
      - default
      - device
    as_number_values:
      - None
      - 100
      - 200
    bgp_instance_values:
      - None
      - VRF1
      - VRF2
    peer_address_values:
      - None
      - 10.1.1.5
      - 10.1.1.6
    peer_enable_values:
      - None
      - true
      - false
    peer_group_name_values:
      - None
      - Group1
      - Group2
    state_values:
      - None
      - present
      - absent
    vpn_name_values:
      - None
      - VPN1
      - VPN2