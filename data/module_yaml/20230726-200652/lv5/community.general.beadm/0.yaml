---
- name: Test beadm module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random port numbers
      shell: echo $(( RANDOM % 65535 + 1 ))
      register: random_port
      changed_when: false

    - name: Print random port
      debug:
        var: random_port.stdout_lines

    # Task 1: Test description attribute
    - name: Test description attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        description: true
      register: result_description

    - name: Print result description
      debug:
        var: result_description

    # Task 2: Test force attribute
    - name: Test force attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        force: "{{ random_port.stdout_lines }}"
      register: result_force

    - name: Print result force
      debug:
        var: result_force

    # Task 3: Test mountpoint attribute
    - name: Test mountpoint attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        mountpoint: "{{ random_port.stdout_lines }}"
      register: result_mountpoint

    - name: Print result mountpoint
      debug:
        var: result_mountpoint

    # Task 4: Test options attribute
    - name: Test options attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        options: "{{ random_port.stdout_lines }}"
      register: result_options

    - name: Print result options
      debug:
        var: result_options

    # Task 5: Test snapshot attribute
    - name: Test snapshot attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        snapshot: "{{ random_port.stdout_lines }}"
      register: result_snapshot

    - name: Print result snapshot
      debug:
        var: result_snapshot

    # Task 6: Test state attribute
    - name: Test state attribute
      community.general.beadm:
        name: "{{ random_port.stdout_lines }}"
        state: "{{ random_port.stdout_lines }}"
      register: result_state

    - name: Print result state
      debug:
        var: result_state