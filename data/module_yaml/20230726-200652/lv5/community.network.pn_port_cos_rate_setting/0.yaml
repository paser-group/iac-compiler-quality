---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set COS rate for port
      community.network.pn_port_cos_rate_setting:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_cos0_rate: "{{ pn_cos0_rate }}"
        pn_cos1_rate: "{{ pn_cos1_rate }}"
        pn_cos2_rate: "{{ pn_cos2_rate }}"
        pn_cos3_rate: "{{ pn_cos3_rate }}"
        pn_cos4_rate: "{{ pn_cos4_rate }}"
        pn_cos5_rate: "{{ pn_cos5_rate }}"
        pn_cos6_rate: "{{ pn_cos6_rate }}"
        pn_cos7_rate: "{{ pn_cos7_rate }}"
        pn_port: "{{ pn_port }}"
        state: "{{ state }}"
      register: result

    - name: Debug output
      debug:
        var: result

    - name: Verify COS rate setting
      community.network.pn_port_status_show:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_port: "{{ pn_port }}"
        pn_detail: false
      register: port_status

    - name: Debug port status
      debug:
        var: port_status