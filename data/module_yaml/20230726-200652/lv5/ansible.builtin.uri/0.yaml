---
- name: Test ansible.builtin.uri module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Test URI module with random port numbers
      ansible.builtin.uri:
        url: "http://{{ hostvars[item].ansible_host }}:{{ item }}"
        method: GET
      loop:
        - "{{ 10000 | random }}"
        - "{{ 20000 | random }}"
        - "{{ 30000 | random }}"
      loop_control:
        loop_var: port
      vars:
        hostvars: "{{ hostvars }}"
        
    ## Add more tasks here to explore other attributes/options of the URI module ##
    ## Remember to adhere to the heuristic and generate random values where applicable ##