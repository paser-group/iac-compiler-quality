---
- name: Test Ansible module for link aggregation
  hosts: localhost
  gather_facts: false
  vars:
    aggregate: "{{ None }}"
    group: "{{ None }}"
    members: "{{ None }}"
    mode: "{{ None }}"
    purge: false
    state: "{{ None }}"

  tasks:
    - name: Create link aggregation group
      community.network.slxos_linkagg:
        aggregate: "{{ aggregate }}"
        group: "{{ group }}"
        members: "{{ members }}"
        mode: "{{ mode }}"
        purge: "{{ purge }}"
        state: "{{ state }}"
      register: result

    - name: Print result
      debug:
        var: result

    - name: Delete link aggregation group
      community.network.slxos_linkagg:
        aggregate: "{{ aggregate }}"
        group: "{{ group }}"
        members: "{{ members }}"
        mode: "{{ mode }}"
        purge: "{{ purge }}"
        state: "absent"
      register: delete_result

    - name: Print delete result
      debug:
        var: delete_result