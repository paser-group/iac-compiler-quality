- name: Send message to Flowdock
  hosts: localhost
  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ 30000 | random }}"
        
    - name: Send Flowdock message
      community.general.flowdock:
        external_user_name: "{{ external_user_name }}"
        from_address: "{{ from_address }}"
        from_name: "{{ from_name }}"
        link: "{{ link }}"
        msg: "{{ msg }}"
        project: "{{ project }}"
        reply_to: "{{ reply_to }}"
        source: "{{ source }}"
        subject: "{{ subject }}"
        tags: "{{ tags }}"
        token: "{{ token }}"
        type: "{{ type }}"
        validate_certs: "{{ validate_certs }}"
        port: "{{ random_port }}"