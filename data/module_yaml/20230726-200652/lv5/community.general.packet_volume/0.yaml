- name: Test packet_volume module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create volume
      community.general.packet_volume:
        auth_token: "your_auth_token"
        facility: "facility_name"
        project_id: "your_project_id"
        name: "test_volume"
        plan: "storage_plan_name"
        size: 100
        state: present
      register: volume

    - name: Verify volume
      debug:
        var: volume

    - name: Update volume description
      community.general.packet_volume:
        auth_token: "your_auth_token"
        id: "{{ volume.response.id }}"
        description: "Updated volume description"
        state: present

    - name: Verify updated volume
      debug:
        var: volume

    - name: Delete volume
      community.general.packet_volume:
        auth_token: "your_auth_token"
        id: "{{ volume.response.id }}"
        state: absent