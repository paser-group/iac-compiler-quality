- name: Test packet_volume module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create volume with random port
      community.general.packet_volume:
        auth_token: "your_auth_token"
        facility: "{{ item }}"
        project_id: "your_project_id"
        name: "test_volume_port_{{ item }}"
        plan: "storage_plan_name"
        size: 100
        state: present
        port: "{{ item | random }}"
      register: volume
      loop:
        - 22
        - 80
        - 443

    - name: Verify volumes
      debug:
        var: volume