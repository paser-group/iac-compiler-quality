- name: Send RocketChat Notification
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate Random Port Numbers
      set_fact:
        random_ports: "{{ random(1000, 65535, 10) }}"
  
    - name: Send Notification
      community.general.rocketchat:
        domain: "localhost"
        protocol: "http"
        port: "{{ item }}"
        token: "your_token"
        channel: "#general"
        icon_emoji: ":rocket:"
        username: "Ansible Bot"
        msg: "This is a test notification"
      with_items: "{{ random_ports }}"