---
- name: Ansible Latent Type-Related Bug Finder
  hosts: localhost

  tasks:
    - name: Configure static IP routes on Ruckus ICX
      community.network.icx_static_route:
        prefix: "{{ item.prefix }}"
        mask: "{{ item.mask }}"
        next_hop: "{{ item.next_hop }}"
        admin_distance: "{{ item.admin_distance }}"
        aggregate: "{{ item.aggregate }}"
        check_running_config: "{{ item.check_running_config }}"
        purge: "{{ item.purge }}"
        state: "{{ item.state }}"
      loop:
        - prefix: "10.0.0.0"
          mask: "255.0.0.0"
          next_hop: "192.168.0.1"
          admin_distance: "150"
          aggregate: "true"
          check_running_config: "false"
          purge: "true"
          state: "present"
        - prefix: "192.168.0.0"
          mask: "255.255.255.0"
          next_hop: "10.0.0.1"
          admin_distance: "100"
          aggregate: "false"
          check_running_config: "true"
          purge: "false"
          state: "absent"

    - debug:
        var: ansible_facts