---
- name: Test Proxmox Disk Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Proxmox Disk Module
      community.general.proxmox_disk:
        api_host: "{{ hostvars['localhost']['ansible_host'] }}"
        api_user: "root@pam"
        api_password: "password"
        vmid: "100"
        disk: "sata0"
        size: "10G"
        format: "qcow2"
        cache: "none"
        state: "mounted"
        backup: "true"
        aio: "native"
        mbps_max: "100"
        bwlimit: "100"
        target_disk: "local-lvm:vm-100-disk-1"
        target_storage: "local"
        target_vmid: "100"
      register: result

    - name: Display Result
      debug:
        var: result