---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    random_port_number: "{{ 1024 + range(30000) | random }}"
    odbc_dsn_name: "test_dsn"

  tasks:
    - name: Set up ODBC connection using 'community.general.odbc' module
      community.general.odbc:
        dsn: "{{ odbc_dsn_name }}"
        query: "SELECT * FROM test_table"
        commit: "true"
        params:
          - "param1"
          - "param2"
        port: "{{ random_port_number }}"
      register: odbc_result
  
    - name: Debug 'community.general.odbc' result
      debug:
        var: odbc_result