- name: Configure locale settings
  hosts: all

  tasks:
    - name: Set locale generation
      community.general.locale_gen:
        name: "{{ item }}"
        state: "{{ item_state }}"
      loop:
        - en_US.UTF-8
        - de_DE.UTF-8
        - fr_FR.UTF-8
      loop_control:
        loop_var: item_state

    - name: Print locale facts
      debug:
        var: ansible_facts['ansible_locales']