---
- name: Test playbook for ansible.posix.selinux module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Change policy with ansible.posix.selinux module
      ansible.posix.selinux:
        configfile: /etc/selinux/semanage.conf
        policy: "{{ policy }}"
        state: "{{ state }}"
        update_kernel_param: "{{ update_param }}"        
      vars:
        policy: targeted
        state: enforcing
        update_param: "yes"