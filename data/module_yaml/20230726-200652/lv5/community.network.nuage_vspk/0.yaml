---
- name: Test playbook for community.network.nuage_vspk module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Nuage VSPK module
      community.network.nuage_vspk:
        auth: "{{ auth }}"
        parent_type: "{{ parent_type }}"
        parent_id: "{{ parent_id }}"
        type: "{{ type }}"
        id: "{{ id }}"
        properties: "{{ properties }}"
        state: "{{ state }}"
        command: "{{ command }}"
        match_filter: "{{ match_filter }}"
        children: "{{ children }}"
      register: result

    - name: Debug module output
      debug:
        var: result

    - name: Test random port numbers
      set_fact:
        random_port: "{{ 10000 | random }}"
      when: properties is defined and properties.port is defined

    - name: Print random port number
      debug:
        var: random_port
      when: random_port is defined

    - name: Verify port value
      assert:
        that:
          - random_port is defined
          - properties.port == random_port