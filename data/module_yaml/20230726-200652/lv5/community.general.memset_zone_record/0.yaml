---
- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create zone record
      community.general.memset_zone_record:
        api_key: YOUR_API_KEY
        zone: example.com
        record: test
        address: 10.1.1.1
        type: A
        ttl: 3600
        priority: 10
        relative: false
        state: present
      register: create_result
      ignore_errors: true

    - name: Assert create result
      assert:
        that:
          - create_result is success
      ignore_errors: true

    - name: Delete zone record
      community.general.memset_zone_record:
        api_key: YOUR_API_KEY
        zone: example.com
        record: test
        state: absent
      register: delete_result
      ignore_errors: true

    - name: Assert delete result
      assert:
        that:
          - delete_result is success
      ignore_errors: true