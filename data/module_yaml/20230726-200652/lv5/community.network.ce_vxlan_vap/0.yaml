---
- name: Test playbook for community.network.ce_vxlan_vap module
  hosts: localhost
    vars:
      bind_vlan_id: "{{ lookup('random_int', start=1, end=4096) }}"
      bridge_domain_id: "{{ lookup('random_int', start=1, end=4096) }}"
      ce_vid: "{{ lookup('random_int', start=1, end=4096) }}"
      encapsulation_options: [dot1q, untagged]
      encapsulation: "{{ lookup('random_element', choices=encapsulation_options) }}"
      l2_sub_interface: "{{ lookup('random_int', start=1, end=4096) }}"
      pe_vid: "{{ lookup('random_int', start=1, end=4096) }}"
      state_options: [present, absent]
      state: "{{ lookup('random_element', choices=state_options) }}"

  tasks:
    - name: Test ce_vxlan_vap module
      community.network.ce_vxlan_vap:
        bind_vlan_id: "{{ bind_vlan_id }}"
        bridge_domain_id: "{{ bridge_domain_id }}"
        ce_vid: "{{ ce_vid }}"
        encapsulation: "{{ encapsulation }}"
        l2_sub_interface: "{{ l2_sub_interface }}"
        pe_vid: "{{ pe_vid }}"
        state: "{{ state }}"
      register: result

    - name: Print module result
      debug:
        var: result