---
- name: Test playbook for community.network.icx_lldp module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Include necessary collections
      include_collections:
        - community.network

    - name: Enable LLDP on specified interfaces
      community.network.icx_lldp:
        check_running_config: True
        interfaces: "{{ interfaces }}"
        state: "{{ state }}"
      register: result

    - name: Print the LLDP configuration result
      debug:
        var: result

    - name: Test port settings
      community.network.icx_lldp:
        check_running_config: True
        interfaces:
          - "eth1"
          - "ge2"
          - "te3"
        state: enabled
      register: port_settings_result

    - name: Print port settings result
      debug:
        var: port_settings_result

    - name: Test random port numbers
      community.network.icx_lldp:
        check_running_config: True
        interfaces:
          - "eth{{ (1+random_number) }}"
          - "ge{{ (1+random_number) }}"
          - "te{{ (1+random_number) }}"
        state: enabled
      register: random_port_result
      
    - name: Print random port result
      debug:
        var: random_port_result