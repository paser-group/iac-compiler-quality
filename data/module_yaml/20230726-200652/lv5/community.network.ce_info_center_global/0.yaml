- name: Manage outputting logs on HUAWEI
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Configure info center global parameters
      community.network.ce_info_center_global:
        state: present
        channel_cfg_name: "{{ item.channel_cfg_name }}"
        channel_id: "{{ item.channel_id }}"
        channel_name: "{{ item.channel_name }}"
        channel_out_direct: "{{ item.channel_out_direct }}"
        facility: "{{ item.facility }}"
        filter_feature_name: "{{ item.filter_feature_name }}"
        filter_log_name: "{{ item.filter_log_name }}"
        info_center_enable: "{{ item.info_center_enable }}"
        ip_type: "{{ item.ip_type }}"
        is_default_vpn: "{{ item.is_default_vpn }}"
        level: "{{ item.level }}"
        logfile_max_num: "{{ item.logfile_max_num }}"
        logfile_max_size: "{{ item.logfile_max_size }}"
        packet_priority: "{{ item.packet_priority }}"
        server_domain: "{{ item.server_domain }}"
        server_ip: "{{ item.server_ip }}"
        server_port: "{{ item.server_port }}"
        source_ip: "{{ item.source_ip }}"
        ssl_policy_name: "{{ item.ssl_policy_name }}"
        suppress_enable: "{{ item.suppress_enable }}"
        timestamp: "{{ item.timestamp }}"
        transport_mode: "{{ item.transport_mode }}"
        vrf_name: "{{ item.vrf_name }}"
      loop:
        - channel_cfg_name: null
          channel_id: null
          channel_name: null
          channel_out_direct: null
          facility: null
          filter_feature_name: null
          filter_log_name: null
          info_center_enable: null
          ip_type: null
          is_default_vpn: true
          level: null
          logfile_max_num: null
          logfile_max_size: null
          packet_priority: null
          server_domain: null
          server_ip: null
          server_port: null
          source_ip: null
          ssl_policy_name: null
          suppress_enable: null
          timestamp: null
          transport_mode: null
          vrf_name: null

    - name: Random port test
      community.network.ce_info_center_global:
        state: present
        server_port: "{{ item }}"
      loop:
        - "{{ range(10000, 11000) | random }}"