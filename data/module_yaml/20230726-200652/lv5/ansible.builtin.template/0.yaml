---
- name: Template a file with potential type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Template a file
      ansible.builtin.template:
        src: templates/my_template.j2
        dest: /tmp/my_template_file
        variables:
          port: "{{ lookup('community.general.random_number', min=1024, max=65535, format='int') }}"
          backup: "yes"
          follow: "yes"
          mode: 0644
          owner: root
          group: root
          validate: /path/to/validator.sh

      register: result

    - name: Print file content
      debug:
        var: result.stdout