---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    - vrf_list:
        - name: "vrf1"
          rd: 10.1.1.1:1000
          purge: false
          aggregate: null
          delay: null
          interfaces: null
          state: present
          associated_interfaces: null
        - name: "vrf2"
          rd: 10.1.1.2:2000
          purge: false
          aggregate: null
          delay: null
          interfaces: null
          state: present
          associated_interfaces: null
        - name: "vrf3"
          rd: 10.1.1.3:3000
          purge: false
          aggregate: null
          delay: null
          interfaces: null
          state: present
          associated_interfaces: null

  tasks:
    - name: Create VRFs
      community.network.cnos_vrf:
        name: "{{ item.name }}"
        rd: "{{ item.rd }}"
        purge: "{{ item.purge }}"
        aggregate: "{{ item.aggregate }}"
        delay: "{{ item.delay }}"
        interfaces: "{{ item.interfaces }}"
        state: "{{ item.state }}"
        associated_interfaces: "{{ item.associated_interfaces }}"
      with_items: "{{ vrf_list }}"