---
- name: Manage Layer-2 interfaces
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure Layer-2 Interface
      community.network.cnos_l2_interface:
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_password }}"
          transport: cli

        name: "{{ inventory_hostname }}"
        mode: "{{ random_mode }}"
        state: "{{ random_state }}"
        access_vlan: "{{ random_vlan }}"
        native_vlan: "{{ random_vlan }}"
        trunk_vlans: "{{ random_vlans }}"
        trunk_allowed_vlans: "{{ random_allowed_vlans }}"
        aggregate: "{{ random_agg }}"
      register: l2_interface_result

    - name: Print Layer-2 Interface result
      debug:
        var: l2_interface_result