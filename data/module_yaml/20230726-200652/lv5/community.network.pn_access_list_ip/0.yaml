---
- name: Test pn_access_list_ip module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Add access list IP
      community.network.pn_access_list_ip:
        pn_cliswitch: "cli"
        pn_ip: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        pn_name: "test-access-list"
        state: present
      register: result
      tags: add_access_list_ip

    - name: Debug result
      debug:
        var: result
      tags: add_access_list_ip

    - name: Remove access list IP
      community.network.pn_access_list_ip:
        pn_cliswitch: "cli"
        pn_ip: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        pn_name: "test-access-list"
        state: absent
      register: result
      tags: remove_access_list_ip

    - name: Debug result
      debug:
        var: result
      tags: remove_access_list_ip