---
- name: Test ipadm_addrprop module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Set temporary property with random port
      community.network.ipadm_addrprop:
        addrobj: "{{ inventory_hostname }}"
        property: "listen_ports"
        state: "present"
        temporary: true
        value: "{{ 10000 | random }}"