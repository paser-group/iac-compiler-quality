---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    action: add
    author: ansible
    cmdfile: "/usr/local/nagios/var/rw/nagios.cmd"
    command: check_http
    comment: Test check
    host: localhost
    minutes: 5
    servicegroup: services
    services: example-service
    start: 00:00

  tasks:
    - name: Enable downtime for a host
      community.general.nagios:
        action: "{{ action }}"
        author: "{{ author }}"
        cmdfile: "{{ cmdfile }}"
        command: "{{ command }}"
        comment: "{{ comment }}"
        host: "{{ host }}"
        minutes: "{{ minutes }}"
        servicegroup: "{{ servicegroup }}"
        services: "{{ services }}"
        start: "{{ start }}"
      register: result

    - name: Print Playbook Result
      debug:
        var: result