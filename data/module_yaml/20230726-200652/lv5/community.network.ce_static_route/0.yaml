---
- name: Manage static routes on HUAWEI routers
  hosts: routers
  gather_facts: false
  tasks:
    - name: Configure static route
      community.network.ce_static_route:
        aftype: "{{ item.aftype }}"
        description: "{{ item.description }}"
        destvrf: "{{ item.destvrf }}"
        mask: "{{ item.mask }}"
        next_hop: "{{ item.next_hop }}"
        nhp_interface: "{{ item.nhp_interface }}"
        pref: "{{ item.pref }}"
        prefix: "{{ item.prefix }}"
        state: "{{ item.state }}"
        tag: "{{ item.tag }}"
        vrf: "{{ item.vrf }}"
      with_items:
        - aftype: "{{ ['ipv4', 'ipv6'] | random }}"
          description: "Route description"
          destvrf: "vrf1"
          mask: "{{ ['0', '24', '32'] | random }}"
          next_hop: "10.1.1.254"
          nhp_interface: "GigabitEthernet0/0/0"
          pref: "1"
          prefix: "172.16.0.0"
          state: "present"
          tag: "1"
          vrf: "vrf1"