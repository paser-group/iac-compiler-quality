---
- name: Test playbook for community.network.pn_vrouter_ospf6 module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add OSPFv6 configuration
      community.network.pn_vrouter_ospf6:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_nic: "{{ pn_nic }}"
        pn_ospf6_area: "{{ pn_ospf6_area }}"
        pn_vrouter_name: "{{ pn_vrouter_name }}"
        state: present
      register: ospf6_config

    - name: Debug output
      debug:
        var: ospf6_config

- name: Test playbook for testing OSPFv6 configuration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port numbers
      set_fact:
        random_port: "{{ 30000 + (ansible_play_batch_index * ansible_play_hosts_all.index(inventory_hostname)) }}"
        pn_cliswitch: "network_cli"
        pn_nic: "eth0"
        pn_ospf6_area: "0.0.0.0"
        pn_vrouter_name: "vrouter1"
        state: present

    - name: Print random port numbers
      debug:
        var: random_port