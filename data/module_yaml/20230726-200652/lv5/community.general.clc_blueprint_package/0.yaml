---
- name: Test community.general.clc_blueprint_package module
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    - name: Deploy blueprint package
      community.general.clc_blueprint_package:
        package_id: "{{ random_string(10) }}"  # Generate a random string for package_id
        package_params:
          - name: param1
            value: "{{ random_string(5) }}"  # Generate a random string for package parameter value

        # Generate a random list of server_ids
        server_ids: "{{ server_ids | default([]) + [item] }}"
        loop: "{{ range(4) | list }}"
        loop_control:
          loop_var: item

        # Generate a random state value ('present' or 'absent')
        state: "{{ random_choice(['present', 'absent']) }}"

        # Generate a random wait value ('yes' or 'no')
        wait: "{{ random_choice(['yes', 'no']) }}"
      register: result

    - name: Display playbook result
      debug:
        var: result