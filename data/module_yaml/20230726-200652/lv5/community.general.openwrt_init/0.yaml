---
- name: Test playbook for openwrt_init module
  hosts: localhost
  gather_facts: false

  vars:
    my_enabled: "True"
    my_name: "openwrt_device"
    my_pattern: "*"
    my_state: "initialized"

  tasks:
    - name: Initialize OpenWRT device
      community.general.openwrt_init:
        enabled: "{{ my_enabled | bool }}"
        name: "{{ my_name }}"
        pattern: "{{ my_pattern }}"
        state: "{{ my_state }}"
        port: "{{ my_port }}"
      vars:
        my_port: "{{ range(1025,65535)|random }}"