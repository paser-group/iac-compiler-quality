---
- name: Enforce model attributes
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Include community.general.spectrum_model_attrs module
      include_role:
        name: community.general.spectrum_model_attrs
  
  vars:
    models:
      - name: model1
        attributes:
          - attr1
          - attr2
          
      - name: model2
        attributes:
          - attr3
  
  tasks:
    - name: Enforce model attributes
      community.general.spectrum_model_attrs:
        name: "{{ item.name }}"
        attributes: "{{ item.attributes }}"
        url: "http://example.com"
        url_username: "admin"
        url_password: "password"
        use_proxy: true
        validate_certs: false
        port: "{{ (3306..3310)|random }}"
      with_items: "{{ models }}"