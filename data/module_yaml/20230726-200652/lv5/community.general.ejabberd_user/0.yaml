- name: Test playbook for community.general.ejabberd_user module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ejabberd user
      community.general.ejabberd_user:
        host: "{{ host }}"
        username: "{{ username }}"
        password: "{{ password }}"
        state: "{{ state|int }}"  # Triggering type-related bug
      register: result
      ignore_errors: true

    - name: Display playbook result
      debug:
        msg: "{{ result }}"