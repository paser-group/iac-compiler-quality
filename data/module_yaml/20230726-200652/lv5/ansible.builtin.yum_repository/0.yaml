---
- name: Test ansible.builtin.yum_repository module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Add yum repository
      ansible.builtin.yum_repository:
        name: test-repo
        baseurl:
          - http://{{ hostvars[item]['ansible_default_ipv4']['address'] }}:{{ 10.1.1.{{ item }} }}/repo
        state: present
      with_items: "{{ play_hosts }}"
      loop_control:
        label: "{{ item }}"