---
- name: Test community.general.irc module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number
      set_fact:
        port: "{{ 1024 | random(seed=inventory_hostname) + 49152 }}"

    - name: Send message to IRC channel
      community.general.irc:
        server: irc.example.com
        port: "{{ port }}"
        use_ssl: true
        nick: "ansiblebot"
        passwd: "password"
        channel: "#ansible"
        msg: "Hello from Ansible!"
      register: result

    - name: Debug module output
      debug:
        var: result