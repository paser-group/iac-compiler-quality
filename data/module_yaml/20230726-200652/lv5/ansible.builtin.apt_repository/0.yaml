---
- name: Test playbook for apt_repository module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add APT repository
      ansible.builtin.apt_repository:
        repo: "{{ item.repo }}"
        state: present
      loop:
        - { repo: "deb http://archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }} main" }
        - { repo: "deb http://deb.debian.org/debian/ {{ ansible_distribution_release }} main" }
        - { repo: "deb http://archive.debian.org/debian/ {{ ansible_distribution_release }} main" }
        - { repo: "deb http://apt.postgresql.org/pub/repos/apt/ {{ ansible_distribution_release }}-pgdg main" }
        - { repo: "{{ random_port_output }}" }
        - { repo: "{{ invalid_variable }}" }
        - { repo: "{{ ansible_distribution_release }}" }
      register: apt_repo_output

    - name: Debug output
      debug:
        var: apt_repo_output