---
- name: Test for latent type-related bugs in Ansible module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure CloudEngine device
      community.network.ce_config:
        backup: true
        backup_options:
          dir_path: /path/to/backup
        save: true
        src: running-config
        lines:
          - line 1
          - line 2
          - "{{ random_port() }}"
      register: ce_config

    - name: Print output
      debug:
        var: ce_config

  vars:
    random_port: "{{ (10**4..10**5-1)|random }}"

# Generate random port number
- name: Generate random port number
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set fact with random port
      set_fact:
        random_port: "{{ (10**4..10**5-1)|random }}"