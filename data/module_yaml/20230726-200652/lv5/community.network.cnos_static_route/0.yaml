---
- name: Manage static IP routes on Lenovo switches
  hosts: switches
  gather_facts: False

  vars:
    admin_distance: "{{ None }}"
    aggregate: "{{ None }}"
    description: "{{ None }}"
    interface: "{{ None }}"
    mask: "{{ None }}"
    next_hop: "{{ None }}"
    prefix: "{{ None }}"
    state: "{{ None }}"
    tag: "{{ None }}"

  tasks:
    - name: Configure static IP routes
      community.network.cnos_static_route:
        admin_distance: "{{ admin_distance }}"
        aggregate: "{{ aggregate }}"
        description: "{{ description }}"
        interface: "{{ interface }}"
        mask: "{{ mask }}"
        next_hop: "{{ next_hop }}"
        prefix: "{{ prefix }}"
        state: "{{ state }}"
        tag: "{{ tag }}"
      register: route_result

    - debug:
        var: route_result

- name: Generate random port numbers for testing
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ range(1024, 65535) | random }}"
      register: port_result

    - debug:
        var: port_result