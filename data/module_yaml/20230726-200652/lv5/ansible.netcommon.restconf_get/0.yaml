---
- name: Test playbook for ansible.netcommon.restconf_get module
  hosts: localhost
  gather_facts: false

  vars:
    random_port: "{{ 10000 | random }}" # Generating random port number

  tasks:
    - name: Fetch configuration/state data using ansible.netcommon.restconf_get module
      ansible.netcommon.restconf_get:
        content: config
        output: json
        path: /restconf/data/network-instances/network-instance=default
        port: "{{ random_port }}" # Using the random port number
      register: restconf_output

    - name: Display the output
      debug:
        var: restconf_output