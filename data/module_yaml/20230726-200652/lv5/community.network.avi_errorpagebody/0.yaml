- name: Test playbook for community.network.avi_errorpagebody module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up error page body
      community.network.avi_errorpagebody:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "{{ state | default('present') }}"
        name: "{{ name }}"
        tenant_uuid: "{{ tenant_uuid }}"
        tenant_ref: "{{ tenant_ref }}"
        uuid: "{{ uuid }}"
        url: "{{ url }}"
        error_page_body: "{{ error_page_body }}"
        format: "{{ format }}"
        avi_credentials: "{{ avi_credentials }}"
        avi_api_patch_op: "{{ avi_api_patch_op }}"
        avi_api_update_method: "{{ avi_api_update_method }}"
        api_version: "{{ api_version }}"
        api_context: "{{ api_context }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact | default(false) }}"

  vars:
    controller: "controller_ip"
    username: "admin"
    password: "password"
    tenant: "Default"
    state: "present"
    name: "ErrorPageBody"
    tenant_uuid: "tenant_uuid"
    tenant_ref: "/api/tenant/tenant_uuid"
    uuid: "uuid"
    url: "https://example.com"
    error_page_body: "body"
    format: "html"
    avi_credentials:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"
    avi_api_patch_op: null
    avi_api_update_method: null
    api_version: "17.2.6"
    api_context: {}

- name: Test port settings
  hosts: all
  gather_facts: false

  tasks:
    - name: Trigger port settings
      shell: "echo Testing port settings"
      register: result
      ignore_errors: true

  vars:
    port_number: "{{ 10000 | random }}"