- name: Test playbook for community.network.aireos_config module
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure AireOS devices with random port numbers
      community.network.aireos_config:
        after: null
        backup: yes
        backup_options:
          dir: backup
          prefix: config_bkp
        before: null
        diff_against: null
        diff_ignore_lines: null
        intended_config: null
        lines:
          - "interface GigabitEthernet0/1"
          - "  switchport access vlan {{ random(1, 4094) }}"
          - "interface GigabitEthernet0/2"
          - "  switchport access vlan {{ random(1, 4094) }}"
          - "interface GigabitEthernet0/3"
          - "  switchport access vlan {{ random(1, 4094) }}"
        match: null
        running_config: null
        save: yes
        save_when: null
        src: null
      register: result

    - name: Display result
      debug:
        var: result