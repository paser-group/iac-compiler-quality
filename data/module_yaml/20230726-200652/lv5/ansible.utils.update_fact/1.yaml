---
- hosts: all
  gather_facts: false

  tasks:
    - name: Update ansible_facts
      ansible.utils.update_fact:
        fact_path: "/tmp/new_facts.json"
        fact_name: "custom_fact"
        fact_value: "{{ ansible_distribution }}"
        update:
          - port: "{{ range(10000, 20000) | random }}"