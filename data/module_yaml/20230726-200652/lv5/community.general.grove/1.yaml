---
- name: Verify latent type-related bugs in Ansible
  hosts: all
  gather_facts: false

  vars:
    channel_token: "your_channel_token"
    icon_url: "https://example.com/icon.png"
    message_content: "This is a test message"
    service: "slack"
    url: "https://hooks.slack.com/services/your_webhook_url"
    validate_certs: false

  tasks:
    - name: Generate random port numbers
      set_fact:
        port: "{{ 10000 | random }}"

    - name: Send notification
      community.general.grove:
        channel_token: "{{ channel_token }}"
        icon_url: "{{ icon_url }}"
        message_content: "{{ message_content }}"
        service: "{{ service }}"
        url: "{{ url }}"
        validate_certs: "{{ validate_certs }}"
        port: "{{ port }}"
      register: result

    - debug:
        var: result