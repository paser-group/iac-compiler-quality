- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  vars:
    api_password: 

  tasks:
    - name: Set api_password
      set_fact:
        api_password: "{{ api_password|default(omit) }}"

    - name: Debug api_password
      debug:
        var: api_password