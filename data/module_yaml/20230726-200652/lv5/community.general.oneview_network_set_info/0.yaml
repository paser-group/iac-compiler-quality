---
- name: Test playbook for community.general.oneview_network_set_info module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Include required modules
      include_vars:
        file: required_modules.yml

    - name: Retrieve information about network sets
      oneview_network_set_info:
        config: "{{ oneview_config }}"
        hostname: "{{ oneview_hostname }}"
        username: "{{ oneview_username }}"
        password: "{{ oneview_password }}"
        api_version: "{{ oneview_api_version }}"
        name: "{{ network_set_name }}"
        options:
          - 'networkUris'
          - 'type'

      register: network_set_info

    - name: Output network set information
      debug:
        var: network_set_info

- name: Test cases
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Include required modules
      include_vars:
        file: required_modules.yml

    - name: Test random port settings
      set_fact:
        random_port: "{{ 10000 | random }}"

    - name: Test community.general.oneview_network_set_info module with random port
      oneview_network_set_info:
        config: "{{ oneview_config }}"
        hostname: "{{ oneview_hostname }}"
        username: "{{ oneview_username }}"
        password: "{{ oneview_password }}"
        api_version: "{{ oneview_api_version }}"
        name: "{{ network_set_name }}"
        options:
          - 'networkUris'
          - 'type'
        params:
          port: "{{ random_port }}"

      register: network_set_info_random_port

    - name: Output network set information with random port
      debug:
        var: network_set_info_random_port