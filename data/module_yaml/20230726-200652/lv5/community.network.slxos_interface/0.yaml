---
- name: Manage interfaces on Extreme switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure interface
      community.network.slxos_interface:
        aggregate: "{{ item.aggregate | default(None) }}"
        delay: "{{ item.delay | default(None) }}"
        description: "{{ item.description | default(None) }}"
        enabled: "{{ item.enabled }}"
        mtu: "{{ item.mtu | default(None) }}"
        name: "{{ item.name }}"
        neighbors: "{{ item.neighbors | default(None) }}"
        rx_rate: "{{ item.rx_rate | default(None) }}"
        speed: "{{ item.speed | default(None) }}"
        state: "{{ item.state | default(None) }}"
        tx_rate: "{{ item.tx_rate | default(None) }}"
      loop:
        - aggregate: none
          enabled: yes
          name: 1/1/1
          state: present
        - aggregate: none
          enabled: no
          description: "Unused interface"
          name: 1/1/2
          state: present

    - name: Print interface status
      debug:
        var: "{{ item.name }}"
      loop:
        - name: 1/1/1
        - name: 1/1/2