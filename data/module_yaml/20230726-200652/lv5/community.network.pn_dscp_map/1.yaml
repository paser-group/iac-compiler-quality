---
- name: Generate random port numbers
  hosts: localhost
  gather_facts: False
  tasks:
    - name: Generate random port numbers
      command: shuf -i 1024-65535 -n 5
      register: random_ports

    - name: Run pn_dscp_map playbook with random ports
      include_role:
        name: ansible-dscp-playbook
      vars:
        pn_cliswitch: "switch01"
        pn_name: "dscp_map_1"
        pn_scope: "global"
        random_ports: "{{ random_ports.stdout_lines }}"