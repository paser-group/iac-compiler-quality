---
- name: Configure DSCP to Priority mappings
  hosts: network_device
  gather_facts: false

  tasks:
    - name: Create random port numbers
      set_fact:
        port_number_1: "{{ [1024, 65535] | random }}"
        port_number_2: "{{ [1024, 65535] | random }}"

    - name: Configure DSCP to Priority mappings
      community.network.pn_dscp_map_pri_map:
        pn_cliswitch: "{{ inventory_hostname }}"
        pn_dsmap: "{{ port_number_1 }}"
        pn_name: "TestMap1"
        pn_pri: "{{ port_number_2 }}"
        state: present
      register: result

    - name: Debug output
      debug:
        var: result