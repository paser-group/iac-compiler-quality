- name: Get interface link status
  hosts: huawei_devices
  gather_facts: false
  
  tasks:
    - name: Generate random port numbers
      set_fact:
        port_numbers: "{{ range(1, 10) | random(seed=inventory_hostname) }}"
  
    - name: Get link status for interface
      community.network.ce_link_status:
        interface: "GigabitEthernet0/0/{{ item }}"
      with_items: "{{ port_numbers }}"
      register: link_status_result
  
    - name: Print link status
      debug:
        msg: "Link status for {{ item.item }}: {{ item.stdout }}"
      loop: "{{ link_status_result.results }}"