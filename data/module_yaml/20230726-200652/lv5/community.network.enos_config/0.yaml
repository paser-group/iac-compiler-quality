---
- name: Test playbook for community.network.enos_config module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Test community.network.enos_config module
      community.network.enos_config:
        admin: "{{ admin }}"
        auth_pass: "{{ auth_pass }}"
        authorize: true
        backup: "{{ backup }}"
        backup_options:
          dir: "/var/backups"
          interval: 3600
        comment: "{{ comment }}"
        config: "{{ config }}"
        lines: "{{ lines }}"
        match: "{{ match }}"
        parents: "{{ parents }}"
        replace: "{{ replace }}"
        src: "{{ src }}"

  vars:
    admin: "true"
    auth_pass: "password"
    backup: 12345
    comment: 999
    config: "config_file.conf"
    lines:
      - "line1"
      - 222
    match: 555
    parents: 
      - "parent1"
      - 666
    replace: true
    src: False

  handlers:
    - name: Debug output
      debug:
        var: output

    - name: Debug failed task
      debug:
        msg: "Task failed!"

  post_tasks:
    - debug:
        msg: "Ansible playbook execution completed successfully!"