- name: Extract SAR archives using sapcar_extract module
  hosts: localhost
  gather_facts: false

  vars:
    sar_file_path: "/path/to/sar_archive.sar"
    extraction_dir: "/path/to/extraction_dir"
    random_port: "{{ 10000 | random(seed=inventory_hostname) }}"

  tasks:
    - name: Extract SAR archive
      community.general.sapcar_extract:
        binary_path: "/path/to/sapcar"
        dest: "{{ extraction_dir }}"
        path: "{{ sar_file_path }}"
        remove: true
        manifest: "manifest.file"
        security_library: "/path/to/security_library"
        signature: yes
        port: "{{ random_port }}"
      register: sapcar_extract

    - name: Debug sapcar_extract output
      debug:
        var: sapcar_extract