- name: Test Case 1 - Random Port Numbers
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set SELinux Permissive for Domain with Random Port Number
      community.general.selinux_permissive:
        domain: "{{ domain }}"
        no_reload: "{{ no_reload }}"
        permissive: "{{ permissive }}"
        store: "{{ store }}"
      vars:
        domain: "http://example.com:{{ lookup('pipe','shuf -i 1024-65535 -n 1') }}"
        no_reload: false
        permissive: true
        store: "boolean"