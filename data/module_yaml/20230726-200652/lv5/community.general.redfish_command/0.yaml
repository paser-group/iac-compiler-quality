---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create random port number
      set_fact:
        random_port: "{{ (22000..23000)|random }}"

    - name: Execute community.general.redfish_command
      community.general.redfish_command:
        baseuri: "https://{{ inventory_hostname }}:{{ random_port }}"
        username: "admin"
        password: "password"
        command: "get_system"
      vars:
        ansible_python_interpreter: "/usr/bin/python3"
      register: redfish_output

    - name: Debug redfish_output
      debug:
        var: redfish_output