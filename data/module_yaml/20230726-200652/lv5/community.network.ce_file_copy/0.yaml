---
- name: Copy file to remote Huawei CloudEngine device over SCP
  hosts: ce_devices
  gather_facts: false

  tasks:
    - name: Copy file to remote device
      community.network.ce_file_copy:
        file_system: "{{ file_system | default(None) }}"
        local_file: "{{ local_file | default(None) }}"
        remote_file: "{{ remote_file | default(None) }}"
      register: file_copy_result

    - name: Display file copy result
      debug:
        var: file_copy_result

- name: Heuristic Test Cases
  hosts: localhost
  gather_facts: false
  vars:
    file_system: None
    local_file: None
    remote_file: None
    port_candidates:
      - 22
      - 2222
      - 22222

  tasks:
    - name: Test port settings
      set_fact:
        port: "{{ port_candidates | random }}"
      register: test_result

    - name: Display test result
      debug:
        var: test_result