---
- name: Test playbook for community.network.pn_vflow_table_profile module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Setup vFlow table profile with random port numbers
      community.network.pn_vflow_table_profile:
        pn_cliswitch: "{{ pn_cliswitch | int }}"
        pn_enable: "{{ pn_enable | string }}"
        pn_hw_tbl: "{{ pn_hw_tbl | int }}"
        pn_profile: "{{ pn_profile | int }}"
        state: "{{ state | bool }}"
        pn_src_port: "{{ pn_src_port | int }}"
        pn_dest_port: "{{ pn_dest_port | int }}"
      register: result
      
    - debug:
        var: result
        
    - name: Delete vFlow table profile
      community.network.pn_vflow_table_profile:
        pn_cliswitch: "{{ pn_cliswitch | int }}"
        pn_enable: "{{ pn_enable | string }}"
        pn_hw_tbl: "{{ pn_hw_tbl | int }}"
        pn_profile: "{{ pn_profile | int }}"
        state: "{{ state | bool }}"
      register: result

    - debug:
        var: result

  vars:
    pn_cliswitch: "localhost"
    pn_enable: true
    pn_hw_tbl: "table1"
    pn_profile: "profile1"
    pn_src_port: 12345
    pn_dest_port: 54321
    state: "present"