- name: Test playbook for cnos_save module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Save running configuration
      community.network.cnos_save:
        deviceType: "{{ ['g8272', 'g8332', 'g8032']|random }}"
        enablePassword: "password"
        host: "10.1.1.1"
        outputfile: "running-config.txt"
        password: "password"
        username: "admin"

      register: save_result

    - name: Display the save command output
      debug:
        var: save_result

    - name: Test random port numbers
      community.network.cnos_save:
        deviceType: "{{ ['g8272', 'g8332', 'g8032']|random }}"
        enablePassword: "password"
        host: "10.1.1.1"
        outputfile: "running-config.txt"
        password: "password"
        username: "admin"
        port: "{{ ['22', 23, 80, 443, 8080, 9000, 10000, 30000, 50000, 65535]|random }}"

      register: save_command_output

    - name: Display the save command output
      debug:
        var: save_command_output