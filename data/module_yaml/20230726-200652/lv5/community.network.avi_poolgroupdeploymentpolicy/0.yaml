---
- name: Test playbook for community.network.avi_poolgroupdeploymentpolicy module
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create PoolGroupDeploymentPolicy
      community.network.avi_poolgroupdeploymentpolicy:
        controller: "https://controller.example.com"
        username: "admin"
        password: "password"
        tenant: "tenant1"
        avi_credentials:
          username: "admin"
          password: "password"
        api_version: "17.2.4"
        tenant_ref: "/api/tenant?name=admin"
        name: "PoolGroupDeploymentPolicy1"
        scheme: "https"
        url: "poolgroupdeploymentpolicy"
        tenant_uuid: "d1c6b7be-1101-4dee-86b8-7e78872dce29"
        evaluation_duration: 600
        test_traffic_ratio_rampup: 10
        target_test_traffic_ratio: 20
        auto_disable_old_prod_pools: true
        webhook_ref: "/api/webhook?page_size=10&tenant=admin"
        rules: null
        description: null
        state: null
        uuid: null
        api_context:
          api_version: "17.2.4"
          controller: "https://controller.example.com"
        avi_api_update_method: null
        avi_api_patch_op: null
        avi_disable_session_cache_as_fact: false