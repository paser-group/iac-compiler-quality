---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random port number
      set_fact:
        random_port: "{{ 1024 + (ansible_date_time.microsecond % 64511) }}"
    
    - name: Send Campfire message
      community.general.campfire:
        msg: "Test message"
        notify: "notify@example.com"
        room: "myroom"
        subscription: "mysubscription"
        token: "mytoken"
      register: result

    - name: Debug result
      debug:
        var: result

    - name: Debug random port number
      debug:
        var: random_port