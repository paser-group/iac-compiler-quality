---
- name: Test webfaction_domain module
  hosts: localhost
  gather_facts: false

  vars:
    login_name: "test_user"
    login_password: "test_password"

  tasks:
    - name: Add domain with list of subdomains
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: example.com
        state: present
        subdomains:
          - www
          - blog
          - store

    - name: Add domain with string value for subdomains
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: example.com
        state: present
        subdomains: "www, blog, store"

    - name: Add domain with invalid port type
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: example.com
        state: present
        subdomains:
          - www
        port: "8080"

    - name: Add domain with invalid state type
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: example.com
        state: 123
        subdomains:
          - www

    - name: Add domain without name attribute
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        state: present
        subdomains:
          - www

    - name: Add domain without login_name attribute
      community.general.webfaction_domain:
        login_password: "{{ login_password }}"
        name: example.com
        state: present
        subdomains:
          - www

    - name: Add domain without login_password attribute
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        name: example.com
        state: present
        subdomains:
          - www