---
- name: Configure SSL Key and Certificate
  hosts: localhost
  gather_facts: false

  vars:
    avi_credentials:
      controller: "https://{{ ansible_host }}"
      username: "admin"
      password: "password"
      tenant: "admin"

  tasks:
    - name: Configure SSL Key and Certificate
      community.network.avi_sslkeyandcertificate:
        avi_credentials: "{{ avi_credentials }}"
        avi_disable_session_cache_as_fact: 1
        controller: "{{ avi_credentials.controller }}"
        username: "{{ avi_credentials.username }}"
        password: "{{ avi_credentials.password }}"
        tenant: "{{ avi_credentials.tenant }}"
        name: example_ssl_key
        key_base64: "true"
        certificate_base64: "false"
        key: |
          -----BEGIN RSA PRIVATE KEY-----
          MIIEowIBAAKCAQEA0YodiBpYG4RnmWu3Dj4yw6v3R6ctPz8ndqB59ohQ4SZhTz1W
          ...
          -----END RSA PRIVATE KEY-----
        certificate: |
          -----BEGIN CERTIFICATE-----
          MIIC9DCCAl6gAwIBAgIJAI5uxhMzKhrjMA0GCSqGSIb3DQEBCwUAMBUxEzARBgNV
          ...
          -----END CERTIFICATE-----