---
- name: Manage Packages using yum module
  hosts: all
  become: true
  tasks:
    - name: Install packages
      yum:
        name: "{{ item }}"
        state: present
        disablerepo: "{{ disablerepo }}"
        disable_gpg_check: "{{ disable_gpg_check }}"
        conf_file: "{{ conf_file }}"
        use_backend: "{{ use_backend }}"
        list: "{{ list }}"
        update_cache: "{{ update_cache }}"
        cacheonly: "{{ cacheonly }}"
      with_items:
        - package1
        - package2
        - package3
      register: yum_output

    - name: Debug yum output
      debug:
        var: yum_output