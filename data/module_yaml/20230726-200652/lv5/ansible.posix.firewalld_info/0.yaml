---
- name: Expose latent type-related bugs
  hosts: localhost
  gather_facts: false
  become: false

  tasks:
    - name: Fetch firewalld info
      ansible.posix.firewalld_info:
        active_zones: "true"

    - name: Test port settings
      command: "nc -zv {{ hostvars[groups['localhost'][0]]['ansible_default_ipv4']['address'] }} {{ item }}"
      loop:
        - "{{ range(10000, 10004) | random }}"
        - "{{ range(20000, 20004) | random }}"
      register: nc_test_output

    - name: Display test results
      debug:
        var: nc_test_output