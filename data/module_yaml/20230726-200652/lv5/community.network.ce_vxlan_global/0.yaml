- name: Test VXLAN Global Attributes
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure VXLAN Global Attributes
      community.network.ce_vxlan_global:
        bridge_domain_id: "{{ bridge_domain_id | default(omit) }}"
        nvo3_acl_extend: "{{ nvo3_acl_extend | default(omit) }}"
        nvo3_ecmp_hash: "{{ nvo3_ecmp_hash | default(omit) }}"
        nvo3_eth_trunk_hash: "{{ nvo3_eth_trunk_hash | default(omit) }}"
        nvo3_gw_enhanced: "{{ nvo3_gw_enhanced | default(omit) }}"
        nvo3_prevent_loops: "{{ nvo3_prevent_loops | default(omit) }}"
        nvo3_service_extend: "{{ nvo3_service_extend | default(omit) }}"
        state: "{{ state | default(omit) }}"
        tunnel_mode_vxlan: "{{ tunnel_mode_vxlan | default(omit) }}"
        
      register: result

    - name: Debug result
      debug:
        var: result

- name: Random Port Number Test Cases
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate Random Port Number
      set_fact:
        random_port: "{{ 4000 + (ansible_play_hosts_all.index(ansible_hostname) | default(0) ) * 10 | random(range=10)) }}"
        
    - name: Debug random_port
      debug:
        var: random_port