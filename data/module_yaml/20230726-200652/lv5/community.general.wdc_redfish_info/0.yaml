- name: Test playbook for latent type-related bugs
  hosts: all
  gather_facts: false

  vars:
    auth_token: "my_auth_token"
    baseuri: "https://example.com/api"
    category: "my_category"
    command:
      - "get"
      - "info"
    ioms:
      - "iom1"
    password: "my_password"
    timeout: 10
    username: "my_username"

    # Randomly generated port numbers
    random_port1: "{{ 10000 | random }}"
    random_port2: "{{ 10000 | random }}"

  tasks:
    - name: Print randomly generated ports
      debug:
        msg: "Random port 1: {{ random_port1 }}, Random port 2: {{ random_port2 }}"

    - name: Trigger latent type-related bug
      community.general.wdc_redfish_info:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        category: "{{ category }}"
        command: "{{ command }}"
        ioms: "{{ ioms }}"
        password: "{{ password }}"
        timeout: "{{ timeout }}"
        username: "{{ username }}"
        # Using randomly generated port numbers
        port1: "{{ random_port1 }}"
        port2: "{{ random_port2 }}"