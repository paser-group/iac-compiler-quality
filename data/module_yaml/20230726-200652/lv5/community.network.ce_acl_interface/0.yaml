---
- name: Manage ACLs on HUAWEI interfaces
  hosts: localhost
  gather_facts: false

  vars:
    acl_name: "{{ hostvars[inventory_hostname].acl_name | default(omit) }}"
    direction: "{{ hostvars[inventory_hostname].direction | default(omit) }}"
    interface: "{{ hostvars[inventory_hostname].interface | default(omit) }}"
    state: "{{ hostvars[inventory_hostname].state | default(omit) }}"

  tasks:
    - name: Apply ACL on interface
      community.network.ce_acl_interface:
        acl_name: "{{ acl_name }}"
        direction: "{{ direction }}"
        interface: "{{ interface }}"
        state: "{{ state }}"
        provider:
          host: "{{ inventory_hostname }}"
          username: "{{ ansible_user }}"
          password: "{{ ansible_password }}"
          transport: cli

  handlers:
    - name: Print ACL applied
      debug:
        msg: "ACL '{{ acl_name }}' successfully applied to '{{ interface }}' in '{{ direction }}' direction."