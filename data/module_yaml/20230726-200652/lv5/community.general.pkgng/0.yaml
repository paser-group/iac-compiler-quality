---
- name: Test Ansible Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages using pkgng
      community.general.pkgng:
        name: "{{ item }}"
        state: present
        autoremove: "{{ autoremove }}"
        ignore_osver: "{{ ignore_osver }}"
        cached: "{{ cached }}"
        chroot: "{{ chroot }}"
        jail: "{{ jail }}"
        pkgsite: "{{ pkgsite }}"
        rootdir: "{{ rootdir }}"
      loop:
        - package1
        - package2
        - package3
      register: pkgng_output

    - name: Display pkgng output
      debug:
        var: pkgng_output

- name: Test Random Port Numbers
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages using pkgng
      community.general.pkgng:
        name: package4
        state: present
        port: "{{ random_port }}"
      register: pkgng_output_with_port

    - name: Display pkgng output with random port
      debug:
        var: pkgng_output_with_port