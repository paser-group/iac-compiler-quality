---
- name: Test playbook for community.general.ipa_dnszone
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create DNS zone with default options
      community.general.ipa_dnszone:
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        zone_name: "example.com"
        state: present
        validate_certs: false

    - name: Create DNS zone with allowsyncptr option set to true
      community.general.ipa_dnszone:
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        zone_name: "example.com"
        state: present
        allowsyncptr: true
        validate_certs: false

    - name: Create DNS zone with dynamicupdate option set to true
      community.general.ipa_dnszone:
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        zone_name: "example.com"
        state: present
        dynamicupdate: true
        validate_certs: false

    - name: Create DNS zone with random port numbers
      community.general.ipa_dnszone:
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        zone_name: "example.com"
        state: present
        ipa_port: "{{ range(1, 65536) | random }}"
        validate_certs: false

    - name: Delete DNS zone
      community.general.ipa_dnszone:
        ipa_host: "example.com"
        ipa_user: "admin"
        ipa_pass: "password"
        zone_name: "example.com"
        state: absent
        validate_certs: false