---
- name: Test playbook for 'community.general.utm_dns_host' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create DNS host entry
      community.general.utm_dns_host:
        utm_host: "10.1.1.1"
        utm_port: "{{ random_port() }}"
        utm_protocol: "https"
        utm_token: "my_token"
        hostname: "test.example.com"
        address: "10.1.1.10"
        state: "present"
      register: result
      ignore_errors: true

    - name: Display result
      debug:
        var: result

  vars:
    random_port: "{{ 30000 | random }}"