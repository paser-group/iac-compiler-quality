---
- name: Test Ansible Latent Bug
  hosts: localhost
  gather_facts: false

  vars:
    vpn_interface: "{{ ['GigabitEthernet0/0/1', 'GigabitEthernet0/0/2'] | random }}"
    vrf: "{{ ['vrf1', 'vrf2'] | random }}"
    port: "{{ ['8080', '9090'] | random }}"

  tasks:
    - name: Set interface port
      set_fact:
        interface_port: "{{ port | int }}"

    - name: Manage VPN Interface
      community.network.ce_vrf_interface:
        state: "{{ ['present', 'absent', 'query'] | random }}"
        vpn_interface: "{{ vpn_interface }}"
        vrf: "{{ vrf }}"
        port: "{{ interface_port }}"
      register: result

    - name: Debug Result
      debug:
        var: result