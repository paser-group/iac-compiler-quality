- name: Manage Python packages
  hosts: localhost
  become: yes
  
  tasks:
    - name: Install specific version of package
      ansible.builtin.pip:
        name: mypackage
        version: 1.2.3
      
    - name: Upgrade package to latest version
      ansible.builtin.pip:
        name: mypackage
        state: latest
      
    - name: Install package from requirements file
      ansible.builtin.pip:
        requirements: /path/to/requirements.txt
      
    - name: Install package in editable mode
      ansible.builtin.pip:
        name: /path/to/mypackage
        editable: yes
      
    - name: Uninstall package
      ansible.builtin.pip:
        name: mypackage
        state: absent
      
    - name: Install package with extra arguments
      ansible.builtin.pip:
        name: mypackage
        extra_args: "--proxy=http://proxy.example.com"
      
    - name: Set umask for pip install
      ansible.builtin.pip:
        umask: "0077"
        name: mypackage
      
    - name: Install package using a virtual environment
      ansible.builtin.pip:
        name: mypackage
        virtualenv: /path/to/venv
      
    - name: Install package with specific virtualenv Python version
      ansible.builtin.pip:
        name: mypackage
        virtualenv: /path/to/venv
        virtualenv_python: /usr/bin/python3
      
    - name: Install package with virtualenv site packages
      ansible.builtin.pip:
        name: mypackage
        virtualenv: /path/to/venv
        virtualenv_site_packages: yes
      
    # Test cases for heuristic: Produce random port numbers to test port settings
    - name: Install package with custom executable
      ansible.builtin.pip:
        name: mypackage
        executable: /path/to/custom/python
        extra_args: "--port={{ 30000 + (inventory_hostname | regex_replace('[^0-9]', '') | int) }}"