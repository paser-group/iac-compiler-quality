---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    ssh_public_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCgABCDEFGHIJKLMNOPQRSTUVWXYZ12345678 user@host"
    follow: "5"
    exclusive: "true"
    validate_certs: "false"

  tasks:
    - name: Add authorized keys
      ansible.posix.authorized_key:
        user: "{{ ansible_user }}"
        key: "{{ ssh_public_key }}"
        follow: "{{ follow }}"
        exclusive: "{{ exclusive }}"
        validate_certs: "{{ validate_certs }}"
        state: present
      register: result

    - debug:
        var: result

    - name: Remove authorized keys
      ansible.posix.authorized_key:
        user: "{{ ansible_user }}"
        key: "{{ ssh_public_key }}"
        follow: "{{ exclusive }}"  # Intentional Bug: Incorrect attribute
        validate_certs: "{{ validate_certs }}"
        state: absent
      register: result

    - debug:
        var: result