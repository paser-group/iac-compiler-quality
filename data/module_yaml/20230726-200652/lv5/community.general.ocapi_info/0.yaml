- name: Test playbook for ocapi_info module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set random port numbers
      set_fact:
        random_port_1: "{{ range(1, 65535) | random(seed=inventory_hostname) }}"
        random_port_2: "{{ range(1, 65535) | random(seed=inventory_hostname + '_2') }}"

    - name: Execute ocapi_info module
      community.general.ocapi_info:
        baseuri: "https://example.com"
        category: "example_category"
        command: "example_command"
        job_name: "example_job"
        password: "example_password"
        proxy_slot_number: "{{ random_port_1 }}"
        timeout: "{{ random_port_2 }}"
        username: "example_username"
      register: result

    - name: Display module result
      debug:
        var: result