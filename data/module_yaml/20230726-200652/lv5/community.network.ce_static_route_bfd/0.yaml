---
- name: Test Ansible module for managing static route configuration on HUAWEI
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure static route with random port settings
      community.network.ce_static_route_bfd:
        aftype: "ipv4"
        bfd_session_name: "BFD-{{ lookup('password', '/dev/null chars=ascii_lowercase,digits length=8') }}"
        commands:
          - "ip static-route bfd"
        description: "{{ lookup('password', '/dev/null chars=ascii_letters,digits length=16') }}"
        destvrf: "{{ lookup('password', '/dev/null chars=ascii_letters,digits length=8') }}"
        detect_multiplier: "{{ range(1, 16) | random }}"
        function_flag: "{{ ['global', 'disable'] | random }}"
        mask: "255.255.255.0"
        min_rx_interval: "{{ range(1, 10) | random }}"
        min_tx_interval: "{{ range(1, 10) | random }}"
        next_hop: "10.1.1.{{ range(1,5) | random }}"
        nhp_interface: "{{ lookup('password', '/dev/null chars=ascii_letters,digits length=8') }}"
        pref: "{{ range(0, 255) | random }}"
        prefix: "{{ lookup('password', '/dev/null chars=ascii_letters,digits length=32') }}"
        state: "{{ ['present', 'absent'] | random }}"
        tag: "{{ range(1, 65535) | random }}"
        vrf: "{{ lookup('password', '/dev/null chars=ascii_letters,digits length=8') }}"
      register: result

    - name: Display result
      debug:
        var: result