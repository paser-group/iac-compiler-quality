---
- name: Test Ansible Type-Related Bug
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set random port number
      set_fact:
        random_port: "{{ range(1, 65535) | random }}"
      run_once: true

    - name: Configure Backup Configuration
      community.network.avi_backupconfiguration:
        controller: "your_controller_ip"
        username: "your_username"
        password: "your_password"
        tenant: "your_tenant"
        tenant_uuid: "your_tenant_uuid"
        name: "backup-config"
        save_local: true
        upload_to_remote_host: true
        remote_hostname: "10.1.1.1"
        remote_directory: "/backup"
        upload_to_s3: true
        aws_access_key: "your_aws_access_key"
        aws_secret_access: "your_aws_secret_access"
        aws_bucket_id: "your_aws_bucket_id"
        avi_credentials:
          - api_version: "21.1.1"
            api_context:
              password: "your_api_context_password"
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_disable_session_cache_as_fact: false
        maximum_backups_stored: null
        url: null
        uuid: null
      register: backup_config

    - name: Print Backup Configuration
      debug:
        var: backup_config