---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage APT repository
      community.general.apt_repo:
        repo: "deb http://{{ inventory_hostname }}.example.com/{{ ansible_distribution_release }}/{{ inventory_hostname }} apt_custom_repo"
        state: "{{ apt_repo_state }}"
        update: "{{ apt_repo_update }}"
        remove_others: "{{ apt_repo_remove_others }}"
      vars:
        apt_repo_state: present
        apt_repo_update: "{{ invalid_var }}"
        apt_repo_remove_others: false