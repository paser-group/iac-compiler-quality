---
- name: Install and manage Pear packages
  hosts: localhost
  gather_facts: false
  
  vars:
    pear_packages:
      - PHPUnit
      - PHP_CodeSniffer
      - YAML
      
  tasks:
    - name: Include the Pear module
      include_vars:
        file: /path/to/pear_module.yml
        name: pear_module
      
    - name: Install Pear package(s)
      community.general.pear:
        executable: "{{ pear_module.executable }}"
        name: "{{ item }}"
        state: present
      with_items: "{{ pear_packages }}"
      register: pear_install_result
      
    - name: Display the results
      debug:
        var: pear_install_result
        
    - name: Uninstall Pear package(s)
      community.general.pear:
        executable: "{{ pear_module.executable }}"
        name: "{{ item }}"
        state: absent
      with_items: "{{ pear_packages }}"
      register: pear_uninstall_result
  
    - name: Display the results
      debug:
        var: pear_uninstall_result