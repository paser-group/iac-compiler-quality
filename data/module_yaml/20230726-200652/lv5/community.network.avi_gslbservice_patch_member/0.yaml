- name: Test Ansible Heuristic for community.network.avi_gslbservice_patch_member module
  hosts: localhost
  gather_facts: false
  
  vars:
    port_numbers:
      - 12345
      - 23456
      - 34567
      # Add more random port numbers here

  tasks:
    - name: Patch GSLB Service Member
      community.network.avi_gslbservice_patch_member:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        tenant_uuid: "{{ tenant_uuid }}"
        avi_credentials:
          username: "{{ username }}"
          password: "{{ password }}"
          tenant: "{{ tenant }}"
          tenant_uuid: "{{ tenant_uuid }}"
        api_version: "{{ api_version }}"
        state: "{{ state }}"
        name: "test-gslb-service"
        data:
          member:
            - name: "member1"
              port: "{{ port_numbers | random }}"
              enabled: true
              ip:
                addr: "10.1.1.1"
                type: "V4"
              ratio: 1
              limits:
                max_dns_queries: 1
              ssl_attributes:
                sni_hostname: "example.com"
                client_cert:
                  verify_cert: true
              hc:
                enabled: true
                uri:
                  port: 80
                  scheme: "HTTP"
                  path: "/health"
                  hostname:
                    type: "DNS"
                    addr: "example.com"
              site_persistence:
                enabled: false
              backup_member:
                enabled: false
          api_context:
            object_type: "gslbservice"
            object_uuid: "f0cce6c0-9312-468d-82e7-91df0d1140b4"
        params: {}

      # Add more tasks to test different scenarios and attributes