---
- name: Validate Data
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random port number
      shell: "shuf -i 1024-65535 -n 1"
      register: random_port

    - name: Validate port number
      ansible.utils.validate:
        criteria: "{{ random_port.stdout }}"
        data: "port_number"
        engine: "is_port"
      register: validate_result

    - name: Display validation result
      debug:
        var: validate_result