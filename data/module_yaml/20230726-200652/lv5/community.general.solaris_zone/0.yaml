---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Solaris Zone
      community.general.solaris_zone:
        attach_options: -a
        config: /etc/zones/myzone.xml
        create_options: -n myzone
        install_options: -a
        name: myzone
        path: /zones/myzone
        root_password: mypassword
        sparse: true
        state: installed
      register: solaris_zone

    - name: Debug Solaris Zone
      debug:
        var: solaris_zone

    - name: Test Port Settings
      community.general.solaris_zone:
        attach_options: -a
        config: /etc/zones/myzone.xml
        create_options: -n myzone
        install_options: -a
        name: myzone
        path: /zones/myzone
        root_password: mypassword
        sparse: true
        state: installed
        timeout: 10
        ports:
          - "{{ 20000 | random }}"
          - "{{ 30000 | random }}"
        update_ports: "{{ 40000 | random }}"
        limit_ports: "{{ 50000 | random }}"
      register: solaris_zone_ports

    - name: Debug Solaris Zone Ports
      debug:
        var: solaris_zone_ports