---
- name: Test atomic_host module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create atomic host
      community.general.atomic_host:
        name: my_atomic_host
        state: present
        revision: "{{ random_port | random_string }}"
      register: atomic_host_result

    - debug:
        var: atomic_host_result

  vars:
    atomic_host_result: {}

  vars_prompt:
    - name: random_port
      prompt: "Enter a random port number (e.g., 1234):"
      private: no

  filters:
    - random_string: |
        '{{ random_port | random(length=random_length) | string }}'

  vars:
    random_length: 5