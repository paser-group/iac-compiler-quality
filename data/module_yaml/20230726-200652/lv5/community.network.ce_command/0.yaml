---
- name: Run arbitrary command on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false
  tasks:
    - name: Run command on HUAWEI devices
      community.network.ce_command:
        commands: "{{ commands | default(['show version', 'show interface brief']) }}"
      register: result

    - name: Print command output
      debug:
        var: result

- name: Test case: Random port numbers for port settings
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Test port settings with random ports
      community.network.ce_command:
        commands: "show interface {{ random_ports | default(range(1, 10) | random) }}"
      register: result

    - name: Print port command output
      debug:
        var: result