- name: Run commands on remote device
  hosts: all
  gather_facts: false

  tasks:
    - name: Execute random command on remote device
      community.network.sros_command:
        commands: "{{ random_command }}"
      register: command_output
      ignore_errors: true

    - name: Debug command output
      debug:
        var: command_output

- name: Generate random command
  hosts: localhost
  gather_facts: false
  vars:
    random_command: "display configuration port {{ random_port }}"

  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ range(1024, 65535) | random }}"