---
- name: Manage Mercurial repository
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Clone Mercurial repository
      community.general.hg:
        clone: true
        dest: /path/to/destination
        executable: /path/to/mercurial
        force: true
        purge: true
        repo: https://example.com/repo.git
        revision: master
        update: true

    # Test case 1: Random port number test
    - name: Random port number test
      community.general.hg:
        clone: true
        dest: /path/to/destination
        executable: /path/to/mercurial
        force: true
        purge: true
        repo: https://example.com/repo.git
        revision: master
        update: true
        port: "{{ range(1024, 65536) | random }}"