---
- name: Test Ansible latent type-related bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Rackspace Monitor Alarm
      community.general.rax_mon_alarm:
        api_key: "YOUR_RAX_API_KEY"
        auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
        check_id: "check_id_here"
        credentials: "/path/to/credentials/file"
        criteria: "criteria_here"
        disabled: true
        entity_id: "entity_id_here"
        env: "environment_here"
        identity_type: "identity_type_here"
        label: "alarm_label_here"
        metadata:
          key1: "value1"
          key2: "value2"
        notification_plan_id: "notification_plan_id_here"
        region: "region_here"
        state: "present"
        tenant_id: "tenant_id_here"
        tenant_name: "tenant_name_here"
        username: "username_here"
        validate_certs: true
        # Generating random port number to test port settings
        port: "{{ 10000 | random(seed=inventory_hostname) }}"
      register: result

    - name: Debug Result
      debug:
        var: result