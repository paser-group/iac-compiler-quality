- name: Manage Bitbucket Pipeline Key Pair
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Bitbucket pipeline key pair
      community.general.bitbucket_pipeline_key_pair:
        client_id: "{{ bitbucket_client_id }}"
        client_secret: "{{ bitbucket_client_secret }}"
        password: "{{ bitbucket_password }}"
        private_key: "{{ bitbucket_private_key }}"
        public_key: "{{ bitbucket_public_key }}"
        repository: "{{ bitbucket_repository }}"
        state: present
        user: "{{ bitbucket_user }}"
        workspace: "{{ bitbucket_workspace }}"
      register: key_pair_result

    - name: Display key pair details
      debug:
        var: key_pair_result