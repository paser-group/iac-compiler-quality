---
- name: Test community.general.lldp module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required dependencies
      command: "{{ item }}"
      loop:
        - apt-get update
        - apt-get install -y lldpd

    - name: Enable LLDP on network interfaces
      command: lldpcli configure lldp portidsubtype interface-name

    - name: Gather LLDP information
      community.general.lldp:
          interfaces: "{{ item }}"
      loop:
          - eth0
          - eth1
      register: lldp_info

    - name: Display LLDP information
      debug:
          var: lldp_info