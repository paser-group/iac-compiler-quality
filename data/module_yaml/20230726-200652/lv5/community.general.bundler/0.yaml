---
- name: Test Ansible Compiler for latent type-related bugs
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate random port number
      set_fact:
        random_port: "{{ 2000 | random }}"
  
    - name: Print random port number
      debug:
        var: random_port
  
    - name: Test port setting
      wait_for:
        host: 127.0.0.1
        port: "{{ random_port }}"
        delay: 5
        timeout: 2