- name: Generate random test cases
  hosts: localhost
  gather_facts: false
  vars:
    manageiq_url: "https://{{ ansible_host }}:{{ random_port }}/api"
    ansible_host: "manageiq.example.com"
    random_port: "{{ 30000 | random(start=random_start_port, end=random_end_port) }}"
    random_start_port: 30000
    random_end_port: 40000

  tasks:
    - name: List resource policies
      community.general.manageiq_policies_info:
        manageiq_connection:
          url: "{{ manageiq_url }}"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"
        resource_id: "{{ resource_id }}"
        resource_name: "{{ resource_name }}"
        resource_type: "{{ resource_type }}"
      register: policy_info

    - name: Debug policy info
      debug:
        var: policy_info