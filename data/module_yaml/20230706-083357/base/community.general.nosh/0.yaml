---
- name: Test community.general.nosh module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Execute community.general.nosh module
      community.general.nosh:
        name: "{{ item.name }}"
        enabled: "{{ item.enabled }}"
        preset: "{{ item.preset }}"
        state: "{{ item.state }}"
        user: "{{ item.user }}"
      loop:
        - { name: 'TestNosh', enabled: True, preset: True, state: 'absent', user: True }
        - { name: 'TestNOSH', enabled: True, preset: true, state: 'ABSent', user: true }
        - { name: 'Test-nosh', enabled: true, preset: false, state: 'present', user: false }
        - { name: 'Test Nosh', enabled: false, preset: true, state: 'present', user: true }

    - name: Display module result
      debug:
        var: ansible_loop_var.stdout