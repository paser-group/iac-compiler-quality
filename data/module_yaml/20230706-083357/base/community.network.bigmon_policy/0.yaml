---
- name: Heuristic-based test scenario for community.network.bigmon_policy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a bigmon policy
      community.network.bigmon_policy:
        access_token: "{{ lookup('env', 'BIGMON_ACCESS_TOKEN') }}"
        action: "create"
        controller: "bigmon-controller.example.com"
        delivery_packet_count: 1000
        duration: 600
        name: "test_policy"
        policy_description: "Test policy description"
        priority: 50
        start_time: "2022-01-01 00:00:00"
        state: "present"
        validate_certs: false

    - name: Debug type-related bugs in Ansible compiler
      debug:
        msg: "Type-related bug detected in Ansible compiler!"

    - name: Remove the bigmon policy
      community.network.bigmon_policy:
        access_token: "{{ lookup('env', 'BIGMON_ACCESS_TOKEN') }}"
        action: "remove"
        controller: "bigmon-controller.example.com"
        name: "test_policy"
        validate_certs: false

    - name: Debug type-related bugs in Ansible compiler
      debug:
        msg: "Type-related bug detected in Ansible compiler!"