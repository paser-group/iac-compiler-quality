---
- name: Test community.general.profitbricks_volume_attachments module
  hosts: all
  gather_facts: false

  vars:
    datacenter: "my-datacenter"
    server: "my-server"
    state: present
    subscription_password: "my-password" 
    subscription_user: "my-user"
    volume: "my-volume"
    wait: true
    wait_timeout: 30

  tasks:
    - name: Attach volume to server
      community.general.profitbricks_volume_attachments:
        datacenter: "{{ datacenter }}"
        server: "{{ server }}"
        state: "{{ state }}"
        subscription_password: "{{ subscription_password }}"
        subscription_user: "{{ subscription_user }}"
        volume: "{{ volume }}"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
      register: volume_result