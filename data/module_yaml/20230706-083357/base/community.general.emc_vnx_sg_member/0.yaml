- name: Heuristic-based test scenario for community.general.emc_vnx_sg_member module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test scenario to expose bugs in the Ansible compiler
      community.general.emc_vnx_sg_member:
        lunid: "{{ item.lunid }}"
        name: "{{ item.name }}"
        sp_address: "{{ item.sp_address }}"
        sp_password: "{{ item.sp_password }}"
        sp_user: "{{ item.sp_user }}"
        state: "{{ item.state }}"
      vars:
        sg_member_options:
          - { lunid: 1, name: 'test_vnx_sg', sp_address: '192.168.1.1', sp_password: 'Pa$$w0rd', sp_user: 'admin', state: 'present' }
          - { lunid: 2, name: 'test_vnx_sg_member', sp_address: '192.168.1.2', sp_password: 'Pa$$w0rd', sp_user: 'admin', state: 'absent' }
      loop: "{{ sg_member_options }}"