---
- name: Heuristic-driven Test Playbook for community.network.ce_bfd_global
  hosts: localhost
  gather_facts: false

  vars:
    bfd_enable: "{{ ['on', 'off'] | random }}"
    damp_init_wait_time: "{{ [60, 90, 120] | random }}"
    damp_max_wait_time: "{{ [120, 180, 240] | random }}"
    damp_second_wait_time: "{{ [10, 15, 20] | random }}"
    default_ip: "{{ ['10.0.0.1', '192.168.1.1', '172.16.0.1'] | random }}"
    delay_up_time: "{{ [300, 600, 900] | random }}"
    state: "{{ ['present', 'absent'] | random }}"
    tos_exp_dynamic: "{{ [3, 4, 5] | random }}"
    tos_exp_static: "{{ [1, 2, 3] | random }}"

  tasks:
    - name: Configure BFD global settings
      community.network.ce_bfd_global:
        bfd_enable: "{{ bfd_enable }}"
        damp_init_wait_time: "{{ damp_init_wait_time }}"
        damp_max_wait_time: "{{ damp_max_wait_time }}"
        damp_second_wait_time: "{{ damp_second_wait_time }}"
        default_ip: "{{ default_ip }}"
        delay_up_time: "{{ delay_up_time }}"
        state: "{{ state }}"
        tos_exp_dynamic: "{{ tos_exp_dynamic }}"
        tos_exp_static: "{{ tos_exp_static }}"
      register: result

    - name: Print result
      debug:
        var: result