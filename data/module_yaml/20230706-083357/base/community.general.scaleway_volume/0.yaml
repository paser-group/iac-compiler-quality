---
- name: Test playbook for Ansible compiler bug detection
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%012x' | format((16**12 * random())) }}"

    - name: Create network interface with random MAC address
      community.general.network_linkagg_interface:
        name: eth0
        mac_address: "{{ random_mac }}"
        state: present

    - name: Verify network interface configuration
      community.general.network_linkagg_interface_facts:
        name: eth0
      register: interface_facts

    - name: Print interface facts
      debug:
        var: interface_facts