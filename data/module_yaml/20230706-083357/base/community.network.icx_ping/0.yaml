---
- name: Heuristic-based test playbook for community.network.icx_ping module
  hosts: localhost
  gather_facts: false

  vars:
    count: 5
    dest: 10.1.1.1
    size: 56
    source: 10.1.1.2
    state: present
    timeout: 2
    ttl: 128
    vrf: default

  tasks:
    - name: Ping test with regular config values
      community.network.icx_ping:
        count: "{{ count }}"
        dest: "{{ dest }}"
        size: "{{ size }}"
        source: "{{ source }}"
        state: "{{ state }}"
        timeout: "{{ timeout }}"
        ttl: "{{ ttl }}"
        vrf: "{{ vrf }}"
      register: result

    - name: Print ping result
      debug:
        var: result