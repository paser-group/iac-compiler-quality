---
- name: Test playbook for community.general.modprobe
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Load the specified module
      community.general.modprobe:
        name: "{{ module_name }}"
        params: "{{ module_params }}"
        persistent: "{{ module_persistent }}"
        state: "{{ module_state }}"
      register: modprobe_output

    - name: Print modprobe_output
      debug:
        var: modprobe_output