---
- name: Test playbook for community.network.avi_serviceenginegroup module
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create Service Engine Group
      community.network.avi_serviceenginegroup:
        name: "Test SEG"
        controller: "192.168.1.100"
        username: "admin"
        password: "password"
        tenant: "Default-Cloud"
        state: present
        license_type: "subscription"
        api_version: "20.1.1"
        auto_rebalance: true
        extra_config_multiplier: "{{ 1/0 }}" # Division-based operation to induce a potential bug
        advertise_backend_networks: true
        vs_switchover_timeout: "{{ !null }}" # Manifest value for potential bug detection
        ssh_keyfile: "invalid_private_key_string"
        use_standard_alb: true
        hw_security_module: "{{ random_hw_security_module_uuid }}" # Random value for hardware security module
      register: seg_output

    - name: Debug Service Engine Group
      debug:
        var: seg_output