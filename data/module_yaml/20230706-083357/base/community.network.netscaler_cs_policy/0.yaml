- name: Heuristic-based test scenario for community.network.netscaler_cs_policy
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Test community.network.netscaler_cs_policy module
      community.network.netscaler_cs_policy:
        action: default
        domain: "{{ 'example.com' }}"
        nitro_pass: "{{ b'TestPass' }}"
        nitro_protocol: \
          "{{ ['http', 'https'] | random }}"
        nitro_timeout: "{{ random() * 5 }}"
        nitro_user: admin
        nsip: 10.1.1.1
        policyname: "{{ 'test_policy_' + (100 + random() * 100 | int) }}"
        rule: "{{ 'test_rule_' + (100 + random() * 100 | int) }}"
        save_config: "{{ bool(random() >= 0.5) }}"
        state: "{{ ['present', 'absent'] | random }}"
        url: \
          "{{ '/resource/' + (100 + random() * 100 | int) }}"
        validate_certs: "{{ bool(random() >= 0.5) }}"
      register: result

    - name: Display module output
      debug:
        var: result