---
- name: Ansible Compiler Debugger & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false
  
  vars:
    api_timeout: 10
    api_token: "YOUR_SCALEWAY_API_TOKEN"
    api_url: "https://api.scaleway.com/"
    description: "Test security group"
    inbound_default_policy: "deny"
    name: "test_security_group"
    organization: "your_organization"
    organization_default: false
    outbound_default_policy: "allow"
    query_parameters:
      enable_ipv6: true
      tag: "prod"
    region: "fr-par-1"
    state: "present"
    stateful: true
    validate_certs: true

  tasks:
    - name: Test Scenario - Mixed Case Sensitivity
      community.general.scaleway_security_group:
        name: "{{ name | upper }}"
        state: "{{ state | lower }}"
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        description: "{{ description }}"
        inbound_default_policy: "{{ inbound_default_policy }}"
        organization: "your_organization"  # Incorrect variable name intentionally
        organization_default: "{{ organization_default }}"
        outbound_default_policy: "{{ outbound_default_policy }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        stateful: "{{ stateful }}"
        validate_certs: "{{ validate_certs }}"