- name: Heuristic Test Playbook for community.general.ovh_monthly_billing
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate uppercase configuration value
      set_fact:
        uppercase_config_value: "HELLO WORLD"

    - name: Generate byte string configuration value
      set_fact:
        byte_string_config_value: "{{ lookup('pipe', 'echo -n Hello World | base64') }}"

    - name: Generate mixed byte and string configuration value
      set_fact:
        mixed_byte_string_config_value: "{% if random() > 0.5 %}{{ 'Hello World' }}{% else %}{{ lookup('pipe', 'echo -n Günter | base64') }}{% endif %}"

    - name: Generate random network identifier
      set_fact:
        random_network_identifier: "{{ 'net_' ~ random() | random_string(length=8) }}"

    - name: Generate random port number
      set_fact:
        random_port_number: "{{ 1024 + random()*(65535-1024) | int }}"

    - name: Generate string with varied encoding
      set_fact:
        varied_encoding_string: "{% if random() > 0.5 %}{{ 'Hello World' }}{% else %}{{ 'Günter' | encode(encoding='iso-8859-1') }}{% endif %}"

    - name: Generate division-based limit value
      set_fact:
        division_based_limit: "{{ (random() + 1) / (random() + 1) }}"

    - name: Generate null configuration value
      set_fact:
        null_config_value: null

    - name: Generate random IP address
      set_fact:
        random_ip_address: "{{ random_ip_address() }}"

  vars:
    # Define a custom filter to generate a random IP address
    filter_plugins:
      - "{{ playbook_dir }}/plugins"
    plugins:
      - ip_address

  pre_tasks:
    - debug:
        msg: "Starting heuristic tests for community.general.ovh_monthly_billing module."

  post_tasks:
    - debug:
        msg: "Heuristic tests for community.general.ovh_monthly_billing module completed."