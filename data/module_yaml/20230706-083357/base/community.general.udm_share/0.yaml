---
- name: Heuristic-based test playbook for community.general.udm_share module
  hosts: localhost
  gather_facts: false
  vars:
    directorymode: "0755"
    group: "users"
    host: "localhost"
    name: "my_share"
    state: "present"

  tasks:
    - name: Create samba share using community.general.udm_share module
      community.general.udm_share:
        directorymode: "{{ directorymode }}"
        group: "{{ group }}"
        host: "{{ host }}"
        name: "{{ name }}"
        state: "{{ state }}"
      register: share_result

    - name: Debug share creation result
      debug:
        var: share_result