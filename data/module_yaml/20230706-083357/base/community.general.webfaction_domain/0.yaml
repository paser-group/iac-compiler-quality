- name: Test playbook for community.general.webfaction_domain module
  hosts: localhost
  gather_facts: false

  vars:
    login_name: "my_username"
    login_password: "my_password"
    domain_name: "example.com"
    subdomains:
      - "www"
      - "blog"
      - "store"

  tasks:
    - name: Add domain and subdomains
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: "{{ domain_name }}"
        state: present
        subdomains: "{{ subdomains }}"

    - name: Wait for 5 seconds
      pause:
        seconds: 5

    - name: Remove domain and subdomains
      community.general.webfaction_domain:
        login_name: "{{ login_name }}"
        login_password: "{{ login_password }}"
        name: "{{ domain_name }}"
        state: absent
        subdomains: "{{ subdomains }}"