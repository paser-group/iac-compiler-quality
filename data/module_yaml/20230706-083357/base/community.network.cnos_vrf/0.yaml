---
- name: Ansible Compiler Debugger & Heuristic Test Playbook
  hosts: localhost
  gather_facts: False

  vars:
    vrf_name: "vrf1"
    vrf_rd: "100:1"
    vrf_interfaces:
      - eth1
      - eth2

  tasks:
    - name: Create VRF with default options
      community.network.cnos_vrf:
        name: "{{ vrf_name }}"
        state: present
      register: result_create_vrf_default

    - name: Debug output of create VRF with default options
      debug:
        var: result_create_vrf_default

    - name: Create VRF with specific options
      community.network.cnos_vrf:
        name: "{{ vrf_name }}"
        state: present
        rd: "{{ vrf_rd }}"
        interfaces: "{{ vrf_interfaces }}"
      register: result_create_vrf_specific

    - name: Debug output of create VRF with specific options
      debug:
        var: result_create_vrf_specific

    - name: Remove VRF
      community.network.cnos_vrf:
        name: "{{ vrf_name }}"
        state: absent
      register: result_remove_vrf

    - name: Debug output of remove VRF
      debug:
        var: result_remove_vrf