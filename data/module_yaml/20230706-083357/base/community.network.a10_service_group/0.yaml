---
- name: Heuristic-based test playbook for community.network.a10_service_group module
  hosts: localhost
  gather_facts: false
  vars:
    a10_service_group_name: "my_service_group"
    a10_partition: null
    a10_password: "secretpassword"
    a10_stats_data_collection_interval: !null
    a10_servers:
      - name: "server1"
        host: "10.1.1.1"
        port: 80
      - name: "server2"
        host: "10.1.1.2"
        port: 8080
    a10_service_group_protocol: "https"
    a10_service_group_method: "least-connection"
    a10_validate_certs: false

  tasks:
    - name: Create A10 service group
      community.network.a10_service_group:
        host: "example.com"
        username: "admin"
        password: "{{ a10_password }}"
        partition: "{{ a10_partition }}"
        service_group: "{{ a10_service_group_name }}"
        state: "present"
        servers: "{{ a10_servers }}"
        service_group_protocol: "{{ a10_service_group_protocol }}"
        service_group_method: "{{ a10_service_group_protocol }}"
        validate_certs: "{{ a10_validate_certs }}"
        stats_data_collection_interval: "{{ a10_stats_data_collection_interval }}"
      register: result_create_service_group
      ignore_errors: true

    - name: Debug result variables
      debug:
        var: result_create_service_group