---
- name: Heuristic-based test playbook for community.general.rocketchat module
  hosts: localhost
  gather_facts: no

  vars:
    attachments:
      - title: "{{ ['Attachment 1', 'Attachment 2'] | random }}"
        text: "{{ 'Test attachment message' }}"
        color: blue

    channel: general
    color: "{{ ['red', 'green', 'blue'] | random }}"
    domain: example.com
    icon_emoji: ":rocket:"
    icon_url: "https://example.com/icon.png"
    link_names: "{{ [0, 1] | random }}"
    msg: "{{ 'Test message' }}"
    protocol: "{{ ['http', 'https'] | random }}"
    token: "my_token"
    username: "{{ 'user1' }}"
    validate_certs: "{{ [true, false] | random }}"

  tasks:
    - name: Test community.general.rocketchat module
      community.general.rocketchat:
        attachments: "{{ attachments }}"
        channel: "{{ channel }}"
        color: "{{ color }}"
        domain: "{{ domain }}"
        icon_emoji: "{{ icon_emoji }}"
        icon_url: "{{ icon_url }}"
        link_names: "{{ link_names }}"
        msg: "{{ msg }}"
        protocol: "{{ protocol }}"
        token: "{{ token }}"
        username: "{{ username }}"
        validate_certs: "{{ validate_certs }}"
      register: result
      
    - name: Display module result
      debug:
        var: result