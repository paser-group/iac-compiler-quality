---
- name: Heuristic Test Playbook for community.network.pn_ipv6security_raguard_port
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: "{{ ['enable', 'disable'] | random }}"
    pn_name: "ipv6_security_{{ random_mac_address | lower }}"
    pn_ports: "{{ random_port_numbers }}"
    state: "{{ ['present', 'absent'] | random }}"
  
  tasks:
    - name: Include random_mac_address() filter
      include_vars:
        file: random_mac_address.yml
        name: random_mac_address
      
    - name: Include random_port_numbers() filter
      include_vars:
        file: random_port_numbers.yml
        name: random_port_numbers

    - name: Debug module options
      debug:
        msg: "pn_cliswitch: {{ pn_cliswitch }}, pn_name: {{ pn_name }}, pn_ports: {{ pn_ports }}, state: {{ state }}"

    - name: Test community.network.pn_ipv6security_raguard_port
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: "{{ state }}"
      register: result

    - name: Show module output
      debug:
        var: result