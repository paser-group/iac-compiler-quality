- name: Heuristic Testing Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test mixed case sensitivity
      community.network.icx_copy:
        download: "{{ mixed_case_sensitivity }}"
      vars:
        mixed_case_sensitivity: "MixedCaseSensitivity"

    - name: Test byte string values
      community.network.icx_copy:
        remote_pass: "{{ byte_string | b64encode }}"
      vars:
        byte_string: "byte_string_value"

    - name: Test configuration values with bytes and strings
      community.network.icx_copy:
        remote_user: "{{ user | b64encode }}"
      vars:
        user: "username:password"

    - name: Test random MAC addresses
      community.network.icx_copy:
        remote_filename: "{{ mac_address }}"
      vars:
        mac_address: "{{ lookup('macaddress') }}"

    - name: Test random port numbers
      community.network.icx_copy:
        remote_port: "{{ port }}"
      vars:
        port: "{{ 1024 + (lookup('sequence', 'start=0 end=49151') | random | int) }}"

    - name: Test strings with varied encodings
      community.network.icx_copy:
        protocol: "{{ protocol | b64encode }}"
      vars:
        protocol: "http"

    - name: Test division-based operations for limit-related values
      community.network.icx_copy:
        upload: "{{ upload }}"
      vars:
        upload: "{{ 100 / ansible_processor_count }}"

    - name: Test !null as configuration values
      community.network.icx_copy:
        public_key: "{{ null }}"

    - name: Test random IPv4 addresses
      community.network.icx_copy:
        remote_server: "{{ random_ipv4 }}"
      vars:
        random_ipv4: "{{ lookup('pipe', 'shuf -i 192.168.0.0/24 -n 1') }}"

    - name: Validate returned values
      debug:
        var: result