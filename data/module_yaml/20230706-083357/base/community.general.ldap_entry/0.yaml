---
- name: Heuristic-based test playbook for community.general.ldap_entry module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Perform LDAP operations
      community.general.ldap_entry:
        attributes:
          - objectClass: inetOrgPerson
            cn: John Doe
            sn: Doe
            givenName: John
            mail: johndoe@example.com
            userPassword: "password"
        bind_dn: "cn=admin,dc=example,dc=com"
        bind_pw: "admin_password"
        ca_path: "/etc/ssl/certs"
        dn: "cn=John Doe,ou=users,dc=example,dc=com"
        objectClass: ["person"]
        recursive: true
        referrals_chasing: "always"
        sasl_class: "DIGEST-MD5"
        server_uri: "ldap://ldap.example.com"
        start_tls: true
        state: "present"
        validate_certs: false
        xorder_discovery: "base"

      register: ldap_result

    - debug:
        var: ldap_result