- name: Ansible Heuristic Test Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create atomic container
      community.general.atomic_container:
        backend: "{{ backend }}"
        image: "{{ image }}"
        mode: "{{ mode }}"
        name: "{{ name }}"
        rootfs: "{{ rootfs }}"
        state: "{{ state }}"
        values: "{{ values }}"
      register: atomic_container_result

    - name: Debug atomic container result
      debug:
        var: atomic_container_result

  vars:
    image: "ubuntu:latest"
    backend: "docker"
    mode: "daemon"
    name: "my_container"
    rootfs: "/rootfs"
    state: "started"
    values:
      - "key1={{ random_string }}"

  tasks:
    - name: Generate a random string
      set_fact:
        random_string: "{{ lookup('pipe', 'openssl rand -hex 4') }}"