---
- name: Heuristic-based Test Playbook for ansible.builtin.meta
  hosts: all
  gather_facts: False

  tasks:
    - name: Mixed case sensitivity test
      ansible.builtin.meta:
        free_form: TestString
      register: mixed_case_result

    - name: Byte string test
      ansible.builtin.meta:
        free_form: "{{ '!binary | SGVsbG8gd29ybGQ=' }}"
      register: byte_string_result

    - name: Random MAC address test
      ansible.builtin.meta:
        free_form: "{{ 'mac_address=08:00:27:00:00:01' }}"
      register: mac_address_result

    - name: Random port number test
      ansible.builtin.meta:
        free_form: "{{ 'port=8080' }}"
      register: port_result

    - name: Varied string encoding test
      ansible.builtin.meta:
        free_form: "{{ 'Hello, 世界' }}"
      register: string_encoding_result

    - name: Division-based operations test
      ansible.builtin.meta:
        free_form: "{{ 'cpu_limit={{ ansible_processor_vcpus // 2 }}' }}"
      register: division_result

    - name: !null configuration value test
      ansible.builtin.meta:
        free_form: "{{ '!null' }}"
      register: null_value_result

    - name: Random IP address test
      ansible.builtin.meta:
        free_form: "{{ 'ip_address=192.168.1.1' }}"
      register: ip_address_result

    - debug:
        var: item
      with_items:
        - mixed_case_result
        - byte_string_result
        - mac_address_result
        - port_result
        - string_encoding_result
        - division_result
        - null_value_result
        - ip_address_result