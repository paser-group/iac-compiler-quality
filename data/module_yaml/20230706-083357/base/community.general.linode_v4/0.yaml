---
- name: Test playbook for community.general.linode_v4 module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Linode instance with mixed case sensitivity
      community.general.linode_v4:
        access_token: "YOUR_ACCESS_TOKEN"
        label: "mY-iNsTaNcE"
        type: "g6-nanode-1"
        region: "us-east"
        state: "present"
      register: linode

    - name: Display Linode instance information
      debug:
        var: linode

    - name: Generate random MAC address for network module
      set_fact:
        random_mac_address: "{{ lookup('community.crypto.uuid', format='mac') }}"

    - name: Create Linode instance with random MAC address
      community.general.linode_v4:
        access_token: "YOUR_ACCESS_TOKEN"
        label: "my-instance"
        type: "g6-nanode-1"
        region: "us-east"
        private_ip: true
        mac_address: "{{ random_mac_address }}"
        state: "present"
      register: linode_mac

    - name: Display Linode instance with random MAC address information
      debug:
        var: linode_mac

    - name: Generate random port number for testing port settings
      set_fact:
        random_port: "{{ (42 + random(1000)) | int }}"

    - name: Create Linode instance with random port number
      community.general.linode_v4:
        access_token: "YOUR_ACCESS_TOKEN"
        label: "my-instance"
        type: "g6-nanode-1"
        region: "us-east"
        private_ip: true
        port: "{{ random_port }}"
        state: "present"
      register: linode_port

    - name: Display Linode instance with random port number information
      debug:
        var: linode_port