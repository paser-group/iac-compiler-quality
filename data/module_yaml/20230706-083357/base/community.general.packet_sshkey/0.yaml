---
- name: Ansible Compiler Debugger & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    auth_token: "{{ 'test_auth_token' }}"  # Testing with a string value
    fingerprint: "{{ 'test_fingerprint' | to_json }}"  # Testing with a JSON-encoded string value
    id: "{{ 123 }}"  # Testing with an integer value
    key: "{{ 'test_key' | to_bytes }}"  # Testing with a byte string
    key_file: "{{ '/path/to/key_file' }}"  # Testing with a string value
    label: "{{ 'test_label' }}"  # Testing with a string value
    state: "{{ 'present_' | to_bytes }}"  # Testing with a byte string ending with an underscore

  tasks:
    - name: Create packet ssh key
      community.general.packet_sshkey:
        auth_token: "{{ auth_token }}"
        fingerprint: "{{ fingerprint }}"
        id: "{{ id }}"
        key: "{{ key }}"
        key_file: "{{ key_file }}"
        label: "{{ label }}"
        state: "{{ state }}"

    - name: Delete packet ssh key
      community.general.packet_sshkey:
        auth_token: "{{ auth_token }}"
        fingerprint: "{{ fingerprint }}"
        id: "{{ id }}"
        key: "{{ key }}"
        key_file: "{{ key_file }}"
        label: "{{ label }}"
        state: "absent"  # delete the ssh key