- name: Heuristic-based test playbook for community.general.xfs_quota module
  hosts: localhost
  gather_facts: False

  vars:
    mount_point: /mnt/data
    quota_name: user_quota
    block_hard_limit: 1T
    block_soft_limit: 800G
    inode_hard_limit: 1000
    inode_soft_limit: 500
    rt_block_hard_limit: 1.5T
    rt_block_soft_limit: 1T
    quota_type: user

  tasks:
    - name: Set XFS quota for a user
      community.general.xfs_quota:
        path: "{{ mount_point }}"
        name: "{{ quota_name }}"
        bhard: "{{ block_hard_limit }}"
        bsoft: "{{ block_soft_limit }}"
        ihard: "{{ inode_hard_limit }}"
        isoft: "{{ inode_soft_limit }}"
        rtbhard: "{{ rt_block_hard_limit }}"
        rtbsoft: "{{ rt_block_soft_limit }}"
        state: present
        type: "{{ quota_type }}"