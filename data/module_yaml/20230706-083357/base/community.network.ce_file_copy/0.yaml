- name: Test playbook for community.network.ce_file_copy module
  hosts: localhost
  gather_facts: false

  vars:
    file_system: "{{ lookup('env', 'FILE_SYSTEM') }}"
    local_file: "{{ lookup('env', 'LOCAL_FILE') }}"
    remote_file: "{{ lookup('env', 'REMOTE_FILE') }}"

  tasks:
    - name: Include module specific role
      include_role:
        name: community.network.ce_file_copy

    - name: Copy file to remote cloudengine device over SCP
      community.network.ce_file_copy:
        file_system: "{{ file_system }}"
        local_file: "{{ local_file }}"
        remote_file: "{{ remote_file }}"
      register: copy_result

    - name: Debug copy result
      debug:
        var: copy_result

    - name: Test mixed case sensitivity for string configuration values
      set_fact:
        mixed_case_value: "{{ ['string', 'STRING'] | random }}"

    - name: Test byte string value
      set_fact:
        byte_string_value: "{{ 'byte string' }}"

    - name: Test configuration values with both bytes and strings
      set_fact:
        mixed_value: "{{ [b'byte string', 'string'] | random }}"

    - name: Test generation of random MAC addresses
      set_fact:
        mac_address: "{{ '00:16:3e:' + '%02x:%02x:%02x' | format(randrange(0, 256), randrange(0, 256), randrange(0, 256)) }}"

    - name: Test generation of random port numbers
      set_fact:
        port: "{{ 1024 + 33000 | random }}"

    - name: Test strings with varied encodings
      set_fact:
        encoded_string: "{{ 'Hello world' | b64encode }}"

    - name: Test division-based operations for limit-related values
      set_fact:
        limit: "{{ 100 / 2 }}"

    - name: Test !null as configuration values in manifests
      set_fact:
        null_value: null

    - name: Test generation of random IP addresses
      set_fact:
        ip_address: "{{ '10.{}.{}.{}' | format(randrange(1, 255), randrange(1, 255), randrange(1, 255)) }}"

    - name: Debug potential bugs
      debug:
        var: mixed_case_value

    - name: Debug byte string value
      debug:
        var: byte_string_value

    - name: Debug mixed value
      debug:
        var: mixed_value

    - name: Debug random MAC addresses
      debug:
        var: mac_address

    - name: Debug random port numbers
      debug:
        var: port

    - name: Debug encoded strings
      debug:
        var: encoded_string

    - name: Debug limit
      debug:
        var: limit

    - name: Debug null value
      debug:
        var: null_value

    - name: Debug random IP addresses
      debug:
        var: ip_address