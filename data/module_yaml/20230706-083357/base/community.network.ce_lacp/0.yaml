---
- name: Testing community.network.ce_lacp module
  hosts: localhost
  gather_facts: False

  vars:
    collector_delay: "{{ random.randint(1, 10) }}"
    fast_timeout: "{{ random.randint(5, 30) }}"
    global_priority: "{{ random.randint(1, 10) }}"
    max_active_linknumber: "{{ random.randint(2, 8) }}"
    mixed_rate_link_enable: "{{ random.choice([True, False]) }}"
    mode: "{{ random.choice(['normal', 'load-balancing', 'manual']) }}"
    port_id_extension_enable: "{{ random.choice([True, False]) }}"
    preempt_delay: "{{ random.randint(1, 5) }}"
    preempt_enable: "{{ random.choice([True, False]) }}"
    priority: "{{ random.randint(0, 61440) }}"
    select: "{{ random.choice(['normal', 'standard']) }}"
    state: "{{ random.choice(['present', 'absent']) }}"
    state_flapping: "{{ random.choice([True, False]) }}"
    system_id: "{{ random.randrange(281474976710655) | int }}"
    timeout_type: "{{ random.choice(['long', 'short', 'permanent']) }}"
    trunk_id: "{{ random.randint(1, 100) }}"
    unexpected_mac_disable: "{{ random.choice([True, False]) }}"

  tasks:
    - name: Configuring Eth-Trunk interface
      community.network.ce_lacp:
        collector_delay: "{{ collector_delay }}"
        fast_timeout: "{{ fast_timeout }}"
        global_priority: "{{ global_priority }}"
        max_active_linknumber: "{{ max_active_linknumber }}"
        mixed_rate_link_enable: "{{ mixed_rate_link_enable }}"
        mode: "{{ mode }}"
        port_id_extension_enable: "{{ port_id_extension_enable }}"
        preempt_delay: "{{ preempt_delay }}"
        preempt_enable: "{{ preempt_enable }}"
        priority: "{{ priority }}"
        select: "{{ select }}"
        state: "{{ state }}"
        state_flapping: "{{ state_flapping }}"
        system_id: "{{ system_id }}"
        timeout_type: "{{ timeout_type }}"
        trunk_id: "{{ trunk_id }}"
        unexpected_mac_disable: "{{ unexpected_mac_disable }}"
      register: result

    - debug:
        var: result