---
- name: Heuristic Test for community.network.icx_user module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure ICX User
      community.network.icx_user:
        access_time: "daily"
        aggregate:
          - name: user1
            state: present
            nopassword: true
            privilege: "admin"
          - name: user2
            state: present
            nopassword: false
        check_running_config: true
        configured_password: "MyS3cr3tP@ssw0rd"
        name: "{{ item }}"
        nopassword: "{{ item }}"
        privilege: "{{ item }}"
        purge: "{{ item }}"
        state: "{{ item }}"
        update_password: "{{ item }}"
      loop:
        - "present"
        - "absent"
        - "role_option"
        - "yes"
        - "no"
        - "admin"
        - "user"
        - "random_string"
        - "lowercase"
        - "UPPERCASE"
        - "random_MAC_address:00:11:22:33:44:55"
        - "random_IP_address:0.0.0.0/0"
      register: result

    - name: Print module results
      debug:
        var: result