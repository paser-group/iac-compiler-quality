---
- name: Heuristic-Based Playbook for community.network.nclu module
  hosts: localhost
  gather_facts: false

  vars:
    commands: "{{ ['Test command', 'Another command']|random }}"
    description: "{{ 'Test description'|random }}"
    template: "{{ ['Test template', 'Another template']|random }}"
    mac: "{{ '%02x:%02x:%02x:%02x:%02x:%02x'|format(255|random, 255|random, 255|random, 255|random, 255|random, 255|random) }}"
    port: "{{ 1 + 65534|random }}"
    limit: "{{ 100 / 4 }}"
    ip: "{{ ['10.0.0.0/8', '172.16.0.0/12', '192.168.0.0/16']|random }}"
    null_value: null

  tasks:
    - name: Test scenario - Heuristic-driven test
      community.network.nclu:
        abort: True
        atomic: True
        commands: "{{ commands }}"
        commit: False
        description: "{{ description }}"
        template: "{{ template }}"
        mac: "{{ mac }}"
        port: "{{ port }}"
        limit: "{{ limit }}"
        ip: "{{ ip }}"
        null_value: "{{ null_value }}"
      register: result

    - name: Print result
      debug:
        var: result