- name: Heuristic-driven test scenario for community.general.packet_device
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create packet devices
      community.general.packet_device:
        always_pxe: true
        auth_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJTZXJ2aWNlIiwic3ViIjoiYXBpX3VzZXIiLCJpYXQiOjE2MzY4NjQ5NzIsImV4cCI6MTYzNjg2NTU3MiwidHlwZSI6ImFwaV90b2tlbiIsImF1ZCI6IkNsaWVudCJ9.Y-23v0teALG7pGNrwzLF6xG66H5tXTFL5HDSuBPilec"
        count: "{{ 2 + 3 }}"
        count_offset: "{{ 4 / 2 }}"
        device_ids:
          - "{{ 'device1' }}"
          - "{{ 'device2' }}"
        facility: "{{ ['AM', '6'] | join }}"
        features:
          - "{{ 'feature1' + ' feature2' }}"
        hostnames:
          - "host1"
          - "host2"
          - "host3"
        ipxe_script_url: "https://example.com/ipxe_script"
        locked: true
        operating_system: "{{ 'ubuntu_' + '20' + '_' + '04' }}"
        plan: "b1.small.x86"
        project_id: "abc" + "{{ 1 + '23' }}"
        state: present
        tags:
          - "{{ 'tag1' }}"
          - "{{ 'tag2' }}"
        user_data: |
          #!/bin/bash
          echo "User data script"
        wait_timeout: "{{ 10 * 60 }}"
        wait_for_public_IPv4: "{{ [4] | random }}"