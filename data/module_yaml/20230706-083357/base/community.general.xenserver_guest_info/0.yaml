---
- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Gather information using community.general.xenserver_guest_info module
      community.general.xenserver_guest_info:
        hostname: 'xenserver.example.com'
        username: 'admin'
        password: 'password'
        validate_certs: false
        name: "{{ item }}"
      loop:
        - vm1
        - vm2
        - vm3
      register: guest_info

    - name: Print gathered guest information
      debug:
        var: guest_info