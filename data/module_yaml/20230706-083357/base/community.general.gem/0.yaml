---
- name: Heuristic-based test scenarios for community.general.gem
  hosts: localhost
  gather_facts: false

  vars:
    gem_name: "mygem"

  tasks:
    - name: Install gem with mixed case sensitivity
      community.general.gem:
        name: "{{ gem_name }}"
        state: present

    - name: Install gem with byte string value
      community.general.gem:
        name: "{{ gem_name }}"
        build_flags: b'--with-flags'
        state: present

    - name: Install gem with mixed bytes and strings
      community.general.gem:
        name: "{{ gem_name }}"
        build_flags: [b'--with-flags', '--another-flag']
        state: present

    - name: Install gem with random MAC address
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        mac_address: true
        state: present

    - name: Install gem with random port number
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        port: "{{ 30000 | random }}"
        state: present

    - name: Install gem with varied encoding
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        encoding: "{{ ['utf-8', 'latin-1'] | random }}"
        state: present

    - name: Install gem with division-based limit value
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        limit: "{{ 10 // 3 }}"
        state: present

    - name: Install gem with null value
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        manifest: '!null'
        state: present

    - name: Install gem with random IP address
      community.general.gem:
        name: "{{ gem_name }}"
        repository: "https://rubygems.org"
        ip_address: true
        state: present