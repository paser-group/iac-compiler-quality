---
- name: Test playbook for community.general.ini_file module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Test community.general.ini_file module
      community.general.ini_file:
        path: "/etc/app.ini"
        section: "network"
        option: "{{ item.option }}"
        value: "{{ item.value }}"
        create: true
        backup: true
        owner: "root"
        group: "admin"
        mode: "0644"
      loop:
        - { option: "debug_mode", value: "1" }
        - { option: "log_level", value: "INFO" }
        - { option: "max_requests", value: 100 }

    - name: Debug module output
      debug:
        var: ansible_facts.ansible_all_ipv4_addresses