---
- name: Ansible Compiler Debugger & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    # Set the API token for Scaleway
    api_token: "YOUR_API_TOKEN"

    # Set the name and region for the container
    container_name: "test-container"
    container_region: "fr-par"

    # Set the number of instances to scale
    min_scale: 1
    max_scale: 3

    # Set the memory limit for the container
    memory_limit: 256

    # Set the environment variables for the container
    environment_variables:
      ENV_VAR1: "value1"
      ENV_VAR2: "value2"

    # Set the query parameters for the container
    query_parameters:
      param1: "value1"
      param2: "value2"

  tasks:
    - name: Debug Test Scenario 1 - Mixed Case Sensitivity
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        
    - name: Debug Test Scenario 2 - Byte String Values
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name | b64encode }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        
    - name: Debug Test Scenario 3 - Mixed Byte and String Values
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name | b64encode }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters | b64decode }}"
        
    - name: Debug Test Scenario 4 - Random MAC Addresses
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        mac_address: "{{ lookup('mac', namespace='container') }}"
        
    - name: Debug Test Scenario 5 - Random Port Numbers
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        port: "{{ lookup('pipe', 'shuf -i 1024-65535 -n 1 | head -n 1') }}"
        
    - name: Debug Test Scenario 6 - Varied Encodings
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        encoding: "{{ ['utf-8', 'utf-16', 'latin1'] | random }}"
        
    - name: Debug Test Scenario 7 - Division-based Operations
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        limit: "{{ 100 / max_scale }}"
        
    - name: Debug Test Scenario 8 - !null Configuration Values
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        limit: !null
        
    - name: Debug Test Scenario 9 - Random IP Addresses
      community.general.scaleway_container:
        api_token: "{{ api_token }}"
        state: present
        name: "{{ container_name }}"
        region: "{{ container_region }}"
        environment_variables: "{{ environment_variables }}"
        query_parameters: "{{ query_parameters }}"
        ip_address: "{{ lookup('pipe', 'python -c \"import random; print(\'.\'.join([str(random.randint(0,255)) for _ in range(4)]))\"') }}"
...