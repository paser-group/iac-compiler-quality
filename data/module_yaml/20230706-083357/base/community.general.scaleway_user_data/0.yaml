- name: Heuristic-based test playbook for community.general.scaleway_user_data module
  hosts: localhost
  gather_facts: False

  vars:
    api_timeout: 60
    api_token: "API_TOKEN"
    api_url: "https://example.com"
    region: "ams1"
    server_id: "Server1"
    user_data:
      - name: "John Doe"
        age: 30
      - name: "Jane Smith"
        age: 35

  tasks:
    - name: Test community.general.scaleway_user_data module
      community.general.scaleway_user_data:
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        region: "{{ region }}"
        server_id: "{{ server_id }}"
        user_data: "{{ user_data }}"
        validate_certs: False
        api_timeout: "{{ api_timeout }}"
      register: result

    - name: Display module output
      debug:
        var: result