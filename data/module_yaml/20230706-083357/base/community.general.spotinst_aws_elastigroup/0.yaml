- name: Test Ansible module - community.general.spotinst_aws_elastigroup
  hosts: localhost
  gather_facts: False
  
  vars:
    account_id: 1234567890
    availability_zones:
      - us-west-2a
      - us-west-2b
      - us-west-2c
    image_id: "{{ 'ami-0123456789abcdef0' }}"
    key_pair: "{{ 'my-key-pair' }}"
    min_size: 1
    max_size: 10
    spot_instance_types:
      - m5.large
      - m5.xlarge
    state: present
    
  tasks:
    - name: Test the module
      community.general.spotinst_aws_elastigroup:
        account_id: "{{ account_id }}"
        availability_zones: "{{ availability_zones }}"
        image_id: "{{ image_id }}"
        key_pair: "{{ key_pair }}"
        min_size: "{{ min_size }}"
        max_size: "{{ max_size }}"
        spot_instance_types: "{{ spot_instance_types }}"
        state: "{{ state }}"
      register: result

    - debug:
        var: result