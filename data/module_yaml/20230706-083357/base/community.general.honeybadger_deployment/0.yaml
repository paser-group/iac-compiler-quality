- name: Ansible Compiler Bugs Heuristic Test
  hosts: localhost
  gather_facts: false
  vars:
    environment: test
    repo: example-repo
    revision: v1.0.0
    token: ABC123
    url: https://api.honeybadger.io
    user: ansible

  tasks:
    - name: Configure Honeybadger.io
      community.general.honeybadger_deployment:
        environment: "{{ environment }}"
        repo: "{{ repo }}"
        revision: "{{ revision }}"
        token: "{{ token }}"
        url: "{{ url }}"
        user: "{{ user }}"
        validate_certs: true

    - name: Test random port numbers
      community.general.honeybadger_deployment:
        environment: "{{ environment }}"
        repo: "{{ repo }}"
        revision: "{{ revision }}"
        token: "{{ token }}"
        url: "{{ url }}"
        user: "{{ user }}"
        port: "{{ range(1, 65535) | random }}"
        validate_certs: "Yes"

    - name: Test mixed case sensitivity
      community.general.honeybadger_deployment:
        Environment: test
        Repo: example-repo
        Revision: v1.0.0
        token: ABC123
        URL: https://api.honeybadger.io
        USER: ansible
        validate_certs: true