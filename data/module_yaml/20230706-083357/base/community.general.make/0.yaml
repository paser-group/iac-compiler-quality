---
- name: Test playbook for community.general.make module
  hosts: localhost
  gather_facts: false

  vars:
    chdir_path: "/path/to/directory"
    file_path: "/path/to/file"
    jobs_count: 4
    make_path: "/usr/bin/make"
    params_dict:
      param1: "value1"
      param2: "value2"
    target_name: "target"

  tasks:
    - name: Test community.general.make module
      community.general.make:
        chdir: "{{ chdir_path }}"
        file: "{{ file_path }}"
        jobs: "{{ jobs_count }}"
        make: "{{ make_path }}"
        params: "{{ params_dict }}"
        target: "{{ target_name }}"
      register: result

    - name: Display module output
      debug:
        var: result

    - name: Test mixed case sensitivity for string configuration values
      community.general.make:
        chdir: "{{ chdir_path }}"
        file: "{{ file_path }}"
        Jobs: "{{ jobs_count }}"
        Make: "{{ make_path }}"
        Params: "{{ params_dict }}"
        TaRgEt: "{{ target_name }}"
      register: mixed_case_result

    - name: Display mixed case sensitivity result
      debug:
        var: mixed_case_result

    - name: Test byte strings instead of regular strings
      community.general.make:
        chdir: "{{ chdir_path|string }}"
        file: "{{ file_path|b64encode }}"
        jobs: "{{ jobs_count|string }}"
        make: "{{ make_path|b64encode }}"
        params: "{{ params_dict|b64encode }}"
        target: "{{ target_name|b64encode }}"
      register: byte_string_result

    - name: Display byte string result
      debug:
        var: byte_string_result

    - name: Test mixed byte and regular strings
      community.general.make:
        chdir: "{{ chdir_path }}"
        file: "{{ file_path|b64encode }}"
        jobs: "{{ jobs_count }}"
        make: "{{ make_path|b64encode }}"
        params: "{{ params_dict }}"
        target: "{{ target_name|b64encode }}"
      register: mixed_string_result

    - name: Display mixed string result
      debug:
        var: mixed_string_result