- name: Heuristic Test Playbook for ejabberd_user module
  hosts: redhat1
  gather_facts: true
  vars:
    username: admin_user
    password: pass123
    host: localhost
    logging: true
    state: present

  tasks:
    - name: Create ejabberd user
      community.general.ejabberd_user:
        username: "{{ username }}"
        password: "{{ password }}"
        host: "{{ host }}"
        logging: "{{ logging }}"
        state: "{{ state }}"
      register: result

    - name: Print result
      debug:
        var: result

#  tasks:
#    - name: Create ejabberd user
#      community.general.ejabberd_user:
#        username: "{{ username }}"
#        password: "{{ password }}"
#        host: "{{ host }}"
#        logging: "{{ logging }}"
#        state: "{{ state }}"
#      register: result
#
#    - name: Print result
#      debug:
#        var: result
#
#    - name: Update ejabberd user password
#      community.general.ejabberd_user:
#        username: "{{ username }}"
#        password: "{{ password }}"
#        host: "{{ host }}"
#        logging: "{{ logging }}"
#        state: present
#        update_password: always
#      register: update_result
#
#    - name: Print update result
#      debug:
#        var: update_result
#
#    - name: Delete ejabberd user
#      community.general.ejabberd_user:
#        username: "{{ username }}"
#        host: "{{ host }}"
#        logging: "{{ logging }}"
#        state: absent
#      register: delete_result
#
#    - name: Print delete result
#      debug:
#        var: delete_result
