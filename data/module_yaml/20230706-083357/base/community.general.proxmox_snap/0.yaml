- name: Ansible Compiler Debugger & Heuristic Test Playbook for community.general.proxmox_snap
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create Snapshot
      community.general.proxmox_snap:
        api_host: "{{ hostvars['localhost']['api_host'] }}"
        api_password: "{{ hostvars['localhost']['api_password'] }}"
        api_token_id: "{{ hostvars['localhost']['api_token_id'] }}"
        api_token_secret: "{{ hostvars['localhost']['api_token_secret'] }}"
        api_user: "{{ hostvars['localhost']['api_user'] }}"
        description: "{{ hostvars['localhost']['description'] }}"
        force: "{{ hostvars['localhost']['force'] | default(true) }}"
        hostname: "{{ hostvars['localhost']['hostname'] }}"
        snapname: "{{ hostvars['localhost']['snapname'] }}"
        state: "{{ hostvars['localhost']['state'] }}"
        timeout: "{{ hostvars['localhost']['timeout'] }}"
        unbind: "{{ hostvars['localhost']['unbind'] | default(false) }}"
        validate_certs: "{{ hostvars['localhost']['validate_certs'] | default(true) }}"
        vmid: "{{ hostvars['localhost']['vmid'] }}"
        vmstate: "{{ hostvars['localhost']['vmstate'] | default(true) }}"

      register: result

    - name: Debug
      debug:
        var: result