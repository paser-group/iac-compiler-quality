---
- name: Test playbook for community.general.sendgrid module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "API_KEY"
    attachments:
      - /path/to/attachment1.txt
      - /path/to/attachment2.txt
    bcc:
      - bcc1@example.com
      - bcc2@example.com
    body: "This is the email body"
    cc:
      - cc1@example.com
      - cc2@example.com
    from_address: "sender@example.com"
    from_name: "Sender Name"
    headers:
      X-Custom-Header: "Custom value"
      X-Another-Header: "Another value"
    html_body: false
    password: "PASSWORD"
    subject: "Test email"
    to_addresses:
      - recipient1@example.com
      - recipient2@example.com
    username: "USERNAME"

  tasks:
    - name: Send email using community.general.sendgrid module
      community.general.sendgrid:
        api_key: "{{ api_key }}"
        attachments: "{{ attachments }}"
        bcc: "{{ bcc }}"
        body: "{{ body }}"
        cc: "{{ cc }}"
        from_address: "{{ from_address }}"
        from_name: "{{ from_name }}"
        headers: "{{ headers }}"
        html_body: "{{ html_body }}"
        password: "{{ password }}"
        subject: "{{ subject }}"
        to_addresses: "{{ to_addresses }}"
        username: "{{ username }}"
      register: sendgrid_result

    - name: Display sendgrid result
      debug:
        var: sendgrid_result