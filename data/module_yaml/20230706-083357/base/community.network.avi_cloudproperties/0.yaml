---
- name: Test playbook for community.network.avi_cloudproperties module
  hosts: localhost
  gather_facts: false

  vars:
    api_version: "v20.1.1"
    controller: "avi-controller"
    username: "admin"
    password: "password"
    tenant: "tenant1"
    tenant_uuid: "a1e9f4e5-4682-40b4-9b85-1f5a9cc2e3b8"
    api_context:
      tenant: "{{ tenant }}"
      api_version: "{{ api_version }}"
      controller: "{{ controller }}"

  tasks:
    - name: Test random IP addresses
      community.network.avi_cloud_properties:
        api_context: "{{ api_context }}"
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        tenant_uuid: "{{ tenant_uuid }}"
        cc_props:
          subnet:
            - ip: "{{ (10,1,1,1) | random_ip }}"
              prefix: 24
            - ip: "{{ (192,168,1,1) | random_ip }}"
              prefix: 16
            - ip: "{{ (172,16,1,1) | random_ip }}"
              prefix: 12
      register: result
      ignore_errors: true

  handlers:
    - name: Print result
      debug:
        var: result
...