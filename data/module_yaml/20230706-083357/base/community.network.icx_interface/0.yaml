---
- name: Heuristic-based test playbook for community.network.icx_interface module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure interface with mixed case sensitivity
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        speed: 1000
        state: "present"


    - name: Configure interface with byte string values
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        power:
          - "on"
          - b"off"
        state: "present"


    - name: Configure interface with mixed byte and string values
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        neighbors:
          - b"192.168.1.1"
          - "192.168.1.2"
        state: "present"


    - name: Configure interface with random MAC address
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        mac_address: "00:11:22:33:44:55"
        state: "present"


    - name: Configure interface with random port number
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        rx_rate: "{{ hostvars[inventory_hostname].ansible_port }}"
        tx_rate: "{{ hostvars[inventory_hostname].ansible_port|int + 1 }}"
        state: "present"


    - name: Configure interface with varied string encodings
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        rx_rate: 100
        tx_rate: 200
        state: "present"


    - name: Configure interface with division-based limit value
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        limit: "{{ 100/2 }}"
        state: "present"


    - name: Configure interface with null configuration values
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        rx_rate: "!null"
        state: "present"


    - name: Configure interface with random IP address
      community.network.icx_interface:
        name: "eth0"
        description: "Test interface"
        ip_address: "192.168.1.10"
        state: "present"