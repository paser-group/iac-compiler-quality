---
- name: Heuristic-based test playbook for community.general.sorcery
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install package with mixed case sensitivity
      community.general.sorcery:
        package: ApachE2
        state: present
      register: result

    - name: Check if package is installed
      assert:
        that:
          - result.changed
        fail_msg: "Package ApachE2 is not installed"

    - name: Remove installed package
      community.general.sorcery:
        package: ApachE2
        state: absent