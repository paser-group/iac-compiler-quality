- name: Ansible Debugger & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false

  vars:
    clean: "{{ [True, False] | random }}"
    dist_upgrade: "{{ [True, False] | random }}"
    package_list:
      - package1
      - package2
      - package3
    state: "{{ ['absent', 'latest', 'present'] | random }}"
    update_cache: "{{ [True, False] | random }}"
    update_kernel: "{{ [True, False] | random }}"

  tasks:
    - name: Debug Ansible Compiler
      community.general.apt_rpm:
        name: "{{ package_list }}"
        state: "{{ state }}"
        clean: "{{ clean }}"
        dist_upgrade: "{{ dist_upgrade }}"
        update_cache: "{{ update_cache }}"
        update_kernel: "{{ update_kernel }}"
        cache_valid_time: 3600
      register: result

    - name: Print Ansible Debugger Result
      debug:
        var: result