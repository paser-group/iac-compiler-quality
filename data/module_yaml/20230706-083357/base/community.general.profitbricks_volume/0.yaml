- name: Test playbook for community.general.profitbricks_volume module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create ProfitBricks volume
      community.general.profitbricks_volume:
        name: "MyVolume"
        datacenter: "MyDatacenter"
        size: 100
        bus: "virtio"
        count: 2
        wait_timeout: 300
        state: "present"
      register: volume_creation

    - name: Debug volume creation output
      debug:
        var: volume_creation

    - name: Update ProfitBricks volume
      community.general.profitbricks_volume:
        name: "{{ volume_creation.name }}"
        datacenter: "MyDatacenter"
        size: 200
        state: "resized"
      register: volume_update

    - name: Debug volume update output
      debug:
        var: volume_update

    - name: Delete ProfitBricks volume
      community.general.profitbricks_volume:
        name: "{{ volume_creation.name }}"
        datacenter: "MyDatacenter"
        state: "absent"
      register: volume_deletion

    - name: Debug volume deletion output
      debug:
        var: volume_deletion