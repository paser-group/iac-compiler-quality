---
- name: Heuristic-based test playbook for community.general.lvol module
  hosts: localhost
  gather_facts: false

  vars:
    active: true
    force: false
    lv: "myvolume"
    opts: "-ay"
    pvs: "/dev/sda1"
    resizefs: true
    shrink: false
    size: "1G"
    snapshot: "mysnapshot"
    state: "present"
    thinpool: "mypool"
    vg: "myvg"

  tasks:
    - name: Test scenario 1 - Mixed case sensitivity
      community.general.lvol:
        active: True
        force: false
        lv: "{{ lv }}"
        opts: "{{ opts }}"
        pvs: "{{ pvs }}"
        resizefs: "{{ resizefs }}"
        shrink: "{{ shrink }}"
        size: "{{ size }}"
        snapshot: "{{ snapshot }}"
        state: "{{ state }}"
        thinpool: "{{ thinpool }}"
        vg: "{{ vg }}"
      register: result_scenario_1

    - name: Test scenario 2 - Byte string values
      community.general.lvol:
        active: True
        force: "{{ force | bool }}"
        lv: "m√πvolume"  # Byte string value with mixed encoding
        opts: "{{ opts }}"
        pvs: "{{ pvs }}"
        resizefs: "{{ resizefs }}"
        shrink: "{{ shrink }}"
        size: "{{ size }}"
        snapshot: "{{ snapshot }}"
        state: "{{ state }}"
        thinpool: "{{ thinpool }}"
        vg: "{{ vg }}"
      register: result_scenario_2

    - name: Test scenario 3 - Mixed byte and string values
      community.general.lvol:
        active: True
        force: "{{ force | bool }}"
        lv: "myvolume"
        opts: b'myopts'  # Byte string value
        pvs: "{{ pvs }}"
        resizefs: "{{ resizefs }}"
        shrink: "{{ shrink }}"
        size: "{{ size }}"
        snapshot: "{{ snapshot }}"
        state: "{{ state }}"
        thinpool: "{{ thinpool }}"
        vg: "{{ vg }}"
      register: result_scenario_3

    - name: Test scenario 4 - Random MAC address
      community.general.lvol:
        active: True
        force: "{{ force | bool }}"
        lv: "{{ lv }}"
        opts: "{{ opts }}"
        pvs: "{{ pvs }}"
        resizefs: "{{ resizefs }}"
        shrink: "{{ shrink }}"
        size: "{{ size }}"
        snapshot: "{{ snapshot }}"
        state: "{{ state }}"
        thinpool: "{{ thinpool }}"
        vg: "{{ vg }}"
        mac_address: "{{ lookup('pipe', 'openssl rand -hex 6 | sed \"s/\\(..\\)/\\1:/g; s/.$//\"') }}"
      register: result_scenario_4

  tasks:
    - debug: var=result_scenario_1
    - debug: var=result_scenario_2
    - debug: var=result_scenario_3
    - debug: var=result_scenario_4