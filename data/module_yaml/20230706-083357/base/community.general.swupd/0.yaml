- name: Heuristic-based test playbook for community.general.swupd
  hosts: localhost
  gather_facts: false

  vars:
    contenturl: "http://example.com/swupd/content"
    format: "tar.gz"
    manifest: 123
    name: "myapp"
    state: "absent"
    update: true
    url: "http://example.com/swupd/package.tar.gz"
    verify: false
    versionurl: "http://example.com/swupd/version"

  tasks:
    - name: Test mixed case sensitivity
      community.general.swupd:
        contenturl: "{{ contenturl }}"
        format: "{{ format | upper }}"
        manifest: "{{ manifest }}"
        name: "{{ name | upper }}"
        state: "{{ state }}"
        update: "{{ update }}"
        url: "{{ url }}"
        verify: "{{ verify }}"
        versionurl: "{{ versionurl }}"
      register: result

    - name: Test random MAC addresses
      community.general.swupd:
        contenturl: "{{ contenturl }}"
        format: "{{ format }}"
        manifest: "{{ manifest }}"
        name: "{{ name }}"
        state: "{{ state }}"
        update: "{{ update }}"
        url: "{{ url }}"
        verify: "{{ verify }}"
        versionurl: "{{ versionurl }}"
        mac: "{{ '%02x:%02x:%02x:%02x:%02x:%02x' | format(ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255), ansible_random.randint(0, 255)) }}"
      register: result

    - name: Test random port numbers
      community.general.swupd:
        contenturl: "{{ contenturl }}"
        format: "{{ format }}"
        manifest: "{{ manifest }}"
        name: "{{ name }}"
        state: "{{ state }}"
        update: "{{ update }}"
        url: "{{ url }}"
        verify: "{{ verify }}"
        versionurl: "{{ versionurl }}"
        port: "{{ ansible_random.randint(1024, 65535) }}"
      register: result

    - name: Debug result
      debug:
        var: result