---
- name: Test playbook for community.general.htpasswd
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Set random MAC address
      set_fact:
        mac_address: "{{ '52:54:00:%02x:%02x:%02x'|format(ansible_random.int(0, 255),ansible_random.int(0, 255),ansible_random.int(0, 255)) }}"

    - name: Generate random port number
      set_fact:
        port: "{{ ansible_random.randint(1024, 65535) }}"
        
    - name: Encode string values in different encodings
      set_fact:
        encoded_string: "{{ 'ansible' | b64encode }}"
        
    - name: Test mixed case sensitivity for string configuration values
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Alice"
            password: "password123"
            state: "present"
        crypt_scheme: "{{ foo }}"
        
    - name: Test byte string values in place of regular strings
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Bob"
            password: b"password456"
            state: "present"
            
    - name: Create configuration values that combine bytes and strings
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "{{ encoded_string }}"
            password: b"password789"
            state: "absent"
            
    - name: Test random MAC addresses for network modules
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Charlie"
            password: "password012"
            state: "present"
        seuser: "{{ mac_address }}"
        
    - name: Test random port numbers for port settings
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Dave"
            password: "password345"
            state: "present"
        serole: "{{ port }}"
        
    - name: Test division-based operations when assigning limit-related values
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Eve"
            password: "password678"
            state: "present"
        selevel: "{{ ansible_processor_count / 2 }}"
        
    - name: Use !null as configuration values in manifests
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Frank"
            password: "password901"
            state: "present"
        setype: "!null"
        
    - name: Test random IP addresses for networking modules
      community.general.htpasswd:
        path: /etc/htpasswd
        users:
          - name: "Grace"
            password: "password234"
            state: "present"
        selevel: "{{ '192.168.0.' + (ansible_random.randint(1, 254)|string) }}"