---
- name: Test playbook for ansible.builtin.blockinfile module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Insert/update/remove a text block surrounded by marker lines
      ansible.builtin.blockinfile:
        path: /path/to/file
        marker: "# {mark} BEGIN"
        marker_begin: "# BEGIN ANSIBLE MANAGED BLOCK"
        marker_end: "# END ANSIBLE MANAGED BLOCK"
        block: |
          This is a sample text block
          that will be inserted or updated
          between the marker lines.
      register: result

    - name: Display result
      debug:
        var: result