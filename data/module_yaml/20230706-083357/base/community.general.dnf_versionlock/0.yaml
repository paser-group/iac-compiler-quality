---
- name: Heuristic-based test scenario for community.general.dnf_versionlock module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Scenario - Random IP Addresses
      community.general.dnf_versionlock:
        name: "Package1"
        raw: false
        state: absent
      vars:
        random_ip: "{{ lookup('pipe', 'bash -c \"echo $((RANDOM%=255)).$((RANDOM%=255)).$((RANDOM%=255)).$((RANDOM%=255))\"') }}"
      register: result
      until: result.stdout.find('some_string') != -1
      retries: 3
      delay: 5