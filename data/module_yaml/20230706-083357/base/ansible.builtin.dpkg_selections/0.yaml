---
- name: Heuristic-based test playbook for ansible.builtin.dpkg_selections module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Set dpkg selections using heuristic test scenarios
      ansible.builtin.dpkg_selections:
        name: "{{ item.name }}"
        selection: "{{ item.selection }}"
      loop:
        # Test scenarios for mixed case sensitivity in string configuration values
        - name: Test mixed case sensitivity
          selection: Install
        - name: Test mixed Case Sensitivity
          selection: Deinstall
  
        # Test scenarios for byte string values
        - name: Test byte string values
          selection: "{{ lookup('pipe', 'echo -n Hello | xxd -p | sed s/^/\\\\x/g') }}"
  
        # Test scenarios for configuration values with both bytes and strings
        - name: Test mixed byte and string values
          selection: "{{ lookup('pipe', 'echo -n Hello | xxd -p | sed s/^/\\\\x/g') }} Hello"
  
        # Test scenario for MAC address
        - name: Test random MAC address
          selection: "{{ lookup('mac', namespace='ansible.network') }}"
  
        # Test scenario for port numbers
        - name: Test random port number
          selection: "{{ 10000 | random }}"
  
        # Test scenario for varied string encodings
        - name: Test varied string encodings
          selection: "{{ lookup('pipe', 'echo -n Hello | base64') }}"
  
        # Test scenario for limit-related values
        - name: Test division-based operation for limit-related values
          selection: "{{ 100 / 3 }}"
  
        # Test scenario for !null configuration values
        - name: Test !null configuration values
          selection: "null"
  
        # Test scenario for random IP addresses
        - name: Test random IP address
          selection: "{{ lookup('pipe', 'echo -n \"10.$((1+4)).$((1+2*2)).$((2*6-3))\"') }}"