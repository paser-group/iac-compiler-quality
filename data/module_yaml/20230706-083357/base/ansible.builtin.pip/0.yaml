---
- name: Heuristic-based test playbook for ansible.builtin.pip module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Install a specific version of a Python package
      ansible.builtin.pip:
        name: setuptools
        version: "2.1.0"
        state: present

    - name: Upgrade a Python package to the latest version
      ansible.builtin.pip:
        name: django
        state: latest

    - name: Install a package using requirements file
      ansible.builtin.pip:
        requirements: "/path/to/requirements.txt"
        state: present

    - name: Uninstall a Python package
      ansible.builtin.pip:
        name: Flask
        state: absent

    - name: Install a package in editable mode
      ansible.builtin.pip:
        name: "/path/to/my_package/"
        state: present
        editable: yes

    - name: Install a package in a specific virtualenv
      ansible.builtin.pip:
        name: numpy
        state: present
        virtualenv: "/path/to/my_virtualenv"

    - name: Install a package in a virtualenv created with a different Python executable
      ansible.builtin.pip:
        name: pandas
        state: present
        virtualenv: "/path/to/another_virtualenv"
        virtualenv_python: python3.9

    - name: Install a package with extra arguments
      ansible.builtin.pip:
        name: cryptography
        state: present
        extra_args: "--no-cache-dir --use-deprecated=legacy-resolver"