- hosts: localhost
  gather_facts: no

  tasks:
    - name: Generate random MAC address
      set_fact:
        random_mac: "{{ '%02x' | format(item) }}"         
      loop: "{{ range(6) | map('random') | list }}"
    
    - name: Wake-on-LAN Magic Packet
      community.general.wakeonlan:
        broadcast: "{{ '255.255.255.255' }}"
        mac: "{{ random_mac }}"
        port: "{{ 9 }}"
      register: wakeonlan_result

    - name: Display Wake-on-LAN result
      debug:
        var: wakeonlan_result