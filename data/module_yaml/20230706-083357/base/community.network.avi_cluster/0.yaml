---
- name: Heuristic Test Playbook for community.network.avi_cluster
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test community.network.avi_cluster module
      community.network.avi_cluster:
        controller: "test_controller"
        api_context: 
          tenant: "test_tenant"
          password: "test_password"
        api_version: "18.2.3"
        avi_credentials: 
          password: "test_password"
          username: "test_username"
        name: "{{ var_name }}"
        nodes: 
          - name: "node1"
            ip: "192.168.0.1"
          - name: "node2"
            ip: "192.168.0.2"
        password: "test_password"
        rejoin_nodes_automatically: true
        state: present
        tenant: "test_tenant"
        username: "test_username"
        virtual_ip: "{{ var_ip }}"