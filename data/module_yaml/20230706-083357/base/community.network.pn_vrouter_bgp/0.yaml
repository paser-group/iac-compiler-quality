---
- name: Heuristic-based testing for community.network.pn_vrouter_bgp module
  hosts: localhost
  gather_facts: False

  vars:
    pn_vrouter_name: "myvrouter"
    pn_neighbor: "10.1.1.1"
    pn_remote_as: "65000"
    pn_cliswitch: "sWitCH"

  tasks:
    - name: Test pn_vrouter_bgp module
      community.network.pn_vrouter_bgp:
        vrouter_name: "{{ pn_vrouter_name }}"
        neighbor: "{{ pn_neighbor }}"
        remote_as: "{{ pn_remote_as }}"
        cliswitch: "{{ pn_cliswitch }}"
      register: result

    - name: Print result
      debug:
        var: result

    - name: Verify neighbor configuration
      community.network.pn_vrouter_bgp:
        vrouter_name: "{{ pn_vrouter_name }}"
        state: "present"
      register: verify_result

    - name: Print verification result
      debug:
        var: verify_result