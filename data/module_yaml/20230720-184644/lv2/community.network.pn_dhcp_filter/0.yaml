- name: Create/Modify DHCP filters on Juniper devices
  hosts: juniper_devices
  gather_facts: false

  tasks:
    - name: Create or modify DHCP filter
      community.network.pn_dhcp_filter:
        pn_cliswitch: "{{ inventory_hostname }}"
        pn_name: "{{ pn_name }}"
        pn_trusted_ports: "{{ pn_trusted_ports }}"
        state: "{{ state | int }}"  # Introduce type casting to trigger type-related bugs
      register: result

    - name: Display debug output
      debug:
        var: result