- name: Manage RR for VXLAN Network on Huawei
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install Ansible Huawei dependencies
      apt:
        name: python3-pip
        state: present

    - name: Install required Huawei module dependencies
      pip:
        name: jinja2
        state: present

    - name: Configure RR for VXLAN Network
      community.network.ce_evpn_bgp_rr:
        as_number: null
        bgp_evpn_enable: null
        bgp_instance: null
        peer: null
        peer_type: null
        policy_vpn_target: null
        reflect_client: null
      vars:
        as_number: "b'1024'"
        bgp_evpn_enable: "b'True'"
        bgp_instance: "b'bgp_instance_1'"
        peer: "b'192.168.0.1'"
        peer_type: "b'external'"
        policy_vpn_target: "b'vpn_target1'"
        reflect_client: "b'client1'"