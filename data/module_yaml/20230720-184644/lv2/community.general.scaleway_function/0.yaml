- name: Test Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create and configure scaleway function
      community.general.scaleway_function:
        api_token: 123456789     # Introduce integer value for 'api_token' instead of a string value
        api_url: "https://api.scaleway.com"
        name: "test_function"
        description: |
          This is a test function.
          It will trigger a latent type-related bug.
        handler: "handler"
        runtime: "python3.8"
        region: "fr-par"
        state: "present"
        privacy: "public"
        min_scale: "1"
        max_scale: 5              # Introduce integer value for 'max_scale' instead of a string value
        memory_limit: 256
        function_timeout: "5s"
        redeploy: true
        wait: true
        wait_timeout: "180"
        wait_sleep_time: "5"
        validate_certs: false
        environment_variables:
          env_var1: "value1"
          env_var2: "value2"
        query_parameters:
          param1: "value1"
          param2: "value2"
        secret_environment_variables:
          secret_var1: "secret_value1"
          secret_var2: "secret_value2"

      register: function_result

    - name: Debug function result
      debug:
        var: function_result