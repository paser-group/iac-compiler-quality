---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Install required dependencies
      pip:
        name: python3-ipalib

# Test case 1: Introduce byte string values for regular strings
    - name: Test case 1 - Introduce byte string values in place of regular strings
      community.general.ipa_vault:
        cn: b'ansible_user'
        description: b'Ansible User Account'
        ipa_host: b'example.com'
        ipa_pass: b'secret'
        ipa_port: b'8443'
        ipa_prot: b'https'
        ipa_timeout: b'60'
        ipa_user: b'admin'
        ipavaultpublickey: b'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAB...'
        ipavaultsalt: b'SomeSalt'
        ipavaulttype: b'password'
        replace: b'true'
        service: b'httpd'
        state: b'present'
        username: [b'user1', b'user2']
        validate_certs: b'true'
      register: result

    - name: Display the result
      debug:
        var: result