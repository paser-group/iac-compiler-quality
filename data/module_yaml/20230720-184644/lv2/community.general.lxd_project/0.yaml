- name: Test suite for 'community.general.lxd_project' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up LXD project
      community.general.lxd_project:
        name: "{{ item.name }}"
        description: "{{ item.description }}"
        url: "{{ item.url }}"
        snap_url: "{{ item.snap_url }}"
        client_cert: "{{ item.client_cert }}"
        client_key: "{{ item.client_key }}"
        config: "{{ item.config }}"
        state: "{{ item.state }}"
        trust_password: "{{ item.trust_password }}"
      loop:
        - name: Project1
          description: This is project 1
          url: http://lxd1.example.com
          snap_url: http://snap.example.com
          client_cert: /path/to/cert1.pem
          client_key: /path/to/key1.pem
          config:
            key1: value1
            key2: value2
          state: present
          trust_password: password1

        - name: Project2
          description: This is project 2
          url: http://lxd2.example.com
          snap_url: http://snap.example.com
          client_cert: /path/to/cert2.pem
          client_key: /path/to/key2.pem
          config:
            key1: value1
            key2: value2
          state: present
          trust_password: password2

    - name: Debug output
      debug:
        msg: "LXD project created: {{ item.name }}"
      loop:
        - name: Project1
        - name: Project2