---
- name: Rackspace Cloud Monitoring Check Playbook
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "your_rackspace_api_key"
    auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
    tenant_name: "your_tenant_name"
    region: "your_region"
    credentials: "/tmp/credentials_file"
    label: "your_check_label"
    entity_id: "your_entity_id"
    check_type: "remote.http"
    target_alias: "your_target_alias"
    target_hostname: "your_target_hostname"
    period: 60
    timeout: 30
    state: "present"
    validate_certs: True

  tasks:
    - name: Include the Rackspace Cloud Monitoring Check role
      import_role:
        name: community.general.rax_mon_check
      vars:
        rax_mon_check_api_key: "{{ api_key }}"
        rax_mon_check_auth_endpoint: "{{ auth_endpoint }}"
        rax_mon_check_tenant_name: "{{ tenant_name }}"
        rax_mon_check_region: "{{ region }}"
        rax_mon_check_credentials: "{{ credentials }}"
        rax_mon_check_label: "{{ label }}"
        rax_mon_check_entity_id: "{{ entity_id }}"
        rax_mon_check_check_type: "{{ check_type }}"
        rax_mon_check_metadata: '{"key1": "value1", "key2": b"value2"}'
        rax_mon_check_target_alias: "{{ target_alias }}"
        rax_mon_check_target_hostname: "{{ target_hostname }}"
        rax_mon_check_period: "{{ period }}"
        rax_mon_check_timeout: "{{ timeout }}"
        rax_mon_check_state: "{{ state }}"
        rax_mon_check_validate_certs: "{{ validate_certs }}"