---
- name: Test Heuristic - Introduce byte strings
  hosts: all
  gather_facts: false

  tasks:
    - name: Introduce byte strings
      set_fact:
        deploy: "{{ deploy | default('False') | string | to_json | b64encode }}"
        force: "{{ force | default('False') | string | to_json | b64encode }}"
        region: "{{ region | default('us-west-1') | string | to_json | b64encode }}"
        serverless_bin_path: "{{ serverless_bin_path | default('/usr/local/bin/serverless') | string | to_json | b64encode }}"
        service_path: "{{ service_path | string | to_json | b64encode }}"
        stage: "{{ stage | default('development') | string | to_json | b64encode }}"
        state: "{{ state | default('absent') | string | to_json | b64encode }}"
        verbose: "{{ verbose | default('False') | string | to_json | b64encode }}"

    - name: Decode byte strings
      set_fact:
        deploy_decoded: "{{ deploy | b64decode | from_json }}"
        force_decoded: "{{ force | b64decode | from_json }}"
        region_decoded: "{{ region | b64decode | from_json }}"
        serverless_bin_path_decoded: "{{ serverless_bin_path | b64decode | from_json }}"
        service_path_decoded: "{{ service_path | b64decode | from_json }}"
        stage_decoded: "{{ stage | b64decode | from_json }}"
        state_decoded: "{{ state | b64decode | from_json }}"
        verbose_decoded: "{{ verbose | b64decode | from_json }}"

    - name: Debug decoded variables
      debug:
        msg: "deploy: {{ deploy_decoded }}, force: {{ force_decoded }}, region: {{ region_decoded }}, serverless_bin_path: {{ serverless_bin_path_decoded }}, service_path: {{ service_path_decoded }}, stage: {{ stage_decoded }}, state: {{ state_decoded }}, verbose: {{ verbose_decoded }}"