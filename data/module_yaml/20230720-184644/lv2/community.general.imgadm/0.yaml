- name: Test Ansible latent type-related bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required dependencies
      pip:
        name: openzfs
        state: present

    - name: Test imgadm module
      community.general.imgadm:
        force: true
        pool: "mypool"
        source: "{{ lookup('pipe', 'echo -n \xff') }}"
        state: present
        type: "\xff"
        uuid: "12345678"
      register: result

    - name: Print result
      debug:
        var: result