- name: Test playbook for community.network.avi_cloudproperties module
  hosts: localhost
  gather_facts: false

  vars:
    api_credentials:
      username: admin
      password: password123
      controller: 10.1.1.1
      tenant: tenant1

  tasks:
    - name: Set avi_cloudproperties using byte string value
      community.network.avi_cloudproperties:
        avi_credentials: "{{ api_credentials }}"
        tenant_uuid: b'tenant1'                       # Introduce byte string
        url: b'/api/cloudproperty'
        state: present

    - name: Get existing avi_cloudproperties
      community.network.avi_cloudproperties:
        avi_credentials: "{{ api_credentials }}"
        state: facts
      register: existing_properties

    - name: Debug existing_properties
      debug:
        var: existing_properties