---
- name: Test playbook to unveil latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with byte string value in 'name' attribute
      community.general.pamd:
        name: !binary 'Y29tbW9uLWF1dGg='
        path: "/etc/pam.d/test"
        state: present
      register: result_byte_string_name

    - name: Print result of test with byte string value in 'name' attribute
      debug:
        var: result_byte_string_name

    - name: Test with byte string value in 'module_path' attribute
      community.general.pamd:
        name: "common-auth"
        module_path: !binary 'L2V0Yy9wYW0uZA=='
        path: "/etc/pam.d/test"
        state: present
      register: result_byte_string_module_path

    - name: Print result of test with byte string value in 'module_path' attribute
      debug:
        var: result_byte_string_module_path

    - name: Test with byte string value in 'path' attribute
      community.general.pamd:
        name: "common-auth"
        path: !binary 'L2V0Yy9wYW0uZC90ZXN0'
        state: present
      register: result_byte_string_path

    - name: Print result of test with byte string value in 'path' attribute
      debug:
        var: result_byte_string_path