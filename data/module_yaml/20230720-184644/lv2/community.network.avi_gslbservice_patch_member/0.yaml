- name: Test playbook for Ansible latent type-related bug exploration
  hosts: localhost
  gather_facts: false

  vars:
    ansible_python_interpreter: "{{ ansible_playbook_python }}"
    api_context:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"
      tenant: "{{ tenant }}"
      tenant_uuid: "{{ tenant_uuid }}"
    avi_credentials:
      username: "{{ username }}"
      password: "{{ password }}"
      tenant: "{{ tenant }}"
      tenant_uuid: "{{ tenant_uuid }}"
    gslb_service: sample_gslb_service
    gslb_site: sample_gslb_site
    member: sample_member
    gslb_patch_member_options:
      - host_ipaddr: b'10.1.1.1'
        hw_device_id: b'123'
        ignore_case: b'no'
        ip: b'10.1.1.2'
        mac_address: b'00:0c:29:6e:b8:14'
        owner: b'root'
        ratio: b'1'
        site_uuid: b'sample_site_uuid'
        uuid: b'sample_uuid'

  tasks:
    - name: Patch member with byte string values
      community.network.avi_gslbservice_patch_member:
        api_version: "17.1.1"
        avi_disable_session_cache_as_fact: no
        avi_credentials: "{{ avi_credentials }}"
        api_context: "{{ api_context }}"
        controller: "{{ controller }}"
        gslb_service: "{{ gslb_service }}"
        gslb_site: "{{ gslb_site }}"
        member: "{{ member }}"
        name: "{{ member }}"
        params: "{{ gslb_patch_member_options }}"
      register: result

    - name: Display result
      debug:
        var: result

    - name: Debug output
      debug:
        msg: "This is a debug message"