- name: Manage SELinux File Context
  hosts: localhost
  become: true

  tasks:
    - name: Set SELinux file context for a file
      community.general.sefcontext:
        target: /path/to/file.txt
        seuser: system_u
        setype: user_home_t
        state: present

    - name: Set SELinux file context for a directory
      community.general.sefcontext:
        target: /path/to/directory
        seuser: system_u
        setype: user_home_t
        state: present
        ftype: 'directory'

    - name: Set SELinux file context for a symbolic link
      community.general.sefcontext:
        target: /path/to/link
        seuser: system_u
        setype: user_home_t
        state: present
        ftype: 'link'

    - name: Remove SELinux file context for a file
      community.general.sefcontext:
        target: /path/to/file.txt
        state: absent

    - name: Test different selevel and substitute options
      community.general.sefcontext:
        target: /path/to/file.txt
        seuser: system_u
        setype: user_home_t
        state: present
        selevel: s0
        substitute: 'yes'

    - name: Test ignore_selinux_state option
      community.general.sefcontext:
        target: /path/to/file.txt
        seuser: system_u
        setype: user_home_t
        state: present
        ignore_selinux_state: true

    - name: Test reload option
      community.general.sefcontext:
        target: /path/to/file.txt
        seuser: system_u
        setype: user_home_t
        state: present
        reload: true