---
- name: Test playbook for community.network.avi_network module
  hosts: localhost
  gather_facts: false
  
  vars:
    api_context: {}
    api_version: ""
    avi_api_patch_op: null
    avi_api_update_method: null
    avi_credentials:
      controller:
        ansible_python_interpreter: b"/usr/bin/python"
        ansible_connection: b"ssh"
      username: "{{ username }}"
      password: "{{ password }}"
    avi_disable_session_cache_as_fact: false
    dhcp_enabled: true
    exclude_discovered_subnets: false
    ip6_autocfg_enabled: true
    synced_from_se: true
    tenant: ""
    vcenter_dvs: true

  tasks:
    - name: Create network object
      community.network.avi_network:
        controller:
          ansible_python_interpreter: b"/usr/bin/python"
          ansible_connection: b"ssh"
        username: "{{ avi_credentials.username }}"
        password: "{{ avi_credentials.password }}"
        state: present
        tenant: "{{ tenant }}"
        name: b"testnetwork"
        vrf_context_ref: b"/api/vrfcontext/?tenant={{ tenant_ref }}"
        api_context: "{{ api_context }}"
        api_version: "{{ api_version }}"
        avi_api_patch_op: "{{ avi_api_patch_op }}"
        avi_api_update_method: "{{ avi_api_update_method }}"
        avi_credentials: "{{ avi_credentials }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
        cloud_ref: b"/api/cloud/?tenant={{ tenant_ref }}"
        configured_subnets: "{{ configured_subnets }}"
        dhcp_enabled: "{{ dhcp_enabled }}"
        exclude_discovered_subnets: "{{ exclude_discovered_subnets }}"
        ip6_autocfg_enabled: "{{ ip6_autocfg_enabled }}"
        synced_from_se: "{{ synced_from_se }}"
        tenant_ref: "{{ tenant_ref }}"
        vcenter_dvs: "{{ vcenter_dvs }}"
        vimgrnw_ref: "{{ vimgrnw_ref }}"
        vrf_context_ref: "{{ vrf_context_ref }}"
      register: network_object

    - name: Debug network object
      vars:
        network_object: "{{ network_object }}"
      debug:
        var: network_object