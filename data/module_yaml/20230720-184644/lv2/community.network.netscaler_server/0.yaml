---
- name: Test playbook for community.network.netscaler_server module
  hosts: localhost
  gather_facts: false

  vars:
    nsip: "10.1.1.2"  # replace with actual NetScaler IP

  tasks:
    - name: Create a Netscaler Server
      community.network.netscaler_server:
        nsip: "{{ nsip }}"
        nitro_user: "admin"
        nitro_pass: "password"
        nitro_timeout: 5
        validate_certs: false
        state: present
        name: b"server1"
        ipaddress: b"10.1.1.10"
        disabled: false
        save_config: true
      register: result

    - name: Debug Netscaler Server creation result
      debug:
        var: result

    - name: Update a Netscaler Server
      community.network.netscaler_server:
        nsip: "{{ nsip }}"
        nitro_user: "admin"
        nitro_pass: "password"
        nitro_timeout: 5
        validate_certs: false
        state: present
        name: b"server1"
        ipaddress: b"10.1.1.20"
        disabled: true
        save_config: true
      register: result

    - name: Debug Netscaler Server update result
      debug:
        var: result