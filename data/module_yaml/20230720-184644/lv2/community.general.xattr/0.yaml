---
- name: Manage user-defined attributes using 'community.general.xattr' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set user-defined attribute with byte string value
      community.general.xattr:
        path: /path/to/file
        key: test_key
        value: b'byte_string_value'
        state: present

    - name: Get user-defined attribute
      community.general.xattr:
        path: /path/to/file
        key: test_key
        state: present
      register: xattr_result

    - name: Print user-defined attribute
      debug:
        var: xattr_result

    - name: Remove user-defined attribute
      community.general.xattr:
        path: /path/to/file
        key: test_key
        state: absent