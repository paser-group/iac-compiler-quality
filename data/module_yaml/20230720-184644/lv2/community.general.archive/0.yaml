---
- name: Create a compressed archive
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Compress directory
      community.general.archive:
        path: "/path/to/source"
        dest: "/path/to/archive.tar.gz"
        format: gz
      become: true
      become_user: root