- name: Manage IP interfaces on Linux nodes
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure IP interface
      community.network.ipadm_if:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
        temporary: "{{ item.temporary }}"
      loop:
        - name: eth0
          state: present
          temporary: true
        - name: eth1
          state: absent
          temporary: false
        - name: eth2
          state: present
          temporary: 1
        - name: eth3
          state: present
          temporary: "false"

    - name: Print IP interface configuration
      debug:
        msg: "{{ ansible_facts['ip_interfaces'] }}"

    - name: Print IP address of the interface
      debug:
        var: ansible_default_ipv4.address