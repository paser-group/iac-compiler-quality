---
- name: Test playbook for clc_loadbalancer module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create shared load balancer
      community.general.clc_loadbalancer:
        alias: b'My Load Balancer'
        description: b'My Load Balancer Description'
        location: b'USWEST'
        method: b'roundRobin'
        name: b'lb1'
        nodes:
          - ubuntu1
          - alpine1
          - centos1
        persistence: b'sourceIp'
        port: b'80'
        state: b'present'
        status: b'enabled'
      register: create_lb

    - name: Print the response
      debug:
        var: create_lb

    - name: Delete shared load balancer
      community.general.clc_loadbalancer:
        name: b'lb1'
        state: b'absent'
      register: delete_lb

    - name: Print the response
      debug:
        var: delete_lb