---
- hosts: localhost
  gather_facts: false
  vars:
    api_host: b'proxmox.example.com'
    api_user: b'admin@pve'
    api_password: b'secret'
    api_token_id: b'token_id'
    api_token_secret: b'token_secret'
    vmid: 100
    nic_name: b'eth0'
    nic_mac: b'AA:BB:CC:DD:EE:FF'
    nic_model: b'e1000'
    nic_bridge: b'vmbr0'
    nic_mtu: 1500
    nic_rate: 1000.0
    nic_link_down: true
    nic_firewall: false
    nic_queues: 2
    nic_state: b'present'
    nic_validate_certs: false

  tasks:
    - name: Manage NIC of Qemu VM
      community.general.proxmox_nic:
        api_host: "{{ api_host }}"
        api_user: "{{ api_user }}"
        api_password: "{{ api_password }}"
        api_token_id: "{{ api_token_id }}"
        api_token_secret: "{{ api_token_secret }}"
        vmid: "{{ vmid }}"
        name: "{{ nic_name }}"
        mac: "{{ nic_mac }}"
        model: "{{ nic_model }}"
        bridge: "{{ nic_bridge }}"
        mtu: "{{ nic_mtu }}"
        rate: "{{ nic_rate }}"
        link_down: "{{ nic_link_down }}"
        firewall: "{{ nic_firewall }}"
        queues: "{{ nic_queues }}"
        state: "{{ nic_state }}"
        validate_certs: "{{ nic_validate_certs }}"
      register: result
      
    - name: Print result
      debug:
        var: result