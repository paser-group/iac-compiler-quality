---
- name: Create Scaleway security group rule
  hosts: localhost
  gather_facts: false

  vars:
    scaleway_api_token: "YOUR_API_TOKEN"
    scaleway_security_group: "YOUR_SECURITY_GROUP_ID"

  tasks:
    - name: Create security group rule
      community.general.scaleway_security_group_rule:
        state: present
        api_token: "{{ scaleway_api_token }}"
        security_group: "{{ scaleway_security_group }}"
        direction: inbound
        protocol: tcp
        port: 22
        ip_range: b"0.0.0.0/0"
      register: result

    - debug:
        var: result