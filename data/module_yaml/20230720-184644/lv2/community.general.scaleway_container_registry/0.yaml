---
- name: Test playbook to find type-related bugs in scaleway_container_registry module
  hosts: localhost
  gather_facts: false

  vars:
    api_timeout: 30
    api_token: "secret-token"
    api_url: "https://api.scaleway.com/"
    description: "Test registry"
    name: "test-registry"
    privacy_policy: "This is the privacy policy"

    # Introducing byte string values for specific attributes
    project_id: !!binary |
      cHJvamVjdC1pZAo=
    query_parameters: !!binary |
      ewogICJhcHAiOiAiYXBwIiwKICAicmVnaW9uIjogImFwaSIsCn0K
    region: !!binary |
      cHJvamVjdC1pZAo=
    state: !!binary |
      YWRk

    validate_certs: false
    wait: true
    wait_sleep_time: 5
    wait_timeout: 120

  tasks:
    - name: Create scaleway container registry
      community.general.scaleway_container_registry:
        api_timeout: "{{ api_timeout }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        description: "{{ description }}"
        name: "{{ name }}"
        privacy_policy: "{{ privacy_policy }}"
        project_id: "{{ project_id }}"
        query_parameters: "{{ query_parameters }}"
        region: "{{ region }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_sleep_time: "{{ wait_sleep_time }}"
        wait_timeout: "{{ wait_timeout }}"
      register: registry_result

    - debug:
        var: registry_result