- name: Test Mattermost Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Send Mattermost Message with Byte String
      community.general.mattermost:
        api_key: "{{ ('ABCDEF1234567890' | encode(encoding='utf-8')) }}"
        channel: "{{ ('default' | encode(encoding='utf-8')) }}"
        text: "{{ ('This is a test message' | encode(encoding='utf-8')) }}"
      register: result

    - debug:
        var: result