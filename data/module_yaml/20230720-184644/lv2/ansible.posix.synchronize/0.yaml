- name: Sync files using ansible.posix.synchronize module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Sync files using default options
      synchronize:
        src: "{{ playbook_dir }}/files/"
        dest: "/tmp/{{ inventory_hostname }}/"
      register: sync_result
      
    - name: Debug sync_result
      debug:
        var: sync_result

    - name: Sync files using test cases
      synchronize:
        src: "{{ playbook_dir }}/files/"
        dest: "/tmp/{{ inventory_hostname }}/"
        archive: "true"
        checksum: "true"
        compress: "true"
        copy_links: "true"
        delay_updates: "true"
        delete: "true"
        dest_port: 22
        dirs: "true"
        existing_only: "true"
        group: "true"
        link_dest:
          - "/tmp/link1"
          - "/tmp/link2"
        links: "true"
        mode: "777"
        owner: "true"
        partial: "true"
        perms: "true"
        private_key: "/path/to/private_key"
        recursive: "true"
        rsync_opts:
          - "--option1"
          - "--option2"
        rsync_path: "/usr/bin/rsync"
        rsync_timeout: 300
        set_remote_user: "true"
        src: "{{ playbook_dir }}/files/"
        ssh_connection_multiplexing: "true"
        times: "true"
        use_ssh_args: "true"
        verify_host: "true"
      register: sync_result_custom
      
    - name: Debug sync_result_custom
      debug:
        var: sync_result_custom