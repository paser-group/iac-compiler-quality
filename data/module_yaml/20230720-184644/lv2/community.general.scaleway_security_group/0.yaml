---
- name: Test Ansible module for Scaleway Security Group
  hosts: localhost
  gather_facts: false

  vars:
    # Modify the variables to fit your needs
    api_token: "YOUR_API_TOKEN"
    organization: "YOUR_ORGANIZATION"
    region: "YOUR_REGION"

  tasks:
    - name: Create Scaleway Security Group
      community.general.scaleway_security_group:
        api_token: "{{ api_token | to_bytes }}"
        api_url: "https://api.scaleway.com"
        description: "Test Security Group"
        inbound_default_policy: "accept"
        name: "{{ 'TestSG' | to_bytes }}"
        organization: "{{ organization | to_bytes }}"
        organization_default: "yes"
        outbound_default_policy: "reject"
        query_parameters:
          vpc_id: "aaaa-bbbb-cccc-dddd"
        region: "{{ region | to_bytes }}"
        state: "present"
        stateful: "yes"
        validate_certs: "no"
      register: result

    - name: Debug result
      debug:
        var: result