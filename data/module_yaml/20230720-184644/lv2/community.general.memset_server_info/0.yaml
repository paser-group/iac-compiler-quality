---
- name: Test Memset Server Info Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general collection
      ansible.builtin.shell: ansible-galaxy collection install community.general
      
    - name: Set API Key variable for memset_server_info
      set_fact:
        api_key: "YOUR_API_KEY_HERE"

    - name: Test Memset Server Info Module
      community.general.memset_server_info:
        name: "{{ item.name }}"
        api_key: "{{ api_key }}"
      loop:
        - { name: "ubuntu1", ip_address: "10.1.1.1" }
        - { name: "alpine1", ip_address: "10.1.1.2" }
        - { name: "centos1", ip_address: "10.1.1.3" }
        - { name: "redhat1", ip_address: "10.1.1.4" }
        
      register: memset_server_info_result

    - name: Debug Memset Server Info Result
      ansible.builtin.debug:
        var: memset_server_info_result