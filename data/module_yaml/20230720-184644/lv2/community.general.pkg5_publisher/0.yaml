- name: Manage Solaris 11 Image Package
  hosts: solaris_nodes
  gather_facts: false
  
  tasks:
    - name: Install package publisher
      community.general.pkg5_publisher:
        name: "mypublisher"
        state: present
        sticky: true
        mirror:
          - "http://mirror1.example.com"
          - "http://mirror2.example.com"
          - "http://mirror3.example.com"
        origin:
          - "http://origin1.example.com"
          - "http://origin2.example.com"
        enabled: true
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

    - name: Remove package publisher
      community.general.pkg5_publisher:
        name: "mypublisher"
        state: absent
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result