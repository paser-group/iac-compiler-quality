---
- name: Test Ansible Latent Type-Related Bugs for homectl module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create user with byte string values
      community.general.homectl:
        name: "testuser"
        password: b"password"  # introducing byte string value
        email: b"testuser@example.com"  # introducing byte string value
        state: present

    - name: Validate user creation
      command: id testuser
      register: result
      ignore_errors: true

    - name: Print user creation status
      debug:
        var: result.stdout