---
- name: Test playbook for apt_repository module
  hosts: localhost
  become: yes

  tasks:
    - name: Add repository with byte string values
      ansible.builtin.apt_repository:
        repo: "{{ item.repo | to_bytes }}"
        state: present
      with_items:
        - repo: "{{ ('deb http://archive.ubuntu.com/ubuntu/ ' + ansible_distribution_release + ' main') | encode('utf-8') }}"
        - repo: "deb http://archive.ubuntu.com/ubuntu/{{ ansible_distribution_release }} main"