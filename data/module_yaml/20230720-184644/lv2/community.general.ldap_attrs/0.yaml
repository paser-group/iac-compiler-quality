---
- name: Test playbook for 'community.general.ldap_attrs' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add LDAP attributes
      community.general.ldap_attrs:
        state: present
        server_uri: ldap://localhost
        bind_dn: cn=admin,dc=example,dc=com
        bind_pw: admin
        dn: cn=user,dc=example,dc=com
        attributes:
          - name: description
            values:
              - "Regular String Value"
              - b"Byte String Value"
              - "Another Regular String Value"
      register: result

    - name: Print debug output
      debug:
        var: result

    - name: Remove LDAP attributes
      community.general.ldap_attrs:
        state: absent
        server_uri: ldap://localhost
        bind_dn: cn=admin,dc=example,dc=com
        bind_pw: admin
        dn: cn=user,dc=example,dc=com
        attributes:
          - name: description
            values:
              - "Regular String Value"
              - b"Byte String Value"
              - "Another Regular String Value"
      register: result

    - name: Print debug output
      debug:
        var: result