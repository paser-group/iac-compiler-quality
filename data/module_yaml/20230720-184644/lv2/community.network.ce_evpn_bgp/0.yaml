---
- name: Test playbook for latent type-related bug exploration
  hosts: localhost
  gather_facts: false

  vars:
    advertise_l2vpn_evpn: !binary |
      "dHJ1ZQ=="
    advertise_router_type: !binary |
      "dHJ1ZQ=="
    as_number: !binary |
      "MTIzNA=="
    bgp_instance: !binary |
      "Ymdl"
    peer_address: !binary |
      "MTAuMS4xLjI1NA=="
    peer_enable: !binary |
      "dHJ1ZQ=="
    peer_group_name: !binary |
      "cm91dGVy"
    state: !binary |
      "YWRk"
    vpn_name: !binary |
      "dnBu"

  tasks:
    - name: Configure BGP EVPN
      community.network.ce_evpn_bgp:
        advertise_l2vpn_evpn: "{{ advertise_l2vpn_evpn }}"
        advertise_router_type: "{{ advertise_router_type }}"
        as_number: "{{ as_number }}"
        bgp_instance: "{{ bgp_instance }}"
        peer_address: "{{ peer_address }}"
        peer_enable: "{{ peer_enable }}"
        peer_group_name: "{{ peer_group_name }}"
        state: "{{ state }}"
        vpn_name: "{{ vpn_name }}"

  handlers:
    - name: Print debug information
      debug:
        var: ansible_facts['community_network_ce_evpn_bgp']