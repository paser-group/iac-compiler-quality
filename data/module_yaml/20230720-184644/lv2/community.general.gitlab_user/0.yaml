---
- name: Test playbook for 'community.general.gitlab_user' module
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Install GitLab Python package
      pip:
        name: python-gitlab

    - name: Create GitLab user with byte string values
      gitlab_user:
        api_url: 'http://gitlab.example.com/api/v4/'
        api_token: b'TOKEN'           # Introduce byte string value here
        username: b'new_user'         # Introduce byte string value here
        email: b'new_user@example.com' # Introduce byte string value here
        password: b'pwd123456'        # Introduce byte string value here
        state: present

    - name: Update GitLab user with byte string values
      gitlab_user:
        api_url: 'http://gitlab.example.com/api/v4/'
        api_token: b'TOKEN'           # Introduce byte string value here
        username: b'existing_user'    # Introduce byte string value here
        email: b'updated_email@example.com' # Introduce byte string value here
        password: b'newpwd123456'     # Introduce byte string value here
        state: present

    - name: Delete GitLab user with byte string value
      gitlab_user:
        api_url: 'http://gitlab.example.com/api/v4/'
        api_token: b'TOKEN'           # Introduce byte string value here
        username: b'user_to_delete'   # Introduce byte string value here
        state: absent