- name: Test Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a virtual machine
      community.general.rhevm:
        state: present
        server: "https://{{ '10.1.1.1' }}"
        user: 12345
        password: 67890
        datacenter: "Default"
        cluster: "TestCluster"
        name: "TestVM"
        osver: "centos"
        type: "server"
        disks:
          - image: "/var/lib/images/{{ 'CentOS7.qcow2' }}"
            boot_order: [1]
        ifaces:
          - network: "/ovirtmgmt"
            boot_protocol: "dhcp"
        vmcpu: "2"
        vmmem: "4096"
        vm_ha: "true"
        insecure_api: "true"
        timeout: "10"
      delegate_to: localhost