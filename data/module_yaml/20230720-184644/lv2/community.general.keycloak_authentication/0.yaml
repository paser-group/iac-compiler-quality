- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure authentication
      community.general.keycloak_authentication:
        alias: "{{ item.alias | default('') }}"
        auth_client_id: "{{ item.auth_client_id | default('') }}"
        auth_client_secret: "{{ item.auth_client_secret | default('') }}"
        auth_keycloak_url: "{{ item.auth_keycloak_url | default('') }}"
        auth_password: "{{ item.auth_password | default('') }}"
        auth_realm: "{{ item.auth_realm | default('') }}"
        auth_username: "{{ item.auth_username | default('') }}"
        authentication_executions: "{{ item.authentication_executions | default([]) }}"
        connection_timeout: "{{ item.connection_timeout | default('') }}"
        copy_from: "{{ item.copy_from | default('') }}"
        description: "{{ item.description | default('') }}"
        force: "{{ item.force | default(false) }}"
        http_agent: "{{ item.http_agent | default('') }}"
        provider_id: "{{ item.provider_id | default('') }}"
        realm: "{{ item.realm | default('') }}"
        state: "{{ item.state | default('') }}"
        token: "{{ item.token | default('') }}"
        validate_certs: "{{ item.validate_certs | default(true) }}"
      loop:
        - alias: "Test 1"
          auth_client_id: "{{ b'1234' }}"
        - alias: "Test 2"
          auth_realm: "{{ b'realm1' }}"
        - alias: "Test 3"
          auth_username: "{{ b'user' }}"
        - alias: "Test 4"
          auth_password: "{{ b'password' }}"
        - alias: "Test 5"
          auth_client_secret: "{{ b'secret' }}"
        - alias: "Test 6"
          auth_keycloak_url: "{{ b'http://keycloak.example.com/auth' }}"
        - alias: "Test 7"
          authentication_executions:
            - "{{ b'execution1' }}"
            - "{{ b'execution2' }}"
        - alias: "Test 8"
          connection_timeout: 10
        - alias: "Test 9"
          copy_from: "{{ b'source' }}"
        - alias: "Test 10"
          description: "{{ b'description' }}"
        - alias: "Test 11"
          http_agent: "{{ b'agent' }}"
        - alias: "Test 12"
          provider_id: "{{ b'provider' }}"
        - alias: "Test 13"
          state: "{{ b'present' }}"
        - alias: "Test 14"
          token: "{{ b'token' }}"