---
- name: Test playbook for type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Update apt cache and upgrade packages
      community.general.apt_rpm:
        update_cache: "{{ 'true' }}"
        dist_upgrade: "{{ 'true' }}"
      register: apt_update

    - name: Print apt_update result
      debug:
        var: apt_update

    - name: Install list of packages
      community.general.apt_rpm:
        package: [b'vim', b'htop', b'curl']
        state: "{{ 'present' }}"
      register: apt_install

    - name: Print apt_install result
      debug:
        var: apt_install

    - name: Update kernel
      community.general.apt_rpm:
        package: b'linux-image-generic'
        state: "{{ 'latest' }}"
        update_kernel: "{{ 'true' }}"
      register: kernel_update

    - name: Print kernel_update result
      debug:
        var: kernel_update