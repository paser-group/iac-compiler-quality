---
- name: Run commands on Ruckus ICX device
  hosts: icx_devices
  gather_facts: false

  vars:
    commands:
      - !binary |-
        c2hvdzogdmVyc2lvbiA=   # Base64-encoded byte string value
      - "show interface"

  tasks:
    - name: Run commands
      community.network.icx_command:
        commands: "{{ commands }}"
        interval: "5"  # Introduce string value for interval option
        match: "^.*$"
        retries: "3"  # Introduce string value for retries option
        wait_for:
          - command: "show end"
            match: "^.*$"
            retries: "2"  # Introduce string value for retries option
            delay: "5"  # Introduce string value for delay option
        provider:
          username: "{{ inventory_hostname }}"   # Introduce string value for username option
          password: "{{ inventory_hostname }}"   # Introduce string value for password option

...

# Define inventory
[icx_devices]
icx1 ansible_host=10.1.1.100
icx2 ansible_host=10.1.1.101