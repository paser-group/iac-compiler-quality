---
- name: Test playbook for community.general.xfs_quota module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Set XFS Quota
      community.general.xfs_quota:
        mountpoint: /mnt
        name: /dev/sdb1
        state: set
        bhard: "1g"
        bsoft: "500m"
        ihard: 100
        isoft: 50
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

    - name: Test case 1 - Introduce byte string value for mountpoint
      community.general.xfs_quota:
        mountpoint: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          663932663337663131343139653265613138303132380a306330383939-
          6232
        name: /dev/sdb1
        state: set
        bhard: "1g"
        bsoft: "500m"
        ihard: 100
        isoft: 50
      register: result_case1
      ignore_errors: true

    - name: Debug result_case1
      debug:
        var: result_case1

    - name: Test case 2 - Introduce byte string value for bhard
      community.general.xfs_quota:
        mountpoint: /mnt
        name: /dev/sdb1
        state: set
        bhard: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          663932663337663131343139653265613138303132380a306330383939-
          6232
        bsoft: "500m"
        ihard: 100
        isoft: 50
      register: result_case2
      ignore_errors: true

    - name: Debug result_case2
      debug:
        var: result_case2

    - name: Test case 3 - Introduce byte string value for bsoft
      community.general.xfs_quota:
        mountpoint: /mnt
        name: /dev/sdb1
        state: set
        bhard: "1g"
        bsoft: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          663932663337663131343139653265613138303132380a306330383939-
          6232
        ihard: 100
        isoft: 50
      register: result_case3
      ignore_errors: true

    - name: Debug result_case3
      debug:
        var: result_case3

    - name: Test case 4 - Introduce byte string value for ihard
      community.general.xfs_quota:
        mountpoint: /mnt
        name: /dev/sdb1
        state: set
        bhard: "1g"
        bsoft: "500m"
        ihard: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          663932663337663131343139653265613138303132380a306330383939-
          6232
        isoft: 50
      register: result_case4
      ignore_errors: true

    - name: Debug result_case4
      debug:
        var: result_case4

    - name: Test case 5 - Introduce byte string value for isoft
      community.general.xfs_quota:
        mountpoint: /mnt
        name: /dev/sdb1
        state: set
        bhard: "1g"
        bsoft: "500m"
        ihard: 100
        isoft: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          663932663337663131343139653265613138303132380a306330383939-
          6232
      register: result_case5
      ignore_errors: true

    - name: Debug result_case5
      debug:
        var: result_case5