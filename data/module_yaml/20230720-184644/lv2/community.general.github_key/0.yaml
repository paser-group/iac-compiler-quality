---
- name: Test playbook for community.general.github_key module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure GitHub token
      set_fact:
        github_token: 'YOUR-GITHUB-TOKEN-HERE'

    - name: Generate keys
      community.general.github_key:
        name: 'test_key'
        pubkey: b'{{ "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDL2LftOZTGWI5njymXDDDK1zVq5G5EIRf72WQ2LPi9CS7sDJqj89khctmR9D3M8jt2KcHqLJhXNtsZJKhKSh0t317gWtCyXnF6pguTaHSwQwBuPMGRPsRwgKbMV8JetA1s1V6sELDbLKD/yb9bmhbQKbErt9rspA0bWsBZ3K1qunn3Oc685VIor0fDEDgrF3NRV8CoP8Xj/5SpM7QkiT0LViUM73IeMpGjVbF/kgMwhC1BT5shS1FbCdChGzJkjhoHDQ/ICW2ejijYf9K/pCf3+hKSOt++3UzdIN3iL8YRaPaO9i40a8HeXtYsyRzoL/ytYqAoGz1bKx2Ir/705 your-email@example.com" | list | join }}'
        state: present
        token: '{{ github_token }}'
        force: true
      register: key_result

    - name: Print key result
      debug:
        var: key_result