---
- name: Ansible Latent Bug Finder & Heuristic Test Playbook
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    - name: Override Debian package using dpkg_divert module
      community.general.dpkg_divert:
        divert: '{{ item.divert | b }}'
        force: '{{ item.force | bool }}'
        holder: '{{ item.holder | b }}'
        path: '{{ item.path | b }}'
        rename: '{{ item.rename | bool }}'
        state: '{{ item.state | b }}'
      with_items:
        - { divert: "/path/to/diverted-file", force: true, holder: "package-name", path: "/path/to/file", rename: true, state: "link" }
        - { divert: "b'/path/to/diverted-file'", force: false, holder: "package-name", path: "/path/to/file", rename: false, state: "b'link'" }
        - { divert: "b'/path/to/diverted-file'", force: 0, holder: "package-name", path: "/path/to/file", rename: 1, state: "link" }