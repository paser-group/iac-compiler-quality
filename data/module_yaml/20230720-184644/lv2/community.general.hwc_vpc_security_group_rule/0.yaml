---
- name: Test playbook for community.general.hwc_vpc_security_group_rule
  hosts: localhost
  gather_facts: false
  vars:
    description: "test security group rule"
    direction: "in"
    domain: "default"
    ethertype: "IPv4"
    id: "abcd1234"
    identity_endpoint: "https://identity.example.com"
    password: "secretpassword"
    port_range_max: 8080
    port_range_min: 8000
    project: "myproject"
    protocol: "TCP"
    region: "us-east-1"
    remote_group_id: "efgh5678"
    remote_ip_prefix: "10.0.0.0/24"
    security_group_id: "ijkl9012"
    state: present
    user: "myuser"

  tasks:
    - name: Create a Vpc/SecurityGroup rule
      community.general.hwc_vpc_security_group_rule:
        description: "{{ description.encode('utf-8') }}"
        direction: "{{ direction.encode('utf-8') }}"
        domain: "{{ domain.encode('utf-8') }}"
        ethertype: "{{ ethertype.encode('utf-8') }}"
        id: "{{ id.encode('utf-8') }}"
        identity_endpoint: "{{ identity_endpoint.encode('utf-8') }}"
        password: "{{ password.encode('utf-8') }}"
        port_range_max: "{{ port_range_max }}"
        port_range_min: "{{ port_range_min }}"
        project: "{{ project.encode('utf-8') }}"
        protocol: "{{ protocol.encode('utf-8') }}"
        region: "{{ region.encode('utf-8') }}"
        remote_group_id: "{{ remote_group_id.encode('utf-8') }}"
        remote_ip_prefix: "{{ remote_ip_prefix.encode('utf-8') }}"
        security_group_id: "{{ security_group_id.encode('utf-8') }}"
        state: "{{ state.encode('utf-8') }}"
        user: "{{ user.encode('utf-8') }}"
      register: result
      
    - name: Debug result
      debug:
        var: result