---
- name: Test Pritunl User Management
  hosts: localhost
  gather_facts: false
  vars:
    organization: "my-organization"
    pritunl_api_secret: "my-api-secret"
    pritunl_api_token: "my-api-token"
    pritunl_url: "https://my-pritunl-instance.com"
    user_disabled: true
    user_gravatar: false
    user_groups:
      - "group1"
      - "group2"
    user_mac_addresses:
      - "11:22:33:44:55:66"
      - "AA:BB:CC:DD:EE:FF"
    user_name: "my-user"
    user_type: "regular"
    validate_certs: false

  tasks:
    - name: Create User (String Value)
      community.general.pritunl_user:
        organization: "{{ organization }}"
        pritunl_api_secret: "{{ pritunl_api_secret }}"
        pritunl_api_token: "{{ pritunl_api_token }}"
        pritunl_url: "{{ pritunl_url }}"
        state: present
        user_disabled: "{{ user_disabled }}"
        user_email: "user@example.com"
        user_gravatar: "{{ user_gravatar }}"
        user_groups: "{{ user_groups }}"
        user_mac_addresses: "{{ user_mac_addresses }}"
        user_name: "{{ user_name }}"
        user_type: "regular"
        validate_certs: "{{ validate_certs }}"

    - name: Create User (Byte String Value)
      community.general.pritunl_user:
        organization: "{{ organization }}"
        pritunl_api_secret: "{{ pritunl_api_secret }}"
        pritunl_api_token: "{{ pritunl_api_token }}"
        pritunl_url: "{{ pritunl_url }}"
        state: present
        user_disabled: "{{ user_disabled }}"
        user_email: b"user@example.com"
        user_gravatar: "{{ user_gravatar }}"
        user_groups: "{{ user_groups }}"
        user_mac_addresses: "{{ user_mac_addresses }}"
        user_name: "{{ user_name }}"
        user_type: "regular"
        validate_certs: "{{ validate_certs }}"

    # Add more test cases here based on the heuristic

    - name: Debug Output
      debug:
        var: user_disabled