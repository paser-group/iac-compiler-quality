---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    pn_access: 'read'
    pn_audit_type: 'event'
    pn_cliswitch: 'audit'
    pn_pattern: 'pattern'
    pn_scope: 'global'
    state: 'present'

  tasks:
    - name: Introduce byte string values
      debug:
        msg: "{{ pn_access | b64encode() }}"

    - name: Execute pn_log_audit_exception module
      community.network.pn_log_audit_exception:
        pn_access: "{{ pn_access }}"
        pn_audit_type: "{{ pn_audit_type }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_pattern: "{{ pn_pattern }}"
        pn_scope: "{{ pn_scope }}"
        state: "{{ state }}"
      register: result

    - name: Display module output
      debug:
        var: result