---
- name: Test playbook for community.network.ce_netstream_export module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include the role for Huawei Netstream Export
      include_role:
        name: community.network.ce_netstream_export
        tasks_from: main

    - name: Test case 1 - Default options
      community.network.ce_netstream_export:
        as_option: null
        bgp_nexthop: null
        host_ip: null
        host_port: null
        host_vpn: null
        source_ip: null
        state: null
        type: null
        version: null

    - name: Test case 2 - Setting options and attributes
      community.network.ce_netstream_export:
        as_option: "{{ inventory_hostname }}"
        bgp_nexthop: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}"
        host_ip: "10.1.1.3"
        host_port: 5000
        host_vpn: "vpn1"
        source_ip: "10.1.1.1"
        state: present
        type: "type1"
        version: "v1"

    - name: Test case 3 - Introduce byte string values
      community.network.ce_netstream_export:
        as_option: b"option"
        bgp_nexthop: b"nexthop"
        host_ip: b"10.1.1.3"
        host_port: b"5000"
        host_vpn: b"vpn1"
        source_ip: b"10.1.1.1"
        state: b"present"
        type: b"type1"
        version: b"v1"

    - name: Test case 4 - Combination of regular strings and byte strings
      community.network.ce_netstream_export:
        as_option: "option"
        bgp_nexthop: b"nexthop"
        host_ip: "10.1.1.3"
        host_port: b"5000"
        host_vpn: "vpn1"
        source_ip: b"10.1.1.1"
        state: "present"
        type: b"type1"
        version: "v1"