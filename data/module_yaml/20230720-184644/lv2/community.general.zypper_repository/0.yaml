- name: Test playbook for 'community.general.zypper_repository' module bug hunt
  hosts: all
  gather_facts: false
  
  tasks:
    - name: Add repository with byte string name
      community.general.zypper_repository:
        name: !!binary "dWJ1bnR1MQ==" # "ubuntu1" encoded as byte string
        repo: "{{ repo_url }}"
        state: present
        description: "Test repository"
      vars:
        repo_url: "http://download.opensuse.org/repositories/home:/username:/repo/repo.repo"
        
    - name: Add repository with byte string description
      community.general.zypper_repository:
        name: "alpine1"
        repo: "{{ repo_url }}"
        state: present
        description: !!binary "dGVzdCByZXBvc2l0b3J5" # "Test repository" encoded as byte string
      vars:
        repo_url: "http://download.opensuse.org/repositories/home:/username:/repo/repo.repo"
        
    - name: Add repository with byte string for all string attributes
      community.general.zypper_repository:
        name: !!binary "Y2VudG9zMg==" # "centos2" encoded as byte string
        repo: !!binary "aHR0cDovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3J5L2hvbWU6dXNlcm5hbWU6cmVwby9yZXBvLnJlcG8=" # "http://download.opensuse.org/repositories/home:username:repo/repo.repo" encoded as byte string
        state: present
        description: !!binary "dGVzdCBkZXNjcmlwdGlvbg==" # "Test description" encoded as byte string
        priority: !!binary "NDE=" # 41 encoded as byte string
        enabled: !!binary "ZmFsc2U=" # False encoded as byte string
        autorefresh: !!binary "ZmFsc2U=" # False encoded as byte string
        runrefresh: !!binary "ZmFsc2U=" # False encoded as byte string
        disable_gpg_check: !!binary "ZmFsc2U=" # False encoded as byte string
        overwrite_multiple: !!binary "ZmFsc2U=" # False encoded as byte string
        auto_import_keys: !!binary "ZmFsc2U=" # False encoded as byte string
        
    - name: Remove repository
      community.general.zypper_repository:
        name: !!binary "cmVkaGF0MQ==" # "redhat1" encoded as byte string
        state: absent