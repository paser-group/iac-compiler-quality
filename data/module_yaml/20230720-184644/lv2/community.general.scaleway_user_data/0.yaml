---
- name: Test playbook for scaleway_user_data module
  hosts: localhost
  gather_facts: false

  vars:
    # Introduce byte string values in place of regular strings
    api_token: b'ABCDEFGHIJKLMN'
    region: b'par1'
    api_timeout: 60
    api_url: 'https://api.scaleway.com'
    query_parameters:
      - b'key1: value1'
      - b'key2: value2'
    server_id: b'12345678'
    user_data:
      script:
        - b'#!/bin/bash'
        - b'echo "Hello, Ansible!"'
    validate_certs: false

  tasks:
    - name: Execute scaleway_user_data module
      community.general.scaleway_user_data:
        api_token:  '{{ api_token }}'
        region: '{{ region }}'
        api_timeout: '{{ api_timeout }}'
        api_url: '{{ api_url }}'
        query_parameters: '{{ query_parameters }}'
        server_id: '{{ server_id }}'
        user_data: '{{ user_data }}'
        validate_certs: '{{ validate_certs }}'
      register: result

    - name: Display module output
      debug:
        var: result