- name: Test playbook for community.general.riak module
  hosts: localhost
  gather_facts: False
  tasks:
    - name: Include the community.general.riak module
      include_vars:
        file: community.general.riak.yml

    - name: Create a Riak cluster
      community.general.riak:
        command: "{{ riak_command }}"  # Introduce byte string for command
        config_dir: "{{ riak_config_dir }}"  # Introduce byte string for config_dir
        http_conn: "{{ riak_http_conn }}"  # Introduce byte string for http_conn
        target_node: "{{ riak_target_node }}"  # Introduce byte string for target_node
        validate_certs: "{{ riak_validate_certs }}"  # Introduce byte string for validate_certs
        wait_for_handoffs: "{{ riak_wait_for_handoffs | default(5) }}"
        wait_for_ring: "{{ riak_wait_for_ring | default(10) }}"  # Introduce byte string for wait_for_ring
        wait_for_service: "{{ riak_wait_for_service | default('start') }}"  # Introduce byte string for wait_for_service
      register: result