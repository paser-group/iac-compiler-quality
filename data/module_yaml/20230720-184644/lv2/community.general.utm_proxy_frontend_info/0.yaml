---
- name: Test playbook for community.general.utm_proxy_frontend_info
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create reverse proxy frontend
      community.general.utm_proxy_frontend_info:
        name: "frontend1"
        state: "present"
        utm_host: "10.1.1.1"
        utm_port: 8080
        utm_protocol: "http"
        utm_token: "TOKEN"
        validate_certs: false
        headers:
          Content-Type: "application/json"
      register: result
      loop:
        - { name: "frontend1", state: "present", utm_host: "10.1.1.1", utm_port: 8080, utm_protocol: "http", utm_token: b"TOKEN", validate_certs: false, headers: { Content-Type: b"application/json" } }

    - name: Display debug output
      debug:
        var: result

    - name: Update reverse proxy frontend
      community.general.utm_proxy_frontend_info:
        name: "frontend1"
        state: "present"
        utm_host: "10.1.1.2"
        utm_port: 8080
        utm_protocol: "https"
        utm_token: "TOKEN"
        validate_certs: true
        headers:
          Content-Type: "application/xml"
      register: result
      loop:
        - { name: "frontend1", state: "present", utm_host: "10.1.1.2", utm_port: 8080, utm_protocol: "https", utm_token: b"TOKEN", validate_certs: true, headers: { Content-Type: b"application/xml" } }

    - name: Display debug output
      debug:
        var: result

    - name: Destroy reverse proxy frontend
      community.general.utm_proxy_frontend_info:
        name: "frontend1"
        state: "absent"
        utm_host: "10.1.1.3"
        utm_port: 8080
        utm_protocol: "http"
        utm_token: "TOKEN"
        validate_certs: false
      register: result
      loop:
        - { name: "frontend1", state: "absent", utm_host: "10.1.1.3", utm_port: 8080, utm_protocol: "http", utm_token: b"TOKEN", validate_certs: false }

    - name: Display debug output
      debug:
        var: result