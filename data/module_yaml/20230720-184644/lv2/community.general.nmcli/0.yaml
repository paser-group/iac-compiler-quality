- name: Test playbook for 'community.general.nmcli'
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure network using nmcli
      community.general.nmcli:
        conn_name: "test-{{ item.conn_name }}"
        type: "{{ item.type }}"
        ip4: "{{ item.ip4 }}"
        ip6: "{{ item.ip6 }}"
        mac: "{{ item.mac | string }}"
        mtu: "{{ item.mtu | string }}"
        state: present
      with_items:
        - { conn_name: 'connection1', type: 'ethernet', ip4: ['192.168.1.10/24'], ip6: ['2001:db8::/64'], mac: b'aa:bb:cc:dd:ee:ff', mtu: b'1500' }
        - { conn_name: 'connection2', type: 'wifi', ip4: ['192.168.2.20/24'], ip6: ['2001:db8:1::/64'], mac: b'ff:ee:dd:cc:bb:aa', mtu: b'1400' }

    # Add more tasks for additional test cases