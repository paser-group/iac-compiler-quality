---
- name: Execute async task and check status
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Run async task
      command: "sleep 5 && echo 'Task completed'"
      async: 10
      poll: 0
      register: async_result

    - name: Wait for async task to complete
      async_status:
        jid: "{{ async_result.ansible_job_id }}"
        mode: json
      register: async_status

    - name: Display async task status
      debug:
        var: async_status

- name: Test cases
  hosts: localhost
  gather_facts: false

  tasks:
    # Test case: Introduce byte string value in mode
    - name: Introduce byte string value in mode
      async_status:
        jid: "{{ async_result.ansible_job_id }}"
        mode: !binary "anVzdGluZyBieXRlcw=="
      register: async_status_byte_string

    - name: Display async task status with byte string value
      debug:
        var: async_status_byte_string