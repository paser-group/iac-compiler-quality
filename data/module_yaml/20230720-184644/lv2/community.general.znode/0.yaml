---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create znode
      community.general.znode:
        hosts: "{{ hosts }}"
        name: "{{ name }}"
        op: "{{ op }}"
        value: "{{ value }}"
        auth_scheme: "{{ auth_scheme }}"
        auth_credential: "{{ auth_credential }}"
        timeout: "{{ timeout }}"
        use_tls: "{{ use_tls }}"
        recursive: "{{ recursive|string }}"

      vars:
        hosts: "localhost:2181"
        name: "/myznode"
        op: "create"
        value: 'Hello World'  # Potential byte string bug: change to b'Hello World'
        auth_scheme: 'digest'
        auth_credential: 'supersecret'
        timeout: 5
        use_tls: false
        recursive: true