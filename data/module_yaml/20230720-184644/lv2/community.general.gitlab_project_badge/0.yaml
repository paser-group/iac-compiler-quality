- hosts: localhost
  gather_facts: false
  tasks:
    - name: Install required collections
      command: ansible-galaxy collection install community.general

    - name: Create GitLab project badge
      community.general.gitlab_project_badge:
        api_url: "https://gitlab.example.com/api/v4"
        api_token: "your_api_token"
        project: "your_project"
        validate_certs: false
        api_job_token: b'your_api_job_token'
        api_oauth_token: b'your_api_oauth_token'
        api_password: b'your_api_password'
        api_username: b'your_api_username'
        image_url: b'your_image_url'
        link_url: b'your_link_url'
        state: "present"
      register: result

    - debug:
        var: result