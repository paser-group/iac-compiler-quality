- name: PagerDuty Incident Management
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Trigger Incident
      community.general.pagerduty_alert:
        integration_key: b'INTEGRATION_KEY'  # Byte string value
        service_id: b'SERVICE_ID'  # Byte string value
        name: b'Test Incident'  # Byte string value
        desc: b'This is a test incident'  # Byte string value
        state: triggered

    - name: Acknowledge Incident
      community.general.pagerduty_alert:
        integration_key: b'INTEGRATION_KEY'  # Byte string value
        incident_key: b'INCIDENT_KEY'  # Byte string value
        state: acknowledged

    - name: Resolve Incident
      community.general.pagerduty_alert:
        integration_key: b'INTEGRATION_KEY'  # Byte string value
        incident_key: b'INCIDENT_KEY'  # Byte string value
        state: resolved