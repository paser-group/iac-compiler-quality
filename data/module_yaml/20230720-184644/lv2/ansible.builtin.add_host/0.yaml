- name: Test Playbook
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Test add_host module with byte string name
      ansible.builtin.add_host:
        name: "{{ inventory_hostname | string }}"
        groups: |
          {%- set byte_string = b'group1' -%}
          [ {{ byte_string }} ]
          
    - name: Test add_host module with byte string group
      ansible.builtin.add_host:
        name: "test_host"
        groups: |
          {%- set byte_string = b'group2' -%}
          [ "{{ byte_string.decode() }}" ]

    - name: Debug added host
      debug:
        msg: "Added host: {{ hostvars[test_host] }}"