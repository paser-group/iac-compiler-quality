---
- name: Manage Link Aggregation Groups
  hosts: localhost
  gather_facts: false

  vars:
    aggregate: "{{ None }}"
    group: "{{ None }}"
    members: "{{ None }}"
    mode: "{{ None }}"
    purge: false
    state: "{{ None }}"

  tasks:
    - name: Create Link Aggregation Group
      community.network.cnos_linkagg:
        aggregate: "{{ aggregate | to_bytes }}"
        group: "{{ group | to_bytes }}"
        members: "{{ members | to_bytes }}"
        mode: "{{ mode | to_bytes }}"
        purge: "{{ purge }}"
        state: "{{ state | to_bytes }}"
      register: result
      ignore_errors: true

    - name: Display Result
      debug:
        var: result