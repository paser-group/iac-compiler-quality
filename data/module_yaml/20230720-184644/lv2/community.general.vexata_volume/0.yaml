---
- name: Test playbook for 'community.general.vexata_volume' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a volume with byte string value for name
      community.general.vexata_volume:
        name: "{{ '\x62\x79\x74\x65\x5f\x73\x74\x72\x69\x6e\x67' }}"
        size: 10GB
        password: "{{ 'VkVYQVRFVEFUQXV0b21hdGVk' | b64decode }}"
        state: present
        validate_certs: false
      register: result

    - name: Debug the result
      debug:
        var: result

    - name: Create a volume with byte string value for user
      community.general.vexata_volume:
        array: "{{ '\x76\x65\x78\x61\x74\x61' }}"
        user: "{{ '\x62\x79\x74\x65\x5f\x73\x74\x72\x69\x6e\x67' }}"
        size: 10GB
        password: "{{ 'VkVYQVRFVEFUQXV0b21hdGVk' | b64decode }}"
        state: present
        validate_certs: false
      register: result

    - name: Debug the result
      debug:
        var: result

    - name: Update a volume with byte string value for name
      community.general.vexata_volume:
        name: "{{ '\x62\x79\x74\x65\x5f\x73\x74\x72\x69\x6e\x67' }}"
        size: 20GB
        password: "{{ 'VkVYQVRFVEFUQXV0b21hdGVk' | b64decode }}"
        state: present
        validate_certs: false
      register: result

    - name: Debug the result
      debug:
        var: result

    - name: Delete a volume with byte string value for name
      community.general.vexata_volume:
        name: "{{ '\x62\x79\x74\x65\x5f\x73\x74\x72\x69\x6e\x67' }}"
        state: absent
        validate_certs: false
      register: result

    - name: Debug the result
      debug:
        var: result