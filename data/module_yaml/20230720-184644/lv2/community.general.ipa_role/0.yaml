---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false
  vars:
    - cn: 'Ansible Test'
    - description: 'Test group'
    - group: [b'test-group']
    - validate_certs: true

  tasks:
    - name: Include module with byte string values
      include_vars:
        file: "{{ playbook_dir }}/vars.yml"
        name: module_vars

    - name: Debug variables
      debug:
        var: module_vars

    - name: Run task with byte string values
      community.general.ipa_role:
        cn: "{{ cn }}"
        description: "{{ description }}"
        group: "{{ group }}"
        privilege: [b'read']
        validate_certs: "{{ validate_certs }}"