---
- name: Test playbook for 'community.general.ipa_dnszone' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create IPA DNS zone with byte string values
      community.general.ipa_dnszone:
        zone_name: "{{ item }}"
        state: present
        dynamicupdate: "{{ true | bool }}"
        allowsyncptr: "{{ true | bool }}"
        validate_certs: "{{ false | bool }}"
        ipa_host: "10.1.1.1"
        ipa_port: 443
        ipa_prot: "https"
        ipa_user: "admin"
        ipa_pass: "{{ 'password' | string | to_bytes }}"
        ipa_timeout: 10
      loop:
        - "{{ 'zone1' }}"
        - "{{ 'zone2' }}"

    - name: Delete IPA DNS zone with byte string values
      community.general.ipa_dnszone:
        zone_name: "{{ item }}"
        state: absent
        dynamicupdate: "{{ false | bool }}"
        allowsyncptr: "{{ false | bool }}"
        validate_certs: "{{ true | bool }}"
        ipa_host: "10.1.1.1"
        ipa_port: 443
        ipa_prot: "https"
        ipa_user: "admin"
        ipa_pass: "{{ 'password' | string | to_bytes }}"
        ipa_timeout: 10
      loop:
        - "{{ 'zone1' }}"
        - "{{ 'zone2' }}"