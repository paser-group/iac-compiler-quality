---
- name: Test playbook
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Unarchive file with byte string value
      ansible.builtin.unarchive:
        src: "{{ item.src }}"
        dest: "{{ item.dest }}"
        copy: "{{ item.copy }}"
        creates: "{{ item.creates }}"
        decrypt: "{{ item.decrypt }}"
        exclude: "{{ item.exclude }}"
        extra_opts: "{{ item.extra_opts }}"
        group: "{{ item.group }}"
        include: "{{ item.include }}"
        io_buffer_size: "{{ item.io_buffer_size }}"
        keep_newer: "{{ item.keep_newer }}"
        list_files: "{{ item.list_files }}"
        mode: "{{ item.mode }}"
        owner: "{{ item.owner }}"
        remote_src: "{{ item.remote_src }}"
        selevel: "{{ item.selevel }}"
        serole: "{{ item.serole }}"
        setype: "{{ item.setype }}"
        seuser: "{{ item.seuser }}"
        unsafe_writes: "{{ item.unsafe_writes }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - src: /path/to/archive1.tar.gz
          dest: /path/to/destination1/
          copy: yes
          creates: /path/to/destination1/index.html
          decrypt: no
          exclude: ".git"
          extra_opts:
            - "--exclude=*.txt"
          group: users
          include:
            - "*.txt"
          io_buffer_size: 8192
          keep_newer: yes
          list_files: yes
          mode: "0755"
          owner: ansible_user
          remote_src: no
          selevel: "s0"
          serole: object_r
          setype: public_content_t
          seuser: system_u
          unsafe_writes: yes
          validate_certs: yes

        - src: /path/to/archive2.tar.gz
          dest: /path/to/destination2/
          copy: yes
          creates: /path/to/destination2/index.html
          decrypt: no
          exclude:
            - ".git"
            - ".idea"
          extra_opts:
            - "--exclude=*.txt"
            - "--exclude=*.log"
          group: users
          include:
            - "*.txt"
            - "*.log"
          io_buffer_size: 8192
          keep_newer: yes
          list_files: yes
          mode: "0755"
          owner: ansible_user
          remote_src: no
          selevel: "s0"
          serole: object_r
          setype: public_content_t
          seuser: system_u
          unsafe_writes: yes
          validate_certs: yes