---
- name: Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false

  vars:
    agentport: 161
    community: public
    device: '{"name": "device1", "address": "10.1.1.1", "create": true}'
    landscape: '{"id": 1}'
    state: present
    url: "https://spectrum.server.com"
    url_password: "my_pass"
    url_username: "my_user"
    use_proxy: false
    validate_certs: false

  tasks:
    - name: Create and delete device using 'community.general.spectrum_device' module
      community.general.spectrum_device:
        agentport: "{{ agentport }}"
        community: "{{ community }}"
        device: "{{ device }}"
        landscape: "{{ landscape }}"
        state: "{{ state }}"
        url: "{{ url }}"
        url_password: "{{ url_password }}"
        url_username: "{{ url_username }}"
        use_proxy: "{{ use_proxy }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Print module result
      debug:
        var: result