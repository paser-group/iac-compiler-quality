---
- name: Test rax_mon_entity module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create Rackspace monitoring entity
      community.general.rax_mon_entity:
        label: b"Test Entity"
        state: present
        metadata:
          key1: b"value1"
          key2: b"value2"
        region: b"us-east"
        api_key: b"api_key_value"
        username: b"username_value"
        identity_type: b"rackspace_apikey"
        validate_certs: False
      register: result_create

    - name: Print create result
      debug:
        var: result_create

    - name: Update Rackspace monitoring entity
      community.general.rax_mon_entity:
        label: b"Test Entity"
        state: present
        metadata:
          key1: b"value1"
          key2: b"value2"
        region: b"us-east"
        api_key: b"api_key_value"
        username: b"username_value"
        identity_type: b"rackspace_apikey"
        validate_certs: False
      register: result_update

    - name: Print update result
      debug:
        var: result_update

    - name: Delete Rackspace monitoring entity
      community.general.rax_mon_entity:
        label: b"Test Entity"
        state: absent
        region: b"us-east"
        api_key: b"api_key_value"
        username: b"username_value"
        identity_type: b"rackspace_apikey"
        validate_certs: False
      register: result_delete

    - name: Print delete result
      debug:
        var: result_delete