---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Management Group
      community.general.manageiq_group:
        manageiq_connection:
          url: "https://{{ inventory_hostname }}"
          username: "admin"
          password: "password"
        state: "present"
        name: b"Managers"
        description: b"Group for management team"
        tenant: b"Default"
        tenant_id: 1
        role: b"Manager"
        role_id: 2
        belongsto_filters:
          - attr: b"attribute1"
            op: b"="
            value: b"value1"
          - attr: b"attribute2"
            op: b"="
            value: b"value2"
        belongsto_filters_merge_mode: b"union"
        managed_filters:
          - attr: b"attribute3"
            op: b"="
            value: b"value3"
        managed_filters_merge_mode: b"intersection"
      register: result

    - name: Debug Result
      debug:
        var: result