---
- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Management Group
      community.general.manageiq_group:
        manageiq_connection:
          url: "https://{{ inventory_hostname }}"
          username: "admin"
          password: "password"
        state: "present"
        name: "Managers"
        description: "Group for management team"
        tenant: "Default"
        tenant_id: 1
        role: "Manager"
        role_id: 2
        belongsto_filters:
          - attr: "attribute1"
            op: "="
            value: "value1"
          - attr: "attribute2"
            op: "="
            value: "value2"
        belongsto_filters_merge_mode: "union"
        managed_filters:
          - attr: "attribute3"
            op: "="
            value: "value3"
        managed_filters_merge_mode: "intersection"
      register: result

    - name: Debug Result
      debug:
        var: result