---
- name: Test playbook
  hosts: localhost
  gather_facts: False

  vars:
    organization: "myorg"
    pritunl_api_secret: "mysecret"
    pritunl_api_token: "mytoken"
    pritunl_url: "https://pritunl.example.com"
    user_name: "testuser"
    user_type: "regular"
    validate_certs: True

  tasks:
    - name: List Pritunl Users
      community.general.pritunl_user_info:
        organization: "{{ organization | to_bytes }}"
        pritunl_api_secret: "{{ pritunl_api_secret | to_bytes }}"
        pritunl_api_token: "{{ pritunl_api_token | to_bytes }}"
        pritunl_url: "{{ pritunl_url | to_bytes }}"
        user_name: "{{ user_name | to_bytes }}"
        user_type: "{{ user_type | to_bytes }}"
        validate_certs: "{{ validate_certs }}"
      register: pritunl_users

    - name: Print Pritunl Users
      debug:
        var: pritunl_users