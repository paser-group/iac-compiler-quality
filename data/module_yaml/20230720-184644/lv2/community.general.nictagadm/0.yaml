---
- name: Manage nic tags on nodes
  hosts: all
  gather_facts: false

  tasks:
    - name: Create NIC tag
      community.general.nictagadm:
        name: b'nic-tag-1'  # Byte string value
        state: present
      register: result
      when: inventory_hostname in groups['ubuntu1']

    - name: Change NIC tag properties
      community.general.nictagadm:
        name: b'nic-tag-1'  # Byte string value
        mtu: b'1500'  # Byte string value
        mac: b'00:11:22:33:44:55'  # Byte string value
        state: present
      register: result
      when: inventory_hostname in groups['alpine1']

    - name: Delete NIC tag
      community.general.nictagadm:
        name: b'nic-tag-1'  # Byte string value
        state: absent
      register: result
      when: inventory_hostname in groups['centos1']

    - name: Enable/disable NIC tag
      community.general.nictagadm:
        name: b'nic-tag-1'  # Byte string value
        etherstub: true
        state: present
      register: result
      when: inventory_hostname in groups['redhat1']