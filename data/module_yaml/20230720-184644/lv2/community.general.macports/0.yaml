---
- name: Test playbook for Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install MacPorts packages
      community.general.macports:
        name: ["bzip2"]
        selfupdate: yes
        state: present
        upgrade: no
        variant: universal

      # Heuristic test case: Introduce byte string values in place of regular strings
      vars:
        name: !binary | 
          YnppcDI=
        selfupdate: !binary | 
          bm8=
        state: !binary | 
          bGlzdA==
        upgrade: !binary | 
          eWVz
        variant: !binary | 
          dW5pdGVk

      when: False