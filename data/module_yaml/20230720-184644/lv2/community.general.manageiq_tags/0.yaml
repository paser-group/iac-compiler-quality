---
- name: Test playbook for Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Manage IQ Tags - Create tag
      community.general.manageiq_tags:
        manageiq_connection:
          url: "https://manageiq.example.com"
          username: "admin"
          password: "password"
          verify_ssl: false
        resource_id: 1
        resource_name: "resource"
        resource_type: "vm"
        state: "present"
        tags: "{{ ['tag1', 'tag2', !!python/bytes 'tag3'] }}"

    - name: Manage IQ Tags - Update tag
      community.general.manageiq_tags:
        manageiq_connection:
          url: "https://manageiq.example.com"
          username: "admin"
          password: "password"
          verify_ssl: false
        resource_id: 1
        resource_name: "resource"
        resource_type: "vm"
        state: "present"
        tags: "{{ ['tag4', !!python/bytes 'tag5'] }}"