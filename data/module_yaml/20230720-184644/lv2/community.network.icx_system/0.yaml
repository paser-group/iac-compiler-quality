---
- name: Test playbook for community.network.icx_system module
  hosts: localhost
  gather_facts: no

  tasks:
    - name: Set system attributes
      community.network.icx_system:
        aaa_servers: "{{ ['10.1.1.1', '10.1.1.2', '10.1.1.3'] | map('b64encode') | list }}"
        check_running_config: yes
        domain_name: "{{ ['example.com'] | map('b64encode') | list }}"
        domain_search: "{{ ['domain1.com', 'domain2.com'] | map('b64encode') | list }}"
        hostname: "{{ 'ruckus.icx.1' | b64encode }}"
        name_servers: "{{ ['8.8.8.8', '8.8.4.4'] | map('b64encode') | list }}"
        state: present
      register: result

    - debug:
        var: result