---
- name: Test playbook for community.general.utm_proxy_auth_profile
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create UTM Proxy Auth Profile
      community.general.utm_proxy_auth_profile:
        name: "profile1"
        aaa: ["user1"]
        backend_mode: "http"
        backend_strip_basic_auth: false
        backend_user_prefix: "prefix"
        backend_user_suffix: "suffix"
        basic_prompt: "passw0rd"
        comment: "This is a test profile"
        frontend_cookie: "cookie"
        frontend_cookie_secret: "secret"
        frontend_form: "form_field"
        frontend_form_template: "template"
        frontend_login: "login.html"
        frontend_logout: "logout.html"
        frontend_mode: "form"
        frontend_realm: "realm"
        frontend_session_allow_persistency: true
        frontend_session_lifetime: 100
        frontend_session_lifetime_limited: true
        frontend_session_lifetime_scope: "scope"
        frontend_session_timeout: 200
        frontend_session_timeout_enabled: true
        frontend_session_timeout_scope: "scope"
        headers:
          X-Header1: "value1"
          X-Header2: "value2"
        logout_delegation_urls: []
        logout_mode: "blank"
        redirect_to_requested_url: true
        state: "present"
        utm_host: "10.1.1.1"
        utm_port: 8080
        utm_protocol: "https"
        utm_token: "token"
        validate_certs: true
      register: result
      ignore_errors: true

    - name: Debug module output
      debug:
        var: result