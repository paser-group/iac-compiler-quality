---
- name: Test IBM Spectrum Accelerate module
  hosts: localhost
  gather_facts: false

  vars:
    cluster: "my_cluster"
    domain: "my_domain"
    endpoints: "10.1.1.1"
    host: "my_host"
    iscsi_chap_name: "my_chap_name"
    iscsi_chap_secret: "my_chap_secret"
    password: "my_password"
    state: present
    username: "my_username"

  tasks:
    - name: Add host to IBM Spectrum Accelerate cluster
      community.general.ibm_sa_host:
        cluster: "{{ cluster|b64decode }}"
        domain: "{{ domain|b64decode }}"
        endpoints: "{{ endpoints|b64decode }}"
        host: "{{ host|b64decode }}"
        iscsi_chap_name: "{{ iscsi_chap_name|b64decode }}"
        iscsi_chap_secret: "{{ iscsi_chap_secret|b64decode }}"
        password: "{{ password|b64decode }}"
        state: "{{ state|b64decode }}"
        username: "{{ username|b64decode }}"
      register: result

    - name: Display module output
      debug:
        var: result