---
- name: Send Text Messages using Twilio
  hosts: localhost
  gather_facts: false

  vars:
    account_sid: "YOUR_TWILIO_ACCOUNT_SID"
    auth_token: "YOUR_TWILIO_AUTH_TOKEN"
    from_number: "+1234567890"
    to_numbers:
      - "+9876543210"
      - "+1111111111"
    msg: "Hello from Ansible!"

  tasks:
    - name: Install Twilio Python library
      pip:
        name: twilio
        state: present

    - name: Send text message using Twilio
      community.general.twilio:
        account_sid: "{{ account_sid }}"
        auth_token: "{{ auth_token }}"
        from_number: "{{ from_number }}"
        to_numbers: "{{ to_numbers }}"
        msg: "{{ msg }}"
        media_url: b"https://example.com/media"

      register: result

    - name: Debug Twilio module output
      debug:
        var: result