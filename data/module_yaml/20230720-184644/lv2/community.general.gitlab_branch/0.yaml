- name: Unveil latent type-related bugs in community.general.gitlab_branch module
  hosts: localhost
  gather_facts: false

  vars:
    api_job_token: b'JOB_TOKEN'
    api_oauth_token: b'OAUTH_TOKEN'
    api_password: b'PASSWORD'
    api_token: b'TOKEN'
    api_url: b'https://gitlab.example.com/api/v4'
    api_username: b'USERNAME'
    branch: b'new-branch'
    project: b'my-project'
    ref_branch: b'main'
    state: b'present'
    validate_certs: false

  tasks:
    - name: Create GitLab branch
      community.general.gitlab_branch:
        api_job_token: "{{ api_job_token }}"
        api_oauth_token: "{{ api_oauth_token }}"
        api_password: "{{ api_password }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        branch: "{{ branch }}"
        project: "{{ project }}"
        ref_branch: "{{ ref_branch }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"