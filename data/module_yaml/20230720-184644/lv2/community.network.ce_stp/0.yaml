- name: Test Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure STP
      community.network.ce_stp:
        bpdu_filter: b'enabled'     # Introducing byte string value for bpdu_filter
        bpdu_protection: b'enabled' # Introducing byte string value for bpdu_protection
        cost: b'100'                # Introducing byte string value for cost
        edged_port: b'yes'          # Introducing byte string value for edged_port
        interface: b'eth0'          # Introducing byte string value for interface
        loop_protection: b'yes'     # Introducing byte string value for loop_protection
        root_protection: b'yes'     # Introducing byte string value for root_protection
        state: b'present'           # Introducing byte string value for state
        stp_converge: b'enabled'    # Introducing byte string value for stp_converge
        stp_enable: b'yes'          # Introducing byte string value for stp_enable
        stp_mode: b'mstp'           # Introducing byte string value for stp_mode
        tc_protection: b'enabled'   # Introducing byte string value for tc_protection
        tc_protection_interval: b'10'   # Introducing byte string value for tc_protection_interval
        tc_protection_threshold: b'20'  # Introducing byte string value for tc_protection_threshold
      register: result

    - name: Display result
      debug:
        var: result