- name: Test playbook for 'community.general.cloudflare_dns' module
  hosts: localhost
  gather_facts: false

  vars:
    # Specify the Cloudflare DNS options
    account_api_key: "API_KEY"
    account_email: "test@example.com"
    zone: "example.com"
    record: "test"
    type: "A"
    value: "127.0.0.1"
    proxied: false

    # Heuristic: Introduce byte string values in place of regular strings
    byte_string_value: "{{ value | to_bytes }}"

  tasks:
    - name: Add DNS record with byte string value
      community.general.cloudflare_dns:
        account_api_key: "{{ account_api_key }}"
        account_email: "{{ account_email }}"
        zone: "{{ zone }}"
        record: "{{ record }}"
        type: "{{ type }}"
        value: "{{ byte_string_value }}"
        proxied: "{{ proxied }}"
      register: result
      when: byte_string_value is defined

    - name: Display playbook output
      debug:
        var: result