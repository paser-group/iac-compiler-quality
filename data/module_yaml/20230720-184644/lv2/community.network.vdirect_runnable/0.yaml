- name: Run vDirect templates and workflow actions
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Introduce byte string values
      vars:
        action_name: "run_template"
        parameters:
          - name: "template_name"
            value: "template_value"
        runnable_name: "{{ 'workflow_name' | b64decode }}"
        runnable_type: "{{ 'workflow' | b64decode }}"
        validate_certs: no
        vdirect_http_port: "{{ 8080 | b64encode }}"
        vdirect_https_port: "{{ 8443 | b64encode }}"
        vdirect_ip: "{{ '10.1.1.100' | b64decode }}"
        vdirect_password: "{{ 'password' | b64decode }}"
        vdirect_secondary_ip: "{{ '10.1.1.254' | b64decode }}"
        vdirect_timeout: "{{ 600 | b64encode }}"
        vdirect_use_ssl: true
        vdirect_user: "{{ 'admin' | b64decode }}"
        vdirect_wait: true

      community.network.vdirect_runnable:
        action_name: "{{ action_name }}"
        parameters: "{{ parameters }}"
        runnable_name: "{{ runnable_name }}"
        runnable_type: "{{ runnable_type }}"
        validate_certs: "{{ validate_certs }}"
        vdirect_http_port: "{{ vdirect_http_port }}"
        vdirect_https_port: "{{ vdirect_https_port }}"
        vdirect_ip: "{{ vdirect_ip }}"
        vdirect_password: "{{ vdirect_password }}"
        vdirect_secondary_ip: "{{ vdirect_secondary_ip }}"
        vdirect_timeout: "{{ vdirect_timeout }}"
        vdirect_use_ssl: "{{ vdirect_use_ssl }}"
        vdirect_user: "{{ vdirect_user }}"
        vdirect_wait: "{{ vdirect_wait }}"