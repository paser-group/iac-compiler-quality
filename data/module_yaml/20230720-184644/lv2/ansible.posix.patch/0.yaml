---
- name: Apply patch with ansible.posix.patch
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    - name: Apply patch
      ansible.posix.patch:
        dest: "{{ '/tmp/' + variable }}"
        src: /path/to/patch_file.patch
        state: present
      register: patch_result

    - name: Show patch result
      debug:
        var: patch_result