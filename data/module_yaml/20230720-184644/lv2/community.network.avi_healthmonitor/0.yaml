---
- name: Test playbook for avi_healthmonitor module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a health monitor with byte string value for controller
      community.network.avi_healthmonitor:
        controller: !!binary |
          aHR0cHM6Ly9jb250cm9sbGVyLXZpcmdpbi0xMS5jc3Zlci5pbi9hdXRoL3NlY3JldHM/Y29udHJvbGxlcklEOjEyMzQ1
        name: test-monitor
        tenant: default
      register: result

    - name: Debug health monitor creation result
      debug:
        var: result

    - name: Create a health monitor with byte string value for username
      community.network.avi_healthmonitor:
        controller: 'https://controller-11.csvr.in/auth/services?controllerId=12345'
        username: !!binary |
          dGVzdC1hcGk=
        password: password
        name: test-monitor
        tenant: default
      register: result

    - name: Debug health monitor creation result
      debug:
        var: result