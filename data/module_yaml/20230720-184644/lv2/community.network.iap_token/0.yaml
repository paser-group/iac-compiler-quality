- name: Test playbook for 'community.network.iap_token' module
  hosts: localhost
  gather_facts: false

  vars:
    iap_fqdn: "example.com"
    iap_port: 443
    username: "admin"
    password: "password"
    validate_certs: false

  tasks:
    - name: Generate token with byte string for 'iap_fqdn'
      community.network.iap_token:
        iap_fqdn: !!binary "ZXhhbXBsZS5jb20="
        iap_port: "{{ iap_port }}"
        username: "{{ username }}"
        password: "{{ password }}"
        validate_certs: "{{ validate_certs }}"
      register: token_result

    - name: Display token result
      debug:
        var: token_result