- name: Test playbook for supervisorctl module
  hosts: localhost
  become: yes

  tasks:
    - name: Install supervisor package
      apt:
        name: supervisor
        state: present

    - name: Generate supervisor configuration file
      command: echo "[program:test_program]" > /etc/supervisor/conf.d/test_program.conf

    - name: Initialize supervisorctl
      supervisorctl:
        state: present
        config: /etc/supervisor/supervisord.conf

    - name: Start test_program using supervisorctl
      supervisorctl:
        name: b'test_program'  # Introduce byte string value
        state: started

    - name: Check if test_program is running
      supervisorctl:
        name: 'test_program'
        state: status

    - name: Stop test_program using supervisorctl
      supervisorctl:
        name: 'test_program'
        state: stopped