---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Network Security Policy
      community.network.avi_networksecuritypolicy:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "byte_string_policy"
        tenant_uuid: "{{ tenant_uuid }}"
        api_version: "17.1.1"
        rules:
          - name: b"%s" % b"rule1"
            action: ALLOW
            enable: true
            log_enabled: true
            match:
              - protocol: "HTTP"
                status_code: "200"
            attachments:
              - name: b"%s" % b"attachment1"
                ports:
                  - protocol: "TCP"
                    port: 8080
      register: result

    - name: Debug Response
      debug:
        var: result