- name: Test playbook for the community.general.gunicorn module
  hosts: localhost
  gather_facts: false
  vars:
    app_name: !!binary |-
      b'myapp'
    chdir_path: !!binary |-
      b'/path/to/myapp'
    config_path: !!binary |-
      b'/etc/gunicorn'
    pid_path: !!binary |-
      b'/var/run/gunicorn.pid'
    user_name: !!binary |-
      b'myuser'
    venv_path: !!binary |-
      b'/path/to/venv'
    worker_type: !!binary |-
      b'sync'

  tasks:
    - name: Start gunicorn
      community.general.gunicorn:
        app: "{{ app_name }}"
        chdir: "{{ chdir_path }}"
        config: "{{ config_path }}"
        pid: "{{ pid_path }}"
        user: "{{ user_name }}"
        venv: "{{ venv_path }}"
        worker: "{{ worker_type }}"
      register: gunicorn_result

  - name: Debug gunicorn output
    debug:
      var: gunicorn_result