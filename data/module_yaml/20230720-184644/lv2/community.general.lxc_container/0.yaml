- name: Test Playbook for community.general.lxc_container
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Install community.general collection
      ansible.builtin.shell: ansible-galaxy collection install community.general

    - name: Create LXC container with different Linux distributions
      community.general.lxc_container:
        name: "{{ item.name }}"
        state: present
        template: "{{ item.template }}"
        template_options: "{{ item.template_options }}"
      loop:
        - { name: 'ubuntu1', template: 'ubuntu', template_options: '--release xenial' }
        - { name: 'alpine1', template: 'alpine' }
        - { name: 'centos1', template: 'centos', template_options: '--release 7' }
        - { name: 'redhat1', template: 'redhat' }
    
    - name: Test case 1 - Introduce byte string values in place of regular strings
      community.general.lxc_container:
        name: b"ubuntu1".decode()
        state: present
        template: b"ubuntu".decode()
        template_options: b"--release xenial".decode()
      become: true

    - name: Test case 2 - Introduce byte string values in place of regular strings
      community.general.lxc_container:
        name: b"alpine1".decode()
        state: present
        template: b"alpine".decode()
      become: true

    - name: Test case 3 - Introduce byte string values in place of regular strings
      community.general.lxc_container:
        name: b"centos1".decode()
        state: present
        template: b"centos".decode()
        template_options: b"--release 7".decode()
      become: true

    - name: Test case 4 - Introduce byte string values in place of regular strings
      community.general.lxc_container:
        name: b"redhat1".decode()
        state: present
        template: b"redhat".decode()
      become: true