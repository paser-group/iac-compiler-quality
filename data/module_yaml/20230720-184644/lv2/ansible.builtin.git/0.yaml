---
- name: Deploy software using git
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Clone repository using git
      ansible.builtin.git:
        repo: b"{{ repo }}"
        dest: "/tmp/myrepo"
        accept_hostkey: "{{ accept_hostkey | default(false) }}"
        accept_newhostkey: "{{ accept_newhostkey | default(false) }}"
        archive: "{{ archive | default('') }}"
        archive_prefix: "{{ archive_prefix | default('') }}"
        bare: "{{ bare | default(false) }}"
        clone: "{{ clone | default(true) }}"
        depth: "{{ depth | default(0) }}"
        executable: "{{ executable | default('') }}"
        force: "{{ force | default(false) }}"
        gpg_whitelist: "{{ gpg_whitelist | default([]) }}"
        key_file: "{{ key_file | default('') }}"
        recursive: "{{ recursive | default(true) }}"
        reference: "{{ reference }}"
        refspec: "{{ refspec | default('') }}"
        remote: "{{ remote | default('origin') }}"
        separate_git_dir: "{{ separate_git_dir | default('') }}"
        single_branch: "{{ single_branch | default(false) }}"
        ssh_opts: "{{ ssh_opts | default('') }}"
        track_submodules: "{{ track_submodules | default(false) }}"
        umask: "{{ umask | default('') }}"
        update: "{{ update | default(true) }}"
        verify_commit: "{{ verify_commit | default(false) }}"
        version: "{{ version | default('') }}"
      register: git_result

    - name: Debug git result
      debug:
        var: git_result