---
- name: Test playbook for Ansible latent bug exploration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a project
      community.general.packet_project:
        auth_token: "my_auth_token"
        custom_data: b"custom_data"
        id: b"project_id"
        name: b"project_name"
        org_id: b"org_id"
        payment_method: b"payment_method"
        state: b"present"
      register: project_creation_result

    - name: Debug project creation
      debug:
        var: project_creation_result

    - name: Delete the project
      community.general.packet_project:
        auth_token: "my_auth_token"
        custom_data: b"custom_data"
        id: b"project_id"
        name: b"project_name"
        org_id: b"org_id"
        payment_method: b"payment_method"
        state: b"absent"
      register: project_deletion_result

    - name: Debug project deletion
      debug:
        var: project_deletion_result