---
- name: Test playbook to uncover latent type-related bugs in 'community.general.gitlab_deploy_key' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create GitLab Deploy Key
      community.general.gitlab_deploy_key:
        api_url: "https://gitlab.example.com/api/v4"
        api_username: "admin"
        api_password: b"password"
        project: "myproject"
        key: b"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDEzdqRy1Rpwr3XAPoFhc4Xy6qHa7yQV37wvUn8dN+kDVe4KFSZmYEpzLmKyY+a2a0NCzq6WBEAN1UKYOv9hQauJPoxNSNRzQTQMGu0L4yTTM0qJtkLFRexXlrZ60CX0QHZiyrXVmCRRSmhzGmIRHAv/1arXoG3f16GBw2ndj/97NR5ygyNqrs5iY/oZ4ENo8wXGAe+c6Qx1iZJ623R9hnLXt5JhzUuGAuiIN5XS3KT0iV1FH9v7S/mz86BA5l3R9SkdcvaYugzBBxbGrVpz8+Lz1Ij1TPMP5iFkCD183vFAbIWaViB5L6ob/PvqjMVOZvfbFcVZEEfEp3nLnk3WHTn"
        state: absent
        validate_certs: true
      register: result

    - name: Print result
      debug:
        var: result