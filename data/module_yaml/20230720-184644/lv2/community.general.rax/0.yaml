---
- name: Test playbook for latent bugs in community.general.rax module
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    api_key: "API_KEY"
    auth_endpoint: "https://auth.identity.endpoint/v2/tenants"
    auto_increment: true
    boot_from_volume: true
    boot_volume: "boot_volume_id"
    boot_volume_size: 10
    boot_volume_terminate: false
    config_drive: true
    count: 1
    count_offset: 0
    credentials: "/path/to/credentials.txt"
    disk_config: "AUTO"
    env: "prod"
    exact_count: true
    extra_client_args:
      key1: "value1"
      key2: "value2"
    extra_create_args:
      key1: "value1"
      key2: "value2"
    files:
      - src: /path/to/file1.txt
        dest: /tmp/file1.txt
      - src: /path/to/file2.txt
        dest: /tmp/file2.txt
    flavor: "flavor_id"
    group: "group_name"
    identity_type: "api_key"
    image: "image_id"
    instance_ids:
      - "instance1_id"
      - "instance2_id"
    key_name: "key_pair_name"
    meta:
      key1: "value1"
      key2: "value2"
    name: "instance_name"
    networks:
      - net-id: "network_id"
        port-id: "port_id"
    region: "region_name"
    state: "present"
    tenant_id: "tenant_id"
    tenant_name: "tenant_name"
    user_data: "user_data_script"
    username: "username"
    validate_certs: true
    wait: true
    wait_timeout: 600

  tasks:
    - name: Create instances with byte string values
      community.general.rax:
        api_key: b"API_KEY"  # Heuristic: Introduce byte string values
        auth_endpoint: b"https://auth.identity.endpoint/v2/tenants"
        auto_increment: true
        boot_from_volume: true
        boot_volume: b"boot_volume_id"
        boot_volume_size: 10
        boot_volume_terminate: false
        config_drive: true
        count: 1
        count_offset: 0
        credentials: b"/path/to/credentials.txt"
        disk_config: b"AUTO"
        env: b"prod"
        exact_count: true
        extra_client_args:
          key1: b"value1"
          key2: b"value2"
        extra_create_args:
          key1: b"value1"
          key2: b"value2"
        files:
          - src: b"/path/to/file1.txt"
            dest: b"/tmp/file1.txt"
          - src: b"/path/to/file2.txt"
            dest: b"/tmp/file2.txt"
        flavor: b"flavor_id"
        group: b"group_name"
        identity_type: b"api_key"
        image: b"image_id"
        instance_ids:
          - b"instance1_id"
          - b"instance2_id"
        key_name: b"key_pair_name"
        meta:
          key1: b"value1"
          key2: b"value2"
        name: b"instance_name"
        networks:
          - net-id: b"network_id"
            port-id: b"port_id"
        region: b"region_name"
        state: b"present"
        tenant_id: b"tenant_id"
        tenant_name: b"tenant_name"
        user_data: b"user_data_script"
        username: b"username"
        validate_certs: true
        wait: true
        wait_timeout: 600