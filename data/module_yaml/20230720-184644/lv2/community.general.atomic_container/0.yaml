---
- name: Test playbook for 'community.general.atomic_container'
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create and manage containers
      community.general.atomic_container:
        backend: "{{ backend | default('docker') }}"
        image: "{{ image | default('alpine:latest') }}"
        mode: "{{ mode | default('present') }}"
        name: "{{ name | default('test-container') }}"
        rootfs: "{{ rootfs | default('/var/lib/atomic-containers') }}"
        state: "{{ state | default('started') }}"
        values: "{{ values | default([]) }}"
        
      vars:
        backend: 12345
        image: 67890
        mode: [1, 2, 3]
        name: "test-container"
        rootfs: "/var/lib/atomic-containers"
        state: true
        values:
          - "value1"
          - 123
          - 456
          - {{ undefined_var }}