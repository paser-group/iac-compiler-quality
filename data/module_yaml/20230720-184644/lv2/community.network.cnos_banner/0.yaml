---
- name: Test playbook for community.network.cnos_banner module
  hosts: all
  gather_facts: false
  vars:
    banner: "This is a multiline banner."
    state: present
    text: "New banner text"

  tasks:
    - name: Set the CNOS banner
      community.network.cnos_banner:
        banner: banner
        state: state
        text: text
      register: result

    - name: Debug the result
      debug:
        var: result

    - name: Validate if banner is set correctly
      assert:
        that:
          - result is success
          - banner in result.cnos_banners