---
- name: Test playbook for community.network.icx_lldp module
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure LLDP on ICX switches
      community.network.icx_lldp:
        check_running_config: false
        interfaces: "{{ item.interfaces }}"
        state: "{{ item.state }}"
      loop:
        - { interfaces: ['ethernet1/1'], state: 'present' }
        - { interfaces: ['ethernet2/1'], state: 'absent' }
        - { interfaces: [b'ethernet3/1'], state: 'present' }
        - { interfaces: [b'ethernet4/1'], state: 'absent' }