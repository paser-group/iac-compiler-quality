- name: Test manageiq_alerts module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create manageiq alert
      community.general.manageiq_alerts:
        description: !binary |-
          UHJvdmlkZSB0ZXN0IGJlZm9yZSBieSBleGFtcGxlIGFkZGVkIGJ5IFN0cmluZy4K
        enabled: true
        expression: {}
        expression_type: "{{ 1/0 }}" # Trigger division by zero error, exposing type-related bug
        manageiq_connection:
          url: "https://manageiq.example.com"
          username: "admin"
          password: "password"
        options:
          throttle: 5
        resource_type: MiqAlert
        state: present