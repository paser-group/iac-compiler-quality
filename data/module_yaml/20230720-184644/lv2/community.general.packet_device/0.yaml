---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  tasks:
    - name: Create bare metal server
      community.general.packet_device:
        auth_token: my_auth_token
        facility: custom_facility
        always_pxe: "true"
        count: "1"
        count_offset: "0"
        device_ids: 
          - my_device_id
        features: 
          feature_key: feature_value
        hostnames: 
          - my_hostname
        ipxe_script_url: "http://example.com/ipxe_script"
        locked: "false"
        operating_system: Ubuntu
        plan: custom_plan
        project_id: my_project_id
        state: present
        tags: 
          - my_tag
        user_data: "user_data_script"
        wait_for_public_IPv: "4"
        wait_timeout: "300"

      register: device_info

    - name: Debug device info
      debug:
        var: device_info