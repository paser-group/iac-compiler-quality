- name: Create and delete DNS record
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create DNS record
      community.general.memset_zone_record:
        api_key: b"YOUR_API_KEY"
        zone: b"example.com"
        record: b"test.example.com"
        address: b"10.1.1.1"
        type: b"A"
        ttl: 3600
        priority: 10
        relative: "false"
        state: present
      register: result
      changed_when: result.changed

    - name: Print result
      debug:
        var: result

    - name: Delete DNS record
      community.general.memset_zone_record:
        api_key: b"YOUR_API_KEY"
        zone: b"example.com"
        record: b"test.example.com"
        state: absent
      register: result
      changed_when: result.changed

    - name: Print result
      debug:
        var: result