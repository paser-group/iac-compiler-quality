---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Execute NETCONF RPC operation
      ansible.netcommon.netconf_rpc:
        content: "<rpc xmlns='urn:ietf:params:xml:ns:netconf:base:1.0'><get></get></rpc>"
        display: "Getting NETCONF configuration"
        rpc: "get-config"
        xmlns: "urn:ietf:params:xml:ns:netconf:base:1.0"
      register: result

    - name: Print NETCONF RPC operation result
      debug:
        var: result

    - name: Execute NETCONF RPC operation with byte strings
      ansible.netcommon.netconf_rpc:
        content: "{{ '<rpc xmlns=\'urn:ietf:params:xml:ns:netconf:base:1.0\'><get></get></rpc>' | b }}"
        display: "{{ 'Getting NETCONF configuration' | b }}"
        rpc: "{{ 'get-config' | b }}"
        xmlns: "{{ 'urn:ietf:params:xml:ns:netconf:base:1.0' | b }}"
      register: result_bytes
      
    - name: Print NETCONF RPC operation result with byte strings
      debug:
        var: result_bytes