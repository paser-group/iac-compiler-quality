---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  vars:
    access_token: "YOUR_GITHUB_ACCESS_TOKEN"
    api_url: "https://api.github.com"
    description: "Test repository"
    force_defaults: true
    name: "test-repo"
    organization: "your-organization"
    password: "YOUR_PASSWORD"
    private: true
    state: "present"
    username: "YOUR_USERNAME"

  tasks:
    - name: Test regular string values
      community.general.github_repo:
        access_token: "{{ access_token }}"
        api_url: "{{ api_url }}"
        description: "{{ description }}"
        force_defaults: "{{ force_defaults }}"
        name: "{{ name }}"
        organization: "{{ organization }}"
        password: "{{ password }}"
        private: "{{ private }}"
        state: "{{ state }}"
        username: "{{ username }}"
      register: response_regular_strings
      ignore_errors: true

    - name: Test byte string values
      community.general.github_repo:
        access_token: "{{ access_token.encode() }}"
        api_url: "{{ api_url.encode() }}"
        description: "{{ description.encode() }}"
        force_defaults: "{{ force_defaults.encode() }}"
        name: "{{ name.encode() }}"
        organization: "{{ organization.encode() }}"
        password: "{{ password.encode() }}"
        private: "{{ private.encode() }}"
        state: "{{ state.encode() }}"
        username: "{{ username.encode() }}"
      register: response_byte_strings
      ignore_errors: true

    - name: Check for type-related bugs
      debug:
        msg: "Regular strings response: {{ response_regular_strings }} - Byte strings response: {{ response_byte_strings }}"