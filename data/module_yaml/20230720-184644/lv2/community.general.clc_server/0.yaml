---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: no

  tasks:
    # Task 1: Create server with byte string values
    - name: Test create server with byte string values
      community.general.clc_server:
        name: !!binary |-
          VGhpcyBpcyBhIHRlc3Qgc2VydmVyCg==
        group: !!binary |-
          Z3JvdXAxCg==
        description: !!binary |-
          VGhpcyBpcyBhIHRlc3Qgc2VydmVyCg==
        template: !!binary |-
          VGVtcGxhdGUxCg==
        count: !!binary |-
          MQ==
        cpu: !!binary |-
          Mi4x
        memory: !!binary |-
          NDA5Ng==
        storage_type: !!binary |-
          cHJlbQ==
        additional_disks: !!binary |-
          W2Rpc2sxXQo=
        state: !!binary |-
          cHJlc2VudAo=
      register: result_create_server

    - name: Display result of create server
      debug:
        var: result_create_server

    # Task 2: Start the server with byte string values
    - name: Test start server with byte string values
      community.general.clc_server:
        name: !!binary |-
          VGhpcyBpcyBhIHRlc3Qgc2VydmVyCg==
        state: !!binary |-
          c3RhcnRlZAo=
      register: result_start_server

    - name: Display result of start server
      debug:
        var: result_start_server

    # Task 3: Stop the server with byte string values
    - name: Test stop server with byte string values
      community.general.clc_server:
        name: !!binary |-
          VGhpcyBpcyBhIHRlc3Qgc2VydmVyCg==
        state: !!binary |-
          c3RvcHMK
      register: result_stop_server

    - name: Display result of stop server
      debug:
        var: result_stop_server

    # Task 4: Delete the server with byte string values
    - name: Test delete server with byte string values
      community.general.clc_server:
        name: !!binary |-
          VGhpcyBpcyBhIHRlc3Qgc2VydmVyCg==
        state: !!binary |-
          YXJlbnMK
      register: result_delete_server

    - name: Display result of delete server
      debug:
        var: result_delete_server