- name: Test playbook to uncover Ansible latent type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Change SELinux policy
      ansible.posix.selinux:
        configfile: "{{ b'/etc/selinux/config' }}"
        policy: "{{ b'enforcing' }}"
        state: "{{ 'enforcing' | regex_replace('[a-z]', b) }}"
        update_kernel_param: "{{ 1 | regex_replace('[0-9]', 'true') }}"
      register: selinux_result

    - debug:
        var: selinux_result