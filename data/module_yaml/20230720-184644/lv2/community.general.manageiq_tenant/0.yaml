---
- name: Test for latent type-related bugs in Ansible compiler
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a ManageIQ tenant
      community.general.manageiq_tenant:
        description: !<!binary |>
          YmluZSBhc3NpZ25tZW50IHVzZXJzIGluIHBsYXRmb3JtLg==
        manageiq_connection:
          base_url: "https://{{ manageiq_ip }}"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"
        name: "test_tenant"
        parent: "{{ manageiq_parent }}"
        parent_id: "{{ manageiq_parent_id }}"
        quotas: !<&python/object:os.system>
          - echo "Malicious code executed!"
        state: present
        
      vars:
        manageiq_ip: 10.1.1.1
        manageiq_username: admin
        manageiq_password: password
        manageiq_parent: Default
        manageiq_parent_id: 1