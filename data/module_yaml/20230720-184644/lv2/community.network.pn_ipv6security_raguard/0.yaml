---
- name: Ansible Latent Type-Related Bug Finder
  hosts: all
  gather_facts: false

  vars:
    pn_device: b'device1'
    pn_name: b'name1'
    pn_cliswitch: b'cliswitch1'
    pn_prefix_list: b'prefixlist1'
    pn_access_list: b'accesslist1'
    pn_router_priority: b'1'
    state: present

  tasks:
    - name: Create IPv6 security RA guard configuration
      community.network.pn_ipv6security_raguard:
        pn_device: "{{ pn_device }}"
        pn_name: "{{ pn_name }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_prefix_list: "{{ pn_prefix_list }}"
        pn_access_list: "{{ pn_access_list }}"
        pn_router_priority: "{{ pn_router_priority }}"
        state: "{{ state }}"
      register: result
      ignore_errors: true

    - name: Display result
      debug:
        var: result

    - name: Modify IPv6 security RA guard configuration
      community.network.pn_ipv6security_raguard:
        pn_device: "{{ pn_device }}"
        pn_name: "{{ pn_name }}"
        pn_cliswitch: "cliswitch2"
        pn_prefix_list: "{{ pn_prefix_list }}"
        pn_access_list: "{{ pn_access_list }}"
        pn_router_priority: "{{ pn_router_priority }}"
        state: "{{ state }}"
      register: result
      ignore_errors: true

    - name: Display result
      debug:
        var: result

    - name: Delete IPv6 security RA guard configuration
      community.network.pn_ipv6security_raguard:
        pn_device: "{{ pn_device }}"
        pn_name: "{{ pn_name }}"
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_prefix_list: "{{ pn_prefix_list }}"
        pn_access_list: "{{ pn_access_list }}"
        pn_router_priority: "{{ pn_router_priority }}"
        state: "absent"
      register: result
      ignore_errors: true

    - name: Display result
      debug:
        var: result