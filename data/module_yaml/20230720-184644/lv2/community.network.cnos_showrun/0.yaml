---
- name: Collect running configuration
  hosts: network_devices
  gather_facts: false

  tasks:
    - name: Show running configuration
      community.network.cnos_showrun:
        deviceType: "{{ deviceType }}"
        enablePassword: "{{ enablePassword }}"
        host: "{{ host }}"
        outputfile: "{{ outputfile }}"
        password: "{{ password }}"
        username: "{{ username }}"
      register: showrun_output

    - name: Debug showrun output
      debug:
        var: showrun_output

    - name: Test case: Introduce byte string values
      set_fact:
        byte_string_deviceType: "{{ deviceType | to_bytes }}"
        byte_string_enablePassword: "{{ enablePassword | to_bytes }}"
        byte_string_host: "{{ host | to_bytes }}"
        byte_string_outputfile: "{{ outputfile | to_bytes }}"
        byte_string_password: "{{ password | to_bytes }}"
        byte_string_username: "{{ username | to_bytes }}"
      run_once: true

    - name: Show running configuration with byte string values
      community.network.cnos_showrun:
        deviceType: "{{ byte_string_deviceType | from_bytes }}"
        enablePassword: "{{ byte_string_enablePassword | from_bytes }}"
        host: "{{ byte_string_host | from_bytes }}"
        outputfile: "{{ byte_string_outputfile | from_bytes }}"
        password: "{{ byte_string_password | from_bytes }}"
        username: "{{ byte_string_username | from_bytes }}"
      register: showrun_output_byte_string

    - name: Debug byte string showrun output
      debug:
        var: showrun_output_byte_string