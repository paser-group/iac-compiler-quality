---
- name: Perform firmware upgrade/download
  hosts: network_devices
  gather_facts: false

  tasks:
    - name: Upgrade firmware
      community.network.cnos_image:
        deviceType: !!python/bytes 'network_device_type'
        enablePassword: "{{ enablePassword }}"
        host: "{{ host }}"
        imgpath: null
        imgtype: null
        outputfile: "{{ outputfile }}"
        password: "{{ password }}"
        protocol: null
        serverip: null
        serverpassword: null
        serverusername: null
        username: "{{ username }}"
      register: firmware_result

    - name: Debug firmware result
      debug:
        var: firmware_result