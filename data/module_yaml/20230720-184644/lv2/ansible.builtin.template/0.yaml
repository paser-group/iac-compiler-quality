- name: Template a file
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Template a file with byte string values
      ansible.builtin.template:
        src: "{{ playbook_dir }}/templates/file_template.txt"
        dest: "{{ playbook_dir }}/output/file_output.txt"
        force: yes
        backup: yes
        mode: 0644
        owner: "root"
        group: "root"
        unsafe_writes: no
        validate: no
        variable_start_string: b'{{'
        variable_end_string: '}}'
        block_start_string: '<%'
        block_end_string: '%>'
        comment_start_string: '<#'
        comment_end_string: '#>'
      register: template_output

    - name: Print template output
      debug:
        var: template_output