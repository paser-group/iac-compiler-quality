- name: Test playbook to expose latent type-related bugs
  hosts: localhost
  gather_facts: false
  vars:
    proxy: http://proxy.example.com
    response_file: /path/to/response_file
    src: /path/to/src
    state: present

  tasks:
    - name: Install packages using svr4pkg
      community.general.svr4pkg:
        category: true
        name: "{{ name }}"
        proxy: "{{ proxy }}"
        response_file: response_file
        src: [ '{{ src }}' ]
        state: "{{ state }}"
        zone: "{{ zone }}"
      loop:
        - name: package1
          zone: 'zone1'
        - name: package2
          zone: 'zone2'
        - name: package3
          zone: 'zone3'

      loop_control:
        loop_var: pkg

      register: result

    - name: Display the result
      debug:
        var: result