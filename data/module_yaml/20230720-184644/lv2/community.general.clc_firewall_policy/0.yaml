---
- name: Test play
  hosts: localhost
  gather_facts: false
  vars:
    destination: ['10.1.1.2']
    destination_account_alias: 'alpine1'
    enabled: true
    firewall_policy_id: 'test_policy'
    location: 'US_CENTRAL-CH2'
    ports: ['8080']
    source: ['10.1.1.1']
    source_account_alias: 'ubuntu1'
    state: 'present'
    wait: 'no'

  tasks:
    - name: Create firewall policy
      community.general.clc_firewall_policy:
        destination: "{{ destination }}"
        destination_account_alias: "{{ destination_account_alias }}"
        enabled: "{{ enabled }}"
        firewall_policy_id: "{{ firewall_policy_id }}"
        location: "{{ location }}"
        ports: "{{ ports }}"
        source: "{{ source }}"
        source_account_alias: "{{ source_account_alias }}"
        state: "{{ state }}"
        wait: "{{ wait }}"
      register: result

    - name: Debug result
      debug:
        var: result