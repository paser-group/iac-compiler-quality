---
- name: Manage VLANs on edgeswitch devices
  hosts: switches
  gather_facts: false

  tasks:
    - name: Create VLAN
      community.network.edgeswitch_vlan:
        name: "TestVLAN"
        vlan_id: 100
        state: present
        purge: no
        auto_tag: no
        auto_untag: yes
        auto_exclude: no
        tagged_interfaces: "eth0"
        untagged_interfaces: "eth1"
        excluded_interfaces: "eth2"

    - name: Delete VLAN
      community.network.edgeswitch_vlan:
        name: "TestVLAN"
        vlan_id: 100
        state: absent

...