---
- name: Test playbook for the gitlab_project_variable module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create GitLab project variable with mixed case sensitivity
      community.general.gitlab_project_variable:
        api_url: "https://gitlab.example.com/api/v4"
        api_token: "your_token"
        project: "my_project"
        variables:
          - key: "Key1"
            value: "Value1"
          - key: "Key2"
            value: "Value2"
            sensitive: true
      register: result_create

    - name: Print create result
      debug:
        var: result_create

    - name: Update GitLab project variable with mixed case sensitivity
      community.general.gitlab_project_variable:
        apiUrl: "https://gitlab.example.com/api/v4"
        api_token: "your_token"
        project: "my_project"
        variables:
          - key: "Key1"
            value: "UpdatedValue1"
          - key: "Key2"
            value: "UpdatedValue2"
            sensitive: false
      register: result_update

    - name: Print update result
      debug:
        var: result_update

    - name: Delete GitLab project variable with mixed case sensitivity
      community.general.gitlab_project_variable:
        api_url: "https://gitlab.example.com/api/v4"
        api_token: "your_token"
        project: "my_project"
        variables:
          - key: "Key1"
          - key: "Key2"
      register: result_delete

    - name: Print delete result
      debug:
        var: result_delete