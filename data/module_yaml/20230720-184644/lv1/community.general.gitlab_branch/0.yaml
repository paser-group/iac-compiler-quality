---
- name: Test playbook for 'community.general.gitlab_branch' module
  hosts: localhost
  gather_facts: false

  vars:
    api_url: "http://your-gitlab-url/api/v4"
    api_username: "your-gitlab-username"
    api_password: "your-gitlab-password"
    project: "your-gitlab-project"
    branch: "test-branch"
    ref_branch: "main"
    state: "present"
    validate_certs: false

  tasks:
    - name: Create GitLab branch
      community.general.gitlab_branch:
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        api_password: "{{ api_password }}"
        project: "{{ project }}"
        branch: "{{ branch }}"
        ref_branch: "{{ ref_branch }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Print module result
      debug:
        var: result