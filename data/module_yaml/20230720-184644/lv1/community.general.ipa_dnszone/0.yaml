---
- name: Test playbook for community.general.ipa_dnszone module
  hosts: localhost
  gather_facts: false

  vars:
    zone_name: "example.com"
    allow_sync_ptr: true
    dynamic_update: true
    ipa_host: "ipa.example.com"
    ipa_port: 443
    ipa_prot: "https"
    ipa_timeout: 30
    ipa_user: "admin"
    ipa_pass: "admin_password"
    state: "present"
    validate_certs: true

  tasks:
    - name: Install required packages
      package:
        name: python3-ipalib
        state: present

    - name: Create DNS zone with mixed case sensitivity
      community.general.ipa_dnszone:
        zone_name: "{{ zone_name | random(case='mixed') }}"
        allow_sync_ptr: "{{ allow_sync_ptr }}"
        dynamic_update: "{{ dynamic_update }}"
        ipa_host: "{{ ipa_host }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug module output
      debug:
        var: result