---
- name: Test playbook for 'community.general.pubnub_blocks' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install PubNub Blocks library
      pip:
        name: pubnub-blocks
        state: present

    - name: Create PubNub Block
      community.general.pubnub_blocks:
        account: "{{ account }}"
        application: "{{ application }}"
        keyset: "{{ keyset }}"
        name: "{{ name }}"
        description: "{{ description }}"
        email: "{{ email }}"
        password: "{{ password }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
        cache:
          "{{ cache }}"
        changes:
          "{{ changes }}"
        event_handlers:
          "{{ event_handlers }}"

  vars:
    account: "myAccount"
    application: "myApplication"
    keyset: "myKeyset"
    name: "myBlock"
    description: "My PubNub Block"
    email: "test@example.com"
    password: "mypassword"
    state: "present"
    validate_certs: true
    cache:
      enabled: true
      ttl: 3600
    changes:
      - channel: "myChannel"
        watch: true
        timetoken: 1234567890
    event_handlers:
      - type: "before-publish"
        code: |
          function (request, response) {
            console.log('Authorizing...');
          }

...