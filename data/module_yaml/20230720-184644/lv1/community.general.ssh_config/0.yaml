- name: Test community.general.ssh_config module
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure SSH on the nodes
      community.general.ssh_config:
        state: present
        host: "{{ inventory_hostname }}"
        user: "{{ remote_user }}"
        hostname: "{{ ansible_host }}"
        port: "{{ ssh_port|int(default=22) }}"
        identity_file: "/path/to/identity_file"
        ssh_config_file: "/path/to/ssh_config_file"
        user_known_hosts_file: "/path/to/user_known_hosts_file"
        strict_host_key_checking: "{{ strict_host_key_checking }}"

        # Potential bug-triggering mixed case sensitivity in string configuration values
        host_key_algorithms: "rsa,ECDSA,ed25519"
        proxyCommand: "ssh -q -W %h:%p gateway"
        remote_user: "AnSiBlE"
        strict_host_key_checking: "No"