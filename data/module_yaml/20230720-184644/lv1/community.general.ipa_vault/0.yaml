---
- name: Test playbook for 'community.general.ipa_vault' module
  hosts: localhost
  gather_facts: false

  vars:
    cn: "testUser"
    description: "Test user"
    ipa_host: "10.1.1.1"
    ipa_pass: "SecretPass"
    ipa_port: 443
    ipa_prot: "https"
    ipa_timeout: 30
    ipa_user: "admin"
    ipavaultpublickey: "/path/to/public_key"
    ipavaultsalt: "a1b2c3"
    ipavaulttype: "vault_type"
    replace: false
    service: "httpd"
    state: "present"
    username:
      - "user1"
      - "user2"
      - "user3"
    validate_certs: true

  tasks:
    - name: Test 'community.general.ipa_vault' module
      community.general.ipa_vault:
        cn: "{{ cn }}"
        description: "{{ description }}"
        ipa_host: "{{ ipa_host }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        ipa_user: "{{ ipa_user }}"
        ipavaultpublickey: "{{ ipavaultpublickey }}"
        ipavaultsalt: "{{ ipavaultsalt }}"
        ipavaulttype: "{{ ipavaulttype }}"
        replace: "{{ replace }}"
        service: "{{ service }}"
        state: "{{ state }}"
        username: "{{ username }}"
        validate_certs: "{{ validate_certs }}"

      register: result

    - debug:
        var: result