---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  vars:
    api_key: YOUR_API_KEY
    auth_endpoint: YOUR_AUTH_ENDPOINT
    cdb_id: YOUR_CDB_ID
    character_set: YOUR_CHARACTER_SET
    collate: YOUR_COLLATE
    credentials: /path/to/your/credentials
    env: YOUR_ENV
    identity_type: YOUR_IDENTITY_TYPE
    name: YOUR_DATABASE_NAME
    region: YOUR_REGION
    state: present
    tenant_id: YOUR_TENANT_ID
    tenant_name: YOUR_TENANT_NAME
    username: YOUR_USERNAME
    validate_certs: false

  tasks:
    - name: Create / Delete Database
      community.general.rax_cdb_database:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        cdb_id: "{{ cdb_id }}"
        character_set: "{{ character_set }}"
        collate: "{{ collate }}"
        credentials: "{{ credentials }}"
        env: "{{ env }}"
        identity_type: "{{ identity_type }}"
        name: "{{ name }}"
        region: "{{ region }}"
        state: "{{ state }}"
        tenant_id: "{{ tenant_id }}"
        tenant_name: "{{ tenant_name }}"
        username: "{{ username }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - debug:
        var: result