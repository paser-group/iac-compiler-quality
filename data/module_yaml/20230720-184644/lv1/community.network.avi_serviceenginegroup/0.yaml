---
- name: Test playbook for the avi_serviceenginegroup module
  hosts: localhost
  gather_facts: false

  vars:
    # Define the inventory with Docker nodes
    inventory:
      ubuntu1:
        ip: "10.1.1.1"
        distro: "ubuntu"
      alpine1:
        ip: "10.1.1.2"
        distro: "alpine"
      centos1:
        ip: "10.1.1.3"
        distro: "centos"
      redhat1:
        ip: "10.1.1.4"
        distro: "redhat"

  tasks:
    - name: Create ServiceEngineGroup
      community.network.avi_serviceenginegroup:
        name: "{{ item.key }}"
        controller: "my-controller"
        username: "admin"
        password: "password"
        tenant: "my-tenant"
        se_name_prefix: "{{ item.value.distro | upper }}"  # Triggering mixed case sensitivity bug
      loop: "{{ inventory | dict2items }}"