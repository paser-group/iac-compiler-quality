---
- name: Test latent type-related bugs in Ansible compiler
  hosts: localhost
  gather_facts: false

  vars:
    datacenter: "us-east"
    server: "server1"
    state: "present"
    subscription_user: "admin"
    subscription_password: "password"
    volume: "volume1"
    wait: true
    wait_timeout: 300

  tasks:
    - name: Attach Volume to Server
      community.general.profitbricks_volume_attachments:
        datacenter: "{{ datacenter | lower }}"
        server: "{{ server }}"
        state: "{{ state | upper }}"
        subscription_password: "{{ subscription_password }}"
        subscription_user: "{{ subscription_user | int }}"
        volume: "{{ volume | bool }}"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
      register: result

    - name: Debug Result
      debug:
        var: result