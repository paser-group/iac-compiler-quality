- name: Test Playbook to Unveil type-related bugs in the Ansible Compiler
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create IBM Spectrum Accelerate pool
      community.general.ibm_sa_pool:
        domain: "{{ domain }}"
        endpoints: "{{ endpoints }}"
        username: "{{ username }}"
        password: "{{ password }}"
        pool: "{{ pool }}"
        size: "{{ size }}"
        snapshot_size: "{{ snapshot_size }}"
        state: "{{ state }}"
        perf_class: "{{ perf_class }}"
      vars:
        domain: "example.com"
        endpoints: "https://spectrum-accelerate.example.com"
        username: "admin"
        password: "secret"
        pool: "{{ pool_upper }}{{ pool_lower }}"
        size: "100G"
        snapshot_size: "10G"
        state: "present"
        perf_class: "gold"
      register: pool_creation_result

    - name: Debug Pool Creation Result
      debug:
        var: pool_creation_result