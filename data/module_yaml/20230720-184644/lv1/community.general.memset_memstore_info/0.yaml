---
- name: Memstore Info Playbook
  hosts: localhost
  gather_facts: False
  
  tasks:
    - name: Retrieve Memstore information
      community.general.memset_memstore_info:
        api_key: "{{ ansible_memstore_api_key }}"
        name: "{{ ansible_memstore_name }}"
      register: memstore_info

    - name: Print Memstore info
      debug:
        var: memstore_info

    - name: Validate Memstore name
      assert:
        that:
          - memstore_info.name is string
          - memstore_info.name != ""
        fail_msg: "Invalid Memstore name"

    - name: Validate Memstore ID
      assert:
        that:
          - memstore_info.id is string
          - memstore_info.id != ""
        fail_msg: "Invalid Memstore ID"
      
    - name: Validate Memstore state
      assert:
        that:
          - memstore_info.state is string
          - memstore_info.state in ['active', 'inactive']
        fail_msg: "Invalid Memstore state"