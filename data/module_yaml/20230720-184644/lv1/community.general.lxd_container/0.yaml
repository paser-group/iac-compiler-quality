---
- name: Test playbook for uncovering latent type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Create LXD containers
      community.general.lxd_container:
        name: "{{ item.key }}"
        state: present
        config:
          architecture: "{{ item.value.architecture | capitalize }}"
          type: "{{ item.value.type }}"
        source:
          type: image
          alias: "{{ item.value.image_alias }}"
      loop: "{{ containers }}"
      register: result