---
- name: Test playbook for community.general.utm_network_interface_address
  hosts: all
  gather_facts: false

  tasks:
    - name: Create network interface address
      community.general.utm_network_interface_address:
        name: "{{ item.name }}"
        address: "{{ item.address }}"
        comment: "{{ item.comment | default('') }}"
        state: present
        utm_host: "{{ item.utm_host }}"
        utm_port: "{{ item.utm_port }}"
        utm_protocol: "{{ item.utm_protocol }}"
        utm_token: "{{ item.utm_token }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - name: Ubuntu
          address: "10.1.1.1"
          comment: "Ubuntu Node"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: Alpine
          address: "10.1.1.2"
          comment: "Alpine Node"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: CentOS
          address: "10.1.1.3"
          comment: "CentOS Node"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: RedHat
          address: "10.1.1.4"
          comment: "RedHat Node"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true

    - name: Update network interface address
      community.general.utm_network_interface_address:
        name: "{{ item.name }}"
        address: "{{ item.address }}"
        comment: "{{ item.comment | default('') }}"
        state: present
        utm_host: "{{ item.utm_host }}"
        utm_port: "{{ item.utm_port }}"
        utm_protocol: "{{ item.utm_protocol }}"
        utm_token: "{{ item.utm_token }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - name: Ubuntu
          address: "10.1.1.1"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: Alpine
          address: "10.1.1.2"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: CentOS
          address: "10.1.1.3"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: RedHat
          address: "10.1.1.4"
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true

    - name: Remove network interface address
      community.general.utm_network_interface_address:
        name: "{{ item.name }}"
        state: absent
        utm_host: "{{ item.utm_host }}"
        utm_port: "{{ item.utm_port }}"
        utm_protocol: "{{ item.utm_protocol }}"
        utm_token: "{{ item.utm_token }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - name: Ubuntu
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: Alpine
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: CentOS
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true
        - name: RedHat
          utm_host: "utm.example.com"
          utm_port: 8443
          utm_protocol: "https"
          utm_token: "1234567890"
          validate_certs: true