---
- name: Test manageiq_tags module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Include manageiq_tags module
      include_vars:
        file: manageiq_tags_module.yml

    - name: Configure manageiq connection
      set_fact:
        manageiq_connection:
          url: "{{ manageiq_url }}"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"

    - name: Create resource tags
      community.general.manageiq_tags:
        manageiq_connection: "{{ manageiq_connection }}"
        resource_id: "{{ resource_id }}"
        resource_name: "{{ resource_name }}"
        resource_type: "{{ resource_type }}"
        tags: "{{ tags }}"
        state: present
      register: result
      check_mode: true

    - name: Debug manageiq_tags module result
      debug:
        msg: "{{ result }}"

# Test Cases
- name: Test Mixed Case Sensitivity for String Configuration Values
  hosts: localhost
  gather_facts: False

  vars:
    manageiq_connection:
      url: "https://manageiq.example.com"
      username: "admin"
      password: "password"

    resource_id: 12345
    resource_name: "Server"
    resource_type: "VM"
    tags:
      - "tag1"
      - "TaG2"
      - "tAg3"

  tasks:
    - name: Create resource tags
      community.general.manageiq_tags:
        manageiq_connection: "{{ manageiq_connection }}"
        resource_id: "{{ resource_id }}"
        resource_name: "{{ resource_name }}"
        resource_type: "{{ resource_type }}"
        tags: "{{ tags }}"
        state: present
      register: result
      check_mode: true

    - name: Debug manageiq_tags module result
      debug:
        msg: "{{ result }}"