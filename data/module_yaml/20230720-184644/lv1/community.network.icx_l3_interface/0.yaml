- name: Manage Layer-3 interfaces on Ruckus ICX
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure Layer-3 interface
      community.network.icx_l3_interface:
        name: "VLAN10"
        ipv4: "{{ item.ipv4 }}"
        ipv6: "{{ item.ipv6 }}"
        mode: "{{ item.mode }}"
        state: present
      loop:
        - { ipv4: "192.168.1.1/24", ipv6: "2001:db8::1/64", mode: "layer3ipv4" }
        - { ipv4: "192.168.2.1/24", ipv6: "fe80::1/64", mode: "layer3ipv6" }
        - { ipv4: "192.168.3.1/24", ipv6: "", mode: "layer2" }
      register: result

    - name: Display results
      debug:
        var: result