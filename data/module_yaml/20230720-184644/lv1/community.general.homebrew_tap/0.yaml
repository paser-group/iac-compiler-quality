- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    tap_name: "{{ ['mY_tAp', 'My_tap', 'my_TAP'] }}"
    tap_path: /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core
    tap_state: "{{ ['present', 'absent'] }}"
    tap_url: 'https://github.com/Homebrew/homebrew-core'

  tasks:
    - name: Test homebrew_tap with different tap names
      community.general.homebrew_tap:
        name: "{{ tap_name }}"
        path: "{{ tap_path }}"
        state: "{{ tap_state }}"
        url: "{{ tap_url }}"
      register: result

    - name: Print the result
      debug:
        var: result