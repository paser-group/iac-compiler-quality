---
- name: Test 'avi_cloudconnectoruser' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create CloudConnectorUser
      community.network.avi_cloudconnectoruser:
        controller: "https://{{ controller }}"
        username: "{{ username }}"
        password: "{{password }}"
        tenant: "{{ tenant }}"
        name: "{{ name }}"
        avi_credentials: "{{ avi_credentials }}"
        state: "{{ state }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
      register: result_create

    - name: Print result_create
      debug:
        var: result_create

    - name: Update CloudConnectorUser
      community.network.avi_cloudconnectoruser:
        controller: "https://{{ controller }}"
        username: "{{ username }}"
        password: "{{password }}"
        tenant: "{{ tenant }}"
        name: "{{ name }}"
        avi_credentials: "{{ avi_credentials }}"
        state: "{{ state }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
      register: result_update

    - name: Print result_update
      debug:
        var: result_update