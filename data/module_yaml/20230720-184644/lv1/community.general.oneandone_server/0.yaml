---
- name: Test Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    # Define test variables
    api_url: "https://api.oneandone.com/v1"
    auth_token: "YOUR_AUTH_TOKEN"
    datacenter: "datacenter"

  tasks:
    - name: Create server
      community.general.oneandone_server:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        datacenter: "{{ datacenter }}"
        state: "present"
        hostname: "testserver"
        server_type: "cloud"
        vcore: 2
        cores_per_processor: 1
        ram: 4
        hdds:
          - size: 40
            is_main: true
        wait_timeout: 600
      register: create_server_output

    - name: Debug create server output
      debug:
        var: create_server_output

    - name: Destroy server
      community.general.oneandone_server:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        state: "absent"
        server: "testserver"
      register: destroy_server_output

    - name: Debug destroy server output
      debug:
        var: destroy_server_output

    - name: Start server
      community.general.oneandone_server:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        state: "started"
        server: "testserver"
      register: start_server_output

    - name: Debug start server output
      debug:
        var: start_server_output

    - name: Stop server
      community.general.oneandone_server:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        state: "stopped"
        server: "testserver"
      register: stop_server_output

    - name: Debug stop server output
      debug:
        var: stop_server_output

    - name: Reboot server
      community.general.oneandone_server:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        state: "rebooted"
        server: "testserver"
      register: reboot_server_output

    - name: Debug reboot server output
      debug:
        var: reboot_server_output