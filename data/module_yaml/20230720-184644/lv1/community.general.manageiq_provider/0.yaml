---
- name: Ansible Latent Bug Finder & Heuristic Test
  hosts: localhost
  gather_facts: false

  vars:
    provider_connection:
      hostname: "{{ ansible_host }}"
      username: "admin"
      password: "password"

  tasks:
    - name: Set API version to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "vmware"
        provider_connection: "{{ provider_connection }}"
        api_version: "3.1"

    - name: Set Azure tenant ID to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "azure"
        provider_connection: "{{ provider_connection }}"
        azure_tenant_id: "MyTenantID"

    - name: Set mixed case sensitivity for string configuration values to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "vmware"
        provider_connection: "{{ provider_connection }}"
        api_version: "3.1"
        tenant_mapping_enabled: True
        host_default_vnc_port_start: "6000"
        host_default_vnc_port_end: "6010"
        provider_region: "us-west"
        ssh_keypair: null
        metrics: null
        alerts: null

    - name: Set SSH keypair to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "vmware"
        provider_connection: "{{ provider_connection }}"
        ssh_keypair: "MySSHKey"

    - name: Set subscription to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "azure"
        provider_connection: "{{ provider_connection }}"
        subscription: "MySubscription"

    - name: Set invalid state to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "vmware"
        provider_connection: "{{ provider_connection }}"
        state: "invalid"

    - name: Set invalid zone to trigger bug
      community.general.manageiq_provider:
        name: "Trigger Bug"
        type: "azure"
        provider_connection: "{{ provider_connection }}"
        zone: "invalid"