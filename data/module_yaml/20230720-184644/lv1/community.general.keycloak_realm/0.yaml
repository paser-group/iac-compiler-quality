- name: Test Ansible playbook for Keycloak realm
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create Keycloak realm
      community.general.keycloak_realm:
        auth_keycloak_url: "http://keycloak.example.com"
        name: "myrealm"
        enabled: yes
        access_code_lifespan: "{{ 300 }}"
        access_code_lifespan_login: "{{ 600 }}"
        access_token_lifespan: "{{ 1800 }}"
        display_name: "My Realm"
        admin_theme: base
        registration_allowed: "no"
        remember_me: "Yes"
        validate_certs: "True"
        verify_email: "True"
      register: result

    - name: Debug module output
      debug:
        var: result