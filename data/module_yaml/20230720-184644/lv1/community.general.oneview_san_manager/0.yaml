---
- name: Manage OneView resources
  hosts: localhost
  gather_facts: false

  vars:
    # Modify these variables according to your OneView setup
    api_version: 1200
    config: "/path/to/oneview_config.json"
    data:
      name: "Sample SAN"
      state: "present"
    hostname: "oneview.example.com"
    image_streamer_hostname: "imagestreamer.example.com"
    password: "password"
    state: "present"
    username: "username"
    validate_etag: false

  tasks:
    - name: Install Docker SDK
      pip:
        name: docker

    - name: Install HPE OneView Python SDK
      pip:
        name: hpOneView
        state: present

    - name: Import HPE OneView Module
      command: docker run --rm -v $PWD:/mnt -w /mnt ansible/ansible-runner:latest ansible-galaxy collection install hpe.oneview
      changed_when: false

    - name: Manage OneView SAN resources
      community.general.oneview_san_manager:
        api_version: "{{ api_version }}"
        config: "{{ config }}"
        data: "{{ data }}"
        hostname: "{{ hostname }}"
        image_streamer_hostname: "{{ image_streamer_hostname }}"
        password: "{{ password }}"
        state: "{{ state }}"
        username: "{{ username }}"
        validate_etag: "{{ validate_etag }}"
      register: result

    - name: Debug OneView result
      debug:
        var: result