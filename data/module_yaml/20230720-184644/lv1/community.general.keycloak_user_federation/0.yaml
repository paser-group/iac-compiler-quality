- name: Test playbook for keycloak_user_federation module
  hosts: localhost
  tasks:
    - name: Create Keycloak user federation
      community.general.keycloak_user_federation:
        auth_client_id: "12345" # int instead of str
        auth_client_secret: "Secret"
        auth_keycloak_url: "https://keycloak.example.com"
        auth_password: "password"
        auth_realm: "myrealm"
        auth_username: "admin"
        config:
          token: False # bool instead of str
          validate_certs: "true" # str instead of bool
        id: "myfederation"
        mappers:
          - mapper_name: "EmailMapper"
            attribute: 98765 # int instead of str
            type: "oidc-user-attribute-mapper"
            ...
        name: 12345 # int instead of str
        parent_id: "myrealm"
        provider_id: "myldap"
        provider_type: "org.keycloak.storage.UserStorageProvider"
        realm: "myrealm"
        state: "present"
      register: result

    - name: Show debug output
      debug:
        var: result