- name: Test playbook for community.network.pn_vflow_table_profile module
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: 'cli_switch'
    pn_enable: true
    pn_hw_tbl: 'HW_TBL'
    pn_profile: 'PROFILE'
    state: 'present'

  tasks:
    - name: Include community.network.pn_vflow_table_profile module
      include_vars:
        file: "{{ playbook_dir }}/vars.yml"

    - name: Test community.network.pn_vflow_table_profile module
      community.network.pn_vflow_table_profile:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_enable: "{{ pn_enable }}"
        pn_hw_tbl: "{{ pn_hw_tbl }}"
        pn_profile: "{{ pn_profile }}"
        state: "{{ state }}"
      register: result

    - name: Debug result
      debug:
        var: result

    - name: Assert response has changed
      assert:
        that: result.changed
        fail_msg: "The response has not changed, potential type-related bug present!"