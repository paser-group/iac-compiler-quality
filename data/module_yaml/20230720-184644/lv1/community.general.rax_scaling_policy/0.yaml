---
- name: Test rax_scaling_policy module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create scaling policy
      community.general.rax_scaling_policy:
        api_key: "{{ api_key }}"
        at: "{{ at }}"
        auth_endpoint: "{{ auth_endpoint }}"
        change: "{{ change }}"
        cooldown: "{{ cooldown }}"
        credentials: "{{ credentials }}"
        cron: "{{ cron }}"
        desired_capacity: "{{ desired_capacity }}"
        env: "{{ env }}"
        identity_type: "{{ identity_type }}"
        is_percent: "{{ is_percent }}"
        name: "{{ name }}"
        policy_type: "{{ policy_type }}"
        region: "{{ region }}"
        scaling_group: "{{ scaling_group }}"
        state: "{{ state }}"
        tenant_id: "{{ tenant_id }}"
        tenant_name: "{{ tenant_name }}"
        username: "{{ username }}"
        validate_certs: "{{ validate_certs }}"

  vars:
    api_key: "your_api_key"
    at: "12:00"
    auth_endpoint: "https://auth.rackspace.com"
    change: 5
    cooldown: 120
    credentials: "/path/to/credentials/file"
    cron: "0 0 * * *"
    desired_capacity: 10
    env: "production"
    identity_type: "your_identity_type"
    is_percent: false
    name: "scaling_policy_test"
    policy_type: "change_in_capacity"
    region: "DFW"
    scaling_group: "your_scaling_group"
    state: "present"
    tenant_id: "your_tenant_id"
    tenant_name: "your_tenant_name"
    username: "your_username"
    validate_certs: false