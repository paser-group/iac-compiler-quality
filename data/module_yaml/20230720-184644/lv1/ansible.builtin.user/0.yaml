---
- name: Create user
  hosts: localhost
  gather_facts: false
  tasks:

    - name: Create user with mixed case sensitivity
      ansible.builtin.user:
        name: "{{ mixed_case_name }}"  # mixed case sensitivity for username
        state: present
        password: "{{ mixed_case_password }}"  # mixed case sensitivity for password
        home: "/home/{{ mixed_case_name }}"
        SHELL: "/bin/{{ mixed_case_shell }}"  # mixed case sensitivity for shell
        groups: "{{ mixed_case_groups }}"  # mixed case sensitivity for groups
      register: result
      ignore_errors: true

    - debug:
        var: result

- name: Run tests
  hosts: localhost
  gather_facts: false
  tasks:

    - name: Test case - Create user with mixed case name
      ansible.builtin.user:
        name: "{{ mixed_case_name }}"  # mixed case sensitivity for username
        state: present
        password: "testpassword"
        home: "/home/testuser"
        shell: "/bin/bash"
        groups: "group1, group2"
      register: result
      ignore_errors: true

    - debug:
        var: result