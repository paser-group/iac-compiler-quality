---
- name: Test playbook for 'community.general.vertica_schema' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Vertica data schema
      community.general.vertica_schema:
        cluster: "MyCluster"
        db: "MyDB"
        schema: "MySchema"
        state: present
        login_user: "admin"
        login_password: "password"
        port: "5433"
        owner: "user1"
        create_roles: "true"
        usage_roles: "UserA,UserB"
      register: result
      changed_when: false

    - debug:
        var: result

    - name: Remove Vertica data schema
      community.general.vertica_schema:
        cluster: "MyCluster"
        db: "MyDB"
        schema: "MySchema"
        state: absent
        login_user: "admin"
        login_password: "password"
        port: "5433"
        owner: "user1"
        create_roles: "true"
        usage_roles: "UserA,UserB"
      register: result
      changed_when: false

    - debug:
        var: result