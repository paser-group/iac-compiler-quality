---
- name: Test for type-related bugs in gconftool2 module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set GConf key using 'gconftool2'
      community.general.gconftool2:
        config_source: system
        key: /apps/gnome-terminal/profiles/Default/background_color
        value: "black"
        value_type: string
      register: result
      ignore_errors: true

    - name: Check if GConf key was set successfully
      debug:
        msg: "GConf key was set successfully"
      when: result.rc == 0

    - name: Set GConf key with mixed case value
      community.general.gconftool2:
        config_source: system
        key: /apps/gnome-terminal/profiles/Default/background_color
        value: "bLaCk"   # Mixed case value
        value_type: string
      register: mixed_case_result
      ignore_errors: true

    - name: Check if GConf key was set with mixed case value
      debug:
        msg: "GConf key was set with mixed case value"
      when: mixed_case_result.rc == 0