---
- name: Set PAM limits
  hosts: all
  gather_facts: false

  tasks:
    - name: Set PAM limits for root user
      community.general.pam_limits:
        limit_item: "{{ limit_item }}"
        limit_type: "{{ limit_type }}"
        value: "{{ value }}"
        domain: "{{ domain }}"
        dest: "{{ dest }}"
        use_max: "{{ use_max }}"
        use_min: "{{ use_min }}"
        backup: "{{ backup }}"
        comment: "{{ comment }}"
      register: result
      failed_when: result.failed or result.rc != 0
      
    - name: Print the result
      debug:
        var: result