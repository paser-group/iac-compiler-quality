---
- name: Test Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false
  
  vars:
    api_context:
      api_version: "20.1.3"
    avi_credentials:
      username: "admin"
      password: "password"
    tenant: "Default"
  
  tasks:
    - name: Create HardwareSecurityModuleGroup with mixed case sensitivity
      community.network.avi_hardwaresecuritymodulegroup:
        controller: "https://{{ inventory_hostname }}"
        api_context: "{{ api_context }}"
        avi_credentials: "{{ avi_credentials }}"
        tenant: "{{ tenant }}"
        tenant_ref: "/api/tenant/?name={{ tenant }}"
        name: "{{ item.name }}"
      loop:
        - { name: "HSMGroup1" }
        - { name: "HSMgroup2" }
      register: result
      
    - name: Show the command output
      debug:
        var: result