---
- name: Test Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Check or Wait for Migrations
      community.general.aerospike_migrations:
        host: "{{ host }}"
        port: "{{ port }}"
        connect_timeout: "{{ connect_timeout }}"
        sleep_between_checks: "{{ sleep_between_checks }}"
        tries_limit: "{{ tries_limit }}"
        consecutive_good_checks: "{{ consecutive_good_checks }}"
        min_cluster_size: "{{ min_cluster_size }}"
        target_cluster_size: "{{ target_cluster_size }}"
        fail_on_cluster_change: "{{ fail_on_cluster_change }}"
        local_only: "{{ local_only }}"
        migrate_rx_key: "{{ migrate_rx_key }}"
        migrate_tx_key: "{{ migrate_tx_key }}"
      register: result
      ignore_errors: true

    - name: Print Result
      debug:
        var: result