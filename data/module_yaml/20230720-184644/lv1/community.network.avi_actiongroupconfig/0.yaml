---
- name: Setup ActionGroupConfig
  hosts: localhost
  gather_facts: false
  connection: local
  tasks:
    - name: Create ActionGroupConfig
      community.network.avi_actiongroupconfig:
        controller: "https://{{ ansible_host }}/api"
        username: "{{ avi_username }}"
        password: "{{ avi_password }}"
        tenant: "admin"
        name: "Test ActionGroupConfig"
        description: "This is a test ActionGroupConfig"
        level: "LOW"
        email_config_ref: "/api/alertemailconfig?name=test_email_config"
        snmp_trap_profile_ref: "/api/alertsnmptrapconfig?name=test_snmp_trap_config"
        syslog_config_ref: "/api/alertsyslogconfig?name=test_syslog_config"
        state: "present"
      register: result
      when:
        - ansible_distribution == 'Ubuntu'

    - debug:
        var: result