- name: Run commands on remote devices
  hosts: erics
  gather_facts: false
  
  vars:
    commands:
      - "show interfaces"
      - "show clock"
    interval: 10
    match: SUCCESS
    retries: 3
    wait_for:
      - "SUCCESS *"

  tasks:
    - name: Execute commands on devices
      community.network.eric_eccli_command:
        host: "{{ inventory_hostname }}"
        commands: "{{ commands }}"
        interval: "{{ interval }}"
        match: "{{ match }}"
        retries: "{{ retries }}"
        wait_for: "{{ wait_for }}"
      register: result

    - name: Debug result
      debug:
        var: result