---
- name: Test playbook for community.general.rax_dns_record module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "<API_KEY>"
    auth_endpoint: "https://auth.endpoint.com"
    username: "testuser"
    credentials: "/path/to/credentials.yml"
    domain: "example.com"
    ttl: 3600
    type: "A"
    name: "www.example.com"
    data: "10.1.1.5"
    comment: "This is a test record"
    validate_certs: false

  tasks:
    - name: Include required roles
      include_role:
        name: community.general.rax_dns_record

    - name: Create DNS record
      community.general.rax_dns_record:
        api_key: "{{ api_key }}"
        auth_endpoint: "{{ auth_endpoint }}"
        username: "{{ username }}"
        credentials: "{{ credentials }}"
        domain: "{{ domain }}"
        ttl: "{{ ttl }}"
        type: "{{ type }}"
        name: "{{ name }}"
        data: "{{ data }}"
        comment: "{{ comment }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug result
      debug:
        var: result