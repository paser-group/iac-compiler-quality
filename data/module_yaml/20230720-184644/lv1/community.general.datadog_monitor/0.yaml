- name: Discover Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create datadog monitor
      community.general.datadog_monitor:
        api_key: "{{ api_key }}"
        app_key: "{{ app_key }}"
        type: "{{ type }}"
        query: "{{ query }}"
        name: "{{ name }}"
        state: present
      register: monitor_result

    - name: Print monitor result
      debug:
        var: monitor_result