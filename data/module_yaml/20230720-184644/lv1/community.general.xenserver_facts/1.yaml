- name: Test Playbook
  hosts: all
  gather_facts: no
  
  vars:
    xenserver_host: "{{ ansible_host }}"
    xenserver_username: "admin"
    xenserver_password: "password"

  tasks:
    - name: Retrieve XenServer facts using mixed case for host
      community.general.xenserver_facts:
        host: "{{ xenserver_host.lower() }}"
        username: "{{ xenserver_username }}"
        password: "{{ xenserver_password }}"
      register: xenserver_facts_lower

    - name: Retrieve XenServer facts using mixed case for host
      community.general.xenserver_facts:
        host: "{{ xenserver_host.upper() }}"
        username: "{{ xenserver_username }}"
        password: "{{ xenserver_password }}"
      register: xenserver_facts_upper

    - name: Display XenServer facts with mixed case host
      debug:
        var: xenserver_facts_lower

    - name: Display XenServer facts with mixed case host
      debug:
        var: xenserver_facts_upper