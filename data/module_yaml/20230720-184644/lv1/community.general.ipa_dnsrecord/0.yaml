---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required packages
      package:
        name: "{{ item }}"
        state: present
      with_items:
        - python3-ipaclient
        - python3-requests

    - name: Set IPA environment variables
      set_fact:
        ipa_host: "10.1.1.1"
        ipa_user: "admin"
        ipa_pass: "password"
        ipa_port: 443
        ipa_prot: "https"
        ipa_timeout: 20
        validate_certs: no

    - name: Test Case 1 - Mixed case record_name
      community.general.ipa_dnsrecord:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        validate_certs: "{{ validate_certs }}"
        zone_name: "example.com"
        record_name: "TestRECORDname"
        record_ttl: 3600
        record_type: "A"
        record_value: "10.1.1.10"
        state: present

    - name: Test Case 2 - Mixed case record_type
      community.general.ipa_dnsrecord:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        validate_certs: "{{ validate_certs }}"
        zone_name: "example.com"
        record_name: "testrecord"
        record_ttl: 3600
        record_type: "aAA"
        record_value: "10.1.1.10"
        state: present

    - name: Test Case 3 - Mixed case record_value
      community.general.ipa_dnsrecord:
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        validate_certs: "{{ validate_certs }}"
        zone_name: "example.com"
        record_name: "testrecord"
        record_ttl: 3600
        record_type: "A"
        record_value: "10.1.1.10"
        record_values:
          - "10.1.1.20"
          - "10.1.1.21"
          - "10.1.1.22"
          - "10.1.1.23"
          - "10.1.1.24"
          - "10.1.1.25"
        state: present