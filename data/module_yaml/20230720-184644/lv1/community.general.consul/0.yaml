---
- name: Test playbook for community.general.consul module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Consul service with mixed case sensitivity
      community.general.consul:
        state: present
        service_name: "MyService"
        service_address: "10.1.1.1"
        service_port: 8080
        scheme: "http"
        token: "myToken"
      register: result_add

    - name: Debug result_add
      debug:
        var: result_add

    - name: Modify Consul service with mixed case sensitivity
      community.general.consul:
        state: present
        service_name: "MyService"
        service_address: "10.1.1.2"
        service_port: 9090
        scheme: "https"
        token: "myToken"
      register: result_modify

    - name: Debug result_modify
      debug:
        var: result_modify

    - name: Delete Consul service with mixed case sensitivity
      community.general.consul:
        state: absent
        service_name: "MyService"
      register: result_delete

    - name: Debug result_delete
      debug:
        var: result_delete