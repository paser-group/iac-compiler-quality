---
- name: Ansible Latent Type-Related Bug Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add ipv6 security RA guard port
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: present
      register: result

    - name: Debug Result
      debug:
        var: result

    - name: Change case sensitivity of pn_cliswitch
      set_fact:
        pn_cliswitch: "{% if pn_cliswitch | lower == 'true' %}true{% else %}false{% endif %}"

    - name: Add ipv6 security RA guard port with mixed case sensitivity
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: present
      register: result_mixed_case

    - name: Debug Result with mixed case sensitivity
      debug:
        var: result_mixed_case

    - name: Remove ipv6 security RA guard port
      community.network.pn_ipv6security_raguard_port:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_ports: "{{ pn_ports }}"
        state: absent
      register: remove_result

    - name: Debug Remove Result
      debug:
        var: remove_result