---
- name: Test ansible compiler for latent type-related bugs
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Set up variables
      set_fact:
        logging_options:
          - name: TestLogging
            state: present
            aggregate:
              - router_solicit
              - traceroute
            level: severity_1, severity_7
            dest: 10.1.1.10
            udp_port: "514"
            facility: local0
            check_running_config: true

    - name: Trigger type-related bug
      community.network.icx_logging:
        logging_options: "{{ logging_options }}"
      register: result

    - name: Debug result
      debug:
        var: result