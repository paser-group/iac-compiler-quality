- name: Test playbook for 'community.general.ipmi_power' module
  hosts: all
  gather_facts: false

  tasks:

    - name: Power on the machines
      community.general.ipmi_power:
        name: "{{ item.name }}"
        user: "{{ item.user }}"
        password: "{{ item.password }}"
        machine:
          - "{{ item.machine }}"
        state: on
      loop:
        - { name: "ubuntu1", machine: "10.1.1.1", user: "admin", password: "pass123" }
        - { name: "alpine1", machine: "10.1.1.2", user: "ADMIN", password: "PASS123" }
        - { name: "centos1", machine: "10.1.1.3", user: "Admin", password: "Pass123" }
        - { name: "redhat1", machine: "10.1.1.4", user: "AdMiN", password: "pAsS123" }
      register: result