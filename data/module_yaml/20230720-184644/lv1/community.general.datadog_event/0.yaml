- name: Test cases for community.general.datadog_event
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Post info event
      community.general.datadog_event:
        api_key: "YOUR_API_KEY"
        app_key: "YOUR_APP_KEY"
        title: "Info Event"
        text: "This is an info event"
        alert_type: "info"
      register: result_info

    - name: Post Warning event
      community.general.datadog_event:
        api_key: "YOUR_API_KEY"
        app_key: "YOUR_APP_KEY"
        title: "Warning Event"
        text: "This is a warning event"
        alert_type: "WARNING"
      register: result_warning

    - name: Post error event
      community.general.datadog_event:
        api_key: "YOUR_API_KEY"
        app_key: "YOUR_APP_KEY"
        title: "Error Event"
        text: "This is an error event"
        alert_type: "eRrOr"
      register: result_error

    - debug:
        msg: "Info - {{ result_info }}"
      when: result_info|failed

    - debug:
        msg: "Warning - {{ result_warning }}"
      when: result_warning|failed

    - debug:
        msg: "Error - {{ result_error }}"
      when: result_error|failed