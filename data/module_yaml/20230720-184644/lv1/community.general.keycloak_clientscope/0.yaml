- name: Generate new latent type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Create Keycloak Client Scope
      community.general.keycloak_clientscope:
        name: "MyClientScope"
        protocol: "openid-connect"
        realm: "my-realm"
        auth_username: "admin"
        auth_password: "admin"
        auth_client_id: "admin-cli"
        auth_client_secret: "secret"
        auth_keycloak_url: "http://localhost:8080/auth"
        connection_timeout: 30
        validate_certs: false
        state: present
        description: "{{ some_variable }}"  # Modify this line with a variable that has mixed case sensitivity

    - name: Verify Keycloak Client Scope
      community.general.keycloak_clientscope_facts:
        name: "MyClientScope"
        protocol: "openid-connect"
        realm: "my-realm"
        auth_username: "admin"
        auth_password: "admin"
        auth_client_id: "admin-cli"
        auth_client_secret: "secret"
        auth_keycloak_url: "http://localhost:8080/auth"
        connection_timeout: 30
        validate_certs: false
      register: client_scope_info

    - name: Debug Keycloak Client Scope Info
      debug:
        var: client_scope_info

    - name: Delete Keycloak Client Scope
      community.general.keycloak_clientscope:
        name: "MyClientScope"
        protocol: "openid-connect"
        realm: "my-realm"
        auth_username: "admin"
        auth_password: "admin"
        auth_client_id: "admin-cli"
        auth_client_secret: "secret"
        auth_keycloak_url: "http://localhost:8080/auth"
        connection_timeout: 30
        validate_certs: false
        state: absent