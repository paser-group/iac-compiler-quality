---
- name: Test playbook for community.network.avi_errorpageprofile module
  hosts: localhost
  gather_facts: false

  vars:
    api_context:
      - context_key: "{{ controller }}"
        context_value: "{{ avi_credentials['controller'] }}"
    avi_credentials:
      controller: "{{ controller }}"
      username: "{{ username }}"
      password: "{{ password }}"
    error_pages:
      - code: 404
        file: "/path/to/error404.html"
        reason_phrase: "Not Found"
    tenant: "{{ tenant }}"
    username: "{{ username }}"
    password: "{{ password }}"

  tasks:
    - name: Configure ErrorPageProfile using community.network.avi_errorpageprofile module
      community.network.avi_errorpageprofile:
        controller: "{{ controller }}"
        api_version: "{{ avi_api_version }}"
        api_context: "{{ api_context }}"
        avi_credentials: "{{ avi_credentials }}"
        error_pages: "{{ error_pages }}"
        tenant: "{{ tenant }}"
        username: "{{ username }}"
        password: "{{ password }}"
      register: result

    - name: Debug module output
      debug:
        var: result