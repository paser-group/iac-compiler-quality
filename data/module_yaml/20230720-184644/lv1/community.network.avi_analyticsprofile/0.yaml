---
- name: Test playbook for community.network.avi_analyticsprofile module
  hosts: localhost
  connection: local
  gather_facts: false
  
  vars:
    apdex_response_threshold: "NONE"
    apdex_response_tolerated_factor: "none"
    apdex_rtt_threshold: "None"
    apdex_rtt_tolerated_factor: "nOnE"
    apdex_rum_threshold: "NONE"
    apdex_rum_tolerated_factor: "NONE"
    apdex_server_response_threshold: "None"
    apdex_server_response_tolerated_factor: "none"
    apdex_server_rtt_threshold: "None"
    apdex_server_rtt_tolerated_factor: "NONE"
    avi_api_patch_op: "NONE"
    avi_api_update_method: "NoNe"
    avi_disable_session_cache_as_fact: False
    client_log_config: "None"
    client_log_streaming_config: "none"
    conn_lossy_ooo_threshold: "None"
    conn_lossy_timeo_rexmt_threshold: "NONE"
    conn_lossy_total_rexmt_threshold: "none"
    conn_lossy_zero_win_size_event_threshold: "None"
    conn_server_lossy_ooo_threshold: "None"
    conn_server_lossy_timeo_rexmt_threshold: "none"
    conn_server_lossy_total_rexmt_threshold: "None"
    conn_server_lossy_zero_win_size_event_threshold: "NONE"
    controller: "localhost"
    disable_ondemand_metrics: false
    disable_se_analytics: false
    disable_server_analytics: false
    disable_vs_analytics: false
    enable_advanced_analytics: false
    exclude_client_close_before_request_as_error: false
    exclude_dns_policy_drop_as_significant: false
    exclude_gs_down_as_error: false
    exclude_http_error_codes: "None"
    exclude_invalid_dns_domain_as_error: false
    exclude_invalid_dns_query_as_error: false
    exclude_no_dns_record_as_error: false
    exclude_no_valid_gs_member_as_error: false
    exclude_persistence_change_as_error: false
    exclude_server_dns_error_as_error: false
    exclude_server_tcp_reset_as_error: false
    exclude_sip_error_codes: "None"
    exclude_syn_retransmit_as_error: false
    exclude_tcp_reset_as_error: false
    exclude_unsupported_dns_query_as_error: false
    healthscore_max_server_limit: "None"
    hs_event_throttle_window: "None"
    hs_max_anomaly_penalty: "None"
    hs_max_resources_penalty: "None"
    hs_max_security_penalty: "NONE"
    hs_min_dos_rate: "None"
    hs_performance_boost: "none"
    hs_pscore_traffic_threshold_l4_client: "None"
    hs_pscore_traffic_threshold_l4_server: "none"
    hs_security_certscore_expired: "NONE"
    hs_security_certscore_gt30d: "None"
    hs_security_certscore_le07d: "None"
    hs_security_certscore_le30d: "NONE"
    hs_security_chain_invalidity_penalty: "None"
    hs_security_cipherscore_eq000b: "none"
    hs_security_cipherscore_ge128b: "None"
    hs_security_cipherscore_lt128b: "NONE"
    hs_security_encalgo_score_none: "NONE"
    hs_security_encalgo_score_rc4: "none"
    hs_security_hsts_penalty: "None"
    hs_security_nonpfs_penalty: "none"
    hs_security_selfsignedcert_penalty: "none"
    hs_security_ssl30_score: "none"
    hs_security_tls10_score: "none"
    hs_security_tls11_score: "none"
    hs_security_tls12_score: "none"
    name: "Test Analytics Profile"
    ondemand_metrics_idle_timeout: "None"
    password: "password"
    tenant: "admin"
    username: "admin"
  
  tasks:
    - name: Create Analytics Profile
      community.network.avi_analyticsprofile:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        name: "{{ name }}"
        tenant: "{{ tenant }}"
        apdex_response_threshold: "{{ apdex_response_threshold }}"
        apdex_response_tolerated_factor: "{{ apdex_response_tolerated_factor }}"
        apdex_rtt_threshold: "{{ apdex_rtt_threshold }}"
        apdex_rtt_tolerated_factor: "{{ apdex_rtt_tolerated_factor }}"
        apdex_rum_threshold: "{{ apdex_rum_threshold }}"
        apdex_rum_tolerated_factor: "{{ apdex_rum_tolerated_factor }}"
        apdex_server_response_threshold: "{{ apdex_server_response_threshold }}"
        apdex_server_response_tolerated_factor: "{{ apdex_server_response_tolerated_factor }}"
        apdex_server_rtt_threshold: "{{ apdex_server_rtt_threshold }}"
        apdex_server_rtt_tolerated_factor: "{{ apdex_server_rtt_tolerated_factor }}"
        avi_api_patch_op: "{{ avi_api_patch_op }}"
        avi_api_update_method: "{{ avi_api_update_method }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
        client_log_config: "{{ client_log_config }}"
        client_log_streaming_config: "{{ client_log_streaming_config }}"
        conn_lossy_ooo_threshold: "{{ conn_lossy_ooo_threshold }}"
        conn_lossy_timeo_rexmt_threshold: "{{ conn_lossy_timeo_rexmt_threshold }}"
        conn_lossy_total_rexmt_threshold: "{{ conn_lossy_total_rexmt_threshold }}"
        conn_lossy_zero_win_size_event_threshold: "{{ conn_lossy_zero_win_size_event_threshold }}"
        conn_server_lossy_ooo_threshold: "{{ conn_server_lossy_ooo_threshold }}"
        conn_server_lossy_timeo_rexmt_threshold: "{{ conn_server_lossy_timeo_rexmt_threshold }}"
        conn_server_lossy_total_rexmt_threshold: "{{ conn_server_lossy_total_rexmt_threshold }}"
        conn_server_lossy_zero_win_size_event_threshold: "{{ conn_server_lossy_zero_win_size_event_threshold }}"
        disable_ondemand_metrics: "{{ disable_ondemand_metrics }}"
        disable_se_analytics: "{{ disable_se_analytics }}"
        disable_server_analytics: "{{ disable_server_analytics }}"
        disable_vs_analytics: "{{ disable_vs_analytics }}"
        enable_advanced_analytics: "{{ enable_advanced_analytics }}"
        exclude_client_close_before_request_as_error: "{{ exclude_client_close_before_request_as_error }}"
        exclude_dns_policy_drop_as_significant: "{{ exclude_dns_policy_drop_as_significant }}"
        exclude_gs_down_as_error: "{{ exclude_gs_down_as_error }}"
        exclude_http_error_codes: "{{ exclude_http_error_codes }}"
        exclude_invalid_dns_domain_as_error: "{{ exclude_invalid_dns_domain_as_error }}"
        exclude_invalid_dns_query_as_error: "{{ exclude_invalid_dns_query_as_error }}"
        exclude_no_dns_record_as_error: "{{ exclude_no_dns_record_as_error }}"
        exclude_no_valid_gs_member_as_error: "{{ exclude_no_valid_gs_member_as_error }}"
        exclude_persistence_change_as_error: "{{ exclude_persistence_change_as_error }}"
        exclude_server_dns_error_as_error: "{{ exclude_server_dns_error_as_error }}"
        exclude_server_tcp_reset_as_error: "{{ exclude_server_tcp_reset_as_error }}"
        exclude_sip_error_codes: "{{ exclude_sip_error_codes }}"
        exclude_syn_retransmit_as_error: "{{ exclude_syn_retransmit_as_error }}"
        exclude_tcp_reset_as_error: "{{ exclude_tcp_reset_as_error }}"
        exclude_unsupported_dns_query_as_error: "{{ exclude_unsupported_dns_query_as_error }}"
        healthscore_max_server_limit: "{{ healthscore_max_server_limit }}"
        hs_event_throttle_window: "{{ hs_event_throttle_window }}"
        hs_max_anomaly_penalty: "{{ hs_max_anomaly_penalty }}"
        hs_max_resources_penalty: "{{ hs_max_resources_penalty }}"
        hs_max_security_penalty: "{{ hs_max_security_penalty }}"
        hs_min_dos_rate: "{{ hs_min_dos_rate }}"
        hs_performance_boost: "{{ hs_performance_boost }}"
        hs_pscore_traffic_threshold_l4_client: "{{ hs_pscore_traffic_threshold_l4_client }}"
        hs_pscore_traffic_threshold_l4_server: "{{ hs_pscore_traffic_threshold_l4_server }}"
        hs_security_certscore_expired: "{{ hs_security_certscore_expired }}"
        hs_security_certscore_gt30d: "{{ hs_security_certscore_gt30d }}"
        hs_security_certscore_le07d: "{{ hs_security_certscore_le07d }}"
        hs_security_certscore_le30d: "{{ hs_security_certscore_le30d }}"
        hs_security_chain_invalidity_penalty: "{{ hs_security_chain_invalidity_penalty }}"
        hs_security_cipherscore_eq000b: "{{ hs_security_cipherscore_eq000b }}"
        hs_security_cipherscore_ge128b: "{{ hs_security_cipherscore_ge128b }}"
        hs_security_cipherscore_lt128b: "{{ hs_security_cipherscore_lt128b }}"
        hs_security_encalgo_score_none: "{{ hs_security_encalgo_score_none }}"
        hs_security_encalgo_score_rc4: "{{ hs_security_encalgo_score_rc4 }}"
        hs_security_hsts_penalty: "{{ hs_security_hsts_penalty }}"
        hs_security_nonpfs_penalty: "{{ hs_security_nonpfs_penalty }}"
        hs_security_selfsignedcert_penalty: "{{ hs_security_selfsignedcert_penalty }}"
        hs_security_ssl30_score: "{{ hs_security_ssl30_score }}"
        hs_security_tls10_score: "{{ hs_security_tls10_score }}"
        hs_security_tls11_score: "{{ hs_security_tls11_score }}"
        hs_security_tls12_score: "{{ hs_security_tls12_score }}"
        ondemand_metrics_idle_timeout: "{{ ondemand_metrics_idle_timeout }}"
        tenant_ref: "{{ tenant_ref }}"
  
      register: result
      
    - name: Debug Ansible Facts
      debug:
        var: ansible_facts["result"]