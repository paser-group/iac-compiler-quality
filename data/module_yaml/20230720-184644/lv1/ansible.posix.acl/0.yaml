- name: Set and Retrieve ACL Permissions
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set ACL permissions
      ansible.posix.acl:
        path: /path/to/directory
        entity: username
        entry: default:user:username:rwx
        state: present
      register: acl_result

    - name: Retrieve ACL permissions
      ansible.posix.acl:
        path: /path/to/directory
        entity: username
        state: query
      register: acl_query_result

    - name: Debug ACL Result
      debug:
        var: acl_result

    - name: Debug ACL Query Result
      debug:
        var: acl_query_result