---
- name: Manage Packages using Zypper
  hosts: all
  gather_facts: false

  tasks:
    - name: Update Zypper Cache
      community.general.zypper:
        update_cache: yes

    - name: Install Packages
      community.general.zypper:
        name:
          - package1
          - package2
        state: present

    - name: Upgrade Packages
      community.general.zypper:
        name: '*'
        state: latest

    - name: Remove Packages
      community.general.zypper:
        name:
          - package1
        state: absent

    - name: Clean Cache
      community.general.zypper:
        clean_deps: yes
        force_resolution: yes

    - name: Install Specific Version of Package
      community.general.zypper:
        name: package1
        state: present
        oldpackage: yes

    - name: Disable GPG Check for Package Installation
      community.general.zypper:
        name: package1
        state: present
        disable_gpg_check: yes

    - name: Replace Configuration Files
      community.general.zypper:
        name: package1
        state: present
        replacefiles: yes

    - name: Specify Extra Arguments
      community.general.zypper:
        name: package1
        state: present
        extra_args: "--some-argument"

    - name: Change Vendor for Package Installation
      community.general.zypper:
        name: package1
        state: present
        allow_vendor_change: yes

    - name: Disable Package Recommendations
      community.general.zypper:
        name: package1
        state: present
        disable_recommends: yes

    - name: Specify Extra Arguments with Precommand
      community.general.zypper:
        name: package1
        state: present
        extra_args_precommand: "pre-command --some-argument"

    - name: Force Package Installation
      community.general.zypper:
        name: package1
        state: present
        force: yes