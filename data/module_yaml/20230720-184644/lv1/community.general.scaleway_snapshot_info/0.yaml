---
- name: Gather Scaleway Snapshot Info
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Gather Snapshot Info
      community.general.scaleway_snapshot_info:
        api_token: "{{ lookup('env','SCALEWAY_API_TOKEN') }}"
        api_url: "{{ lookup('env','SCALEWAY_API_URL') }}"
        region: "{{ lookup('env','SCALEWAY_REGION') }}"
        query_parameters:
          organization.id: "{{ lookup('env','SCALEWAY_ORGANIZATION_ID') }}"
        validate_certs: false
      register: result

    - name: Display Snapshot Info
      debug:
        var: result