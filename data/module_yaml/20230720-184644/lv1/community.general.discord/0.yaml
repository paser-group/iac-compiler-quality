---
- name: Test Playbook for Ansible Bug Exploration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Send a message to Discord
      community.general.discord:
        avatar_url: "https://example.com/avatar.png"
        content: "Test message"
        embeds: []
        tts: true
        username: "testuser"
        webhook_id: "1234567890"
        webhook_token: "abcdefg1234567890"
      register: discord_message

    - name: Debug Discord Message Result
      debug:
        var: discord_message

    - name: Modify webhook_id case sensitivity to test bug
      set_fact:
        webhook_id: aBcDeFg1234567890

    - name: Send a message to Discord with modified webhook_id
      community.general.discord:
        avatar_url: "https://example.com/avatar.png"
        content: "Test message"
        embeds: []
        tts: true
        username: "testuser"
        webhook_id: "{{ webhook_id }}"
        webhook_token: "abcdefg1234567890"
      register: updated_discord_message

    - name: Debug Updated Discord Message Result
      debug:
        var: updated_discord_message