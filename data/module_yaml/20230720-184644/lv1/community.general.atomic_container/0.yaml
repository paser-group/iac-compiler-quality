---
- name: Test playbook to find type-related bugs in Ansible
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a container
      community.general.atomic_container:
        backend: docker
        image: ubuntu
        mode: daemon
        name: TestContainer1
        rootfs: /var/containers/
        state: started
        values:
          - name: CONTAINER_VAR
            value: "{{ item }}"
      with_items:
        - testValue1
        - testValue2
        - TESTVALUE3
        - TestValue4

    - name: Stop the container
      community.general.atomic_container:
        backend: docker
        image: ubuntu
        mode: daemon
        name: TestContainer1
        rootfs: /var/containers/
        state: stopped

    - name: Remove the container
      community.general.atomic_container:
        backend: docker
        image: ubuntu
        mode: daemon
        name: TestContainer1
        rootfs: /var/containers/
        state: absent