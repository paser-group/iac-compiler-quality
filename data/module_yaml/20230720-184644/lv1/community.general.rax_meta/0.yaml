---
- name: Test 'community.general.rax_meta' module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create and manipulate metadata
      community.general.rax_meta:
        address: "{{ hostvars['localhost']['ansible_default_ipv4']['address'] }}"
        api_key: "API_KEY"
        auth_endpoint: "https://auth.endpoint"
        credentials: "/path/to/credentials"
        env: "ENVIRONMENT"
        id: "metadata_id"
        identity_type: "IDENTITY_TYPE"
        meta:
          key1: value1
          key2: value2
        name: "metadata_name"
        region: "metadata_region"
        tenant_id: "TENANT_ID"
        tenant_name: "tenant_name"
        username: "USERNAME"
        validate_certs: true
      register: result

    - name: Debug result
      debug:
        var: result