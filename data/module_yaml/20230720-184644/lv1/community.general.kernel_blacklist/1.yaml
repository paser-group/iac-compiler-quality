# test.yml
---
- name: Test playbook for 'community.general.kernel_blacklist' module
  hosts: all
  gather_facts: false

  tasks:
    - name: Ensure blacklist file exists
      file:
        path: "/tmp/{{ inventory_hostname }}_blacklist.txt"
        state: touch
      delegate_to: localhost

    - name: Add kernel/module to blacklist
      community.general.kernel_blacklist:
        name: "Module1"
        blacklist_file: "/tmp/{{ inventory_hostname }}_blacklist.txt"
        state: present
      delegate_to: localhost