---
- name: Ansible Latent Type-Related Bug Playbook
  hosts: localhost
  gather_facts: false
  become: true

  tasks:
    - name: Create test directory
      file:
        path: /tmp/test_dir
        state: directory
        
    - name: Copy src_iso to test directory
      copy:
        src: "{{ playbook_dir }}/src_iso.iso"
        dest: /tmp/test_dir/src_iso.iso
    
    - name: Customize ISO file
      community.general.iso_customize:
        add_files:
          - src: "{{ playbook_dir }}/file1.txt"
            dest: "/tmp/test_dir/file1.txt"
          - src: "{{ playbook_dir }}/file2.txt"
            dest: "/tmp/test_dir/file2.txt"
        delete_files:
          - "/tmp/test_dir/delete_me.txt"
        dest_iso: "/tmp/test_dir/customized.iso"
        src_iso: "/tmp/test_dir/src_iso.iso"
      register: iso_customize_output

    - name: Display debug output
      debug:
        var: iso_customize_output