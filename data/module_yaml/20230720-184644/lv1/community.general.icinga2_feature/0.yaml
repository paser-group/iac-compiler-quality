---
- name: Test playbook for community.general.icinga2_feature module
  hosts: localhost
  gather_facts: false

  vars:
    feature_name: "Monitoring"
    feature_state: "present"

  tasks:
    - name: Ensure Icinga2 feature exists
      community.general.icinga2_feature:
        name: "{{ feature_name }}"
        state: "{{ feature_state }}"
      register: icinga2_feature

    - name: Debug Icinga2 feature result
      debug:
        var: icinga2_feature