- name: Test playbook for community.network.netscaler_cs_policy module
  hosts: localhost
  gather_facts: False
  vars:
    nitro_protocol: "https"
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_timeout: 10
    nsip: "10.1.1.1"
    save_config: False
    validate_certs: False

  tasks:
    - name: Create Netscaler CS policy
      community.network.netscaler_cs_policy:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        state: present
        policyname: "MyPolicy"
        rule: "RULE1"
      register: result

    - name: Print result
      debug:
        var: result