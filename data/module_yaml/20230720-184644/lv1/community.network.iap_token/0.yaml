---
- name: Test playbook for 'community.network.iap_token' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Get token for IAP
      community.network.iap_token:
        https: "{{ 'true' if https else 'false' }}"
        iap_fqdn: "{{ iap_fqdn | default('') }}"
        iap_port: "{{ iap_port | default('') }}"
        password: "{{ password | default('') }}"
        username: "{{ username | default('') }}"
        validate_certs: "{{ 'true' if validate_certs else 'false' }}"
      register: result

    - name: Debug result
      debug:
        var: result