---
- name: Manage Rust dependencies
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install or update Rust dependencies
      community.general.cargo:
        name: "{{ item.name }}"
        path: "{{ item.path }}"
        state: "{{ item.state }}"
        version: "{{ item.version }}"
      loop:
        - name: my-rust-project
          path: /path/to/my-rust-project
          state: present
          version: 1.0.0
        - name: another-rust-project
          path: /path/to/another-rust-project
          state: absent
          version: latest

    - name: Print debug info
      debug:
        var: ansible_facts.ansible_facts.community_general_cargo_installed_packages

    - name: Ensure mixed case sensitivity bug is triggered
      command: echo "Mixed Case Sensitivity Bug"

    - name: Cleanup rust projects
      command: rm -rf /path/to/my-rust-project /path/to/another-rust-project