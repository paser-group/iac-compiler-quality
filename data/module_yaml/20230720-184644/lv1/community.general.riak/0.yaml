---
- name: Test playbook for 'community.general.riak' module
  hosts: localhost
  gather_facts: false

  vars:
    command: riak-admin
    config_dir: /etc/riak
    http_conn: "http://localhost:8098"
    target_node: "riak@localhost"
    validate_certs: true
    wait_for_handoffs: 3
    wait_for_ring: 5
    wait_for_service: running

  tasks:
    - name: Install 'community.general.riak' module
      pip:
        name: 'ansible-riak'
        state: present

    - name: Test case - Mixed case sensitivity for 'command' configuration
      community.general.riak:
        command: "{{ command|upper }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
      when: wait_for_handoffs == 3
  
    - name: Test case - Mixed case sensitivity for 'config_dir' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir|upper }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
      when: wait_for_ring == 5

    - name: Test case - Mixed case sensitivity for 'http_conn' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn|title }}"
        target_node: "{{ target_node }}"
      when: wait_for_service == "running"

    - name: Test case - Mixed case sensitivity for 'target_node' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node|upper }}"
      when: validate_certs == true

    - name: Test case - Mixed case sensitivity for 'validate_certs' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
        validate_certs: True
      when: validate_certs == true

    - name: Test case - Mixed case sensitivity for 'wait_for_handoffs' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
        wait_for_handoffs: 3
      when: wait_for_handoffs == 3

    - name: Test case - Mixed case sensitivity for 'wait_for_ring' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
        wait_for_ring: 5
      when: wait_for_ring == 5

    - name: Test case - Mixed case sensitivity for 'wait_for_service' configuration
      community.general.riak:
        command: "{{ command }}"
        config_dir: "{{ config_dir }}"
        http_conn: "{{ http_conn }}"
        target_node: "{{ target_node }}"
        wait_for_service: "running"
      when: wait_for_service == "running"