---
- name: Retrieve inventory information using ohai module
  hosts: all
  gather_facts: false
  tasks:
    - name: Install ohai plugin on Debian-based systems
      apt:
        name: ohai
        state: present
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

    - name: Install ohai plugin on Red Hat-based systems
      yum:
        name: ohai
        state: present
      when: ansible_distribution == 'CentOS' or ansible_distribution == 'RedHat'

    - name: Gather inventory information using ohai module
      community.general.ohai:
        plugins:
          - network
        cache_valid_time: 0
      register: ohai_result

    - name: Print inventory information
      debug:
        var: ohai_result.ohai_network_interfaces