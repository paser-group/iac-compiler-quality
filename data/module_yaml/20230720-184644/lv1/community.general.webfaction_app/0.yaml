---
- name: Test playbook for Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add webfaction app with mixed case
      community.general.webfaction_app:
        machine: "10.1.1.1"
        login_name: "admin"
        login_password: "admin123"
        name: "{{ 'TestApp' | lower }}"  # Using mixed case sensitivity heuristic
        type: "django"
        state: present
        autostart: true
        port_open: true
        extra_info: "Additional information"
      register: app_added
        
    - name: Debug added app
      debug:
        var: app_added
        
    - name: Remove webfaction app with lowercase
      community.general.webfaction_app:
        machine: "10.1.1.1"
        login_name: "admin"
        login_password: "admin123"
        name: "{{ 'TestApp' | lower }}"
        type: "django"
        state: absent
      register: app_removed
        
    - name: Debug removed app
      debug:
        var: app_removed