---
- name: Test reachability using ping
  hosts: all
  gather_facts: false

  tasks:
    - name: Ping all nodes
      ansible.netcommon.net_ping:
        count: "{{ count }}"
        dest: "{{ dest }}"
        source: "{{ source }}"
        state: "{{ state }}"
        vrf: "{{ vrf }}"
      register: ping_result

    - name: Print ping result
      debug:
        var: ping_result