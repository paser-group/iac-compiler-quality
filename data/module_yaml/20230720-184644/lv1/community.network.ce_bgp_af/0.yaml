---
- name: Manage BGP Address-family configuration on Huawei
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Configure BGP Address-family
      community.network.ce_bgp_af:
        state: present
        vrf_name: TestVRF
        af_type: ipv4
        network_address: 10.0.0.0
        add_path_sel_num: 5
        med_none_as_maximum: True
        auto_frr_enable: YES
        ecmp_nexthop_changed: TRUE
  
  # Test Case 1 - Mixed case sensitivity in string configuration values
    - name: Test Case 1 - Mixed case sensitivity
      community.network.ce_bgp_af:
        state: present
        vrf_name: testVrf
        af_type: IPv4
        network_address: 10.0.0.0
        add_path_sel_num: 5
        med_none_as_maximum: true
        auto_frr_enable: YE
        ecmp_nexthop_changed: tru

  # Test Case 2 - Missing required attributes
    - name: Test Case 2 - Missing required attributes
      community.network.ce_bgp_af:
        state: present
        vrf_name: TestVRF
        af_type: ipv4
        network_address: 10.0.0.0
      register: result
      failed_when: "'One or more required options are missing' in result.msg"