---
- name: Test Ansible Latent Type-Related Bugs 
  hosts: localhost
  gather_facts: false
  
  vars:
    ansible_python_interpreter: /usr/bin/python3
    test_lxd_profile_name: "MyProfile"
    test_lxd_profile_description: "This is a test profile"
    test_lxd_profile_devices:
      - eth0:
          nictype: bridged
          parent: node-net
          type: nic
      - rootfs:
          path: /
          pool: default
          type: disk
    test_lxd_profile_merge: false
    test_lxd_profile_state: present
    
  tasks:
    - name: Create LXD Profile
      community.general.lxd_profile:
        name: "{{ test_lxd_profile_name }}"
        description: "{{ test_lxd_profile_description }}"
        devices: "{{ test_lxd_profile_devices }}"
        merge_profile: "{{ test_lxd_profile_merge }}"
        state: "{{ test_lxd_profile_state }}"
      register: result