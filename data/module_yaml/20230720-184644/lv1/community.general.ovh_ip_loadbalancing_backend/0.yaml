- name: Test OVH IP Loadbalancing Backend Module
  hosts: localhost
  gather_facts: false

  vars:
    application_key: "APPLICATION_KEY"
    application_secret: "APPLICATION_SECRET"
    consumer_key: "CONSUMER_KEY"
    endpoint: "ENDPOINT"
    backend: "backend1"
    name: "Backend 1"
    probe: "HTTP"
    state: "present"
    timeout: 10
    weight: 5

  tasks:
    - name: Include the OVH IP Loadbalancing Backend module
      community.general.ovh_ip_loadbalancing_backend:
        application_key: "{{ application_key }}"
        application_secret: "{{ application_secret }}"
        consumer_key: "{{ consumer_key }}"
        endpoint: "{{ endpoint }}"
        backend: "{{ backend }}"
        name: "{{ name }}"
        probe: "{{ probe }}"
        state: "{{ state }}"
        timeout: "{{ timeout }}"
        weight: "{{ weight }}"
      register: backend_result

    - name: Debug Backend Result
      debug:
        var: backend_result