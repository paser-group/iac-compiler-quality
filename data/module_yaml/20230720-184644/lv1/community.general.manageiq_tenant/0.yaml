---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a ManageIQ tenant
      community.general.manageiq_tenant:
        manageiq_connection:
          url: "https://{{ manageiq_hostname }}/api"
          username: "{{ manageiq_username }}"
          password: "{{ manageiq_password }}"
          verify_ssl: no
        name: "{{ tenant_name }}"
        description: "{{ tenant_description }}"
        parent: "{{ tenant_parent }}"
        parent_id: "{{ tenant_parent_id | int }}"
        quotas:
          cpu: "{{ tenant_quotas_cpu }}"
          memory: "{{ tenant_quotas_memory }}"
        state: present
        
      vars:
        manageiq_hostname: "manageiq.example.com"
        manageiq_username: "admin"
        manageiq_password: "password"
        tenant_name: "Test Tenant"
        tenant_description: 123
        tenant_parent: "Parent Tenant"
        tenant_parent_id: "123"
        tenant_quotas_cpu: "2"
        tenant_quotas_memory: 2