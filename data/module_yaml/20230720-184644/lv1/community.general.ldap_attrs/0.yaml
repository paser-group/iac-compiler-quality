---
- name: Test playbook for community.general.ldap_attrs module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add multiple attributes
      community.general.ldap_attrs:
        bind_dn: "cn=admin,dc=mydomain,dc=com"
        bind_pw: "password"
        server_uri: "ldap://localhost"
        dn: "ou=users,dc=mydomain,dc=com"
        state: present
        attributes:
          - name: "cn"
            values:
              - "user1"
              - "User2"
          - name: "sn"
            values:
              - "Doe"
              - "Smith"

    - name: Remove multiple attributes
      community.general.ldap_attrs:
        bind_dn: "cn=admin,dc=mydomain,dc=com"
        bind_pw: "password"
        server_uri: "ldap://localhost"
        dn: "ou=users,dc=mydomain,dc=com"
        state: absent
        attributes:
          - name: "cn"
            values:
              - "user1"
              - "User2"
          - name: "sn"
            values:
              - "Doe"
              - "Smith"