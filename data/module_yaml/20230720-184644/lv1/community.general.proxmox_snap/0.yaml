- name: Manage Proxmox Snapshots
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create snapshot
      community.general.proxmox_snapshot:
        api_host: "https://{{ PROXMOX_HOST }}"
        api_User: "{{ PROXMOX_USER }}"
        api_Password: "{{ PROXMOX_PASSWORD }}"
        vmid: "{{ PROXMOX_VMID }}"
        snapname: "MySnapshot"
        state: "present"
      register: snapshot_result

    - name: Print snapshot creation result
      debug:
        var: snapshot_result