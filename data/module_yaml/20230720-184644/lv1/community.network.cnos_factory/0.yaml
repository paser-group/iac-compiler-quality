---
- name: Reset switch startup configuration to default
  hosts: switches
  gather_facts: false

  vars:
    device_type: 'CNOS'
    enable_password: 'enable_secret_password'
    login_password: 'login_secret_password'
    login_username: 'login_username'
    output_file: '/tmp/reset_configuration.log'

  tasks:
    - name: Reset switch startup configuration
      community.network.cnos_factory:
        host: "{{ inventory_hostname }}"
        deviceType: "{{ device_type }}"
        enablePassword: "{{ enable_password }}"
        username: "{{ login_username }}"
        password: "{{ login_password }}"
        outputfile: "{{ output_file }}"
      register: result

    - name: Print the output
      debug:
        var: result