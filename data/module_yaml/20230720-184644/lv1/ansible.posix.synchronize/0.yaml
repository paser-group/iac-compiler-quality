- name: Test for latent type-related bugs in ansible.posix.synchronize module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Synchronize files using ansible.posix.synchronize module
      ansible.posix.synchronize:
        src: /path/to/source
        dest: /path/to/destination
        archive: yes
        checksum: no
        compress: yes
        copy_links: no
        delay_updates: yes
        delete: no
        dirs: yes
        existing_only: no
        group: no
        link_dest: []
        links: yes
        mode: "0755"
        owner: no
        partial: yes
        perms: no
        private_key: /path/to/private_key
        recursive: yes
        rsync_opts:
          - "--exclude=.git"
          - "--exclude=*.log"
        rsync_path: /usr/bin/rsync
        rsync_timeout: 300
        set_remote_user: yes
        src: "/path/to/source"
        ssh_connection_multiplexing: false
        times: yes
        use_ssh_args: yes
        verify_host: yes

      register: result

    - name: Output ansible.posix.synchronize result
      debug:
        var: result