- name: Manage packages on OpenBSD
  hosts: all
  gather_facts: false

  tasks:
    - name: Install packages
      community.general.openbsd_pkg:
        name: "pkg1"
        ports_dir: "/usr/ports"
        build: true
        clean: true
        quick: false
        snapshot: true
        state: "installed"

    - name: Remove packages
      community.general.openbsd_pkg:
        name: "pkg1"
        ports_dir: "/usr/ports"
        build: false
        clean: false
        quick: true
        snapshot: false
        state: "uninstalled"