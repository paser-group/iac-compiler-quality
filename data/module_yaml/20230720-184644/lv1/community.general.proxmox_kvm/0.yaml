- name: Test playbook for 'proxmox_kvm' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a new virtual machine
      community.general.proxmox_kvm:
        api_user: "{{ API_USER }}"
        api_password: "{{ API_PASSWORD }}"
        api_host: "{{ API_HOST }}"
        node: "{{ NODE }}"
        vmid: "{{ VMID }}"
        name: "{{ NAME }}"
        ostype: "{{ OSTYPE }}"
        description: "{{ DESCRIPTION }}"
        vcpus: "{{ VCPUS }}"
        memory: "{{ MEMORY }}"
        storage: "{{ STORAGE }}"
        state: "{{ STATE }}"
      vars:
        API_USER: "admin"
        API_PASSWORD: "password"
        API_HOST: "10.1.1.1"
        NODE: "pve"
        VMID: 100
        NAME: "TestVM"
        OSTYPE: "Ubuntu"
        DESCRIPTION: "Testing mixed case sensitivity"
        VCPUS: 2
        MEMORY: 2048
        STORAGE: "local"
        STATE: present

- name: Mixed case sensitivity test
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a new virtual machine with mixed case sensitivity
      community.general.proxmox_kvm:
        api_user: "{{ API_USER }}"
        api_password: "{{ API_PASSWORD }}"
        api_host: "{{ API_HOST }}"
        node: "{{ NODE }}"
        vmid: "{{ VMID }}"
        name: "{{ NAME }}"
        ostype: "{{ OSTYPE }}"
        description: "{{ DESCRIPTION }}"
        vcpus: "{{ VCPUS }}"
        memory: "{{ MEMORY }}"
        storage: "{{ STORAGE }}"
        state: "{{ STATE }}"
      vars:
        API_USER: "ADMIN"
        API_PASSWORD: "password"
        API_HOST: "10.1.1.1"
        NODE: "PVE"
        VMID: 101
        NAME: "testVM"
        OSTYPE: "UBUNTU"
        DESCRIPTION: "Testing Mixed Case Sensitivity"
        VCPUS: 4
        MEMORY: 4096
        STORAGE: "LOCAL"
        STATE: present