---
- name: Create or Destroy ProfitBricks Data Center
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include ProfitBricks module
      include_role:
        name: community.general.profitbricks

    - name: Create Data Center
      profitbricks_datacenter:
        description: "My Data Center"
        location: "us/las"
        name: "MyDataCenter"
        state: present
        subscription_user: "testuser"
        subscription_password: "testpassword"
        wait: true
        wait_timeout: 300

    - name: Destroy Data Center
      profitbricks_datacenter:
        description: "My Data Center"
        location: "us/las"
        name: "MyDataCenter"
        state: absent
        subscription_user: "testuser"
        subscription_password: "testpassword"
        wait: true
        wait_timeout: 300