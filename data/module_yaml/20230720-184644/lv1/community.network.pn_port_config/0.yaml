---
- name: Configure network ports
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Configure network port
      community.network.pn_port_config:
        pn_speed: "{{ pn_speed | default(1000) }}"
        pn_enable: "{{ pn_enable | default('yes') }}"
        pn_description: |-
          THIS IS A TEST
          Please ignore this line
        pn_eth_mode: "{{ pn_eth_mode | default('auto') }}"
        state: "{{ state }}"
      register: port_config_result

    - name: Debug port configuration
      debug:
        var: port_config_result