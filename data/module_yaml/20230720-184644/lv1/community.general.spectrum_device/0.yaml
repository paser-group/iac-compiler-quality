- name: Test playbook for community.general.spectrum_device module
  hosts: localhost
  gather_facts: false

  vars:
    agentport: 12345
    community: public
    device: mydevice
    landscape: mylandscape
    state: present
    url: https://example.com
    url_password: password
    url_username: username
    use_proxy: false
    validate_certs: true

  tasks:
    - name: Create device using mixed case sensitivity
      community.general.spectrum_device:
        agentPort: "{{ agentport }}"
        Community: "{{ community }}"
        DEVICE: "{{ device }}"
        Landscape: "{{ landscape }}"
        State: "{{ state }}"
        URL: "{{ url }}"
        URL_PASSWORD: "{{ url_password }}"
        URL_USERNAME: "{{ url_username }}"
        USE_PROXY: "{{ use_proxy }}"
        VALIDATE_CERTS: "{{ validate_certs }}"
      register: result
      ignore_errors: true

    - name: Display result of device creation
      debug:
        var: result

    - name: Delete device using mixed case sensitivity
      community.general.spectrum_device:
        agentPort: "{{ agentport }}"
        Community: "{{ community }}"
        DEVICE: "{{ device }}"
        Landscape: "{{ landscape }}"
        State: "absent"
        URL: "{{ url }}"
        URL_PASSWORD: "{{ url_password }}"
        URL_USERNAME: "{{ url_username }}"
        USE_PROXY: "{{ use_proxy }}"
        VALIDATE_CERTS: "{{ validate_certs }}"
      register: result
      ignore_errors: true

    - name: Display result of device deletion
      debug:
        var: result