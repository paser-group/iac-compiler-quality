---

- name: Test playbook for Ansible type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create PagerDuty user
      community.general.pagerduty_user:
        access_token: "{{ pd_token }}"
        pd_user: "{{ pd_user | lower }}"
        pd_email: "{{ pd_email | upper }}"
        pd_role: "{{ pd_role | capitalize }}"
        pd_teams: "{{ pd_teams | map('upper') | list }}"
        state: "present"
      register: result

    - name: Display PagerDuty user creation result
      debug:
        var: result