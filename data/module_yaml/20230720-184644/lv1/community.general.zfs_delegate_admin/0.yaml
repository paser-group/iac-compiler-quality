---
- name: Test Playbook for ZFS Delegate Administration
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Enable delegated administration for ZFS filesystems
      community.general.zfs_delegate_admin:
        name: "my_pool"
        recursive: true
        users:
          - "user1"
          - "USER2"  # Test mixed case sensitivity
        groups:
          - "group1"
          - "Group2"  # Test mixed case sensitivity
        permissions:
          - "create"
          - "Destroy"  # Test mixed case sensitivity
        state: present

    - name: Disable delegated administration for ZFS filesystems
      community.general.zfs_delegate_admin:
        name: "my_pool"
        recursive: true
        users:
          - "user1"
        groups:
          - "group1"
        permissions:
          - "create"
        state: absent

    - name: Test different combinations of case sensitivity for string configuration values
      community.general.zfs_delegate_admin:
        name: "my_pool"
        recursive: true
        users:
          - "USER1"  # Test mixed case sensitivity
          - "user2"
          - "uSEr3"  # Test mixed case sensitivity
        groups:
          - "group1"
          - "GROUP2"  # Test mixed case sensitivity
          - "Group3"  # Test mixed case sensitivity
        permissions:
          - "create"
          - "destROY"  # Test mixed case sensitivity
          - "destROy"  # Test mixed case sensitivity
        state: present