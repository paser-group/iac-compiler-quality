---
- name: Load or unload kernel module
  hosts: all
  gather_facts: false
  become: true

  tasks:
    - name: Load or unload module
      community.general.modprobe:
        name: "{{ item.name }}"
        params: "{{ item.params }}"
        persistent: "{{ item.persistent | default('no') }}"
        state: "{{ item.state }}"
      with_items:
        - { name: "module1", params: "param1=value1", state: "present" }
        - { name: "module2", state: "absent" }
        - { name: "Module3", state: "present" }  # Mixed case sensitivity test

...