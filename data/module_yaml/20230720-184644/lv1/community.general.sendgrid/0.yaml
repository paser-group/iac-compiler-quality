---
- name: Test SendGrid module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "your_sendgrid_api_key"
    attachments:
      - /path/to/attachment1
      - /path/to/attachment2
    bcc:
      - bcc1@example.com
      - bcc2@example.com
    body: "This is the body of the email"
    cc:
      - cc1@example.com
      - cc2@example.com
    from_address: "sender@example.com"
    from_name: "Sender Name"
    headers:
      X-Custom-Header: "Custom Value"
    html_body: true
    password: "your_sendgrid_password"
    subject: "Test Email"
    to_addresses:
      - recipient1@example.com
      - recipient2@example.com
    username: "your_sendgrid_username"

  tasks:
    - name: Send Email
      community.general.sendgrid:
        api_key: "{{ api_key }}"
        attachments: "{{ attachments }}"
        bcc: "{{ bcc }}"
        body: "{{ body }}"
        cc: "{{ cc }}"
        from_address: "{{ from_address }}"
        from_name: "{{ from_name }}"
        headers: "{{ headers }}"
        html_body: "{{ html_body }}"
        password: "{{ password }}"
        subject: "{{ subject }}"
        to_addresses: "{{ to_addresses }}"
        username: "{{ username }}"
      register: sendgrid_result

    - name: Debug SendGrid result
      debug:
        var: sendgrid_result