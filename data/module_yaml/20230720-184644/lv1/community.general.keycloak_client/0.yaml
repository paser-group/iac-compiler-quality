---
- name: Test playbook to reveal latent type-related bugs in Ansible compiler
  hosts: localhost
  gather_facts: false

  vars:
    admin_url: http://localhost:8080/auth
    auth_username: admin
    auth_password: admin
    realm: myrealm
    client_id: myclient
    client_secret: myclientsecret

  tasks:
    - name: Create Keycloak client with mixed case attribute
      community.general.keycloak_client:
        admin_url: "{{ admin_url }}"
        auth_username: "{{ auth_username }}"
        auth_password: "{{ auth_password }}"
        realm: "{{ realm }}"
        client_id: "{{ client_id }}"
        client_secret: "{{ client_secret }}"
        attributes:
          MixedCaseAttribute: testValue
      register: result1

    - name: Print result1
      debug:
        var: result1

    - name: Create Keycloak client with mixed case attribute - All lowercase
      community.general.keycloak_client:
        admin_url: "{{ admin_url }}"
        auth_username: "{{ auth_username }}"
        auth_password: "{{ auth_password }}"
        realm: "{{ realm }}"
        client_id: "{{ client_id }}"
        client_secret: "{{ client_secret }}"
        attributes:
          mixedcaseattribute: testValue
      register: result2

    - name: Print result2
      debug:
        var: result2