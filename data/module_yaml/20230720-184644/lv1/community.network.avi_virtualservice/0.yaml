- name: Playbook to test community.network.avi_virtualservice module
  hosts: localhost
  gather_facts: false

  vars:
    api_version: "17.2.5"
    controller: "avi-controller"
    username: "admin"
    password: "password"
    tenant: "Default-Cloud"

  tasks:
    - name: Create a virtual service with a mixed case hostname
      community.network.avi_virtualservice:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "MyVirtualService"
        fqdn: "MyHostName"
        enabled: true
      register: result1

    - name: Print the result of the first test case
      debug:
        var: result1

    - name: Create a virtual service with a lowercase hostname
      community.network.avi_virtualservice:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "MyVirtualService"
        fqdn: "myhostname"
        enabled: true
      register: result2

    - name: Print the result of the second test case
      debug:
        var: result2