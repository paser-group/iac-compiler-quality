---
- name: Configure SNMP user on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Set SNMP user configuration
      community.network.ce_snmp_user:
        aaa_local_user: "{{ item.aaa_local_user }}"
        acl_number: "{{ item.acl_number }}"
        auth_key: "{{ item.auth_key }}"
        auth_protocol: "{{ item.auth_protocol }}"
        priv_key: "{{ item.priv_key }}"
        priv_protocol: "{{ item.priv_protocol }}"
        remote_engine_id: "{{ item.remote_engine_id }}"
        user_group: "{{ item.user_group }}"
        usm_user_name: "{{ item.usm_user_name }}"
      with_items:
        - aaa_local_user: None
          acl_number: None
          auth_key: None
          auth_protocol: None
          priv_key: None
          priv_protocol: None
          remote_engine_id: None
          user_group: None
          usm_user_name: none_test

        - aaa_local_user: NONE
          acl_number: NONE
          auth_key: none
          auth_protocol: NONE
          priv_key: NONE
          priv_protocol: none
          remote_engine_id: none
          user_group: none
          usm_user_name: None_Test

        - aaa_local_user: none
          acl_number: none
          auth_key: NONE
          auth_protocol: none
          priv_key: none
          priv_protocol: NONE
          remote_engine_id: None
          user_group: none
          usm_user_name: none_TEST

        - aaa_local_user: None
          acl_number: None
          auth_key: none
          auth_protocol: NONE
          priv_key: none
          priv_protocol: none
          remote_engine_id: none
          user_group: none
          usm_user_name: None_Test

      register: result

    - name: Debug result
      debug:
        var: result