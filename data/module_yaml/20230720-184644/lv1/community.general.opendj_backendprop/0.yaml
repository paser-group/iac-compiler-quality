---
- name: Update backend configuration of OpenDJ
  hosts: localhost
  gather_facts: false

  vars:
    backend: "userRoot"
    hostname: "localhost"
    name: "backendProp"
    opendj_bindir: "/opt/opendj/bin"
    password: "password"
    passwordfile: "/root/passwordfile.txt"
    port: "1389"
    state: "present"
    username: "admin"
    value: "newValue"

  tasks:
    - name: Create password file
      copy:
        content: "{{ password }}"
        dest: "{{ passwordfile }}"
        mode: "0600"

    - name: Update backend configuration
      community.general.opendj_backendprop:
        backend: "{{ backend }}"
        hostname: "{{ hostname }}"
        name: "{{ name }}"
        opendj_bindir: "{{ opendj_bindir }}"
        password: "{{ password }}"
        passwordfile: "{{ passwordfile }}"
        port: "{{ port }}"
        state: "{{ state }}"
        username: "{{ username }}"
        value: "{{ value }}"