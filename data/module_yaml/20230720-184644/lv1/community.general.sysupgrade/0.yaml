- name: Test playbook for Ansible latent type-related bug exploration
  hosts: all
  become: true
  gather_facts: false

  tasks:
    - name: Check system upgrade
      community.general.sysupgrade:
        fetch_only: yes
        force: True
        installurl: "http://example.com"
        keep_files: True
        snapshot: Yes
      register: upgrade_result

    - name: Debug upgrade result
      debug:
        var: upgrade_result