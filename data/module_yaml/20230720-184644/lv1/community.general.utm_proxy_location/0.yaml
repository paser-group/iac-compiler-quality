---
- name: Test playbook for community.general.utm_proxy_location module
  hosts: localhost
  become: false
  gather_facts: false

  vars:
    proxy_location:
      name: Reverse Proxy
      state: present
      path: /reverse_proxy
      backend:
        - server1
        - server2
      auth_profile: BasicAuth
      allowed_networks:
        - 192.168.0.0/24
        - 10.0.0.0/16
      denied_networks:
        - 172.16.0.0/12
        - 192.168.1.0/24
      headers:
        header1: value1
        header2: value2
      hot_standby: true
      stickysession_id: JSESSIONID
      stickysession_status: true
      utm_host: example.com
      utm_port: 8443
      utm_protocol: https
      utm_token: ABCDEFGHIJKLMNOPQRSTUVWXYZ
      validate_certs: false
      websocket_passthrough: true
      access_control: allow

  tasks:
    - name: Create reverse proxy location
      community.general.utm_proxy_location:
        name: "{{ proxy_location.name }}"
        state: "{{ proxy_location.state }}"
        path: "{{ proxy_location.path }}"
        backend: "{{ proxy_location.backend }}"
        auth_profile: "{{ proxy_location.auth_profile }}"
        allowed_networks: "{{ proxy_location.allowed_networks }}"
        denied_networks: "{{ proxy_location.denied_networks }}"
        headers: "{{ proxy_location.headers }}"
        hot_standby: "{{ proxy_location.hot_standby }}"
        stickysession_id: "{{ proxy_location.stickysession_id }}"
        stickysession_status: "{{ proxy_location.stickysession_status }}"
        utm_host: "{{ proxy_location.utm_host }}"
        utm_port: "{{ proxy_location.utm_port }}"
        utm_protocol: "{{ proxy_location.utm_protocol }}"
        utm_token: "{{ proxy_location.utm_token }}"
        validate_certs: "{{ proxy_location.validate_certs }}"
        websocket_passthrough: "{{ proxy_location.websocket_passthrough }}"
        access_control: "{{ proxy_location.access_control }}"

    - name: Update reverse proxy location
      community.general.utm_proxy_location:
        name: "{{ proxy_location.name }}"
        state: present
        path: /updated_path
        backend:
          - updated_server1
          - updated_server2
        auth_profile: UpdatedAuth
        allowed_networks:
          - 192.168.0.0/24
          - 10.0.0.0/16
        denied_networks:
          - 172.16.0.0/12
          - 192.168.1.0/24
        headers:
          updated_header1: updated_value1
          updated_header2: updated_value2
        hot_standby: false
        stickysession_id: UPDATED_JSESSIONID
        stickysession_status: false
        utm_host: updated-example.com
        utm_port: 8443
        utm_protocol: https
        utm_token: ABCDEFGHIJKLMNOPQRSTUVWXYZ
        validate_certs: true
        websocket_passthrough: false
        access_control: deny

    - name: Destroy reverse proxy location
      community.general.utm_proxy_location:
        name: "{{ proxy_location.name }}"
        state: absent

    - name: Test case for mixed case sensitivity - Access Control
      community.general.utm_proxy_location:
        name: Reverse Proxy
        state: present
        path: /access_control_test
        backend: ["server1"]
        auth_profile: BasicAuth
        allowed_networks: ["192.168.0.0/24", "10.0.0.0/16"]
        denied_networks: []
        headers: {}
        hot_standby: false
        stickysession_id: JSESSIONID
        stickysession_status: false
        utm_host: example.com
        utm_port: 8443
        utm_protocol: https
        utm_token: ABCDEFGHIJKLMNOPQRSTUVWXYZ
        validate_certs: false
        websocket_passthrough: true
        access_control: Allow

    - name: Test case for mixed case sensitivity - Path
      community.general.utm_proxy_location:
        name: Reverse Proxy
        state: present
        path: /mixedCaseSensitivePath
        backend: ["server1"]
        auth_profile: BasicAuth
        allowed_networks: ["192.168.0.0/24"]
        denied_networks: []
        headers: {}
        hot_standby: false
        stickysession_id: JSESSIONID
        stickysession_status: false
        utm_host: example.com
        utm_port: 8443
        utm_protocol: https
        utm_token: ABCDEFGHIJKLMNOPQRSTUVWXYZ
        validate_certs: false
        websocket_passthrough: true
        access_control: allow

    # Add more test cases based on other options and attributes of the module