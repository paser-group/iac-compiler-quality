- name: Test playbook for community.general.vertica_role module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Vertica database role
      community.general.vertica_role:
        cluster: "{{ cluster | uppercase }}"
        db: "{{ db | lowercase }}"
        login_user: "{{ login_user | swapcase }}"
        login_password: "{{ login_password }}"
        port: "{{ port | int }}"
        assigned_roles: "{{ assigned_roles }}"
        role: "{{ role }}"
        state: "{{ state }}"

      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result