---
- name: Test playbook for ansible.builtin.iptables module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure iptables rule
      ansible.builtin.iptables:
        chain: INPUT
        action: ACCEPT
        state: present
        in_interface: eth0
        destination: 10.1.1.1
        source: 10.1.1.2
        destination_port: 80
        protocol: tcp
        jump: LOG
        log_prefix: "IPTABLES LOG"

    - name: Test mixed case sensitivity bug
      ansible.builtin.iptables:
        chain: input
        action: accept
        state: present
        in_interface: eth0
        destination: 10.1.1.1
        source: 10.1.1.2
        destination_port: 80
        protocol: Tcp
        jump: LOG
        log_prefix: "IPTABLES LOG"