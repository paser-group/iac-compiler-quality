---
- name: Configure VOSS on nodes
  hosts: all
  gather_facts: false
  tasks:
    - name: Install community.network collection
      ansible.builtin.shell: ansible-galaxy collection install community.network
      
    - name: Configure VOSS on Extreme network devices
      community.network.voss_config:
        backup: true
        backup_options:
          dir: /var/backups/voss_config
        src: "{{ inventory_dir }}/voss.config"
        intended_config: "{{ inventory_dir }}/intended.config"
        parents: true
      register: voss_config_output

    - name: Print VOSS config output
      debug:
        var: voss_config_output

    - name: Generate a type-related bug
      set_fact:
        intended_config: "{{ inventory_dir }}/INTENDED.config"

    - name: Configure VOSS on Extreme network devices with mixed case sensitivity
      community.network.voss_config:
        backup: true
        backup_options:
          dir: /var/backups/voss_config
        src: "{{ inventory_dir }}/voss.config"
        intended_config: "{{ inventory_dir }}/INTENDED.config"
        parents: true
      register: voss_config_mixed_case_output

    - name: Print mixed case sensitivity output
      debug:
        var: voss_config_mixed_case_output