---
- hosts: localhost
  gather_facts: false

  vars:
    plugin_name: my-plugin
    plugin_bin: /usr/bin/logstash-plugin
    proxy_host: proxy.example.com
    proxy_port: 8888
    state: present
    version: latest

  tasks:
    - name: Install logstash plugin
      community.general.logstash_plugin:
        name: "{{ plugin_name }}"
        plugin_bin:
          - "{{ plugin_bin }}"
          - "{{ proxy_host }}"
        proxy_host: "{{ proxy_host }}"
        proxy_port: "{{ proxy_port }}"
        state: "{{ state }}"
        version: "{{ version }}"
      register: result