- hosts: localhost
  gather_facts: false

  tasks:
    - name: Getent example
      ansible.builtin.getent:
        database: "passwd"
        key: "{{ lookup('env', 'KEY') }}"
        service: "{{ lookup('env', 'SERVICE') }}"
        split: "{{ lookup('env', 'SPLIT') }}"
        fail_key: "{{ lookup('env', 'FAIL_KEY') }}"