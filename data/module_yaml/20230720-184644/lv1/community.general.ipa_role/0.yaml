---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Execute community.general.ipa_role module
      community.general.ipa_role:
        cn: "{{ CN | default('') }}"
        description: "{{ Description | default('') }}"
        group: "{{ Group | default([]) }}"
        host: "{{ Host | default([]) }}"
        hostgroup: "{{ Hostgroup | default([]) }}"
        ipa_host: "{{ IPA_Host | default('') }}"
        ipa_pass: "{{ IPA_Pass | default('') }}"
        ipa_port: "{{ IPA_Port | default(0) }}"
        ipa_prot: "{{ IPA_Prot | default('') }}"
        ipa_timeout: "{{ IPA_Timeout | default(0) }}"
        ipa_user: "{{ IPA_User | default('') }}"
        privilege: "{{ Privilege | default([]) }}"
        service: "{{ Service | default([]) }}"
        state: "{{ State | default('') }}"
        user: "{{ User | default([]) }}"
        validate_certs: "{{ Validate_Certs | default(false) }}"

      vars:
        CN: "testCn"
        Description: "testDescription"
        Group:
          - "group1"
          - "Group2"
        Host:
          - "host1"
          - "HOST2"
        Hostgroup:
          - "hostgroup1"
          - "HOSTGROUP2"
        IPA_Host: "test.ipa.com"
        IPA_Pass: "testPass"
        IPA_Port: 1234
        IPA_Prot: "tcp"
        IPA_Timeout: 10
        IPA_User: "testUser"
        Privilege:
          - "privilege1"
          - "PRIVILEGE2"
        Service:
          - "service1"
          - "SERVICE2"
        State: "present"
        User:
          - "user1"
          - "USER2"
        Validate_Certs: True