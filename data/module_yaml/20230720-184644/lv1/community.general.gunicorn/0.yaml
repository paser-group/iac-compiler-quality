---
- name: Run Gunicorn Server
  hosts: all
  gather_facts: false

  tasks:
    - name: Install community.general collection
      command: ansible-galaxy collection install community.general

    - name: Run Gunicorn Server
      community.general.gunicorn:
        app: "{{ '/path/to/app.py' }}"
        chdir: "{{ '/path/to/project' }}"
        config: "{{ '/path/to/gunicorn.conf.py' }}"
        pid: "{{ '/path/to/gunicorn.pid' }}"
        user: "{{ 'www-data' }}"
        venv: "{{ '/path/to/venv' }}"
        worker: "{{ 'sync' }}"
        # Add more options if needed

      register: gunicorn_result

    - name: Debug Gunicorn Result
      debug:
        var: gunicorn_result