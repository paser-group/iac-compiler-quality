---
- name: Test playbook for Ansible latent type-related bug exploration
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set key value pairs with mixed case values
      community.general.etcd3:
        state: present
        host: "{{ host }}"
        port: "{{ port }}"
        user: "{{ user }}"
        password: "{{ password }}"
        ca_cert: "{{ ca_cert }}"
        client_cert: "{{ client_cert }}"
        client_key: "{{ client_key }}"
        key: "{{ key }}"
        value: "{{ value }}"
      vars:
        host: "10.1.1.1"
        port: 2379
        user: "Admin"
        password: "MyPassword"
        ca_cert: "/etc/ssl/certs/ca_cert.pem"
        client_cert: "/etc/ssl/certs/client_cert.pem"
        client_key: "/etc/ssl/private/client_key.pem"
        key: "myKey"
        value: "myValue"

    - name: Delete key value pair with mixed case values
      community.general.etcd3:
        state: absent
        host: "{{ host }}"
        port: "{{ port }}"
        user: "{{ user }}"
        password: "{{ password }}"
        ca_cert: "{{ ca_cert }}"
        client_cert: "{{ client_cert }}"
        client_key: "{{ client_key }}"
        key: "{{ key }}"
      vars:
        host: "10.1.1.1"
        port: 2379
        user: "Admin"
        password: "MyPassword"
        ca_cert: "/etc/ssl/certs/ca_cert.pem"
        client_cert: "/etc/ssl/certs/client_cert.pem"
        client_key: "/etc/ssl/private/client_key.pem"
        key: "myKey"