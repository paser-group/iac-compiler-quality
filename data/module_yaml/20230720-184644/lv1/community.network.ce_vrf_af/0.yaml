---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false
  vars:
    vrf_name: "MyVPN"
    vrf_aftype: L3VPN
    route_distinguisher: "RD001"
    vpn_target_state: "Enable"
    vpn_target_type: "Import"
    vpn_target_value: "VPN001"
    evpn: "False"
    state: "Present"

  tasks:
    - name: Set VPN instance address family
      community.network.ce_vrf_af:
        vrf: "{{ vrf_name }}"
        vrf_aftype: "{{ vrf_aftype }}"
        route_distinguisher: "{{ route_distinguisher }}"
        vpn_target_state: "{{ vpn_target_state }}"
        vpn_target_type: "{{ vpn_target_type }}"
        vpn_target_value: "{{ vpn_target_value }}"
        evpn: "{{ evpn }}"
        state: "{{ state }}"
      register: result

    - name: Display playbook result
      debug:
        var: result