---
- name: Test atomic_image module
  hosts: localhost
  gather_facts: false
  vars:
    backend: docker
    name: test_image
    started: true
    state: present

  tasks:
    # Test with correct option values
    - name: Create atomic image
      community.general.atomic_image:
        backend: "{{ backend }}"
        name: "{{ name }}"
        started: "{{ started }}"
        state: "{{ state }}"
      register: result
    - debug:
        var: result

    # Test with mixed case backend value (should trigger a bug if present)
    - name: Test mixed case backend value
      community.general.atomic_image:
        backend: "{{ backend | lower }}"
        name: "{{ name }}"
        started: "{{ started }}"
        state: "{{ state }}"
      register: result
    - debug:
        var: result

    # Test with mixed case name value (should trigger a bug if present)
    - name: Test mixed case name value
      community.general.atomic_image:
        backend: "{{ backend }}"
        name: "{{ name | capitalize }}"
        started: "{{ started }}"
        state: "{{ state }}"
      register: result
    - debug:
        var: result

    # Test with mixed case started value (should trigger a bug if present)
    - name: Test mixed case started value
      community.general.atomic_image:
        backend: "{{ backend }}"
        name: "{{ name }}"
        started: "{{ started | upper }}"
        state: "{{ state }}"
      register: result
    - debug:
        var: result

    # Test with mixed case state value (should trigger a bug if present)
    - name: Test mixed case state value
      community.general.atomic_image:
        backend: "{{ backend }}"
        name: "{{ name }}"
        started: "{{ started }}"
        state: "{{ state | title }}"
      register: result
    - debug:
        var: result