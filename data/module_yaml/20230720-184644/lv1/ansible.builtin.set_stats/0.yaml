---
- name: Generate stats and test case scenarios
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set stats with mixed case sensitivity
      ansible.builtin.set_stats:
        aggregate: yes
        data:
          # Mixed case sensitivity
          TotalNodes: 4
          ubuntu1: 10
          CentOs1: 5

    - name: Display stats
      debug:
        msg: "{{ hostvars['localhost'].ansible_facts.ansible_statistics }}"

    - name: Perform type-related bug test case
      debug:
        msg: "Type-related bug triggered successfully"
      when:
        - "'TotalNodes' in hostvars['localhost'].ansible_facts.ansible_statistics"
        - "hostvars['localhost'].ansible_facts.ansible_statistics['TotalNodes'] != 4"