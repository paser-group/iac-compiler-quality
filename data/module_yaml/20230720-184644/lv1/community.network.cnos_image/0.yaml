---
- name: Perform firmware upgrade/download
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include community.network.cnos_image module
      include_tasks:
        file: "tasks/upgrade_download.yml"

    - name: Upgrade/Download Firmware
      community.network.cnos_image:
        deviceType: "switch"  # Correct type, but has mixed case sensitivity
        enablePassword: "enable123"  # Correct type, no mixed case sensitivity
        host: "{{ inventory_hostname }}"  # Correct type, no mixed case sensitivity
        imgpath: "/firmware/image.bin"  # Correct type, no mixed case sensitivity
        imgtype: "image.bin"  # Correct type, but has mixed case sensitivity
        outputfile: "/firmware/download.log"  # Correct type, no mixed case sensitivity
        password: "password123"  # Correct type, no mixed case sensitivity
        protocol: "https"  # Correct type, no mixed case sensitivity
        serverip: "10.0.0.1"  # Correct type, no mixed case sensitivity
        serverpassword: "server123"  # Correct type, no mixed case sensitivity
        serverusername: "admin"  # Correct type, no mixed case sensitivity
        username: "admin"  # Correct type, no mixed case sensitivity
      register: result

    - name: Debug result
      debug:
        var: result