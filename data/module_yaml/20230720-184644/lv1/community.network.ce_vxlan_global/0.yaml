- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: False

  vars:
    bridge_domain_id: None
    nvo3_acl_extend: None
    nvo3_ecmp_hash: None
    nvo3_eth_trunk_hash: None
    nvo3_gw_enhanced: None
    nvo3_prevent_loops: None
    nvo3_service_extend: None
    state: None
    tunnel_mode_vxlan: None

  tasks:
    - name: Set mixed case sensitivity values
      set_fact:
        bridge_domain_id: "NoNe"
        nvo3_acl_extend: "NOnE"
        nvo3_ecmp_hash: "noNe"
        nvo3_eth_trunk_hash: "NONe"
        nvo3_gw_enhanced: "NoNE"
        nvo3_prevent_loops: "nONE"
        nvo3_service_extend: "NoNE"
        state: "NonE"
        tunnel_mode_vxlan: "nOnE"

    - name: Debug mixed case sensitivity values
      debug:
        var: item
      loop:
        - bridge_domain_id
        - nvo3_acl_extend
        - nvo3_ecmp_hash
        - nvo3_eth_trunk_hash
        - nvo3_gw_enhanced
        - nvo3_prevent_loops
        - nvo3_service_extend
        - state
        - tunnel_mode_vxlan

    - name: Trigger Ansible latent bug with mixed case sensitivity values
      community.network.ce_vxlan_global:
        bridge_domain_id: "{{ bridge_domain_id }}"
        nvo3_acl_extend: "{{ nvo3_acl_extend }}"
        nvo3_ecmp_hash: "{{ nvo3_ecmp_hash }}"
        nvo3_eth_trunk_hash: "{{ nvo3_eth_trunk_hash }}"
        nvo3_gw_enhanced: "{{ nvo3_gw_enhanced }}"
        nvo3_prevent_loops: "{{ nvo3_prevent_loops }}"
        nvo3_service_extend: "{{ nvo3_service_extend }}"
        state: "{{ state }}"
        tunnel_mode_vxlan: "{{ tunnel_mode_vxlan }}"
      register: results

    - name: Debug Ansible latent bug
      debug:
        var: results