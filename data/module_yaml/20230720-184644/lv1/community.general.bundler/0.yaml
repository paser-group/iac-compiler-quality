- name: Install Ruby Gem dependencies using bundler
  hosts: all
  gather_facts: false
  vars:
    binstub_directory: "/path/to/binstubs"
    chdir: "/path/to/project"
    clean: false
    deployment_mode: false
    exclude_groups:
      - development
      - test
    executable: "/usr/local/bin/bundle"
    extra_args: ""
    gem_path: "/path/to/gems"
    gemfile: "/path/to/project/Gemfile"
    local: false
    state: present
    user_install: false

  tasks:
    - name: Install Ruby Gem dependencies
      community.general.bundler:
        binstub_directory: "{{ binstub_directory }}"
        chdir: "{{ chdir }}"
        clean: "{{ clean }}"
        deployment_mode: "{{ deployment_mode }}"
        exclude_groups: "{{ exclude_groups }}"
        executable: "{{ executable }}"
        extra_args: "{{ extra_args }}"
        gem_path: "{{ gem_path }}"
        gemfile: "{{ gemfile }}"
        local: "{{ local }}"
        state: "{{ state }}"
        user_install: "{{ user_install }}"
      register: bundler_output

    - name: Print bundler output
      debug:
        var: bundler_output

    # Test case to trigger potential bug: mixed case sensitivity for string configuration values.
    - name: Install Ruby Gem dependencies with mixed case sensitivity
      community.general.bundler:
        binstub_directory: "{{ binstub_directory }}"
        chdir: "{{ chdir }}"
        clean: "{{ CLEAN }}"  # incorrect variable name
        deployment_mode: "{{ Deployment_Mode }}"  # incorrect variable name
        exclude_groups: "{{ exclude_groups }}"
        executable: "{{ Executable }}"  # incorrect variable name
        extra_args: "{{ extra_args }}"
        gem_path: "{{ gem_path }}"
        gemfile: "{{ gemfile }}"
        local: "{{ Local }}"  # incorrect variable name
        state: "{{ state }}"
        user_install: "{{ user_install }}"
      register: bundler_output_mixed_case

    - name: Print bundler output with mixed case sensitivity
      debug:
        var: bundler_output_mixed_case