---
- name: Test playbook for community.network.avi_cloudproperties module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Ensure Cloud Properties are configured
      community.network.avi_cloudproperties:
        controller: "https://{{ controller }}/api"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: present
        api_context: {}
        api_version: '17.2.1'
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_credentials: {}
        avi_disable_session_cache_as_fact: false
        cc_props: null
        cc_vtypes: null
        hyp_props: null
        info: null
        tenant_uuid: null
        url: null
        uuid: null

      register: cloud_properties

    - name: Display Cloud Properties
      debug:
        var: cloud_properties

    # Test case: Mixed case sensitivity for string configuration values
    - name: Test mixed case sensitivity
      community.network.avi_cloudproperties:
        controller: "https://{{ controller }}/api"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        state: "{{ STATE | default('present') }}"  # mix case sensitivity
        api_context: {}
        api_version: '17.2.1'
        avi_api_patch_op: null
        avi_api_update_method: null
        avi_credentials: {}
        avi_disable_session_cache_as_fact: false
        cc_props: null
        cc_vtypes: null
        hyp_props: null
        info: null
        tenant_uuid: null
        url: null
        uuid: null

      register: mixed_case_sensitive_config

    - name: Display mixed case sensitive config result
      debug:
        var: mixed_case_sensitive_config