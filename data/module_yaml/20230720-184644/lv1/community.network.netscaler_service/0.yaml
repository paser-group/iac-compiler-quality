---
- name: Test playbook for community.network.netscaler_service module
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    nitro_user: "admin"
    nitro_pass: "secret"
    nitro_protocol: "https"
    nitro_timeout: 10
    nsip: "10.1.1.1"

  tasks:
    - name: Create a service
      community.network.netscaler_service:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        name: "Service1"
        ip: "10.1.1.100"
        port: 80
        state: present
      register: result_create_service1

    - name: Debug result
      debug:
        var: result_create_service1

    - name: Update service attributes with mixed case values
      community.network.netscaler_service:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        name: "Service1"
        state: present
        appflowlog: None
        cip: none
        cka: True
        cleartextport: NOne
        clttimeout: none
        cmp: trUE
        comment: "This is a test"
        disabled: TRUE
        dnSProfileName: "Test"
        dowNStaTEFluSh: YES
        graceful: TruE
        healthmonitor: TruE
        ipaddress: "10.1.1.101"
        port: 8080
      register: result_update_service1

    - name: Debug result
      debug:
        var: result_update_service1