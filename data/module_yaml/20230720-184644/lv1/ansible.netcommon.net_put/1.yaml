---
- name: Copy a file from Ansible Controller to a remote target
  hosts: all
  gather_facts: false

  vars:
    Dest: "/opt/dest/file.txt"
    Mode: "0644"
    Protocol: "SCP"
    Src: "/home/ansible/src/file.txt"

  tasks:
    - name: Copy file
      ansible.netcommon.net_put:
        dest: "{{ Dest }}"
        mode: "{{ Mode }}"
        protocol: "{{ Protocol }}"
        src: "{{ Src }}"
      register: result

    - name: Display result
      debug:
        var: result

    - name: Verify file transfer
      stat:
        path: "{{ Dest }}"
      register: file_stats

    - name: Display file stats
      debug:
        var: file_stats