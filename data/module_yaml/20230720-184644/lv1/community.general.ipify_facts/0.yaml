---
- name: Retrieve public IP address
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Get public IP address
      community.general.ipify_facts:
        api_url: "{{ api_url }}"
        timeout: "{{ timeout }}"
        validate_certs: "{{ validate_certs }}"
      register: ipify

    - name: Debug public IP
      debug:
        var: ipify