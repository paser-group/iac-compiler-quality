---
- name: Unveiling Type-Related Bugs in Ansible
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required Ansible collections
      ansible.builtin.package:
        name: community.general
        state: present

    - name: Generate GitHub deploy key
      community.general.github_deploy_key:
        github_url: "https://github.com/ansible/ansible"
        repo: "ansible/ansible"
        name: "Ansible Deploy Key"
        key: "/path/to/deploy_key"
        state: present

    - name: Print debug message
      debug:
        msg: "Deploy key generated successfully"

    - name: Change deploy key state to absent
      community.general.github_deploy_key:
        github_url: "https://github.com/ansible/ansible"
        repo: "ansible/ansible"
        name: "Ansible Deploy Key"
        state: absent

    - name: Print debug message
      debug:
        msg: "Deploy key removed successfully"