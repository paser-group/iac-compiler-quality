---
- name: Test community.network.ce_mlag_interface module
  hosts: all
  gather_facts: false
  tasks:
    - name: Manage MLAG interfaces
      community.network.ce_mlag_interface:
        interface: "{{ interface }}"
        mlag_id: "{{ mlag_id }}"
        mlag_priority_id: "{{ mlag_priority_id }}"
        mlag_system_id: "{{ mlag_system_id }}"
        mlag_error_down: "{{ mlag_error_down }}"
        eth_trunk_id: "{{ eth_trunk_id }}"
        dfs_group_id: "{{ dfs_group_id }}"
        state: "{{ state }}"
        connection: local
      register: result
      ignore_errors: true

    - name: Debug result
      debug:
        var: result

- name: Test case - Potential latent type-related bug
  hosts: localhost
  gather_facts: false
  vars:
    interface: ETH1
    mlag_id: "ABCDE"
    mlag_priority_id: 123
    mlag_system_id: "Huawei"
    mlag_error_down: "true"
    eth_trunk_id: 1
    dfs_group_id: "GROUP1"
    state: "present"
  tasks:
    - import_playbook: playbook.yml