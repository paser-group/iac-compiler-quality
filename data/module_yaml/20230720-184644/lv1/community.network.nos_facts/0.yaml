---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    my_devices:
      - name: node1
        os: Ubuntu
        ip_address: 10.1.1.1
      - name: node2
        os: Alpine
        ip_address: 10.1.1.2
      - name: node3
        os: CentOS
        ip_address: 10.1.1.3
      - name: node4
        os: Red Hat
        ip_address: 10.1.1.4

  tasks:
    - name: Gather network OS facts
      community.network.nos_facts:
        gather_subset: None
      register: facts_result

    - name: Print facts
      debug:
        var: facts_result