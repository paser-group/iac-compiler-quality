---
- name: Test playbook for 'community.general.rax_cbs' module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create a Rackspace Cloud Block Storage
      community.general.rax_cbs:
        api_key: "{{ 'your_rackspace_api_key' }}"
        region: "{{ 'your_rackspace_region' }}"
        volume_name: "{{ 'TestVolume' }}"
        state: "{{ 'present' }}"
      register: result

    - name: Debug result
      debug:
        var: result

    - name: Assert mixed case sensitivity bug
      assert:
        that:
          - result is defined
          - result.volume_details.name == 'TestVolume'
      fail_msg: "Mixed case sensitivity bug triggered! Expected volume name to be 'TestVolume'"

    # Additional test cases can be added here based on other attributes and options of the 'rax_cbs' module.

    - name: Delete the Rackspace Cloud Block Storage
      community.general.rax_cbs:
        api_key: "{{ 'your_rackspace_api_key' }}"
        region: "{{ 'your_rackspace_region' }}"
        volume_name: "{{ 'TestVolume' }}"
        state: "{{ 'absent' }}"
      register: result
      
    - name: Debug result
      debug:
        var: result