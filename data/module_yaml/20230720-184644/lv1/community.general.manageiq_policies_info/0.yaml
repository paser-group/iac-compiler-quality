- name: Test manageiq_policies_info module
  hosts: localhost
  gather_facts: false

  vars:
    manageiq_connection:
      url: https://my-manageiq-instance.com
      username: admin
      password: mypassword

    resource_id: "123"
    resource_name: MyResource
    resource_type: VirtualMachine

  tasks:
    - name: Get manageiq policies information
      community.general.manageiq_policies_info:
        manageiq_connection: "{{ manageiq_connection }}"
        resource_id: "{{ resource_id }}"
        resource_name: "{{ resource_name }}"
        resource_type: "{{ resource_type }}"
      register: policies_info_result

    - name: Print policies information
      debug:
        var: policies_info_result