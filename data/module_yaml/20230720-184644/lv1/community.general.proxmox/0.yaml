---
- name: Manage Proxmox instances
  hosts: localhost
  gather_facts: false

  vars:
    API_Host: "https://your-proxmox-host.com:8006"
    API_User: "your-username"
    API_Password: "your-password"
    Node: "your-node"
    VMID: 100
    OSTemplate: "your-ostemplate"
    Storage: "your-storage"

  tasks:
    - name: Create a new Proxmox instance
      community.general.proxmox:
        api_host: "{{ API_Host }}"
        api_user: "{{ API_User }}"
        api_password: "{{ API_Password }}"
        node: "{{ Node }}"
        vmid: "{{ VMID }}"
        ostemplate: "{{ OSTemplate }}"
        storage: "{{ Storage }}"
        state: present
      register: result

    - name: Debug the result
      debug:
        var: result