---
- name: RHSM Release Module Test
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set RHSM Release
      community.general.rhsm_release:
        release: "{{ test_release | int }}"
      register: result_set
      when: test_release is defined

    - name: Unset RHSM Release
      community.general.rhsm_release:
        state: absent
      register: result_unset
      when: test_release is undefined