---
- name: Test playbook for community.general.heroku_collaborator module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: YOUR_HEROKU_API_KEY
    apps:
      - YOUR_HEROKU_APP_NAME
    state: present
    suppress_invitation: true
    user: User@example.com # Mixed case value

  tasks:
    - name: Add Heroku collaborator
      community.general.heroku_collaborator:
        api_key: "{{ api_key }}"
        apps: "{{ apps }}"
        state: "{{ state }}"
        suppress_invitation: "{{ suppress_invitation }}"
        user: "{{ user }}"
      register: result

    - name: Debug output
      debug:
        var: result

    - name: Delete Heroku collaborator
      community.general.heroku_collaborator:
        api_key: "{{ api_key }}"
        apps: "{{ apps }}"
        state: absent
        user: "{{ user }}"
      register: result2

    - name: Debug output
      debug:
        var: result2