---
- name: Test playbook for 'community.general.ibm_sa_host' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add host to IBM Spectrum Accelerate
      community.general.ibm_sa_host:
        cluster: "my_cluster"
        domain: "my_domain"
        endpoints: "https://my_cluster_endpoint:9440"
        host: "10.1.1.1"
        iscsi_chap_name: "my_chap_user"
        iscsi_chap_secret: "my_chap_pass"
        password: "admin_password"
        state: "present"
        username: "admin_user"
      register: add_host_output
      no_log: true

    - name: Remove host from IBM Spectrum Accelerate
      community.general.ibm_sa_host:
        cluster: "my_cluster"
        domain: "my_domain"
        endpoints: "https://my_cluster_endpoint:9440"
        host: "10.1.1.1"
        password: "admin_password"
        state: "absent"
        username: "admin_user"
      register: remove_host_output
      no_log: true

    - name: Print results
      debug:
        var: add_host_output

      debug:
        var: remove_host_output