---
- name: Test Jenkins Plugin Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install Jenkins Plugin with mixed case option
      community.general.jenkins_plugin:
        name: "{{ item }}"
        version: "{{ version }}"
      loop:
        - PluginOne
        - pLuGinTwO
      register: result

    - name: Print Jenkins Plugin Installation Output
      debug:
        var: result

    - name: Check Jenkins Plugin Installation Status
      fail:
        msg: "Failed to install plugin: {{ item.item }}"
      loop: "{{ result.results }}"
      when: "'PluginOne' in item.cmd or 'pLuGinTwO' in item.cmd"