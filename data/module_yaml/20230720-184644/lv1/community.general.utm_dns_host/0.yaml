---
- name: Test playbook for latent type-related bugs in Ansible
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create UTM DNS Host
      community.general.utm_dns_host:
        hostname: "{{ item.hostname }}"
        name: "{{ item.name }}"
        address: "{{ item.address }}"
        state: present
        utm_host: "{{ item.utm_host }}"
        utm_port: "{{ item.utm_port }}"
        utm_protocol: "{{ item.utm_protocol }}"
        utm_token: "{{ item.utm_token }}"
        validate_certs: "{{ item.validate_certs }}"
      loop:
        - { name: "DNS Host 1", hostname: "host1", address: "10.1.1.100", utm_host: "utm1", utm_port: 80, utm_protocol: "http", utm_token: "token1", validate_certs: true }
        - { name: "DNS Host 2", hostname: "host2", address: "10.1.1.200", utm_host: "Utm1", utm_port: 443, utm_protocol: "https", utm_token: "token2", validate_certs: false }
        - { name: "DNS Host 3", hostname: "host3", address: "10.1.1.300", utm_host: "utm2", utm_port: 8080, utm_protocol: "http", utm_token: "token3", validate_certs: true }