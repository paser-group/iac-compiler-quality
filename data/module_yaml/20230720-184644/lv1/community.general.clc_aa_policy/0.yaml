---
- name: Test playbook for  community.general.clc_aa_policy module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create Anti Affinity Policy
      community.general.clc_aa_policy:
        location: "{{ DATAcenterName }}"
        name: "{{ TestPolicy }}"
        state: Present
      register: result

    - debug:
        var: result

    - name: Delete Anti Affinity Policy
      community.general.clc_aa_policy:
        location: "{{ DATAcenterName }}"
        name: "{{ TestPolicy }}"
        state: Absent
      register: delete_result

    - debug:
        var: delete_result