---
- name: Test Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Configure connection to Avi Controller
      community.network.avi_api_version:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        api_version: "{{ api_version }}"
        avi_credentials:
          controller: "{{ controller }}"
          username: "{{ username }}"
          password: "{{ password }}"
        api_context:
          tenant: "{{ tenant }}"
          tenant_uuid: "{{ tenant_uuid }}"
        avi_disable_session_cache_as_fact: "{{ avi_disable_session_cache_as_fact }}"
      register: result
      delegate_to: localhost

    - name: Debug API Version
      debug:
        var: result.api_version
    
    - name: Debug Tenant
      debug:
        var: result.config["{{ tenant | lower() }}"]

    - name: Debug Tenant UUID
      debug:
        var: result.config["{{ tenant_uuid | lower() }}"]
    
    - name: Debug Controller
      debug:
        var: result.config.controller
    
    - name: Debug Username
      debug:
        var: result.config.username
    
    - name: Debug Password
      debug:
        var: result.config.password