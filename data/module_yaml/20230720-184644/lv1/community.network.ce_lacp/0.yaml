---
- name: Test playbook for community.network.ce_lacp module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Eth-Trunk 1 interface
      community.network.ce_lacp:
        trunk_id: 1
        mode: on
        state: present
        system_id: "ABCD1234"
        timeout_type: "short"
        global_priority: 100
        max_active_linknumber: 4
        collector_delay: 3
        preempt_enable: true
        preempt_delay: 10
        mixed_rate_link_enable: false
        priority: 10
        state_flapping: true
        unexpected_mac_disable: true
      register: result

    - name: Debug Ansible compiler bug
      debug:
        var: result

    - name: Modify Eth-Trunk 1 interface
      community.network.ce_lacp:
        trunk_id: 1
        mode: "on"
        state: absent
        system_id: "EFGH5678"
        timeout_type: "Short"
        global_priority: "200"
        max_active_linknumber: 8
        collector_delay: 5
        preempt_enable: "false"
        preempt_delay: 20
        mixed_rate_link_enable: True
        priority: "20"
        state_flapping: "yes"
        unexpected_mac_disable: false
      register: result

    - name: Debug Ansible compiler bug
      debug:
        var: result