---
- name: Test playbook for the community.general.gitlab_group_members module
  hosts: localhost
  gather_facts: false
  vars:
    access_level: "developer"
    api_job_token: "API_JOB_TOKEN"
    api_oauth_token: "API_OAUTH_TOKEN"
    api_password: "API_PASSWORD"
    api_token: "API_TOKEN"
    api_url: "https://gitlab.example.com/api/v4"
    api_username: "admin"
    gitlab_group: "group1"
    gitlab_user:
      - "user1"
      - "user2"
    gitlab_users_access:
      - "guest"
      - "reporter"
    purge_users: []
    state: "present"
    validate_certs: true

  tasks:
    - name: Include the gitlab_group_members module
      include_role:
        name: community.general.gitlab_group_members

      vars:
        access_level: "{{ access_level }}"
        api_job_token: "{{ api_job_token }}"
        api_oauth_token: "{{ api_oauth_token }}"
        api_password: "{{ api_password }}"
        api_token: "{{ api_token }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        gitlab_group: "{{ gitlab_group }}"
        gitlab_user: "{{ gitlab_user }}"
        gitlab_users_access: "{{ gitlab_users_access }}"
        purge_users: "{{ purge_users }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"