---
- name: Explore Ansible Latent Type-Related Bugs
  hosts: localhost
  gather_facts: false
 
  tasks:
    - name: Create a VM
      community.general.one_vm:
        api_url: "https://api_url"
        api_username: "admin"
        api_password: "password"
        attributes:
          name: "TestVm"
          cpu: 1
          memory: 512
          image: "ubuntu"
          network:
            - name: "node-net"

    - name: Terminate the VM
      community.general.one_vm:
        api_url: "https://api_url"
        api_username: "admin"
        api_password: "password"
        attributes:
          name: "TestVm"
        state: "absent"