---
- name: Configure Layer 2 switchport interfaces on HUAWEI devices
  hosts: switches
  gather_facts: false

  tasks:
    - name: Configure switchport
      community.network.ce_switchport:
        default_vlan: "{{ default_vlan }}"
        interface: "{{ interface }}"
        mode: "{{ mode }}"
        pvid_vlan: "{{ pvid_vlan }}"
        state: present
        tagged_vlans: "{{ tagged_vlans }}"
        trunk_vlans: "{{ trunk_vlans }}"
        untagged_vlans: "{{ untagged_vlans }}"
      register: result

    - name: Print result
      debug:
        var: result