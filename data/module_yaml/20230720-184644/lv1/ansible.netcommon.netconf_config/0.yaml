---
- name: Ansible Latent Type-Related Bug Test
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure NETCONF using netconf_config module
      ansible.netcommon.netconf_config:
        target: "{{ target }}"
        backup: "{{ backup }}"
        backup_options: "{{ backup_options }}"
        commit: "{{ commit }}"
        confirm: "{{ confirm }}"
        confirm_commit: "{{ confirm_commit }}"
        content: "{{ content }}"
        default_operation: "{{ default_operation }}"
        delete: "{{ delete }}"
        error_option: "{{ error_option }}"
        format: "{{ format }}"
        get_filter: "{{ get_filter }}"
        lock: "{{ lock }}"
        save: "{{ save }}"
        source_datastore: "{{ source_datastore }}"
        validate: "{{ validate }}"

      vars:
        target: "{{ target | default('running') }}"
        backup: "{{ backup | default(false) }}"
        backup_options:
          archive_dir: "{{ archive_dir | default('backup') }}"
          simple_crypto_key: "{{ simple_crypto_key | default(false) }}"
          encrypt_secure: "{{ encrypt_secure | default(false) }}"
          differ: "{{ differ | default(false) }}"
        commit: "{{ commit | default(true) }}"
        confirm: "{{ confirm | default(0) }}"
        confirm_commit: "{{ confirm_commit | default(true) }}"
        content: "{{ content | default('') }}"
        default_operation: "{{ default_operation | default('merge') }}"
        delete: "{{ delete | default(false) }}"
        error_option: "{{ error_option | default('rollback') }}"
        format: "{{ format | default('xml') }}"
        get_filter: "{{ get_filter | default('') }}"
        lock: "{{ lock | default('') }}"
        save: "{{ save | default(false) }}"
        source_datastore: "{{ source_datastore | default('') }}"
        validate: "{{ validate | default(false) }}"

      register: result

    - name: Display result
      debug:
        var: result