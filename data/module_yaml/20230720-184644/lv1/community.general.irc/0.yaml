---
- name: Test playbook for type-related bugs in Ansible IRC module (community.general.irc)
  hosts: localhost
  gather_facts: false
  
  vars:
    irc_channel: "#ansible"
    irc_color: "red"
    irc_key: "password"
    irc_message: "Hello from Ansible!"
    irc_nickname: "ansible_user"
    irc_nickname_invites: []
    irc_part: False
    irc_password: ""
    irc_port: 6667
    irc_server: "irc.freenode.net"
    irc_style: "bold"
    irc_timeout: 10
    irc_topic: "Ansible"
    irc_use_ssl: False

  tasks:
    - name: Install required packages
      package:
        name: python3-irc
        state: present
      become: true

    - name: Send IRC message
      community.general.irc:
        nick: "{{ irc_nickname }}"
        channel: "{{ irc_channel }}"
        msg: "{{ irc_message }}"
        color: "{{ irc_color | lower }}"
        key: "{{ irc_key }}"
        nick_to: "{{ irc_nickname_invites }}"
        part: "{{ irc_part }}"
        passwd: "{{ irc_password }}"
        port: "{{ irc_port }}"
        server: "{{ irc_server }}"
        style: "{{ irc_style }}"
        timeout: "{{ irc_timeout }}"
        topic: "{{ irc_topic }}"
        use_ssl: "{{ irc_use_ssl }}"
      register: irc_output

    - name: Debug IRC output
      debug:
        var: irc_output