---
- name: Test playbook for 'community.general.zypper_repository' module
  hosts: localhost
  gather_facts: false

  vars:
    auto_import_keys: true
    autorefresh: true
    description: "Test repo description"
    disable_gpg_check: false
    enabled: True     # Here, 'True' has uppercase 'T' which may cause a latent type-related bug
    name: "Test Repo"
    overwrite_multiple: false
    priority: 10
    repo: "http://example.com/repo"
    runrefresh: false  # Same here, 'false' has uppercase 'F'
    state: "present"   # Also, 'present' is quoted as a string to test case sensitivity

  tasks:
    - name: Add Zypper Repository
      community.general.zypper_repository:
        auto_import_keys: "{{ auto_import_keys }}"
        autorefresh: "{{ autorefresh }}"
        description: "{{ description }}"
        disable_gpg_check: "{{ disable_gpg_check }}"
        enabled: "{{ enabled }}"
        name: "{{ name }}"
        overwrite_multiple: "{{ overwrite_multiple }}"
        priority: "{{ priority }}"
        repo: "{{ repo }}"
        runrefresh: "{{ runrefresh }}"
        state: "{{ state }}"
      register: repo_result

    - name: Display Zypper Repository Result
      debug:
        var: repo_result

    - name: Remove Zypper Repository
      community.general.zypper_repository:
        name: "{{ name }}"
        state: absent
      register: remove_result

    - name: Display Zypper Repository Removal Result
      debug:
        var: remove_result