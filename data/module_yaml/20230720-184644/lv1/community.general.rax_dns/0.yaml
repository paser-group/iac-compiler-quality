---
- name: Test playbook for 'community.general.rax_dns' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create domain
      community.general.rax_dns:
        api_key: "YOUR_API_KEY"
        auth_endpoint: "https://auth.api.example.com"
        comment: "Test domain"
        credentials: "/path/to/credentials"
        email: "test@example.com"
        env: "production"
        identity_type: "user"
        name: "example.com"
        region: "us-east"
        state: "present"
        tenant_id: "12345"
        tenant_name: "test_tenant"
        ttl: 3600
        username: "testuser"
        validate_certs: false

    - name: Update domain
      community.general.rax_dns:
        api_key: "YOUR_API_KEY"
        auth_endpoint: "https://auth.api.example.com"
        comment: "Updated test domain"
        credentials: "/path/to/credentials"
        email: "test@example.com"
        env: "staging"
        identity_type: "user"
        name: "example.com"
        region: "us-west"
        state: "present"
        tenant_id: "56789"
        tenant_name: "test_tenant"
        ttl: 1800
        username: "testuser"
        validate_certs: true

    - name: Delete domain
      community.general.rax_dns:
        api_key: "YOUR_API_KEY"
        auth_endpoint: "https://auth.api.example.com"
        comment: "Deleting test domain"
        credentials: "/path/to/credentials"
        email: "test@example.com"
        env: "development"
        identity_type: "user"
        name: "example.com"
        region: "us-west"
        state: "absent"
        tenant_id: "56789"
        tenant_name: "test_tenant"
        ttl: 1800
        username: "testuser"
        validate_certs: true