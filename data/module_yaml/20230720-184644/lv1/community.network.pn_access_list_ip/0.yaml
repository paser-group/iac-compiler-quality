---
- name: Test playbook for Ansible latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    pn_cliswitch: "{{ inventory_hostname }}"

  tasks:
    - name: Add access list IP for different nodes
      community.network.pn_access_list_ip:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_ip: "{{ pn_ip }}"
        pn_name: "{{ pn_name }}"
        state: "{{ state | default('present') }}"
      loop:
        - { pn_ip: "10.1.1.1", pn_name: "ubuntu1" }
        - { pn_ip: "10.1.1.2", pn_name: "alpine1" }
        - { pn_ip: "10.1.1.3", pn_name: "centos1" }
        - { pn_ip: "10.1.1.4", pn_name: "redhat1" }
      loop_control:
        loop_var: pn_node