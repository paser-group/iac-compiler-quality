---
- name: Test Ansible Type-Related Bugs
  hosts: localhost
  gather_facts: false

  vars:
    api_token: "YOUR_API_TOKEN"
    project_id: "YOUR_PROJECT_ID"
    region: "par1"
    api_url: "https://api.scaleway.com/functions/v1alpha1"
    name: "test-function"
    description: "This is a test function"
    state: "present"
    api_timeout: 60
    wait: true
    wait_timeout: 300
    wait_sleep_time: 5
    validate_certs: false
    environment_variables:
      VAR_ONE: "value_one"
      var_two: "value_two"
    secret_environment_variables:
      SECRET_VAR: "secret_value"

  tasks:
    - name: Create Scaleway Function Namespace
      community.general.scaleway_function_namespace:
        api_token: "{{ api_token }}"
        project_id: "{{ project_id }}"
        region: "{{ region }}"
        api_url: "{{ api_url }}"
        name: "{{ name }}"
        description: "{{ description }}"
        state: "{{ state }}"
        api_timeout: "{{ api_timeout }}"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"
        wait_sleep_time: "{{ wait_sleep_time }}"
        validate_certs: "{{ validate_certs }}"
        environment_variables: "{{ environment_variables }}"
        secret_environment_variables: "{{ secret_environment_variables }}"
      register: result

    - name: Debug Result
      debug:
        var: result