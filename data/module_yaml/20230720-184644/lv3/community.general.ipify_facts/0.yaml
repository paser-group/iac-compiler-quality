---
- name: Retrieve Public IP Address
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Get Public IP
      community.general.ipify_facts:
        api_url: "https://api.ipify.org"
        timeout: 5
        validate_certs: true
      register: ipify_result

    - name: Print Public IP
      debug:
        var: ipify_result.fact

- name: Test Cases
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with bytes
      community.general.ipify_facts:
        api_url: b"https://api.ipify.org"
        timeout: 5
        validate_certs: true
      register: bytes_result

    - name: Print bytes result
      debug:
        var: bytes_result

    - name: Test with strings
      community.general.ipify_facts:
        api_url: "https://api.ipify.org"
        timeout: "5"
        validate_certs: "true"
      register: strings_result

    - name: Print strings result
      debug:
        var: strings_result