- name: Ansible Latent Bug Finder Playbook
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Configure Network Manager for Ubuntu1
      community.general.nmcli:
        cmd: general
        conn_name: "{{ item.conn_name }}"
        state: "{{ item.state }}"
        type: "{{ item.type }}"
        ip4: "{{ item.ip4 }}"
        ip6: "{{ item.ip6 }}"
        dns4: "{{ item.dns4 }}"
        dns6: "{{ item.dns6 }}"
        gw4: "{{ item.gw4 }}"
        gw6: "{{ item.gw6 }}"
        ssid: "{{ item.ssid }}"
        wifi_sec: "{{ item.wifi_sec }}"
      loop:
        - conn_name: ubuntu1
          state: present
          type: ethernet
          ip4: ['10.1.1.1/24']
          ip6: ['2001:db8::1/64']
          dns4: ['8.8.8.8', '8.8.4.4']
          dns6: ['2001:4860:4860::8888', '2001:4860:4860::8844']
          gw4: '10.1.1.254'
          gw6: '2001:db8::ffff'
          ssid: ''
          wifi_sec: {}

    - name: Configure Network Manager for Alpine1
      community.general.nmcli:
        cmd: general
        conn_name: "{{ item.conn_name }}"
        state: "{{ item.state }}"
        type: "{{ item.type }}"
        ip4: "{{ item.ip4 }}"
        ip6: "{{ item.ip6 }}"
        dns4: "{{ item.dns4 }}"
        dns6: "{{ item.dns6 }}"
        gw4: "{{ item.gw4 }}"
        gw6: "{{ item.gw6 }}"
      loop:
        - conn_name: alpine1
          state: present
          type: ethernet
          ip4: ['10.1.1.2/24']
          ip6: ['2001:db8::2/64']
          dns4: ['8.8.8.8']
          dns6: ['2001:4860:4860::8888']
          gw4: '10.1.1.254'
          gw6: '2001:db8::ffff'

    - name: Configure Network Manager for CentOS1
      community.general.nmcli:
        cmd: general
        conn_name: "{{ item.conn_name }}"
        state: "{{ item.state }}"
        type: "{{ item.type }}"
        ip4: "{{ item.ip4 }}"
        ip6: "{{ item.ip6 }}"
        dns4: "{{ item.dns4 }}"
        dns6: "{{ item.dns6 }}"
        gw4: "{{ item.gw4 }}"
        gw6: "{{ item.gw6 }}"
      loop:
        - conn_name: centos1
          state: present
          type: ethernet
          ip4: ['10.1.1.3/24']
          ip6: ['2001:db8::3/64']
          dns4: ['8.8.8.8']
          dns6: ['2001:4860:4860::8888']
          gw4: '10.1.1.254'
          gw6: '2001:db8::ffff'

    - name: Configure Network Manager for RedHat1
      community.general.nmcli:
        cmd: general
        conn_name: "{{ item.conn_name }}"
        state: "{{ item.state }}"
        type: "{{ item.type }}"
        ip4: "{{ item.ip4 }}"
        ip6: "{{ item.ip6 }}"
        dns4: "{{ item.dns4 }}"
        dns6: "{{ item.dns6 }}"
        gw4: "{{ item.gw4 }}"
        gw6: "{{ item.gw6 }}"
      loop:
        - conn_name: redhat1
          state: present
          type: ethernet
          ip4: ['10.1.1.4/24']
          ip6: ['2001:db8::4/64']
          dns4: ['8.8.8.8']
          dns6: ['2001:4860:4860::8888']
          gw4: '10.1.1.254'
          gw6: '2001:db8::ffff'