---
- name: Run netconf command on HUAWEI
  hosts: all
  gather_facts: false

  tasks:
    - name: Run netconf command
      community.network.ce_netconf:
        host: "{{ inventory_hostname }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        port: "{{ ansible_ssh_port | default('22') }}"
        rpc: "show version"
      register: result

    - name: Debug netconf result
      debug:
        var: result