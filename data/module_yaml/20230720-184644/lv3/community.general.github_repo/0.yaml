---
- name: Manage GitHub Repository
  hosts: localhost
  gather_facts: false
 
  tasks:
    - name: Create GitHub repository
      community.general.github_repo:
        name: "test_repository"
        api_url: "https://api.github.com/"
        username: "your_github_username"
        password: "your_github_password"
        access_token: "your_github_access_token"
        organization: "your_github_organization"
        private: false
        state: present
        description: "{{ 'This is a test repository' }}"
        force_defaults: true

    - name: Print repository information
      debug:
        var: community.general.github_repo_info
  
    - name: Update GitHub repository description
      community.general.github_repo:
        name: "test_repository"
        api_url: "https://api.github.com/"
        username: "your_github_username"
        password: "your_github_password"
        access_token: "your_github_access_token"
        organization: "your_github_organization"
        private: false
        state: present
        description:  "{{ 'New description' }}"
        force_defaults: true

    - name: Print updated repository information
      debug:
        var: community.general.github_repo_info

    - name: Delete GitHub repository
      community.general.github_repo:
        name: "test_repository"
        api_url: "https://api.github.com/"
        username: "your_github_username"
        password: "your_github_password"
        access_token: "your_github_access_token"
        organization: "your_github_organization"
        private: false
        state: absent
        force_defaults: true