- name: Test UTM Proxy Location
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create reverse proxy location
      community.general.utm_proxy_location:
        utm_host: "10.1.1.1"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "your_token_here"
        name: "test_location"
        path: "/test"
        state: "{{ state }}"
        backend:
          - "10.1.1.2"
          - "10.1.1.3"
        access_control: "allow"
        allowed_networks:
          - "10.1.1.0/24"
        denied_networks: []
        auth_profile: "basic"
        headers:
          Host: "test.example.com"
        hot_standby: false
        status: true
        stickysession_id: "JSESSIONID"
        stickysession_status: true
        websocket_passthrough: false
        validate_certs: true
        be_path: "/backend"
        comment: "Test location"

      vars:
        state: "present"

      register: result

    - name: Debug result
      debug:
        var: result