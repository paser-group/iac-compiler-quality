- name: Trigger type-related bug in community.general.datadog_event module
  hosts: localhost
  gather_facts: false

  vars:
    api_key: "ABC123"
    app_key: "XYZ456"
    date_happened: 1633833600

  tasks:
    - name: Post event with bytes and strings
      community.general.datadog_event:
        api_key: "{{ api_key }}"
        app_key: "{{ app_key }}"
        text: "This is a test event"
        title: "Test Event"
        date_happened: "{{ date_happened }}"
        host: "localhost"
        priority: high
        alert_type: error
        validate_certs: no
        tags: ['bytes', 'strings']
        aggregation_key: "{{ 'bytes' | to_bytes + 'strings' }}"
        api_host: "https://api.datadoghq.com/api/v1"
      register: result

    - debug:
        var: result