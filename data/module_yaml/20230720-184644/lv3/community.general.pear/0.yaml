---
- name: Test playbook for the 'community.general.pear' module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Install PEAR packages
      community.general.pear:
        executable: "/usr/bin/pear"
        name: "{{ item }}"
        prompts:
          - "y/n"
        state: present
      with_items:
        - "bytes"
        - "strings"

    - name: Debug output
      debug:
        var: ansible_facts['community_general_pear_bytes']

    - name: Uninstall PEAR packages
      community.general.pear:
        executable: "/usr/bin/pear"
        name: "{{ item }}"
        prompts:
          - "y/n"
        state: absent
      with_items:
        - "bytes"
        - "strings"

    - name: Debug output
      debug:
        var: ansible_facts['community_general_pear_strings']