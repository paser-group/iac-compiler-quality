---
- name: Test playbook
  hosts: localhost
  gather_facts: false
  
  vars:
    config_bytes: "b'\x20\x21\x22'"
    config_string: "Hello, world!"
    config_mix: "{{ config_bytes }} {{ config_string }}"
  
  tasks:
    - name: Set configuration values with bytes and strings
      set_fact:
        device_config:
          - config: "{{ config_mix }}"
            device_url: "https://{{ vdirect_ip }}/path"
  
    - name: Commit configuration changes
      community.network.vdirect_commit:
        devices: "{{ device_config }}"
        apply: true
        save: true
        sync: true
        validate_certs: true
        vdirect_http_port: 80
        vdirect_https_port: 443
        vdirect_ip: "{{ vdirect_ip }}"
        vdirect_password: "{{ vdirect_password }}"
        vdirect_secondary_ip: "{{ vdirect_secondary_ip }}"
        vdirect_timeout: 60
        vdirect_use_ssl: true
        vdirect_user: "{{ vdirect_user }}"
        vdirect_wait: false
  
    - name: Print result
      debug:
        var: ansible_facts['community_network_vdirect_commit_results']