---
- name: Configure base ACL on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Manage ACL configuration
      community.network.ce_acl:
        acl_name: "{{ item.acl_name }}"
        rule_name: "{{ item.rule_name }}"
        state: "{{ item.state }}"
        acl_description: "{{ item.acl_description }}"
        acl_num: "{{ item.acl_num }}"
        acl_step: "{{ item.acl_step }}"
        frag_type: "{{ item.frag_type }}"
        rule_description: "{{ item.rule_description }}"
        rule_id: "{{ item.rule_id }}"
        source_ip: "{{ item.source_ip }}"
        src_mask: "{{ item.src_mask }}"
        rule_action: "{{ item.rule_action }}"
        time_range: "{{ item.time_range }}"
        log_flag: "{{ item.log_flag }}"
        vrf_name: "{{ item.vrf_name }}"
      with_items:
        - { acl_name: 'ACL1', rule_name: 'Rule1', state: 'present', acl_description: 'Access Control List 1', acl_num: '10', acl_step: '10',
            frag_type: 'frag-type', rule_description: 'Rule 1 description', rule_id: '1', source_ip: '10.1.1.1', src_mask: '255.255.255.0',
            rule_action: 'permit', time_range: 'time-range1', log_flag: 'true', vrf_name: 'VRF1' }
        - { acl_name: 'ACL2', rule_name: 'Rule2', state: 'present', acl_description: 'Access Control List 2', acl_num: '20', acl_step: '20',
            frag_type: 'frag-type', rule_description: 'Rule 2 description', rule_id: '2', source_ip: '10.1.1.2', src_mask: '255.255.255.0',
            rule_action: 'deny', time_range: 'time-range2', log_flag: 'false', vrf_name: 'VRF2' }