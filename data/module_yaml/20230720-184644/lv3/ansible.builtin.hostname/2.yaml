- name: Test playbook for ansible.builtin.hostname module
  hosts: all
  gather_facts: false
  tasks:
    - name: Set custom facts
      set_fact:
        my_string: "This is a string"
        my_bytes: "{{ my_string.encode('utf-8') }}"
    - name: Set hostname
      ansible.builtin.hostname:
        name: "{{ hostvars[inventory_hostname].ansible_hostname }}"
        use: "{{ my_string }}"