---
- name: Manipulate Consul ACLs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Consul ACL
      community.general.consul_acl:
        host: "{{ host }}"
        mgmt_token: "{{ mgmt_token }}"
        name: "{{ name }}"
        port: "{{ port }}"
        state: "{{ state }}"
        scheme: "{{ scheme }}"
        token: "{{ token|b64encode }}"
        token_type: "{{ token_type }}"
        rules: "{{ rules }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug result
      debug:
        var: result