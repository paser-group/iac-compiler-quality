---
- name: Test latent type-related bugs in Ansible
  hosts: memdomain
  gather_facts: false

  vars:
    api_key: "test_key_{{ 256 | int }}"
    domain: "example.com"
    state: "present"
    zone: "example_zone"

  tasks:
    - name: Create domain
      community.general.memset_zone_domain:
        api_key: "{{ api_key }}"
        domain: "{{ domain }}"
        state: "{{ state }}"
        zone: "{{ zone }}"

    - name: Delete domain
      community.general.memset_zone_domain:
        api_key: "{{ api_key }}"
        domain: "{{ domain }}"
        state: "absent"