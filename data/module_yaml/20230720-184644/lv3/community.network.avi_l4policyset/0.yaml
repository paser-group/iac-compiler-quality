---
- name: Test playbook for community.network.avi_l4policyset
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up Avi L4 Policy Set
      community.network.avi_l4policyset:
        controller: 10.1.1.1
        username: admin
        password: pass
        tenant: default
        l4_connection_policy:
          criteria:
            method: TCP
          persistence:
            timeout: "60 bytes"
        name: "Test Policy Set"
        description: true
        is_internal_policy: "yes"
        tenant_ref: "/api/tenant/default"
        api_version: 20
        url: "https://{{ controller }}"
      register: result

    - name: Debug output
      debug:
        var: result