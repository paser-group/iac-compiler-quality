---
- name: Test Ansible SSH Config
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure SSH settings
      community.general.ssh_config:
        host: "{{ inventory_hostname }}"
        hostname: "{{ 10.1.1.inventory_hostname.split('.')[1] }}"
        identity_file: "path/to/private_key"
        port: 22
        state: "{{ path | dirname }}"

  vars:
    path: "{{ '/path/to/ssh_config' }}/{{ ansible_user }}"