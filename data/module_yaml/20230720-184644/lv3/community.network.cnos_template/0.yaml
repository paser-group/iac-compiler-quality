---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: False
  vars:
    commandfile:
      - |
        configuration item1
      - |
        configuration item2

    deviceType: 'fabric' # Set the device type
    host: 'switch.example.com' # Set the switch hostname
    username: 'admin' # Set the username
    password: 'password' # Set the password
    enablePassword: '' # Set the enable password if required
    outputfile: '/tmp/config.txt' # Set the output file path

  tasks:
    - name: Generate switch configuration
      community.network.cnos_template:
        commandfile: "{{ item }}"
        deviceType: "{{ deviceType }}"
        host: "{{ host }}"
        username: "{{ username }}"
        password: "{{ password }}"
        enablePassword: "{{ enablePassword }}"
        outputfile: "{{ outputfile }}"
      with_items:
        - "{{ commandfile }}"