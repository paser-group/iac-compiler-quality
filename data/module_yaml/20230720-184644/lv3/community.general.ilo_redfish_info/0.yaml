---
- name: Gather server information through iLO Redfish API
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include required variables
      include_vars:
        file: vars.yml

    - name: Retrieve server information
      community.general.ilo_redfish_info:
        auth_token: "{{ auth_token }}"
        baseuri: "{{ baseuri }}"
        category: "{{ category }}"
        command: "{{ command }}"
        password: "{{ password }}"
        timeout: "{{ timeout }}"
        username: "{{ username }}"
      register: server_info

    - name: Display server information
      debug:
        var: server_info