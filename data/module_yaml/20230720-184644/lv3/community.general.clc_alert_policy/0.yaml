---
- name: Test playbook for 'community.general.clc_alert_policy' module
  hosts: localhost
  gather_facts: false

  vars:
    alert_recipients:
      - "user1@example.com"
      - "user2@example.com"
    alias: "TestAlertPolicy"
    duration: "PT5M"
    metric: "CPU_UTILIZATION"
    name: "Test Alert Policy"
    state: "present"
    threshold: 90

  tasks:
    - name: Create Alert Policy with bytes and strings
      community.general.clc_alert_policy:
        alert_recipients: "{{ alert_recipients }}"
        alias: "{{ alias }}"
        duration: "{{ duration }}"
        id: "abcd"
        metric: "{{ metric|random('item1', 'item2') }}"
        name: "{{ name }}"
        state: "{{ state }}"
        threshold: "{{ threshold }}"

      vars:
        threshold_bytes: "{{ threshold }} B"
        duration_seconds: "{{ duration }}"

      register: result

    - name: Display result
      debug:
        var: result