- name: Test playbook for community.network.avi_useraccountprofile
  hosts: localhost
  gather_facts: false

  vars:
    avi_credentials:
      username: "admin"
      password: b"my_password"
      controller: "my_controller"
      tenant: "my_tenant"

    api_context:
      api_version: "17.2.4"

  tasks:
    - name: Set up UserAccountProfile with bytes and strings
      community.network.avi_useraccountprofile:
        avi_credentials: "{{ avi_credentials }}"
        controller: "{{ avi_credentials.controller }}"
        tenant: "{{ avi_credentials.tenant }}"
        username: "{{ avi_credentials.username }}"
        password: "{{ avi_credentials.password }}"
        api_context: "{{ api_context }}"
        max_concurrent_sessions: 10
        max_password_history_count: "5"
        name: "test_profile"
        state: present
      register: result

    - name: Display result
      debug:
        var: result