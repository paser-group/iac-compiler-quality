- name: Test playbook to uncover latent type-related bugs in community.general.rax_cbs module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general collection
      command: ansible-galaxy collection install community.general

    - name: Test rax_cbs module with different data types
      community.general.rax_cbs:
        credentials: "/path/to/credentials"
        description: "Test CBS volume"
        env: "prod"
        identity_type: "username_password"
        image: "ubuntu"
        meta:
          key1: "value1"
          key2: 1024
        name: "test_volume"
        region: "us-east-1"
        size: "10 GiB"
        snapshot_id: "snap-1234"
        state: "present"
        tenant_name: "Test Tenant"
        username: "testuser"
        validate_certs: true
        volume_type: "SSD"
        wait: true
        wait_timeout: 60

      register: result

    - name: Show result
      debug:
        var: result