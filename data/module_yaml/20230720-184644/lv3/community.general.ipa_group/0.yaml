---
- name: Test playbook for community.general.ipa_group module
  hosts: localhost
  gather_facts: false

  vars:
    group_name: "testgroup"
    group_description: "test group"
    group_gid: "1001"
    group_user: ["user1", "user2"]
    group_external_user: [b"user3", b"user4"]
    group_state: "present"

  tasks:
    - name: Create IPA Group
      community.general.ipa_group:
        name: "{{ group_name }}"
        description: "{{ group_description }}"
        gidnumber: "{{ group_gid }}"
        user: "{{ group_user }}"
        external_user: "{{ group_external_user }}"
        state: "{{ group_state }}"
      register: result

    - name: Debug Result
      debug:
        var: result