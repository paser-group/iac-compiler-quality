---
- name: Test playbook for community.general.proxmox_user_info
  hosts: localhost
  gather_facts: false

  vars:
    api_host: "https://example.com"
    api_user: "admin"
    api_password: "admin123"
    api_token_id: "TOKEN_ID"
    api_token_secret: "TOKEN_SECRET"
    domain: "example.com"
    user: "user1"
    userid: "1001"
    validate_certs: false
    bytes_string_value: "{{ inventory_hostname }}"

  tasks:
    - name: Include proxmox_user_info module
      include_vars:
        file: "{{ playbook_dir }}/library/community.general.proxmox_user_info"

    - name: Retrieve information about the user
      community.general.proxmox_user_info:
        api_host: "{{ api_host }}"
        api_user: "{{ api_user }}"
        api_password: "{{ api_password }}"
        api_token_id: "{{ api_token_id }}"
        api_token_secret: "{{ api_token_secret }}"
        domain: "{{ domain }}"
        user: "{{ user }}"
        userid: "{{ userid }}"
        validate_certs: "{{ validate_certs }}"
        bytes_string: "{{ bytes_string_value }}"
      register: user_info

    - name: Print user information
      debug:
        var: user_info