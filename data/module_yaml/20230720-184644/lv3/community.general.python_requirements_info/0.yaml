---
- name: Test playbook for exposing latent bugs
  hosts: localhost
  gather_facts: false
  
  vars:
    my_var: "example value"
  
  tasks:
    - name: Include invalid task file
      include_tasks: "{{ my_var }}"
  
    - name: Convert my_var to bytes
      set_fact:
        my_var_bytes: "{{ my_var | encoding('latin-1') }}"
  
    - name: Show my_var_bytes
      debug:
        var: my_var_bytes
        
    - name: Fail if my_var_bytes is not a string
      assert:
        that:
          - my_var_bytes is string
      fail_msg: "my_var_bytes is not a string"