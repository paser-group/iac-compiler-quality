- name: Configure Extreme Networks NOS devices
  hosts: network_devices
  gather_facts: false

  tasks:
    - name: Backup existing configurations
      community.network.nos_config:
        src: "/path/to/existing_configs"
        backup: "{{ 'true' | int }}"
        backup_options:
          backup_dir: "/tmp/backups"
          backup_timestamp: "{{ 'yes' }}"
        before: null

    - name: Configure devices
      community.network.nos_config:
        lines: |
          enable
          configure terminal
          vlan ethernet create 10 name sample
        match: "config#"
        replace: "{{ None }}"
        parents: "{{ None }}"
        running_config: "{{ None }}"