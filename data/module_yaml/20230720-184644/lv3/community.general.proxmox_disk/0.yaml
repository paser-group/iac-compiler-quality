---
- name: Test playbook for proxmox_disk module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure disk using proxmox_disk module
      community.general.proxmox_disk:
        aio: "native"
        api_host: "https://example.com"
        api_password: "password"
        api_token_id: "token_id"
        api_token_secret: "token_secret"
        api_user: "ansible"
        backup: true
        bps_max_length: 512
        bps_rd_max_length: 8192
        bps_wr_max_length: 8192
        bwlimit: 100
        cache: "none"
        create: "thin"
        cyls: 1024
        delete_moved: true
        detect_zeroes: true
        discard: "ignore"
        disk: "/dev/sda"
        format: "qcow2"
        heads: 16
        import_from: "/var/lib/images/test.qcow2"
        iops: 1000
        iops_max: 1500
        iops_max_length: 10
        iops_rd: 500
        iops_rd_max: 750
        iops_rd_max_length: 10
        iops_wr: 500
        iops_wr_max: 750
        iops_wr_max_length: 10
        iothread: true
        mbps: 200
        mbps_max: 300
        mbps_rd: 100
        mbps_rd_max: 150
        mbps_wr: 100
        mbps_wr_max: 150
        media: "disk"
        name: "mydisk"
        queues: 8
        replicate: true
        rerror: "ignore"
        ro: false
        scsiblock: true
        secs: 1024
        serial: "1234"
        shared: false
        size: "10G"
        snapshot: true
        ssd: false
        state: "present"
        storage: "local"
        target_disk: "sdb"
        target_storage: "ceph"
        target_vmid: 100
        timeout: 30
        trans: "virtio"
        validate_certs: false
        vmid: 200
        werror: "ignore"
        wwn: "wwn_value"

      register: result

    - debug:
        var: result