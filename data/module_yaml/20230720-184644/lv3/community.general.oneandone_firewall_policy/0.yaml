---
- name: Configure firewall policy
  hosts: localhost
  gather_facts: false

  vars:
    api_url: "https://api.1and1.com/v1"
    auth_token: "your_auth_token"
    name: "my_firewall_policy"
    description: "My firewall policy"
    firewall_policy: "{{ name }}"
    add_rules:
      - protocol: "tcp"
        source: "10.1.1.1"
        port_from: 22
        port_to: 22
    remove_rules: []

  tasks:
    - name: Configure firewall policy
      community.general.oneandone_firewall_policy:
        api_url: "{{ api_url }}"
        auth_token: "{{ auth_token }}"
        name: "{{ name }}"
        description: "{{ description }}"
        firewall_policy: "{{ firewall_policy }}"
        add_rules: "{{ add_rules }}"
        remove_rules: "{{ remove_rules }}"

      register: result

    - name: Print result
      debug:
        var: result