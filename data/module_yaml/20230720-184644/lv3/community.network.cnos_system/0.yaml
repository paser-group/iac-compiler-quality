---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    domain_name: None
    domain_search: None
    hostname: None
    lookup_enabled: true
    lookup_source: None
    name_servers:
      - "{{ hostvars['ubuntu1']['ansible_host'] }}"
      - "{{ hostvars['alpine1']['ansible_host'] }}"
      - "{{ hostvars['centos1']['ansible_host'] }}"
      - "{{ hostvars['redhat1']['ansible_host'] }}"
    state: None

  tasks:
    - name: Set system attributes
      community.network.cnos_system:
        domain_name: "{{ domain_name }}"
        domain_search: "{{ domain_search }}"
        hostname: "{{ hostname }}"
        lookup_enabled: "{{ lookup_enabled }}"
        lookup_source: "{{ lookup_source }}"
        name_servers: "{{ name_servers }}"
        state: "{{ state }}"
      register: result

    - name: Debug system attributes
      debug:
        var: result