- name: Configure defaults using osx_defaults module
  hosts: localhost
  gather_facts: false
  connection: local
  become: true

  tasks:
    - name: Add new key-value pair to default domain
      community.general.osx_defaults:
        domain: '/Users/ansible/Library/Preferences/com.apple.Terminal'
        key: 'Default Window Settings'
        type: 'string'
        value: 'Pro'
        state: 'present'

    - name: Add an array value to default domain
      community.general.osx_defaults:
        domain: '/Users/ansible/Library/Preferences/com.apple.Terminal'
        key: 'MyArray'
        type: 'array_add'
        value: '["elem1", "elem2", "elem3"]'
        state: 'present'

    - name: Set an integer value to default domain
      community.general.osx_defaults:
        domain: '/Users/ansible/Library/Preferences/com.apple.Terminal'
        key: 'MyInteger'
        type: 'int'
        value: 123
        state: 'present'

    - name: Set a boolean value to default domain
      community.general.osx_defaults:
        domain: '/Users/ansible/Library/Preferences/com.apple.Terminal'
        key: 'MyBoolean'
        type: 'bool'
        value: 'yes'
        state: 'present'

    - name: Set a bytes value to default domain
      community.general.osx_defaults:
        domain: '/Users/ansible/Library/Preferences/com.apple.Terminal'
        key: 'MyBytes'
        type: 'string'
        value: '{{ "MyBytesValue" | b64encode }}'
        state: 'present'