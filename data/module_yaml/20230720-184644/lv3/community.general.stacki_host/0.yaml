---
- name: Test playbook for community.general.stacki_host module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add host to Stacki
      community.general.stacki_host:
        appliance: "http://stacki.example.com"
        stacki_user: "admin"
        stacki_password: "password"
        name: "ubuntu1"
        rack: 1
        rank: 1
        network:
          - device: "eth0"
            mode: "dhcp"
            ip: "10.1.1.1"
            mask: "255.255.255.0"
            gateway: "10.1.1.254"
            bond_mode: "none"
            dns_domain: "example.com"
            dns_nameservers:
              - "8.8.8.8"
              - "8.8.4.4"
        prim_intf: "eth0"
        prim_intf_ip: "10.1.1.1"
        prim_intf_mac: "00:0c:29:91:19:b2"
        stacki_endpoint: "/stacki"
        state: "present"

      # Add more task scenarios here to trigger different type-related bugs based on the provided heuristic
      
    - name: Remove host from Stacki
      community.general.stacki_host:
        appliance: "http://stacki.example.com"
        stacki_user: "admin"
        stacki_password: "password"
        name: "ubuntu1"
        stacki_endpoint: "/stacki"
        state: "absent"