---
- name: Test 'community.general.hwc_ecs_instance' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Creating ECS instance
      community.general.hwc_ecs_instance:
        admin_pass: !binary |  # Example of a byte value
          cGFzc3dvcmQxMjM0  # Password - "password1234" in base64
        availability_zone: !int  # Example of an integer value
          zone1
        data_volumes:
          - "/dev/sdb"  # Example of a string value
        description:  # Example of a string value
          - "Test ECS instance"
        domain:  # Example of a string value
          - "domain.com"
        eip_id:  # Example of a string value
          - "eip-12345678"
        enable_auto_recovery:  # Example of a boolean value
          true
        enterprise_project_id:  # Example of a string value
          - "project-123"
        flavor_name:  # Example of a string value
          - "ecs.flavor"
        id:  # Example of a string value
          - "instance-12345"
        identity_endpoint:  # Example of a string value
          - "https://identity.endpoint.com"
        image_id:  # Example of a string value
          - "image-123456"
        name:  # Example of a string value
          - "test-instance"
        nics:
          - subnet_id:  # Example of a string value
              - "subnet-12345"
            ip_address:  # Example of a string value
              - "10.1.1.5"
        password:  # Example of a string value
          - "password1234"
        project:  # Example of a string value
          - "project"
        region:  # Example of a string value
          - "region"
        root_volume:
          size: !int  # Example of an integer value
            100
          volumetype:  # Example of a string value
            - "SATA"
        security_groups:
          - !bool  # Example of a boolean value
            "group1"
        server_metadata:
          key1:  # Example of a string value
            - "value1"
        server_tags:
          tag1:  # Example of a string value
            - "tagvalue1"
        ssh_key_name:  # Example of a string value
          - "keyname"
        state:  # Example of a string value
          - "present"
        timeouts:
          create_timeout: !int  # Example of an integer value
            180
          delete_timeout: !int  # Example of an integer value
            120
        user:  # Example of a string value
          - "user1"
        user_data: |  # Example of a multi-line string value
          #!/bin/bash
          echo "This is user data"
        vpc_id:  # Example of a string value
          - "vpc-12345"

      register: result

    - name: Display result
      debug:
        var: result