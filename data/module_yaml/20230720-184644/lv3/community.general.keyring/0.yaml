---
- name: Test playbook for community.general.keyring module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set passphrase
      community.general.keyring:
        keyring_password: "{{ 'passphrase123' | b64decode }}"
        service: "test-service"
        state: "present"
        user_password: "{{ 'password456' | b64decode }}"
        username: "test-user"
      register: set_result

    - name: Display set result
      debug:
        var: set_result

    - name: Delete passphrase
      community.general.keyring:
        keyring_password: "{{ 'passphrase123' | b64decode }}"
        service: "test-service"
        state: "absent"
        username: "test-user"
      register: delete_result

    - name: Display delete result
      debug:
        var: delete_result