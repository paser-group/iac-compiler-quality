---
- name: Test Expect Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create configuration values that incorporate both bytes and strings
      set_fact:
        responses: [
          {
            'prompt': 'Enter password:',
            'echo': True,
            'response': 'mypassword'
          },
          {
            'prompt': 'Enter name:',
            'echo': True,
            'response': b'John Doe'
          }
        ]

    - name: Execute Expect module
      expect:
        chdir: /tmp
        command: echo "Hello World"
        creates: /tmp/hello.txt
        echo: true
        removes: /tmp/bye.txt
        responses: "{{ responses }}"
        timeout: 10