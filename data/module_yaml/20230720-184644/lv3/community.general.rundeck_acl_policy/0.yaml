---
- name: Test playbook for rundeck_acl_policy module
  hosts: localhost
  gather_facts: false

  vars:
    api_token: "api_token_value"
    api_version: "2"
    client_cert: "/path/to/client_cert.pem"
    client_key: "/path/to/client_key.pem"
    force: true
    force_basic_auth: true
    http_agent: "Ansible HTTP Agent"
    name: "Policy 1"
    policy: "path/to/policy.xml"
    project: "my_project"
    state: "present"
    url: "https://rundeck.example.com/api"
    url_password: "api_password"
    url_username: "api_username"
    use_gssapi: true
    use_proxy: false
    validate_certs: true

  tasks:
    - name: Create rundeck ACL policy
      community.general.rundeck_acl_policy:
        api_token: "{{ api_token }}"
        api_version: "{{ api_version }}"
        client_cert: "{{ client_cert }}"
        client_key: "{{ client_key }}"
        force: "{{ force }}"
        force_basic_auth: "{{ force_basic_auth }}"
        http_agent: "{{ http_agent }}"
        name: "{{ name }}"
        policy: "{{ policy }}"
        project: "{{ project }}"
        state: "{{ state }}"
        url: "{{ url }}"
        url_password: "{{ url_password }}"
        url_username: "{{ url_username }}"
        use_gssapi: "{{ use_gssapi }}"
        use_proxy: "{{ use_proxy }}"
        validate_certs: "{{ validate_certs }}"
      register: result

    - name: Debug result
      debug:
        var: result

    - name: Validate result type
      assert:
        that: result is mapping