---
- name: Test playbook for community.network.icx_linkagg module
  hosts: localhost
  gather_facts: false
  
  vars:
    linkaggs:
      - name: "linkagg1"
        members: ["ethernet1/1", "ethernet1/2"]
        mode: "active-backup"
        state: "present"
        group: 1
        aggregate:
          - "10Mb"
          - "1Gb"
          - "10Gb"
      - name: "linkagg2"
        members: ["ethernet1/3", "ethernet1/4"]
        mode: "802.3ad"
        state: "present"
        group: 2
        aggregate:
          - "1Gb"
          - "10Gb"
    
  tasks:
    - name: Create link aggregation groups
      community.network.icx_linkagg:
        name: "{{ item.name }}"
        members: "{{ item.members }}"
        mode: "{{ item.mode }}"
        state: "{{ item.state }}"
        group: "{{ item.group }}"
        aggregate: "{{ item.aggregate }}"
      loop: "{{ linkaggs }}"
  
    # Add additional tasks or test cases here...