- name: Test playbook for 'community.general.ovh_ip_failover'
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Case 1 - Create IP failover with bytes and strings
      community.general.ovh_ip_failover:
        application_key: "my_application_key"
        application_secret: b64:"SGVsbG8gd29ybGQ="
        consumer_key: "my_consumer_key"
        endpoint: "ovh-eu"
        name: "byte_string_failover"
        service: "12345678"
        timeout: "60"
        wait_completion: true
        wait_task_completion: 300
      register: result1

    - name: Test Case 2 - Update IP failover with strings and bytes
      community.general.ovh_ip_failover:
        application_key: b64:"bXlfYXBwbGljYXRpb25fa2V5"
        application_secret: "Hello world!"
        consumer_key: "my_consumer_key"
        endpoint: "ovh-us"
        name: "string_byte_failover"
        service: 987654321
        timeout: 120
        wait_completion: false
        wait_task_completion: "600"
      register: result2

    - name: Test Case 3 - Delete IP failover with bytes and strings
      community.general.ovh_ip_failover:
        application_key: "my_application_key"
        application_secret: b64:"dGVzdA=="
        consumer_key: "my_consumer_key"
        endpoint: "ovh-ca"
        name: "byte_string_failover"
        service: 987654321
        timeout: 30
        wait_completion: true
        wait_task_completion: "900"
        state: "absent"
      register: result3
      
    - name: Debug result1
      debug:
        var: result1
        
    - name: Debug result2
      debug:
        var: result2
        
    - name: Debug result3
      debug:
        var: result3