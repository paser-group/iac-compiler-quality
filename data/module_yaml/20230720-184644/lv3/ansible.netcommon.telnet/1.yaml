---
- name: Test playbook for ansible.netcommon.telnet
  hosts: localhost  # Assuming this playbook will run on the control node
  gather_facts: false

  tasks:
    - name: Execute telnet command
      ansible.netcommon.telnet:
        host: "10.1.1.1"
        port: 23
        prompts:
          - "login: \x6c\x6f\x67\x69\x6e:"  # "login:" as bytes
          - "password: password"  # "password" as string
        login_prompt: "\x6c\x6f\x67\x69\x6e:"  # "login:" as bytes
        password_prompt: "password: password"  # "password" as string
        user: "admin"
        password: "admin"
        pause: 5
        timeout: 10
        send_newline: true
        command:
          - "ls"
      register: telnet_output

    - name: Display telnet output
      debug:
        var: telnet_output.stdout_lines