---
- name: Test playbook for edgeos_facts module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Gather EdgeOS facts
      community.network.edgeos_facts:
        gather_subset: None
      register: result

    - name: Debug gathered facts
      debug:
        var: result.ansible_facts

    - name: Create configuration values with bytes and strings
      set_fact:
        configuration: 
          interfaces:
            - address: 192.168.0.1/24
              description: !!str | 'Test interface'

    - name: Set EdgeOS configuration
      community.network.edgeos_config:
        lines: "{{ configuration }}"
      register: result_config

    - name: Debug configuration result
      debug:
        var: result_config