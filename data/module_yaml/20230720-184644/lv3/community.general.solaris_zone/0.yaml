---
- name: Test Ansible module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create a solaris zone
      community.general.solaris_zone:
        name: test_zone
        path: /zones/test_zone
        state: configured
        sparse: true
        root_password: "password"
        timeout: "120"
        attach_options: {}
        config: |
          create
          set limitpriv=default,dtrace_proc,dtrace_user,dtrace_kernel,dtrace_proc,dtrace_user,dtrace_kernel,dtrace_proc,dtrace_kernel,dtrace_user,dtrace_kernel,dtrace_user,dtrace_kernel
          add net
          set autoshutdown=shutdown
          info
          verify
        create_options: ""
        install_options: ""
      register: solaris_zone_output

    - name: Print solaris zone output
      debug:
        var: solaris_zone_output