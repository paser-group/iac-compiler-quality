---
- name: Test Ansible GitLab Deploy Key module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create GitLab Deploy Key with byte and string values
      community.general.gitlab_deploy_key:
        api_url: "https://gitlab.example.com/api/v4"
        api_token: "YOUR_API_TOKEN"
        project: "my-project"
        key: "{{ lookup('file', 'id_rsa.pub') }}"
        state: "present"
        validate_certs: False
      register: result

    - name: Print GitLab Deploy Key creation result
      debug:
        var: result