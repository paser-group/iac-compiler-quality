- name: Test systemd module for type-related bugs
  hosts: all
  gather_facts: false

  tasks:
    - name: Check systemd service
      systemd:
        name: myservice
        state: started

    - name: Set masked property
      systemd:
        name: myservice
        masked: yes

    - name: Reload systemd units
      systemd:
        daemon_reload: yes

    - name: Re-execute systemd daemon
      systemd:
        daemon_reexec: yes

    - name: Enable systemd service
      systemd:
        name: myservice
        enabled: true

    - name: Restart systemd service
      systemd:
        name: myservice
        state: restarted

    - name: Start systemd service
      systemd:
        name: myservice
        state: started