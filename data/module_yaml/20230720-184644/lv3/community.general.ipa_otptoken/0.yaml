---
- name: Test the community.general.ipa_otptoken module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create the IPA OTP Token
      community.general.ipa_otptoken:
        ipa_host: 10.1.1.1
        ipa_user: admin
        ipa_pass: adminpass
        ipa_prot: https
        ipa_port: 443
        ipa_timeout: 30
        state: present
        algorithm: sha1
        counter: 0
        description: test token
        digits: 6
        enabled: true
        interval: 30
        model: HOTP
        newuniqueid: true
        notafter: "2023-12-31T23:59:59Z"
        notbefore: "2021-01-01T00:00:00Z"
        offset: 0
        otptype: counter
        owner: admin
        secretkey: "S3cr3tK3y"
        serial: "test_serial"
        uniqueid: "test_unique_id"
        validate_certs: false
        vendor: "test_vendor"
      register: result

    - name: Display the result
      debug:
        var: result