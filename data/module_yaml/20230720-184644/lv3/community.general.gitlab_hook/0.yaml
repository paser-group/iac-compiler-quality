- hosts: localhost
  gather_facts: false

  tasks:
    - name: Create GitLab hook
      community.general.gitlab_hook:
        api_url: "https://gitlab.example.com/api/v4"
        api_username: "admin"
        api_password: "password"
        project: "myproject"
        hook_url: "https://example.com/hook"
        token: "mytoken"
        state: present
        push_events: true
        push_events_branch_filter: "master"
        tag_push_events: false
        note_events: true
        issues_events: true
        merge_requests_events: true
        job_events: true
        pipeline_events: true
        wiki_page_events: true
        validate_certs: true
        hook_validate_certs: false
        api_token: "myapitoken"
        api_job_token: "myapijobtoken"
        api_oauth_token: "myoauthtoken"
      register: result

    - name: Debug result
      debug:
        var: result