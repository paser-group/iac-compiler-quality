- name: Manage ejabberd users
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create users
      community.general.ejabberd_user:
        host: "{{ host }}"
        username: "{{ username }}"
        password: "{{ password }}"
        logging: "{{ logging }}"
        state: "{{ state }}"
      vars:
        host: "localhost"
        username: 123
        password: "pass123"
        logging: "yes"
        state: "present"
      when: "'bytes' in username"