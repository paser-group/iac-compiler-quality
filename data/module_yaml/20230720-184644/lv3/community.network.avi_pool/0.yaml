---
- name: Create Avi pool configuration
  hosts: localhost
  gather_facts: False

  vars:
    controller: avi-controller
    username: admin
    password: password
    tenant: default

  tasks:
    - name: Create pool with bytes and strings configuration
      community.network.avi_pool:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: test-pool
        description: Test pool with bytes and strings configuration
        lb_algorithm: "LEAST_LOAD"
        servers:
          - ip: 10.1.1.1
            port: 80
          - ip: 10.1.1.2
            port: 443
        ssl_profile_ref: "test-ssl-profile"
        cert_data: |
          -----BEGIN CERTIFICATE-----
          MIIDkzCCAvugAwIBAgIEX7lqzjANBgkqhkiG9w0BAQsFADBqMQswCQYDVQQGEwJV
          UzELMAkGA1UECAwCQ0ExEDAOBgNVBAoMB0F2aSBDbzEMMAoGA1UECwwDUkUxETAP
          BgNVBAMMCEFsZ3VpbnQwHhcNMjAxMjI2MTUyNDA0WhcNMzAxMjI0MTUyNDA0WjBq
          MQswCQYDVQQGEwJVUzELMAkGA1UECAwCQ0ExEDAOBgNVBAoMB0F2aSBDbzEMMAoG
          A1UECwwDUkUxETAPBgNVBAMMCEFsZ3VpbnQwggEiMA0GCSqGSIb3DQEBAQUAA4IB
          DwAwggEKAoIBAQDKJnhu2zTQ83ihiGQQP9lqMS29pV4dD2H0YWYxk5PXOtZcsgOf
          e3pkBI2vW5iyRlDeum1fK2X+dLxfk5KZNO5WjDBpv7JMu2OZwT4rb0QPoABLPQIU
          HZKZD0Vaq8jkRp6Bqi7P1yNAgA4U6m8LuIfFwfyJspEIMUcZYx+0rQ99Ksk7kbVL
          Y/kb5n8VY3h20TYcQDETD2JIKeqfU95bQfTR049eWXYHtenFIbgiCcIvNMHgTTlW
          NkY4cZG5XWIqoBFcsGchE1MHiwac6CRUtlc7UrZc2aZ9LpcWjVA/QzuGZYldjXkL
          J73p6yVh4uxPNCTwZ41dOKiIIa4dKr+m/vUBAgMBAAGjUzBRMB0GA1UdDgQWBBTL
          WrRowKj3oUzN2wdh2Z5IGu2RIzAfBgNVHSMEGDAWgBTLWrRowKj3oUzN2wdh2Z5I
          Gu2RIzAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQCZpndvOGkX
          XvHN4QR1rmP3QxKvt6j+77MJE/Zh5zAhTc6OTqzNS9fuawVe0vFfreQFVv2LMDbU
          jWqIYOzw+dS09TDw1mjLzmCJxVjfukZ2DsWx3SxvNiwGa6LOlC6RqW8aqYsR6HDv
          qLc3J/FmyP17V6JauSiI4qnKq/Gb0+J1lz9vCzhL6zh5iRjya22/Dvdks5EgkjPf
          srZKAWEb75wdgbPuyPn2Osnm+FLzU6rfpcuSCCpo8dHDrSwwdB67MgnFSffRNfye
          x5p9ijx480arR5K6k1Yz3jq4dfDsdWRRtoVEIj/LBJLum4OTbZehhyNyef4DP/iw
          MUamnaD4Tdje
          -----END CERTIFICATE-----

      register: result

    - name: Print result
      debug:
        var: result