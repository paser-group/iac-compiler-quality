- name: Test playbook for community.general.rpm_ostree_pkg module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Install or uninstall packages using community.general.rpm_ostree_pkg module
      community.general.rpm_ostree_pkg:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
      loop:
        - { name: "package1", state: "present" }
        - { name: "package2", state: "absent" }
        - { name: 123, state: "present" }
        - { name: "package4", state: "present" }
        - { name: "package5", state: "present" }
        - { name: "package6", state: "present" }

    - name: Print debug information
      debug:
        var: ansible_facts.package_facts_installed

    - name: Print out variable types
      debug:
        msg: "{{ item.name }} is of type {{ item.value|type_debug }}"
      with_dict: ansible_facts.package_facts_installed