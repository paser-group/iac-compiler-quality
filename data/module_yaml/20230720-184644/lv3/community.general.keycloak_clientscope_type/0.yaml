---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Set client scope type
      community.general.keycloak_clientscope_type:
        auth_client_id: "admin-cli"
        auth_client_secret: "admin-secret"
        auth_keycloak_url: "http://localhost:8080/auth"
        auth_password: "admin-password"
        auth_realm: "master"
        auth_username: "admin"
        client_id: "my-client"
        connection_timeout: 30
        default_clientscopes:
          - "default-clientscope1"
          - "default-clientscope2"
        http_agent: "ansible-http-agent"
        optional_clientscopes:
          - "optional-clientscope1"
          - "optional-clientscope2"
        realm: "my-realm"
        token: "my-token"
        validate_certs: false
        # Heuristic: Create configuration values that incorporate both bytes and strings
        bytes_string_test:
          - "bytes_value": "{{ 'test' | string | b64encode }}"
            "string_value": "string-test-value"
      register: result

    - name: Debug result
      debug:
        var: result