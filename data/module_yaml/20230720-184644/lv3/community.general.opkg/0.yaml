---
- name: Test opkg module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install packages
      community.general.opkg:
        name:
          - package1
          - package2
        state: present
        update_cache: no
        force: "no"

    - name: Remove packages
      community.general.opkg:
        name: "package3"
        state: absent
        update_cache: yes
        force: "yes"

    - name: Update packages
      community.general.opkg:
        name:
          - package4
          - package5
        state: latest
        update_cache: true
        force: "no"