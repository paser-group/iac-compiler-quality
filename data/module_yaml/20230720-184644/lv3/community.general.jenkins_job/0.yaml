- name: Test Jenkins Job Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install community.general Collection
      ansible.builtin.command: ansible-galaxy collection install community.general

    - name: Create Jenkins Job
      community.general.jenkins_job:
        url: "http://localhost:8080"
        user: "admin"
        password: "admin123"
        name: "test-job"
        config: |
          <?xml version='1.0' encoding='UTF-8'?>
          <project>
            <actions/>
            <description>Test Job</description>
            <builders>
              <hudson.tasks.Shell>
                <command>echo "Test Job Executed"</command>
              </hudson.tasks.Shell>
            </builders>
          </project>
        state: present
        validate_certs: false
      register: result

    - name: Debug Result
      ansible.builtin.debug:
        var: result