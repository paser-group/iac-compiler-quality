---
- name: Test playbook for exposing type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Set up VSDataScriptSet
      community.network.avi_vsdatascriptset:
        controller: 10.1.1.1
        username: admin
        password: password
        tenant: Default
        api_version: 17.2.7
        avi_credentials:
          - controller: 10.1.1.1
            username: admin
            password: password
            tenant: Default
        api_context:
          controller: 10.1.1.1
          username: admin
          password: password
          tenant: Default
        tenant_ref: /api/tenant
        tenant_uuid: tenant-123
        name: VSDataScriptSet1
        uuid: vsdatascriptset-123
        datascript: |
          #!/usr/local/bin/python3
          # -*- coding: utf-8 -*-

          import sys

          if sys.version_info < (3, 0):
              print("Python 3.x is required")
              sys.exit(1)

          str_variable = "Sample String"
          bytes_variable = b"\x41\x42\x43"

          print(f"String: {str_variable}")
          print(f"Bytes: {bytes_variable}")
        description: My VSDataScriptSet
        ipgroup_refs: []
        pool_group_refs: []
        pool_refs: []
        protocol_parser_refs: []
        string_group_refs: []
        url: /api/vsdatascriptset
        created_by: null
        avi_disable_session_cache_as_fact: true
        avi_api_patch_op: null
        avi_api_update_method: null
        state: present