---
- name: Run facter discovery program
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create configuration value with bytes and strings
      set_fact:
        example_value: "{{ 'Example value' | to_json | b64encode }}"

    - name: Install community.general.facter
      ansible.builtin.dnf:
        name: python3-facter
      become: true

    - name: Gather facts using facter
      community.general.facter:
        facts:
          - 'os'
          - 'networking'
          - 'memory'
        example_value: "{{ example_value }}"
      register: facter_output

    - name: Print facter output
      debug:
        var: facter_output