---
- name: Test playbook for 'ansible.builtin.apt' module
  hosts: localhost
  gather_facts: false
  become: true

  tasks:

    - name: Install packages with mixed bytes and strings
      apt:
        name: "{{ items }}"
        state: present
        update_cache: yes
      vars:
        items:
          - hello
          - world
          - "{{ 'foo'.encode() }}"
          - "{{ 'bar'.encode() }}"
        check_invalid_types: true

    - name: Update cache with mixed bytes and strings
      apt:
        name: '*'
        update_cache: yes
        retry_files_enabled: no
      vars:
        cache_valid_time: "{{ '3600'.encode() }}"

    - name: Upgrade packages with mixed bytes and strings
      apt:
        name: '*'
        state: upgrade
        update_cache: yes
      vars:
        upgrade: "{{ 'dist'.encode() }}"
        check_invalid_types: true