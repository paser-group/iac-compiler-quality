---
- name: Test Playbook
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Set package_id variable
      set_fact:
        package_id: "PACKAGE_ID"
  
    - name: Set package_params variable
      set_fact:
        package_params:
          - "{{ lookup('env', 'PACKAGE_PARAMS') }}"
  
    - name: Set server_ids variable
      set_fact:
        server_ids:
          - "SERVER_IDS"
  
    - name: Set state variable
      set_fact:
        state: 123
  
    - name: Set wait variable
      set_fact:
        wait: 'yes'
  
    - name: Debug variables
      debug:
        var:
          - package_id
          - package_params
          - server_ids
          - state
          - wait
  
    - name: Deploy Blueprint Package
      community.general.clc_blueprint_package:
        package_id: "{{ package_id }}"
        package_params: "{{ package_params }}"
        server_ids: "{{ server_ids }}"
        state: "{{ state }}"
        wait: "{{ wait }}"
      register: result
  
    - name: Debug result
      debug:
        var: result