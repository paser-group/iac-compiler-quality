---
- name: Test playbook for community.network.avi_hardwaresecuritymodulegroup module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Import the module
      import_module:
        name: community.network.avi_hardwaresecuritymodulegroup

    - name: Set variables
      set_fact:
        var_bytes: "{{ 'This is a string' }}"
        var_string: "{{ 10.5 }}"

    - name: Create HardwareSecurityModuleGroup configuration
      community.network.avi_hardwaresecuritymodulegroup:
        controller: "{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        tenant: "{{ tenant }}"
        name: "{{ hsm_group_name }}"
        uuid: "{{ hsm_group_uuid }}"
        state: present
        avi_credentials:
          api_version: "{{ api_version }}"
          avi_credentials:
            - controller: "{{ controller }}"
              username: "{{ username }}"
              password: "{{ password }}"

        # Heuristic: Create configuration values that incorporate both bytes and strings
        api_context:
          bytes_value: "{{ var_bytes | b64encode }}"
          string_value: "{{ var_string }}"

      register: result

    - name: Display the result
      debug:
        var: result