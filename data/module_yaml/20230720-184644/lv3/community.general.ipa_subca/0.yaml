---
- name: Test playbook for community.general.ipa_subca
  hosts: localhost
  gather_facts: false

  vars:
    ipa_host: "localhost"
    ipa_port: 443
    ipa_prot: "https"
    ipa_timeout: 10
    ipa_user: "admin"
    ipa_pass: "admin123"
    state: "present"
    subca_name: "test-subca"
    subca_subject: "CN=Test Sub CA,O=Test Org,C=US"
    subca_desc: "Test Sub CA"
    validate_certs: false

  tasks:
    - name: Test with bytes and strings in configuration values
      community.general.ipa_subca:
        ipa_host: "{{ ipa_host }}"
        ipa_port: "{{ ipa_port }}"
        ipa_prot: "{{ ipa_prot }}"
        ipa_timeout: "{{ ipa_timeout }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        state: "{{ state }}"
        subca_name: "{{ subca_name }}"
        subca_subject: "{{ subca_subject }}"
        subca_desc: "{{ subca_desc }}"
        validate_certs: "{{ validate_certs }}"
        ca_data: 'This is byte data.'
        subca_data: 'This is byte data.'
        crl_data: 'This is byte data.'
      register: result

    - name: Display output
      debug:
        var: result