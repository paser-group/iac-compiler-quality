---
- name: Test playbook for community.general.bitbucket_pipeline_key_pair
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate random public and private keys
      community.general.bitbucket_pipeline_key_pair:
        state: present
        workspace: "my-workspace"
        repository: "my-repo"
        user: "my-user"
        password: "my-password"
        client_id: "my-client-id"
        client_secret: "my-client-secret"
        public_key: "{{ lookup('password', '/dev/random') }}"
        private_key: "{{ lookup('password', '/dev/random') }}"
      register: key_pair

    - name: Debug generated key pair
      debug:
        msg: "{{ key_pair }}"