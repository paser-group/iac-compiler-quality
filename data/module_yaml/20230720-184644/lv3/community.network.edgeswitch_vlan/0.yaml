---
- name: Manage VLANs on Ubiquiti Edgeswitch devices
  hosts: switches
  gather_facts: false
  vars:
    vlan_id: "10"
    name: 10
    state: "present"
    tagged_interfaces: []
    untagged_interfaces: []
    excluded_interfaces: []
    auto_tag: true
    auto_untag: false
    auto_exclude: true
    purge: false

  tasks:
    - name: Create VLAN
      community.network.edgeswitch_vlan:
        vlan_id: "{{ vlan_id }}"
        name: "{{ name }}"
        state: "{{ state }}"
        tagged_interfaces: "{{ tagged_interfaces }}"
        untagged_interfaces: "{{ untagged_interfaces }}"
        excluded_interfaces: "{{ excluded_interfaces }}"
        auto_tag: "{{ auto_tag }}"
        auto_untag: "{{ auto_untag }}"
        auto_exclude: "{{ auto_exclude }}"
        purge: "{{ purge }}"
      register: vlan_result

    - name: Print module output
      debug:
        var: vlan_result