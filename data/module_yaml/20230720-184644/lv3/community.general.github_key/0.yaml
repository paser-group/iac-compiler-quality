---
- name: Test 'community.general.github_key' module
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:
    - name: Create GitHub key with mixed type values
      community.general.github_key:
        force: "{{ item.force }}"
        name: "{{ item.name }}"
        pubkey: "{{ item.pubkey }}"
        state: "{{ item.state }}"
        token: "{{ item.token }}"
      loop:
        - { force: True, name: "test_key_bytes", pubkey: "{{ lookup('file', '/path/to/public_key_bytes.txt') | b64encode }}", state: "present", token: 12345 }
        - { force: "yes", name: "test_key_strings", pubkey: "{{ lookup('file', '/path/to/public_key.txt') }}", state: "present", token: "YOUR_GITHUB_TOKEN" }