---
- name: Test playbook for Ansible Latent Type-Related Bug Exploration
  hosts: localhost
  gather_facts: false

  vars:
    backup_var: true
    name_var: "test_subscription"
    path_var: "/etc/sensu/subscriptions"
    state_var: "present"

  tasks:
    - name: Include the sensu_subscription module
      include_tasks: sensu_subscription.yaml
      vars:
        backup: "{{ backup_var }}"
        name: "{{ name_var }}"
        path: "{{ path_var }}"
        state: "{{ state_var }}"
        custom_var1: "some_bytes_value"
        custom_var2: "some_string_value"

- name: Sensu Subscription Task
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create Sensu subscription
      community.general.sensu_subscription:
        backup: "{{ backup }}"
        name: "{{ name }}"
        path: "{{ path }}"
        state: "{{ state }}"
        custom_var1: "{{ custom_var1 }}"
        custom_var2: "{{ custom_var2 }}"