---
- name: Manage DNS Records for Ericsson
  hosts: localhost
  gather_facts: false
  
  vars:
    dns_records:
      - address: 10.1.1.1
        container: ericsson_container
        dnsname: example.com
        flags: some_flags
        order: 1
        password: secret
        port: 53
        preference: 10
        priority: 1
        replacement: replacement.com
        service: some_service
        state: present
        target: target.example.com
        ttl: 3600
        type: A
        username: admin
        weight: 5
      - address: 10.1.1.2
        container: ericsson_container
        dnsname: example.org
        flags: other_flags
        order: 2
        password: secret
        port: 53
        preference: 20
        priority: 2
        replacement: replacement.org
        service: some_service
        state: absent
        target: target.example.org
        ttl: 1800
        type: A
        username: admin
        weight: 10

  tasks:
    - name: Manage DNS Records
      community.general.ipwcli_dns:
        address: "{{ item.address }}"
        container: "{{ item.container }}"
        dnsname: "{{ item.dnsname }}"
        flags: "{{ item.flags }}"
        order: "{{ item.order }}"
        password: "{{ item.password }}"
        port: "{{ item.port }}"
        preference: "{{ item.preference }}"
        priority: "{{ item.priority }}"
        replacement: "{{ item.replacement }}"
        service: "{{ item.service }}"
        state: "{{ item.state }}"
        target: "{{ item.target }}"
        ttl: "{{ item.ttl }}"
        type: "{{ item.type }}"
        username: "{{ item.username }}"
        weight: "{{ item.weight }}"
      loop: "{{ dns_records }}"