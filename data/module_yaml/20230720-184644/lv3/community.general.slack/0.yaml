---
- name: Test Ansible Latent Type-Related Bugs
  hosts: ansible_nodes
  gather_facts: false

  tasks:
    - name: Send Slack message with type-related bugs
      community.general.slack:
        msg: "This message contains bytes and strings for testing type-related bugs"
        attachments:
          - fallback: "Fallback test message"
            blocks:
              - type: "section"
                text: "This is a sample block"
        channel: "#general"
        color: "#FF0000"
        domain: "mydomain.com"
        icon_emoji: ":smile:"
        icon_url: "http://example.com/icon.png"
        link_names: "1"
        message_id: "1234"
        parse: "full"
        prepend_hash: "Prepend hash"
        thread_id: "5678"
        token: "my_token"
        username: "ansible_user"
        validate_certs: "true"
      register: slack_result

    - name: Print Slack result
      debug:
        var: slack_result