---
- name: Ansible Latent Bug Finder - community.network.ce_command playbook
  hosts: all
  gather_facts: no
  
  tasks:
    - name: Run arbitrary command on HUAWEI network device
      community.network.ce_command:
        commands: "{{ item }}"
        interval: 5
        match: "{{ device_output }}"
        retries: 3
        wait_for: yes
      with_items:
        - show version
        - show interfaces
        - configure terminal
        - ip address 10.1.1.1

      vars:
        device_output: "{ 'bytes': 10, 'strings': 'sample string' }"