---
- name: Test playbook
  hosts: localhost
  connection: local
  gather_facts: false
  
  vars:
    session_name: "test_session"
    session_id: "1234"
    session_datacenter: "dc1"
    session_node: "node1"
    session_checks:
      - "http"
      - "tcp"
    session_ttl: 30
    session_delay: 10
    session_scheme: "https"
    session_host: "consul.example.com"
    session_port: 8500
    session_token: "abcd1234"
    session_state: "present"
    session_validate_certs: true

  tasks:
    - name: Create Consul session
      community.general.consul_session:
        name: "{{ session_name }}"
        id: "{{ session_id }}"
        datacenter: "{{ session_datacenter }}"
        node: "{{ session_node }}"
        checks: "{{ session_checks }}"
        ttl: "{{ session_ttl }}"
        delay: "{{ session_delay }}"
        scheme: "{{ session_scheme }}"
        host: "{{ session_host }}"
        port: "{{ session_port }}"
        token: "{{ session_token }}"
        state: "{{ session_state }}"
        validate_certs: "{{ session_validate_certs }}"