---
- name: Manage IP interfaces on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false
  vars:
    interface_name: GigabitEthernet0/0/1
    ipv4_interface_addr: "10.0.0.1"
    ipv4_interface_mask: "255.255.255.0"
    ipv6_interface_addr: "2001:db8::1"
    ipv6_interface_mask: "64"
  tasks:
    - name: Configure IPv4 interface
      community.network.ce_ip_interface:
        addr: "{{ ipv4_interface_addr }}"
        interface: "{{ interface_name }}"
        ipv4_type: network
        mask: "{{ ipv4_interface_mask }}"
        state: present
      register: ipv4_interface_result
      ignore_errors: true

    - name: Print IPv4 interface result
      debug:
        var: ipv4_interface_result

    - name: Configure IPv6 interface
      community.network.ce_ip_interface:
        addr: "{{ ipv6_interface_addr }}"
        interface: "{{ interface_name }}"
        ipv6_type: "manual"
        mask: "{{ ipv6_interface_mask }}"
        state: present
      register: ipv6_interface_result
      ignore_errors: true

    - name: Print IPv6 interface result
      debug:
        var: ipv6_interface_result