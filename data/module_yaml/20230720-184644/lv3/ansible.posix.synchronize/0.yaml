---
- name: Latent Type-Related Bug Finder
  hosts: localhost
  gather_facts: no

  vars:
    - src: "/path/to/source/dir"
    - dest: "/path/to/destination/dir"

  tasks:
    - name: Create configuration values with bytes and strings
      set_fact:
        src_bytes: "{{ src | b64encode }}"
        dest_bytes: "{{ dest | b64encode }}"

    - name: Synchronize files from source to destination
      synchronize:
        src: "{{ src_bytes | b64decode }}"
        dest: "{{ dest_bytes | b64decode }}"
        archive: "true"
        checksum: "false"
        compress: "true"
        copy_links: "false"
        delay_updates: "true"
        delete: "true"
        dirs: "false"
        existing_only: "true"
        group: "false"
        link_dest:
          - "/path/to/symlink/1"
          - "/path/to/symlink/2"
        links: "false"
        mode: "0755"
        owner: "false"
        partial: "true"
        perms: "false"
        private_key: "/path/to/private/key"
        recursive: "true"
        rsync_opts:
          - "--exclude=*.log"
          - "--exclude=*.txt"
        rsync_path: "/usr/bin/rsync"
        rsync_timeout: 300
        set_remote_user: "false"
        src: "{{ src_bytes | b64decode }}"
        ssh_connection_multiplexing: "true"
        times: "false"
        use_ssh_args: "true"
        verify_host: "false"

      register: result

    - debug:
        var: result