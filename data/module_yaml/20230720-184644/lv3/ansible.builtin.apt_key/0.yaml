---
- name: Manage APT keys
  hosts: localhost
  become: true

  tasks:
    - name: Add GPG key from URL
      apt_key:
        url: "{{ apt_key_url | b64decode }}"
        state: present

    - name: Add GPG key from file
      apt_key:
        file: "{{ apt_key_file }}"
        state: present

    - name: Add GPG key with specific ID and keyring
      apt_key:
        id: "{{ apt_key_id }}"
        keyring: "{{ apt_key_keyring }}"
        state: present

  vars:
    apt_key_url: "aHR0cHM6Ly9leGFtcGxlLmNvbS9rZXkuZ3Bn"  # Base64 encoded string
    apt_key_file: "/path/to/key.gpg"
    apt_key_id: !binary |
      VGhpcyBpcyBhIG5lZWQgdHlwZSBkYXRhIGJlZm9yZSB3aXRob3V0IG1vZGVs
    apt_key_keyring: "/path/to/keyring.gpg"