---
- hosts: localhost
  gather_facts: false

  tasks:
    - name: Test the influxdb_database module
      influxdb_database:
        database_name: '{{ "test_database" | b64encode }}'
        hostname: 10.1.1.1
        password: '{{ "password" | b64encode }}'
        path: /var/lib/influxdb
        port: 8086
        proxies:
          http: '{{ {"http": "proxy.example.com:8080"} }}'
          https: '{{ {"https": "proxy.example.com:8443"} }}'
        retries: '{{ 3 }}'
        ssl: yes
        state: present
        timeout: '{{ 10 }}'
        udp_port: '{{ 4444 }}'
        use_udp: no
        username: '{{ "admin" | b64encode }}'
        validate_certs: no
      register: result

    - debug:
         var: result