---
- name: Test profitbricks_nic module
  hosts: localhost
  gather_facts: false
  
  vars:
    datacenter: "MY_DATA_CENTER"
    lan: "MY_LAN"
    server: "MY_SERVER"
    name: "MY_NIC"
    state: "present"
    subscription_user: "admin"
    subscription_password: "password"
    wait: true
    wait_timeout: 300

  tasks:
    - name: Configure profitbricks_nic with bytes and strings
      community.general.profitbricks_nic:
        datacenter: "{{ datacenter | b64encode }}"
        lan: "{{ lan | b64encode }}"
        name: "{{ name | b64encode }}"
        server: "{{ server | b64encode }}"
        state: "{{ state | b64encode }}"
        subscription_user: "{{ subscription_user | b64encode }}"
        subscription_password: "{{ subscription_password | b64encode }}"
        wait: "{{ wait | bool }}"
        wait_timeout: "{{ wait_timeout | int }}"

      register: result

    - name: Print profitbricks_nic module output
      debug:
        var: result

    - name: Print decoded configuration values
      debug:
        msg: |
          Decoded Configuration Values:
          - datacenter: {{ datacenter | b64decode }}
          - lan: {{ lan | b64decode }}
          - name: {{ name | b64decode }}
          - server: {{ server | b64decode }}
          - state: {{ state | b64decode }}
          - subscription_user: {{ subscription_user | b64decode }}
          - subscription_password: {{ subscription_password | b64decode }}
          - wait: {{ wait }}
          - wait_timeout: {{ wait_timeout }}