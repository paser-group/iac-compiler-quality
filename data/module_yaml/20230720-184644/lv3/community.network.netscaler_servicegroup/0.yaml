---
- name: Test playbook for exposing latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include the module
      include_vars:
        file: "vars/module_vars.yml"

    - name: Create invalid service group configuration
      community.network.netscaler_servicegroup:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        validate_certs: "{{ validate_certs }}"
        state: present
        servicegroupname: "{{ servicegroupname }}"
        cacheable: true
        maxclient: "100GB"
        comment: "{{ comment }}"
      register: result

    - name: Display the result
      debug:
        var: result