- name: Add hosts to inventory dynamically
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add Ubuntu host to inventory
      ansible.builtin.add_host:
        name: "{{ host }}"
        groups: ubuntu
        ansible_host: "{{ host_ip }}"
      loop:
        - name: ubuntu1
          host: ubuntu1
          host_ip: 10.1.1.1
      vars:
        ansible_connection: docker

    - name: Add Alpine host to inventory
      ansible.builtin.add_host:
        name: "{{ host }}"
        groups: alpine
        ansible_host: "{{ host_ip }}"
      loop:
        - name: alpine1
          host: alpine1
          host_ip: 10.1.1.2
      vars:
        ansible_connection: docker

    - name: Add CentOS host to inventory
      ansible.builtin.add_host:
        name: "{{ host }}"
        groups: centos
        ansible_host: "{{ host_ip }}"
      loop:
        - name: centos1
          host: centos1
          host_ip: 10.1.1.3
      vars:
        ansible_connection: docker

    - name: Add RedHat host to inventory
      ansible.builtin.add_host:
        name: "{{ host }}"
        groups: redhat
        ansible_host: "{{ host_ip }}"
      loop:
        - name: redhat1
          host: redhat1
          host_ip: 10.1.1.4
      vars:
        ansible_connection: docker

    - name: Print dynamically added hosts
      debug:
        var: groups.all