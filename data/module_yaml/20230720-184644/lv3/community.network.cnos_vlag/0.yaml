- name: CNOS VLAG Playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure VLAG on device
      cnos_vlag:
        deviceType: "{{ deviceType }}"
        host: "{{ host }}"
        username: "{{ username }}"
        password: "{{ password }}"
        enablePassword: "{{ enablePassword }}"
        outputfile: "{{ outputfile }}"
        vlagArg1: "{{ vlagArg1 }}"
        vlagArg2: "{{ vlagArg2 }}"
        vlagArg3: "{{ vlagArg3 }}"
        vlagArg4: "{{ vlagArg4 }}"
      register: result

    - name: Debug result
      debug:
        var: result


- name: Test Case - Triggering latent type-related bugs
  hosts: localhost
  gather_facts: false

  vars:
    deviceType: "cnos"
    host: "10.1.1.1"
    username: "admin"
    password: "password"
    enablePassword: "enable_password"
    outputfile: "/path/to/output.txt"
    vlagArg1: ['list', 'of', 'values']
    vlagArg2: 100
    vlagArg3: '{"key": "value"}'
    vlagArg4: '{{ vlagArg3 }}'

  tasks:
    - include_tasks: cnos_vlag.yml