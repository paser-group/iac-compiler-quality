- name: Test ansible.builtin.wait_for module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Wait for a condition with bytes and strings
      ansible.builtin.wait_for:
        host: "{{ host }}"
        port: "{{ port }}"
        timeout: "{{ timeout }}"
        delay: "{{ delay }}"
        sleep: "{{ sleep }}"
        exclude_hosts: "{{ exclude_hosts }}"
        active_connection_states: "{{ active_connection_states }}"
        search_regex: "{{ search_regex }}"
        state: "{{ state }}"
        msg: "{{ msg }}"
        path: "{{ path }}"
        connect_timeout: "{{ connect_timeout }}"
      vars:
        host: "10.1.1.1"
        port: 22
        timeout: '5'
        delay: 1
        sleep: 2
        exclude_hosts:
          - "10.1.1.2"
        active_connection_states:
          - "SYN_SENT"
        search_regex: "Hello, World!"
        state: "present"
        msg: "Condition met!"
        path: "/var/log/test.log"
        connect_timeout: 10