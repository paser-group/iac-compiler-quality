- name: Install Jenkins plugin
  hosts: localhost
  gather_facts: false
  become: true

  vars:
    plugin_config:
      name: my-plugin
      url: https://example.com/plugins/my-plugin.jar
      version: 1.0.0
      jenkins_home: /var/lib/jenkins
      latest_plugins_url_segments:
        - latest
        - plugins
      with_dependencies: true
      force: true
      timeout: 60
      validate_certs: false

  tasks:
    - name: Install Jenkins plugin
      community.general.jenkins_plugin:
        name: "{{ plugin_config.name }}"
        url: "{{ plugin_config.url }}"
        version: "{{ plugin_config.version }}"
        jenkins_home: "{{ plugin_config.jenkins_home }}"
        latest_plugins_url_segments: "{{ plugin_config.latest_plugins_url_segments }}"
        with_dependencies: "{{ plugin_config.with_dependencies }}"
        force: "{{ plugin_config.force }}"
        timeout: "{{ plugin_config.timeout }}"
        validate_certs: "{{ plugin_config.validate_certs }}"
      register: result

    - name: Print plugin installation result
      debug:
        var: result