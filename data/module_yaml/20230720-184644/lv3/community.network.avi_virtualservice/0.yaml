---
- name: Test Playbook
  hosts: localhost
  connection: local

  vars:
    # Test case 1: Configuration value with a string
    string_value: "Test String"

    # Test case 2: Configuration value with bytes
    bytes_value: "{{ string_value | b64encode }}"

  tasks:
    - name: Create Virtual Service
      community.network.avi_virtualservice:
        controller: "https://{{ controller }}"
        username: "{{ username }}"
        password: "{{ password }}"
        name: "{{ string_value }}"
        tenant: "{{ string_value }}"
        description: "{{ bytes_value }}"
        state: "{{ string_value }}"
        api_version: "{{ string_value }}"
        tenant_uuid: "{{ bytes_value }}"
        ip_address: "{{ bytes_value }}"
        port_uuid: "{{ string_value }}"
        subnet_uuid: "{{ bytes_value }}"
        use_vip_as_snat: "{{ bytes_value }}"
        vrf_context_ref: "{{ string_value }}"
        ssl_profile_ref: "{{ bytes_value }}"
        pool_ref: "{{ string_value }}"
        network_profile_ref: "{{ bytes_value }}"
        snat_ip: "{{ bytes_value }}"
        type: "{{ string_value }}"
        analytics_policy: "{{ string_value }}"
        analytics_profile_ref: "{{ bytes_value }}"
        api_context: "{{ string_value }}"
        auto_allocate_ip: "{{ bytes_value }}"
        enable_rhi: "{{ bytes_value }}"
        tenant_ref: "{{ string_value }}"
        state_update: "{{ string_value }}"
        ignore_failed_nodes: "{{ bytes_value }}"
        delay_fairness: "{{ bytes_value }}"
        on_demand: "{{ bytes_value }}"
        performance_limits: "{{ string_value }}"
        se_group_ref: "{{ bytes_value }}"
        ssl_key_and_certificate_refs: "{{ string_value }}"
        string_value: "{{ bytes_value }}"
        url: "{{ string_value }}"
        vip: "{{ bytes_value }}"
        weight: "{{ bytes_value }}"
        use_bridge_ip_as_vip: "{{ bytes_value }}"
      register: result

    - name: Display result
      debug:
        var: result