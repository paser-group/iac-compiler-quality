---
- name: Reset switch startup configuration
  hosts: switches
  gather_facts: false

  tasks:
    - name: Reset switch configuration
      community.network.cnos_factory:
        deviceType: "{{ device_type }}"
        host: "{{ inventory_hostname }}"
        username: "{{ username | to_bytes }}"
        password: "{{ password }}"
        enablePassword: "{{ enable_password | to_int }}"
        outputfile: "{{ output_file }}"
        state: factory
      register: result

    - name: Debug result
      debug:
        var: result