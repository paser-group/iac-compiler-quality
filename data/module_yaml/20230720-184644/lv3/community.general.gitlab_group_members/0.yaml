---
- name: Test playbook for the 'community.general.gitlab_group_members' module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include the 'community.general.gitlab_group_members' module
      include_vars:
        file: roles/gitlab/defaults/main.yml

    - name: Import GitLab group members
      community.general.gitlab_group_members:
        api_url: "{{ gitlab_api_url }}"
        api_token: "{{ gitlab_api_token }}"
        gitlab_group: "{{ gitlab_group }}"
        gitlab_user: "{{ gitlab_users }}"
        gitlab_users_access: "{{ gitlab_users_access }}"
        purge_users: "{{ purge_users }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
        access_level: "admin"
        api_job_token: b'ThisIsAJobToken'
        api_oauth_token: b'ThisIsAnOAuthToken'
        api_password: b'ThisIsAPassword'
        api_username: b'ThisIsAUsername'
      register: result

    - name: Print the result
      debug:
        var: result