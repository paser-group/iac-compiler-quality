- name: Test playbook for community.network.netscaler_cs_action module
  hosts: localhost
  gather_facts: false

  vars:
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "http"
    nitro_timeout: 10
    nsip: "10.1.1.1"
    validate_certs: false

  tasks:
    - name: Create config with bytes and strings
      community.network.netscaler_cs_action:
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        nitro_protocol: "{{ nitro_protocol }}"
        nitro_timeout: "{{ nitro_timeout }}"
        nsip: "{{ nsip }}"
        validate_certs: "{{ validate_certs }}"
        name: test_config
        comment: "{{ item.comment }}"
        save_config: "{{ item.save_config }}"
        targetlbvserver: "{{ item.targetlbvserver }}"
        targetvserver: "{{ item.targetvserver }}"
        targetvserverexpr: "{{ item.targetvserverexpr }}"
        state: present
      with_items:
        - { comment: 'Test comment with bytes', save_config: true, targetlbvserver: None, targetvserver: None, targetvserverexpr: None }
        - { comment: 'Test comment with strings', save_config: false, targetlbvserver: None, targetvserver: None, targetvserverexpr: None }
        - { comment: b'Test comment with bytes', save_config: true, targetlbvserver: None, targetvserver: None, targetvserverexpr: None }
        - { comment: 'Test comment with strings', save_config: b'false', targetlbvserver: None, targetvserver: None, targetvserverexpr: None }
        - { comment: 'Test comment with strings', save_config: true, targetlbvserver: b'None', targetvserver: None, targetvserverexpr: None }
        - { comment: 'Test comment with strings', save_config: true, targetlbvserver: None, targetvserver: b'None', targetvserverexpr: None }
        - { comment: 'Test comment with strings', save_config: true, targetlbvserver: None, targetvserver: None, targetvserverexpr: b'None' }