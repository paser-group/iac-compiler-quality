---
- name: Test playbook for community.general.openwrt_init module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Install required packages
      package:
        name: "{{ item }}"
        state: present
      loop:
        - docker
        - python-docker-py

    - name: Create Docker network
      docker_network:
        name: node-net
        subnet: 10.1.1.0/24
        gateway: 10.1.1.254
        state: present

    - name: Create Docker container - ubuntu1
      docker_container:
        name: ubuntu1
        image: ubuntu
        state: started
        network_mode: host
        command: sleep infinity

    - name: Create Docker container - alpine1
      docker_container:
        name: alpine1
        image: alpine
        state: started
        network_mode: host
        command: sleep infinity

    - name: Create Docker container - centos1
      docker_container:
        name: centos1
        image: centos
        state: started
        network_mode: host
        command: sleep infinity

    - name: Create Docker container - redhat1
      docker_container:
        name: redhat1
        image: redhat
        state: started
        network_mode: host
        command: sleep infinity

    - name: Test openwrt_init module
      community.general.openwrt_init:
        enabled: true
        name: "some_name"
        pattern: "#"
        state: "present"
      register: result

    - name: Print debug information
      debug:
        var: result
...