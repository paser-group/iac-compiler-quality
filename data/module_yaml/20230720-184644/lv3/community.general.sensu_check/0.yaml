---
- name: Test playbook for community.general.sensu_check module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create sensu check configuration
      community.general.sensu_check:
        aggregate: true
        backup: true
        command: 'echo "This is a command"'
        custom:
          custom_key: "This is a custom value"
        dependencies:
          - dependency1
          - dependency2
        handle: true
        handlers:
          - handler1
          - handler2
        high_flap_threshold: 10
        interval: 60
        low_flap_threshold: 5
        metric: true
        name: "sensu_check_name"
        occurrences: 5
        path: "/etc/sensu/checks"
        publish: true
        refresh: 30
        source: "sensu_check_source"
        standalone: true
        state: "present"
        subdue_begin: "2022-01-01T00:00:00Z"
        subdue_end: "2022-01-02T00:00:00Z"
        subscribers:
          - subscriber1
          - subscriber2
        timeout: 120
        ttl: 3600
      register: sensu_check_result

    - debug:
        var: sensu_check_result