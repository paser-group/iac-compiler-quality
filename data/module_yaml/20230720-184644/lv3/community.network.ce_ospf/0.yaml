- name: Manage OSPF configuration on HUAWEI devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Configure OSPF
      community.network.ce_ospf:
        addr: "{{ item.addr | default(None) }}"
        area: "{{ item.area | default(None) }}"
        auth_key_id: "{{ item.auth_key_id | default(None) }}"
        auth_mode: "{{ item.auth_mode | default(None) }}"
        auth_text_md5: "{{ item.auth_text_md5 | default(None) }}"
        auth_text_simple: "{{ item.auth_text_simple | default(None) }}"
        mask: "{{ item.mask | default(None) }}"
        max_load_balance: "{{ item.max_load_balance | default(None) }}"
        nexthop_addr: "{{ item.nexthop_addr | default(None) }}"
        nexthop_weight: "{{ item.nexthop_weight | default(None) }}"
        process_id: "{{ item.process_id | default(None) }}"
        state: "{{ item.state | default(None) }}"
      loop:
        - { addr: '10.1.1.1', area: '0', auth_key_id: 1, auth_mode: 'simple', auth_text_md5: 'Abc@123', auth_text_simple: 'admin', mask: '255.255.255.0', max_load_balance: 8, nexthop_addr: '192.168.1.1', nexthop_weight: '5000', process_id: 1, state: 'present' }
        - { addr: '10.1.1.2', area: '', auth_key_id: 'OSPF_AUTH', auth_mode: 0, auth_text_md5: '', auth_text_simple: 0, mask: '', max_load_balance: '', nexthop_addr: '', nexthop_weight: None, process_id: None, state: 'absent' }
        - { addr: '10.1.1.3', area: '1', auth_key_id: 'KEY1', auth_mode: 'md5', auth_text_md5: 'MySecretKey', auth_text_simple: None, mask: '32', max_load_balance: 1, nexthop_addr: '10.2.2.2', nexthop_weight: '100', process_id: '2', state: 'present' }
        - { addr: None, area: 0, auth_key_id: '', auth_mode: None, auth_text_md5: 'HelloWorld', auth_text_simple: '123456', mask: 255, max_load_balance: '', nexthop_addr: '192.168.1.254', nexthop_weight: 500, process_id: 1, state: 'absent' }