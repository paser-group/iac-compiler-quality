---
- name: Test mail module
  hosts: localhost
  gather_facts: False
  
  tasks:
    - name: Send email
      community.general.mail:
        host: smtp.example.com
        port: 587
        username: user@example.com
        password: password
        sender: user@example.com
        to: ["recipient@example.com"]
        subject: "Test email"
        body: "This is a test email."
        charset: "UTF-8"
        secure: "starttls"
        timeout: "10"
      register: result
      
    - name: Print result
      debug:
        var: result