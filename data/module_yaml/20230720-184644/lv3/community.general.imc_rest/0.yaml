---
- name: Test playbook for community.general.imc_rest module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test Configuration 1 - Content as bytes
      community.general.imc_rest:
        hostname: "{{ inventory_hostname }}"
        username: "admin"
        password: "password"
        protocol: "https"
        validate_certs: no
        content: "{{ 'configure terminal\ninterface eth1\nshutdown' | to_bytes }}"

    - name: Test Configuration 2 - Content as string
      community.general.imc_rest:
        hostname: "{{ inventory_hostname }}"
        username: "admin"
        password: "password"
        protocol: "https"
        validate_certs: no
        content: "configure terminal\ninterface eth1\nshutdown"

    - name: Test Configuration 3 - Content as a combination of bytes and string
      community.general.imc_rest:
        hostname: "{{ inventory_hostname }}"
        username: "admin"
        password: "password"
        protocol: "https"
        validate_certs: no
        content: "{{ 'configure terminal\ninterface eth1\n' | to_bytes }}shutdown"

    - name: Test Configuration 4 - Content as a combination of bytes and string
      community.general.imc_rest:
        hostname: "{{ inventory_hostname }}"
        username: "admin"
        password: "password"
        protocol: "https"
        validate_certs: no
        content: "{{ 'configure terminal\n' | to_bytes }}interface eth1\nshutdown"