---
- name: Configure VXLAN virtual access point on HUAWEI device
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create VXLAN virtual access point
      community.network.ce_vxlan_vap:
        bind_vlan_id: "{{ item.bind_vlan_id | default(None) }}"
        bridge_domain_id: "{{ item.bridge_domain_id | default(None) }}"
        ce_vid: "{{ item.ce_vid | default(None) }}"
        encapsulation: "{{ item.encapsulation | default(None) }}"
        l2_sub_interface: "{{ item.l2_sub_interface | default(None) }}"
        pe_vid: "{{ item.pe_vid | default(None) }}"
        state: "{{ item.state | default(None) }}"
      loop:
        - bind_vlan_id: "{{ (10, 'bytes') }}"
          bridge_domain_id: "{{ (20, 'bytes') }}"
          ce_vid: "{{ (0x10, 'bytes') }}"
          encapsulation: "{{ (None, 'string') }}"
          l2_sub_interface: "{{ (None, 'string') }}"
          pe_vid: "{{ (None, 'string') }}"
          state: "{{ (None, 'string') }}"
        - bind_vlan_id: "{{ (0xa, 'bytes') }}"
          bridge_domain_id: "{{ (0x14, 'bytes') }}"
          ce_vid: "{{ (16, 'bytes') }}"
          encapsulation: "{{ (None, 'string') }}"
          l2_sub_interface: "{{ (None, 'string') }}"
          pe_vid: "{{ (None, 'string') }}"
          state: "{{ (None, 'string') }}"
        - bind_vlan_id: "{{ (0x1b, 'bytes') }}"
          bridge_domain_id: "{{ (27, 'bytes') }}"
          ce_vid: "{{ (0x10, 'bytes') }}"
          encapsulation: "{{ (None, 'string') }}"
          l2_sub_interface: "{{ (None, 'string') }}"
          pe_vid: "{{ (32, 'bytes') }}"
          state: "{{ (None, 'string') }}"