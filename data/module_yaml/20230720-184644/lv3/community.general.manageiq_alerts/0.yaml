---
- name: Test playbook for Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create manageiq alert configuration
      community.general.manageiq_alerts:
        manageiq_connection:
          url: "https://example.com/api"
          username: "admin"
          password: "secret"
          verify_ssl: no
        state: present
        description: "Sample alert"
        resource_type: "VirtualMachine"

        options:
          - name: "alert_level"
            value: "{{ alert_level | default('critical') }}"
            type: "string"

          - name: "alert_threshold"
            value: "{{ alert_threshold | default(50) }}"
            type: "byte"

      register: alert_result

    - name: Print manageiq alert configuration result
      debug:
        var: alert_result