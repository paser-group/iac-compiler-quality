---
- name: Test Ansible Latent Type-Related Bug
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Create firewall policy
      community.general.clc_firewall_policy:
        destination: ["10.1.1.1/32"]
        destination_account_alias: "string"
        enabled: "true"
        firewall_policy_id: "string"
        location: "string"
        ports: ["80/tcp", "443/tcp"]
        source: ["10.1.1.2/32"]
        source_account_alias: "string"
        state: "present"
        wait: "false"
      register: result_create

    - debug:
        var: result_create

    - name: Update firewall policy
      community.general.clc_firewall_policy:
        firewall_policy_id: "{{ result_create.firewall_policy.firewall_policy_id }}"
        state: "absent"
      register: result_update

    - debug:
        var: result_update

    - name: Delete firewall policy
      community.general.clc_firewall_policy:
        firewall_policy_id: "{{ result_create.firewall_policy.firewall_policy_id }}"
        state: "absent"
      register: result_delete

    - debug:
        var: result_delete