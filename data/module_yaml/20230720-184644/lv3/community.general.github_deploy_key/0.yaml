- name: Manage GitHub deploy keys
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create deploy key
      community.general.github_deploy_key:
        github_url: https://github.com/username/repo.git
        repo: repo
        key: |
          ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC8jvFtD8vlT8GKhBInnU0C9/bNkQzHphZ19itWHt4T7apEgviB3p6ui9TDkIKi9gXQz9f/P7fFrrYt6sXSQE6Gwcb5FPhmCZX02WjIZUXNrY4vwxoYtLgW6smqX932G4rjP9FbGCSoB8nLgTDYpAqWA7WzqhdCjyTUFWDZgyQZg/2kdQ08wfZIjfng4thTOdm6Tve3t1ddZP3J6P8J4Bf7b+up7M28YqqRWKjpTGiODjIW9VV4LYO3A2Kyl9yMcxC1XVmDHWawZ20/7qHEqGy1frFsN17z7yVZd8nzt/Nn0YUoIYf6ylY2x3y/fkF2R72NQVqQeSs+ZgKrKKaU8yzxg6RcLSpkqMJfLMzpoYZFmptVQlDZMnro8N+BDHf8dXN8R0ao11xzRYv/ZJJH5p9EDwiHZ0QAuBMEpq2Poa5sh7JpV33HHVI8+GpXGuogPIVuHppW+fXXBC9ejZSKxPHSZfo1zZwIvg8Z5Ys8oxkyhZjwW+dhvzCuoh1MgiBse1+kqjjJAhSQe3HP5BYKemT8qANPZ3kj9maS/Pqgma5fpyH1lYw+6NHPpq3XBzVCJazjGZ7VoiYsG845Q8haXN8Mr/6AZ9wbuCSNZib0K1NjtTTtBrQ4Db/0asyg2ZkSBt4SnIjsDcXK8RO4/iXCp6t8w==

  tasks:
    - name: Remove deploy key
      community.general.github_deploy_key:
        github_url: https://github.com/username/repo.git
        repo: repo
        key: |
          ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACgQC5DYNHpZ27k+npUICmb9ewSM871aFpCltzUa8tSqdVpMfl0xjJzS+Lw0g3z7fEjkVRop46bXus3QfFtgi5YTRko8b6S/VETNcdJTKs1wMdLrYiNfgZEEewVRMsizC9/26EGBkGG0QK5h/eW7Y6jyeh8z81a68cnpE3WoCGMZZBHwl05qD9DxYedXtajP7etlBf3044HeRUpB6Wk0YO3z6Lks+xLZLh2/BXDZu7xAfkDaP8wcPLERaaocECeJqjO+B5yPGSXD6I1pjbbXXqXNh+UpjqcjuT3PRkmMudCpHFD25FMzR7c0t+oIZc8vETwIJ8kdZG8l2ZHppT1SdF8vRyTAX8vv7FvN1XLWPXkXLLTcLMbNXFvQcaFVy9ARNHld48cmfIW+EriBw/CX4NU0IuWzxvmKgL56BBz/5f6OeKj4WzrMdtH7qLZYQgrAgVUbbK9V0iwODqT3fJAnSgwC9gmsZctbi/rp8Jm5R9KweriWwtGqRva9+19YuK3yYrHLkVy0/KdhG1CfqzqfyRNNT/eLQ=

  tasks:
    - name: Update deploy key
      community.general.github_deploy_key:
        github_url: https://github.com/username/repo.git
        repo: repo
        key: |
          ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACgQC5DYNHpZ27k+npUICmb9ewSM871aFpCltzUa8tSqdVpMfl0xjJzS+Lw0g3z7fEjkVRop46bXus3QfFtgi5YTRko8b6S/VETNcdJTKs1wMdLrYiNfgZEEewVRMsizC9/26EGBkGG0QK5h/eW7Y6jyeh8z81a68cnpE3WoCGMZZBHwl05qD9DxYedXtajP7etlBf3044HeRUpB6Wk0YO3z6Lks+xLZLh2/BXDZu7xAfkDaP8wcPLERaaocECeJqjO+B5yPGSXD6I1pjbbXXqXNh+UpjqcjuT3PRkmMudCpHFD25FMzR7c0t+oIZc8vETwIJ8kdZG8l2ZHppT1SdF8vRyTAX8vv7FvN1XLWPXkXLLTcLMbNXFvQcaFVy9ARNHld48cmfIW+EriBw/CX4NU0IuWzxvmKgL56BBz/5f6OeKj4WzrMdtH7qLZYQgrAgVUbbK9V0iwODqT3fJAnSgwC9gmsZctbi/rp8Jm5R9KweriWwtGqRva9+19YuK3yYrHLkVy0/KdhG1CfqzqfyRNNT/eLQ=

  tasks:
    - name: List deploy keys
      community.general.github_deploy_key:
        github_url: https://github.com/username/repo.git
        repo: repo
        state: list