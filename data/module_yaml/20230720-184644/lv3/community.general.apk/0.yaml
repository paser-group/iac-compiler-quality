---
- name: Test playbook for 'community.general.apk' module
  hosts: all
  gather_facts: false

  tasks:
    - name: Install packages
      community.general.apk:
        name: "{{ item }}"
        state: present
      loop:
        - httpd
        - nginx
        - python3
        - "{{ 'b'+'\xe5\xae\x89\xe8\xa3\x85' }}"

    - name: Update packages
      community.general.apk:
        name: "{{ item }}"
        state: latest
      loop:
        - httpd
        - nginx
        - python3
        - "{{ 'b'+'\xe6\x9b\xb4\xe6\x96\xb0' }}"

    - name: Remove packages
      community.general.apk:
        name: "{{ item }}"
        state: absent
      loop:
        - httpd
        - nginx
        - python3
        - "{{ 'b'+'\xe5\x88\xa0\xe9\x99\xa4' }}"