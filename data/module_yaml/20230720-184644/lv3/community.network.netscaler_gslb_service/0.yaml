- name: Ansible Latent Bug Finder
  hosts: localhost
  gather_facts: false

  vars:
    nitro_user: "admin"
    nitro_pass: "password"
    nitro_protocol: "http"
    nitro_timeout: 10

    nsip: "10.1.1.1"  # NetScaler IP address

    servicename: "gslb-service"

    nitro_api_endpoint: "{{ nitro_protocol }}://{{ nsip }}"
    nitro_headers:
      Accept: "application/json"
      Authorization: "{{ (nitro_user + ':' + nitro_pass) | b64encode }}"

  tasks:
    - name: Create a gslb service with invalid values
      community.network.netscaler_gslb_service:
        nsip: "{{ nsip }}"
        nitro_user: "{{ nitro_user }}"
        nitro_pass: "{{ nitro_pass }}"
        try_mutual_information: true
        config:
          - appflowlog: 1234  # Invalid data type
            cip: []
            cipheader: 5678  # Invalid data type
            clttimeout: 1.5  # Invalid data type
            cnameentry: true  # Invalid data type
            comment: 9876  # Invalid data type
            downstateflush: "enabled"  # Invalid data type
            hashid: null  # Invalid data type
            healthmonitor: "yes"  # Invalid data type
            ipaddress: {}  # Invalid data type
            maxaaausers: 1000  # Invalid data type
            maxbandwidth: "unlimited"  # Invalid data type
            maxclient: -1  # Invalid data type
            monitor_bindings: { name: "monitor1", type: "http" }  # Invalid data type
            monthreshold: "70 Mbps"  # Invalid data type
            publicip: 10.1.1.2  # Invalid data type
            publicport: "80"  # Invalid data type
            save_config: "no"  # Invalid data type
            servername: null  # Invalid data type
            servicetype: ["tcp", "udp"]  # Invalid data type
            sitepersistence: 10  # Invalid data type
            siteprefix: "site1"  # Invalid data type
            state: "present"
            validate_certs: "true"  # Invalid data type
      register: result

    - name: Show output
      debug:
        var: result