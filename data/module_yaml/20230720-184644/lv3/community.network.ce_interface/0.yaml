- name: Configure physical interface
  hosts: localhost
  gather_facts: false
  vars:
    admin_state: null
    description: null
    interface: null
    interface_type: null
    l2sub: true
    mode: null
    state: null

  tasks:
    - name: Enable interface
      community.network.ce_interface:
        admin_state: "{{ admin_state }}"
        description: "{{ description }}"
        interface: "{{ interface }}"
        interface_type: "{{ interface_type }}"
        l2sub: "{{ l2sub }}"
        mode: "{{ mode }}"
        state: "{{ state }}"
      vars:
        admin_state: "up"
        description: "Gigabit Ethernet interface"
        interface: "GigabitEthernet0/0/1"
        interface_type: "ethernet"
        mode: "access"
        state: "present"

- name: Test playbook
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test with bytes and strings
      community.network.ce_interface:
        admin_state: "{{ admin_state }}"
        description: "{{ description }}"
        interface: "{{ interface }}"
        interface_type: "{{ interface_type }}"
        l2sub: "{{ l2sub }}"
        mode: "{{ mode }}"
        state: "{{ state }}"
      vars:
        admin_state: "down"
        description: "1000 Mbps Ethernet interface"
        interface: b"GigabitEthernet0/0/1"
        interface_type: "optical"
        mode: "trunk"
        state: "absent"