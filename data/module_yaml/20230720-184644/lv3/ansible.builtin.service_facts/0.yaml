---
- name: Service Facts Bug Hunt
  hosts: all
  gather_facts: false

  tasks:
    - name: Retrieve service facts
      ansible.builtin.service_facts:
        register: service_facts

    # Task 1 - Verify the services have been fetched correctly
    - name: Display service facts
      debug:
        var: service_facts

    # Task 2 - Test case 1: Provide a string value for service name
    - name: Test case 1 - String value for service name
      debug:
        var: service_facts.services['{{ service_name_string }}']

    # Task 3 - Test case 2: Provide a bytes value for service name
    - name: Test case 2 - Bytes value for service name
      debug:
        var: service_facts.services['{{ service_name_bytes }}']