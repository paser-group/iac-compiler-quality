---
- name: Test 'community.general.archive' module
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Create archive containing both bytes and strings
      community.general.archive:
        path: "/tmp/archive_files"
        dest: "/tmp/archive.tar.gz"
        format: "gz"
        exclude_path:
          - "/tmp/archive_files/exclude_dir"
        exclusion_patterns:
          - "*.log"
        force_archive: false
        group: "root"
        mode: 0644
        owner: "root"
        remove: false
        selevel: "s0"
        serole: "object_r"
        setype: "public_content_t"
        seuser: "system_u"
        unsafe_writes: true
      register: archive_result

    - name: Display archive creation result
      debug:
        var: archive_result