---
- name: Test playbook for Ansible latent type-related bug exploration
  hosts: localhost
  gather_facts: false

  vars:
    api_password: "{{ 'password' | b64encode }}"
    api_url: "https://example.com/api"
    api_username: "username"
    id: 1
    name: "template_name"
    state: "present"
    template: "template_content"
    validate_certs: true
    wait_timeout: 60

  tasks:
    - name: Include the community.general.one_template module
      include_vars:
        file: "{{ playbook_dir }}/tasks/one_template_vars.yml"

    - name: Run the community.general.one_template module
      community.general.one_template:
        api_password: "{{ api_password }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        id: "{{ id }}"
        name: "{{ name }}"
        state: "{{ state }}"
        template: "{{ template }}"
        validate_certs: "{{ validate_certs }}"
        wait_timeout: "{{ wait_timeout }}"
      register: result

    - name: Debug module output
      debug:
        var: result