---
- name: Test IPA Host Module
  hosts: all
  gather_facts: false
  tasks:
    - name: Test type-based bugs with bytes and strings
      community.general.ipa_host:
        description: "Test description"
        force: true
        fqdn: "test.localdomain"
        ip_address: "10.1.1.{{ inventory_index + 1 }}"
        ipa_host: "b'ipa.test.local'"
        ipa_pass: "b'Passw0rd'"
        ipa_port: 1234
        ipa_prot: "https"
        ipa_timeout: 30
        ipa_user: "b'admin'"
        mac_address:
          - "00:11:22:33:44:55"
          - "b'AA:BB:CC:DD:EE:FF'"
        ns_hardware_platform: "x86_64"
        ns_host_location: "b'Building A'"
        ns_os_version: "b'CentOS 8'"
        random_password: false
        state: present
        update_dns: true
        user_certificate:
          - "certificate.pem"
          - "b'certificate.key'"
        validate_certs: false
      register: ipa_result

    - name: Display IPA Host result
      debug:
        var: ipa_result