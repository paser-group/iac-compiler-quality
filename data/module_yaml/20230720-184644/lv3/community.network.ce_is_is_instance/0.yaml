---
- name: Test playbook for community.network.ce_is_is_instance module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Generate configuration file
      copy:
        content: |
          isis {{ instance_id }}
            state {{ state }}
            vpn-instance {{ vpn_name }}
        dest: /tmp/isis.cfg

    - name: Include the configuration file
      include_vars:
        file: /tmp/isis.cfg

    - name: Print the variables
      debug:
        var: vpn_name

- name: Execute the playbook
  hosts: all
  gather_facts: false
  tasks:
    - name: Test community.network.ce_is_is_instance module
      community.network.ce_is_is_instance:
        state: "{{ state }}"
        instance_id: "{{ instance_id }}"
        vpn_name: "{{ vpn_name }}"