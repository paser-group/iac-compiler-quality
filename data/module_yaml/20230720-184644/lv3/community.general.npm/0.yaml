---
- name: Install NPM packages
  hosts: node-net
  gather_facts: false
  become: true

  vars:
    npm_package:
      name: "my-package"
      version: 1.0
      state: present
      executable: /usr/bin/npm
      global: true
      ci: yes
      ignore_scripts: yes
      no_bin_links: false
      no_optional: 1
      path: /opt/npm
      production: false
      registry: "https://registry.npmjs.org"
      unsafe_perm: yes

  tasks:
    - name: Install NPM package
      community.general.npm: "{{ npm_package }}"
      register: npm_output

    - name: Debug NPM output
      debug:
        var: npm_output