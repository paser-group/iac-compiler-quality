---
- name: Test BGP EVPN configuration on HUAWEI
  hosts: localhost
  gather_facts: false

  vars:
    advertise_l2vpn_evpn: "hello"
    advertise_router_type: 200
    as_number: test
    bgp_instance: 100
    peer_address: "1.2.3.4"
    peer_enable: "true"
    peer_group_name: 10.0.0.1
    state: present
    vpn_name: "test-vpn"

  tasks:
    - name: Configure BGP EVPN
      community.network.ce_evpn_bgp:
        advertise_l2vpn_evpn: "{{ advertise_l2vpn_evpn }}"
        advertise_router_type: "{{ advertise_router_type }}"
        as_number: "{{ as_number }}"
        bgp_instance: "{{ bgp_instance }}"
        peer_address: "{{ peer_address }}"
        peer_enable: "{{ peer_enable }}"
        peer_group_name: "{{ peer_group_name }}"
        state: "{{ state }}"
        vpn_name: "{{ vpn_name }}"
      register: result

    - name: Debug output
      debug:
        var: result