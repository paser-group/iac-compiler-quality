---
- name: Test Ansible module for latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test case 1 - Configuration with bytes and strings
      community.network.aruba_config:
        backup: true
        backup_options:
          backup_dir: /path/to/backup
        encrypt: true
        intended_config: |
          hostname {{ inventory_hostname }}
          password {{ some_password|b64encode }}
          enable password {{ some_enable_password|b64encode }}
          interface {{ some_interface }} description {{ some_description }}
        src: config.cfg

    - name: Test case 2 - Configuration with only strings
      community.network.aruba_config:
        backup: false
        encrypt: false
        intended_config: |
          hostname {{ inventory_hostname }}
          password {{ some_password }}
          enable password {{ some_enable_password }}
          interface {{ some_interface }} description {{ some_description }}
        src: config.cfg

    - name: Test case 3 - Configuration with only bytes
      community.network.aruba_config:
        backup: true
        backup_options:
          backup_dir: /path/to/backup
        encrypt: true
        intended_config: |
          hostname {{ inventory_hostname|b64encode }}
          password {{ some_password|b64encode }}
          enable password {{ some_enable_password|b64encode }}
          interface {{ some_interface|b64encode }} description {{ some_description|b64encode }}
        src: config.cfg