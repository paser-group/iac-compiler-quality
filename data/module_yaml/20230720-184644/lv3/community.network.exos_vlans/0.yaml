- name: Configure VLANs on Extreme switch
  hosts: switches
  gather_facts: false
  become: true

  vars:
    vlans:
      - id: 10
        name: "VLAN 10"
        state: present
      - id: 20
        name: "VLAN 20"
        state: present
      - id: 30
        name: b"VLAN 30"
        state: present
      - id: 40
        name: "VLAN 40"
        state: present
      - id: 50
        name: "VLAN 50"
        state: present
      - id: 60
        name: b"VLAN 60"
        state: present
      - id: 70
        name: "VLAN 70"
        state: present

  tasks:
    - name: Create VLANs
      community.network.exos_vlans:
        config:
          - "{{ item.id }} name {{ item.name }}"
        state: "{{ item.state }}"
      loop: "{{ vlans }}"