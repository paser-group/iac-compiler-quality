---
- name: Test playbook for latent type-related bugs
  hosts: localhost
  gather_facts: false
  
  vars:
    api_key: "my_api_key"
    auth_endpoint: "https://identity.api.rackspacecloud.com/v2.0/"
    certificate: "/path/to/certificate.pem"
    credentials: "/path/to/credentials.txt"
    enabled: true
    env: "production"
    https_redirect: true
    identity_type: "rackspace"
    intermediate_certificate: "/path/to/intermediate.crt"
    loadbalancer: "lb_name"
    private_key: "/path/to/private_key.pem"
    region: "dfw"
    secure_port: 443
    secure_traffic_only: true
    state: "present"
    tenant_id: "my_tenant_id"
    tenant_name: "my_tenant_name"
    username: "my_username"
    validate_certs: true
    wait: true
    wait_timeout: 300

  tasks:
    - name: Test with mixed type configuration
      community.general.rax_clb_ssl:
        api_key: "{{ api_key | to_bytes }}"
        auth_endpoint: "{{ auth_endpoint }}"
        certificate: "{{ certificate | to_bytes }}"
        credentials: "{{ credentials }}"
        enabled: "{{ enabled }}"
        env: "{{ env | to_bytes }}"
        https_redirect: "{{ https_redirect }}"
        identity_type: "{{ identity_type | to_bytes }}"
        intermediate_certificate: "{{ intermediate_certificate | to_bytes }}"
        loadbalancer: "{{ loadbalancer | to_bytes }}"
        private_key: "{{ private_key | to_bytes }}"
        region: "{{ region | to_bytes }}"
        secure_port: "{{ secure_port }}"
        secure_traffic_only: "{{ secure_traffic_only }}"
        state: "{{ state | to_bytes }}"
        tenant_id: "{{ tenant_id | to_bytes }}"
        tenant_name: "{{ tenant_name | to_bytes }}"
        username: "{{ username | to_bytes }}"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_timeout: "{{ wait_timeout }}"

      register: result

    - name: Debug result
      debug:
        var: result