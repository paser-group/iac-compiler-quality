- name: Test playbook for community.network.pn_log_audit_exception module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create log audit exception
      community.network.pn_log_audit_exception:
        pn_access: "{{ item.access }}"
        pn_audit_type: "{{ item.audit_type }}"
        pn_cliswitch: "{{ item.cliswitch }}"
        pn_pattern: "{{ item.pattern }}"
        pn_scope: "{{ item.scope }}"
        state: "{{ item.state }}"
      loop:
        - { access: "rw", audit_type: "auditlog", cliswitch: "exclude", pattern: "bytes", scope: "zone", state: "present" }
        - { access: "rw", audit_type: "syslog", cliswitch: "include", pattern: "strings", scope: "global", state: "absent" }

      register: result

    - name: Debug module output
      debug:
        var: result