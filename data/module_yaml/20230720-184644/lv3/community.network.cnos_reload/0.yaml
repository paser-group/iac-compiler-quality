---
- name: Trigger Type-Related Bugs in cnos_reload module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Perform switch restart
      community.network.cnos_reload:
        host: "{{ inventory_hostname }}"
        username: "admin"
        password: "password"
        enablePassword: "enable_password"
        deviceType: "switch"
        outputfile: "/tmp/reload_output.txt"
      register: reload_result

    # Test Cases
    - name: Create configuration value with both bytes and string
      vars:
        bytes_value: !!binary |-
          Zm9vCg==
        string_value: "bar"
      debug:
        msg: "Bytes value: '{{ bytes_value }}', String value: '{{ string_value }}'"
    
    - name: Perform switch restart with bytes and string values
      community.network.cnos_reload:
        host: "{{ inventory_hostname }}"
        username: "admin"
        password: "{{ bytes_value }}"
        enablePassword: "{{ string_value }}"
        deviceType: "switch"
        outputfile: "/tmp/reload_output.txt"
      register: reload_result_with_values
      
    - name: Display reload result with bytes and string values
      debug:
        var: reload_result_with_values