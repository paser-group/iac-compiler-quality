---
- name: Test playbook to uncover latent type-related bugs
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Roll back configuration
      community.network.cnos_rollback:
        host: "{{ host }}"
        username: "{{ username }}"
        password: "{{ password }}"
        enablePassword: "{{ enablePassword }}"
        outputfile: "{{ outputfile }}"
        deviceType: "{{ deviceType }}"
        configType: "{{ configType }}"
        protocol: "{{ protocol }}"
        rcpath: "{{ rcpath }}"
        rcserverip: "{{ rcserverip }}"
        serverusername: "{{ serverusername }}"
        serverpassword: "{{ serverpassword }}"
      vars:
        host: !binary |-
          LzEwLjEuMS4x
        username: !binary |-
          YWRtaW5pc3RyYXRvci5jb20=
        password: !binary |-
          cGFzc3dvcmQ=
        enablePassword: !binary |-
          ZW5hYmxlX3Bhc3N3b3Jk
        outputfile: !binary |-
          cm9sbGJhY2tfbmFtZQ==
        deviceType: !binary |-
          Y25vcw==
        configType: null
        protocol: null
        rcpath: null
        rcserverip: null
        serverusername: null
        serverpassword: null
      register: result
      changed_when: false

    - name: Debug module output
      debug:
        var: result