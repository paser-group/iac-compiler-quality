---
- name: Test Heuristic-based Latent Type-Related Bugs in Ansible Module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Configure Spectrum Device
      community.general.spectrum_device:
        state: "{{ state }}"
        device: "{{ device }}"
        url: "{{ url }}"
        url_username: "{{ url_username }}"
        url_password: "{{ url_password }}"
        landscape: "{{ landscape }}"
        community: "{{ community }}"
        agentport: "{{ agentport }}"
        use_proxy: "{{ use_proxy }}"
        validate_certs: "{{ validate_certs }}"
      vars:
        state: present
        device: "10.1.1.1"
        url: "https://example.com"
        url_username: "admin"
        url_password: "P@ssw0rd"
        landscape: "linux"
        community: "ansible"
        agentport: 443
        use_proxy: false
        validate_certs: true

    - name: Test Heuristic - Mixing Bytes and Strings
      community.general.spectrum_device:
        state: "{{ state }}"
        device: "{{ device }}"
        url: "{{ url }}"
        url_username: "{{ url_username }}"
        url_password: "{{ url_password }}"
        landscape: "{{ landscape }}"
        community: "{{ community }}"
        agentport: "{{ agentport }}"
        use_proxy: "{{ use_proxy }}"
        validate_certs: "{{ validate_certs }}"
      vars:
        state: present
        device: "{{ device | b64encode }}"
        url: "{{ url | b64encode }}"
        url_username: "{{ url_username | b64encode }}"
        url_password: "{{ url_password | b64encode }}"
        landscape: "linux"
        community: "{{ community | b64encode }}"
        agentport: "{{ agentport }}"
        use_proxy: "{{ use_proxy }}"
        validate_certs: "{{ validate_certs }}"