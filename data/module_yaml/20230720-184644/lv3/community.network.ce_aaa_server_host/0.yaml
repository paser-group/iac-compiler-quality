---
- name: Manage AAA server host configuration on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  vars:
    aaa_server_host_config:
      - hwtacacs_is_public_net: true
        hwtacacs_is_secondary_server: true
        hwtacacs_server_host_name: "tacacs-server"
        hwtacacs_server_ip: "10.1.1.1"
        hwtacacs_server_ipv6: "2001:db8::1"
        hwtacacs_server_type: "shared"
        hwtacacs_template: "tacacs-template"
        hwtacacs_vpn_name: "vpn-test"
        local_ftp_dir: "/var/ftp"
        local_password: "password123"
        local_service_type: "pppoe"
        local_user_group: "admins"
        local_user_level: "15"
        local_user_name: "admin"
        radius_group_name: "radius-group"
        radius_server_ip: "10.1.1.2"
        radius_server_ipv6: "2001:db8::2"
        radius_server_mode: "standard"
        radius_server_name: "radius-server"
        radius_server_port: "1812"
        radius_server_type: "shared"
        radius_vpn_name: "radius-vpn"
        state: present

  tasks:
    - name: Manage AAA server host configuration
      community.network.ce_aaa_server_host:
        host: "{{ inventory_hostname }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        aaa_server_host: "{{ aaa_server_host_config }}"
      register: result

    - name: Debug result
      debug:
        var: result