---
- name: Test Ansible Latent Bugs for community.general.riak module
  hosts: localhost
  gather_facts: False

  tasks:
    - name: Create Riak Configuration
      community.general.riak:
        command: create_config
        config_dir: "/etc/riak"
        http_conn: "127.0.0.1:8098"
        target_node: "riak1@127.0.0.1"
        validate_certs: True
        wait_for_handoffs: 10
        wait_for_ring: 5
        wait_for_service: "riak_kv"

    - name: Test Case 1 - Invalid config_dir (string instead of path)
      community.general.riak:
        command: create_config
        config_dir: "invalid_directory"
        http_conn: "127.0.0.1:8098"
        target_node: "riak1@127.0.0.1"
        validate_certs: True
        wait_for_handoffs: 10
        wait_for_ring: 5
        wait_for_service: "riak_kv"
      ignore_errors: True

    - name: Test Case 2 - Invalid validate_certs (string instead of bool)
      community.general.riak:
        command: create_config
        config_dir: "/etc/riak"
        http_conn: "127.0.0.1:8098"
        target_node: "riak1@127.0.0.1"
        validate_certs: "true"
        wait_for_handoffs: 10
        wait_for_ring: 5
        wait_for_service: "riak_kv"
      ignore_errors: True

    # Add more test cases based on the heuristic