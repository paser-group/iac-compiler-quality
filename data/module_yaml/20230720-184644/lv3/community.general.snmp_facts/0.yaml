- name: Test snmp_facts module
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Retrieve SNMP facts from nodes
      community.general.snmp_facts:
        community: 1234567890
        host: "{{ inventory_hostname }}"
        retries: "2"
        timeout: "30"
        version: 3
      register: snmp_result
      run_once: true

    - name: Display SNMP facts
      debug:
        var: snmp_result