---
- name: Solaris 11 Package Management
  hosts: solaris_nodes

  tasks:
    - name: Install packages
      community.general.pkg5:
        name:
          - 'pkg://package1'
          - 'pkg://package2'
          - 'pkg://package3'
        state: present
        accept_licenses: true
      become: true

    - name: Refresh package catalog
      community.general.pkg5:
        refresh: true
        be_name: global
        state: present
      become: true

    - name: Uninstall packages
      community.general.pkg5:
        name: 'pkg://package1'
        state: latest
      become: true