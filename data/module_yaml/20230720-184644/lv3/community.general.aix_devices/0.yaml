---
- name: Heuristic-based test playbook
  hosts: localhost
  gather_facts: false

  vars:
    network:
      nodes:
        - name: ubuntu1
          ip: 10.1.1.1
          distribution: ubuntu
        - name: alpine1
          ip: 10.1.1.2
          distribution: alpine
        - name: centos1
          ip: 10.1.1.3
          distribution: centos
        - name: redhat1
          ip: 10.1.1.4
          distribution: redhat
      subnet: 10.1.1.0/24
      gateway: 10.1.1.254

  tasks:
    - name: Create network nodes
      debug:
        msg: "{{ item.name }} - {{ item.ip }} - {{ item.distribution }}"
      with_items: "{{ network.nodes }}"

    - name: Create subnet
      debug:
        msg: "{{ network.subnet }}"

    - name: Create gateway
      debug:
        msg: "{{ network.gateway }}"

    - name: Trigger type-related bug
      debug:
        msg: "This task incorporates both bytes and strings"
      vars:
        my_var: "{{ 'string' | b64encode }}"
        # Trigger a latent bug by assigning a byte value to a string variable
        my_type_bug: "{{ 42 | string }}"