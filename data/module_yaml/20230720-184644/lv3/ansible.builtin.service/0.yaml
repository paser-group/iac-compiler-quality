- name: Test playbook for Ansible Latent Type-Related Bug Finder
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Start service with byte and string configuration
      ansible.builtin.service:
        name: "my_service"
        state: started
        pattern: "{{ 'my_pattern' | b64encode }}"
        use: "127.0.0.1"
      when: "'bytes' in '{{ var_type }}' and 'strings' in '{{ var_type }}'"

    - name: Stop service with integer configuration
      ansible.builtin.service:
        name: "my_service"
        state: stopped
        pattern: "{{ 123 | to_uuid }}"
        use: "localhost"
      when: "'integers' in '{{ var_type }}' and 'strings' in '{{ var_type }}'"

    - name: Restart service with byte and integer configuration
      ansible.builtin.service:
        name: "my_service"
        state: restarted
        pattern: "{{ 'another_pattern' | b64encode }}"
        use: "localhost"
      when: "'bytes' in '{{ var_type }}' and 'integers' in '{{ var_type }}'"