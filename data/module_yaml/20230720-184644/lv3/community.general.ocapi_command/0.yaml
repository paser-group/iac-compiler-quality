---
- name: Test playbook for ocapi_command module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Test case 1 - bytes and strings in configuration values
      community.general.ocapi_command:
        baseuri: "https://{{ inventory_hostname }}/ocapi"
        category: "settings"
        command: "get_config"
        job_name: "{{ 'Job1' | b64encode }}"
        password: "{{ 'Passw0rd' | b64encode }}"
        proxy_slot_number: "{{ 2 }}"
        timeout: "{{ 5 }}"
        update_image_path: "{{ '/path/to/image.png' }}"
        username: "admin"
      register: test_result_1

    - name: Test case 2 - bytes and strings in configuration values
      community.general.ocapi_command:
        baseuri: "https://{{ inventory_hostname }}/ocapi"
        category: "network"
        command: "ping"
        job_name: "Job2"
        password: "{{ 'Passw0rd' | b64encode }}"
        proxy_slot_number: "{{ '3' }}"
        timeout: 5
        update_image_path: "/path/to/image.png"
        username: "{{ 'admin' | b64encode }}"
      register: test_result_2

    - name: Display the test results
      debug:
        var: item
      loop:
        - "{{ test_result_1 }}"
        - "{{ test_result_2 }}"