---
- name: Create VLAN in Dimension Data Cloud
  hosts: localhost
  gather_facts: False

  vars:
    allow_expand: true
    description: "Test VLAN"
    location: "EU6"
    mcp_user: "my_username"
    mcp_password: "my_password"
    name: "test_vlan"
    network_domain: "my_network_domain"
    private_ipv4_base_address: "10.1.1.0"
    private_ipv4_prefix_size: 24
    region: "dd-eu"
    state: "present"
    validate_certs: false
    wait: true
    wait_poll_interval: 10
    wait_time: 300

  tasks:
    - name: Create VLAN
      community.general.dimensiondata_vlan:
        allow_expand: "{{ allow_expand }}"
        description: "{{ description }}"
        location: "{{ location }}"
        mcp_user: "{{ mcp_user }}"
        mcp_password: "{{ mcp_password }}"
        name: "{{ name }}"
        network_domain: "{{ network_domain }}"
        private_ipv4_base_address: "{{ private_ipv4_base_address }}"
        private_ipv4_prefix_size: "{{ private_ipv4_prefix_size }}"
        region: "{{ region }}"
        state: "{{ state }}"
        validate_certs: "{{ validate_certs }}"
        wait: "{{ wait }}"
        wait_poll_interval: "{{ wait_poll_interval }}"
        wait_time: "{{ wait_time }}"
      register: vlan_result

    - name: Debug Result
      debug:
        var: vlan_result