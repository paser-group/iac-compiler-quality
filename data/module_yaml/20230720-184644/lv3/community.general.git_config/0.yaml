---
- name: Test Configuration Playbook
  hosts: git_nodes
  gather_facts: false

  vars:
    # Define necessary variables here

  tasks:
    - name: Generate Git Config File for Ubuntu
      community.general.git_config:
        name: "{{ attribute_name }}"
        value: "{{ attribute_value }}"
        scope: "{{ attribute_scope }}"
        state: "{{ attribute_state }}"
      become: true
      become_user: "{{ ansible_user }}"
      when: ansible_distribution == 'Ubuntu'
      register: result_ubuntu

    - name: Generate Git Config File for Alpine
      community.general.git_config:
        name: "{{ attribute_name }}"
        value: "{{ attribute_value }}"
        repo: "{{ attribute_repo }}"
        state: "{{ attribute_state }}"
      become: true
      become_user: "{{ ansible_user }}"
      when: ansible_distribution == 'Alpine'
      register: result_alpine

    - name: Generate Git Config File for CentOS
      community.general.git_config:
        name: "{{ attribute_name }}"
        value: "{{ attribute_value }}"
        file: "{{ attribute_file }}"
        state: "{{ attribute_state }}"
      become: true
      become_user: "{{ ansible_user }}"
      when: ansible_distribution == 'CentOS'
      register: result_centos

    - name: Generate Git Config File for Red Hat
      community.general.git_config:
        name: "{{ attribute_name }}"
        value: "{{ attribute_value }}"
        state: "{{ attribute_state }}"
      become: true
      become_user: "{{ ansible_user }}"
      when: ansible_distribution == 'RedHat'
      register: result_redhat

    - name: Print Results
      debug:
        var: result_ubuntu
      when: result_ubuntu is defined

    - name: Print Results
      debug:
        var: result_alpine
      when: result_alpine is defined

    - name: Print Results
      debug:
        var: result_centos
      when: result_centos is defined

    - name: Print Results
      debug:
        var: result_redhat
      when: result_redhat is defined