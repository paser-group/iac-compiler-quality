---
- name: Test playbook for community.network.avi_vsvip module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create VsVip using bytes and strings combination
      community.network.avi_vsvip:
        controller: localhost
        username: admin
        password: "{{ vault_password }}"
        tenant: Default-Cloud
        avi_credentials:
          api_version: "17.2.9"
        name: "my_vsvip"
        tenant_uuid: "00112233-4455-6677-8899-aabbccddeeff"
        state: present
        vip:
          vnic:
            network_ref: "{{ '10.1.1.0/24' | ansible_filter('ipv4') | address }}_vs"
        vrf_context_ref: "/api/vrfcontext?tenant=admin&name=Shared-VRF"
        use_standard_alb: true
        tenant_ref: "/api/tenant?name=Default-Cloud&tenant=admin"
        east_west_placement: true
        cloud_ref: "/api/cloud?tenant=admin&name=Default-Cloud-AWS"
        api_context:
          admin: true
        dns_info:
          dns_vs_placement: SAME_SUBNET
          ttl: "1d"

    - name: Print the VsVip configuration
      debug:
        var: community_network_avi_vsvip