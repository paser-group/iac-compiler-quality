---
- name: Test community.general.lxc_container module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Create LXC container
      community.general.lxc_container:
        name: test_container
        state: started
        directory: /var/lib/lxc
        config: /var/lib/lxc/test_container/config
        backing_store: "lvm"
        vg_name: ansible
        lv_name: test_container
        fs_size: 5G
        fs_type: "ext4"
        thinpool: "lxc"
        lxc_path: /var/lib/lxc
        template: "ubuntu"
        template_options: "-r trusty"
        archive: true
        archive_path: /tmp/archive.tar.gz
        archive_compression: "gz"
        container_command: "echo 'Hello, World!'"
        container_log: true
        container_log_level: "verbose"
        container_config:
          - "lxc.network.type = veth"
          - "lxc.network.link = lxcbr0"
      register: result

    - name: Print the result
      debug:
        var: result