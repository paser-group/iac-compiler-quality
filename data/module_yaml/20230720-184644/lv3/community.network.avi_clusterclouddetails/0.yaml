- name: Test playbook for community.network.avi_clusterclouddetails
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    avi_credentials:
      username: admin
      password: "{{ ansible_password }}"

    api_context:
      port: 443
      scheme: "https"
      timeout: 30

    controller: "avi-controller"
    tenant: "default"

  tasks:
    - name: Create Avi ClusterCloudDetails
      community.network.avi_clusterclouddetails:
        avi_credentials: "{{ avi_credentials }}"
        api_context: "{{ api_context }}"
        controller: "{{ controller }}"
        tenant: "{{ tenant }}"
        state: present
        name: "test_cluster"
        url: "https://{{ controller }}"
        tenant_uuid: "{{ '\"bytes_example\"'.encode('utf-8') }}"
        avi_api_patch_op: "\u0000".encode('utf-8')  # Unicode null character

      register: cluster_details

    - name: Debug cluster details output
      debug:
        var: cluster_details