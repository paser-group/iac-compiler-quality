- name: ManageIQ Tags
  hosts: localhost
  gather_facts: false

  vars:
    manageiq_connection:
      url: "https://manageiq.example.com/api"
      username: "admin"
      password: "password"

    tags_to_add:
      - name: "tag1"
        value: "string_value"
        description: b"bytes_value"

  tasks:
    - name: Add tags to resource
      community.general.manageiq_tags:
        manageiq_connection: "{{ manageiq_connection }}"
        resource_id: 12345
        resource_name: "my_resource"
        resource_type: "vm"
        state: present
        tags: "{{ tags_to_add }}"
      register: result

    - name: Print module output
      debug:
        var: result