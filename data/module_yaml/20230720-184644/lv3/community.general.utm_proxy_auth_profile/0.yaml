---
- name: UTM Proxy Auth Profile Playbook
  hosts: docker_nodes
  become: true
  gather_facts: false

  tasks:
    - name: Create UTM Proxy Auth Profile
      community.general.utm_proxy_auth_profile:
        name: "test_profile"
        comment: "Test Profile"
        aaa:
          - "test_user1"
          - "test_user2"
        utm_host: "10.1.1.1"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "example_token"
        redirect_to_requested_url: true
        backend_mode: redirect
        backend_strip_basic_auth: true
        backend_user_prefix: "prefix"
        backend_user_suffix: "suffix"
        basic_prompt: "password"
        comment: "Test Comment"
        frontend_cookie: "session"
        frontend_cookie_secret: "secret"
        frontend_form: "login_form"
        frontend_form_template: ""
        frontend_login: "/login"
        frontend_logout: "/logout"
        frontend_mode: "form"
        frontend_realm: "Test Realm"
        frontend_session_allow_persistency: true
        frontend_session_lifetime: 1800
        frontend_session_lifetime_limited: false
        frontend_session_lifetime_scope: "test"
        frontend_session_timeout: 300
        frontend_session_timeout_enabled: true
        frontend_session_timeout_scope: "test"
        headers:
          X-Header1: "value1"
          X-Header2: "value2"
        logout_delegation_urls:
          - "http://example.com"
          - "https://www.example.com"
        logout_mode: "test"
        redirect_to_requested_url: true
        state: present
        utm_host: "10.1.1.1"
        utm_port: 8443
        utm_protocol: "https"
        utm_token: "example_token"
        validate_certs: true