---
- name: Manage sFlow configuration on HUAWEI devices
  hosts: huawei_devices
  gather_facts: false

  tasks:
    - name: Configure sFlow with bytes and strings
      community.network.ce_sflow:
        agent_ip: "192.168.0.1"
        collector_datagram_size: 1500
        collector_description: 5
        collector_id: "1"
        collector_ip: "10.0.0.1"
        collector_ip_vpn: "VPN001"
        collector_meth: "udp"
        collector_udp_port: "6343"
        counter_collector: true
        counter_interval: "60"
        export_route: true
        sample_collector: 1
        sample_direction: "ingress"
        sample_length: "256"
        sample_rate: "100"
        sflow_interface: 2
        source_ip: 3
        state: present
      register: result

    - name: Debug result
      debug:
        var: result