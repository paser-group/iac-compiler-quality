---
- name: Collect Enos facts from remote devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Gather facts using enos_facts module
      community.network.enos_facts:
        gather_subset: "{{ gather_subset }}"
        auth_pass: "{{ auth_pass }}"
        authorize: "{{ authorize }}"
      register: facts

  post_tasks:
    - name: Print facts
      debug:
        var: facts

# Define variables
vars:
  gather_subset: true
  auth_pass: "{{ lookup('file', '/tmp/auth_pass.txt') }}"
  authorize: "{{ auth_pass | bool }}"