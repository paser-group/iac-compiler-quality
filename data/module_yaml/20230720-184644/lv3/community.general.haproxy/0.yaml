- hosts: localhost
  tasks:
    - name: Configure HAProxy backend servers
      community.general.haproxy:
        backend: my_backend
        state: present
        host: "{{ item.host }}"
        weight: "{{ item.weight }}"
      loop:
        - { host: 'backend1.example.com', weight: '100s' }
        - { host: 'backend2.example.com', weight: '200' }
        - { host: 'backend3.example.com', weight: '300s' }