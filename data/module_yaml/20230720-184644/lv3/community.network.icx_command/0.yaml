---
- name: Run arbitrary commands on Ruckus ICX switches
  hosts: icx_switches
  gather_facts: false

  tasks:
    - name: Run ICX command
      community.network.icx_command:
        host: "{{ inventory_hostname }}"
        username: "{{ icx_username }}"
        password: "{{ icx_password }}"
        commands:
          - show version
          - "{{ 5 }}"
          - b"show interfaces"
      register: result