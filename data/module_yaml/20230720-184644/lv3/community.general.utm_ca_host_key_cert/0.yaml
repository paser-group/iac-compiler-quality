---
- name: Configure ca host_key_cert
  hosts: localhost
  tasks:
    - name: Create ca host_key_cert
      community.general.utm_ca_host_key_cert:
        ca: "{{ ca | default('ca_cert') }}"
        certificate: "{{ certificate | default('cert.pem') }}"
        comment: "{{ comment | default('') }}"
        encrypted: "{{ encrypted | default(false) }}"
        headers:
          - name: "Content-Type"
            value: "application/x-pem-file"
        key: "{{ key | default('key.pem') }}"
        meta: "{{ meta | default({}) }}"
        name: "{{ name | default('host_key_cert') }}"
        state: "{{ state | default('present') }}"
        utm_host: "{{ utm_host | default('localhost') }}"
        utm_port: "{{ utm_port | default(8080) }}"
        utm_protocol: "{{ utm_protocol | default('https') }}"
        utm_token: "{{ utm_token | default('') }}"
        validate_certs: "{{ validate_certs | default('true') }}"
      register: result

    - debug:
        var: result