---
- name: Test playbook for community.network.pn_access_list
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Include required collections
      include_collections:
        - community.network

    - name: Create access list configuration
      community.network.pn_access_list:
        pn_cliswitch: "{{ pn_cliswitch }}"
        pn_name: "{{ pn_name }}"
        pn_scope: "{{ pn_scope }}"
        pn_type: "{{ pn_type }}"
        state: "{{ state }}"
      vars:
        pn_cliswitch: 10.1.1.1
        pn_name: access_list1
        pn_scope: "{{ var }}"
        pn_type: dict
        state: present

  vars:
    pn_cliswitch: "{{ (1+1) if false else '10.1.1.1' }}"
    pn_name: "{{ pn_cliswitch | upper }}"
    pn_scope: "{{ pn_name | length }}"
    pn_type: (10, 20, 30)
    state: absent
    var: 10