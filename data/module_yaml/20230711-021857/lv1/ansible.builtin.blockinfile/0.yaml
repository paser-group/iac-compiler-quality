---
- name: Test Docker Nodes Using Blockinfile Module
  hosts: ubuntu1, alpine1, centos1, redhat1
  gather_facts: no

  tasks:
    - name: Insert Block Testing Mixed Case Sensitivity
      ansible.builtin.blockinfile:
        path: /etc/hosts
        block: |
          10.1.1.1 ubuntu1
          10.1.1.2 alpine1
          10.1.1.3 Centos1
          10.1.1.4 REDHAT1
        marker: "# {mark} ANSIBLE NODE LIST"
        backup: yes
        create: yes
        owner: root
        group: root
        mode: 0644
        validate: "chkconfig --test %s"
      become: yes

    - name: Insert Block By Modifying Case Sensitivity
      ansible.builtin.blockinfile:
        path: /etc/hosts
        block: |
          10.1.1.1 Ubuntu1
          10.1.1.2 ALPINE1
          10.1.1.3 centos1
          10.1.1.4 RedHat1
        marker: "# {mark} ANSIBLE MODIFIED NODE LIST"
        state: present
        backup: yes
        create: yes
        owner: root
        group: root
        mode: 0644
        validate: "chkconfig --test %s"
      become: yes

    - name: Remove Block By Altering Case Sensitivity
      ansible.builtin.blockinfile:
        path: /etc/hosts
        marker: "# {mark} ANSIBLE MODIFIED NODE LIST"
        state: absent
        backup: yes
        owner: root
        group: root
        mode: 0644
      become: yes
...