---
- name: Ansible type-related bug hunt
  hosts: all
  gather_facts: no
  vars:
    test_dir: /tmp/test_directory
    test_file: "{{ test_dir }}/copy_module_test"
    my_content: b"This is a bytearray string content"
    my_group: b"root"
    my_owner: b"root"
    my_mode: 755

  tasks:

  - name: Create a test directory
    file: 
      path: "{{ test_dir }}"
      state: directory

  - name: Test ansible 'copy' module with bytearray input types
    copy: 
      dest: "{{ test_file }}"
      content: "{{ my_content }}"
      group: "{{ my_group }}"
      owner: "{{ my_owner }}"
      mode: "{{ my_mode }}"
      backup: yes

  - name: Check the test file
    stat: path="{{ test_file }}"
    register: result

  - debug:
      var: result
...