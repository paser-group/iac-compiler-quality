---
- name: Find latent type-related bugs in Ansible compiler
  hosts: all
  gather_facts: False

  vars:
    docker_network:
      name: node-net
      subnet: 10.1.1.0/24
      gateway: 10.1.1.254

    docker_nodes:
      - { name: ubuntu1, ip: 10.1.1.1 }
      - { name: alpine1, ip: 10.1.1.2 }
      - { name: centos1, ip: 10.1.1.3 }
      - { name: redhat1, ip: 10.1.1.4 }

  tasks:
    - name: Execute non-string command by converting it to byte string
      ansible.builtin.command:
        cmd: b"echo hello world"  # Send non-string (byte-string) as command input
        strip_empty_ends: true  # Ensures the string output from command doesn't have leading/trailing white space
      
    - name: Execute command with byte-string directory path to change to
      ansible.builtin.command:
        cmd: "ls"
        chdir: b"/var/log"  # Send non-string (byte-string) as directory path
  
    - name: Execute command with byte-string 'creates' variable
      ansible.builtin.command:
        cmd: "touch /tmp/testfile"
        creates: b"/tmp/testfile"  # Send non-string (byte-string) as creates file path
  
    - name: Execute command with byte-string 'removes' variable
      ansible.builtin.command: 
        cmd: "rm /tmp/testfile"
        removes: b"/tmp/testfile"  # Send non-string (byte-string) as removes file path
...