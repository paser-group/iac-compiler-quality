---
- name: Test playbook for ansible.builtin.assemble module
  hosts: localhost
  gather_facts: false
  vars:
    dest_file: "/path/to/dest_file.txt"
    src_files:
      - "/path/to/src_files/file1.txt"
      - "/path/to/src_files/file2.txt"
  
  tasks:
    - name: Assemble configuration files
      ansible.builtin.assemble:
        src: "{{ item }}"
        dest: "{{ dest_file }}"
        delimiter: "{|}"
      loop: "{{ src_files }}"
      register: result
      
    - name: Debug task
      debug:
        var: result
        
    - name: Test case 1 - Mixed case sensitivity in delimiter
      ansible.builtin.assemble:
        src: "{{ item }}"
        dest: "{{ dest_file }}"
        delimiter: "{|}"
      loop: "{{ src_files }}"
      register: result_case_sensitivity
      
    - name: Debug task
      debug:
        var: result_case_sensitivity
      
    - name: Test case 2 - Mixed case sensitivity in destination file path
      ansible.builtin.assemble:
        src: "{{ item }}"
        dest: "{{ dest_file | upper }}"
        delimiter: "{|}"
      loop: "{{ src_files }}"
      register: result_case_sensitivity_dest
      
    - name: Debug task
      debug:
        var: result_case_sensitivity_dest