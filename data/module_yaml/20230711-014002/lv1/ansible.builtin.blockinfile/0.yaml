---
- name: Test Playbook
  hosts: all
  become: true
  tasks:
    - name: Insert block in file
      ansible.builtin.blockinfile:
        path: /path/to/file
        marker_begin: "ANSIBLE: BEGIN BLOCK"
        marker_end: "ANSIBLE: END BLOCK"
        block: |
          This is a test block.
          Config value: {{ mixed_case_string_value }}
      vars:
        mixed_case_string_value: "MixedCaseString"

    - name: Display contents of file
      ansible.builtin.shell:
        cmd: cat /path/to/file
      register: file_contents

    - name: Debug file contents
      ansible.builtin.debug:
        var: file_contents.stdout

    - name: Remove block from file
      ansible.builtin.blockinfile:
        path: /path/to/file
        marker_begin: "ANSIBLE: BEGIN BLOCK"
        marker_end: "ANSIBLE: END BLOCK"
        state: absent

    - name: Display contents of file after removal
      ansible.builtin.shell:
        cmd: cat /path/to/file
      register: file_contents_after_removal

    - name: Debug file contents after removal
      ansible.builtin.debug:
        var: file_contents_after_removal.stdout