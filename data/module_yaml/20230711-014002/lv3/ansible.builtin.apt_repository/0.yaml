---
- name: Test apt_repository module
  hosts: localhost
  gather_facts: false
  
  vars:
    codename: bionic
    filename: foo
    install_python_apt: false
    mode: "0644"
    repo: foo http://archive.ubuntu.com/ubuntu/ bionic main
    state: present
    update_cache: true
    update_cache_retries: "2"
    update_cache_retry_max_delay: 60
    validate_certs: false
  
  tasks:
    - name: Configure apt repository
      ansible.builtin.apt_repository:
        codename: "{{ codename }}"
        filename: "{{ filename }}"
        install_python_apt: "{{ install_python_apt }}"
        mode: "{{ mode }}"
        repo: "{{ repo }}"
        state: "{{ state }}"
        update_cache: "{{ update_cache }}"
        update_cache_retries: "{{ update_cache_retries }}"
        update_cache_retry_max_delay: "{{ update_cache_retry_max_delay }}"
        validate_certs: "{{ validate_certs }}"
      register: result
  
    - name: Debug result
      debug:
        var: result