---
- name: Test playbook for add_host module
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Add hosts and groups to inventory
      ansible.builtin.add_host:
        name: "{{ item.name | to_bytes }}"
        groups: "{{ item.groups | to_bytes }}"
      loop:
        - name: "ubuntu1"
          groups:
            - "linux"
        - name: "alpine1"
          groups:
            - "linux"
        - name: "centos1"
          groups:
            - "linux"
        - name: "redhat1"
          groups:
            - "linux"

- name: Print updated inventory
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Debug inventory
      debug:
        var: hostvars[inventory_hostname]